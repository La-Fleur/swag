<html>
<head><title> "An OOP FILECOPY" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to COPYMOVE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0017.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>PROGRAM </b></font>FileCopyDemo<font color="#000080">;         </font><font color="#008000"><i>{ FILECOPY.PAS }

</i></font><font color="#FF0000"><b>USES </b></font>Crt<font color="#000080">;

</font><font color="#FF0000"><b>TYPE
   </b></font>Action  <font color="#000080">= (</font>Input<font color="#000080">, </font>Output<font color="#000080">);
   </font>DataBlk <font color="#000080">= </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">512</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
   </font>FileObj <font color="#000080">= </font><font color="#FF0000"><b>OBJECT
     </b></font>fp <font color="#000080">: </font><font color="#FF0000"><b>FILE</b></font><font color="#000080">;
     </font><font color="#FF0000"><b>CONSTRUCTOR </b></font>OpenFile<font color="#000080">(</font>FileName<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
                           </font>FileAction<font color="#000080">: </font>Action<font color="#000080">);
     </font><font color="#FF0000"><b>PROCEDURE </b></font>ReadBlock<font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>fb<font color="#000080">: </font>DataBlk<font color="#000080">;
                            </font><font color="#FF0000"><b>VAR </b></font>Size<font color="#000080">: </font>integer<font color="#000080">);
     </font><font color="#FF0000"><b>PROCEDURE </b></font>WriteBlock<font color="#000080">(</font>fb<font color="#000080">: </font>DataBlk<font color="#000080">;
                                </font>size<font color="#000080">: </font>integer<font color="#000080">);
     </font><font color="#FF0000"><b>DESTRUCTOR </b></font>CloseFile<font color="#000080">;
   </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>CONSTRUCTOR </b></font>FileObj<font color="#000080">.</font>OpenFile<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>Assign<font color="#000080">(</font>fp<font color="#000080">, </font>FileName<font color="#000080">);
  </font><font color="#FF0000"><b>CASE </b></font>FileAction <font color="#FF0000"><b>of
    </b></font>Input<font color="#000080">: </font><font color="#FF0000"><b>BEGIN
      </b></font>Reset<font color="#000080">(</font>fp<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
      </font><font color="#FF0000"><b>IF </b></font>IOResult <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>THEN
        BEGIN
          </b></font>WriteLn<font color="#000080">(</font>FileName<font color="#000080">, </font><font color="#800000">' not found!'</font><font color="#000080">);
          </font>Halt<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
        </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
        </font>WriteLn<font color="#000080">(</font>FileName<font color="#000080">,</font><font color="#800000">' opened for read ... '</font><font color="#000080">);
      </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
    </font>Output<font color="#000080">: </font><font color="#FF0000"><b>BEGIN
      </b></font>Rewrite<font color="#000080">(</font>fp<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
      </font>WriteLn<font color="#000080">(</font>FileName<font color="#000080">,</font><font color="#800000">' opened for write ... '</font><font color="#000080">);
      </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>END</b></font><font color="#000080">; </font><font color="#008000"><i>{CASE}
</i></font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>DESTRUCTOR </b></font>FileObj<font color="#000080">.</font>CloseFile<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
   </b></font>Close<font color="#000080">(</font>fp<font color="#000080">);
   </font>WriteLn<font color="#000080">(</font><font color="#800000">'File closed ...'</font><font color="#000080">);
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>FileObj<font color="#000080">.</font>ReadBlock<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
   </b></font>BlockRead<font color="#000080">(</font>fp<font color="#000080">, </font>fb<font color="#000080">, </font>SizeOf<font color="#000080">(</font>fb<font color="#000080">), </font>Size<font color="#000080">);
   </font>WriteLn<font color="#000080">(</font><font color="#800000">'Reading '</font><font color="#000080">, </font>Size<font color="#000080">, </font><font color="#800000">' bytes ... '</font><font color="#000080">);
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>FileObj<font color="#000080">.</font>WriteBlock<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
   </b></font>BlockWrite<font color="#000080">(</font>fp<font color="#000080">, </font>fb<font color="#000080">, </font>Size<font color="#000080">);
   </font>WriteLn<font color="#000080">(</font><font color="#800000">'Writing '</font><font color="#000080">, </font>Size<font color="#000080">, </font><font color="#800000">' bytes ... '</font><font color="#000080">);
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>VAR
   </b></font>InFile<font color="#000080">, </font>OutFile <font color="#000080">: </font>FileObj<font color="#000080">;
   </font>Data<font color="#000080">: </font>DataBlk<font color="#000080">;
   </font>Size<font color="#000080">: </font>integer<font color="#000080">;

</font><font color="#FF0000"><b>BEGIN
   </b></font>ClrScr<font color="#000080">;
   </font>InFile<font color="#000080">.</font>OpenFile<font color="#000080">(</font><font color="#800000">'FILECOPY.PAS'</font><font color="#000080">, </font>Input<font color="#000080">);
   </font>OutFile<font color="#000080">.</font>OpenFile<font color="#000080">(</font><font color="#800000">'FILECOPY.CPY'</font><font color="#000080">, </font>Output<font color="#000080">);
   </font><font color="#FF0000"><b>REPEAT
      </b></font>InFile<font color="#000080">.</font>ReadBlock<font color="#000080">(</font>Data<font color="#000080">, </font>Size<font color="#000080">);
      </font>OutFile<font color="#000080">.</font>WriteBlock<font color="#000080">(</font>Data<font color="#000080">, </font>Size<font color="#000080">);
   </font><font color="#FF0000"><b>UNTIL </b></font>Size <font color="#000080">&lt;&gt; </font>SizeOf<font color="#000080">(</font>DataBlk<font color="#000080">);
   </font>InFile<font color="#000080">.</font>CloseFile<font color="#000080">;
   </font>OutFile<font color="#000080">.</font>CloseFile<font color="#000080">;
   </font>Write<font color="#000080">(</font><font color="#800000">'Press Enter to quit ... '</font><font color="#000080">);
   </font>ReadLn<font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to COPYMOVE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0017.PAS">Original</a><b>]</b></p></body>
</html>
