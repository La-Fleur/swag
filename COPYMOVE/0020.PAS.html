<html>
<head><title> "Simple File Copy" by IAN LIN</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to COPYMOVE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0020.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
From: IAN LIN
To just copy files, use buffers on the heap. Just make an array type that's
almost 64k in size. Use as many of these as needed that can fit in RAM and
blockread the data in. After you blockread all you can, close the file if
it's been fully read in. If it hasn't then don't close the input file yet.
Next you open the output file and dump everything in each buffer with
blockwrite. If you're done now, close both files, otherwise keep reading
all you can at once from the input file and blockwriting it to the output
file. }

</i></font><font color="#FF0000"><b>type
 </b></font>pbuf<font color="#000080">=^</font>buf<font color="#000080">;
 </font>buf<font color="#000080">=</font><font color="#FF0000"><b>record
  </b></font>n<font color="#000080">:</font>pbuf<font color="#000080">;
  </font>b<font color="#000080">:</font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">65530</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>var
 </b></font>buffer<font color="#000080">,</font>bufp<font color="#000080">:</font>pbuf<font color="#000080">;
 </font>bufc<font color="#000080">:</font>byte<font color="#000080">;
 </font>outf<font color="#000080">,</font>f<font color="#000080">:</font><font color="#FF0000"><b>file</b></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
 </b></font>bufp<font color="#000080">:=</font>new<font color="#000080">(</font>buffer<font color="#000080">);
 </font>assign<font color="#000080">(</font>f<font color="#000080">,</font><font color="#800000">'IT'</font><font color="#000080">);
 </font>reset<font color="#000080">(</font>f<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
 </font>blockread<font color="#000080">(</font>f<font color="#000080">,</font>bufp<font color="#000080">^,</font>sizeof<font color="#000080">(</font>bufp<font color="#000080">^);
 </font>assign<font color="#000080">(</font>outf<font color="#000080">,</font><font color="#800000">'OTHER'</font><font color="#000080">);
 </font>rewrite<font color="#000080">(</font>outf<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
 </font>blockwrite<font color="#000080">(</font>outf<font color="#000080">,</font>bufp<font color="#000080">^,</font>sizeof<font color="#000080">(</font>bufp<font color="#000080">^);
 </font>close<font color="#000080">(</font>f<font color="#000080">);
 </font>close<font color="#000080">(</font>outf<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>This <font color="#FF0000"><b>is </b></font>just an example so don<font color="#800000">'t expect it to be very useful. :)

</font><font color="#FF0000"><b>For </b></font>text files<font color="#000080">, </font><font color="#FF0000"><b>if </b></font>you want <font color="#FF0000"><b>to </b></font>modify them<font color="#000080">, </font>you may want <font color="#FF0000"><b>to </b></font>use linked
lists which point <font color="#FF0000"><b>to </b></font>a line at a time<font color="#000080">. </font>Remove unwanted lines from the list<font color="#000080">,
</font><font color="#FF0000"><b>and then </b></font>write it <font color="#FF0000"><b>to </b></font>the output <font color="#FF0000"><b>file</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to COPYMOVE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0020.PAS">Original</a><b>]</b></p></body>
</html>
