<html>
<head><title> "Fast Direct VIDEO writes" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to CRT SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0028.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#000000">rogram DirectW<font color="#000080">;
</font><font color="#008000"><i>{
  This program shows how to write directly to video memory.
  It will not work in protected mode. There is no reason
  to believe that this runs any faster than the CRT's
  Write procedure, but we're putting it out on the BBS in
  case you are interested.

  As always, this program comes with no guarrantees and even
  less support.
}

</i></font><font color="#FF0000"><b>var
  </b></font>VS<font color="#000080">: </font>Word<font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>VidSeg <font color="#000080">: </font>Word<font color="#000080">;
</font><font color="#FF0000"><b>begin
  If </b></font>Mem<font color="#000080">[</font><font color="#800000">$0000</font><font color="#000080">:</font><font color="#800000">$0449</font><font color="#000080">] = </font><font color="#800000">7 </font><font color="#FF0000"><b>Then </b></font>VidSeg <font color="#000080">:= </font><font color="#800000">$B000
  </font><font color="#FF0000"><b>Else </b></font>VidSeg <font color="#000080">:= </font><font color="#800000">$B800</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>MakeWord<font color="#000080">(</font>H<font color="#000080">, </font>L<font color="#000080">: </font>Byte<font color="#000080">): </font>Word<font color="#000080">; </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">mov ah, h
  mov al, L
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>WriteStr<font color="#000080">(</font>x<font color="#000080">, </font>y<font color="#000080">: </font>Integer<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>WriteStr<font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">; </font>Attr<font color="#000080">: </font>Integer<font color="#000080">);
</font><font color="#FF0000"><b>var
  </b></font>i<font color="#000080">: </font>Integer<font color="#000080">;
  </font>Loc<font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>dec<font color="#000080">(</font>y<font color="#000080">);
  </font>dec<font color="#000080">(</font>x<font color="#000080">);
  </font>Loc <font color="#000080">:= (</font><font color="#800000">80 </font><font color="#000080">* </font>y <font color="#000080">+ </font>x<font color="#000080">) * </font><font color="#800000">2</font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>Length<font color="#000080">(</font>WriteStr<font color="#000080">) </font><font color="#FF0000"><b>do begin
    </b></font>MemW<font color="#000080">[</font>VS<font color="#000080">:</font>Loc<font color="#000080">] := </font>MakeWord<font color="#000080">(</font>Attr<font color="#000080">, </font>Ord<font color="#000080">(</font>WriteStr<font color="#000080">[</font>i<font color="#000080">]));
    </font>inc<font color="#000080">(</font>Loc<font color="#000080">, </font><font color="#800000">2</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>var
  </b></font>S <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>S <font color="#000080">:= </font><font color="#800000">'Sambo'</font><font color="#000080">;
  </font>VS <font color="#000080">:= </font>VidSeg<font color="#000080">;
  </font>WriteStr<font color="#000080">(</font><font color="#800000">10</font><font color="#000080">,</font><font color="#800000">10</font><font color="#000080">, </font>S<font color="#000080">, </font><font color="#800000">14 </font><font color="#000080">+ </font><font color="#800000">1 </font><font color="#000080">* </font><font color="#800000">16</font><font color="#000080">);
  </font>ReadLn<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to CRT SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0028.PAS">Original</a><b>]</b></p></body>
</html>
