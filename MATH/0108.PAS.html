<html>
<head><title> "Computing Perfect(prime) Numbers" by SAMIEL@FASTLANE.NET</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to MATH SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0108.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt;Samiel (samiel@fastlane.net) wrote:
&gt;: Here's my fast and elegant code... snarf it and add it to SWAG...
&gt;: 
&gt;: {****************************************************************
&gt;: Perfect Numbers...
&gt;: 
&gt;: A Perfect number is a number whose divisors not including the original
&gt;: number add up to the original number.  An example is 6, 6=3*2*1=3+2+1
&gt;: and 28, 28=14*7*4*2*1=14+7+4+2+1.  The definition of a Perfect number
&gt;: can also be defined as,
&gt;: 2^(p-1)*(2^p-1) where p is prime and 2^p-1 is a Mersenne prime...
&gt;: 
&gt;: A Mersenne prime is defined as,
&gt;: 2^p-1 where p is prime and 2^p-1 is prime, so 2^2-1=3 is a Mersenne
&gt;: prime where p is 2, and 2^3-1=5 is a Mersenne prime where p is 3.
&gt;: 
&gt;: Mersenne primes under 2^32 (32-bit) are:
&gt;:   [2] -&gt; 3
&gt;:   [3] -&gt; 7
&gt;:   [5] -&gt; 31
&gt;:   [7] -&gt; 127
&gt;: [13] -&gt; 8191
&gt;: [17] -&gt; 131071
&gt;: [19] -&gt; 524287
&gt;: [31] -&gt; 2147483647
&gt;: 
&gt;: (Values of p are in braces [])
&gt;: 
&gt;: The Perfect numbers under 2^32 are:
&gt;: Perfect numbers...
&gt;:   [2] 6
&gt;:   [3] 28
&gt;:   [5] 496
&gt;:   [7] 8128
&gt;: [13] 33550336
&gt;: 
&gt;: (Values of p are in braces [])
&gt;: 
&gt;: Here is my code...
&gt;:
&gt;: ****************************************************************}

 </i></font><font color="#FF0000"><b>PROGRAM </b></font>Perfect<font color="#000080">;
 </font><font color="#008000"><i>{Computes Perfect Numbers...}

 </i></font><font color="#FF0000"><b>VAR
   </b></font>tmp<font color="#000080">,</font>num<font color="#000080">:</font>longint<font color="#000080">; </font><font color="#008000"><i>{Long Integer signed 32-bit (31-bit on each side)}
   </i></font>j<font color="#000080">,</font>k<font color="#000080">:</font>byte<font color="#000080">;

 </font><font color="#008000"><i>{ Slow? Fast? way to find primes, dividing by odd numbers }
 </i></font><font color="#FF0000"><b>Function </b></font>IsPrime<font color="#000080">(</font>num<font color="#000080">:</font>longint<font color="#000080">):</font>boolean<font color="#000080">;
 </font><font color="#FF0000"><b>Var
   </b></font>tmp<font color="#000080">:</font>boolean<font color="#000080">;
   </font>j<font color="#000080">:</font>longint<font color="#000080">;
 </font><font color="#FF0000"><b>Begin
   </b></font>tmp<font color="#000080">:=</font>true<font color="#000080">;
   </font><font color="#FF0000"><b>if </b></font>num <font color="#FF0000"><b>mod </b></font><font color="#800000">2</font><font color="#000080">=</font><font color="#800000">0 </font><font color="#FF0000"><b>then
     </b></font>tmp<font color="#000080">:=</font>false<font color="#000080">;
   </font><font color="#FF0000"><b>for </b></font>j<font color="#000080">:=</font><font color="#800000">3 </font><font color="#FF0000"><b>to </b></font>round<font color="#000080">(</font>sqrt<font color="#000080">(</font>num<font color="#000080">)) </font><font color="#FF0000"><b>do
     if </b></font>odd<font color="#000080">(</font>j<font color="#000080">) </font><font color="#FF0000"><b>then
       if </b></font>num <font color="#FF0000"><b>mod </b></font>j<font color="#000080">=</font><font color="#800000">0 </font><font color="#FF0000"><b>then
         </b></font>tmp<font color="#000080">:=</font>false<font color="#000080">;
   </font><font color="#FF0000"><b>if </b></font>num<font color="#000080">=</font><font color="#800000">2 </font><font color="#FF0000"><b>then
      </b></font>tmp<font color="#000080">:=</font>true<font color="#000080">;
   </font>IsPrime<font color="#000080">:=</font>tmp<font color="#000080">;
 </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

 </font><font color="#FF0000"><b>BEGIN
   </b></font>tmp<font color="#000080">:=</font><font color="#800000">2</font><font color="#000080">; </font><font color="#008000"><i>{2^1}
   </i></font>writeln<font color="#000080">(</font><font color="#800000">'Perfect numbers...'</font><font color="#000080">);
   </font><font color="#FF0000"><b>for </b></font>j<font color="#000080">:=</font><font color="#800000">2 </font><font color="#FF0000"><b>to </b></font><font color="#800000">31 </font><font color="#FF0000"><b>do
     begin
       </b></font>tmp<font color="#000080">:=</font>tmp<font color="#000080">*</font><font color="#800000">2</font><font color="#000080">; </font><font color="#008000"><i>{Raise 2 to another power}
       </i></font><font color="#FF0000"><b>if </b></font>IsPrime<font color="#000080">(</font>j<font color="#000080">) </font><font color="#FF0000"><b>then
         begin
           </b></font>num<font color="#000080">:=</font>tmp<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">;
           </font><font color="#FF0000"><b>if </b></font>IsPrime<font color="#000080">(</font>num<font color="#000080">) </font><font color="#FF0000"><b>then
             begin
               </b></font>num<font color="#000080">:=</font>num<font color="#000080">*(</font>tmp <font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">);
               </font>writeln<font color="#000080">(</font>num<font color="#000080">:</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">' is perfect'</font><font color="#000080">); </font><font color="#008000"><i>{Ignore negatives}
             </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
         </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>END</b></font><font color="#000080">.


&gt;: - </font>Samiel
<font color="#000080">&gt;: </font>samiel<font color="#000080">@</font>fastlane<font color="#000080">.</font>net
<font color="#000080">&gt;: </font>http<font color="#000080">:</font><font color="#008000"><i>//www.fastlane.net/~samiel
</i></font><font color="#000080">&gt;: 

&gt;</font>Considering that <font color="#800000">2</font><font color="#000080">^</font><font color="#800000">859433</font><font color="#000080">-</font><font color="#800000">1 </font><font color="#FF0000"><b>is </b></font>prime<font color="#000080">(</font><font color="#FF0000"><b>and is </b></font>the largest known prime<font color="#000080">), </font>there
<font color="#000080">&gt;</font>are obviously better methods<font color="#000080">.  </font>Use the Lucas<font color="#000080">-</font>Lehmer test<font color="#000080">.

&gt;</font>B<font color="#000080">(</font>n<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">) = </font>B<font color="#000080">(</font>n<font color="#000080">)^</font><font color="#800000">2 </font><font color="#000080">- </font><font color="#800000">2 </font><font color="#FF0000"><b>mod </b></font><font color="#000080">(</font><font color="#800000">2</font><font color="#000080">^</font>p<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">) </font>where B<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">)=</font><font color="#800000">4

</font><font color="#000080">&gt;</font><font color="#FF0000"><b>if </b></font>B<font color="#000080">(</font>n<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">) = </font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font><font color="#800000">2</font><font color="#000080">^</font>p<font color="#000080">-</font><font color="#800000">1 </font><font color="#FF0000"><b>is </b></font>prime<font color="#000080">.  </font>The division <font color="#FF0000"><b>is </b></font>a special <font color="#FF0000"><b>case and is
</b></font><font color="#000080">&gt;</font>done easily because <font color="#FF0000"><b>of </b></font>the all ONE<font color="#800000">'s when 2^p-1 is written in binary.  All
</font><font color="#000080">&gt;</font>that <font color="#FF0000"><b>is </b></font>necessary <font color="#FF0000"><b>is </b></font>a fast <font color="#FF0000"><b>implementation of </b></font>multiplication <font color="#FF0000"><b>and </b></font>this can
<font color="#000080">&gt;</font>be done <font color="#FF0000"><b>with </b></font>FFT<font color="#800000">'s.

</font><font color="#000080">&gt;</font>See http<font color="#000080">:</font><font color="#008000"><i>//www.utm.edu/research/primes/mersenne.shtml

</i></font><font color="#000080">&gt;</font><font color="#FF0000"><b>or for </b></font>software
<font color="#000080">&gt;</font>http<font color="#000080">:</font><font color="#008000"><i>//ourworld.compuserve.com/homepages/justforfun/prime.htm

</i></font>Well<font color="#000080">, </font>considering we are looking at numbers under <font color="#800000">32 </font>bits<font color="#000080">, </font>your code
would probably <font color="#FF0000"><b>not </b></font>get done <font color="#FF0000"><b>as </b></font>fast <font color="#FF0000"><b>as </b></font>mine<font color="#000080">, </font>though <font color="#FF0000"><b>in </b></font>the long run<font color="#000080">,
(</font>say over <font color="#800000">64 </font>bits <font color="#FF0000"><b>or </b></font>so<font color="#000080">) </font>it would<font color="#000080">.  </font>All the FFT<font color="#800000">'s and rather long
</font>multiplication would slow it down considerably<font color="#000080">.  </font>Even <font color="#FF0000"><b>if </b></font>you could get
a really fast <font color="#FF0000"><b>implementation of </b></font>FFT<font color="#800000">'s and multiplications, we'</font>re
talking about a net savings <font color="#FF0000"><b>of </b></font>about <font color="#000080">.</font><font color="#800000">625 </font>seconds <font color="#FF0000"><b>or </b></font>so <font color="#FF0000"><b>with </b></font>numbers
under <font color="#800000">32 </font>bits <font color="#FF0000"><b>on </b></font>a computer <font color="#FF0000"><b>with </b></font>a Math Processor<font color="#000080">... </font>so mine<font color="#800000">'s good
</font>enough<font color="#000080">... </font>although a few <font color="#FF0000"><b>of </b></font>multiplications could be taken <font color="#FF0000"><b>out</b></font><font color="#000080">...

- </font>Samiel
samiel<font color="#000080">@</font>fastlane<font color="#000080">.</font>net
http<font color="#000080">:</font><font color="#008000"><i>//www.fastlane.net/~samiel
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to MATH SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0108.PAS">Original</a><b>]</b></p></body>
</html>
