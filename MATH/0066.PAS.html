<html>
<head><title> "Complex Math Unit" by STEVE ROGERS</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to MATH SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0066.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#008000"><i>{Just for grins, here's a complex number unit I wrote come time back:}

</i></font><font color="#FF0000"><b>unit </b></font>complex<font color="#000080">;
</font><font color="#008000"><i>(*
 polar/rectangular conversions and complex math
 Steve Rogers, ~1993
*)

{----------------------}
</i></font><font color="#FF0000"><b>interface

type
  </b></font>tComplex<font color="#000080">=</font><font color="#FF0000"><b>record
    </b></font>r<font color="#000080">,             </font><font color="#008000"><i>{ real component }
    </i></font>x              <font color="#008000"><i>{ imaginary component }
      </i></font><font color="#000080">: </font>real<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>r2p<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>r<font color="#000080">,</font>p <font color="#000080">: </font>tComplex<font color="#000080">);
</font><font color="#FF0000"><b>procedure </b></font>p2r<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>p<font color="#000080">,</font>r <font color="#000080">: </font>tComplex<font color="#000080">);
</font><font color="#FF0000"><b>procedure </b></font>c_add<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>c1<font color="#000080">,</font>c2<font color="#000080">,</font>c3 <font color="#000080">: </font>tComplex<font color="#000080">);
</font><font color="#FF0000"><b>procedure </b></font>c_sub<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>c1<font color="#000080">,</font>c2<font color="#000080">,</font>c3 <font color="#000080">: </font>tComplex<font color="#000080">);
</font><font color="#FF0000"><b>procedure </b></font>c_mult<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>c1<font color="#000080">,</font>c2<font color="#000080">,</font>c3 <font color="#000080">: </font>tComplex<font color="#000080">);
</font><font color="#FF0000"><b>procedure </b></font>c_div<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>c1<font color="#000080">,</font>c2<font color="#000080">,</font>c3 <font color="#000080">: </font>tComplex<font color="#000080">);

</font><font color="#FF0000"><b>implementation

const
  </b></font>RADS<font color="#000080">=</font><font color="#800000">0.0174532</font><font color="#000080">; </font><font color="#008000"><i>{ degree to radian conversion constant }

{----------------------}
</i></font><font color="#FF0000"><b>procedure </b></font>r2p<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>r<font color="#000080">,</font>p <font color="#000080">: </font>tComplex<font color="#000080">);
</font><font color="#008000"><i>{ returns polar in degrees in p, given rectangular in r }
</i></font><font color="#FF0000"><b>begin
  </b></font>p<font color="#000080">.</font>r<font color="#000080">:= </font>sqrt<font color="#000080">(</font>sqr<font color="#000080">(</font>r<font color="#000080">.</font>r<font color="#000080">)+</font>sqr<font color="#000080">(</font>r<font color="#000080">.</font>x<font color="#000080">));
  </font>p<font color="#000080">.</font>x<font color="#000080">:= </font>arctan<font color="#000080">(</font>r<font color="#000080">.</font>x<font color="#000080">/</font>r<font color="#000080">.</font>r<font color="#000080">)/</font>RADS<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{----------------------}
</i></font><font color="#FF0000"><b>procedure </b></font>p2r<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>p<font color="#000080">,</font>r <font color="#000080">: </font>tComplex<font color="#000080">);
</font><font color="#008000"><i>{ returns rectangular in r, given polar in degrees in p }
</i></font><font color="#FF0000"><b>begin
  </b></font>r<font color="#000080">.</font>r<font color="#000080">:= </font>p<font color="#000080">.</font>r<font color="#000080">*</font>cos<font color="#000080">(</font>p<font color="#000080">.</font>x<font color="#000080">*</font>RADS<font color="#000080">);
  </font>r<font color="#000080">.</font>x<font color="#000080">:= </font>p<font color="#000080">.</font>r<font color="#000080">*</font>sin<font color="#000080">(</font>p<font color="#000080">.</font>x<font color="#000080">*</font>RADS<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{----------------------}
</i></font><font color="#FF0000"><b>procedure </b></font>c_add<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>c1<font color="#000080">,</font>c2<font color="#000080">,</font>c3 <font color="#000080">: </font>tComplex<font color="#000080">);
</font><font color="#008000"><i>{ adds c2 to c1, places result in c3 }
</i></font><font color="#FF0000"><b>begin
  </b></font>c3<font color="#000080">.</font>r<font color="#000080">:= </font>c1<font color="#000080">.</font>r<font color="#000080">+</font>c2<font color="#000080">.</font>r<font color="#000080">;
  </font>c3<font color="#000080">.</font>x<font color="#000080">:= </font>c1<font color="#000080">.</font>x<font color="#000080">+</font>c2<font color="#000080">.</font>x<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{----------------------}
</i></font><font color="#FF0000"><b>procedure </b></font>c_sub<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>c1<font color="#000080">,</font>c2<font color="#000080">,</font>c3 <font color="#000080">: </font>tComplex<font color="#000080">);
</font><font color="#008000"><i>{ subtracts c2 from c1, places result in c3 }
</i></font><font color="#FF0000"><b>begin
  </b></font>c3<font color="#000080">.</font>r<font color="#000080">:= </font>c1<font color="#000080">.</font>r<font color="#000080">-</font>c2<font color="#000080">.</font>r<font color="#000080">;
  </font>c3<font color="#000080">.</font>x<font color="#000080">:= </font>c1<font color="#000080">.</font>x<font color="#000080">-</font>c2<font color="#000080">.</font>x<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{----------------------}
</i></font><font color="#FF0000"><b>procedure </b></font>c_mult<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>c1<font color="#000080">,</font>c2<font color="#000080">,</font>c3 <font color="#000080">: </font>tComplex<font color="#000080">);
</font><font color="#008000"><i>{ multiplies c1 by c2, places result in c3  }
</i></font><font color="#FF0000"><b>begin
  </b></font>c3<font color="#000080">.</font>r<font color="#000080">:= (</font>c1<font color="#000080">.</font>r<font color="#000080">*</font>c2<font color="#000080">.</font>r<font color="#000080">)-(</font>c1<font color="#000080">.</font>x<font color="#000080">*</font>c2<font color="#000080">.</font>x<font color="#000080">);
  </font>c3<font color="#000080">.</font>x<font color="#000080">:= (</font>c1<font color="#000080">.</font>r<font color="#000080">*</font>c2<font color="#000080">.</font>x<font color="#000080">)+(</font>c1<font color="#000080">.</font>x<font color="#000080">*</font>c2<font color="#000080">.</font>r<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{----------------------}
</i></font><font color="#FF0000"><b>procedure </b></font>c_div<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>c1<font color="#000080">,</font>c2<font color="#000080">,</font>c3 <font color="#000080">: </font>tComplex<font color="#000080">);
</font><font color="#008000"><i>{ divides c1 by c2, places result in c3  }
</i></font><font color="#FF0000"><b>var
  </b></font>p1<font color="#000080">,</font>p2<font color="#000080">,</font>p3 <font color="#000080">: </font>tComplex<font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>r2p<font color="#000080">(</font>c1<font color="#000080">,</font>p1<font color="#000080">);                          </font><font color="#008000"><i>{ convert c1 to polar form }
  </i></font>r2p<font color="#000080">(</font>c2<font color="#000080">,</font>p2<font color="#000080">);                          </font><font color="#008000"><i>{ convert c2 to polar form }
  </i></font>p3<font color="#000080">.</font>r<font color="#000080">:= </font>p1<font color="#000080">.</font>r<font color="#000080">/</font>p2<font color="#000080">.</font>r<font color="#000080">;                    </font><font color="#008000"><i>{ divide real component    }
  </i></font>p3<font color="#000080">.</font>x<font color="#000080">:= </font>p1<font color="#000080">.</font>x<font color="#000080">-</font>p2<font color="#000080">.</font>x<font color="#000080">;                    </font><font color="#008000"><i>{ subtract imaginary component }
  </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>p3<font color="#000080">.</font>x<font color="#000080">&lt;</font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font>p3<font color="#000080">.</font>x<font color="#000080">:= </font>p3<font color="#000080">.</font>x<font color="#000080">+</font><font color="#800000">180</font><font color="#000080">;    </font><font color="#008000"><i>{ Pretty it up                 }
  </i></font>p2r<font color="#000080">(</font>p3<font color="#000080">,</font>c3<font color="#000080">);                          </font><font color="#008000"><i>{ convert c3 back to rectangular }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to MATH SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0066.PAS">Original</a><b>]</b></p></body>
</html>
