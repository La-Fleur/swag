<html>
<head><title> "Calculate PI" by LOU DUCHEZ</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to MATH SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0045.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
LOU DUCHEZ

ATTENTION, whoever was trying to calculate PI!  Here's a swell program,
as a follow-up to a recent post of mine about approximating techniques!

}

</i></font><font color="#FF0000"><b>program </b></font>calcpi<font color="#000080">;  </font><font color="#008000"><i>{ Calculates pi by getting the area of one-quarter of a
                   circle of radius 1, and then multiplying by 4.  The area
                   is an approximation, derived by Simpson's method: see
                   previous post for explanation of that technique. }

</i></font><font color="#FF0000"><b>uses
  </b></font>crt<font color="#000080">;

</font><font color="#FF0000"><b>const
  </b></font>lowerbound  <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">;  </font><font color="#008000"><i>{ The interval we're evaluating is from 0 to 1. }
  </i></font>higherbound <font color="#000080">= </font><font color="#800000">1</font><font color="#000080">;  </font><font color="#008000"><i>{ I put the 0 and 1 here for clarity. }

</i></font><font color="#FF0000"><b>var
  </b></font>incs    <font color="#000080">: </font>word<font color="#000080">;
  </font>quartpi<font color="#000080">,
  </font>h<font color="#000080">, </font>x    <font color="#000080">: </font>real<font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>y<font color="#000080">(</font>x <font color="#000080">: </font>real<font color="#000080">) : </font>real<font color="#000080">;  </font><font color="#008000"><i>{ Feed it an x-value, and it tells you the }
</i></font><font color="#FF0000"><b>begin                         </b></font><font color="#008000"><i>{ corresponding y-value on the unit circle. }
  </i></font>y <font color="#000080">:= </font>sqrt<font color="#000080">(</font><font color="#800000">1 </font><font color="#000080">- </font>x <font color="#000080">* </font>x<font color="#000080">);       </font><font color="#008000"><i>{ A no-brainer. }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font><font color="#008000"><i>{ I leave you to do the error-checking on input. }
  </i></font>clrscr<font color="#000080">;
  </font>write<font color="#000080">(</font><font color="#800000">'Enter a WORD (1 - 32767) for the number of parabolas to do: '</font><font color="#000080">);
  </font>readln<font color="#000080">(</font>incs<font color="#000080">);

  </font><font color="#008000"><i>{ The answer for a quarter of pi will be accumulated into QuartPi. }
  </i></font>quartpi <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;

  </font><font color="#008000"><i>{ H is the interval to increment on.  X is the &quot;middle&quot; x value for each
    parabola in Simpson's method.  Here it is set equal to one interval
    above the lower bound: Simpson's method looks at points on either side
    of &quot;X&quot;, so my reasoning is obvious.  Note also that, by magical
    coincidence, the last evaluation will have &quot;X&quot; equal to the higher
    bound of the interval minus H. }

  </i></font>h <font color="#000080">:= (</font>higherbound <font color="#000080">- </font>lowerbound<font color="#000080">) / (</font><font color="#800000">1 </font><font color="#000080">+ </font><font color="#800000">2 </font><font color="#000080">* </font>incs<font color="#000080">);
  </font>x <font color="#000080">:= </font>lowerbound <font color="#000080">+ </font>h<font color="#000080">;

  </font><font color="#008000"><i>{ This loop accumulates a value for pi/4. }
  </i></font><font color="#FF0000"><b>while </b></font>incs <font color="#000080">&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>do
  begin
    if </b></font>x <font color="#000080">&lt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
      </b></font>x <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font>quartpi <font color="#000080">:= </font>quartpi <font color="#000080">+ </font>y<font color="#000080">(</font>x <font color="#000080">- </font>h<font color="#000080">) + </font><font color="#800000">4 </font><font color="#000080">* </font>y<font color="#000080">(</font>x<font color="#000080">) + </font>y<font color="#000080">(</font>x <font color="#000080">+ </font>h<font color="#000080">);

    </font><font color="#008000"><i>{ Move X two increments to the right, and decrease the number of parabolas
      we still have to do. }
    </i></font>x <font color="#000080">:= </font>x <font color="#000080">+ </font><font color="#800000">2 </font><font color="#000080">* </font>h<font color="#000080">;
    </font>dec<font color="#000080">(</font>incs<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ Simpson's method has you multiply the sum by H/3. }
  </i></font>quartpi <font color="#000080">:= </font>h <font color="#000080">* </font>quartpi <font color="#000080">/ </font><font color="#800000">3</font><font color="#000080">;

  </font><font color="#008000"><i>{ Print answer. }
  </i></font>writeln<font color="#000080">(</font><font color="#800000">4 </font><font color="#000080">* </font>quartpi <font color="#000080">: </font><font color="#800000">12 </font><font color="#000080">: </font><font color="#800000">8</font><font color="#000080">);
  </font>writeln<font color="#000080">(</font><font color="#800000">'This has been a display of Simpson''s method.  D''ohh!'</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to MATH SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0045.PAS">Original</a><b>]</b></p></body>
</html>
