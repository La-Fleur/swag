<html>
<head><title> "Fastest Pi Calculator Yet!" by BJ™RN FELTEN</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to MATH SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0087.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt; Here are my results using a 33MHz 386.
&gt; Pi v2                               Pi v3
&gt; 100  places =  0.1 sec              100  places = 0.3 sec
&gt; 1000 places = 11   sec              1000 places =  32 sec
&gt; 2135 places = 48   sec              2135 places = 150 sec

 Not very impressive IMHO. Here's the result of the program following below
(on my 33MHz 486):
Digits(max 150.000):    100  Done! It took   0.00s.
Digits(max 150.000):   1000  Done! It took   0.27s.
Digits(max 150.000):  10000  Done! It took  28.35s.
Digits(max 150.000):  40000  Done! It took 462.25s.

   The two units used should come after this message. Uncomment several write-
commands to get a &quot;fully&quot; operational program rather than this benchmark
version. You then also can skip the Timer unit and the two commands from that
unit (TimerOn and TimerOff) to make the program much smaller (no float math
linked into the program).
   I didn't post my 386 version (which is more than 50% faster), since I'm
under the impression that many of you still are struggling with them ol'
fashion 286'es or worse... :)
}

</i></font><font color="#FF0000"><b>program </b></font>PiCalc<font color="#000080">;  </font><font color="#008000"><i>{ The fastest PI calculator you'll ever find... :) }

{ From bits and pieces picked up mainly from the FidoNet PASCAL echo }
{ Collected, optimized, unitized, etc. by Bj”rn Felten @ 2:203:208 }
{ Public Domain  --  Nov 1994 }

{ SWAG Note: The HugeUtil in this unit is in the NUMBERS.SWG Packet
   - Kerry }

</i></font><font color="#FF0000"><b>uses </b></font>HugeUtil<font color="#000080">, </font>Timer<font color="#000080">; </font><font color="#008000"><i>{ use Crt if you want fast printout on screen }
                      { don't if you want to be able to redirekt o/p }

</i></font><font color="#FF0000"><b>var
    </b></font>words<font color="#000080">, </font>number   <font color="#000080">: </font>longint<font color="#000080">;
    </font>nin<font color="#000080">, </font>link<font color="#000080">, </font>pii<font color="#000080">, </font>a239    <font color="#000080">: </font>HugePtr<font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>ArcCoTan<font color="#000080">(</font>n <font color="#000080">: </font>integer<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>angle <font color="#000080">: </font>Huge<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>n2<font color="#000080">, </font>del<font color="#000080">, </font>remain <font color="#000080">: </font>integer<font color="#000080">;
    </font>positive <font color="#000080">: </font>boolean<font color="#000080">;

</font><font color="#FF0000"><b>begin                               </b></font><font color="#008000"><i>{ corresp. integer operations }
  </i></font>ZeroHuge<font color="#000080">(</font>angle<font color="#000080">,</font>words<font color="#000080">);            </font><font color="#008000"><i>{ angle := 0 }
  </i></font>ZeroHuge<font color="#000080">(</font>nin<font color="#000080">^,</font>words<font color="#000080">);             </font><font color="#008000"><i>{ nin   := 0 }
  </i></font>ZeroHuge<font color="#000080">(</font>link<font color="#000080">^,</font>words<font color="#000080">);            </font><font color="#008000"><i>{ link  := 0 }
  </i></font>angle<font color="#000080">.</font>dat<font color="#000080">[</font>angle<font color="#000080">.</font>len<font color="#000080">] := </font><font color="#800000">1</font><font color="#000080">;        </font><font color="#008000"><i>{ angle := 1 }
  </i></font>DivHuge<font color="#000080">(</font>angle<font color="#000080">,</font>n<font color="#000080">,</font>angle<font color="#000080">,</font>remain<font color="#000080">);    </font><font color="#008000"><i>{ angle := angle div n }
  </i></font>n2 <font color="#000080">:= </font>n<font color="#000080">*</font>n<font color="#000080">;                        </font><font color="#008000"><i>{ n2    := n * n }
  </i></font>del <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;                         </font><font color="#008000"><i>{ del   := 1 }
  </i></font>positive <font color="#000080">:= </font>true<font color="#000080">;
  </font>CopyHuge<font color="#000080">(</font>angle<font color="#000080">,</font>nin<font color="#000080">^);             </font><font color="#008000"><i>{ nin   := angle }
  </i></font><font color="#FF0000"><b>repeat
    </b></font>DivHuge<font color="#000080">(</font>nin<font color="#000080">^,</font>n2<font color="#000080">,</font>nin<font color="#000080">^,</font>remain<font color="#000080">);   </font><font color="#008000"><i>{ nin   := nin div n2 }
    </i></font>inc<font color="#000080">(</font>del<font color="#000080">, </font><font color="#800000">2</font><font color="#000080">);                    </font><font color="#008000"><i>{ del   := del + 2 }
    </i></font>positive <font color="#000080">:= </font><font color="#FF0000"><b>not </b></font>positive<font color="#000080">;
    </font>DivHuge<font color="#000080">(</font>nin<font color="#000080">^,</font>del<font color="#000080">,</font>link<font color="#000080">^,</font>remain<font color="#000080">); </font><font color="#008000"><i>{ link  := nin div del }
    </i></font><font color="#FF0000"><b>if </b></font>positive <font color="#FF0000"><b>then
      </b></font>AddHuge<font color="#000080">(</font>angle<font color="#000080">,</font>link<font color="#000080">^)          </font><font color="#008000"><i>{ angle := angle + link }
    </i></font><font color="#FF0000"><b>else
      </b></font>SubHuge<font color="#000080">(</font>angle<font color="#000080">,</font>link<font color="#000080">^);         </font><font color="#008000"><i>{ angle := angle - link }
{    write(#13,word(del)) } { uncomment to see that program is not dead }
  </i></font><font color="#FF0000"><b>until </b></font><font color="#000080">(</font>link<font color="#000080">^.</font>len <font color="#000080">&lt;= </font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>link<font color="#000080">^.</font>dat<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] = </font><font color="#800000">0</font><font color="#000080">);
</font><font color="#008000"><i>{  writeln}                 { ... and this too }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ ArcCoTan }

</i></font><font color="#FF0000"><b>begin
</b></font><font color="#008000"><i>{  writeln('Program to get Pi (',pi:1:17,'...) with large precision.'); }
  </i></font>write<font color="#000080">(</font><font color="#800000">'Digits(max 40.000): '</font><font color="#000080">); </font>readln<font color="#000080">(</font>number<font color="#000080">);
  </font>words <font color="#000080">:= </font>round<font color="#000080">(</font>number <font color="#000080">/ </font><font color="#800000">4.7</font><font color="#000080">) + </font><font color="#800000">3</font><font color="#000080">; </font><font color="#008000"><i>{ appr. 4.7 digits in one word }
  </i></font>write<font color="#000080">(</font>number<font color="#000080">:</font><font color="#800000">6</font><font color="#000080">,</font><font color="#800000">#9</font><font color="#000080">);
  </font>TimerOn<font color="#000080">;
  </font>GetHuge<font color="#000080">(</font>pii<font color="#000080">,  </font>words<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">);
  </font>GetHuge<font color="#000080">(</font>a239<font color="#000080">, </font>words<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">);
  </font>GetHuge<font color="#000080">(</font>link<font color="#000080">, </font>words<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">);
  </font>GetHuge<font color="#000080">(</font>nin<font color="#000080">,  </font>words<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">);
  </font>ArcCoTan<font color="#000080">(</font><font color="#800000">5</font><font color="#000080">,   </font>pii<font color="#000080">^);        </font><font color="#008000"><i>{ ATan(1/5)  }
  </i></font>AddHuge<font color="#000080">(</font>pii<font color="#000080">^, </font>pii<font color="#000080">^);
  </font>AddHuge<font color="#000080">(</font>pii<font color="#000080">^, </font>pii<font color="#000080">^);        </font><font color="#008000"><i>{ * 4        }
  </i></font>ArcCoTan<font color="#000080">(</font><font color="#800000">239</font><font color="#000080">, </font>a239<font color="#000080">^);       </font><font color="#008000"><i>{ ATan(1/239)}
  </i></font>SubHuge<font color="#000080">(</font>pii<font color="#000080">^, </font>a239<font color="#000080">^);
  </font>AddHuge<font color="#000080">(</font>pii<font color="#000080">^, </font>pii<font color="#000080">^);
  </font>AddHuge<font color="#000080">(</font>pii<font color="#000080">^, </font>pii<font color="#000080">^);        </font><font color="#008000"><i>{ * 4        }
  </i></font>TimerOff<font color="#000080">;
</font><font color="#008000"><i>{  WriteHuge(pii^, number)}     { uncomment if you want printout }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to MATH SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0087.PAS">Original</a><b>]</b></p></body>
</html>
