<html>
<head><title> "Triangular Fractal" by SCOTT EARNEST</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to MATH SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0082.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>program </b></font>Chaos<font color="#000080">;

</font><font color="#008000"><i>{Triangular fractal generator

 Based on program &quot;Chaos&quot; published in Nibble, June 1989 (Vol. 10, No. 6)
 One-Liner winner written by Max Raymond of Huston, TX.  Program inspired
 by a PBS broadcast of Nova, called &quot;Chaos&quot;.

 Adapted for Turbo Pascal by Scott Earnest, 1994.
 scott@whiplash.pc.cc.cmu.edu

 About the program:

 When the program is run, it will ask for 4 sets of coordinates.  The first
 three are the vertices of the triangle, and the fourth is the location of
 the &quot;traveler&quot;, the point that moves around the screen leaving its path.
 The traveler may start at any position either inside or outside the tri-
 angle.  Press any key to exit the program.

 The original author's comment about the program:

   &quot;A three-sided die is simulated, and its roll corresponds to one of
    the three vertices of the triangle.  The traveler will move halfway
    from its current point toward the vertex selected by the die roll.
    A copy of the traveler is left behind at its old position, while
    the traveler is redrawn at its new position.  The process is then
    repeated.  The pattern that emerges is a record of the traveler's
    journey, as it jumps from point to point.&quot;

}

</i></font><font color="#FF0000"><b>uses </b></font>graph<font color="#000080">, </font>crt<font color="#000080">;

</font><font color="#FF0000"><b>const </b></font>BGIPath <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">80</font><font color="#000080">] = </font><font color="#800000">'E:\BP\BGI'</font><font color="#000080">;

</font><font color="#FF0000"><b>type
  </b></font>TPoint <font color="#000080">= </font><font color="#FF0000"><b>record
    </b></font>x<font color="#000080">, </font>y <font color="#000080">: </font>integer<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>var
  </b></font>grDriver<font color="#000080">,
  </font>grMode<font color="#000080">,
  </font>grError <font color="#000080">: </font>integer<font color="#000080">;

  </font>MaxX<font color="#000080">, </font>MaxY <font color="#000080">: </font>word<font color="#000080">;

  </font>TriExt <font color="#000080">: </font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">1 </font><font color="#000080">.. </font><font color="#800000">4</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>TPoint<font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>StartGraph<font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>grDriver <font color="#000080">:= </font>Detect<font color="#000080">;
  </font>initgraph <font color="#000080">(</font>grDriver<font color="#000080">, </font>grMode<font color="#000080">, </font>BGIPath<font color="#000080">);
  </font>grError <font color="#000080">:= </font>GraphResult<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>grError <font color="#000080">&lt;&gt; </font>grOk <font color="#FF0000"><b>then
  begin
    </b></font>writeln <font color="#000080">(</font><font color="#800000">'Graphics error:  '</font><font color="#000080">, </font>GraphErrorMsg<font color="#000080">(</font>grError<font color="#000080">));
    </font>halt <font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>MaxX <font color="#000080">:= </font>getmaxx<font color="#000080">;
  </font>MaxY <font color="#000080">:= </font>getmaxy<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>InputPoints<font color="#000080">;

</font><font color="#FF0000"><b>var
  </b></font>pnum <font color="#000080">: </font>byte<font color="#000080">;
  </font>tx<font color="#000080">, </font>ty <font color="#000080">: </font>word<font color="#000080">;

  </font><font color="#FF0000"><b>function </b></font>inputnum <font color="#000080">(</font>idx <font color="#000080">: </font>byte<font color="#000080">; </font>max <font color="#000080">: </font>word<font color="#000080">; </font>ch <font color="#000080">: </font>char<font color="#000080">) : </font>word<font color="#000080">;

  </font><font color="#FF0000"><b>var
    </b></font>inval<font color="#000080">, </font>err <font color="#000080">: </font>word<font color="#000080">;
    </font>instr <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>begin
    repeat
      if </b></font>idx <font color="#000080">&lt; </font><font color="#800000">4 </font><font color="#FF0000"><b>then
        </b></font>write <font color="#000080">(</font><font color="#800000">'Enter '</font><font color="#000080">,</font>ch<font color="#000080">,</font><font color="#800000">' vertex #'</font><font color="#000080">,</font>idx<font color="#000080">,</font><font color="#800000">':  '</font><font color="#000080">)
      </font><font color="#FF0000"><b>else
        </b></font>write <font color="#000080">(</font><font color="#800000">'Enter &quot;traveler&quot; start '</font><font color="#000080">,</font>ch<font color="#000080">,</font><font color="#800000">':  '</font><font color="#000080">);
      </font>readln <font color="#000080">(</font>instr<font color="#000080">);
      </font>val <font color="#000080">(</font>instr<font color="#000080">, </font>inval<font color="#000080">, </font>err<font color="#000080">);
      </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>err <font color="#000080">&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>inval <font color="#000080">&gt; </font>max<font color="#000080">) </font><font color="#FF0000"><b>then
        </b></font>writeln <font color="#000080">(</font><font color="#800000">'Invalid entry.  Please re-enter.'</font><font color="#000080">);
    </font><font color="#FF0000"><b>until </b></font><font color="#000080">(</font>inval <font color="#000080">&lt;= </font>Max<font color="#000080">);
    </font>inputnum <font color="#000080">:= </font>inval<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>writeln <font color="#000080">(</font><font color="#800000">'Screen range = X:(0-'</font><font color="#000080">,</font>MaxX<font color="#000080">,</font><font color="#800000">'); Y:(0-'</font><font color="#000080">,</font>MaxY<font color="#000080">,</font><font color="#800000">').'</font><font color="#000080">);
  </font><font color="#FF0000"><b>for </b></font>pnum <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">4 </font><font color="#FF0000"><b>do
    begin
      </b></font>TriExt<font color="#000080">[</font>pnum<font color="#000080">].</font>x <font color="#000080">:= </font>inputnum <font color="#000080">(</font>pnum<font color="#000080">, </font>MaxX<font color="#000080">, </font><font color="#800000">'X'</font><font color="#000080">);
      </font>TriExt<font color="#000080">[</font>pnum<font color="#000080">].</font>y <font color="#000080">:= </font>inputnum <font color="#000080">(</font>pnum<font color="#000080">, </font>MaxY<font color="#000080">, </font><font color="#800000">'Y'</font><font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>DrawChaos<font color="#000080">;

</font><font color="#FF0000"><b>var
  </b></font>select <font color="#000080">: </font>byte<font color="#000080">;

</font><font color="#FF0000"><b>begin
  while </b></font>keypressed <font color="#FF0000"><b>do </b></font>readkey<font color="#000080">;
  </font><font color="#FF0000"><b>repeat
    </b></font>select <font color="#000080">:= </font>random<font color="#000080">(</font><font color="#800000">3</font><font color="#000080">) + </font><font color="#800000">1</font><font color="#000080">;
    </font>TriExt<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">].</font>x <font color="#000080">:= </font>TriExt<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">].</font>x <font color="#000080">+ (</font>TriExt<font color="#000080">[</font>select<font color="#000080">].</font>x <font color="#000080">- </font>TriExt<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">].</font>x<font color="#000080">) </font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">;
    </font>TriExt<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">].</font>y <font color="#000080">:= </font>TriExt<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">].</font>y <font color="#000080">+ (</font>TriExt<font color="#000080">[</font>select<font color="#000080">].</font>y <font color="#000080">- </font>TriExt<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">].</font>y<font color="#000080">) </font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">;
    </font>putpixel <font color="#000080">(</font>TriExt<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">].</font>x<font color="#000080">, </font>TriExt<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">].</font>y<font color="#000080">, </font><font color="#800000">15</font><font color="#000080">);
  </font><font color="#FF0000"><b>until </b></font>keypressed<font color="#000080">;
  </font><font color="#FF0000"><b>while </b></font>keypressed <font color="#FF0000"><b>do </b></font>readkey<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>Randomize<font color="#000080">;
  </font>StartGraph<font color="#000080">;
  </font>RestoreCRTMode<font color="#000080">;
  </font>clrscr<font color="#000080">;
  </font>InputPoints<font color="#000080">;
  </font>SetGraphMode <font color="#000080">(</font>GetGraphMode<font color="#000080">);
  </font>DrawChaos<font color="#000080">;
  </font>CloseGraph<font color="#000080">;
  </font>RestoreCRTMode<font color="#000080">;
  </font>clrscr<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to MATH SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0082.PAS">Original</a><b>]</b></p></body>
</html>
