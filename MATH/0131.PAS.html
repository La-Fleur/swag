<html>
<head><title> "Nice Floating point math unit" by EMIL MIKULIC</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to MATH SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0131.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{ N is for using the numeric coprocessor (speeds up math) and E is
  for software emulation }
{$N+} {$E-}
</i></font><font color="#FF0000"><b>unit </b></font>math<font color="#000080">;

</font><font color="#FF0000"><b>interface

</b></font><font color="#008000"><i>{ Set every &quot;$define&quot; to a *define except for the one that you want }
{ This defines which sort of floating-point you want to use }
{*DEFINE FP_SINGLE}
{*DEFINE FP_DOUBLE}
{*DEFINE FP_REAL}
{$DEFINE FP_EXTENDED}
{*DEFINE FP_COMP}

{ Now, to define FP as the right sort of floating point type }
{$IFDEF FP_SINGLE}
</i></font><font color="#FF0000"><b>type </b></font>fp<font color="#000080">=</font>single<font color="#000080">;
</font><font color="#008000"><i>{$ENDIF}
{$IFDEF FP_DOUBLE}
</i></font><font color="#FF0000"><b>type </b></font>fp<font color="#000080">=</font>double<font color="#000080">;
</font><font color="#008000"><i>{$ENDIF}
{$IFDEF FP_REAL}
</i></font><font color="#FF0000"><b>type </b></font>fp<font color="#000080">=</font>real<font color="#000080">;
</font><font color="#008000"><i>{$ENDIF}
{$IFDEF FP_EXTENDED}
</i></font><font color="#FF0000"><b>type </b></font>fp<font color="#000080">=</font>extended<font color="#000080">;
</font><font color="#008000"><i>{$ENDIF}
{$IFDEF FP_COMP}
</i></font><font color="#FF0000"><b>type </b></font>fp<font color="#000080">=</font>comp<font color="#000080">;
</font><font color="#008000"><i>{$ENDIF}

{ 3D Point. X=point[1], Y=point[2] and Z=point[3] }
</i></font><font color="#FF0000"><b>type </b></font>point<font color="#000080">=</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">3</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>fp<font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>ordinal<font color="#000080">(</font>i<font color="#000080">:</font>integer<font color="#000080">):</font><font color="#FF0000"><b>string</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function </b></font>tan<font color="#000080">(</font>x<font color="#000080">:</font>fp<font color="#000080">):</font>fp<font color="#000080">;
</font><font color="#FF0000"><b>function </b></font>arcsin<font color="#000080">(</font>x<font color="#000080">:</font>fp<font color="#000080">):</font>fp<font color="#000080">;
</font><font color="#FF0000"><b>function </b></font>arccos<font color="#000080">(</font>x<font color="#000080">:</font>fp<font color="#000080">):</font>fp<font color="#000080">;
</font><font color="#FF0000"><b>function </b></font>rad<font color="#000080">(</font>theta<font color="#000080">:</font>fp<font color="#000080">):</font>fp<font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>RotateX<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>p<font color="#000080">:</font>point<font color="#000080">; </font>ang<font color="#000080">:</font>fp<font color="#000080">);
</font><font color="#FF0000"><b>procedure </b></font>RotateY<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>p<font color="#000080">:</font>point<font color="#000080">; </font>ang<font color="#000080">:</font>fp<font color="#000080">);
</font><font color="#FF0000"><b>procedure </b></font>RotateZ<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>p<font color="#000080">:</font>point<font color="#000080">; </font>ang<font color="#000080">:</font>fp<font color="#000080">);

</font><font color="#FF0000"><b>implementation
</b></font><font color="#008000"><i>{ --------------------------------------------------------------------
  ORDINAL
  by Emil Mikulic

  Input:
   i - an integer

  Output:
   string - the ordinal suffix of i
            'st', 'nd', 'rd' or 'th'
  -------------------------------------------------------------------- }
</i></font><font color="#FF0000"><b>function </b></font>ordinal<font color="#000080">(</font>i<font color="#000080">:</font>integer<font color="#000080">):</font><font color="#FF0000"><b>string</b></font><font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>x<font color="#000080">,</font>y<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
 </b></font><font color="#008000"><i>{ Convert i into string x }
 </i></font>str<font color="#000080">(</font>i<font color="#000080">,</font>x<font color="#000080">);
 </font><font color="#008000"><i>{ Special case - 11, 12 and 13 become 11th, 12th and 13th, not
   11st, 12nd and 13rd }
 </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>length<font color="#000080">(</font>x<font color="#000080">)&gt;</font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>x<font color="#000080">[</font>length<font color="#000080">(</font>x<font color="#000080">)-</font><font color="#800000">1</font><font color="#000080">]=</font><font color="#800000">'1'</font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font>y<font color="#000080">:=</font><font color="#800000">'th' </font><font color="#FF0000"><b>else
 </b></font><font color="#008000"><i>{ Depending on what number x ends in...}
 </i></font><font color="#FF0000"><b>case </b></font>x<font color="#000080">[</font>length<font color="#000080">(</font>x<font color="#000080">)] </font><font color="#FF0000"><b>of
    </b></font><font color="#800000">'1' </font><font color="#000080">: </font>y<font color="#000080">:=</font><font color="#800000">'st'</font><font color="#000080">; </font><font color="#008000"><i>{ 1 becomes 1st }
    </i></font><font color="#800000">'2' </font><font color="#000080">: </font>y<font color="#000080">:=</font><font color="#800000">'nd'</font><font color="#000080">; </font><font color="#008000"><i>{ 2 becomes 2nd }
    </i></font><font color="#800000">'3' </font><font color="#000080">: </font>y<font color="#000080">:=</font><font color="#800000">'rd'</font><font color="#000080">; </font><font color="#008000"><i>{ 3 becomes 3rd }
    </i></font><font color="#FF0000"><b>else
     </b></font>y<font color="#000080">:=</font><font color="#800000">'th'</font><font color="#000080">; </font><font color="#008000"><i>{ Anything else becomes &lt;n&gt;th }
    </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font>ordinal<font color="#000080">:=</font>y<font color="#000080">; </font><font color="#008000"><i>{ Pass on the value }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ --------------------------------------------------------------------
  TAN
  by Emil Mikulic (standard trigonometry function - in the help)

  Input:
   x - a floating point number

  Output:
   a floating point number - the tangent of x
  -------------------------------------------------------------------- }
</i></font><font color="#FF0000"><b>function </b></font>tan<font color="#000080">(</font>x<font color="#000080">:</font>fp<font color="#000080">):</font>fp<font color="#000080">;
</font><font color="#FF0000"><b>begin
 </b></font>tan<font color="#000080">:= </font>Sin<font color="#000080">(</font>x<font color="#000080">) / </font>Cos<font color="#000080">(</font>x<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ --------------------------------------------------------------------
  ARCSIN
  by Emil Mikulic (standard trigonometry function - in the help)

  Input:
   x - a floating point number

  Output:
   a floating point number - the arcsine of x
  -------------------------------------------------------------------- }
</i></font><font color="#FF0000"><b>function </b></font>arcsin<font color="#000080">(</font>x<font color="#000080">:</font>fp<font color="#000080">):</font>fp<font color="#000080">;
</font><font color="#FF0000"><b>begin
 </b></font>ArcSin<font color="#000080">:= </font>ArcTan <font color="#000080">(</font>x<font color="#000080">/</font>sqrt <font color="#000080">(</font><font color="#800000">1</font><font color="#000080">-</font>sqr <font color="#000080">(</font>x<font color="#000080">)));
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ --------------------------------------------------------------------
  ARCCOS
  by Emil Mikulic (standard trigonometry function - in the help)

  Input:
   x - a floating point number

  Output:
   a floating point number - the arccosine of x
  -------------------------------------------------------------------- }
</i></font><font color="#FF0000"><b>function </b></font>arccos<font color="#000080">(</font>x<font color="#000080">:</font>fp<font color="#000080">):</font>fp<font color="#000080">;
</font><font color="#FF0000"><b>begin
 </b></font>ArcCos<font color="#000080">:= </font>ArcTan <font color="#000080">(</font>sqrt <font color="#000080">(</font><font color="#800000">1</font><font color="#000080">-</font>sqr <font color="#000080">(</font>x<font color="#000080">)) /</font>x<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ --------------------------------------------------------------------
  RAD
  by Emil Mikulic (standard trigonometry function, also 3D math)

  Input:
   theta - a degree angle in the form of a floating point number

  Output:
   a floating point number - the radian of the degree x
  -------------------------------------------------------------------- }
</i></font><font color="#FF0000"><b>function </b></font>rad<font color="#000080">(</font>theta<font color="#000080">:</font>fp<font color="#000080">):</font>fp<font color="#000080">;
</font><font color="#FF0000"><b>begin
 </b></font>rad <font color="#000080">:= (</font>theta<font color="#000080">/</font><font color="#800000">180</font><font color="#000080">) * </font>pi<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ --------------------------------------------------------------------
  RotateX, RotateY, RotateZ
  by Emil Mikulic (3D math)

  Input:
   p - the point to rotate
   ang - the degree angle to rotate by

  Output:
   alters p
  -------------------------------------------------------------------- }
</i></font><font color="#FF0000"><b>procedure </b></font>RotateX<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>p<font color="#000080">:</font>point<font color="#000080">; </font>ang<font color="#000080">:</font>fp<font color="#000080">);
</font><font color="#FF0000"><b>begin
 </b></font>p<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]:=</font>p<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">];
 </font>p<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">]:=((</font>p<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">]*</font>cos<font color="#000080">(</font>rad<font color="#000080">(</font>ang<font color="#000080">)))+(</font>p<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">]*</font>sin<font color="#000080">(</font>rad<font color="#000080">(</font>ang<font color="#000080">))));
 </font>p<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">]:=((-</font>p<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">]*</font>sin<font color="#000080">(</font>rad<font color="#000080">(</font>ang<font color="#000080">)))+(</font>p<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">]*</font>cos<font color="#000080">(</font>rad<font color="#000080">(</font>ang<font color="#000080">))));
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>RotateY<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>p<font color="#000080">:</font>point<font color="#000080">; </font>ang<font color="#000080">:</font>fp<font color="#000080">);
</font><font color="#FF0000"><b>begin
 </b></font>p<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]:=((</font>p<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]*</font>cos<font color="#000080">(</font>rad<font color="#000080">(</font>ang<font color="#000080">)))+(</font>p<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">]*</font>sin<font color="#000080">(</font>rad<font color="#000080">(</font>ang<font color="#000080">))));
 </font>p<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">]:=</font>p<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">];
 </font>p<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">]:=((-</font>p<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]*</font>sin<font color="#000080">(</font>rad<font color="#000080">(</font>ang<font color="#000080">)))+(</font>p<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">]*</font>cos<font color="#000080">(</font>rad<font color="#000080">(</font>ang<font color="#000080">))));
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>RotateZ<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>p<font color="#000080">:</font>point<font color="#000080">; </font>ang<font color="#000080">:</font>fp<font color="#000080">);
</font><font color="#FF0000"><b>begin
 </b></font>p<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]:=(((</font>p<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">])*</font>cos<font color="#000080">(</font>rad<font color="#000080">(</font>ang<font color="#000080">)))+(</font>p<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">]*</font>sin<font color="#000080">(</font>rad<font color="#000080">(</font>ang<font color="#000080">))));
 </font>p<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">]:=((-</font>p<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]*</font>sin<font color="#000080">(</font>rad<font color="#000080">(</font>ang<font color="#000080">)))+(</font>p<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">]*</font>cos<font color="#000080">(</font>rad<font color="#000080">(</font>ang<font color="#000080">))));
 </font>p<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">]:=</font>p<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">];
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font><font color="#008000"><i>{ ---------------------------------CUT------------------------------- }

</i></font>MATH
<font color="#FF0000"><b>Unit </b></font>Documentation

by Emil Mikulic

Note<font color="#000080">: </font>TAN<font color="#000080">, </font>ARCSIN <font color="#FF0000"><b>and </b></font>ARCCOS were taken from the help<font color="#000080">. </font>The reason
behind that <font color="#FF0000"><b>is </b></font>that you<font color="#800000">'ll be able to access them more easily
</font>instead <font color="#FF0000"><b>of </b></font>having <font color="#FF0000"><b>to </b></font>cut <font color="#FF0000"><b>and </b></font>paste from the help every time<font color="#000080">.

  ----------------------------------------------------------------------

  </font>The math <font color="#FF0000"><b>unit uses </b></font>a lot <font color="#FF0000"><b>of </b></font>floating<font color="#000080">-</font>point math<font color="#000080">. </font>It defines the <font color="#FF0000"><b>type
  </b></font>FP <font color="#FF0000"><b>as </b></font>EXTENDED by <font color="#FF0000"><b>default </b></font>but by changing the source <font color="#FF0000"><b>and
  </b></font>re<font color="#000080">-</font>compiling<font color="#000080">, </font>you can alter this<font color="#000080">.

  </font>You can <font color="#FF0000"><b>do </b></font>this by changing the bit where it says<font color="#000080">:
  
  </font><font color="#008000"><i>{*DEFINE FP_SINGLE}
  {*DEFINE FP_DOUBLE}
  {*DEFINE FP_REAL}
  {$DEFINE FP_EXTENDED}
  {*DEFINE FP_COMP}

  </i></font>Only one <font color="#FF0000"><b>is </b></font>allowed <font color="#FF0000"><b>to </b></font>have a <font color="#800000">$ </font><font color="#FF0000"><b>or else </b></font>you get a compiler error<font color="#000080">.

  </font>Also<font color="#000080">, </font><font color="#FF0000"><b>for </b></font>the purpose <font color="#FF0000"><b>of </b></font><font color="#800000">3</font>D transforms<font color="#000080">, </font>a <font color="#800000">3</font>D point has been defines <font color="#FF0000"><b>as</b></font><font color="#000080">:
    </font><font color="#FF0000"><b>type </b></font>point<font color="#000080">=</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">3</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>fp<font color="#000080">;

  -------------------------------------------------------------------- 
  </font>ORDINAL
  by Emil Mikulic

  Input<font color="#000080">:
   </font>i <font color="#000080">- </font>an integer

  Output<font color="#000080">:
   </font><font color="#FF0000"><b>string </b></font><font color="#000080">- </font>the ordinal suffix <font color="#FF0000"><b>of </b></font>i
            <font color="#800000">'st'</font><font color="#000080">, </font><font color="#800000">'nd'</font><font color="#000080">, </font><font color="#800000">'rd' </font><font color="#FF0000"><b>or </b></font><font color="#800000">'th'

  </font>Examples<font color="#000080">:
   </font>writeln<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font>ordinal<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">));  </font><font color="#008000"><i>{ Writes '1st' }
   </i></font>writeln<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">,</font>ordinal<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">));  </font><font color="#008000"><i>{ Writes '2nd' }
   </i></font>writeln<font color="#000080">(</font><font color="#800000">3</font><font color="#000080">,</font>ordinal<font color="#000080">(</font><font color="#800000">3</font><font color="#000080">));  </font><font color="#008000"><i>{ Writes '3rd' }
   </i></font>writeln<font color="#000080">(</font><font color="#800000">12</font><font color="#000080">,</font>ordinal<font color="#000080">(</font><font color="#800000">12</font><font color="#000080">));</font><font color="#008000"><i>{ Writes '12th' }

  </i></font><font color="#000080">-------------------------------------------------------------------- 
  </font>TAN
  by Emil Mikulic <font color="#000080">(</font>standard trigonometry <font color="#FF0000"><b>function</b></font><font color="#000080">)

  </font>Input<font color="#000080">:
   </font>x <font color="#000080">- </font>a floating point number

  Output<font color="#000080">:
   </font>a floating point number <font color="#000080">- </font>the tangent <font color="#FF0000"><b>of </b></font>x
  
  <font color="#000080">-------------------------------------------------------------------- 
  </font>ARCSIN
  by Emil Mikulic <font color="#000080">(</font>standard trigonometry <font color="#FF0000"><b>function</b></font><font color="#000080">)

  </font>Input<font color="#000080">:
   </font>x <font color="#000080">- </font>a floating point number

  Output<font color="#000080">:
   </font>a floating point number <font color="#000080">- </font>the arcsine <font color="#FF0000"><b>of </b></font>x
  
  <font color="#000080">-------------------------------------------------------------------- 
  </font>ARCCOS
  by Emil Mikulic <font color="#000080">(</font>standard trigonometry <font color="#FF0000"><b>function</b></font><font color="#000080">)

  </font>Input<font color="#000080">:
   </font>x <font color="#000080">- </font>a floating point number

  Output<font color="#000080">:
   </font>a floating point number <font color="#000080">- </font>the arccosine <font color="#FF0000"><b>of </b></font>x
  
  <font color="#000080">-------------------------------------------------------------------- 
  </font>RAD
  by Emil Mikulic <font color="#000080">(</font>standard trigonometry <font color="#FF0000"><b>function</b></font><font color="#000080">, </font>also <font color="#800000">3</font>D math<font color="#000080">)

  </font>Input<font color="#000080">:
   </font>theta <font color="#000080">- </font>a degree angle <font color="#FF0000"><b>in </b></font>the form <font color="#FF0000"><b>of </b></font>a floating point number

  Output<font color="#000080">:
   </font>a floating point number <font color="#000080">- </font>the radian <font color="#FF0000"><b>of </b></font>the degree x
  
  <font color="#000080">-------------------------------------------------------------------- }
  </font>RotateX<font color="#000080">, </font>RotateY<font color="#000080">, </font>RotateZ
  by Emil Mikulic <font color="#000080">(</font><font color="#800000">3</font>D math<font color="#000080">)

  </font>Input<font color="#000080">:
   </font>p <font color="#000080">- </font>the point <font color="#FF0000"><b>to </b></font>rotate
   ang <font color="#000080">- </font>the degree angle <font color="#FF0000"><b>to </b></font>rotate by

  Output<font color="#000080">:
   </font>alters the variable p
  <font color="#000080">-------------------------------------------------------------------- }

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to MATH SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0131.PAS">Original</a><b>]</b></p></body>
</html>
