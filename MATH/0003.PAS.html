<html>
<head><title> "EQUATE.PAS" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to MATH SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0003.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{ Author: Gavin Peters. }

</i></font><font color="#FF0000"><b>Program </b></font>PostFixConvert<font color="#000080">;
</font><font color="#008000"><i>(*
 * This Program will convert a user entered expression to postfix, and
 * evaluate it simultaniously.  Written by Gavin Peters, based slightly
 * on a stack example given in Algorithms (Pascal edition), pg
 *
 *)
</i></font><font color="#FF0000"><b>Var
  </b></font>Stack <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1 </font><font color="#000080">.. </font><font color="#800000">3</font><font color="#000080">] </font><font color="#FF0000"><b>of Array</b></font><font color="#000080">[</font><font color="#800000">0 </font><font color="#000080">.. </font><font color="#800000">500</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>LongInt<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Push<font color="#000080">(</font>which <font color="#000080">: </font>Integer<font color="#000080">; </font>p <font color="#000080">: </font>LongInt<font color="#000080">);
</font><font color="#FF0000"><b>begin
  </b></font>Stack<font color="#000080">[</font>which<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">] := </font>Stack<font color="#000080">[</font>which<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">]+</font><font color="#800000">1</font><font color="#000080">;
  </font>Stack<font color="#000080">[</font>which<font color="#000080">,</font>Stack<font color="#000080">[</font>which<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">]] := </font>p
<font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Pop<font color="#000080">(</font>which <font color="#000080">: </font>Integer<font color="#000080">) : </font>LongInt<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Pop <font color="#000080">:= </font>Stack<font color="#000080">[</font>which<font color="#000080">,</font>Stack<font color="#000080">[</font>which<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">]];
  </font>Stack<font color="#000080">[</font>which<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">] := </font>Stack<font color="#000080">[</font>which<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">]-</font><font color="#800000">1
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Var
  </b></font>c       <font color="#000080">: </font>Char<font color="#000080">;
  </font>x<font color="#000080">,</font>t<font color="#000080">,
  </font>bedmas  <font color="#000080">: </font>LongInt<font color="#000080">;
  </font>numbers <font color="#000080">: </font>Boolean<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Evaluate<font color="#000080">( </font>ch <font color="#000080">: </font>Char <font color="#000080">);

  </font><font color="#FF0000"><b>Function </b></font>Power<font color="#000080">( </font>exponent<font color="#000080">, </font>base <font color="#000080">: </font>LongInt <font color="#000080">) : </font>LongInt<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    if </b></font>Exponent <font color="#000080">&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
      </b></font>Power <font color="#000080">:= </font>Base<font color="#000080">*</font>Power<font color="#000080">(</font>exponent<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">, </font>base<font color="#000080">)
    </font><font color="#FF0000"><b>ELSE
      </b></font>Power <font color="#000080">:= </font><font color="#800000">1
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>Write<font color="#000080">(</font>ch<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>Numbers <font color="#FF0000"><b>and not </b></font><font color="#000080">(</font>ch <font color="#000080">= </font><font color="#800000">' '</font><font color="#000080">) </font><font color="#FF0000"><b>then
    </b></font>x <font color="#000080">:= </font>x <font color="#000080">* </font><font color="#800000">10 </font><font color="#000080">+ (</font>Ord<font color="#000080">(</font>c<font color="#000080">) - </font>Ord<font color="#000080">(</font><font color="#800000">'0'</font><font color="#000080">))
  </font><font color="#FF0000"><b>ELSE
  begin
    Case </b></font>ch <font color="#FF0000"><b>OF
      </b></font><font color="#800000">'*' </font><font color="#000080">: </font>x <font color="#000080">:= </font>pop<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">)*</font>pop<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">);
      </font><font color="#800000">'+' </font><font color="#000080">: </font>x <font color="#000080">:= </font>pop<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">)+</font>pop<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">);
      </font><font color="#800000">'-' </font><font color="#000080">: </font>x <font color="#000080">:= </font>pop<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">)-</font>pop<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">);
      </font><font color="#800000">'/' </font><font color="#000080">: </font>x <font color="#000080">:= </font>pop<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">) </font><font color="#FF0000"><b>div </b></font>pop<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">);
      </font><font color="#800000">'%' </font><font color="#000080">: </font>x <font color="#000080">:= </font>pop<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">) </font><font color="#FF0000"><b>MOD </b></font>pop<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">);
      </font><font color="#800000">'^' </font><font color="#000080">: </font>x <font color="#000080">:= </font>Power<font color="#000080">(</font>pop<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">),</font>pop<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">));
      </font><font color="#800000">'L' </font><font color="#000080">: </font>x <font color="#000080">:= </font>pop<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">) </font><font color="#FF0000"><b>SHL </b></font>pop<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">);
      </font><font color="#800000">'R' </font><font color="#000080">: </font>x <font color="#000080">:= </font>pop<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">) </font><font color="#FF0000"><b>SHR </b></font>pop<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">);
      </font><font color="#800000">'|' </font><font color="#000080">: </font>x <font color="#000080">:= </font>pop<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font>pop<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">);
      </font><font color="#800000">'&amp;' </font><font color="#000080">: </font>x <font color="#000080">:= </font>pop<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font>pop<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">);
      </font><font color="#800000">'$' </font><font color="#000080">: </font>x <font color="#000080">:= </font>pop<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">) </font><font color="#FF0000"><b>xor </b></font>pop<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">);
      </font><font color="#800000">'=' </font><font color="#000080">: </font><font color="#FF0000"><b>if </b></font>pop<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">) = </font>pop<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">) </font><font color="#FF0000"><b>then
              </b></font>x <font color="#000080">:= </font><font color="#800000">1
            </font><font color="#FF0000"><b>else
              </b></font>x <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font><font color="#800000">'&gt;' </font><font color="#000080">: </font><font color="#FF0000"><b>if </b></font>pop<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">) &gt; </font>pop<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">) </font><font color="#FF0000"><b>then
              </b></font>x <font color="#000080">:= </font><font color="#800000">1
            </font><font color="#FF0000"><b>else
              </b></font>x <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font><font color="#800000">'&lt;' </font><font color="#000080">: </font><font color="#FF0000"><b>if </b></font>pop<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">) &lt; </font>pop<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">) </font><font color="#FF0000"><b>then
              </b></font>x <font color="#000080">:= </font><font color="#800000">1
            </font><font color="#FF0000"><b>else
              </b></font>x <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font><font color="#800000">'0'</font><font color="#000080">,</font><font color="#800000">'1'</font><font color="#000080">..</font><font color="#800000">'9' </font><font color="#000080">:
            </font><font color="#FF0000"><b>begin
              </b></font>Numbers <font color="#000080">:= </font>True<font color="#000080">;
              </font>x <font color="#000080">:= </font>Ord<font color="#000080">(</font>c<font color="#000080">) - </font>Ord<font color="#000080">(</font><font color="#800000">'0'</font><font color="#000080">);
              </font>Exit
            <font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#800000">' ' </font><font color="#000080">: </font><font color="#FF0000"><b>if not </b></font>Numbers <font color="#FF0000"><b>then
              </b></font>Exit<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

    </font>Numbers <font color="#000080">:= </font>False<font color="#000080">;
    </font>Push<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">,</font>x<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>Writeln<font color="#000080">(</font><font color="#800000">'Gavin''s calculator, version 1.00'</font><font color="#000080">);
  </font>Writeln<font color="#000080">;
  </font><font color="#FF0000"><b>For </b></font>x <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">3 </font><font color="#FF0000"><b>DO
    </b></font>Stack<font color="#000080">[</font>x<font color="#000080">, </font><font color="#800000">0</font><font color="#000080">] := </font><font color="#800000">0</font><font color="#000080">;
  </font>x <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>numbers <font color="#000080">:= </font>False<font color="#000080">;
  </font>Bedmas <font color="#000080">:= </font><font color="#800000">50</font><font color="#000080">;
  </font>Writeln<font color="#000080">(</font><font color="#800000">'Enter an expression in infix:'</font><font color="#000080">);
  </font><font color="#FF0000"><b>Repeat
    </b></font>Read<font color="#000080">(</font>c<font color="#000080">);
    </font><font color="#FF0000"><b>Case </b></font>c <font color="#FF0000"><b>OF
      </b></font><font color="#800000">')' </font><font color="#000080">:
        </font><font color="#FF0000"><b>begin
          </b></font>Bedmas <font color="#000080">:= </font>Pop<font color="#000080">(</font><font color="#800000">3</font><font color="#000080">);
          </font>Evaluate<font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">);
          </font>Evaluate<font color="#000080">(</font>Chr<font color="#000080">(</font>pop<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">)));
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

      </font><font color="#800000">'^'</font><font color="#000080">,</font><font color="#800000">'%'</font><font color="#000080">,</font><font color="#800000">'+'</font><font color="#000080">,</font><font color="#800000">'-'</font><font color="#000080">,</font><font color="#800000">'*'</font><font color="#000080">,</font><font color="#800000">'/'</font><font color="#000080">,</font><font color="#800000">'L'</font><font color="#000080">,</font><font color="#800000">'R'</font><font color="#000080">,</font><font color="#800000">'|'</font><font color="#000080">,</font><font color="#800000">'&amp;'</font><font color="#000080">,</font><font color="#800000">'$'</font><font color="#000080">,</font><font color="#800000">'='</font><font color="#000080">,</font><font color="#800000">'&lt;'</font><font color="#000080">,</font><font color="#800000">'&gt;' </font><font color="#000080">:
        </font><font color="#FF0000"><b>begin
          </b></font>t <font color="#000080">:= </font>bedmas<font color="#000080">;
          </font><font color="#FF0000"><b>Case </b></font>c <font color="#FF0000"><b>Of

            </b></font><font color="#800000">'&gt;'</font><font color="#000080">,</font><font color="#800000">'&lt;' </font><font color="#000080">: </font>bedmas <font color="#000080">:= </font><font color="#800000">3</font><font color="#000080">;
            </font><font color="#800000">'|'</font><font color="#000080">,</font><font color="#800000">'$'</font><font color="#000080">,
            </font><font color="#800000">'+'</font><font color="#000080">,</font><font color="#800000">'-' </font><font color="#000080">: </font>bedmas <font color="#000080">:= </font><font color="#800000">2</font><font color="#000080">;
            </font><font color="#800000">'%'</font><font color="#000080">,</font><font color="#800000">'L'</font><font color="#000080">,</font><font color="#800000">'R'</font><font color="#000080">,</font><font color="#800000">'&amp;'</font><font color="#000080">,
            </font><font color="#800000">'*'</font><font color="#000080">,</font><font color="#800000">'/' </font><font color="#000080">: </font>bedmas <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
            </font><font color="#800000">'^'     </font><font color="#000080">: </font>bedmas <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
          </font><font color="#FF0000"><b>if </b></font>t <font color="#000080">&lt;= </font>bedmas <font color="#FF0000"><b>then
          begin
            </b></font>Evaluate<font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">);
            </font>Evaluate<font color="#000080">(</font>Chr<font color="#000080">(</font>pop<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">)));
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
          </font>Push<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font>ord<font color="#000080">(</font>c<font color="#000080">));
          </font>Evaluate<font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">);
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#800000">'(' </font><font color="#000080">:
        </font><font color="#FF0000"><b>begin
          </b></font>Push<font color="#000080">(</font><font color="#800000">3</font><font color="#000080">,</font>bedmas<font color="#000080">);
          </font>bedmas <font color="#000080">:= </font><font color="#800000">50</font><font color="#000080">;
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#800000">'0'</font><font color="#000080">,</font><font color="#800000">'1'</font><font color="#000080">..</font><font color="#800000">'9' </font><font color="#000080">: </font>Evaluate<font color="#000080">(</font>c<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>Until </b></font>Eoln<font color="#000080">;

  </font><font color="#FF0000"><b>While </b></font>Stack<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">] &lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>DO
  begin
    </b></font>Evaluate<font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">);
    </font>Evaluate<font color="#000080">(</font>Chr<font color="#000080">(</font>pop<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">)));
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>Evaluate<font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">);
  </font>Writeln<font color="#000080">;
  </font>Writeln<font color="#000080">;
  </font>Writeln<font color="#000080">(</font><font color="#800000">'The result is '</font><font color="#000080">,</font>Pop<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">));
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font><font color="#008000"><i>{
That's it, all.  This is an evaluator, like Reuben's, With a few
more features, and it's shorter.

Okay, there it is (the above comment was in the original post). I've
never tried it, but it looks good. :-) BTW, if it does work you might
want to thank Gavin Peters... after all, he wrote it. I was just
interested when I saw it, and stored it along With a bunch of other
source-code tidbits I've git here...
}
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to MATH SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0003.PAS">Original</a><b>]</b></p></body>
</html>
