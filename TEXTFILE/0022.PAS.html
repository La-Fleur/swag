<html>
<head><title> "Text to EXE Conversion" by ROBERT ROTHENBURG</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to TEXTFILE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0022.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt; Do you have some code that will produce a Program that makes
&gt; self-viewing Text Files (like txt2com)?

 This adds a small Text File to a loader which simply reads through the
 data and sends it to the ANSI driver, so it's good For ANSIs or Text
 Files that will fit in one screen.

 However you could change the loader (if you know assembly) to do paUses
 or output the File to STDOUT so you can use the more-pipe (|more).
}

(* MakeMsg v0.00 - Public Domain by Robert Rothenburg 1993 *)

</i></font><font color="#FF0000"><b>Program </b></font>MakeMessage<font color="#000080">;
</font><font color="#FF0000"><b>Const
  </b></font>loader <font color="#000080">: </font><font color="#FF0000"><b>Array </b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">14</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte <font color="#000080">=
      (</font><font color="#800000">$BE</font><font color="#000080">,</font><font color="#800000">$0F</font><font color="#000080">,</font><font color="#800000">$01</font><font color="#000080">,</font><font color="#800000">$B9</font><font color="#000080">,</font><font color="#800000">$00</font><font color="#000080">,</font><font color="#800000">$00</font><font color="#000080">,</font><font color="#800000">$FC</font><font color="#000080">,</font><font color="#800000">$AC</font><font color="#000080">,</font><font color="#800000">$CD</font><font color="#000080">,</font><font color="#800000">$29</font><font color="#000080">,</font><font color="#800000">$49</font><font color="#000080">,</font><font color="#800000">$75</font><font color="#000080">,</font><font color="#800000">$FA</font><font color="#000080">,</font><font color="#800000">$CD</font><font color="#000080">,</font><font color="#800000">$20</font><font color="#000080">);
</font><font color="#FF0000"><b>Var
  </b></font>fin<font color="#000080">, </font>fout <font color="#000080">: </font><font color="#FF0000"><b>File</b></font><font color="#000080">;
  </font>nin<font color="#000080">, </font>nout <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
  </font>buffer    <font color="#000080">: </font><font color="#FF0000"><b>Array </b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">4095</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte<font color="#000080">;
  </font>i         <font color="#000080">: </font>Word<font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>Writeln<font color="#000080">(</font><font color="#800000">'&quot;MakeMsg&quot; v0.00'</font><font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>ParamCount <font color="#000080">&lt;&gt; </font><font color="#800000">2 </font><font color="#FF0000"><b>then
    </b></font>Writeln<font color="#000080">(</font><font color="#800000">'Usage: MAKEMSG TextFile execFile'</font><font color="#000080">)
  </font><font color="#FF0000"><b>else
  begin
    </b></font>nin  <font color="#000080">:= </font>ParamStr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
    </font>nout <font color="#000080">:= </font>ParamStr<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">);
    </font>Assign<font color="#000080">(</font>fin<font color="#000080">, </font>nin<font color="#000080">);
    </font>reset<font color="#000080">(</font>fin<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
    </font>Assign<font color="#000080">(</font>fout<font color="#000080">, </font>nout<font color="#000080">);
    </font>reWrite<font color="#000080">(</font>fout<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
    </font>i <font color="#000080">:= </font>Filesize<font color="#000080">(</font>fin<font color="#000080">);
    </font>loader<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">] := </font>lo<font color="#000080">(</font>i<font color="#000080">);
    </font>loader<font color="#000080">[</font><font color="#800000">5</font><font color="#000080">] := </font>hi<font color="#000080">(</font>i<font color="#000080">);
    </font>BlockWrite<font color="#000080">(</font>fout<font color="#000080">, </font>loader<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">], </font><font color="#800000">15</font><font color="#000080">);
    </font><font color="#FF0000"><b>Repeat
      </b></font>BlockRead<font color="#000080">(</font>fin<font color="#000080">, </font>Buffer<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">], </font><font color="#800000">4096</font><font color="#000080">, </font>i<font color="#000080">);
      </font>BlockWrite<font color="#000080">(</font>fout<font color="#000080">, </font>Buffer<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">], </font>i<font color="#000080">)
    </font><font color="#FF0000"><b>Until </b></font>i <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">;
    </font>close<font color="#000080">(</font>fin<font color="#000080">);
    </font>close<font color="#000080">(</font>fout<font color="#000080">);
    </font>Writeln<font color="#000080">(</font><font color="#800000">'Done.'</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to TEXTFILE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0022.PAS">Original</a><b>]</b></p></body>
</html>
