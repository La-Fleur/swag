<html>
<head><title> "Text File Viewer" by STEVEN EDWARDS</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to TEXTFILE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0061.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
Well, I'm writing a File Viewer and it works great, except for one thing, if
you're on the last screen of the file you're viewing, and you hit Page Down...
it will go BELOW the last line and display sime High ASCii Characters... I
have tried many things to get this to work... but it won't.. 
If SWAG wants this, they can have it...

---------------------------&lt;CUT HERE&gt;---------------------------

{This is Released Into the Public Domain on May 21             }
{By Steven B Edwards. Do what you want to it, if yo      ,     }
{give me some credit if you use it.                            }

</i></font><font color="#FF0000"><b>Uses </b></font>Crt<font color="#000080">, </font>Dos<font color="#000080">;

</font><font color="#FF0000"><b>Type </b></font>LinePtr <font color="#000080">= ^</font>LineRec<font color="#000080">;
     </font>LineRec <font color="#000080">= </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">79</font><font color="#000080">];

</font><font color="#FF0000"><b>Var </b></font>CurLine<font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">16000</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>LinePtr<font color="#000080">;
    </font>Total<font color="#000080">: </font>Integer<font color="#000080">;
    </font>Current<font color="#000080">, </font>OldLine<font color="#000080">: </font>Integer<font color="#000080">;
    </font>F<font color="#000080">: </font>Text<font color="#000080">;
    </font>I<font color="#000080">: </font>Byte<font color="#000080">;
    </font>Ch<font color="#000080">: </font>Char<font color="#000080">;
    </font>Done<font color="#000080">, </font>Again<font color="#000080">: </font>Boolean<font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>WriteColor<font color="#000080">(</font>S <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">);
</font><font color="#FF0000"><b>var
  </b></font>I<font color="#000080">: </font>byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
 for </b></font>I <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>Length<font color="#000080">(</font>S<font color="#000080">)
  </font><font color="#FF0000"><b>do begin
   case </b></font>S<font color="#000080">[</font>I<font color="#000080">] </font><font color="#FF0000"><b>of
    </b></font><font color="#800000">'0'</font><font color="#000080">..</font><font color="#800000">'9' </font><font color="#000080">: </font>textcolor<font color="#000080">(</font>lightcyan<font color="#000080">);
    </font><font color="#800000">'A'</font><font color="#000080">..</font><font color="#800000">'Z' </font><font color="#000080">: </font>textcolor<font color="#000080">(</font>LightGray<font color="#000080">);
    </font><font color="#800000">'a'</font><font color="#000080">..</font><font color="#800000">'z' </font><font color="#000080">: </font>textcolor<font color="#000080">(</font>White<font color="#000080">);
    </font><font color="#800000">#9</font><font color="#000080">: </font>Write<font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">:</font><font color="#800000">8</font><font color="#000080">);
    </font><font color="#FF0000"><b>else </b></font>textcolor<font color="#000080">(</font><font color="#800000">3</font><font color="#000080">);
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>If </b></font>S<font color="#000080">[</font>I<font color="#000080">] &lt;&gt; </font><font color="#800000">#9 </font><font color="#FF0000"><b>then </b></font>write<font color="#000080">(</font>S<font color="#000080">[</font>I<font color="#000080">]);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>I <font color="#000080">:= </font><font color="#800000">79 </font><font color="#000080">- </font>Length<font color="#000080">(</font>S<font color="#000080">); </font>Write<font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">:</font>I<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Begin

</b></font>ClrScr<font color="#000080">;

</font>Assign<font color="#000080">(</font>F<font color="#000080">, </font>ParamStr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">));
</font>Reset<font color="#000080">(</font>F<font color="#000080">);
</font>Total <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
</font><font color="#FF0000"><b>While not </b></font>Eof<font color="#000080">(</font>F<font color="#000080">) </font><font color="#FF0000"><b>do begin
</b></font>New <font color="#000080">(</font>CurLine<font color="#000080">[</font>Total<font color="#000080">]);
</font>ReadLn<font color="#000080">(</font>F<font color="#000080">, </font>CurLine<font color="#000080">[</font>Total<font color="#000080">]^);
</font>Inc<font color="#000080">(</font>Total<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font>Close<font color="#000080">(</font>F<font color="#000080">);

</font>Current <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
</font>Again <font color="#000080">:= </font>True<font color="#000080">;
</font>Done <font color="#000080">:= </font>False<font color="#000080">;

</font><font color="#FF0000"><b>Repeat
If </b></font>Again <font color="#FF0000"><b>then begin
For </b></font>I <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">23 </font><font color="#FF0000"><b>do begin
                    </b></font>GotoXY<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">, </font>I <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">);
                    </font>WriteColor<font color="#000080">(</font>CurLine<font color="#000080">[</font>Current <font color="#000080">+ </font>I<font color="#000080">]^);
                    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
                    </font>Again <font color="#000080">:= </font>False<font color="#000080">; </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font>Ch <font color="#000080">:= </font>ReadKey<font color="#000080">;
</font><font color="#FF0000"><b>Case </b></font>Ch <font color="#FF0000"><b>of
     </b></font><font color="#800000">#0</font><font color="#000080">: </font><font color="#FF0000"><b>begin
         </b></font>OldLine <font color="#000080">:= </font>Current<font color="#000080">;
         </font>Ch <font color="#000080">:= </font>ReadKey<font color="#000080">;
         </font><font color="#FF0000"><b>Case </b></font>Ch <font color="#FF0000"><b>of
              </b></font><font color="#800000">#72</font><font color="#000080">: </font><font color="#FF0000"><b>If </b></font>Current <font color="#000080">&gt; </font><font color="#800000">1 </font><font color="#FF0000"><b>then </b></font>Dec<font color="#000080">(</font>Current<font color="#000080">);
              </font><font color="#800000">#80</font><font color="#000080">: </font><font color="#FF0000"><b>If </b></font>Current <font color="#000080">+ </font><font color="#800000">24 </font><font color="#000080">&lt; </font>Total <font color="#FF0000"><b>then </b></font>Inc<font color="#000080">(</font>Current<font color="#000080">);
              </font><font color="#800000">#73</font><font color="#000080">: </font><font color="#008000"><i>{Page Up}
                   </i></font><font color="#FF0000"><b>If </b></font>Current <font color="#000080">&gt; </font><font color="#800000">23 </font><font color="#FF0000"><b>then </b></font>Dec<font color="#000080">(</font>Current<font color="#000080">, </font><font color="#800000">23</font><font color="#000080">);
              </font><font color="#800000">#81</font><font color="#000080">: </font><font color="#008000"><i>{Page Down}
                   </i></font><font color="#FF0000"><b>If </b></font>Current <font color="#000080">&lt; </font>Total <font color="#000080">- </font><font color="#800000">25 </font><font color="#FF0000"><b>then </b></font>Inc<font color="#000080">(</font>Current<font color="#000080">, </font><font color="#800000">23</font><font color="#000080">)
                   </font><font color="#FF0000"><b>else </b></font>Current <font color="#000080">:= </font>Total <font color="#000080">- </font><font color="#800000">24</font><font color="#000080">;
              </font><font color="#800000">#71</font><font color="#000080">: </font><font color="#008000"><i>{Home}
                   </i></font>Current <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
              </font><font color="#800000">#79</font><font color="#000080">: </font><font color="#008000"><i>{End}
                   </i></font>Current <font color="#000080">:= </font>Total <font color="#000080">- </font><font color="#800000">24</font><font color="#000080">;
              </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

         </font><font color="#FF0000"><b>If </b></font>OldLine <font color="#000080">&lt;&gt; </font>Current <font color="#FF0000"><b>then </b></font>Again <font color="#000080">:= </font>True<font color="#000080">;

         </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Until </b></font>Ch <font color="#000080">= </font><font color="#800000">#27</font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to TEXTFILE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0061.PAS">Original</a><b>]</b></p></body>
</html>
