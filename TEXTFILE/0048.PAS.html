<html>
<head><title> "Converting strings in Text files" by MIKE CHURCH</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to TEXTFILE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0048.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>Program </b></font>StrLenConv<font color="#000080">;
</font><font color="#FF0000"><b>Uses
    </b></font>Dos<font color="#000080">, </font>Crt<font color="#000080">;
</font><font color="#FF0000"><b>Type
    </b></font>String_128  <font color="#000080">= </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">128</font><font color="#000080">];
    </font>String_127  <font color="#000080">= </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">127</font><font color="#000080">];
</font><font color="#FF0000"><b>Var
   </b></font>X<font color="#000080">,</font>Y<font color="#000080">,</font>StrPos  <font color="#000080">: </font>Byte<font color="#000080">;
   </font>File128     <font color="#000080">: </font><font color="#FF0000"><b>File of </b></font>String_128<font color="#000080">;
   </font>File127     <font color="#000080">: </font><font color="#FF0000"><b>File of </b></font>String_127<font color="#000080">;
   </font>Str128      <font color="#000080">: </font>String_128<font color="#000080">;
   </font>Str127      <font color="#000080">: </font>String_127<font color="#000080">;
   </font>TempFile    <font color="#000080">: </font>Text<font color="#000080">;
</font><font color="#FF0000"><b>Function  </b></font>FileExist<font color="#000080">(</font>FileName<font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">): </font>Boolean<font color="#000080">;
          </font><font color="#FF0000"><b>Var
             </b></font>Tmpfile     <font color="#000080">: </font>Text<font color="#000080">;
             </font>Attrib      <font color="#000080">: </font>Word<font color="#000080">;
          </font><font color="#FF0000"><b>Begin </b></font><font color="#008000"><i>{Function FileExist}
                </i></font><font color="#FF0000"><b>If </b></font>FileName <font color="#000080">= </font><font color="#800000">'' </font><font color="#FF0000"><b>then
                   Begin </b></font><font color="#008000"><i>{If FileName = ''}
                         </i></font>FileExist <font color="#000080">:= </font>False<font color="#000080">; </font>Exit<font color="#000080">;
                   </font><font color="#FF0000"><b>End</b></font><font color="#000080">;  </font><font color="#008000"><i>{If FileName = ''}
                </i></font>Assign<font color="#000080">(</font>Tmpfile<font color="#000080">,</font>FileName<font color="#000080">);
                </font>GetFAttr<font color="#000080">(</font>Tmpfile<font color="#000080">,</font>Attrib<font color="#000080">);
                </font>FileExist <font color="#000080">:= (</font>DosError <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">);
          </font><font color="#FF0000"><b>End</b></font><font color="#000080">;  </font><font color="#008000"><i>{Function FileExist}
</i></font><font color="#FF0000"><b>Begin </b></font><font color="#008000"><i>{Main}
      </i></font>TextMode<font color="#000080">(</font>c80<font color="#000080">);
      </font>ClrScr<font color="#000080">;
      </font>Writeln<font color="#000080">(</font><font color="#800000">'Source file with 128 character strings:'</font><font color="#000080">);
      </font>Write<font color="#000080">(</font><font color="#800000">' &thorn; '</font><font color="#000080">); </font>Readln<font color="#000080">(</font>Str127<font color="#000080">);
      </font><font color="#FF0000"><b>If not</b></font><font color="#000080">(</font>FileExist<font color="#000080">(</font>Str127<font color="#000080">)) </font><font color="#FF0000"><b>then
         Begin </b></font><font color="#008000"><i>{If not(FileExist(Str127))}
               </i></font>Writeln<font color="#000080">;
               </font>Writeln<font color="#000080">(</font><font color="#800000">' Error: ' </font><font color="#000080">+ </font>Str127 <font color="#000080">+ </font><font color="#800000">' does not exist.'</font><font color="#000080">);
               </font>Halt<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
         </font><font color="#FF0000"><b>End</b></font><font color="#000080">;  </font><font color="#008000"><i>{If not(FileExist(Str127))}
      </i></font>Assign<font color="#000080">(</font>File128<font color="#000080">,</font>Str127<font color="#000080">);
      </font>Reset<font color="#000080">(</font>File128<font color="#000080">);
      </font>Writeln<font color="#000080">;
      </font>Writeln<font color="#000080">(</font><font color="#800000">'Destination file for 127 character strings:'</font><font color="#000080">);
      </font>Write<font color="#000080">(</font><font color="#800000">' &thorn; '</font><font color="#000080">); </font>Readln<font color="#000080">(</font>Str127<font color="#000080">);
      </font><font color="#FF0000"><b>If </b></font>FileExist<font color="#000080">(</font>Str127<font color="#000080">) </font><font color="#FF0000"><b>then
         Begin </b></font><font color="#008000"><i>{If FileExist(Str127)}
               </i></font>Writeln<font color="#000080">;
               </font>Writeln<font color="#000080">(</font><font color="#800000">' Error: ' </font><font color="#000080">+ </font>Str127 <font color="#000080">+ </font><font color="#800000">' already exists.'</font><font color="#000080">);
               </font>Halt<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
         </font><font color="#FF0000"><b>End</b></font><font color="#000080">;  </font><font color="#008000"><i>{If FileExist(Str127)}
      </i></font>Assign<font color="#000080">(</font>File127<font color="#000080">,</font>Str127<font color="#000080">);
      </font>ReWrite<font color="#000080">(</font>File127<font color="#000080">);
      </font>Assign<font color="#000080">(</font>TempFile<font color="#000080">,</font><font color="#800000">'128TO127.TMP'</font><font color="#000080">);
      </font>ReWrite<font color="#000080">(</font>TempFile<font color="#000080">);
      </font>StrPos <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
      </font>Writeln<font color="#000080">;
      </font>Writeln<font color="#000080">(</font><font color="#800000">'Reading Source File...'</font><font color="#000080">);
      </font><font color="#FF0000"><b>Repeat
            </b></font>Read<font color="#000080">(</font>File128<font color="#000080">,</font>Str128<font color="#000080">);
            </font><font color="#FF0000"><b>For </b></font>X <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">128 </font><font color="#FF0000"><b>do </b></font>Writeln<font color="#000080">(</font>TempFile<font color="#000080">,</font>Str128<font color="#000080">[</font>X<font color="#000080">]);
      </font><font color="#FF0000"><b>Until </b></font>EOF<font color="#000080">(</font>File128<font color="#000080">);
      </font>Reset<font color="#000080">(</font>TempFile<font color="#000080">);
      </font>Close<font color="#000080">(</font>File128<font color="#000080">);
      </font>Writeln<font color="#000080">;
      </font>Writeln<font color="#000080">(</font><font color="#800000">'Writing Destination File...'</font><font color="#000080">);
      </font><font color="#FF0000"><b>Repeat
            For </b></font>X <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">127 </font><font color="#FF0000"><b>do
                Begin </b></font><font color="#008000"><i>{For X := 1 to 127}
                      </i></font>Readln<font color="#000080">(</font>TempFile<font color="#000080">,</font>Str128<font color="#000080">);
                      </font>Str127<font color="#000080">[</font>X<font color="#000080">] := </font>Str128<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">];
                </font><font color="#FF0000"><b>End</b></font><font color="#000080">;  </font><font color="#008000"><i>{For X := 1 to 127}
            </i></font>Write<font color="#000080">(</font>File127<font color="#000080">,</font>Str127<font color="#000080">);
      </font><font color="#FF0000"><b>Until </b></font>EOF<font color="#000080">(</font>TempFile<font color="#000080">);
      </font>Close<font color="#000080">(</font>File127<font color="#000080">);
      </font>Erase<font color="#000080">(</font>TempFile<font color="#000080">);
      </font>Close<font color="#000080">(</font>TempFile<font color="#000080">);
</font><font color="#FF0000"><b>End</b></font><font color="#000080">.  </font><font color="#008000"><i>{Main}

</i></font>Feel free <font color="#FF0000"><b>to </b></font>edit this however you like<font color="#000080">.  </font>What it does <font color="#000080">(</font><font color="#FF0000"><b>in </b></font>a nutshell<font color="#000080">)
</font><font color="#FF0000"><b>is </b></font>read a <font color="#FF0000"><b>file </b></font>which has <font color="#800000">128 </font>character strings<font color="#000080">, </font>saves each character <font color="#FF0000"><b>to
</b></font>a text <font color="#FF0000"><b>file </b></font><font color="#000080">(</font>one <font color="#FF0000"><b>on </b></font>a line<font color="#000080">), </font><font color="#FF0000"><b>and then </b></font>re<font color="#000080">-</font>reads them into the <font color="#800000">127
</font>character strings<font color="#000080">, </font>writing each one <font color="#FF0000"><b>to </b></font>a <font color="#FF0000"><b>file</b></font><font color="#000080">.

</font>I hope this <font color="#FF0000"><b>is </b></font>what you were looking <font color="#FF0000"><b>for</b></font><font color="#000080">.

</font>Michael J<font color="#000080">. </font>Church
MC Squared Computing Technologies
<font color="#000080">---
 &thorn; </font>RNet <font color="#800000">1.08</font>R<font color="#000080">:&thorn; </font>NANET <font color="#000080">&thorn; </font>After Five<font color="#800000">' BBS &thorn; Elkhart, IN &thorn; (219) 262-1370
</font> 
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to TEXTFILE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0048.PAS">Original</a><b>]</b></p></body>
</html>
