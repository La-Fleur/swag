<html>
<head><title> "Dump File in HEX and BCD" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to TEXTFILE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0002.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{   In the following message is a Complete Program I just wrote
(including 3 routines from TeeCee's hints) which solves a particular
problem I was having, but also demonstrates some things I see queried
here.  So, there are a number of useful routines in it, as well as a
whole Program which may help.
   This Program dumps a Dos File to Hex and (modified) BCD.  It is
patterned after Vernon Buerg's LIST display (using Alt-H), which I find
useful to look at binary Files.  The problem is (was) I couldn't PrtSc
the screens, due to numerous special Characters which often hung my
Printer.  So, I wrote this Program to &quot;dump&quot; such Files to either the
Printer or a Printer File.  It substitutes an underscore For most
special Characters (you can change this, of course).
   note, too, that it demonstates the use of a C-like Character stream
i/o, which is a Variation of the &quot;stream i/o&quot; which is discussed here.
This allows fast i/o of any Type of File, and could be modified to
provide perFormant i/o For Text Files.
   A number of the internal routines are a bit clumsy, since I had to
(107 min left), (H)elp, More? make them &quot;generic&quot; For this post, rather than make use of after-market
libraries that I use (TTT, in my Case).
   Enjoy!...
}

</i></font><font color="#FF0000"><b>Program </b></font>Hex_Dump<font color="#000080">;        </font><font color="#008000"><i>{ Dump a File in Hex and BCD   930107 }
</i></font><font color="#FF0000"><b>Uses </b></font>Crt<font color="#000080">, </font>Dos<font color="#000080">, </font>Printer<font color="#000080">;
</font><font color="#008000"><i>{$M 8192,0,8192}
   {  Public Domain, by Mike Copeland and Trevor Carlsen  1993 }
</i></font><font color="#FF0000"><b>Const </b></font>VERSION <font color="#000080">= </font><font color="#800000">'1.1'</font><font color="#000080">;
      </font>BSize   <font color="#000080">= </font><font color="#800000">32768</font><font color="#000080">;                           </font><font color="#008000"><i>{ Buffer Size }
      </i></font>ifLinE  <font color="#000080">= </font><font color="#800000">4</font><font color="#000080">;                          </font><font color="#008000"><i>{ InFormation Line }
      </i></font>PRLinE  <font color="#000080">= </font><font color="#800000">24</font><font color="#000080">;                              </font><font color="#008000"><i>{ Prompt Line }
      </i></font>ERLinE  <font color="#000080">= </font><font color="#800000">25</font><font color="#000080">;                               </font><font color="#008000"><i>{ Error Line }
      </i></font>DSLinE  <font color="#000080">= </font><font color="#800000">22</font><font color="#000080">;                             </font><font color="#008000"><i>{ Display Line }
      </i></font>PL      <font color="#000080">= </font><font color="#800000">1</font><font color="#000080">;                          </font><font color="#008000"><i>{ partial line o/p }
      </i></font>WL      <font color="#000080">= </font><font color="#800000">2</font><font color="#000080">;                            </font><font color="#008000"><i>{ whole line o/p }
      </i></font>B40     <font color="#000080">= </font><font color="#800000">'                                        '</font><font color="#000080">;
</font><font color="#FF0000"><b>Var   </b></font>CP      <font color="#000080">: </font>Word<font color="#000080">;                      </font><font color="#008000"><i>{ Character Pointer }
      </i></font>BLKNO   <font color="#000080">: </font>Word<font color="#000080">;                                </font><font color="#008000"><i>{ Block # }
      </i></font>L<font color="#000080">,</font>N     <font color="#000080">: </font>Word<font color="#000080">;
      </font>RES     <font color="#000080">: </font>Word<font color="#000080">;
      </font>LONG    <font color="#000080">: </font>LongInt<font color="#000080">;
      </font>NCP     <font color="#000080">: </font>LongInt<font color="#000080">;              </font><font color="#008000"><i>{ # Characters Processed }
      </i></font>FSize   <font color="#000080">: </font>LongInt<font color="#000080">;                  </font><font color="#008000"><i>{ Computed File Size }
      </i></font>BV      <font color="#000080">: </font>Byte<font color="#000080">;                  </font><font color="#008000"><i>{ generic Byte Variable }
      </i></font>PRtoK   <font color="#000080">: </font>Boolean<font color="#000080">;
      </font>PFP     <font color="#000080">: </font>Boolean<font color="#000080">;
      </font>REGS    <font color="#000080">: </font>Registers<font color="#000080">;
      </font>PRTFile <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
      </font>F1      <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
      </font>MSTR<font color="#000080">,</font>S1 <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
      </font>PFV1    <font color="#000080">: </font>Text<font color="#000080">;
      </font>F       <font color="#000080">: </font><font color="#FF0000"><b>File</b></font><font color="#000080">;
      </font>B       <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font>BSize<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte<font color="#000080">;
      </font>CH      <font color="#000080">: </font>Char<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>WPROM <font color="#000080">(</font>S <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">);             </font><font color="#008000"><i>{ generalized Prompt }
</i></font><font color="#FF0000"><b>begin
  </b></font>GotoXY <font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font>PRLinE<font color="#000080">); </font>Write <font color="#000080">(</font>S<font color="#000080">); </font>ClrEol<font color="#000080">; </font>GotoXY <font color="#000080">(</font>Length<font color="#000080">(</font>S<font color="#000080">)+</font><font color="#800000">1</font><font color="#000080">,</font>PRLinE<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{ WPROM }

</i></font><font color="#FF0000"><b>Procedure </b></font>CLEARBOT<font color="#000080">;                   </font><font color="#008000"><i>{ clear bottom of screen }
</i></font><font color="#FF0000"><b>begin
  </b></font>GotoXY <font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font>PRLinE<font color="#000080">); </font>ClrEol<font color="#000080">; </font>GotoXY <font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font>ERLinE<font color="#000080">); </font>ClrEol
<font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{ CLEARBOT }

</i></font><font color="#FF0000"><b>Function </b></font>GETYN <font color="#000080">: </font>Char<font color="#000080">;               </font><font color="#008000"><i>{ get Single-key response }
</i></font><font color="#FF0000"><b>Var </b></font>CH <font color="#000080">: </font>Char<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>CH <font color="#000080">:= </font>UpCase<font color="#000080">(</font>ReadKey<font color="#000080">); </font><font color="#FF0000"><b>if </b></font>CH <font color="#000080">= </font><font color="#800000">#0 </font><font color="#FF0000"><b>then </b></font>CH <font color="#000080">:= </font>ReadKey<font color="#000080">;
  </font>CLEARBOT<font color="#000080">; </font>GETYN <font color="#000080">:= </font>CH<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{ GETYN }

</i></font><font color="#FF0000"><b>Procedure </b></font>PAUSE<font color="#000080">;              </font><font color="#008000"><i>{ Generalized Pause processing }
</i></font><font color="#FF0000"><b>Var </b></font>CH <font color="#000080">: </font>Char<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>WPROM <font color="#000080">(</font><font color="#800000">'Press any key to continue...'</font><font color="#000080">); </font>CH <font color="#000080">:= </font>GETYN
<font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{ PAUSE }

</i></font><font color="#FF0000"><b>Procedure </b></font>ERRor1 <font color="#000080">(</font>S <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">);       </font><font color="#008000"><i>{ General Error process }
</i></font><font color="#FF0000"><b>Var </b></font>CH <font color="#000080">: </font>Char<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>GotoXY <font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font>ERLinE<font color="#000080">); </font>Write <font color="#000080">(^</font>G<font color="#000080">,</font>S<font color="#000080">); </font>ClrEol<font color="#000080">; </font>PAUSE
<font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{ ERRor1 }

</i></font><font color="#FF0000"><b>Procedure </b></font>FATAL <font color="#000080">(</font>S <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">);      </font><font color="#008000"><i>{ Fatal error - Terminate }
</i></font><font color="#FF0000"><b>begin
  </b></font>ERRor1 <font color="#000080">(</font>S<font color="#000080">); </font>Halt
<font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{ FATAL }

</i></font><font color="#FF0000"><b>Function </b></font>TEStoNLinE <font color="#000080">: </font>Byte<font color="#000080">;      </font><font color="#008000"><i>{ Tests For Printer On Line }
</i></font><font color="#FF0000"><b>Var  </b></font>REGS <font color="#000080">: </font>Registers<font color="#000080">;
</font><font color="#FF0000"><b>begin
  With </b></font>REGS <font color="#FF0000"><b>do
    begin
      </b></font>AH <font color="#000080">:= </font><font color="#800000">2</font><font color="#000080">; </font>DX <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font>Intr<font color="#000080">(</font><font color="#800000">$17</font><font color="#000080">, </font>Dos<font color="#000080">.</font>Registers<font color="#000080">(</font>REGS<font color="#000080">));
      </font>TEStoNLinE <font color="#000080">:= </font>AH<font color="#000080">;
    </font><font color="#FF0000"><b>end
end</b></font><font color="#000080">;  </font><font color="#008000"><i>{ TEStoNLinE }

</i></font><font color="#FF0000"><b>Function </b></font>SYS_DATE <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">;   </font><font color="#008000"><i>{ Format System Date as YY/MM/DD }
</i></font><font color="#FF0000"><b>Var </b></font>S1<font color="#000080">, </font>S2<font color="#000080">, </font>S3 <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">2</font><font color="#000080">];
</font><font color="#FF0000"><b>begin
  </b></font>REGS<font color="#000080">.</font>AX <font color="#000080">:= </font><font color="#800000">$2A00</font><font color="#000080">;                                 </font><font color="#008000"><i>{ Function }
  </i></font>MsDos <font color="#000080">(</font>Dos<font color="#000080">.</font>Registers<font color="#000080">(</font>REGS<font color="#000080">));             </font><font color="#008000"><i>{ fetch System Date }
  </i></font><font color="#FF0000"><b>With </b></font>REGS <font color="#FF0000"><b>do
    begin
      </b></font>Str<font color="#000080">((</font>CX <font color="#FF0000"><b>mod </b></font><font color="#800000">100</font><font color="#000080">):</font><font color="#800000">2</font><font color="#000080">,</font>S1<font color="#000080">); </font>Str<font color="#000080">(</font>Hi<font color="#000080">(</font>DX<font color="#000080">):</font><font color="#800000">2</font><font color="#000080">,</font>S2<font color="#000080">); </font>Str<font color="#000080">(</font>Lo<font color="#000080">(</font>DX<font color="#000080">):</font><font color="#800000">2</font><font color="#000080">,</font>S3<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>S2<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] = </font><font color="#800000">' ' </font><font color="#FF0000"><b>then </b></font>S2<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] := </font><font color="#800000">'0'</font><font color="#000080">;           </font><font color="#008000"><i>{ fill in blanks }
  </i></font><font color="#FF0000"><b>if </b></font>S3<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] = </font><font color="#800000">' ' </font><font color="#FF0000"><b>then </b></font>S3<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] := </font><font color="#800000">'0'</font><font color="#000080">;
  </font>SYS_DATE <font color="#000080">:= </font>S1<font color="#000080">+</font><font color="#800000">'/'</font><font color="#000080">+</font>S2<font color="#000080">+</font><font color="#800000">'/'</font><font color="#000080">+</font>S3
<font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{ SYS_DATE }

</i></font><font color="#FF0000"><b>Function </b></font>SYS_TIME <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">;               </font><font color="#008000"><i>{ Format System Time }
</i></font><font color="#FF0000"><b>Var </b></font>S1<font color="#000080">, </font>S2<font color="#000080">, </font>S3 <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">2</font><font color="#000080">];
</font><font color="#FF0000"><b>begin
  </b></font>REGS<font color="#000080">.</font>AX <font color="#000080">:= </font><font color="#800000">$2C00</font><font color="#000080">;                                 </font><font color="#008000"><i>{ Function }
  </i></font>MsDos <font color="#000080">(</font>Dos<font color="#000080">.</font>Registers<font color="#000080">(</font>REGS<font color="#000080">));             </font><font color="#008000"><i>{ fetch System Time }
  </i></font><font color="#FF0000"><b>With </b></font>REGS <font color="#FF0000"><b>do
    begin
      </b></font>Str<font color="#000080">(</font>Hi<font color="#000080">(</font>CX<font color="#000080">):</font><font color="#800000">2</font><font color="#000080">,</font>S1<font color="#000080">); </font>Str<font color="#000080">(</font>Lo<font color="#000080">(</font>CX<font color="#000080">):</font><font color="#800000">2</font><font color="#000080">,</font>S2<font color="#000080">); </font>Str<font color="#000080">(</font>Hi<font color="#000080">(</font>DX<font color="#000080">):</font><font color="#800000">2</font><font color="#000080">,</font>S3<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>S2<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] = </font><font color="#800000">' ' </font><font color="#FF0000"><b>then </b></font>S2<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] := </font><font color="#800000">'0'</font><font color="#000080">;           </font><font color="#008000"><i>{ fill in blanks }
  </i></font><font color="#FF0000"><b>if </b></font>S3<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] = </font><font color="#800000">' ' </font><font color="#FF0000"><b>then </b></font>S3<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] := </font><font color="#800000">'0'</font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>S1<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] = </font><font color="#800000">' ' </font><font color="#FF0000"><b>then </b></font>S1<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] := </font><font color="#800000">'0'</font><font color="#000080">;
  </font>SYS_TIME <font color="#000080">:= </font>S1<font color="#000080">+</font><font color="#800000">':'</font><font color="#000080">+</font>S2<font color="#000080">+</font><font color="#800000">':'</font><font color="#000080">+</font>S3
<font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{ SYS_TIME }

</i></font><font color="#FF0000"><b>Function </b></font>EXISTS <font color="#000080">( </font>FN <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">): </font>Boolean<font color="#000080">;  </font><font color="#008000"><i>{ test File existance }
</i></font><font color="#FF0000"><b>Var </b></font>F <font color="#000080">: </font>SearchRec<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>FindFirst <font color="#000080">(</font>FN<font color="#000080">,</font>AnyFile<font color="#000080">,</font>F<font color="#000080">); </font>EXISTS <font color="#000080">:= </font>DosError <font color="#000080">= </font><font color="#800000">0
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{ EXISTS }

</i></font><font color="#FF0000"><b>Function </b></font>UPPER <font color="#000080">(</font>S <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">) : </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Var </b></font>I <font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  For </b></font>I <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>Length<font color="#000080">(</font>S<font color="#000080">) </font><font color="#FF0000"><b>do
    </b></font>S<font color="#000080">[</font>I<font color="#000080">] := </font>UpCase<font color="#000080">(</font>S<font color="#000080">[</font>I<font color="#000080">]);
  </font>UPPER <font color="#000080">:= </font>S<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{ UPPER }

</i></font><font color="#FF0000"><b>Procedure </b></font>SET_File <font color="#000080">(</font>FN <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">);      </font><font color="#008000"><i>{ File Output For PRinT }
</i></font><font color="#FF0000"><b>begin
  </b></font>PRTFile <font color="#000080">:= </font>FN<font color="#000080">; </font>PFP <font color="#000080">:= </font>False<font color="#000080">; </font>PRtoK <font color="#000080">:= </font>False<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{ SET_File }

</i></font><font color="#FF0000"><b>Procedure </b></font>PRinT_inIT <font color="#000080">(</font>S <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">);  </font><font color="#008000"><i>{ Initialize Printer/File Output }
</i></font><font color="#FF0000"><b>Var </b></font>X<font color="#000080">,</font>Y <font color="#000080">: </font>Word<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>PRtoK <font color="#000080">:= </font>TestOnLine <font color="#000080">= </font><font color="#800000">144</font><font color="#000080">; </font>PFP <font color="#000080">:= </font>False<font color="#000080">; </font>X <font color="#000080">:= </font>WhereX<font color="#000080">; </font>Y <font color="#000080">:= </font>WhereY<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>PRtoK <font color="#FF0000"><b>then
    begin
      </b></font>WPROM <font color="#000080">(</font><font color="#800000">'Printer is Online - do you wish Printer or File? (P/f) '</font><font color="#000080">);

      </font><font color="#FF0000"><b>if </b></font>GETYN <font color="#000080">= </font><font color="#800000">'F' </font><font color="#FF0000"><b>then </b></font>SET_File <font color="#000080">(</font>S<font color="#000080">)
      </font><font color="#FF0000"><b>else
        begin
          </b></font>WPROM <font color="#000080">(</font><font color="#800000">'Please align Printer'</font><font color="#000080">); </font>PAUSE
        <font color="#FF0000"><b>end
    end
  else </b></font>SET_File <font color="#000080">(</font>S<font color="#000080">);
  </font>GotoXY <font color="#000080">(</font>X<font color="#000080">,</font>Y<font color="#000080">)                            </font><font color="#008000"><i>{ restore cursor }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{ PRinT_inIT }

</i></font><font color="#FF0000"><b>Function </b></font>OPENF <font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>FV <font color="#000080">: </font>Text<font color="#000080">; </font>FN <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">; </font>MODE <font color="#000080">: </font>Char<font color="#000080">) : </font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>Var </b></font>FLAG  <font color="#000080">: </font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>FLAG <font color="#000080">:= </font>True<font color="#000080">;                             </font><font color="#008000"><i>{ set default }
  </i></font>Assign <font color="#000080">(</font>FV<font color="#000080">, </font>FN<font color="#000080">);                        </font><font color="#008000"><i>{ allocate File }
  </i></font><font color="#FF0000"><b>Case </b></font>UpCase<font color="#000080">(</font>MODE<font color="#000080">) </font><font color="#FF0000"><b>of                        </b></font><font color="#008000"><i>{ open mode }
    </i></font><font color="#800000">'W' </font><font color="#000080">: </font><font color="#FF0000"><b>begin                                  </b></font><font color="#008000"><i>{ output }
            {$I-} </i></font>ReWrite <font color="#000080">(</font>FV<font color="#000080">); </font><font color="#008000"><i>{$I+}
          </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#800000">'R' </font><font color="#000080">: </font><font color="#FF0000"><b>begin                                   </b></font><font color="#008000"><i>{ input }
            {$I-} </i></font>Reset <font color="#000080">(</font>FV<font color="#000080">); </font><font color="#008000"><i>{$I+}
          </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#800000">'A' </font><font color="#000080">: </font><font color="#FF0000"><b>begin                            </b></font><font color="#008000"><i>{ input/extend }
            {$I-} </i></font>Append <font color="#000080">(</font>FV<font color="#000080">); </font><font color="#008000"><i>{$I+}
          </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>else
  end</b></font><font color="#000080">; </font><font color="#008000"><i>{ of Case }
  </i></font><font color="#FF0000"><b>if </b></font>Ioresult <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then          </b></font><font color="#008000"><i>{ test For error on OPEN }
    </i></font><font color="#FF0000"><b>begin
      </b></font>FLAG <font color="#000080">:= </font>False<font color="#000080">;           </font><font color="#008000"><i>{ set Function result flag }
      </i></font>ERRor1 <font color="#000080">(</font><font color="#800000">'*** Unable to OPEN '</font><font color="#000080">+</font>FN<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>OPENF <font color="#000080">:= </font>FLAG                        <font color="#008000"><i>{ set return value }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{ OPENF }

</i></font><font color="#FF0000"><b>Procedure </b></font>PRinT <font color="#000080">(</font>inD <font color="#000080">: </font>Integer<font color="#000080">; </font>X <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">); </font><font color="#008000"><i>{ Print Report Line }
</i></font><font color="#FF0000"><b>Var </b></font>AF <font color="#000080">: </font>Char<font color="#000080">;                              </font><font color="#008000"><i>{ Append Flag }
    </i></font>XX<font color="#000080">,</font>Y <font color="#000080">: </font>Word<font color="#000080">;
</font><font color="#FF0000"><b>begin
  if </b></font>PRtoK <font color="#FF0000"><b>then                         </b></font><font color="#008000"><i>{ Printer online? }
    </i></font><font color="#FF0000"><b>begin
      Case </b></font>inD <font color="#FF0000"><b>of              </b></font><font color="#008000"><i>{ what Type of print line? }
        </i></font>PL  <font color="#000080">: </font>Write <font color="#000080">(</font>LST<font color="#000080">, </font>X<font color="#000080">);              </font><font color="#008000"><i>{ partial line }
        </i></font>WL  <font color="#000080">: </font>Writeln <font color="#000080">(</font>LST<font color="#000080">, </font>X<font color="#000080">);              </font><font color="#008000"><i>{ whole line }
      </i></font><font color="#FF0000"><b>end
    end  </b></font><font color="#008000"><i>{ Printer o/p }
  </i></font><font color="#FF0000"><b>else                                     </b></font><font color="#008000"><i>{ use o/p File }
    </i></font><font color="#FF0000"><b>begin
      </b></font>XX <font color="#000080">:= </font>WhereX<font color="#000080">; </font>Y <font color="#000080">:= </font>WhereY<font color="#000080">;
      </font><font color="#FF0000"><b>if not </b></font>PFP <font color="#FF0000"><b>then                   </b></font><font color="#008000"><i>{ File not opened }
        </i></font><font color="#FF0000"><b>begin
          </b></font>AF <font color="#000080">:= </font><font color="#800000">'W'</font><font color="#000080">;                            </font><font color="#008000"><i>{ default }
          </i></font><font color="#FF0000"><b>if </b></font>EXISTS <font color="#000080">(</font>PRTFile<font color="#000080">) </font><font color="#FF0000"><b>then
            begin
              </b></font>WPROM <font color="#000080">(</font><font color="#800000">'** Print File '</font><font color="#000080">+</font>PRTFile<font color="#000080">+</font><font color="#800000">' exists - Append to it? (Y/n) '</font><font color="#000080">);
              </font><font color="#FF0000"><b>if </b></font>GETYN <font color="#000080">&lt;&gt; </font><font color="#800000">'N' </font><font color="#FF0000"><b>then </b></font>AF <font color="#000080">:= </font><font color="#800000">'A'</font><font color="#000080">;
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
          </font><font color="#FF0000"><b>if </b></font>OPENF <font color="#000080">(</font>PFV1<font color="#000080">, </font>PRTFile<font color="#000080">, </font>AF<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>PFP <font color="#000080">:= </font>True <font color="#008000"><i>{ set flag }
          </i></font><font color="#FF0000"><b>else </b></font>FATAL <font color="#000080">(</font><font color="#800000">'*** Cannot Open Printer O/P File - Terminating'</font><font color="#000080">);

        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{ of if }
      </i></font>GotoXY <font color="#000080">(</font>XX<font color="#000080">,</font>Y<font color="#000080">);                      </font><font color="#008000"><i>{ restore cursor }
      </i></font><font color="#FF0000"><b>Case </b></font>inD <font color="#FF0000"><b>of
        </b></font>PL  <font color="#000080">: </font>Write <font color="#000080">(</font>PFV1<font color="#000080">, </font>X<font color="#000080">);                   </font><font color="#008000"><i>{ partial }
        </i></font>WL  <font color="#000080">: </font>Writeln <font color="#000080">(</font>PFV1<font color="#000080">, </font>X<font color="#000080">);                   </font><font color="#008000"><i>{ whole }
      </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{ else }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{ PRinT }

</i></font><font color="#FF0000"><b>Function </b></font>FSI <font color="#000080">(</font>N <font color="#000080">: </font>LongInt<font color="#000080">; </font>W <font color="#000080">: </font>Byte<font color="#000080">) : </font><font color="#FF0000"><b>String</b></font><font color="#000080">; </font><font color="#008000"><i>{ LongInt-&gt;String }
</i></font><font color="#FF0000"><b>Var </b></font>S <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
  if </b></font>W <font color="#000080">&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>Str <font color="#000080">(</font>N<font color="#000080">:</font>W<font color="#000080">,</font>S<font color="#000080">)
  </font><font color="#FF0000"><b>else          </b></font>Str <font color="#000080">(</font>N<font color="#000080">,</font>S<font color="#000080">);
  </font>FSI <font color="#000080">:= </font>S<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{ FSI }

</i></font><font color="#FF0000"><b>Procedure </b></font>CLOSEF <font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>FYL <font color="#000080">: </font>Text<font color="#000080">);  </font><font color="#008000"><i>{ Close a File - open or not }
</i></font><font color="#FF0000"><b>begin
</b></font><font color="#008000"><i>{$I-} </i></font>Close <font color="#000080">(</font>FYL<font color="#000080">); </font><font color="#008000"><i>{$I+} </i></font><font color="#FF0000"><b>if </b></font>Ioresult <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{ CLOSEF }

</i></font><font color="#FF0000"><b>Function </b></font>CENTER <font color="#000080">(</font>S <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">; </font>N <font color="#000080">: </font>Byte<font color="#000080">): </font><font color="#FF0000"><b>String</b></font><font color="#000080">;  </font><font color="#008000"><i>{ center N Char line }
</i></font><font color="#FF0000"><b>begin
  </b></font>CENTER <font color="#000080">:= </font>Copy<font color="#000080">(</font>B40<font color="#000080">+</font>B40<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,(</font>N<font color="#000080">-</font>Length<font color="#000080">(</font>S<font color="#000080">)) </font><font color="#FF0000"><b>Shr </b></font><font color="#800000">1</font><font color="#000080">)+</font>S
<font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{ CENTER }

</i></font><font color="#FF0000"><b>Procedure </b></font>SSL<font color="#000080">;                              </font><font color="#008000"><i>{ System Status Line }
{  This routine is just For &quot;flash&quot;; it can be omitted... }
</i></font><font color="#FF0000"><b>Const </b></font>DLM <font color="#000080">= </font><font color="#800000">#32#179#32</font><font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>GotoXY <font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">); </font>Write <font color="#000080">(</font>F1<font color="#000080">+</font>DLM<font color="#000080">+</font><font color="#800000">'Fsz: '</font><font color="#000080">+</font>FSI<font color="#000080">(</font>FSize<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">)+</font>DLM<font color="#000080">+
                             </font><font color="#800000">'Blk: '</font><font color="#000080">+</font>FSI<font color="#000080">(</font>BLKNO<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">)+</font>DLM<font color="#000080">+
                             </font><font color="#800000">'C# '</font><font color="#000080">+</font>FSI<font color="#000080">(</font>CP<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">));
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{ SSL }

           {  The following 3 routines are by Trevor Carlsen }
</i></font><font color="#FF0000"><b>Function </b></font>Byte2Hex<font color="#000080">(</font>numb <font color="#000080">: </font>Byte<font color="#000080">): </font><font color="#FF0000"><b>String</b></font><font color="#000080">; </font><font color="#008000"><i>{ Byte to hex String }
</i></font><font color="#FF0000"><b>Const </b></font>HexChars <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">15</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Char <font color="#000080">= </font><font color="#800000">'0123456789ABCDEF'</font><font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Byte2Hex<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">] := </font><font color="#800000">#2</font><font color="#000080">; </font>Byte2Hex<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] := </font>HexChars<font color="#000080">[</font>numb <font color="#FF0000"><b>shr </b></font><font color="#800000">4</font><font color="#000080">];
  </font>Byte2Hex<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">] := </font>HexChars<font color="#000080">[</font>numb <font color="#FF0000"><b>and </b></font><font color="#800000">15</font><font color="#000080">];
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ Byte2Hex }

</i></font><font color="#FF0000"><b>Function </b></font>Numb2Hex<font color="#000080">(</font>numb<font color="#000080">: </font>Word<font color="#000080">): </font><font color="#FF0000"><b>String</b></font><font color="#000080">;  </font><font color="#008000"><i>{ Word to hex String.}
</i></font><font color="#FF0000"><b>begin
  </b></font>Numb2Hex <font color="#000080">:= </font>Byte2Hex<font color="#000080">(</font>hi<font color="#000080">(</font>numb<font color="#000080">))+</font>Byte2Hex<font color="#000080">(</font>lo<font color="#000080">(</font>numb<font color="#000080">));
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ Numb2Hex }

</i></font><font color="#FF0000"><b>Function </b></font>Long2Hex<font color="#000080">(</font>L<font color="#000080">: </font>LongInt<font color="#000080">): </font><font color="#FF0000"><b>String</b></font><font color="#000080">; </font><font color="#008000"><i>{ LongInt to hex String }
</i></font><font color="#FF0000"><b>begin
  </b></font>Long2Hex <font color="#000080">:= </font>Numb2Hex<font color="#000080">(</font>L <font color="#FF0000"><b>shr </b></font><font color="#800000">16</font><font color="#000080">) + </font>Numb2Hex<font color="#000080">(</font>L<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ Long2Hex }

</i></font><font color="#FF0000"><b>Function </b></font>GET_Byte<font color="#000080">: </font>Byte<font color="#000080">;         </font><font color="#008000"><i>{ fetch Byte from buffer data }
</i></font><font color="#FF0000"><b>begin
  </b></font>GET_Byte <font color="#000080">:= </font>Byte<font color="#000080">(</font>B<font color="#000080">[</font>CP<font color="#000080">]); </font>Inc <font color="#000080">(</font>CP<font color="#000080">); </font>Inc <font color="#000080">(</font>NCP<font color="#000080">)
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{ GET_Byte }

</i></font><font color="#FF0000"><b>Function </b></font>EOS <font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>FV <font color="#000080">: </font><font color="#FF0000"><b>File</b></font><font color="#000080">): </font>Boolean<font color="#000080">; </font><font color="#008000"><i>{ Eof on String File Function }
</i></font><font color="#FF0000"><b>begin
  if </b></font>CP <font color="#000080">&gt;= </font>RES <font color="#FF0000"><b>then                    </b></font><font color="#008000"><i>{ data still in buffer? }
    </i></font><font color="#FF0000"><b>if </b></font>NCP <font color="#000080">&lt; </font>FSize <font color="#FF0000"><b>then
      begin                               </b></font><font color="#008000"><i>{ no - get new block }
        </i></font>BLKNO <font color="#000080">:= (</font>NCP <font color="#FF0000"><b>div </b></font>BSize<font color="#000080">);
        </font>FillChar<font color="#000080">(</font>B<font color="#000080">,</font>BSize<font color="#000080">,</font><font color="#800000">#0</font><font color="#000080">);                  </font><font color="#008000"><i>{ block to read }
        </i></font>Seek <font color="#000080">(</font>F<font color="#000080">,</font>BLKNO<font color="#000080">*</font>BSize<font color="#000080">); </font>BlockRead <font color="#000080">(</font>F<font color="#000080">,</font>B<font color="#000080">,</font>BSize<font color="#000080">,</font>RES<font color="#000080">); </font>CP <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font><font color="#FF0000"><b>end
    else </b></font>RES <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>EOS <font color="#000080">:= </font>RES <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{ EOS }

</i></font><font color="#FF0000"><b>begin
  </b></font>ClrScr<font color="#000080">; </font>GotoXY <font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">);
  </font>Write <font color="#000080">(</font>CENTER<font color="#000080">(</font><font color="#800000">'--- Hex Dump - Version '</font><font color="#000080">+</font>VERSION<font color="#000080">+</font><font color="#800000">' ---'</font><font color="#000080">,</font><font color="#800000">80</font><font color="#000080">));
  </font><font color="#FF0000"><b>if </b></font>ParamCount <font color="#000080">&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>F1 <font color="#000080">:= </font>ParamStr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">)
  </font><font color="#FF0000"><b>else
    begin
      </b></font>WPROM <font color="#000080">(</font><font color="#800000">'Filename to be dumped: '</font><font color="#000080">); </font>readln <font color="#000080">(</font>F1<font color="#000080">); </font>CLEARBOT
    <font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>if not </b></font>EXISTS <font color="#000080">(</font>F1<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>FATAL <font color="#000080">(</font><font color="#800000">'*** '</font><font color="#000080">+</font>F1<font color="#000080">+</font><font color="#800000">' File not present - Terminating! ***'</font><font color="#000080">);
  </font>PRinT_inIT <font color="#000080">(</font><font color="#800000">'HEXDUMP.TXT'</font><font color="#000080">); </font>F1 <font color="#000080">:= </font>UPPER<font color="#000080">(</font>F1<font color="#000080">);
  </font>PRinT <font color="#000080">(</font>WL<font color="#000080">,</font>CENTER<font color="#000080">(</font><font color="#800000">'Hex Dump of '</font><font color="#000080">+</font>F1<font color="#000080">+</font><font color="#800000">'  '</font><font color="#000080">+</font>SYS_DATE<font color="#000080">+</font><font color="#800000">' '</font><font color="#000080">+</font>SYS_TIME<font color="#000080">,</font><font color="#800000">80</font><font color="#000080">));
  </font>Assign <font color="#000080">(</font>F<font color="#000080">,</font>F1<font color="#000080">); </font>GotoXY <font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font>ifLinE<font color="#000080">); </font>Write <font color="#000080">(</font><font color="#800000">'Processing '</font><font color="#000080">,</font>F1<font color="#000080">);
  </font>Reset <font color="#000080">(</font>F<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">); </font>FSize <font color="#000080">:= </font>FileSize<font color="#000080">(</font>F<font color="#000080">); </font>CP <font color="#000080">:= </font>BSize<font color="#000080">; </font>NCP <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">; </font>RES <font color="#000080">:=
</font>BSize<font color="#000080">;
  </font>PRinT <font color="#000080">(</font>WL<font color="#000080">,</font><font color="#800000">'offset  Addr  1  2  3  4  5  6  7  8  9 10  A  B  C  D  E  F  1234567890abcdef'</font><font color="#000080">);
  </font><font color="#FF0000"><b>While not </b></font>EOS <font color="#000080">(</font>F<font color="#000080">) </font><font color="#FF0000"><b>do
    begin
      if </b></font><font color="#000080">(</font>NCP <font color="#FF0000"><b>mod </b></font><font color="#800000">16</font><font color="#000080">) = </font><font color="#800000">0 </font><font color="#FF0000"><b>then
        begin
          if </b></font>NCP <font color="#000080">&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
            begin
              </b></font>PRinT <font color="#000080">(</font>WL<font color="#000080">,</font>MSTR<font color="#000080">+</font>S1<font color="#000080">); </font>SSL
            <font color="#FF0000"><b>end</b></font><font color="#000080">;
          </font>MSTR <font color="#000080">:= </font>FSI<font color="#000080">(</font>NCP<font color="#000080">,</font><font color="#800000">6</font><font color="#000080">)+</font><font color="#800000">'  '</font><font color="#000080">+</font>Numb2Hex<font color="#000080">(</font>NCP<font color="#000080">); </font><font color="#008000"><i>{ offset &amp; Address }
          </i></font>S1 <font color="#000080">:= </font><font color="#800000">'  '</font><font color="#000080">;
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font>BV <font color="#000080">:= </font>GET_Byte<font color="#000080">;                 </font><font color="#008000"><i>{ fetch next Byte from buffer }
      </i></font>MSTR <font color="#000080">:= </font>MSTR<font color="#000080">+</font><font color="#800000">' '</font><font color="#000080">+</font>Byte2Hex<font color="#000080">(</font>BV<font color="#000080">);                     </font><font color="#008000"><i>{ Hex info }
      </i></font><font color="#FF0000"><b>if </b></font>BV <font color="#FF0000"><b>in </b></font><font color="#000080">[</font><font color="#800000">32</font><font color="#000080">..</font><font color="#800000">126</font><font color="#000080">] </font><font color="#FF0000"><b>then </b></font>S1 <font color="#000080">:= </font>S1<font color="#000080">+</font>Chr<font color="#000080">(</font>BV<font color="#000080">)           </font><font color="#008000"><i>{ BCD info }
      </i></font><font color="#FF0000"><b>else                    </b></font>S1 <font color="#000080">:= </font>S1<font color="#000080">+</font><font color="#800000">'_'</font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>Close <font color="#000080">(</font>F<font color="#000080">);
  </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>NCP <font color="#FF0000"><b>mod </b></font><font color="#800000">16</font><font color="#000080">) &gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>do
    begin
      </b></font>MSTR <font color="#000080">:= </font>MSTR<font color="#000080">+</font><font color="#800000">'   '</font><font color="#000080">; </font>Inc <font color="#000080">(</font>NCP<font color="#000080">);           </font><font color="#008000"><i>{ fill out last line }
    </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>PRinT <font color="#000080">(</font>WL<font color="#000080">,</font>MSTR<font color="#000080">+</font>S1<font color="#000080">); </font>SSL<font color="#000080">; </font>MSTR <font color="#000080">:= </font><font color="#800000">'Printer'</font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>PFP <font color="#FF0000"><b>then
    begin
      </b></font>CLOSEF <font color="#000080">(</font>PFV1<font color="#000080">); </font>MSTR <font color="#000080">:= </font>PRTFile
    <font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>GotoXY <font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font>ifLinE<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">); </font>Write <font color="#000080">(</font><font color="#800000">'Formatted output is on '</font><font color="#000080">,</font>MSTR<font color="#000080">);
  </font>GotoXY <font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font>ERLinE<font color="#000080">); </font>Write <font color="#000080">(</font>CENTER<font color="#000080">(</font><font color="#800000">'Finis...'</font><font color="#000080">,</font><font color="#800000">80</font><font color="#000080">))
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to TEXTFILE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0002.PAS">Original</a><b>]</b></p></body>
</html>
