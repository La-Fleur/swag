<html>
<head><title> "Converts Text to Unit Source" by JEFERSON J. ARENZON</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to TEXTFILE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0077.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#008000"><i>{------------------------------------------------------------------
 ---                          TXT2UNIT  V1.0                    ---
 ---                     J.J. Arenzon    5.10.94                ---
 ---                                                            ---
 ---  Converts a text file into a unit source to be embedded    ---
 ---  inside an executable. You can also find it (with the      ---
 ---  the compiled file) in:                                    ---
 ---          garbo.uwasa.fi/pc/turbopa7/txt2unit.zip           ---
 ---                                                            ---
 ---  To use, just type:                                        ---
 ---                                                            ---
 ---                    TXT2UNIT &lt;filename&gt;                     ---
 ---                                                            ---
 ---  You will see the text and, by pressing U, the file        ---
 ---  filename.pas (or another name that you specify) will be   ---
 ---  created. This is a unit source that can be compiled       ---
 ---  using TP (tested in TP7 but should work in another        ---
 ---  versions without modifications). To use it in another     ---
 ---  program just include the line: USES filename in the       ---
 ---  header and call the routine scroll.                       ---
 ---                                                            ---
 ---  Example:                                                  ---
 ---                                                            ---
 ---          uses example; -&gt; the name of your unit            ---
 ---                                                            ---
 ---          begin                                             ---
 ---          scroll;       -&gt; here you call the routine scroll ---
 ---          end.                                              ---
 ---                                                            ---
 ---  If you find this program interesting, or have questions,  ---
 ---  comments, improvements, etc, please, send a message to:   ---
 ---                                                            ---
 ---               Jeferson J. Arenzon                          ---
 ---               Instituto de Fisica - UFRGS                  ---
 ---               CP 15051                                     ---
 ---               91501-970 Porto Alegre RS                    ---
 ---               BRAZIL                                       ---
 ---               E-mail: arenzon@if.ufrgs.br                  ---
 ---               URL: http://www.if.ufrgs.br/                 ---
 ------------------------------------------------------------------}


 </i></font><font color="#FF0000"><b>program </b></font>txt2unit<font color="#000080">;

 </font><font color="#FF0000"><b>uses </b></font>crt<font color="#000080">,</font>dos<font color="#000080">;

 </font><font color="#FF0000"><b>const </b></font>versao <font color="#000080">= </font><font color="#800000">'1.0'</font><font color="#000080">;

 </font><font color="#FF0000"><b>type </b></font>string12 <font color="#000080">= </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">12</font><font color="#000080">];

 </font><font color="#FF0000"><b>var  </b></font>arqsaida<font color="#000080">,</font>arqentrada                     <font color="#000080">: </font>text<font color="#000080">;
      </font>arquivo                                 <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
      </font>nome                                    <font color="#000080">: </font>searchrec<font color="#000080">;
      </font>lines<font color="#000080">,</font>i                                 <font color="#000080">: </font>integer<font color="#000080">;
      </font>resposta                                <font color="#000080">: </font>char<font color="#000080">;
      </font>fulltext                                <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">256</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font><font color="#000080">^</font><font color="#FF0000"><b>string</b></font><font color="#000080">;

</font><font color="#008000"><i>{------------------------------------------------------------------
 ---             Cursor ON/OFF (Mike Normand, SWAG)             ---
 ------------------------------------------------------------------}
 </i></font><font color="#FF0000"><b>Procedure </b></font>CursorOff<font color="#000080">; </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>Asm
     </b></font><font color="#FF00FF">xor  ax, ax
     mov  es, ax
     mov  bh, Byte ptr es:[462h]  </font><font color="#008000"><i>{ get active page }
     </i></font><font color="#FF00FF">mov  ah, 3
     int  10h           </font><font color="#008000"><i>{ get cursor Characteristics }
     </i></font><font color="#FF00FF">or   ch, 00100000b
     mov  ah, 1
     int  10h           </font><font color="#008000"><i>{ set cursor Characteristics }
 </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

 </font><font color="#FF0000"><b>Procedure </b></font>CursorOn<font color="#000080">; </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>Asm
     </b></font><font color="#FF00FF">xor  ax, ax
     mov  es, ax
     mov  bh, Byte ptr es:[462h]  </font><font color="#008000"><i>{ get active page }
     </i></font><font color="#FF00FF">mov  ah, 3
     int  10h           </font><font color="#008000"><i>{ get cursor Characteristics }
     </i></font><font color="#FF00FF">and  ch, 00011111b
     mov  ah, 1
     int  10h           </font><font color="#008000"><i>{ set cursor Characteristics }
 </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{----------------------------------------------------------------
 ---                      Open Output File                    ---
 ----------------------------------------------------------------}
 </i></font><font color="#FF0000"><b>procedure </b></font>openpc<font color="#000080">;

 </font><font color="#FF0000"><b>var </b></font>name<font color="#000080">,</font>outfile         <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
     </font>nome                 <font color="#000080">: </font>searchrec<font color="#000080">;

 </font><font color="#FF0000"><b>begin
 if </b></font>paramcount<font color="#000080">=</font><font color="#800000">2 </font><font color="#FF0000"><b>then </b></font>name <font color="#000080">:= </font>paramstr<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">)
                 </font><font color="#FF0000"><b>else begin
                      </b></font>name <font color="#000080">:= </font>Copy<font color="#000080">(</font>paramstr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">), </font><font color="#800000">1</font><font color="#000080">, </font>Pos<font color="#000080">(</font><font color="#800000">'.'</font><font color="#000080">, </font>paramstr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">)) - </font><font color="#800000">1</font><font color="#000080">);
                      </font>textbackground<font color="#000080">( </font>LIGHTGRAY <font color="#000080">);
                      </font>textcolor<font color="#000080">( </font>BLACK <font color="#000080">);
                      </font>gotoxy<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">25</font><font color="#000080">);
                      </font>clreol<font color="#000080">;
                      </font>write<font color="#000080">(</font><font color="#800000">'Output filename (default: '</font><font color="#000080">,</font>name<font color="#000080">,</font><font color="#800000">')?'</font><font color="#000080">);
                      </font>readln<font color="#000080">(</font>outfile<font color="#000080">);
                      </font><font color="#FF0000"><b>if </b></font>outfile<font color="#000080">&lt;&gt;</font><font color="#800000">'' </font><font color="#FF0000"><b>then </b></font>name <font color="#000080">:= </font>outfile<font color="#000080">;
                      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font>arquivo <font color="#000080">:= </font>concat<font color="#000080">(</font>name<font color="#000080">,</font><font color="#800000">'.pas'</font><font color="#000080">);
 </font>findfirst<font color="#000080">(</font>arquivo<font color="#000080">,</font>archive<font color="#000080">,</font>nome<font color="#000080">);
 </font><font color="#FF0000"><b>if </b></font>doserror<font color="#000080">=</font><font color="#800000">0 </font><font color="#FF0000"><b>then begin
                    </b></font>textbackground<font color="#000080">( </font>LIGHTGRAY <font color="#000080">);
                    </font>textcolor<font color="#000080">( </font>BLACK <font color="#000080">);
                    </font>gotoxy<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">25</font><font color="#000080">);
                    </font>clreol<font color="#000080">;
                    </font>gotoxy<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">25</font><font color="#000080">);
                    </font>write<font color="#000080">(</font><font color="#800000">'File already exist! Overwrite ('</font><font color="#000080">);
                    </font>textcolor<font color="#000080">(</font>RED<font color="#000080">);
                    </font>write<font color="#000080">(</font><font color="#800000">'Y'</font><font color="#000080">);
                    </font>textcolor<font color="#000080">( </font>BLACK <font color="#000080">);
                    </font>write<font color="#000080">(</font><font color="#800000">'/'</font><font color="#000080">);
                    </font>textcolor<font color="#000080">( </font>RED <font color="#000080">);
                    </font>write<font color="#000080">(</font><font color="#800000">'N'</font><font color="#000080">); 
                    </font>textcolor<font color="#000080">( </font>BLACK <font color="#000080">);
                    </font>write<font color="#000080">(</font><font color="#800000">')?'</font><font color="#000080">);
                    </font><font color="#FF0000"><b>repeat until </b></font>keypressed<font color="#000080">;
                    </font>resposta <font color="#000080">:= </font>readkey<font color="#000080">;
                    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>resposta<font color="#000080">=</font><font color="#800000">'y'</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>doserror<font color="#000080">&lt;&gt;</font><font color="#800000">0</font><font color="#000080">)
 </font><font color="#FF0000"><b>then begin
      </b></font>assign<font color="#000080">(</font>arqsaida<font color="#000080">,</font>arquivo<font color="#000080">);
      </font>rewrite<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'(* Txt converted using txt2unit V'</font><font color="#000080">,</font>versao<font color="#000080">:</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">' *)'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'(* J.J. Arenzon (c)1994               *)'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'UNIT '</font><font color="#000080">,</font>name<font color="#000080">,</font><font color="#800000">';'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'INTERFACE'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'uses crt,dos,printer;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'const lines ='</font><font color="#000080">,</font>lines<font color="#000080">:</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">';'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'type string12 = string[12];'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'var linha    : integer;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">, </font><font color="#800000">'function PrinterOnLine : boolean;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">, </font><font color="#800000">'procedure cursoron;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">, </font><font color="#800000">'procedure cursoroff;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">, </font><font color="#800000">'procedure linhas(writeline : integer);'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">, </font><font color="#800000">'procedure scroll;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">' IMPLEMENTATION'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);

      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'{----------------------------------------------------------------'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">' ---                    Printer Online                        ---'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">' ---   By: Jeff Palen (SWAG package)                          ---'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">' ----------------------------------------------------------------}'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">' Function PrinterOnLine : Boolean;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">' Const   PrnStatusInt  : Byte = $17;    (*  Dos interrupt *)'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'         StatusRequest : Byte = $02;    (*  Interrupt Function Call *)'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'         PrinterNum    : Word = 0;  { 0 for LPT1, 1 for LPT2, etc. }'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">' Var     Regs : Registers ;         { Type is defined in Dos Unit }'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">' Begin'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">' Regs.AH := StatusRequest;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">' Regs.DX := PrinterNum;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">' Intr(PrnStatusInt, Regs);'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">' PrinterOnLine := (Regs.AH and $80) = $80;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">' End;'</font><font color="#000080">);

      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'{------------------------------------------------------------------'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">' ---             Cursor ON/OFF (Mike Normand, SWAG)             ---'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">' ------------------------------------------------------------------}'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'Procedure CursorOff; Assembler;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'Asm'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'    xor  ax, ax'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'    mov  es, ax'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'    mov  bh, Byte ptr es:[462h]  { get active page }'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'    mov  ah, 3'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'    int  10h           { get cursor Characteristics }'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'    or   ch, 00100000b'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'    mov  ah, 1'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'    int  10h           { set cursor Characteristics }'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'end;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'Procedure CursorOn; Assembler;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'Asm'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'    xor  ax, ax'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'    mov  es, ax'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'    mov  bh, Byte ptr es:[462h]  { get active page }'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'    mov  ah, 3'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'    int  10h           { get cursor Characteristics }'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'    and  ch, 00011111b'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'    mov  ah, 1'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'    int  10h           { set cursor Characteristics }'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'end;'</font><font color="#000080">);

      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'procedure linhas(writeline : integer);'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'begin'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'case writeline of'</font><font color="#000080">);
      </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>lines
      <font color="#FF0000"><b>do </b></font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font>i<font color="#000080">:</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">' : writeln('</font><font color="#000080">,</font>char<font color="#000080">(</font><font color="#800000">39</font><font color="#000080">),</font>fulltext<font color="#000080">[</font>i<font color="#000080">]^,</font>char<font color="#000080">(</font><font color="#800000">39</font><font color="#000080">),</font><font color="#800000">');'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   end;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'end;'</font><font color="#000080">);

      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'{-------------------------------------------------------------------'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">' ---                           SCROLL                            ---'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">' ---                    L. Sclovsky   6.94                       ---'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">' ---  Modifications: J.J. Arenzon 94                             ---'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">' -------------------------------------------------------------------}'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">' procedure scroll;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">' type actions = ( lineup, linedown, pageup, pagedown, gohome, goend,'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'                 quit, none );'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">' const topstatusline = 1;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'       bottomstatusline = 25;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'       firstrow = 2;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'       lastrow = 24;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'       totrows = 23;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">' label 1;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">' var fim                                         : boolean;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'     y, key 					 : byte;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'     i, currline, writeline,'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'     lastpageline, percent    			 : integer;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'     c 						 : char;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'     action 					 : actions;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'     textfile 					 : text;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'     textline 					 : string[80];'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   procedure statusbars;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   begin'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   {top bar}'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   textbackground( LIGHTGRAY );'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   textcolor( BLACK );'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   gotoxy( 1, topstatusline );'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   clreol;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   gotoxy( 25, topstatusline );'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   write('</font><font color="#000080">,</font>char<font color="#000080">(</font><font color="#800000">39</font><font color="#000080">),</font><font color="#800000">'On-line help for'</font><font color="#000080">,</font>char<font color="#000080">(</font><font color="#800000">39</font><font color="#000080">),</font><font color="#800000">');'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   textcolor( RED );'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   write('</font><font color="#000080">,</font>char<font color="#000080">(</font><font color="#800000">39</font><font color="#000080">),</font><font color="#800000">' YOUR PROGRAM'</font><font color="#000080">,</font>char<font color="#000080">(</font><font color="#800000">39</font><font color="#000080">),</font><font color="#800000">');'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   {bottom bar}'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   textbackground( LIGHTGRAY );'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   textcolor( BLACK );'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   gotoxy( 1, bottomstatusline );'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   clreol;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   gotoxy( 2, bottomstatusline );'</font><font color="#000080">);
      </font>write<font color="#000080">(</font>arqsaida<font color="#000080">,  </font><font color="#800000">'   write('</font><font color="#000080">,</font>char<font color="#000080">(</font><font color="#800000">39</font><font color="#000080">),</font><font color="#800000">'Commands: '</font><font color="#000080">,</font>char<font color="#000080">(</font><font color="#800000">39</font><font color="#000080">),</font><font color="#800000">',char(24),'</font><font color="#000080">,</font>char<font color="#000080">(</font><font color="#800000">39</font><font color="#000080">),</font><font color="#800000">' '</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font>char<font color="#000080">(</font><font color="#800000">39</font><font color="#000080">),</font><font color="#800000">',char(25),'</font><font color="#000080">,</font>char<font color="#000080">(</font><font color="#800000">39</font><font color="#000080">),</font><font color="#800000">' PgUp PgDn Home End Esc'</font><font color="#000080">,</font>char<font color="#000080">(</font><font color="#800000">39</font><font color="#000080">),</font><font color="#800000">');'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   gotoxy( 79, bottomstatusline );'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   Write('</font><font color="#000080">,</font>char<font color="#000080">(</font><font color="#800000">39</font><font color="#000080">),</font><font color="#800000">'%'</font><font color="#000080">,</font>char<font color="#000080">(</font><font color="#800000">39</font><font color="#000080">),</font><font color="#800000">');'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   end;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'begin'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'if lines &gt; totrows'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'then lastpageline := lines - totrows + 1'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'else lastpageline := 1;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'fim := false;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'currline := 1;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'action := pagedown;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'{ clear screen }'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'textbackground( BLUE );'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'textcolor( WHITE );'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'clrscr;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'statusbars;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'while not fim'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'do begin'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   { refresh screen }'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   if action &lt;&gt; none '</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   then begin'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'        textbackground( BLUE );'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'        textcolor( WHITE );'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'        writeline := currline;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'        for y := firstrow to lastrow'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'        do begin'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'           gotoxy( 1, y );'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'           clreol;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'           if writeline &lt;= lines'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'           then begin'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'                linhas(writeline);'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'                writeline := writeline + 1;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'                end;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'           end;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'        textbackground( LIGHTGRAY );'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'        textcolor( RED );'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'        percent := trunc( ( currline + totrows - 1 ) / lines * 100 );'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'        if percent &gt; 100 then percent := 100;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'        gotoxy( 75, bottomstatusline );'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'        Write( percent:3 );'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'        end;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   { reads keyboard }'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   action := none;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   c := readkey;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   key := ord(c);'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   if key &gt; 0'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   then case key of'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'             27 : action := quit;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'             end'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   else begin'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'        c := readkey;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'        key := ord(c);'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'        case key of'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'             72 : action := lineup;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'             80 : action := linedown;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'             73 : action := pageup;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'             81 : action := pagedown;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'             71 : action := gohome;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'             79 : action := goend;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'             end;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'        end;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   { process action }'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   case action of'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'        lineup : if currline &gt; 1'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'                 then currline := currline - 1'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'                 else action := none;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'        linedown : if currline &lt; lastpageline'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'                   then currline := currline + 1'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'                   else action := none;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'        pageup : if currline &gt; totrows'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'                 then currline := currline - totrows'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'                 else if currline &gt; 1'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'                      then currline := 1'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'                      else action := none;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'        pagedown : if currline + totrows &lt; lastpageline'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'                   then currline := currline + totrows'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'                   else if currline &lt; lastpageline'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'                        then currline := lastpageline'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'                        else action := none;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'        gohome : if currline &lt;&gt; 1'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'                 then currline := 1'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'                 else action := none;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'        goend : if currline &lt;&gt; lastpageline'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'                then currline := lastpageline'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'                else action := none;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'        quit : fim := true;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'        end;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'   end;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'1 :'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'textcolor(lightgray);'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'textbackground(black);'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'clrscr;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'cursoron;'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'end;'</font><font color="#000080">);



      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'(*  Initialization *)'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'begin'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>arqsaida<font color="#000080">,</font><font color="#800000">'end.'</font><font color="#000080">);
      </font>close<font color="#000080">(</font>arqsaida<font color="#000080">);

      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;



</font><font color="#008000"><i>{-------------------------------------------------------------------
 ---                           SCROLL                            ---
 ---                    L. Sclovsky   6.94                       ---
 ---  Modifications: J.J. Arenzon 94                             ---
 -------------------------------------------------------------------}
 </i></font><font color="#FF0000"><b>procedure </b></font>scroll<font color="#000080">( </font>textname <font color="#000080">: </font>string12 <font color="#000080">);

 </font><font color="#FF0000"><b>type </b></font>actions <font color="#000080">= ( </font>lineup<font color="#000080">, </font>linedown<font color="#000080">, </font>pageup<font color="#000080">, </font>pagedown<font color="#000080">, </font>gohome<font color="#000080">, </font>goend<font color="#000080">,
                 </font>quit<font color="#000080">, </font>none<font color="#000080">, </font>tounit <font color="#000080">);

 </font><font color="#FF0000"><b>const </b></font>topstatusline <font color="#000080">= </font><font color="#800000">1</font><font color="#000080">;
       </font>bottomstatusline <font color="#000080">= </font><font color="#800000">25</font><font color="#000080">;
       </font>firstrow <font color="#000080">= </font><font color="#800000">2</font><font color="#000080">;
       </font>lastrow <font color="#000080">= </font><font color="#800000">24</font><font color="#000080">;
       </font>totrows <font color="#000080">= </font><font color="#800000">23</font><font color="#000080">;

 </font><font color="#FF0000"><b>label </b></font><font color="#800000">1</font><font color="#000080">;

 </font><font color="#FF0000"><b>var </b></font>fim                                         <font color="#000080">: </font>boolean<font color="#000080">;
     </font>y<font color="#000080">, </font>key 					 <font color="#000080">: </font>byte<font color="#000080">;
     </font>i<font color="#000080">, </font>currline<font color="#000080">, </font>writeline<font color="#000080">,
     </font>lastpageline<font color="#000080">, </font>percent    			 <font color="#000080">: </font>integer<font color="#000080">;
     </font>c 						 <font color="#000080">: </font>char<font color="#000080">;
     </font>action 					 <font color="#000080">: </font>actions<font color="#000080">;
     </font>textfile 					 <font color="#000080">: </font>text<font color="#000080">;
     </font>textline 					 <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">80</font><font color="#000080">];


   </font><font color="#FF0000"><b>procedure </b></font>statusbars<font color="#000080">;
   </font><font color="#FF0000"><b>begin
   </b></font><font color="#008000"><i>{top bar}
   </i></font>textbackground<font color="#000080">( </font>LIGHTGRAY <font color="#000080">);
   </font>textcolor<font color="#000080">( </font>BLACK <font color="#000080">);
   </font>gotoxy<font color="#000080">( </font><font color="#800000">1</font><font color="#000080">, </font>topstatusline <font color="#000080">);
   </font>clreol<font color="#000080">;
   </font>gotoxy<font color="#000080">( </font><font color="#800000">20</font><font color="#000080">, </font>topstatusline <font color="#000080">);
   </font>write<font color="#000080">(</font><font color="#800000">'View file to be converted to a'</font><font color="#000080">);
   </font>textcolor<font color="#000080">( </font>RED <font color="#000080">);
   </font>write<font color="#000080">( </font><font color="#800000">' unit' </font><font color="#000080">);
   </font><font color="#008000"><i>{bottom bar}
   </i></font>textbackground<font color="#000080">( </font>LIGHTGRAY <font color="#000080">);
   </font>textcolor<font color="#000080">( </font>BLACK <font color="#000080">);
   </font>gotoxy<font color="#000080">( </font><font color="#800000">1</font><font color="#000080">, </font>bottomstatusline <font color="#000080">);
   </font>clreol<font color="#000080">;
   </font>gotoxy<font color="#000080">( </font><font color="#800000">2</font><font color="#000080">, </font>bottomstatusline <font color="#000080">);
   </font>write<font color="#000080">(</font><font color="#800000">'Commands: '</font><font color="#000080">,</font>char<font color="#000080">(</font><font color="#800000">24</font><font color="#000080">),</font><font color="#800000">' '</font><font color="#000080">,</font>char<font color="#000080">(</font><font color="#800000">25</font><font color="#000080">),</font><font color="#800000">' PgUp PgDn Home End Esc'</font><font color="#000080">);
   </font>textcolor<font color="#000080">( </font>RED <font color="#000080">);
   </font>write<font color="#000080">(</font><font color="#800000">'         U'</font><font color="#000080">);
   </font>textcolor<font color="#000080">( </font>BLACK <font color="#000080">);
   </font>write<font color="#000080">(</font><font color="#800000">'nit'</font><font color="#000080">);
   </font>gotoxy<font color="#000080">( </font><font color="#800000">79</font><font color="#000080">, </font>bottomstatusline <font color="#000080">);
   </font>Write<font color="#000080">(</font><font color="#800000">'%'</font><font color="#000080">);
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
</b></font><font color="#008000"><i>{ reads full text }
</i></font>i <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
</font>assign<font color="#000080">( </font>textfile<font color="#000080">, </font>textname <font color="#000080">);
</font>reset<font color="#000080">( </font>textfile <font color="#000080">);
</font><font color="#FF0000"><b>while not </b></font>eof<font color="#000080">( </font>textfile <font color="#000080">)
</font><font color="#FF0000"><b>do begin
   </b></font>readln<font color="#000080">( </font>textfile<font color="#000080">, </font>textline <font color="#000080">);

   </font><font color="#008000"><i>{ if there is no memory then returns FALSE }
   </i></font><font color="#FF0000"><b>if </b></font>maxavail <font color="#000080">&lt; </font>length<font color="#000080">(</font>textline<font color="#000080">) + </font><font color="#800000">1
   </font><font color="#FF0000"><b>then goto </b></font><font color="#800000">1</font><font color="#000080">;

   </font>getmem<font color="#000080">( </font>fulltext<font color="#000080">[</font>i<font color="#000080">], </font>length<font color="#000080">(</font>textline<font color="#000080">) + </font><font color="#800000">1 </font><font color="#000080">);
   </font>fulltext<font color="#000080">[</font>i<font color="#000080">]^ := </font>textline<font color="#000080">;
   </font>i <font color="#000080">:= </font>i <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font>close<font color="#000080">( </font>textfile <font color="#000080">);
</font>lines <font color="#000080">:= </font>i <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
</font><font color="#FF0000"><b>if </b></font>lines <font color="#000080">&gt; </font>totrows
<font color="#FF0000"><b>then </b></font>lastpageline <font color="#000080">:= </font>lines <font color="#000080">- </font>totrows <font color="#000080">+ </font><font color="#800000">1
</font><font color="#FF0000"><b>else </b></font>lastpageline <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;

</font><font color="#008000"><i>{restorecrtmode;}

</i></font>fim <font color="#000080">:= </font>false<font color="#000080">;
</font>currline <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
</font>action <font color="#000080">:= </font>pagedown<font color="#000080">;

</font><font color="#008000"><i>{ clear screen }
</i></font>textbackground<font color="#000080">( </font>BLUE <font color="#000080">);
</font>textcolor<font color="#000080">( </font>WHITE <font color="#000080">);
</font>clrscr<font color="#000080">;

</font>statusbars<font color="#000080">;


</font><font color="#FF0000"><b>while not </b></font>fim
<font color="#FF0000"><b>do begin

   </b></font><font color="#008000"><i>{ refresh screen }
   </i></font><font color="#FF0000"><b>if </b></font>action <font color="#000080">&lt;&gt; </font>none
   <font color="#FF0000"><b>then begin

        </b></font>textbackground<font color="#000080">( </font>BLUE <font color="#000080">);
        </font>textcolor<font color="#000080">( </font>WHITE <font color="#000080">);
        </font>writeline <font color="#000080">:= </font>currline<font color="#000080">;
        </font><font color="#FF0000"><b>for </b></font>y <font color="#000080">:= </font>firstrow <font color="#FF0000"><b>to </b></font>lastrow
        <font color="#FF0000"><b>do begin
           </b></font>gotoxy<font color="#000080">( </font><font color="#800000">1</font><font color="#000080">, </font>y <font color="#000080">);
           </font>clreol<font color="#000080">;
           </font><font color="#FF0000"><b>if </b></font>writeline <font color="#000080">&lt;= </font>lines
           <font color="#FF0000"><b>then begin
                </b></font>write<font color="#000080">( </font>fulltext<font color="#000080">[</font>writeline<font color="#000080">]^ );
                </font>writeline <font color="#000080">:= </font>writeline <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
                </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
           </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

        </font>textbackground<font color="#000080">( </font>LIGHTGRAY <font color="#000080">);
        </font>textcolor<font color="#000080">( </font>RED <font color="#000080">);
        </font>percent <font color="#000080">:= </font>trunc<font color="#000080">( ( </font>currline <font color="#000080">+ </font>totrows <font color="#000080">- </font><font color="#800000">1 </font><font color="#000080">) / </font>lines <font color="#000080">* </font><font color="#800000">100 </font><font color="#000080">);
        </font><font color="#FF0000"><b>if </b></font>percent <font color="#000080">&gt; </font><font color="#800000">100 </font><font color="#FF0000"><b>then </b></font>percent <font color="#000080">:= </font><font color="#800000">100</font><font color="#000080">;
        </font>gotoxy<font color="#000080">( </font><font color="#800000">75</font><font color="#000080">, </font>bottomstatusline <font color="#000080">);
        </font>Write<font color="#000080">( </font>percent<font color="#000080">:</font><font color="#800000">3 </font><font color="#000080">);
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

   </font><font color="#008000"><i>{ reads keyboard }
   </i></font>action <font color="#000080">:= </font>none<font color="#000080">;
   </font>c <font color="#000080">:= </font>readkey<font color="#000080">;
   </font>key <font color="#000080">:= </font>ord<font color="#000080">(</font>c<font color="#000080">);
   </font><font color="#FF0000"><b>if </b></font>key <font color="#000080">&gt; </font><font color="#800000">0
   </font><font color="#FF0000"><b>then case </b></font>key <font color="#FF0000"><b>of
             </b></font><font color="#800000">27 </font><font color="#000080">: </font>action <font color="#000080">:= </font>quit<font color="#000080">;
             </font><font color="#800000">85  </font><font color="#000080">: </font>action <font color="#000080">:= </font>tounit<font color="#000080">;
             </font><font color="#800000">117 </font><font color="#000080">: </font>action <font color="#000080">:= </font>tounit<font color="#000080">;
             </font><font color="#FF0000"><b>end
   else begin
        </b></font>c <font color="#000080">:= </font>readkey<font color="#000080">;
        </font>key <font color="#000080">:= </font>ord<font color="#000080">(</font>c<font color="#000080">);
        </font><font color="#FF0000"><b>case </b></font>key <font color="#FF0000"><b>of
             </b></font><font color="#800000">72 </font><font color="#000080">: </font>action <font color="#000080">:= </font>lineup<font color="#000080">;
             </font><font color="#800000">80 </font><font color="#000080">: </font>action <font color="#000080">:= </font>linedown<font color="#000080">;
             </font><font color="#800000">73 </font><font color="#000080">: </font>action <font color="#000080">:= </font>pageup<font color="#000080">;
             </font><font color="#800000">81 </font><font color="#000080">: </font>action <font color="#000080">:= </font>pagedown<font color="#000080">;
             </font><font color="#800000">71 </font><font color="#000080">: </font>action <font color="#000080">:= </font>gohome<font color="#000080">;
             </font><font color="#800000">79 </font><font color="#000080">: </font>action <font color="#000080">:= </font>goend<font color="#000080">;
             </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

   </font><font color="#008000"><i>{ process action }
   </i></font><font color="#FF0000"><b>case </b></font>action <font color="#FF0000"><b>of
        </b></font>tounit<font color="#000080">: </font><font color="#FF0000"><b>begin
                </b></font>openpc<font color="#000080">;
                </font>fim <font color="#000080">:= </font>true<font color="#000080">;
                </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
        </font>lineup <font color="#000080">: </font><font color="#FF0000"><b>if </b></font>currline <font color="#000080">&gt; </font><font color="#800000">1
                 </font><font color="#FF0000"><b>then </b></font>currline <font color="#000080">:= </font>currline <font color="#000080">- </font><font color="#800000">1
                 </font><font color="#FF0000"><b>else </b></font>action <font color="#000080">:= </font>none<font color="#000080">;
        </font>linedown <font color="#000080">: </font><font color="#FF0000"><b>if </b></font>currline <font color="#000080">&lt; </font>lastpageline
                   <font color="#FF0000"><b>then </b></font>currline <font color="#000080">:= </font>currline <font color="#000080">+ </font><font color="#800000">1
                   </font><font color="#FF0000"><b>else </b></font>action <font color="#000080">:= </font>none<font color="#000080">;
        </font>pageup <font color="#000080">: </font><font color="#FF0000"><b>if </b></font>currline <font color="#000080">&gt; </font>totrows
                 <font color="#FF0000"><b>then </b></font>currline <font color="#000080">:= </font>currline <font color="#000080">- </font>totrows
                 <font color="#FF0000"><b>else if </b></font>currline <font color="#000080">&gt; </font><font color="#800000">1
                      </font><font color="#FF0000"><b>then </b></font>currline <font color="#000080">:= </font><font color="#800000">1
                      </font><font color="#FF0000"><b>else </b></font>action <font color="#000080">:= </font>none<font color="#000080">;
        </font>pagedown <font color="#000080">: </font><font color="#FF0000"><b>if </b></font>currline <font color="#000080">+ </font>totrows <font color="#000080">&lt; </font>lastpageline
                   <font color="#FF0000"><b>then </b></font>currline <font color="#000080">:= </font>currline <font color="#000080">+ </font>totrows
                   <font color="#FF0000"><b>else if </b></font>currline <font color="#000080">&lt; </font>lastpageline
                        <font color="#FF0000"><b>then </b></font>currline <font color="#000080">:= </font>lastpageline
                        <font color="#FF0000"><b>else </b></font>action <font color="#000080">:= </font>none<font color="#000080">;
        </font>gohome <font color="#000080">: </font><font color="#FF0000"><b>if </b></font>currline <font color="#000080">&lt;&gt; </font><font color="#800000">1
                 </font><font color="#FF0000"><b>then </b></font>currline <font color="#000080">:= </font><font color="#800000">1
                 </font><font color="#FF0000"><b>else </b></font>action <font color="#000080">:= </font>none<font color="#000080">;
        </font>goend <font color="#000080">: </font><font color="#FF0000"><b>if </b></font>currline <font color="#000080">&lt;&gt; </font>lastpageline
                <font color="#FF0000"><b>then </b></font>currline <font color="#000080">:= </font>lastpageline
                <font color="#FF0000"><b>else </b></font>action <font color="#000080">:= </font>none<font color="#000080">;
        </font>quit <font color="#000080">: </font>fim <font color="#000080">:= </font>true<font color="#000080">;
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ clrscr;
  writeln( ' maxavail = ', maxavail ); }

{ frees memory }
</i></font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font>lines <font color="#FF0000"><b>downto </b></font><font color="#800000">1
</font><font color="#FF0000"><b>do </b></font>freemem<font color="#000080">( </font>fulltext<font color="#000080">[</font>i<font color="#000080">], </font>length<font color="#000080">( </font>fulltext<font color="#000080">[</font>i<font color="#000080">]^ ) + </font><font color="#800000">1 </font><font color="#000080">);

</font><font color="#008000"><i>{ writeln( ' maxavail = ', maxavail );
  readkey; }

</i></font><font color="#800000">1 </font><font color="#000080">:

</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{-------------------------------------------------------------------
 ---                      Main Program                           ---
 -------------------------------------------------------------------}

 </i></font><font color="#FF0000"><b>begin
 if </b></font>paramcount<font color="#000080">=</font><font color="#800000">0 
 </font><font color="#FF0000"><b>then begin
      </b></font>writeln<font color="#000080">(</font><font color="#800000">'Converts text files to a unit source! JJA (c)1994'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font><font color="#800000">'USAGE: txt2unit &lt;filein&gt; [fileout]'</font><font color="#000080">);
      </font><font color="#FF0000"><b>end
 else begin
      </b></font>cursoroff<font color="#000080">;
      </font>findfirst<font color="#000080">(</font>paramstr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">),</font>archive<font color="#000080">,</font>nome<font color="#000080">);
      </font><font color="#FF0000"><b>if </b></font>doserror<font color="#000080">=</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>scroll<font color="#000080">(</font>paramstr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">))
                    </font><font color="#FF0000"><b>else </b></font>writeln<font color="#000080">(</font>paramstr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">),</font><font color="#800000">' not found!'</font><font color="#000080">);
      </font>textcolor<font color="#000080">(</font>lightgray<font color="#000080">);
      </font>textbackground<font color="#000080">(</font>black<font color="#000080">);
      </font>clrscr<font color="#000080">;
      </font>cursoron<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to TEXTFILE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0077.PAS">Original</a><b>]</b></p></body>
</html>
