<html>
<head><title> "Converting Text Files to EXE's" by BOB SWART</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to TEXTFILE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0057.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
From: bobs@dragons.nest.nl (Bob Swart)

&gt; Does anyone have a program to produce a self-displaying exe file from
&gt; a text file....
}

{$A+,B-,D-,E-,F-,G-,I-,L-,N-,O-,R-,S+,V-,X-}
{$M 16384,0,655360}

</i></font><font color="#FF0000"><b>Uses </b></font>Strings<font color="#000080">;

</font><font color="#FF0000"><b>Const
  </b></font>bufsize <font color="#000080">= </font><font color="#800000">4096</font><font color="#000080">;

  </font>InLineCode<font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">200</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte <font color="#000080">=
   (</font><font color="#800000">$BA</font><font color="#000080">,</font><font color="#800000">$AC</font><font color="#000080">,</font><font color="#800000">$01</font><font color="#000080">,</font><font color="#800000">$B4</font><font color="#000080">,</font><font color="#800000">$09</font><font color="#000080">,</font><font color="#800000">$CD</font><font color="#000080">,</font><font color="#800000">$21</font><font color="#000080">,</font><font color="#800000">$B4</font><font color="#000080">,</font><font color="#800000">$01</font><font color="#000080">,</font><font color="#800000">$CD</font><font color="#000080">,</font><font color="#800000">$21</font><font color="#000080">,</font><font color="#800000">$3C</font><font color="#000080">,</font><font color="#800000">$73</font><font color="#000080">,</font><font color="#800000">$74</font><font color="#000080">,</font><font color="#800000">$13</font><font color="#000080">,</font><font color="#800000">$3C</font><font color="#000080">,
    </font><font color="#800000">$53</font><font color="#000080">,</font><font color="#800000">$74</font><font color="#000080">,</font><font color="#800000">$0F</font><font color="#000080">,</font><font color="#800000">$3C</font><font color="#000080">,</font><font color="#800000">$70</font><font color="#000080">,</font><font color="#800000">$74</font><font color="#000080">,</font><font color="#800000">$06</font><font color="#000080">,</font><font color="#800000">$3C</font><font color="#000080">,</font><font color="#800000">$50</font><font color="#000080">,</font><font color="#800000">$74</font><font color="#000080">,</font><font color="#800000">$02</font><font color="#000080">,</font><font color="#800000">$EB</font><font color="#000080">,</font><font color="#800000">$E3</font><font color="#000080">,</font><font color="#800000">$B6</font><font color="#000080">,</font><font color="#800000">$05</font><font color="#000080">,</font><font color="#800000">$EB</font><font color="#000080">,
    </font><font color="#800000">$03</font><font color="#000080">,</font><font color="#800000">$90</font><font color="#000080">,</font><font color="#800000">$B6</font><font color="#000080">,</font><font color="#800000">$02</font><font color="#000080">,</font><font color="#800000">$B2</font><font color="#000080">,</font><font color="#800000">$0D</font><font color="#000080">,</font><font color="#800000">$B4</font><font color="#000080">,</font><font color="#800000">$02</font><font color="#000080">,</font><font color="#800000">$CD</font><font color="#000080">,</font><font color="#800000">$21</font><font color="#000080">,</font><font color="#800000">$B2</font><font color="#000080">,</font><font color="#800000">$0A</font><font color="#000080">,</font><font color="#800000">$B4</font><font color="#000080">,</font><font color="#800000">$02</font><font color="#000080">,</font><font color="#800000">$CD</font><font color="#000080">,</font><font color="#800000">$21</font><font color="#000080">,
    </font><font color="#800000">$BB</font><font color="#000080">,</font><font color="#800000">$C8</font><font color="#000080">,</font><font color="#800000">$01</font><font color="#000080">,</font><font color="#800000">$B9</font><font color="#000080">,</font><font color="#800000">$00</font><font color="#000080">,</font><font color="#800000">$00</font><font color="#000080">,</font><font color="#800000">$8A</font><font color="#000080">,</font><font color="#800000">$17</font><font color="#000080">,</font><font color="#800000">$80</font><font color="#000080">,</font><font color="#800000">$FA</font><font color="#000080">,</font><font color="#800000">$0A</font><font color="#000080">,</font><font color="#800000">$74</font><font color="#000080">,</font><font color="#800000">$16</font><font color="#000080">,</font><font color="#800000">$80</font><font color="#000080">,</font><font color="#800000">$FA</font><font color="#000080">,</font><font color="#800000">$0D</font><font color="#000080">,
    </font><font color="#800000">$74</font><font color="#000080">,</font><font color="#800000">$11</font><font color="#000080">,</font><font color="#800000">$80</font><font color="#000080">,</font><font color="#800000">$FA</font><font color="#000080">,</font><font color="#800000">$7F</font><font color="#000080">,</font><font color="#800000">$74</font><font color="#000080">,</font><font color="#800000">$7F</font><font color="#000080">,</font><font color="#800000">$8A</font><font color="#000080">,</font><font color="#800000">$E6</font><font color="#000080">,</font><font color="#800000">$CD</font><font color="#000080">,</font><font color="#800000">$21</font><font color="#000080">,</font><font color="#800000">$43</font><font color="#000080">,</font><font color="#800000">$FE</font><font color="#000080">,</font><font color="#800000">$C1</font><font color="#000080">,</font><font color="#800000">$80</font><font color="#000080">,</font><font color="#800000">$F9</font><font color="#000080">,
    </font><font color="#800000">$4F</font><font color="#000080">,</font><font color="#800000">$7C</font><font color="#000080">,</font><font color="#800000">$E3</font><font color="#000080">,</font><font color="#800000">$B2</font><font color="#000080">,</font><font color="#800000">$0D</font><font color="#000080">,</font><font color="#800000">$8A</font><font color="#000080">,</font><font color="#800000">$E6</font><font color="#000080">,</font><font color="#800000">$CD</font><font color="#000080">,</font><font color="#800000">$21</font><font color="#000080">,</font><font color="#800000">$B2</font><font color="#000080">,</font><font color="#800000">$0A</font><font color="#000080">,</font><font color="#800000">$8A</font><font color="#000080">,</font><font color="#800000">$E6</font><font color="#000080">,</font><font color="#800000">$CD</font><font color="#000080">,</font><font color="#800000">$21</font><font color="#000080">,</font><font color="#800000">$43</font><font color="#000080">,
    </font><font color="#800000">$80</font><font color="#000080">,</font><font color="#800000">$FE</font><font color="#000080">,</font><font color="#800000">$05</font><font color="#000080">,</font><font color="#800000">$74</font><font color="#000080">,</font><font color="#800000">$07</font><font color="#000080">,</font><font color="#800000">$80</font><font color="#000080">,</font><font color="#800000">$FD</font><font color="#000080">,</font><font color="#800000">$17</font><font color="#000080">,</font><font color="#800000">$74</font><font color="#000080">,</font><font color="#800000">$06</font><font color="#000080">,</font><font color="#800000">$FE</font><font color="#000080">,</font><font color="#800000">$C5</font><font color="#000080">,</font><font color="#800000">$B1</font><font color="#000080">,</font><font color="#800000">$00</font><font color="#000080">,</font><font color="#800000">$EB</font><font color="#000080">,</font><font color="#800000">$C6</font><font color="#000080">,
    </font><font color="#800000">$BA</font><font color="#000080">,</font><font color="#800000">$8E</font><font color="#000080">,</font><font color="#800000">$01</font><font color="#000080">,</font><font color="#800000">$B4</font><font color="#000080">,</font><font color="#800000">$09</font><font color="#000080">,</font><font color="#800000">$CD</font><font color="#000080">,</font><font color="#800000">$21</font><font color="#000080">,</font><font color="#800000">$B4</font><font color="#000080">,</font><font color="#800000">$01</font><font color="#000080">,</font><font color="#800000">$CD</font><font color="#000080">,</font><font color="#800000">$21</font><font color="#000080">,</font><font color="#800000">$B9</font><font color="#000080">,</font><font color="#800000">$00</font><font color="#000080">,</font><font color="#800000">$00</font><font color="#000080">,</font><font color="#800000">$B6</font><font color="#000080">,</font><font color="#800000">$02</font><font color="#000080">,
    </font><font color="#800000">$B2</font><font color="#000080">,</font><font color="#800000">$0D</font><font color="#000080">,</font><font color="#800000">$B4</font><font color="#000080">,</font><font color="#800000">$02</font><font color="#000080">,</font><font color="#800000">$CD</font><font color="#000080">,</font><font color="#800000">$21</font><font color="#000080">,</font><font color="#800000">$B2</font><font color="#000080">,</font><font color="#800000">$0A</font><font color="#000080">,</font><font color="#800000">$B4</font><font color="#000080">,</font><font color="#800000">$02</font><font color="#000080">,</font><font color="#800000">$CD</font><font color="#000080">,</font><font color="#800000">$21</font><font color="#000080">,</font><font color="#800000">$EB</font><font color="#000080">,</font><font color="#800000">$A8</font><font color="#000080">,</font><font color="#800000">$2D</font><font color="#000080">,</font><font color="#800000">$2D</font><font color="#000080">,
    </font><font color="#800000">$2D</font><font color="#000080">,</font><font color="#800000">$48</font><font color="#000080">,</font><font color="#800000">$69</font><font color="#000080">,</font><font color="#800000">$74</font><font color="#000080">,</font><font color="#800000">$20</font><font color="#000080">,</font><font color="#800000">$61</font><font color="#000080">,</font><font color="#800000">$6E</font><font color="#000080">,</font><font color="#800000">$79</font><font color="#000080">,</font><font color="#800000">$20</font><font color="#000080">,</font><font color="#800000">$6B</font><font color="#000080">,</font><font color="#800000">$65</font><font color="#000080">,</font><font color="#800000">$79</font><font color="#000080">,</font><font color="#800000">$20</font><font color="#000080">,</font><font color="#800000">$74</font><font color="#000080">,</font><font color="#800000">$6F</font><font color="#000080">,</font><font color="#800000">$20</font><font color="#000080">,
    </font><font color="#800000">$63</font><font color="#000080">,</font><font color="#800000">$6F</font><font color="#000080">,</font><font color="#800000">$6E</font><font color="#000080">,</font><font color="#800000">$74</font><font color="#000080">,</font><font color="#800000">$69</font><font color="#000080">,</font><font color="#800000">$6E</font><font color="#000080">,</font><font color="#800000">$75</font><font color="#000080">,</font><font color="#800000">$65</font><font color="#000080">,</font><font color="#800000">$2D</font><font color="#000080">,</font><font color="#800000">$2D</font><font color="#000080">,</font><font color="#800000">$2D</font><font color="#000080">,</font><font color="#800000">$24</font><font color="#000080">,</font><font color="#800000">$0A</font><font color="#000080">,</font><font color="#800000">$0D</font><font color="#000080">,</font><font color="#800000">$28</font><font color="#000080">,</font><font color="#800000">$50</font><font color="#000080">,
    </font><font color="#800000">$29</font><font color="#000080">,</font><font color="#800000">$72</font><font color="#000080">,</font><font color="#800000">$69</font><font color="#000080">,</font><font color="#800000">$6E</font><font color="#000080">,</font><font color="#800000">$74</font><font color="#000080">,</font><font color="#800000">$65</font><font color="#000080">,</font><font color="#800000">$72</font><font color="#000080">,</font><font color="#800000">$20</font><font color="#000080">,</font><font color="#800000">$6F</font><font color="#000080">,</font><font color="#800000">$72</font><font color="#000080">,</font><font color="#800000">$20</font><font color="#000080">,</font><font color="#800000">$28</font><font color="#000080">,</font><font color="#800000">$53</font><font color="#000080">,</font><font color="#800000">$29</font><font color="#000080">,</font><font color="#800000">$63</font><font color="#000080">,</font><font color="#800000">$72</font><font color="#000080">,
    </font><font color="#800000">$65</font><font color="#000080">,</font><font color="#800000">$65</font><font color="#000080">,</font><font color="#800000">$6E</font><font color="#000080">,</font><font color="#800000">$3F</font><font color="#000080">,</font><font color="#800000">$20</font><font color="#000080">,</font><font color="#800000">$24</font><font color="#000080">,</font><font color="#800000">$CD</font><font color="#000080">,</font><font color="#800000">$20</font><font color="#000080">);

</font><font color="#FF0000"><b>var </b></font>f<font color="#000080">,</font>g<font color="#000080">: </font><font color="#FF0000"><b>File</b></font><font color="#000080">;
    </font>size<font color="#000080">: </font>Word<font color="#000080">;
    </font>Buffer<font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font>bufsize<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte<font color="#000080">;

</font><font color="#008000"><i>{ This function added by Kerry Sokalsky - Dr. Bob forgot it! }
</i></font><font color="#FF0000"><b>Function </b></font>UpperStr<font color="#000080">(</font>St <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">) : </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>Count <font color="#000080">: </font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
  For </b></font>Count <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>Length<font color="#000080">(</font>St<font color="#000080">) </font><font color="#FF0000"><b>do
    </b></font>St<font color="#000080">[</font>Count<font color="#000080">] := </font>UpCase<font color="#000080">(</font>St<font color="#000080">[</font>Count<font color="#000080">]);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>writeln<font color="#000080">(</font><font color="#800000">'TXT2COM (c) 1992 DwarFools &amp; Consultancy, by drs. Robert E. Swart'</font><font color="#000080">);
  </font>writeln<font color="#000080">;

  </font><font color="#FF0000"><b>if </b></font>ParamCount <font color="#000080">&lt;&gt; </font><font color="#800000">2 </font><font color="#FF0000"><b>then
  begin
    </b></font>writeln<font color="#000080">(</font><font color="#800000">'Usage: txt2com txtfile comfile'</font><font color="#000080">);
    </font>Halt<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>if </b></font>UpperStr<font color="#000080">(</font>ParamStr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">)) = </font>UpperStr<font color="#000080">(</font>ParamStr<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">)) </font><font color="#FF0000"><b>then
  begin
    </b></font>writeln<font color="#000080">(</font><font color="#800000">'Error: infile = outfile'</font><font color="#000080">);
    </font>Halt<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>Assign<font color="#000080">(</font>f<font color="#000080">,</font>ParamStr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">));
  </font>reset<font color="#000080">(</font>f<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>IOResult <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
  begin
    </b></font>writeln<font color="#000080">(</font><font color="#800000">'Error: could not open file '</font><font color="#000080">,</font>ParamStr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">));
    </font>Halt<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>Assign<font color="#000080">(</font>g<font color="#000080">,</font>ParamStr<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">));
  </font>rewrite<font color="#000080">(</font>g<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>IOResult <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
  begin
    </b></font>writeln<font color="#000080">(</font><font color="#800000">'Error: could not create file '</font><font color="#000080">,</font>ParamStr<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">));
    </font>Halt<font color="#000080">(</font><font color="#800000">3</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>BlockWrite<font color="#000080">(</font>g<font color="#000080">,</font>InLineCode<font color="#000080">,</font><font color="#800000">200</font><font color="#000080">);
  </font><font color="#FF0000"><b>repeat
    </b></font>BlockRead<font color="#000080">(</font>f<font color="#000080">,</font>Buffer<font color="#000080">,</font>bufsize<font color="#000080">,</font>size<font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font>size <font color="#000080">&lt; </font>bufsize <font color="#FF0000"><b>then
    begin
      </b></font>Inc<font color="#000080">(</font>size<font color="#000080">);
      </font>Buffer<font color="#000080">[</font>size<font color="#000080">] := </font><font color="#800000">127 </font><font color="#008000"><i>{terminating character}</i></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>BlockWrite<font color="#000080">(</font>g<font color="#000080">,</font>Buffer<font color="#000080">,</font>size<font color="#000080">);
  </font><font color="#FF0000"><b>until </b></font>size <font color="#000080">&lt; </font>bufsize<font color="#000080">;
  </font>close<font color="#000080">(</font>f<font color="#000080">);
  </font>close<font color="#000080">(</font>g<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to TEXTFILE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0057.PAS">Original</a><b>]</b></p></body>
</html>
