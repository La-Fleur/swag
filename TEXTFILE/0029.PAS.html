<html>
<head><title> "Word Wrapping" by VINCE LAURENT</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to TEXTFILE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0029.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt; ..Well.. I am back at writing a chat door for the third time.. and am
&gt; havin trouble with wrapping the text.  It seems that when it wraps the
&gt; text to the next line it won't remove the text on the previous line,
&gt; and sometimes it won't wrap at all..  I don't have very dependable code
&gt; for this purpose so any help code is appreciated.. (I am using RMdoor
&gt; 4.2 right now..anybody seen anything better??).

Hope this helps...
}
{$R-,S-,I+,D+,F-,V+,B-,N-,L+ }
{$M 2048,0,0 }

</i></font><font color="#FF0000"><b>PROGRAM </b></font>WordWrap<font color="#000080">(</font>INPUT<font color="#000080">,</font>OUTPUT<font color="#000080">);
</font><font color="#FF0000"><b>USES </b></font>CRT<font color="#000080">;

</font><font color="#FF0000"><b>CONST
   </b></font>FKeyCode          <font color="#000080">= </font><font color="#800000">#0</font><font color="#000080">;
   </font>Space             <font color="#000080">= </font><font color="#800000">' '</font><font color="#000080">;
   </font>Hyphen            <font color="#000080">= </font><font color="#800000">'-'</font><font color="#000080">;
   </font>BackSpace         <font color="#000080">= ^</font>H<font color="#000080">;
   </font>CarriageReturn    <font color="#000080">= ^</font>M<font color="#000080">;
   </font>MaxWordLineLength <font color="#000080">= </font><font color="#800000">80</font><font color="#000080">;

</font><font color="#FF0000"><b>VAR
   </b></font>WordLine  <font color="#000080">: </font><font color="#FF0000"><b>STRING</b></font><font color="#000080">[</font>MaxWordLineLength<font color="#000080">];
   </font>Index1    <font color="#000080">: </font>BYTE<font color="#000080">;
   </font>Index2    <font color="#000080">: </font>BYTE<font color="#000080">;
   </font>InputChar <font color="#000080">: </font>CHAR<font color="#000080">;

</font><font color="#FF0000"><b>BEGIN
  </b></font>WordLine  <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
  </font>Index1    <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>Index2    <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>InputChar <font color="#000080">:= </font>Space<font color="#000080">;

  </font>AssignCRT<font color="#000080">(</font>INPUT<font color="#000080">);
  </font>AssignCRT<font color="#000080">(</font>OUTPUT<font color="#000080">);
  </font>Reset<font color="#000080">(</font>INPUT<font color="#000080">);
  </font>ReWrite<font color="#000080">(</font>OUTPUT<font color="#000080">);
  </font>Writeln<font color="#000080">(</font><font color="#800000">'Enter text (ENTER to stop) : '</font><font color="#000080">);

  </font>InputChar <font color="#000080">:= </font>READKEY<font color="#000080">;

  </font><font color="#008000"><i>{Do the job.}
  </i></font><font color="#FF0000"><b>WHILE </b></font><font color="#000080">(</font>InputChar <font color="#000080">&lt;&gt; </font>CarriageReturn<font color="#000080">) </font><font color="#FF0000"><b>DO
    BEGIN
      CASE </b></font>InputChar <font color="#FF0000"><b>OF
        </b></font>BackSpace<font color="#000080">: </font><font color="#008000"><i>{write destructive backspace &amp; remove char from WordLine}
          </i></font><font color="#FF0000"><b>BEGIN
            </b></font>Write<font color="#000080">(</font>OUTPUT<font color="#000080">,</font>BackSpace<font color="#000080">,</font>Space<font color="#000080">,</font>BackSpace<font color="#000080">);
            </font>Delete<font color="#000080">(</font>WordLine<font color="#000080">,(</font>LENGTH<font color="#000080">(</font>WordLine<font color="#000080">) - </font><font color="#800000">1</font><font color="#000080">),</font><font color="#800000">1</font><font color="#000080">)
          </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
        </font>FKeyCode<font color="#000080">: </font><font color="#008000"><i>{user pressed a function key, so dismiss it}
          </i></font><font color="#FF0000"><b>BEGIN
            </b></font>InputChar <font color="#000080">:= </font>READKEY<font color="#000080">; </font><font color="#008000"><i>{function keys send two-char scan code!}
            </i></font>InputChar <font color="#000080">:= </font>Space
          <font color="#FF0000"><b>END
        ELSE </b></font><font color="#008000"><i>{InputChar contains a valid char, so deal with it}
          </i></font><font color="#FF0000"><b>BEGIN
            </b></font>Write<font color="#000080">(</font>OUTPUT<font color="#000080">,</font>InputChar<font color="#000080">);
            </font>WordLine <font color="#000080">:= (</font>WordLine <font color="#000080">+ </font>InputChar<font color="#000080">);
            </font><font color="#FF0000"><b>IF </b></font><font color="#000080">(</font>Length<font color="#000080">(</font>WordLine<font color="#000080">) &gt;= (</font>MaxWordLineLength <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">)) </font><font color="#FF0000"><b>THEN
             </b></font><font color="#008000"><i>{we have to do a word-wrap}
              </i></font><font color="#FF0000"><b>BEGIN
                </b></font>Index1 <font color="#000080">:= (</font>MaxWordLineLength <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">);
                </font><font color="#FF0000"><b>WHILE </b></font><font color="#000080">((</font>WordLine<font color="#000080">[</font>Index1<font color="#000080">] &lt;&gt; </font>Space<font color="#000080">)
                  </font><font color="#FF0000"><b>AND </b></font><font color="#000080">(</font>WordLine<font color="#000080">[</font>Index1<font color="#000080">] &lt;&gt; </font>Hyphen<font color="#000080">) </font><font color="#FF0000"><b>AND </b></font><font color="#000080">(</font>Index1 <font color="#000080">&lt;&gt; </font><font color="#800000">0</font><font color="#000080">))
                    </font><font color="#FF0000"><b>DO </b></font>Index1 <font color="#000080">:= (</font>Index1 <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">);
                      </font><font color="#FF0000"><b>IF </b></font><font color="#000080">(</font>Index1 <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">)
                        </font><font color="#FF0000"><b>THEN  </b></font><font color="#008000"><i>{whoah, no space was found to split line!}
                          </i></font>Index1 <font color="#000080">:= (</font>MaxWordLineLength <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">); </font><font color="#008000"><i>{forces split}
                      </i></font>Delete<font color="#000080">(</font>WordLine<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font>Index1<font color="#000080">);
                      </font><font color="#FF0000"><b>FOR </b></font>Index2 <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>TO </b></font>LENGTH<font color="#000080">(</font>WordLine<font color="#000080">) </font><font color="#FF0000"><b>DO
                        </b></font>Write<font color="#000080">(</font>OUTPUT<font color="#000080">,</font>BackSpace<font color="#000080">,</font>Space<font color="#000080">,</font>BackSpace<font color="#000080">);
                      </font>Writeln<font color="#000080">(</font>OUTPUT<font color="#000080">);
                      </font>Write<font color="#000080">(</font>OUTPUT<font color="#000080">,</font>WordLine<font color="#000080">)
              </font><font color="#FF0000"><b>END
          END
      END</b></font><font color="#000080">; </font><font color="#008000"><i>{CASE InputChar}
      {Get next key from user.}
      </i></font>InputChar <font color="#000080">:= </font>READKEY
    <font color="#FF0000"><b>END</b></font><font color="#000080">; </font><font color="#008000"><i>{WHILE (InputChar &lt;&gt; CarriageReturn)}

  {Wrap up the program.}
  </i></font>Writeln<font color="#000080">(</font>OUTPUT<font color="#000080">);
  </font>Writeln<font color="#000080">(</font>OUTPUT<font color="#000080">);
  </font>Close<font color="#000080">(</font>INPUT<font color="#000080">);
  </font>Close<font color="#000080">(</font>OUTPUT<font color="#000080">)
</font><font color="#FF0000"><b>END</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to TEXTFILE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0029.PAS">Original</a><b>]</b></p></body>
</html>
