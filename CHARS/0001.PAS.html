<html>
<head><title> "Manipulating the VGA Font" by DAVID DRZYZGA</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to CHARS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0001.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
DAVID DRZYZGA

&gt; Is there any way to create or use your own fonts in
&gt; regular Text mode With Pascal?

Here's a demo of a routine originally posted by Bernie P and revised by me:
}

</i></font><font color="#FF0000"><b>Program </b></font>UpsideDown<font color="#000080">;
</font><font color="#008000"><i>{-upsidedown and backwards Text aka redefining the Text mode font}
</i></font><font color="#FF0000"><b>Var
  </b></font>newCharset<font color="#000080">,
  </font>oldCharset <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">16</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>getoldCharset<font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>b <font color="#000080">: </font>Byte<font color="#000080">;
  </font>w <font color="#000080">: </font>Word<font color="#000080">;
</font><font color="#FF0000"><b>begin
  For </b></font>b <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do
  begin
    </b></font>w <font color="#000080">:= </font>b <font color="#000080">* </font><font color="#800000">32</font><font color="#000080">;
    </font><font color="#FF0000"><b>Inline</b></font><font color="#000080">(</font><font color="#800000">$FA</font><font color="#000080">);
    </font>PortW<font color="#000080">[</font><font color="#800000">$3C4</font><font color="#000080">] := </font><font color="#800000">$0402</font><font color="#000080">;
    </font>PortW<font color="#000080">[</font><font color="#800000">$3C4</font><font color="#000080">] := </font><font color="#800000">$0704</font><font color="#000080">;
    </font>PortW<font color="#000080">[</font><font color="#800000">$3CE</font><font color="#000080">] := </font><font color="#800000">$0204</font><font color="#000080">;
    </font>PortW<font color="#000080">[</font><font color="#800000">$3CE</font><font color="#000080">] := </font><font color="#800000">$0005</font><font color="#000080">;
    </font>PortW<font color="#000080">[</font><font color="#800000">$3CE</font><font color="#000080">] := </font><font color="#800000">$0006</font><font color="#000080">;
    </font>Move<font color="#000080">(</font>Ptr<font color="#000080">(</font><font color="#800000">$A000</font><font color="#000080">, </font>w<font color="#000080">)^, </font>oldCharset<font color="#000080">[</font>b<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">], </font><font color="#800000">16</font><font color="#000080">);
    </font>PortW<font color="#000080">[</font><font color="#800000">$3C4</font><font color="#000080">] := </font><font color="#800000">$0302</font><font color="#000080">;
    </font>PortW<font color="#000080">[</font><font color="#800000">$3C4</font><font color="#000080">] := </font><font color="#800000">$0304</font><font color="#000080">;
    </font>PortW<font color="#000080">[</font><font color="#800000">$3CE</font><font color="#000080">] := </font><font color="#800000">$0004</font><font color="#000080">;
    </font>PortW<font color="#000080">[</font><font color="#800000">$3CE</font><font color="#000080">] := </font><font color="#800000">$1005</font><font color="#000080">;
    </font>PortW<font color="#000080">[</font><font color="#800000">$3CE</font><font color="#000080">] := </font><font color="#800000">$0E06</font><font color="#000080">;
    </font><font color="#FF0000"><b>Inline</b></font><font color="#000080">(</font><font color="#800000">$FB</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>restoreoldCharset<font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>b <font color="#000080">: </font>Byte<font color="#000080">;
  </font>w <font color="#000080">: </font>Word<font color="#000080">;
</font><font color="#FF0000"><b>begin
  For </b></font>b <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do
  begin
    </b></font>w <font color="#000080">:= </font>b <font color="#000080">* </font><font color="#800000">32</font><font color="#000080">;
    </font><font color="#FF0000"><b>Inline</b></font><font color="#000080">(</font><font color="#800000">$FA</font><font color="#000080">);
    </font>PortW<font color="#000080">[</font><font color="#800000">$3C4</font><font color="#000080">] := </font><font color="#800000">$0402</font><font color="#000080">;
    </font>PortW<font color="#000080">[</font><font color="#800000">$3C4</font><font color="#000080">] := </font><font color="#800000">$0704</font><font color="#000080">;
    </font>PortW<font color="#000080">[</font><font color="#800000">$3CE</font><font color="#000080">] := </font><font color="#800000">$0204</font><font color="#000080">;
    </font>PortW<font color="#000080">[</font><font color="#800000">$3CE</font><font color="#000080">] := </font><font color="#800000">$0005</font><font color="#000080">;
    </font>PortW<font color="#000080">[</font><font color="#800000">$3CE</font><font color="#000080">] := </font><font color="#800000">$0006</font><font color="#000080">;
    </font>Move<font color="#000080">(</font>oldCharset<font color="#000080">[</font>b<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">], </font>Ptr<font color="#000080">(</font><font color="#800000">$A000</font><font color="#000080">, </font>w<font color="#000080">)^, </font><font color="#800000">16</font><font color="#000080">);
    </font>PortW<font color="#000080">[</font><font color="#800000">$3C4</font><font color="#000080">] := </font><font color="#800000">$0302</font><font color="#000080">;
    </font>PortW<font color="#000080">[</font><font color="#800000">$3C4</font><font color="#000080">] := </font><font color="#800000">$0304</font><font color="#000080">;
    </font>PortW<font color="#000080">[</font><font color="#800000">$3CE</font><font color="#000080">] := </font><font color="#800000">$0004</font><font color="#000080">;
    </font>PortW<font color="#000080">[</font><font color="#800000">$3CE</font><font color="#000080">] := </font><font color="#800000">$1005</font><font color="#000080">;
    </font>PortW<font color="#000080">[</font><font color="#800000">$3CE</font><font color="#000080">] := </font><font color="#800000">$0E06</font><font color="#000080">;
    </font><font color="#FF0000"><b>Inline</b></font><font color="#000080">(</font><font color="#800000">$FB</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>setasciiChar<font color="#000080">(</font>Charnum <font color="#000080">: </font>Byte<font color="#000080">; </font><font color="#FF0000"><b>Var </b></font>data<font color="#000080">);
</font><font color="#FF0000"><b>Var
  </b></font>offset <font color="#000080">: </font>Word<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>offset <font color="#000080">:= </font>CharNum <font color="#000080">* </font><font color="#800000">32</font><font color="#000080">;
  </font><font color="#FF0000"><b>Inline</b></font><font color="#000080">(</font><font color="#800000">$FA</font><font color="#000080">);
  </font>PortW<font color="#000080">[</font><font color="#800000">$3C4</font><font color="#000080">] := </font><font color="#800000">$0402</font><font color="#000080">;
  </font>PortW<font color="#000080">[</font><font color="#800000">$3C4</font><font color="#000080">] := </font><font color="#800000">$0704</font><font color="#000080">;
  </font>PortW<font color="#000080">[</font><font color="#800000">$3CE</font><font color="#000080">] := </font><font color="#800000">$0204</font><font color="#000080">;
  </font>PortW<font color="#000080">[</font><font color="#800000">$3CE</font><font color="#000080">] := </font><font color="#800000">$0005</font><font color="#000080">;
  </font>PortW<font color="#000080">[</font><font color="#800000">$3CE</font><font color="#000080">] := </font><font color="#800000">$0006</font><font color="#000080">;
  </font>Move<font color="#000080">(</font>data<font color="#000080">, </font>Ptr<font color="#000080">(</font><font color="#800000">$A000</font><font color="#000080">, </font>offset<font color="#000080">)^, </font><font color="#800000">16</font><font color="#000080">);
  </font>PortW<font color="#000080">[</font><font color="#800000">$3C4</font><font color="#000080">] := </font><font color="#800000">$0302</font><font color="#000080">;
  </font>PortW<font color="#000080">[</font><font color="#800000">$3C4</font><font color="#000080">] := </font><font color="#800000">$0304</font><font color="#000080">;
  </font>PortW<font color="#000080">[</font><font color="#800000">$3CE</font><font color="#000080">] := </font><font color="#800000">$0004</font><font color="#000080">;
  </font>PortW<font color="#000080">[</font><font color="#800000">$3CE</font><font color="#000080">] := </font><font color="#800000">$1005</font><font color="#000080">;
  </font>PortW<font color="#000080">[</font><font color="#800000">$3CE</font><font color="#000080">] := </font><font color="#800000">$0E06</font><font color="#000080">;
  </font><font color="#FF0000"><b>Inline</b></font><font color="#000080">(</font><font color="#800000">$FB</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>newWriteln<font color="#000080">(</font>s <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">);
 </font><font color="#008000"><i>{- Reverses order of Characters written}
</i></font><font color="#FF0000"><b>Var
  </b></font>b <font color="#000080">: </font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
  For </b></font>b <font color="#000080">:= </font>length<font color="#000080">(</font>s<font color="#000080">) </font><font color="#FF0000"><b>downto </b></font><font color="#800000">1 </font><font color="#FF0000"><b>do
    </b></font>Write<font color="#000080">(</font>s<font color="#000080">[</font>b<font color="#000080">]);
  </font>Writeln<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Var
  </b></font>b<font color="#000080">, </font>c <font color="#000080">: </font>Byte<font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>getoldCharset<font color="#000080">;
  </font><font color="#FF0000"><b>For </b></font>b <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do
    For </b></font>c <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">16 </font><font color="#FF0000"><b>do
      </b></font>newCharset<font color="#000080">[</font>b<font color="#000080">, </font>c<font color="#000080">] := </font>oldCharset<font color="#000080">[</font>b<font color="#000080">, (</font><font color="#800000">17 </font><font color="#000080">- </font>c<font color="#000080">)];
  </font><font color="#FF0000"><b>For </b></font>b <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do
    </b></font>setasciiChar<font color="#000080">(</font>b<font color="#000080">, </font>newCharset<font color="#000080">[</font>b<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">]);
  </font>newWriteln<font color="#000080">(</font><font color="#800000">'Hello World!'</font><font color="#000080">);
  </font>readln<font color="#000080">;
  </font>restoreoldCharset<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to CHARS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0001.PAS">Original</a><b>]</b></p></body>
</html>
