<html>
<head><title> "Save Dos Screen" by GABRIEL LAGOS</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to SAVESCRN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0011.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#000000"> <font color="#FF0000"><b>Program </b></font>FancyWiper<font color="#000080">;
 </font><font color="#FF0000"><b>uses </b></font>crt<font color="#000080">;

 </font><font color="#FF0000"><b>Type
   </b></font><font color="#008000"><i>{I define the following type for all my virtual screens. Using this
    record allows me to write to any screen variable very easily}
   </i></font>ScreenType <font color="#000080">= </font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">25</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">80</font><font color="#000080">] </font><font color="#FF0000"><b>of record
        </b></font>ch   <font color="#000080">: </font>Char<font color="#000080">;
        </font>Attr <font color="#000080">: </font>Byte<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

 </font><font color="#FF0000"><b>Var
   </b></font><font color="#008000"><i>{define a variable which points to the screen location. If you had a mono
    card then the address would be $B000:0000.}
   </i></font>Screen <font color="#000080">: </font>ScreenType <font color="#FF0000"><b>absolute </b></font><font color="#800000">$B800</font><font color="#000080">:</font><font color="#800000">0000</font><font color="#000080">;

   </font><font color="#008000"><i>{Declare a variable to save your old DOS screen}
   </i></font>OldScreen <font color="#000080">: </font>ScreenType<font color="#000080">;
   </font><font color="#008000"><i>{Declare a virtual screen}
   </i></font>VirtScr <font color="#000080">: </font>ScreenType<font color="#000080">;

   </font><font color="#008000"><i>{This procedure is used to write text to a virtual screen. Now
    there are no problems writing to line 25! ;-) }
   </i></font><font color="#FF0000"><b>Procedure </b></font>MyWrite<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>Scr <font color="#000080">: </font>ScreenType<font color="#000080">; </font>x<font color="#000080">,</font>y <font color="#000080">: </font>integer<font color="#000080">; </font>st <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">);
   </font><font color="#FF0000"><b>var
     </b></font>t<font color="#000080">, </font>xpos <font color="#000080">: </font>integer<font color="#000080">;
   </font><font color="#FF0000"><b>begin
     </b></font>xpos <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;

     </font><font color="#008000"><i>{exit proc if y not in screen limits}
     </i></font><font color="#FF0000"><b>if not </b></font><font color="#000080">(</font>y <font color="#FF0000"><b>in </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">25</font><font color="#000080">]) </font><font color="#FF0000"><b>then
       </b></font>exit<font color="#000080">;

     </font><font color="#FF0000"><b>while </b></font><font color="#000080">(</font>xpos<font color="#000080">+</font><font color="#800000">1 </font><font color="#000080">&lt;= </font>length<font color="#000080">(</font>st<font color="#000080">)) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>xpos<font color="#000080">+</font>x <font color="#000080">&lt;=</font><font color="#800000">80</font><font color="#000080">) </font><font color="#FF0000"><b>do
       begin
         with </b></font>Scr<font color="#000080">[</font>y<font color="#000080">, </font>xpos<font color="#000080">+</font>x<font color="#000080">] </font><font color="#FF0000"><b>do
           begin
             </b></font>ch <font color="#000080">:= </font>St<font color="#000080">[</font>xpos<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">];
             </font>attr <font color="#000080">:= </font>TextAttr<font color="#000080">;
           </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
         </font>inc<font color="#000080">(</font>xpos<font color="#000080">);
       </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

   </font><font color="#008000"><i>{A kludgy ClrScr for a virtual screen }
   </i></font><font color="#FF0000"><b>Procedure </b></font>MyClrScr<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>Scr <font color="#000080">: </font>ScreenType<font color="#000080">);
   </font><font color="#FF0000"><b>begin
     </b></font>fillchar<font color="#000080">(</font>Scr<font color="#000080">, </font>Sizeof<font color="#000080">(</font>scr<font color="#000080">), </font><font color="#800000">0</font><font color="#000080">);
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

   </font><font color="#008000"><i>{Simple demonstration of a fancy effect. There's a lot more where this came
   from!!}
   </i></font><font color="#FF0000"><b>Procedure </b></font>Wipe<font color="#000080">(</font>Scr <font color="#000080">: </font>ScreenType<font color="#000080">; </font>Left <font color="#000080">: </font>Boolean<font color="#000080">; </font>DelayTime <font color="#000080">: </font>Word<font color="#000080">);
   </font><font color="#FF0000"><b>var
     </b></font>xstep<font color="#000080">,</font>x<font color="#000080">,</font>y <font color="#000080">: </font>integer<font color="#000080">;
   </font><font color="#FF0000"><b>begin
     if </b></font>Left <font color="#FF0000"><b>then
       begin
         </b></font>xstep <font color="#000080">:= -</font><font color="#800000">1</font><font color="#000080">;
         </font>x <font color="#000080">:= </font><font color="#800000">80</font><font color="#000080">;
       </font><font color="#FF0000"><b>end
     else
       begin
         </b></font>xstep <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
         </font>x <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
       </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

     </font><font color="#FF0000"><b>while </b></font>x <font color="#FF0000"><b>in </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">80</font><font color="#000080">] </font><font color="#FF0000"><b>do
       begin
         for </b></font>y <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">25 </font><font color="#FF0000"><b>do
           </b></font>Screen<font color="#000080">[</font>y<font color="#000080">,</font>x<font color="#000080">] := </font>Scr<font color="#000080">[</font>y<font color="#000080">,</font>x<font color="#000080">];
         </font>Delay<font color="#000080">(</font>DelayTime<font color="#000080">);
         </font>inc<font color="#000080">(</font>x<font color="#000080">,</font>xstep<font color="#000080">);
       </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;


 </font><font color="#FF0000"><b>Begin
   </b></font><font color="#008000"><i>{Save the dos screen first}
   </i></font>OldScreen <font color="#000080">:= </font>Screen<font color="#000080">;

   </font><font color="#008000"><i>{Now go and do whatever you want with the screen}
   </i></font>TextColor<font color="#000080">(</font>Green<font color="#000080">);
   </font>MyClrScr<font color="#000080">(</font>VirtScr<font color="#000080">);
   </font>MyWrite<font color="#000080">(</font>VirtScr<font color="#000080">,</font><font color="#800000">10</font><font color="#000080">,</font><font color="#800000">10</font><font color="#000080">,</font><font color="#800000">'Hello there! Hows everything!  That should make this line long enough'</font><font color="#000080">);
   </font>MyWrite<font color="#000080">(</font>VirtScr<font color="#000080">,</font><font color="#800000">10</font><font color="#000080">,</font><font color="#800000">13</font><font color="#000080">,</font><font color="#800000">'Whats your name : '</font><font color="#000080">);
   </font>Wipe<font color="#000080">(</font>VirtScr<font color="#000080">,</font>True<font color="#000080">,</font><font color="#800000">30</font><font color="#000080">);
   </font>GotoXy<font color="#000080">(</font><font color="#800000">28</font><font color="#000080">,</font><font color="#800000">13</font><font color="#000080">);
   </font>TextColor<font color="#000080">(</font>White<font color="#000080">);
   </font>Readln<font color="#000080">;

   </font><font color="#008000"><i>{Now to restore the old screen}
   </i></font>Wipe<font color="#000080">(</font>OldScreen<font color="#000080">,</font>False<font color="#000080">,</font><font color="#800000">20</font><font color="#000080">);
 </font><font color="#FF0000"><b>End</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to SAVESCRN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0011.PAS">Original</a><b>]</b></p></body>
</html>
