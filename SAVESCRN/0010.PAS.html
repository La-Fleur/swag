<html>
<head><title> "Graphic Screen Capture" by SEAN PALMER</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to SAVESCRN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0010.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt; Does anyone have any code that will go tsr and dump the pixel colors in a
&gt; 320.256. whatever that mode is into a Text File in the format 200,5,0,0,0,4,
&gt; etc?  just list every pixel followed by a comma?

The TSR part would be the hard part, the writing the screen to a File
would be easy.

I wrote this little prog just now, not incredibly great but might
actually work and probably will do the job...

Be careful as it doesn't check For Dos reentrancy and you might hang
your computer if you try to capture a screen While Dos is doing
something else...

by Sean Palmer,
public domain
}

</i></font><font color="#FF0000"><b>Program </b></font>capture<font color="#000080">;
</font><font color="#FF0000"><b>Uses
  </b></font>Dos<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>WriteScrn2File<font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>f    <font color="#000080">: </font>Text<font color="#000080">;
  </font>x<font color="#000080">, </font>y <font color="#000080">: </font>Word<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>assign<font color="#000080">(</font>f<font color="#000080">,</font><font color="#800000">'CAPTURE.SCR'</font><font color="#000080">);
  </font>reWrite<font color="#000080">(</font>f<font color="#000080">);
  </font><font color="#FF0000"><b>For </b></font>y <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">199 </font><font color="#FF0000"><b>do
    For </b></font>x <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">319 </font><font color="#FF0000"><b>do
    begin
      </b></font>Write<font color="#000080">(</font>f<font color="#000080">, </font>mem<font color="#000080">[</font><font color="#800000">$A000 </font><font color="#000080">: </font>y <font color="#000080">* </font><font color="#800000">320 </font><font color="#000080">+ </font>x<font color="#000080">], </font><font color="#800000">','</font><font color="#000080">);
      </font><font color="#FF0000"><b>if </b></font>x <font color="#FF0000"><b>mod </b></font><font color="#800000">20 </font><font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then
        </b></font>Writeln<font color="#000080">(</font>f<font color="#000080">);  </font><font color="#008000"><i>{new line every 20 pixels}
    </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>close<font color="#000080">(</font>f<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Var
  </b></font>oldIntVec <font color="#000080">: </font><font color="#FF0000"><b>Procedure</b></font><font color="#000080">;

</font><font color="#008000"><i>{you need to put a Real check For Dos activity here}

</i></font><font color="#FF0000"><b>Function </b></font>DosActive <font color="#000080">: </font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>DosActive <font color="#000080">:= </font>False<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{assume no and keep fingers crossed! 8)}

</i></font><font color="#FF0000"><b>Procedure </b></font>keyHandler<font color="#000080">; </font>interrupt<font color="#000080">;
</font><font color="#FF0000"><b>begin
  if </b></font>port<font color="#000080">[</font><font color="#800000">$60</font><font color="#000080">] = </font><font color="#800000">114 </font><font color="#FF0000"><b>then     </b></font><font color="#008000"><i>{if print-screen pressed}
    </i></font><font color="#FF0000"><b>if not </b></font>DosActive <font color="#FF0000"><b>then </b></font><font color="#008000"><i>{better not press While Dos is doing something}
      </i></font>WriteScrn2File<font color="#000080">;
  </font>oldIntVec<font color="#000080">;  </font><font color="#008000"><i>{call old handler}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>getIntVec<font color="#000080">(</font><font color="#800000">9</font><font color="#000080">, @</font>oldIntVec<font color="#000080">);
  </font>setIntVec<font color="#000080">(</font><font color="#800000">9</font><font color="#000080">, @</font>newIntVec<font color="#000080">);
  </font>keep<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);  </font><font color="#008000"><i>{go TSR}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to SAVESCRN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0010.PAS">Original</a><b>]</b></p></body>
</html>
