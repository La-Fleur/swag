<html>
<head><title> "Re: Procedures for screens" by GEORGE ROBERTS</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to SAVESCRN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0016.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#008000"><i>{ ScreenStuff : Turbo Pascal unit for saving and restoring portions of the
             screen.

  This source is released into the public domain by Intuitive Vision Software
  on 08/01/95.  This source may be used, modified and distributed with the
  following exceptions:

        * Modified versions of this source code may be distributed PROVIDING
          that the modified version still contains this header at the
          beginning of the file, and that no text has been deleted from the
          header.  Additional comments may be added to the header.

        * This source code may be used in commercial or shareware programs
          providing that mention is made of its use in the documentation for
          said program.  THIS INCLUDES modified versions of this unit.  The
          proper description of this unit is:

                The ScreenStuff Unit from Intuitive Vision Software          }


</i></font><font color="#FF0000"><b>UNIT </b></font>ScrStuff<font color="#000080">;

</font><font color="#FF0000"><b>INTERFACE

USES </b></font>Dos<font color="#000080">, </font>Crt<font color="#000080">;

</font><font color="#FF0000"><b>CONST </b></font>VideoSegment <font color="#000080">: </font>WORD <font color="#000080">= </font><font color="#800000">$B800</font><font color="#000080">;

</font><font color="#FF0000"><b>TYPE  </b></font>WindowREC    <font color="#000080">= </font><font color="#FF0000"><b>ARRAY</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">4003</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>BYTE<font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>SaveWindow<font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>Wind<font color="#000080">:</font>WindowREC<font color="#000080">; </font>X1<font color="#000080">,</font>Y1<font color="#000080">,</font>X2<font color="#000080">,</font>Y2<font color="#000080">:</font>INTEGER<font color="#000080">);
</font><font color="#FF0000"><b>PROCEDURE </b></font>RestoreWindow<font color="#000080">(</font>Wind<font color="#000080">:</font>WindowREC<font color="#000080">);

</font><font color="#FF0000"><b>IMPLEMENTATION

PROCEDURE </b></font>CheckVideoSegment<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  IF </b></font><font color="#000080">(</font>MEM<font color="#000080">[</font><font color="#800000">$0000</font><font color="#000080">:</font><font color="#800000">$0449</font><font color="#000080">]=</font><font color="#800000">7</font><font color="#000080">) </font><font color="#FF0000"><b>Then </b></font>VideoSegment<font color="#000080">:=</font><font color="#800000">$B000 </font><font color="#FF0000"><b>else </b></font>VideoSegment<font color="#000080">:=</font><font color="#800000">$B800</font><font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;


</font><font color="#008000"><i>{ NOTE: SaveWindow does not clear the area that it saves.  It simply saves
  this data to an array.  Thus, in order to do what was stated above, you
  would simply define two variables of type WindowREC in your program, and
  save the first screen and the second screen into them.  Then whenever you
  needed to put them on the screen, you could use RestoreWindow to do so.
  NOTE: RestoreWindow does not clear the contents of the WindowREC variable
  passed to it, therefore this is possible.                                  }

{ ADDITIONAL NOTE:  SaveWindow and RestoreWindow do NOT save your window size
  or cursor position.  If you wish to modify it to do so, I would suggest
  increasing the WindowREC variable to ARRAY[0..4009] of BYTE, then place
  the window size and cursor position in the last 6 bytes.

  Current Window Size:

  x1:=LO(Windmin)+1;
  y1:=HI(Windmin)+1;
  x2:=LO(Windmax)+1;
  y2:=HI(Windmax)+1;

  Cursor position (window relative);

  x:=wherex;
  y:=wherey;

  }

</i></font><font color="#FF0000"><b>PROCEDURE </b></font>SaveWindow<font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>Wind<font color="#000080">:</font>WindowREC<font color="#000080">; </font>X1<font color="#000080">,</font>Y1<font color="#000080">,</font>X2<font color="#000080">,</font>Y2<font color="#000080">:</font>INTEGER<font color="#000080">);
</font><font color="#FF0000"><b>VAR </b></font>i<font color="#000080">,</font>x<font color="#000080">,</font>y<font color="#000080">:</font>INTEGER<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>CheckVideoSegment<font color="#000080">;                    </font><font color="#008000"><i>{ Find out the video segment         }

  </i></font>Wind<font color="#000080">[</font><font color="#800000">4000</font><font color="#000080">]:=</font>X1<font color="#000080">; </font>Wind<font color="#000080">[</font><font color="#800000">4001</font><font color="#000080">]:=</font>Y1<font color="#000080">;       </font><font color="#008000"><i>{ Put the size of the saved screen in}
  </i></font>Wind<font color="#000080">[</font><font color="#800000">4002</font><font color="#000080">]:=</font>X2<font color="#000080">; </font>Wind<font color="#000080">[</font><font color="#800000">4003</font><font color="#000080">]:=</font>Y2<font color="#000080">;       </font><font color="#008000"><i>{ the array for use at restore       }

  </i></font>i<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;                                 </font><font color="#008000"><i>{ Fill array with correct values from}
  </i></font><font color="#FF0000"><b>FOR </b></font>y<font color="#000080">:=</font>Y1 <font color="#FF0000"><b>TO </b></font>Y2 <font color="#FF0000"><b>DO                    </b></font><font color="#008000"><i>{ memory                             }
    </i></font><font color="#FF0000"><b>FOR </b></font>x<font color="#000080">:=</font>X1 <font color="#FF0000"><b>to </b></font>X2 <font color="#FF0000"><b>DO BEGIN
      INLINE</b></font><font color="#000080">(</font><font color="#800000">$FA</font><font color="#000080">);
      </font>Wind<font color="#000080">[</font>i<font color="#000080">]:=</font>MEM<font color="#000080">[</font>VideoSegment<font color="#000080">:(</font><font color="#800000">160</font><font color="#000080">*(</font>y<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">)+</font><font color="#800000">2</font><font color="#000080">*(</font>x<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">))];
      </font>Wind<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">]:=</font>MEM<font color="#000080">[</font>VideoSegment<font color="#000080">:(</font><font color="#800000">160</font><font color="#000080">*(</font>y<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">)+</font><font color="#800000">2</font><font color="#000080">*(</font>x<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">))+</font><font color="#800000">1</font><font color="#000080">];
      </font><font color="#FF0000"><b>INLINE</b></font><font color="#000080">(</font><font color="#800000">$FB</font><font color="#000080">);
      </font>INC<font color="#000080">(</font>i<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>RestoreWindow<font color="#000080">(</font>Wind<font color="#000080">:</font>WindowREC<font color="#000080">);
</font><font color="#FF0000"><b>VAR </b></font>X1<font color="#000080">,</font>Y1<font color="#000080">,</font>X2<font color="#000080">,</font>Y2<font color="#000080">,</font>x<font color="#000080">,</font>y<font color="#000080">,</font>i<font color="#000080">:</font>INTEGER<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>CheckVideoSegment<font color="#000080">;                    </font><font color="#008000"><i>{ Check the video segment            }

  </i></font>WINDOW<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">80</font><font color="#000080">,</font><font color="#800000">25</font><font color="#000080">);                    </font><font color="#008000"><i>{ Set window to 1,1,80,25 and set    }
  </i></font>TEXTCOLOR<font color="#000080">(</font><font color="#800000">7</font><font color="#000080">);                         </font><font color="#008000"><i>{ colors to 7,0 so that you have a   }
  </i></font>TEXTBACKGROUND<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);                    </font><font color="#008000"><i>{ black background drawn             }

  </i></font>X1<font color="#000080">:=</font>Wind<font color="#000080">[</font><font color="#800000">4000</font><font color="#000080">]; </font>Y1<font color="#000080">:=</font>Wind<font color="#000080">[</font><font color="#800000">4001</font><font color="#000080">];       </font><font color="#008000"><i>{ set our mins/max values from the   }
  </i></font>X2<font color="#000080">:=</font>Wind<font color="#000080">[</font><font color="#800000">4002</font><font color="#000080">]; </font>Y2<font color="#000080">:=</font>Wind<font color="#000080">[</font><font color="#800000">4003</font><font color="#000080">];       </font><font color="#008000"><i>{ values in array                    }

  </i></font>i<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;                                 </font><font color="#008000"><i>{ move data from array into video    }
  </i></font><font color="#FF0000"><b>FOR </b></font>y<font color="#000080">:=</font>Y1 <font color="#FF0000"><b>TO </b></font>Y2 <font color="#FF0000"><b>DO                    </b></font><font color="#008000"><i>{ memory                             }
    </i></font><font color="#FF0000"><b>FOR </b></font>x<font color="#000080">:=</font>X1 <font color="#FF0000"><b>TO </b></font>X2 <font color="#FF0000"><b>DO BEGIN
      INLINE</b></font><font color="#000080">(</font><font color="#800000">$FA</font><font color="#000080">);
      </font>MEM<font color="#000080">[</font>VideoSegment<font color="#000080">:(</font><font color="#800000">160</font><font color="#000080">*(</font>y<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">)+</font><font color="#800000">2</font><font color="#000080">*(</font>x<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">))]:=</font>Wind<font color="#000080">[</font>i<font color="#000080">];
      </font>MEM<font color="#000080">[</font>VideoSegment<font color="#000080">:(</font><font color="#800000">160</font><font color="#000080">*(</font>y<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">)+</font><font color="#800000">2</font><font color="#000080">*(</font>x<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">))+</font><font color="#800000">1</font><font color="#000080">]:=</font>Wind<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">];
      </font><font color="#FF0000"><b>INLINE</b></font><font color="#000080">(</font><font color="#800000">$FB</font><font color="#000080">);
      </font>INC<font color="#000080">(</font>i<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">);
    </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>END</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to SAVESCRN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0016.PAS">Original</a><b>]</b></p></body>
</html>
