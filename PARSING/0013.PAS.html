<html>
<head><title> "Copying a linked list" by CLIF PENN</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to PARSING SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0013.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#FF0000"><b>Program </b></font>Copy_Linked_List<font color="#000080">;
</font><font color="#008000"><i>{ &lt;clifpenn@airmail.net&gt;  May 31, 1996
  Turbo v.6.0 but no TPU's used so should work in many versions.
  For test purposes, a test string is parsed into words and each
  word and its length is stored in the cell of a linked list of
  the queue type (first-in-first-out, FIFO). The first linked list
  is preserved while its data is copied to another linked list.
  As a check on correct execution, the data of both lists are
  displayed on screen side by side.  }

</i></font><font color="#FF0000"><b>CONST
     </b></font>TestStr <font color="#000080">= </font><font color="#800000">'The quick brown fox jumped over the lazy dogs back'</font><font color="#000080">;

</font><font color="#FF0000"><b>TYPE
    </b></font>link <font color="#000080">= ^</font>cell<font color="#000080">;
    </font>cell <font color="#000080">=
         </font><font color="#FF0000"><b>Record
               </b></font>Next<font color="#000080">:</font>link<font color="#000080">;
               </font>StrWord<font color="#000080">:</font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">6</font><font color="#000080">];
               </font>WordLen<font color="#000080">:</font>Integer<font color="#000080">;
         </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>VAR
    </b></font>head1<font color="#000080">, </font>head2<font color="#000080">:</font>link<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>String_To_List<font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>head<font color="#000080">:</font>link<font color="#000080">);
</font><font color="#FF0000"><b>VAR   </b></font>Wrd<font color="#000080">:</font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">10</font><font color="#000080">] </font><font color="#FF0000"><b>of String</b></font><font color="#000080">[</font><font color="#800000">6</font><font color="#000080">];
      </font>s<font color="#000080">:</font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">80</font><font color="#000080">];
      </font>p1<font color="#000080">, </font>tail1<font color="#000080">:</font>link<font color="#000080">;
      </font>n<font color="#000080">, </font>p<font color="#000080">:</font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>Begin
</b></font><font color="#008000"><i>(* make an array of words for test purposes *)
      </i></font>s <font color="#000080">:= </font>TestStr <font color="#000080">+ </font><font color="#800000">' '</font><font color="#000080">; </font><font color="#008000"><i>(* trailing space makes it easier to parse *)
      </i></font>n <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font><font color="#FF0000"><b>While </b></font>Length<font color="#000080">(</font>s<font color="#000080">) &lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>do
      Begin
           </b></font>p <font color="#000080">:= </font>Pos<font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">, </font>s<font color="#000080">);   </font><font color="#008000"><i>(* position of first space *)
           </i></font>Inc<font color="#000080">(</font>n<font color="#000080">);
           </font>Wrd<font color="#000080">[</font>n<font color="#000080">] := </font>Copy<font color="#000080">(</font>s<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font>p <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">); </font><font color="#008000"><i>(* copies chars less space *)
           </i></font>Delete<font color="#000080">(</font>s<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font>p<font color="#000080">)  </font><font color="#008000"><i>(* deletes trailing space, too *)</i></font><font color="#000080">;
      </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
      </font><font color="#008000"><i>(* n now contains the number of elements in the array *)

(* make linked list and transfer array data to cells *)</i></font><font color="#000080">;
      </font>p <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font>p1 <font color="#000080">:= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>While </b></font>p <font color="#000080">&lt; </font>n <font color="#FF0000"><b>do
      Begin
           </b></font>Inc<font color="#000080">(</font>p<font color="#000080">);
           </font>New<font color="#000080">(</font>tail1<font color="#000080">);
           </font><font color="#FF0000"><b>With </b></font>tail1<font color="#000080">^ </font><font color="#FF0000"><b>do
           Begin
                </b></font>next <font color="#000080">:= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">;
                </font>StrWord <font color="#000080">:= </font>Wrd<font color="#000080">[</font>p<font color="#000080">];
                </font>WordLen <font color="#000080">:= </font>Length<font color="#000080">(</font>Wrd<font color="#000080">[</font>p<font color="#000080">]);
           </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
           </font><font color="#008000"><i>(* change global variable head1 to point to first cell *)
           </i></font><font color="#FF0000"><b>If </b></font>p1 <font color="#000080">= </font><font color="#FF0000"><b>nil then </b></font>head <font color="#000080">:= </font>tail1<font color="#000080">;
           </font>p1<font color="#000080">^.</font>next <font color="#000080">:= </font>tail1<font color="#000080">;  </font><font color="#008000"><i>(* p1 is still nil for first cell *)
           </i></font>p1 <font color="#000080">:= </font>tail1<font color="#000080">; </font><font color="#008000"><i>(* p1 to hold old link after a new tail *)
      </i></font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Copy_List_To_List<font color="#000080">(</font>hd1<font color="#000080">:</font>link<font color="#000080">; </font><font color="#FF0000"><b>VAR </b></font>hd2<font color="#000080">:</font>link<font color="#000080">);
</font><font color="#FF0000"><b>VAR  </b></font>prev1<font color="#000080">, </font>prev2<font color="#000080">, </font>next2<font color="#000080">:</font>link<font color="#000080">;
</font><font color="#FF0000"><b>Begin
     </b></font>prev1 <font color="#000080">:= </font>hd1<font color="#000080">;    </font>prev2 <font color="#000080">:= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">;
     </font><font color="#FF0000"><b>While </b></font>prev1 <font color="#000080">&lt;&gt; </font><font color="#FF0000"><b>nil do
     Begin
         </b></font>New<font color="#000080">(</font>next2<font color="#000080">);
         </font><font color="#FF0000"><b>With </b></font>next2<font color="#000080">^ </font><font color="#FF0000"><b>do   </b></font><font color="#008000"><i>(* copy data *)
         </i></font><font color="#FF0000"><b>Begin
              </b></font>next <font color="#000080">:= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">; </font><font color="#008000"><i>(* not a copy *)
              </i></font>StrWord <font color="#000080">:= </font>prev1<font color="#000080">^.</font>StrWord<font color="#000080">;
              </font>WordLen <font color="#000080">:= </font>prev1<font color="#000080">^.</font>WordLen<font color="#000080">;
         </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
         </font><font color="#FF0000"><b>If </b></font>prev2 <font color="#000080">= </font><font color="#FF0000"><b>nil then </b></font>hd2 <font color="#000080">:= </font>next2<font color="#000080">; </font><font color="#008000"><i>(* assigns global head2 *)
         </i></font>prev2<font color="#000080">^.</font>next <font color="#000080">:= </font>next2<font color="#000080">;
         </font>prev2 <font color="#000080">:= </font>next2<font color="#000080">;

         </font><font color="#008000"><i>(* advance to new cell of original list. Terminate
            copying if prev1^.next = nil *)

         </i></font>prev1 <font color="#000080">:= </font>prev1<font color="#000080">^.</font>next<font color="#000080">;
     </font><font color="#FF0000"><b>End</b></font><font color="#000080">; </font><font color="#008000"><i>(* while *)
</i></font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Show_List_Comparison<font color="#000080">(</font>h1<font color="#000080">, </font>h2<font color="#000080">:</font>link<font color="#000080">);
</font><font color="#FF0000"><b>Begin
     </b></font>Writeln<font color="#000080">; </font>Writeln<font color="#000080">; </font>Writeln<font color="#000080">;
     </font>Writeln<font color="#000080">(</font><font color="#800000">'Original'</font><font color="#000080">:</font><font color="#800000">15</font><font color="#000080">, </font><font color="#800000">'Copy'</font><font color="#000080">:</font><font color="#800000">15</font><font color="#000080">);
     </font>Writeln<font color="#000080">;
     </font><font color="#FF0000"><b>While </b></font>h1 <font color="#000080">&lt;&gt; </font><font color="#FF0000"><b>nil do
     Begin
           </b></font>Write<font color="#000080">(  </font>h1<font color="#000080">^.</font>StrWord<font color="#000080">:</font><font color="#800000">10</font><font color="#000080">, </font>h1<font color="#000080">^.</font>WordLen<font color="#000080">:</font><font color="#800000">5</font><font color="#000080">, </font><font color="#800000">'     '</font><font color="#000080">);
           </font>Writeln<font color="#000080">(</font>h2<font color="#000080">^.</font>StrWord<font color="#000080">:</font><font color="#800000">10</font><font color="#000080">, </font>h2<font color="#000080">^.</font>WordLen<font color="#000080">:</font><font color="#800000">5</font><font color="#000080">);
           </font>h1 <font color="#000080">:= </font>h1<font color="#000080">^.</font>next<font color="#000080">;
           </font>h2 <font color="#000080">:= </font>h2<font color="#000080">^.</font>next<font color="#000080">;
     </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
     </font>Writeln<font color="#000080">; </font>Writeln<font color="#000080">; </font>Writeln<font color="#000080">(</font><font color="#800000">'&lt;&lt; Press Enter &gt;&gt;'</font><font color="#000080">);
     </font>Readln<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;


</font><font color="#FF0000"><b>BEGIN </b></font><font color="#008000"><i>{ main program -- Copy_Linked_List }
      </i></font>String_To_List<font color="#000080">(</font>head1<font color="#000080">);
      </font>Copy_List_To_List<font color="#000080">(</font>head1<font color="#000080">, </font>head2<font color="#000080">);
      </font>Show_List_Comparison<font color="#000080">(</font>head1<font color="#000080">, </font>head2<font color="#000080">);
</font><font color="#FF0000"><b>END</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to PARSING SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0013.PAS">Original</a><b>]</b></p></body>
</html>
