<html>
<head><title> "PARSENUM.PAS" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to PARSING SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0001.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>Type
   </b></font>RW_toKEN <font color="#000080">= </font><font color="#FF0000"><b>Record
      </b></font>token_str <font color="#000080">:</font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">9</font><font color="#000080">];
      </font>token_cod <font color="#000080">:</font>toKEN_CODE<font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

   </font>RW_Type <font color="#000080">= </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">9</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>RW_toKEN<font color="#000080">;
   </font>RWT_PTR <font color="#000080">= ^</font>RW_Type<font color="#000080">;

</font><font color="#FF0000"><b>Const
   </b></font>NULL <font color="#000080">= </font><font color="#800000">''</font><font color="#000080">;

   </font>Rw_2  <font color="#000080">:</font>RW_Type <font color="#000080">= ((</font>token_str <font color="#000080">: </font><font color="#800000">'do'</font><font color="#000080">; </font>token_cod <font color="#000080">: </font>tdo<font color="#000080">),
                     (</font>token_str <font color="#000080">: </font><font color="#800000">'if'</font><font color="#000080">; </font>token_cod <font color="#000080">: </font>tif<font color="#000080">),
                     (</font>token_str <font color="#000080">: </font><font color="#800000">'in'</font><font color="#000080">; </font>token_cod <font color="#000080">: </font>tin<font color="#000080">),
                     (</font>token_str <font color="#000080">: </font><font color="#800000">'of'</font><font color="#000080">; </font>token_cod <font color="#000080">: </font>tof<font color="#000080">),
                     (</font>token_str <font color="#000080">: </font><font color="#800000">'or'</font><font color="#000080">; </font>token_cod <font color="#000080">: </font>tor<font color="#000080">),
                     (</font>token_str <font color="#000080">: </font><font color="#800000">'to'</font><font color="#000080">; </font>token_cod <font color="#000080">: </font>tto<font color="#000080">),
                     (</font>token_str <font color="#000080">: </font>NULL<font color="#000080">; </font>token_cod <font color="#000080">: </font>NO_toKEN<font color="#000080">),
                     (</font>token_str <font color="#000080">: </font>NULL<font color="#000080">; </font>token_cod <font color="#000080">: </font>NO_toKEN<font color="#000080">),
                     (</font>token_str <font color="#000080">: </font>NULL<font color="#000080">; </font>token_cod <font color="#000080">: </font>NO_toKEN<font color="#000080">),
                     (</font>token_str <font color="#000080">: </font>NULL<font color="#000080">; </font>token_cod <font color="#000080">: </font>NO_toKEN<font color="#000080">)
                    );

    ...</font>the difference being the explicit declaration <font color="#FF0000"><b>of </b></font>the Constant
    <font color="#FF0000"><b>Record </b></font>fields<font color="#000080">. (</font>I<font color="#800000">'m used to Array Constants, not Record
    </font>Constants <font color="#000080">- </font>I was unaware <font color="#FF0000"><b>of </b></font>the requirement<font color="#000080">)

    </font>PARSinG NUMBERS

    Now we<font color="#800000">'ll concentrate on parsing Integer and Real numbers.

    </font>The <font color="#FF0000"><b>Pascal </b></font>definition <font color="#FF0000"><b>of </b></font>a number begins <font color="#FF0000"><b>With </b></font>an UNSIGNED
    Integer<font color="#000080">. </font>An unsigned Integer consists <font color="#FF0000"><b>of </b></font>one <font color="#FF0000"><b>or </b></font>more consecutive
    DIGITS<font color="#000080">. </font>The simplest Form <font color="#FF0000"><b>of </b></font>a number token <font color="#FF0000"><b>is </b></font>an unsigned
    Integer<font color="#000080">:

    </font><font color="#800000">1 9 120 12654

    </font>A number token can also be an unsigned Integer <font color="#000080">(</font>the whole part<font color="#000080">)
    </font>followed by a fraction part<font color="#000080">. </font>A fraction part consists <font color="#FF0000"><b>of </b></font>a
    decimal point followed by an unsigned Integer<font color="#000080">, </font>such <font color="#FF0000"><b>as</b></font><font color="#000080">:

    </font><font color="#800000">123.45 0.9987564

    </font>These numbers have whole parts <font color="#800000">123 </font><font color="#FF0000"><b>and </b></font><font color="#800000">0 </font>respectively<font color="#000080">, </font><font color="#FF0000"><b>and
    </b></font>fraction parts <font color="#000080">.</font><font color="#800000">45 </font><font color="#FF0000"><b>and </b></font><font color="#000080">.</font><font color="#800000">9987564 </font>respectively<font color="#000080">.

    </font>A number token can also be a whole part followed by an EXPONENT
    part<font color="#000080">. </font>An exponent part consists <font color="#FF0000"><b>of </b></font>an <font color="#000080">&quot;</font>E<font color="#000080">&quot; (</font><font color="#FF0000"><b>or </b></font><font color="#000080">&quot;</font>e<font color="#000080">&quot;) </font>followed by
    an unsigned Integer<font color="#000080">. </font>An optional exponent sign<font color="#000080">, + </font><font color="#FF0000"><b>or </b></font><font color="#000080">-, </font>can
    appear between the letter <font color="#FF0000"><b>and </b></font>the first exponent digit<font color="#000080">.
    </font>Examples<font color="#000080">:

    </font><font color="#800000">134e2  2E99 123e</font><font color="#000080">-</font><font color="#800000">45 73623E</font><font color="#000080">+</font><font color="#800000">4

    </font><font color="#FF0000"><b>Finally</b></font><font color="#000080">, </font>a number token can be a whole part followed by a
    fraction part <font color="#FF0000"><b>and </b></font>an exponent part<font color="#000080">, </font><font color="#FF0000"><b>in </b></font>that order<font color="#000080">:

    </font><font color="#800000">2.3498E7 0.00034e</font><font color="#000080">-</font><font color="#800000">66

    </font>I arbitrarily limit the number <font color="#FF0000"><b>of </b></font>digits <font color="#FF0000"><b>to </b></font><font color="#800000">20</font><font color="#000080">, </font><font color="#FF0000"><b>and </b></font>the exponent
    value from <font color="#000080">-</font><font color="#800000">37 </font><font color="#FF0000"><b>to </b></font><font color="#000080">+</font><font color="#800000">37 </font><font color="#000080">- </font>the exact value necessary <font color="#FF0000"><b>to </b></font>limit this
    value <font color="#FF0000"><b>is </b></font>dependant <font color="#FF0000"><b>on </b></font>how Real values are represented <font color="#FF0000"><b>on </b></font>the
    Computer<font color="#000080">.

    </font>The <font color="#000080">&quot;</font>get_number<font color="#000080">&quot; </font><font color="#FF0000"><b>Function is </b></font>likely <font color="#FF0000"><b>to </b></font>be the biggest <font color="#FF0000"><b>Function
    in </b></font>your scanner<font color="#000080">, </font>but it should be relatively straighForward <font color="#FF0000"><b>to
    </b></font>code<font color="#000080">...</font><font color="#FF0000"><b>in </b></font>light <font color="#FF0000"><b>of </b></font>what has already been done <font color="#FF0000"><b>With </b></font>the scanner<font color="#000080">/
    </font>tokenizer module<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>the definition <font color="#FF0000"><b>of </b></font>a number<font color="#000080">.

    </font>EXERCISE <font color="#800000">#1

    </font>Write the get_number <font color="#FF0000"><b>Function to </b></font>parse Integers <font color="#FF0000"><b>and </b></font>Real
    numbers<font color="#000080">.

    </font>You will need <font color="#FF0000"><b>to </b></font>add the following Types <font color="#FF0000"><b>and </b></font>Variables <font color="#FF0000"><b>to </b></font>your
    global data segment<font color="#000080">:

    </font><font color="#FF0000"><b>Type  </b></font><font color="#008000"><i>{ add &quot;Real&quot;s to list... }

    </i></font>LITERAL_Type <font color="#000080">= (</font>Integer_LIT<font color="#000080">, </font>Real_LIT<font color="#000080">, </font>String_LIT<font color="#000080">);

    </font>LITERAL_REC <font color="#000080">= </font><font color="#FF0000"><b>Record
       Case </b></font>lType<font color="#000080">:</font>LITERAL_Type <font color="#FF0000"><b>of
          </b></font>Integer_LIT<font color="#000080">: (</font>ivalue <font color="#000080">:</font>Integer<font color="#000080">);
          </font>Real_LIT   <font color="#000080">: (</font>rvalue <font color="#000080">:</font>Real   <font color="#000080">);
          </font>String_LIT <font color="#000080">: (</font>svalue <font color="#000080">:</font><font color="#FF0000"><b>String </b></font><font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

    </font><font color="#FF0000"><b>Var

    </b></font>digit_count <font color="#000080">:</font>Word<font color="#000080">;
    </font>count_error <font color="#000080">:</font>Boolean<font color="#000080">;

--------------     </font>PART <font color="#800000">2     </font><font color="#000080">---------------------------------------

    </font>The rest <font color="#FF0000"><b>of </b></font>this post will cover two simple topics <font color="#000080">- </font>parsing
    Strings inside quotes<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>parsing comments<font color="#000080">.

    </font>PARSinG COMMENTS <font color="#008000"><i>{}

    </i></font>The Compiler should ignore the input between two curly braces
    <font color="#000080">(</font><font color="#008000"><i>{}</i></font><font color="#000080">), </font><font color="#FF0000"><b>and </b></font>the curly braces themselves<font color="#000080">. </font>My scanner <font color="#FF0000"><b>is </b></font>written so
    the entire comment <font color="#FF0000"><b>is </b></font>replace by a Single blank <font color="#000080">(&quot; &quot;), </font>although
    you could possibly Write the scanner so that comments are
    _totally_ ignored<font color="#000080">.

    </font>EXERCISE <font color="#800000">#2</font><font color="#000080">:

    </font>Integrate COMMENT detection into the get_Char routine<font color="#000080">, </font>so that
    when your Character fetching routine will ignore comments <font color="#FF0000"><b>and
    </b></font>pass a blank when a comment <font color="#FF0000"><b>is </b></font>encountered<font color="#000080">, </font>skipping the comment
    entirely <font color="#FF0000"><b>For </b></font>the next fetch<font color="#000080">.

    </font>Make sure that the routine keeps reading <font color="#FF0000"><b>Until </b></font>the right curly
    brace <font color="#FF0000"><b>is </b></font>detected<font color="#000080">, </font>even past the <font color="#FF0000"><b>end</b></font><font color="#000080">-</font><font color="#FF0000"><b>of</b></font><font color="#000080">-</font>line<font color="#000080">. </font><font color="#FF0000"><b>if </b></font>the <font color="#FF0000"><b>end</b></font><font color="#000080">-</font><font color="#FF0000"><b>of</b></font><font color="#000080">-</font><font color="#FF0000"><b>File
    is </b></font>encountered beFore the right curly brace <font color="#FF0000"><b>is </b></font>found<font color="#000080">, </font>an
    <font color="#000080">&quot;</font>unexpected <font color="#FF0000"><b>end</b></font><font color="#000080">&quot; </font>error should be generated<font color="#000080">.

    </font>PARSinG StringS <font color="#000080">(</font>QUOTES<font color="#000080">) </font><font color="#800000">''

    </font>The quote Character delimits Strings<font color="#000080">, </font>any Character between the
    Strings <font color="#FF0000"><b>is </b></font>ignored by the Compiler<font color="#000080">, </font><font color="#FF0000"><b>except to </b></font>stored <font color="#FF0000"><b>as </b></font>a <font color="#FF0000"><b>String
    </b></font>LITERAL<font color="#000080">. </font><font color="#FF0000"><b>if </b></font>you wish a <font color="#800000">' (quote) to be included in the literal,
    </font><font color="#FF0000"><b>and </b></font>extra <font color="#800000">' must precede it.

    </font>One possible tricky area <font color="#FF0000"><b>is </b></font>the <font color="#008000"><i>{} </i></font><font color="#000080">(</font>comment<font color="#000080">) </font>Character<font color="#000080">. </font>You must
    be careful <font color="#FF0000"><b>not to </b></font>inadvertently trigger the comment routine within
    the quote routine <font color="#FF0000"><b>While </b></font>reading a <font color="#FF0000"><b>String</b></font><font color="#000080">, </font>otherwise you will
    have a BUG<font color="#000080">.

    </font>EXERCISE <font color="#800000">#3</font><font color="#000080">:

    </font>Add a quote routine <font color="#FF0000"><b>to </b></font>the get_token routine within your module<font color="#000080">,
    </font><font color="#FF0000"><b>to </b></font>fetch Strings<font color="#000080">, </font><font color="#FF0000"><b>as </b></font>a LITERAL IDENTifIER when the QUOTE
    Character <font color="#FF0000"><b>is </b></font>detected<font color="#000080">.

    </font>The following mods <font color="#FF0000"><b>to </b></font>your Types are required<font color="#000080">:

    </font>Eof_Char <font color="#000080">= </font><font color="#800000">#$7F</font><font color="#000080">;

</font><font color="#FF0000"><b>Type
  </b></font>Char_CODE  <font color="#000080">= (</font>LETTER<font color="#000080">, </font>DIGIT<font color="#000080">, </font>QUOTE<font color="#000080">, </font>SPECIAL<font color="#000080">, </font>Eof_CODE<font color="#000080">);

 </font><font color="#008000"><i>{  The following code init's the Character maping table:  }

</i></font><font color="#FF0000"><b>Var
   </b></font>ch <font color="#000080">:</font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
   For </b></font>ch <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do
      </b></font>Char_table<font color="#000080">[</font>ch<font color="#000080">] := </font>SPECIAL<font color="#000080">;
   </font><font color="#FF0000"><b>For </b></font>ch <font color="#000080">:= </font>ord<font color="#000080">(</font><font color="#800000">'0'</font><font color="#000080">) </font><font color="#FF0000"><b>to </b></font>ord<font color="#000080">(</font><font color="#800000">'9'</font><font color="#000080">) </font><font color="#FF0000"><b>do
      </b></font>Char_table<font color="#000080">[</font>ch<font color="#000080">] := </font>DIGIT<font color="#000080">;

   </font><font color="#FF0000"><b>For </b></font>ch <font color="#000080">:= </font>ord<font color="#000080">(</font><font color="#800000">'A'</font><font color="#000080">) </font><font color="#FF0000"><b>to </b></font>ord<font color="#000080">(</font><font color="#800000">'Z'</font><font color="#000080">) </font><font color="#FF0000"><b>do
      </b></font>Char_table<font color="#000080">[</font>ch<font color="#000080">] := </font>LETTER<font color="#000080">;
   </font><font color="#FF0000"><b>For </b></font>ch <font color="#000080">:= </font>ord<font color="#000080">(</font><font color="#800000">'a'</font><font color="#000080">) </font><font color="#FF0000"><b>to </b></font>ord<font color="#000080">(</font><font color="#800000">'z'</font><font color="#000080">) </font><font color="#FF0000"><b>do
      </b></font>Char_table<font color="#000080">[</font>ch<font color="#000080">] := </font>LETTER<font color="#000080">;

   </font>Char_table<font color="#000080">[</font>ord<font color="#000080">(</font>Eof_Char<font color="#000080">)] := </font>Eof_CODE<font color="#000080">;

   </font>Char_table<font color="#000080">[</font><font color="#800000">39</font><font color="#000080">] := </font>QUOTE<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

    ----------------------------------------------------------------

    </font>PLEASE<font color="#000080">, </font>please let me know what you think about these posts<font color="#000080">,
    </font>even <font color="#FF0000"><b>if </b></font>they<font color="#800000">'re negative - I want to have some feedback on the
    </font>difficulties<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>whether <font color="#FF0000"><b>or not </b></font>people are having trouble
    following the material <font color="#000080">- </font>I _can_ be more concise at the cost <font color="#FF0000"><b>of
    </b></font>being more verbose <font color="#000080">- </font><font color="#FF0000"><b>if </b></font>it<font color="#800000">'s needed!

    </font><font color="#FF0000"><b>if </b></font>you are having problems <font color="#FF0000"><b>With </b></font>your source code<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>want me <font color="#FF0000"><b>to
    do </b></font>a detailed examination <font color="#FF0000"><b>of </b></font>your code<font color="#000080">, </font>expecially <font color="#FF0000"><b>if </b></font>it<font color="#800000">'s
    </font>written <font color="#FF0000"><b>in </b></font>a language other than <font color="#FF0000"><b>Pascal</b></font><font color="#000080">, </font>send me email via the
    Internet <font color="#000080">- </font><font color="#FF0000"><b>to </b></font>avoid <font color="#000080">&quot;</font>carpet bombing<font color="#000080">&quot; </font>the conference <font color="#FF0000"><b>with
    </b></font>undesired material<font color="#000080">.


    </font>NEXT POST<font color="#000080">:

    </font>Error codes<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>putting your code <font color="#FF0000"><b>to </b></font>the test <font color="#000080">- </font>our first
    utility <font color="#000080">(</font>other than the lister<font color="#000080">) : </font>a source <font color="#FF0000"><b>Program </b></font>Compactor
    <font color="#000080">(</font><font color="#FF0000"><b>not </b></font>cruncher<font color="#000080">).

    </font>FUTURE POSTS<font color="#000080">:

    - </font>Review <font color="#FF0000"><b>and </b></font><font color="#000080">(</font>hopefully<font color="#000080">) </font>a status report from <font color="#000080">&quot;</font>students<font color="#000080">&quot;
    - </font>Symbol table
    <font color="#000080">- </font>YA utility <font color="#000080">(</font>cross <font color="#000080">- </font>referencer<font color="#000080">)
    - </font>YA utility <font color="#000080">(</font>source <font color="#FF0000"><b>Program </b></font>CRUNCHer<font color="#000080">)
    - </font>YA utility <font color="#000080">(</font>source <font color="#FF0000"><b>Program </b></font>UNcruncher<font color="#000080">)
    - </font>Parsing simple expressions
    <font color="#000080">- </font>Utility <font color="#000080">: </font>CALC<font color="#000080">, </font>using infix<font color="#000080">-</font><font color="#FF0000"><b>to</b></font><font color="#000080">-</font>postfix conversions <font color="#FF0000"><b>and </b></font>stack
      ops<font color="#000080">.
    - </font>Parsing statements
    <font color="#000080">- </font>Utility<font color="#000080">: </font><font color="#FF0000"><b>Pascal </b></font>syntax checker part I
    <font color="#000080">- </font>Parsing declarations <font color="#000080">(</font><font color="#FF0000"><b>Var</b></font><font color="#000080">, </font><font color="#FF0000"><b>Type</b></font><font color="#000080">, </font>etc<font color="#000080">)
      </font>incl<font color="#800000">'s: much improved (and much more Complex) symbol table
    </font><font color="#000080">- </font>Utility<font color="#000080">: </font>Declarations analyzer<font color="#000080">.
    - </font>Syntax Checker part II
    <font color="#000080">- </font>Parsing <font color="#FF0000"><b>Program</b></font><font color="#000080">, </font><font color="#FF0000"><b>Procedure</b></font><font color="#000080">, </font><font color="#FF0000"><b>and Function </b></font>declarations
      <font color="#000080">(</font>routines<font color="#000080">).
    - </font>Syntax checker Part III

    <font color="#000080">- </font>Review <font color="#FF0000"><b>and </b></font>discussion<font color="#000080">?
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to PARSING SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0001.PAS">Original</a><b>]</b></p></body>
</html>
