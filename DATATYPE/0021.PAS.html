<html>
<head><title> "Card Shuffling" by JOHN HOWARD</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to DATATYPE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0021.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>program </b></font>CardGame<font color="#000080">;
</font><font color="#008000"><i>{ Author: John Howard  jh
  Date: 08-SEP-94
  Version: 1.0
  Demonstrate two methods to shuffle cards.  Swap method is fast!
  Demonstrate how to evaluate Bridge hands:
    Each hand of 13 cards are arranged by suits and rank within suit (aces are
    high).  The hand is then evaluated using the following standard bridge
    values.

   Aces count 4
   Kings count 3
   Queens count 2
   Jacks count 1
   Voids (no cards in a suit) count 3
   Singletons (one card in a suit) count 2
   Doubletons (two cards in a suit) count 1
   Long suits with more than five cards in the suit
      count 1 for each card over five in number

   Example: 2C QD TC AD 6C 3D TD 3H 5H 7H AS JH KH = 16 points
   because there are 2 aces, 1 king, 1 queen, 1 jack, 1 singleton.
}
{$DEFINE BridgeHand}
</i></font><font color="#FF0000"><b>const
</b></font><font color="#008000"><i>{$IFDEF BridgeHand}
   </i></font>points <font color="#000080">: </font>integer <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">;
</font><font color="#008000"><i>{$ENDIF}
   </i></font>maxdeck <font color="#000080">= </font><font color="#800000">52</font><font color="#000080">;
   </font>maxsuit <font color="#000080">= </font><font color="#800000">13</font><font color="#000080">;
   </font>sentinel <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">;
   </font>suits <font color="#000080">= </font><font color="#800000">4</font><font color="#000080">;

</font><font color="#FF0000"><b>type
   </b></font>card <font color="#000080">= </font>byte<font color="#000080">;
   </font>suit <font color="#000080">= </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font>maxsuit<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>card<font color="#000080">;    </font><font color="#008000"><i>{ ace rank is 1, king rank is 13 }

</i></font><font color="#FF0000"><b>var
   </b></font>hearts<font color="#000080">, </font>diamonds <font color="#000080">: </font>suit<font color="#000080">;       </font><font color="#008000"><i>{red}
   </i></font>clubs<font color="#000080">, </font>spades <font color="#000080">: </font>suit<font color="#000080">;          </font><font color="#008000"><i>{black}
   </i></font>deck <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font>maxdeck<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>card<font color="#000080">;
   </font>i<font color="#000080">, </font>j<font color="#000080">, </font>k <font color="#000080">: </font>integer<font color="#000080">;             </font><font color="#008000"><i>{ indices }
   </i></font>count <font color="#000080">: </font>integer<font color="#000080">;               </font><font color="#008000"><i>{ count of used cards }

</i></font><font color="#FF0000"><b>procedure </b></font>swap<font color="#000080">(</font>a<font color="#000080">,</font>b <font color="#000080">: </font>integer<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>temp <font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>temp <font color="#000080">:= </font>deck<font color="#000080">[</font>a<font color="#000080">];
  </font>deck<font color="#000080">[</font>a<font color="#000080">] := </font>deck<font color="#000080">[</font>b<font color="#000080">];
  </font>deck<font color="#000080">[</font>b<font color="#000080">] := </font>temp<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>BEGIN  </b></font><font color="#008000"><i>{main}
  </i></font>writeln<font color="#000080">(</font><font color="#800000">'method one -  random swap.  Absolutely the fastest!'</font><font color="#000080">);
  </font>randomize<font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>maxdeck <font color="#FF0000"><b>do        </b></font><font color="#008000"><i>{initialize deck}
    </i></font>deck<font color="#000080">[</font>i<font color="#000080">] := </font>i<font color="#000080">;                 </font><font color="#008000"><i>{ Card number MODULO 13 will help to rank }

  </i></font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>maxdeck <font color="#FF0000"><b>do        </b></font><font color="#008000"><i>{index card deck}
    </i></font><font color="#FF0000"><b>begin
      </b></font>j <font color="#000080">:= </font>random<font color="#000080">(</font>maxdeck<font color="#000080">) +</font><font color="#800000">1</font><font color="#000080">;    </font><font color="#008000"><i>{ range is 1..52 }
      </i></font>SWAP<font color="#000080">(</font>i<font color="#000080">, </font>j<font color="#000080">);                 </font><font color="#008000"><i>{ shuffle two cards }
    </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>maxdeck <font color="#FF0000"><b>do        </b></font><font color="#008000"><i>{index card deck}
    </i></font>write<font color="#000080">(</font>deck<font color="#000080">[</font>i<font color="#000080">], </font><font color="#800000">' '</font><font color="#000080">);          </font><font color="#008000"><i>{ display card order }
  </i></font>writeln<font color="#000080">;

  </font>writeln<font color="#000080">(</font><font color="#800000">'method two -  rank each card.  Theoretically may take forever!'</font><font color="#000080">);
  </font>randomize<font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>maxdeck <font color="#FF0000"><b>do        </b></font><font color="#008000"><i>{initialize deck}
    </i></font>deck<font color="#000080">[</font>i<font color="#000080">] := </font>sentinel<font color="#000080">;          </font><font color="#008000"><i>{ Zero is our sentinel }

  </i></font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>maxsuit <font color="#FF0000"><b>do        </b></font><font color="#008000"><i>{initialize suits with their card numbers}
    </i></font><font color="#FF0000"><b>begin
      </b></font>hearts<font color="#000080">[</font>i<font color="#000080">]   := </font>i<font color="#000080">;              </font><font color="#008000"><i>{ range is  1..13 }
      </i></font>diamonds<font color="#000080">[</font>i<font color="#000080">] := </font>i <font color="#000080">+ </font>maxsuit<font color="#000080">;    </font><font color="#008000"><i>{ range is 14..26 }
      </i></font>clubs<font color="#000080">[</font>i<font color="#000080">]    := </font>i <font color="#000080">+ </font><font color="#800000">2</font><font color="#000080">*</font>maxsuit<font color="#000080">;  </font><font color="#008000"><i>{ range is 27..39 }
      </i></font>spades<font color="#000080">[</font>i<font color="#000080">]   := </font>i <font color="#000080">+ </font><font color="#800000">3</font><font color="#000080">*</font>maxsuit<font color="#000080">;  </font><font color="#008000"><i>{ range is 40..52 }
    </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>count <font color="#000080">:= </font>maxdeck<font color="#000080">;
</font><font color="#008000"><i>{$IFDEF BridgeHand}
  </i></font>count <font color="#000080">:= </font>maxsuit<font color="#000080">;
</font><font color="#008000"><i>{$ENDIF}
  </i></font><font color="#FF0000"><b>repeat
  </b></font>i <font color="#000080">:= </font>random<font color="#000080">(</font>maxdeck<font color="#000080">) +</font><font color="#800000">1</font><font color="#000080">;        </font><font color="#008000"><i>{ range is 1..52 }
  </i></font><font color="#FF0000"><b>if </b></font>deck<font color="#000080">[</font>i<font color="#000080">] = </font>sentinel <font color="#FF0000"><b>then
    begin
      </b></font>j <font color="#000080">:= </font>random<font color="#000080">(</font>maxsuit<font color="#000080">) +</font><font color="#800000">1</font><font color="#000080">;    </font><font color="#008000"><i>{ range is 1..13 }
      </i></font>k <font color="#000080">:= </font>random<font color="#000080">(</font>suits<font color="#000080">) +</font><font color="#800000">1</font><font color="#000080">;      </font><font color="#008000"><i>{ range is 1..4 }
      </i></font><font color="#FF0000"><b>case </b></font>k <font color="#FF0000"><b>of
        </b></font><font color="#800000">1 </font><font color="#000080">:
              </font><font color="#FF0000"><b>if </b></font>hearts<font color="#000080">[</font>j<font color="#000080">] &lt;&gt; </font>sentinel <font color="#FF0000"><b>then
                begin
                  </b></font>hearts<font color="#000080">[</font>j<font color="#000080">] := </font>sentinel<font color="#000080">;
                  </font>deck<font color="#000080">[</font>i<font color="#000080">] := </font>j<font color="#000080">;
                  </font>dec<font color="#000080">(</font>count<font color="#000080">);
                </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
        </font><font color="#800000">2 </font><font color="#000080">:
              </font><font color="#FF0000"><b>if </b></font>diamonds<font color="#000080">[</font>j<font color="#000080">] &lt;&gt; </font>sentinel <font color="#FF0000"><b>then
                begin
                  </b></font>diamonds<font color="#000080">[</font>j<font color="#000080">] := </font>sentinel<font color="#000080">;
                  </font>deck<font color="#000080">[</font>i<font color="#000080">] := </font>j<font color="#000080">+ </font>maxsuit<font color="#000080">;
                  </font>dec<font color="#000080">(</font>count<font color="#000080">);
                </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
        </font><font color="#800000">3 </font><font color="#000080">:
              </font><font color="#FF0000"><b>if </b></font>clubs<font color="#000080">[</font>j<font color="#000080">] &lt;&gt; </font>sentinel <font color="#FF0000"><b>then
                begin
                  </b></font>clubs<font color="#000080">[</font>j<font color="#000080">] := </font>sentinel<font color="#000080">;
                  </font>deck<font color="#000080">[</font>i<font color="#000080">] := </font>j<font color="#000080">+ </font><font color="#800000">2</font><font color="#000080">*</font>maxsuit<font color="#000080">;
                  </font>dec<font color="#000080">(</font>count<font color="#000080">);
                </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
        </font><font color="#800000">4 </font><font color="#000080">:
              </font><font color="#FF0000"><b>if </b></font>spades<font color="#000080">[</font>j<font color="#000080">] &lt;&gt; </font>sentinel <font color="#FF0000"><b>then
                begin
                  </b></font>spades<font color="#000080">[</font>j<font color="#000080">] := </font>sentinel<font color="#000080">;
                  </font>deck<font color="#000080">[</font>i<font color="#000080">] := </font>j<font color="#000080">+ </font><font color="#800000">3</font><font color="#000080">*</font>maxsuit<font color="#000080">;
                  </font>dec<font color="#000080">(</font>count<font color="#000080">);
                </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{case}
    </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>until </b></font><font color="#000080">(</font>count <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">);

  </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>maxdeck <font color="#FF0000"><b>do        </b></font><font color="#008000"><i>{index card deck}
    </i></font>write<font color="#000080">(</font>deck<font color="#000080">[</font>i<font color="#000080">], </font><font color="#800000">' '</font><font color="#000080">);          </font><font color="#008000"><i>{ display card order }
  </i></font>writeln<font color="#000080">;

</font><font color="#008000"><i>{$IFDEF BridgeHand}
{ Only block for Hearts is shown.  Code is similar for each suit! }
  </i></font>count <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>hearts<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]  = </font>sentinel <font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>points<font color="#000080">, </font><font color="#800000">4</font><font color="#000080">);      </font><font color="#008000"><i>{ ace }
  </i></font><font color="#FF0000"><b>if </b></font>hearts<font color="#000080">[</font><font color="#800000">13</font><font color="#000080">] = </font>sentinel <font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>points<font color="#000080">, </font><font color="#800000">3</font><font color="#000080">);      </font><font color="#008000"><i>{ king }
  </i></font><font color="#FF0000"><b>if </b></font>hearts<font color="#000080">[</font><font color="#800000">12</font><font color="#000080">] = </font>sentinel <font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>points<font color="#000080">, </font><font color="#800000">2</font><font color="#000080">);      </font><font color="#008000"><i>{ queen }
  </i></font><font color="#FF0000"><b>if </b></font>hearts<font color="#000080">[</font><font color="#800000">11</font><font color="#000080">] = </font>sentinel <font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>points<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);      </font><font color="#008000"><i>{ jack }
  </i></font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>maxsuit <font color="#FF0000"><b>do
     if </b></font>hearts<font color="#000080">[</font>i<font color="#000080">] = </font>sentinel <font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>count<font color="#000080">);
  </font><font color="#FF0000"><b>case </b></font>count <font color="#FF0000"><b>of
     </b></font><font color="#800000">0</font><font color="#000080">: </font>inc<font color="#000080">(</font>points<font color="#000080">, </font><font color="#800000">3</font><font color="#000080">);                              </font><font color="#008000"><i>{ void }
     </i></font><font color="#800000">1</font><font color="#000080">: </font>inc<font color="#000080">(</font>points<font color="#000080">, </font><font color="#800000">2</font><font color="#000080">);                              </font><font color="#008000"><i>{ singleton }
     </i></font><font color="#800000">2</font><font color="#000080">: </font>inc<font color="#000080">(</font>points<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);                              </font><font color="#008000"><i>{ doubleton }
     </i></font><font color="#800000">6</font><font color="#000080">..</font><font color="#800000">13</font><font color="#000080">: </font>inc<font color="#000080">(</font>points<font color="#000080">, </font>count<font color="#000080">-</font><font color="#800000">5</font><font color="#000080">);                    </font><font color="#008000"><i>{ long suit }
  </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{case}
  </i></font>writeln<font color="#000080">(</font><font color="#800000">'Points for Hearts = '</font><font color="#000080">, </font>points<font color="#000080">);
</font><font color="#008000"><i>{$ENDIF}
</i></font><font color="#FF0000"><b>END</b></font><font color="#000080">. </font><font color="#008000"><i>{program}
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to DATATYPE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0021.PAS">Original</a><b>]</b></p></body>
</html>
