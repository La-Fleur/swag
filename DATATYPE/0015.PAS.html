<html>
<head><title> "Double Words" by MARK OUELLET</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to DATATYPE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0015.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt; I'm trying to read a record from a file of byte. One of the variables in
&gt; read is the record is a 4 byte unsigned integer (DWORD). Since the
&gt; filetype doesn't allow me to read a dword at once I have to construct it
&gt; myself.
&gt; Could somebody please tell me how to construct my dword?

Type
  DWORD = record
    case byte of
      0 : (Full : longint);
      1 : (HiWord, LoWord : word);
      2 : (Hw_HiByte, Hw_LoByte, Lw_HiByte, Lw_LoByte : byte);
      3 : (FourBytes : array[0..3] of byte);
    end;

Here is an example:
}

{$A+,B-,D+,E-,F+,G+,I+,L+,N+,O+,P+,Q+,R+,S+,T+,V-,X+,Y+}
{$M 1024,0,655360}
</i></font><font color="#FF0000"><b>uses
  </b></font>crt<font color="#000080">;

</font><font color="#FF0000"><b>Type
  </b></font>DWord <font color="#000080">= </font><font color="#FF0000"><b>record
    case </b></font>byte <font color="#FF0000"><b>of
      </b></font><font color="#800000">0 </font><font color="#000080">: (</font>Full <font color="#000080">: </font>longint<font color="#000080">);
      </font><font color="#800000">1 </font><font color="#000080">: (</font>HiWord<font color="#000080">, </font>LoWord <font color="#000080">: </font>word<font color="#000080">);
      </font><font color="#800000">2 </font><font color="#000080">: (</font>Hw_HiByte<font color="#000080">, </font>Hw_LoByte<font color="#000080">, </font>Lw_HiByte<font color="#000080">, </font>Lw_LoByte <font color="#000080">: </font>byte<font color="#000080">);
      </font><font color="#800000">3 </font><font color="#000080">: (</font>FourBytes <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">3</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">);
      </font><font color="#800000">4 </font><font color="#000080">: (</font>TwoWords <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">1</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>word<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>var
        </b></font>F       <font color="#000080">: </font><font color="#FF0000"><b>file of </b></font>longint<font color="#000080">;
  </font>B       <font color="#000080">: </font><font color="#FF0000"><b>file of </b></font>byte<font color="#000080">;
  </font>MyDword <font color="#000080">: </font>Dword<font color="#000080">;
  </font>MyLong  <font color="#000080">: </font>longint<font color="#000080">;
  </font>MyWord  <font color="#000080">: </font>word<font color="#000080">;
  </font>MyByte<font color="#000080">,
  </font>Index   <font color="#000080">: </font>byte<font color="#000080">;

</font><font color="#FF0000"><b>begin
        </b></font>clrscr<font color="#000080">;
        </font>assign<font color="#000080">(</font>F<font color="#000080">, </font><font color="#800000">'MyLong.dat'</font><font color="#000080">);
  </font>rewrite<font color="#000080">(</font>F<font color="#000080">);
  </font>MyLong <font color="#000080">:= </font><font color="#800000">$12345678</font><font color="#000080">;
  </font>write<font color="#000080">(</font>F<font color="#000080">, </font>MyLong<font color="#000080">);
  </font>MyLong <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>Close<font color="#000080">(</font>F<font color="#000080">);
  </font>assign<font color="#000080">(</font>B<font color="#000080">, </font><font color="#800000">'MyLong.dat'</font><font color="#000080">);
  </font>reset<font color="#000080">(</font>B<font color="#000080">);
  </font>Seek<font color="#000080">(</font>B<font color="#000080">, </font><font color="#800000">0</font><font color="#000080">);  </font><font color="#008000"><i>{ Go back to first record in file}
  </i></font><font color="#FF0000"><b>for </b></font>Index <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">3 </font><font color="#FF0000"><b>do
                </b></font>read<font color="#000080">(</font>B<font color="#000080">, </font>MyDword<font color="#000080">.</font>Fourbytes<font color="#000080">[</font>Index<font color="#000080">]);
  </font>writeln<font color="#000080">(</font><font color="#800000">$12345678</font><font color="#000080">);
        </font>writeln<font color="#000080">(</font>MyDword<font color="#000080">.</font>Full<font color="#000080">);
  </font>writeln<font color="#000080">;
  </font>writeln<font color="#000080">(</font>MyDword<font color="#000080">.</font>HiWord<font color="#000080">);
  </font>writeln<font color="#000080">(</font>MyDword<font color="#000080">.</font>LoWord<font color="#000080">);
        </font>writeln<font color="#000080">;
  </font>writeln<font color="#000080">(</font>MyDword<font color="#000080">.</font>Hw_HiByte<font color="#000080">);
  </font>writeln<font color="#000080">(</font>MyDword<font color="#000080">.</font>Hw_LoByte<font color="#000080">);
  </font>writeln<font color="#000080">(</font>MyDword<font color="#000080">.</font>Lw_HiByte<font color="#000080">);
  </font>writeln<font color="#000080">(</font>MyDword<font color="#000080">.</font>Lw_LoByte<font color="#000080">);
        </font>writeln<font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>Index <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">3 </font><font color="#FF0000"><b>do
          </b></font>writeln<font color="#000080">(</font>MyDword<font color="#000080">.</font>FourBytes<font color="#000080">[</font>Index<font color="#000080">]);
  </font>writeln<font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>Index <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">1 </font><font color="#FF0000"><b>do
          </b></font>writeln<font color="#000080">(</font>MyDword<font color="#000080">.</font>TwoWords<font color="#000080">[</font>Index<font color="#000080">]);

  </font>Close<font color="#000080">(</font>B<font color="#000080">);
  </font>reset<font color="#000080">(</font>F<font color="#000080">);
  </font><font color="#FF0000"><b>while </b></font>keypressed <font color="#FF0000"><b>do </b></font>readkey<font color="#000080">;
        </font>readkey<font color="#000080">;
  </font>Seek<font color="#000080">(</font>F<font color="#000080">, </font><font color="#800000">0</font><font color="#000080">);  </font><font color="#008000"><i>{ Go back to first record in file}
        </i></font>read<font color="#000080">(</font>F<font color="#000080">, </font>MyDword<font color="#000080">.</font>Full<font color="#000080">);
  </font>ClrScr<font color="#000080">;
  </font>writeln<font color="#000080">(</font><font color="#800000">$12345678</font><font color="#000080">);
        </font>writeln<font color="#000080">(</font>MyDword<font color="#000080">.</font>Full<font color="#000080">);
  </font>writeln<font color="#000080">;
  </font>writeln<font color="#000080">(</font>MyDword<font color="#000080">.</font>HiWord<font color="#000080">);
  </font>writeln<font color="#000080">(</font>MyDword<font color="#000080">.</font>LoWord<font color="#000080">);
        </font>writeln<font color="#000080">;
  </font>writeln<font color="#000080">(</font>MyDword<font color="#000080">.</font>Hw_HiByte<font color="#000080">);
  </font>writeln<font color="#000080">(</font>MyDword<font color="#000080">.</font>Hw_LoByte<font color="#000080">);
  </font>writeln<font color="#000080">(</font>MyDword<font color="#000080">.</font>Lw_HiByte<font color="#000080">);
  </font>writeln<font color="#000080">(</font>MyDword<font color="#000080">.</font>Lw_LoByte<font color="#000080">);
        </font>writeln<font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>Index <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">3 </font><font color="#FF0000"><b>do
          </b></font>writeln<font color="#000080">(</font>MyDword<font color="#000080">.</font>FourBytes<font color="#000080">[</font>Index<font color="#000080">]);
  </font>writeln<font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>Index <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">1 </font><font color="#FF0000"><b>do
          </b></font>writeln<font color="#000080">(</font>MyDword<font color="#000080">.</font>TwoWords<font color="#000080">[</font>Index<font color="#000080">]);
  </font>close<font color="#000080">(</font>F<font color="#000080">);
  </font><font color="#FF0000"><b>while </b></font>keypressed <font color="#FF0000"><b>do </b></font>readkey<font color="#000080">;
        </font>readkey<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font><font color="#008000"><i>{
Compiled and Tested with BP 7.x

It will, write a file of Longint, write 12345678 Hex to it, read it as a
file of byte, display most representation of it, then close it and
reopen it as a file of LongInt again read one longint and again display
the representations of it.

PS. There is a pause after the first display (Read as a file of bytes),
any key presents the second display (Read as a file of bytes), and
another pause to allow you to see that it does display the same thing.
Any key then terminates the program.
}</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to DATATYPE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0015.PAS">Original</a><b>]</b></p></body>
</html>
