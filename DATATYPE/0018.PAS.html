<html>
<head><title> "Variable Number Parameter" by JANOS SZAMOSFALVI</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to DATATYPE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0018.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
|&sup3;-&gt; You can allocate some memory and put all your parameters there, then
|&sup3;-&gt; pass a pointer which points to this memory block.  You have to
|&sup3;-&gt; setup some convention if you want to pass different types, or
|&sup3;-&gt; parameters with different length.
|&sup3;
|&sup3;Well how do I do that in Pascal- I really think that I might be better
|&sup3;off making the function in C and then compiling it out to an object file
|&sup3;and then linking it into pascal

Mixed language programming is tricky and difficult unless the
compilers explicitely support it.

|&sup3;but I am not sure that that will even
|&sup3;work I might just abandon Pascal and learn C

Good luck!  &lt;evil grin&gt;

|&sup3;(even though the SYNTAX rules for C are based on Pascal anyhow)
                                          ^^^^^^^^^^^^^^^
Hmmmm.....

Anyway, here's a quick and dirty example (untested) about passing
pointers and variable # of parameters.
}
</i></font><font color="#FF0000"><b>PROGRAM </b></font>Pass_Pointer<font color="#000080">;     </font><font color="#008000"><i>{Compiled with TP _3.01A_}

</i></font><font color="#FF0000"><b>TYPE
   </b></font>Short_String <font color="#000080">= </font><font color="#FF0000"><b>STRING</b></font><font color="#000080">[</font><font color="#800000">15</font><font color="#000080">];

</font><font color="#FF0000"><b>CONST
   </b></font>max_count  <font color="#000080">= </font><font color="#800000">13</font><font color="#000080">;
   </font>terminator <font color="#000080">: </font>Short_String <font color="#000080">= </font><font color="#800000">#0#0#0#0#0#0#0#0#0#0#0#0#0#0#0</font><font color="#000080">;

</font><font color="#FF0000"><b>TYPE
   </b></font>String_Array <font color="#000080">= </font><font color="#FF0000"><b>ARRAY </b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font>max_count<font color="#000080">] </font><font color="#FF0000"><b>OF </b></font>Short_String<font color="#000080">;
   </font>Pointer <font color="#000080">= ^</font>String_Array<font color="#000080">;

</font><font color="#FF0000"><b>VAR
   </b></font>star <font color="#000080">: </font>Pointer<font color="#000080">;
   </font>sstr <font color="#000080">: </font>Short_String<font color="#000080">;
   </font>count<font color="#000080">, </font>i <font color="#000080">: </font>INTEGER<font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>Receiver <font color="#000080">(</font>P <font color="#000080">: </font>pointer<font color="#000080">);
</font><font color="#FF0000"><b>BEGIN
   </b></font>i <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
   </font><font color="#FF0000"><b>WHILE </b></font><font color="#000080">(</font>P<font color="#000080">^[</font>i<font color="#000080">] &lt;&gt; </font>terminator<font color="#000080">) </font><font color="#FF0000"><b>AND </b></font><font color="#000080">(</font>i <font color="#000080">&lt; </font>max_count<font color="#000080">) </font><font color="#FF0000"><b>DO BEGIN
      </b></font>writeln<font color="#000080">(</font>P<font color="#000080">^[</font>i<font color="#000080">]);
      </font>i <font color="#000080">:= </font>i <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
   </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>BEGIN
   </b></font>count <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
   </font>New <font color="#000080">(</font>star<font color="#000080">);
   </font><font color="#FF0000"><b>REPEAT
      </b></font>write<font color="#000080">(</font><font color="#800000">'Enter a short string: '</font><font color="#000080">);
      </font>readln<font color="#000080">(</font>sstr<font color="#000080">);
      </font>star<font color="#000080">^[</font>count<font color="#000080">] := </font>sstr<font color="#000080">;
      </font>count <font color="#000080">:= </font>count <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
   </font><font color="#FF0000"><b>UNTIL </b></font><font color="#000080">(</font>sstr <font color="#000080">= </font><font color="#800000">''</font><font color="#000080">) </font><font color="#FF0000"><b>OR </b></font><font color="#000080">(</font>count <font color="#000080">&gt;= </font>max_count<font color="#000080">);

   </font><font color="#FF0000"><b>IF </b></font>count <font color="#000080">&lt; </font>max_count <font color="#FF0000"><b>THEN
      </b></font>star<font color="#000080">^[</font>count <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">] := </font>terminator<font color="#000080">;

   </font>Receiver<font color="#000080">(</font>star<font color="#000080">);
</font><font color="#FF0000"><b>END</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to DATATYPE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0018.PAS">Original</a><b>]</b></p></body>
</html>
