<html>
<head><title> "Detect EMS/XMS" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to MEMORY SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0020.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#000080">===========================================================================
 </font>BBS<font color="#000080">: </font>Canada Remote Systems
Date<font color="#000080">: </font><font color="#800000">06</font><font color="#000080">-</font><font color="#800000">12</font><font color="#000080">-</font><font color="#800000">93 </font><font color="#000080">(</font><font color="#800000">09</font><font color="#000080">:</font><font color="#800000">36</font><font color="#000080">)             </font>Number<font color="#000080">: </font><font color="#800000">26301
</font>From<font color="#000080">: </font>CHRIS JANTZEN                Refer<font color="#800000">#</font><font color="#000080">: </font>NONE
  <font color="#FF0000"><b>To</b></font><font color="#000080">: </font>WILLIAM SITCH                 Recvd<font color="#000080">: </font>NO  
Subj<font color="#000080">: </font>RE<font color="#000080">: </font>DETECTING EMS<font color="#000080">/</font>XMS          Conf<font color="#000080">: (</font><font color="#800000">1221</font><font color="#000080">) </font>F<font color="#000080">-</font><font color="#FF0000"><b>PASCAL
</b></font><font color="#000080">---------------------------------------------------------------------------
</font><font color="#FF0000"><b>On </b></font>Thursday June <font color="#800000">10 1993</font><font color="#000080">, </font>William Sitch wrote <font color="#FF0000"><b>to </b></font>All<font color="#000080">:

 </font>WS<font color="#000080">&gt; </font>Does anyone know how <font color="#FF0000"><b>to </b></font>detect XMS<font color="#000080">/</font>EMS<font color="#000080">?  </font>I<font color="#800000">'ve used something documented in
 </font>WS<font color="#000080">&gt; </font>my PC INTERRUPTS book<font color="#000080">, </font>but I can<font color="#800000">'t seem to get it to work.

</font>The following code was <font color="#000080">*</font>mostly<font color="#000080">* </font>right<font color="#000080">. </font>Go back <font color="#FF0000"><b>to </b></font>your original source <font color="#FF0000"><b>to
</b></font>compare the changes I made<font color="#000080">:

 </font><font color="#FF0000"><b>procedure </b></font>check_ems <font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>installed<font color="#000080">:</font>boolean<font color="#000080">; </font><font color="#FF0000"><b>VAR </b></font>ver<font color="#000080">,</font>ver2<font color="#000080">:</font>byte<font color="#000080">); </font><font color="#FF0000"><b>var
   </b></font>regs  <font color="#000080">:  </font>registers<font color="#000080">;
 </font><font color="#FF0000"><b>begin
   </b></font>regs<font color="#000080">.</font>ax <font color="#000080">:= </font><font color="#800000">$46</font><font color="#000080">;
   </font>intr<font color="#000080">(</font><font color="#800000">$67</font><font color="#000080">,</font>regs<font color="#000080">);
   </font>installed <font color="#000080">:= </font>regs<font color="#000080">.</font>ah <font color="#000080">= </font><font color="#800000">$00</font><font color="#000080">;
   </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>installed <font color="#000080">= </font>true<font color="#000080">) </font><font color="#FF0000"><b>then
     begin
       </b></font>ver <font color="#000080">:= </font>hi<font color="#000080">(</font>regs<font color="#000080">.</font>al<font color="#000080">);
       </font>ver2 <font color="#000080">:= </font>lo<font color="#000080">(</font>regs<font color="#000080">.</font>al<font color="#000080">);
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

 </font><font color="#FF0000"><b>procedure </b></font>check_xms <font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>installed<font color="#000080">:</font>boolean<font color="#000080">; </font><font color="#FF0000"><b>VAR </b></font>ver<font color="#000080">,</font>ver2<font color="#000080">:</font>byte<font color="#000080">); </font><font color="#FF0000"><b>var
   </b></font>regs  <font color="#000080">:  </font>registers<font color="#000080">;
 </font><font color="#FF0000"><b>begin
   </b></font>regs<font color="#000080">.</font>ax <font color="#000080">:= </font><font color="#800000">$4300</font><font color="#000080">;
   </font>intr<font color="#000080">(</font><font color="#800000">$2F</font><font color="#000080">,</font>regs<font color="#000080">);
   </font>installed <font color="#000080">:= </font>regs<font color="#000080">.</font>al <font color="#000080">= </font><font color="#800000">$80</font><font color="#000080">;
   </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>installed <font color="#000080">= </font>true<font color="#000080">) </font><font color="#FF0000"><b>then
     begin
       </b></font>regs<font color="#000080">.</font>ax <font color="#000080">:= </font><font color="#800000">$4310</font><font color="#000080">;
       </font>regs<font color="#000080">.</font>ah <font color="#000080">:= </font><font color="#800000">$00</font><font color="#000080">;
       </font>intr<font color="#000080">(</font><font color="#800000">$2F</font><font color="#000080">,</font>regs<font color="#000080">);
       </font>ver <font color="#000080">:= </font>regs<font color="#000080">.</font>ax<font color="#000080">;
       </font>ver2 <font color="#000080">:= </font>regs<font color="#000080">.</font>bx<font color="#000080">;
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

 </font>WS<font color="#000080">&gt; </font>I am pretty sure I<font color="#800000">'m calling the interrupts right, but it always returns
 </font>WS<font color="#000080">&gt; </font>false<font color="#000080">, </font>indicating that I <font color="#FF0000"><b>do NOT </b></font>have EMS<font color="#000080">/</font>XMS<font color="#000080">, </font>although I <font color="#FF0000"><b>do</b></font><font color="#000080">.  </font>Can anyone
 WS<font color="#000080">&gt; </font>help me <font color="#FF0000"><b>out</b></font><font color="#000080">?

</font>You were<font color="#000080">. </font>Mostly<font color="#000080">. </font>What you forgot was that when a real world book like PC
Interrupts says <font color="#000080">&quot;</font>Load the AX <font color="#FF0000"><b>register with </b></font>the value <font color="#800000">4300</font>h<font color="#000080">&quot;, </font>it means <font color="#FF0000"><b>to </b></font>us
<font color="#FF0000"><b>Pascal </b></font>programmers <font color="#000080">&quot;</font>Load the AX variable <font color="#FF0000"><b>with </b></font>the value <font color="#800000">$4300</font><font color="#000080">&quot;. </font>Note the dollar
sign<font color="#000080">. </font>That means hexadecimal <font color="#000080">(</font>like the little h <font color="#FF0000"><b>on </b></font>the <font color="#FF0000"><b>end </b></font>means hexadecimal <font color="#FF0000"><b>to
</b></font>assembly programmers<font color="#000080">).

</font>Chris KB7RNL <font color="#000080">=-&gt;

--- </font>GoldED <font color="#800000">2.41
 </font><font color="#000080">* </font>Origin<font color="#000080">: </font>SlugPoint <font color="#000080">* </font>Coos Bay<font color="#000080">, </font><font color="#FF0000"><b>OR </b></font>USA <font color="#000080">(</font><font color="#800000">1</font><font color="#000080">:</font><font color="#800000">356</font><font color="#000080">/</font><font color="#800000">18.2</font><font color="#000080">)
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to MEMORY SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0020.PAS">Original</a><b>]</b></p></body>
</html>
