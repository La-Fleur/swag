<html>
<head><title> "Compare areas of Memory" by RICHARD SADOWSKY</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to MEMORY SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0053.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{$R-,S-,V-}
{
**
**  CompMem - A routine to compare to areas of memory for equality
**  by Richard S. Sadowsky [74017,1670]
**  version 1.0  5/11/88
**  released to the public domain
**  requires file MEMCOMP.OBJ to recompile
**

}
</i></font><font color="#FF0000"><b>unit </b></font>MemComp<font color="#000080">;

</font><font color="#FF0000"><b>interface

function </b></font>CompMem<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>Block1<font color="#000080">,</font>Block2<font color="#000080">; </font>Size <font color="#000080">: </font>Word<font color="#000080">) : </font>Word<font color="#000080">;
</font><font color="#008000"><i>{ returns 0 if Block1 and Block2 are equal for Size bytes, otherwise }
{ returns position of first non matching byte }

</i></font><font color="#FF0000"><b>implementation

function </b></font>CompMem<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>Block1<font color="#000080">,</font>Block2<font color="#000080">; </font>Size <font color="#000080">: </font>Word<font color="#000080">) : </font>Word<font color="#000080">; </font><font color="#FF0000"><b>External</b></font><font color="#000080">;
</font><font color="#008000"><i>{$L memcomp.Obj}

</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font><font color="#008000"><i>{ ---------------------   XX3402 CODE --------------------- }
{ cut this out and save as MEMCOMP.XX  execute :
{    XX3402 D MEMCOMP.XX to create MEMCOMP.OBJ              }



</i></font><font color="#000080">*</font>XX3402<font color="#000080">-</font><font color="#800000">000108</font><font color="#000080">-</font><font color="#800000">110588</font><font color="#000080">--</font><font color="#800000">72</font><font color="#000080">--</font><font color="#800000">85</font><font color="#000080">-</font><font color="#800000">20839</font><font color="#000080">-----</font>MEMCOMP<font color="#000080">.</font>OBJ<font color="#000080">--</font><font color="#800000">1</font><font color="#000080">-</font><font color="#FF0000"><b>OF</b></font><font color="#000080">--</font><font color="#800000">1
</font>U<font color="#000080">+</font>o<font color="#000080">+</font><font color="#800000">0</font>qpZPKBjPL<font color="#000080">+</font>iEJBBOtM5<font color="#000080">+++</font><font color="#800000">2E</font>ox2FIGM<font color="#000080">-</font>k<font color="#000080">+</font>c7<font color="#000080">++</font><font color="#800000">0</font><font color="#000080">+</font>E2FY<font color="#000080">+</font>s<font color="#000080">+++</font><font color="#800000">25E</font>oxBI2p3HE<font color="#000080">+++</font><font color="#800000">2</font>m6
<font color="#000080">-+++</font>cU5Fc0U<font color="#000080">++</font>E<font color="#000080">++</font>WxmAqXD<font color="#000080">+</font>BchD<font color="#000080">-</font>CAHBgJr0XP2TkPwwuNo<font color="#000080">-</font>XO9FkEfkMvOmUc<font color="#000080">+</font><font color="#800000">9</font>sc0<font color="#000080">++-</font>o
<font color="#000080">***** </font><font color="#FF0000"><b>END OF </b></font>BLOCK <font color="#800000">1 </font><font color="#000080">*****

</font><font color="#008000"><i>{ -------------   TEST PROGRAM ---------------------  }

{$R-,S-}
</i></font><font color="#FF0000"><b>program </b></font>CompTest<font color="#000080">;
</font><font color="#FF0000"><b>uses </b></font>MemComp<font color="#000080">;

</font><font color="#FF0000"><b>type
  </b></font>Tipe <font color="#000080">= </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">128</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;

</font><font color="#FF0000"><b>var
  </b></font>Var1<font color="#000080">,</font>Var2 <font color="#000080">: </font>Tipe<font color="#000080">;
  </font>I<font color="#000080">,</font>CompRes <font color="#000080">: </font>Word<font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>FillChar<font color="#000080">(</font>var2<font color="#000080">,</font>SizeOf<font color="#000080">(</font>Tipe<font color="#000080">),</font><font color="#800000">0</font><font color="#000080">); </font><font color="#008000"><i>{ init Var2 to all zeros }
  </i></font><font color="#FF0000"><b>for </b></font>I <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">128  </font><font color="#FF0000"><b>do          </b></font><font color="#008000"><i>{ set var1 = 1 2 3 4 5 ... 128 }
    </i></font>Var1<font color="#000080">[</font>I<font color="#000080">] := </font>I<font color="#000080">;
  </font>CompRes <font color="#000080">:= </font>CompMem<font color="#000080">(</font>Var1<font color="#000080">,</font>Var2<font color="#000080">,</font><font color="#800000">128</font><font color="#000080">); </font><font color="#008000"><i>{ compare, should return first }
                                     { byte as non match }
  </i></font>WriteLn<font color="#000080">(</font><font color="#800000">'While not equal, CompMem = '</font><font color="#000080">,</font>CompRes<font color="#000080">); </font><font color="#008000"><i>{ show results }
  </i></font>Var2 <font color="#000080">:= </font>Var1<font color="#000080">;                  </font><font color="#008000"><i>{ make them equal }
  </i></font>CompRes <font color="#000080">:= </font>CompMem<font color="#000080">(</font>Var1<font color="#000080">,</font>Var2<font color="#000080">,</font><font color="#800000">128</font><font color="#000080">); </font><font color="#008000"><i>{ test again, should return 0 }
  </i></font>WriteLn<font color="#000080">(</font><font color="#800000">'While equal, CompMem = '</font><font color="#000080">,</font>CompRes<font color="#000080">);
  </font>Var2<font color="#000080">[</font><font color="#800000">128</font><font color="#000080">] := </font><font color="#800000">0</font><font color="#000080">;                    </font><font color="#008000"><i>{ make all equal except last byte }
  </i></font>CompRes <font color="#000080">:= </font>CompMem<font color="#000080">(</font>Var1<font color="#000080">,</font>Var2<font color="#000080">,</font><font color="#800000">128</font><font color="#000080">); </font><font color="#008000"><i>{ test again, should return 128 }
  </i></font>WriteLn<font color="#000080">(</font><font color="#800000">'While not equal, CompMem = '</font><font color="#000080">,</font>CompRes<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to MEMORY SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0053.PAS">Original</a><b>]</b></p></body>
</html>
