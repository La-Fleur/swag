<html>
<head><title> "CPU/FPU processor type" by GREG VIGNEAULT</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to HARDWARE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0025.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>(*-------------------------------------------------------------------*)
 </i></font><font color="#FF0000"><b>UNIT </b></font>CPUID<font color="#000080">; </font><font color="#008000"><i>{CPUID.PAS} { determine CPU and FPU processor types }
 </i></font><font color="#FF0000"><b>Interface               </b></font><font color="#008000"><i>{ Copyright 1992 Gregory S. Vigneault }

 </i></font><font color="#FF0000"><b>Const        </b></font>CpuType <font color="#000080">:</font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">10</font><font color="#000080">] </font><font color="#FF0000"><b>of String</b></font><font color="#000080">[</font><font color="#800000">7</font><font color="#000080">] = (</font><font color="#800000">'8088'</font><font color="#000080">,</font><font color="#800000">'8086'</font><font color="#000080">,</font><font color="#800000">'NEC V20'</font><font color="#000080">,
        </font><font color="#800000">'NEC V30'</font><font color="#000080">,</font><font color="#800000">'80186'</font><font color="#000080">,</font><font color="#800000">'80188'</font><font color="#000080">,</font><font color="#800000">'80286'</font><font color="#000080">,</font><font color="#800000">'386DX'</font><font color="#000080">,</font><font color="#800000">'386SX'</font><font color="#000080">,</font><font color="#800000">'486DX'</font><font color="#000080">,</font><font color="#800000">'486SX'</font><font color="#000080">);

        </font>FpuType <font color="#000080">:</font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">4</font><font color="#000080">] </font><font color="#FF0000"><b>of String</b></font><font color="#000080">[</font><font color="#800000">5</font><font color="#000080">] = (</font><font color="#800000">'None'</font><font color="#000080">,</font><font color="#800000">'8087'</font><font color="#000080">,</font><font color="#800000">'80287'</font><font color="#000080">,</font><font color="#800000">'80387'</font><font color="#000080">,
        </font><font color="#800000">'80487'</font><font color="#000080">);

 </font><font color="#FF0000"><b>FUNCTION </b></font>GetCPU<font color="#000080">( </font><font color="#FF0000"><b>VAR </b></font>FPUtype <font color="#000080">:</font>BYTE <font color="#000080">) :</font>BYTE<font color="#000080">;
 </font><font color="#008000"><i>{ GetCPU codes:
    0 = 8088      |   6 = 80286
    1 = 8086      |   7 = 386DX   or older/undetected 386SX
    2 = NEC V20   |   8 = 386SX   * not always detected in all modes
    3 = NEC V30   |   9 = 486DX   or (486SX with 487SX)
    4 = 80186     |   10= 486SX
    5 = 80188     |
  FPUtype codes: 0 = none
                 1 = 8087
                 2 = 80287
                 3 = 80387   * 387DX or 387SX
                 4 = 80487   * 487SX or 486DX
                 17= undetermined copro reported by BIOS }
 </i></font><font color="#FF0000"><b>Implementation  </b></font><font color="#008000"><i>{ Mar.9.92 }
 {$L GETCPU.OBJ}
 </i></font><font color="#FF0000"><b>FUNCTION </b></font>GetCPU<font color="#000080">( </font><font color="#FF0000"><b>VAR </b></font>FPUtype <font color="#000080">:</font>BYTE <font color="#000080">) :</font>BYTE<font color="#000080">; </font><font color="#FF0000"><b>EXTERNAL</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>END</b></font><font color="#000080">.    </font><font color="#008000"><i>{ Unit CPUID }
(*-------------------------------------------------------------------*)
(*-------------------------------------------------------------------*)
 </i></font><font color="#FF0000"><b>PROGRAM </b></font>ProcessorID<font color="#000080">; </font><font color="#008000"><i>{PID.PAS   determine CPU &amp; FPU (NDP) types }
 </i></font><font color="#FF0000"><b>USES    </b></font>CPUID<font color="#000080">;
 </font><font color="#FF0000"><b>VAR     </b></font>FPUtype<font color="#000080">, </font>CPUtype     <font color="#000080">:</font>BYTE<font color="#000080">;
 </font><font color="#FF0000"><b>BEGIN
        </b></font>WriteLn<font color="#000080">( </font><font color="#800000">#10</font><font color="#000080">,</font><font color="#800000">' PID v0.2, 1992 G.S.Vigneault'</font><font color="#000080">,</font><font color="#800000">#10</font><font color="#000080">);
        </font>Write<font color="#000080">(</font><font color="#800000">' CPU type: '</font><font color="#000080">);
        </font><font color="#FF0000"><b>CASE </b></font>GetCPU<font color="#000080">( </font>FPUtype <font color="#000080">) </font><font color="#FF0000"><b>OF
            </b></font><font color="#800000">0   </font><font color="#000080">: </font>WriteLn<font color="#000080">(</font><font color="#800000">'8088'</font><font color="#000080">);
            </font><font color="#800000">1   </font><font color="#000080">: </font>WriteLn<font color="#000080">(</font><font color="#800000">'8086'</font><font color="#000080">);
            </font><font color="#800000">2   </font><font color="#000080">: </font>WriteLn<font color="#000080">(</font><font color="#800000">'NEC V20'</font><font color="#000080">);
            </font><font color="#800000">3   </font><font color="#000080">: </font>WriteLn<font color="#000080">(</font><font color="#800000">'NEC V30'</font><font color="#000080">);
            </font><font color="#800000">4   </font><font color="#000080">: </font>WriteLn<font color="#000080">(</font><font color="#800000">'80188'</font><font color="#000080">);
            </font><font color="#800000">5   </font><font color="#000080">: </font>WriteLn<font color="#000080">(</font><font color="#800000">'80186'</font><font color="#000080">);
            </font><font color="#800000">6   </font><font color="#000080">: </font>WriteLn<font color="#000080">(</font><font color="#800000">'80286'</font><font color="#000080">);
            </font><font color="#800000">7   </font><font color="#000080">: </font>WriteLn<font color="#000080">(</font><font color="#800000">'386DX'</font><font color="#000080">);
            </font><font color="#800000">8   </font><font color="#000080">: </font>WriteLn<font color="#000080">(</font><font color="#800000">'386SX'</font><font color="#000080">);
            </font><font color="#800000">9   </font><font color="#000080">: </font>WriteLn<font color="#000080">(</font><font color="#800000">'486DX'</font><font color="#000080">);
            </font><font color="#800000">10  </font><font color="#000080">: </font>WriteLn<font color="#000080">(</font><font color="#800000">'486SX'</font><font color="#000080">)
            </font><font color="#FF0000"><b>END</b></font><font color="#000080">; </font><font color="#008000"><i>{case GetCPU}
        </i></font>Write<font color="#000080">(</font><font color="#800000">' FPU type: '</font><font color="#000080">);
        </font><font color="#FF0000"><b>CASE </b></font>FPUtype <font color="#FF0000"><b>OF
            </b></font><font color="#800000">0   </font><font color="#000080">: </font>WriteLn<font color="#000080">(</font><font color="#800000">'none'</font><font color="#000080">);
            </font><font color="#800000">1   </font><font color="#000080">: </font>WriteLn<font color="#000080">(</font><font color="#800000">'8087'</font><font color="#000080">);
            </font><font color="#800000">2   </font><font color="#000080">: </font>WriteLn<font color="#000080">(</font><font color="#800000">'80287'</font><font color="#000080">);
            </font><font color="#800000">3   </font><font color="#000080">: </font>WriteLn<font color="#000080">(</font><font color="#800000">'80387'</font><font color="#000080">);
            </font><font color="#800000">4   </font><font color="#000080">: </font>WriteLn<font color="#000080">(</font><font color="#800000">'80487'</font><font color="#000080">);
            </font><font color="#800000">17  </font><font color="#000080">: </font>WriteLn<font color="#000080">(</font><font color="#800000">'in equipment byte'</font><font color="#000080">);
            </font><font color="#FF0000"><b>END</b></font><font color="#000080">; </font><font color="#008000"><i>{case FPUtype}
 </i></font><font color="#FF0000"><b>END</b></font><font color="#000080">.    </font><font color="#008000"><i>{ProcessorID}
(*-------------------------------------------------------------------*)
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to HARDWARE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0025.PAS">Original</a><b>]</b></p></body>
</html>
