<html>
<head><title> "Port Info" by THORSTEN BARTH</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to HARDWARE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0023.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt; Can anybody give me any info on how to read signals from pins on say
&gt; COM2: or from LPT1: or even from The joystick port? I think it has
&gt; been done with the PORT command or something, but what are the values
&gt; to use to read them with? Thanks.

You can read in signals from different pins on LPT ports with the PORT
command ( =OUT/IN command in assembler). Just determine the base adress of
the LPT port using
}

  </i></font>LPTadress <font color="#000080">:= </font>MemW<font color="#000080">[</font><font color="#800000">$40 </font><font color="#000080">: </font><font color="#800000">6 </font><font color="#000080">+ </font>LPTNr <font color="#000080">* </font><font color="#800000">2</font><font color="#000080">];

</font><font color="#008000"><i>{
where LPTNr is the number of the LPT port from 1 to 3.

Should return 03BCh, 0378h or 0278h.
That has to be done once at the beginning of the program.
Now you can start to read/write values on this port.
The LPT port has:

- 8 data outputs (pin 2 to 9), which can be written using
}

  </i></font>Port<font color="#000080">[</font>LPTAdress<font color="#000080">] := </font>B<font color="#000080">;

</font><font color="#008000"><i>{
where B is a byte consisting of the 8 bits. Voltage will be 5V for 1, and 0V
for 0. (but not very high power available (TTL/CMOS)

- 4 handshake outs which can be written by
}

  </i></font>Port<font color="#000080">[</font>LPTAdress <font color="#000080">+ </font><font color="#800000">2</font><font color="#000080">] := </font>B<font color="#000080">;

</font><font color="#008000"><i>{
where B is a byte with the lowest 4 bits set to the values of the pins and
the higher 4 bits always set to zero.

        PIN  1: Strobe --&gt; bit 0
        PIN 14: AutoFD --&gt; bit 1
        PIN 16: Init   --&gt; bit 2
        PIN 17: SelIN  --&gt; bit 3

        Attention! bit 2/pin 16 is 0V when set to zero, all others
        are INVERTED! (0 --&gt; 5V and vice versa)

- 5 handshake inputs which can be read by
}

     </i></font>B <font color="#000080">:= </font>Port<font color="#000080">[</font>LPTAdress <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">];

</font><font color="#008000"><i>{
     After the command, B contains the signals that are connected to the
     input pins of the LPT port:
        Bit 0-2: no function
        Bit 3 --&gt; PIN 15/Error
        Bit 4 --&gt; PIN 13/Select
        Bit 5 --&gt; PIN 12/PaperEmpty
        Bit 6 --&gt; PIN 10/Acknowledge
        Bit 7 --&gt; PIN 11/Busy     ===&gt; Attention! This input is INVERSE!

 For information: The pins 18 to 25 are Signal Ground pins.
 To use the inputs, connect TTL level 0V for 0, and 5V for 1 to them.
 (Or just use a resistor 10kOhm against +5V (take it from the keyboard
 connector or so, don't know what pin that is :-( and a switch against GND:
 then you can read in the status of the swith: CLOSED: 0, OPEN: 1...)
}</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to HARDWARE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0023.PAS">Original</a><b>]</b></p></body>
</html>
