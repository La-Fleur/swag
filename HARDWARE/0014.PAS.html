<html>
<head><title> "Which BIOS" by KAI ROHRBACHER</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to HARDWARE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0014.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
KAI ROHRBACHER

&gt; What bios are you using?
It's  an AMI-BIOS, dated 03-06-1992; but I ran the same code on an old
Tandon-AT (with BIOS from 1987) w/o problems, too!

&gt; Do you have any other timing code?
Not  at  hand;  one  could reProgram the trigger rate of timer 0 to be
faster  than  1/18.2  sec,  but in my experience, this results in even
more incompatibilities when interfacing the Unit to others.
}

</i></font><font color="#FF0000"><b>Function </b></font>BIOScompatible <font color="#000080">: </font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>Flag <font color="#000080">: </font>Byte<font color="#000080">;
  </font>p    <font color="#000080">: </font>Pointer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Flag <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>p    <font color="#000080">:= @</font>Flag<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>AT <font color="#FF0000"><b>then
  Asm
    </b></font><font color="#FF00FF">STI
    xor CX, CX
    MOV DX, 1
    LES BX, p
    MOV AX, 8300h  </font><font color="#008000"><i>{trigger 1 microsecond}
    </i></font><font color="#FF00FF">INT 15h
   @L11:
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>Delay<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">); </font><font color="#008000"><i>{wait 1 ms:}
  </i></font>BIOScompatible <font color="#000080">:= </font>Flag <font color="#000080">= </font><font color="#800000">$80</font><font color="#000080">; </font><font color="#008000"><i>{has flag been set?}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{
  ...results  in  False  For you, I can't do much! However, I'll add the
  above  routine to disable the timing mechanism in that Case to prevent
  the endless loop, at least.
}
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to HARDWARE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0014.PAS">Original</a><b>]</b></p></body>
</html>
