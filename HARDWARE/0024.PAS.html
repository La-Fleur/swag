<html>
<head><title> "Port Addresses" by MARK LEWIS</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to HARDWARE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0024.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt; does anybody knows the address for serial/parallel ports?

you can find them by reading the 7 (seven) WORDs starting at address 0040:0000
&lt;smile&gt;...
}

</i></font><font color="#FF0000"><b>CONST
  </b></font>BIOSBASE <font color="#000080">: </font>word <font color="#000080">= </font><font color="#800000">$0040</font><font color="#000080">;
  </font>PORTADDR <font color="#000080">: </font>word <font color="#000080">= </font><font color="#800000">$0000</font><font color="#000080">;

</font><font color="#FF0000"><b>VAR
  </b></font>COM1<font color="#000080">, </font>COM2<font color="#000080">,
  </font>COM3<font color="#000080">, </font>COM4<font color="#000080">,
  </font>LPT1<font color="#000080">, </font>LPT2<font color="#000080">, </font>LPT3 <font color="#000080">: </font>word<font color="#000080">;

</font><font color="#FF0000"><b>BEGIN
  </b></font>COM1 <font color="#000080">:= </font>memw<font color="#000080">[</font>BIOSBASE<font color="#000080">:</font>PORTADDR<font color="#000080">+</font><font color="#800000">0</font><font color="#000080">];
  </font>COM2 <font color="#000080">:= </font>memw<font color="#000080">[</font>BIOSBASE<font color="#000080">:</font>PORTADDR<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">];
  </font>COM3 <font color="#000080">:= </font>memw<font color="#000080">[</font>BIOSBASE<font color="#000080">:</font>PORTADDR<font color="#000080">+</font><font color="#800000">4</font><font color="#000080">];
  </font>COM4 <font color="#000080">:= </font>memw<font color="#000080">[</font>BIOSBASE<font color="#000080">:</font>PORTADDR<font color="#000080">+</font><font color="#800000">6</font><font color="#000080">];
  </font>LPT1 <font color="#000080">:= </font>memw<font color="#000080">[</font>BIOSBASE<font color="#000080">:</font>PORTADDR<font color="#000080">+</font><font color="#800000">8</font><font color="#000080">];
  </font>LPT2 <font color="#000080">:= </font>memw<font color="#000080">[</font>BIOSBASE<font color="#000080">:</font>PORTADDR<font color="#000080">+</font><font color="#800000">10</font><font color="#000080">];
  </font>LPT3 <font color="#000080">:= </font>memw<font color="#000080">[</font>BIOSBASE<font color="#000080">:</font>PORTADDR<font color="#000080">+</font><font color="#800000">12</font><font color="#000080">];
</font><font color="#FF0000"><b>END</b></font><font color="#000080">.

</font><font color="#008000"><i>{
RICHARD BROWNE

&gt;I guess I can declare an absolute variable at $40:$0000 and use offset to fi
&gt;the addresses.  Just a guess - haven't tried it yet. Thanks for your help.

Do this, it works.  When you WRITELN the variables to the
screen, they will be in decimal.  If you convert them to hex,
you'll see that they are the old, familiar addresses.  If any
variable is zero, there is no port present in your computer.

Another thing you'll notice, if you have com4, for instance, but
no com3.  The normal com4 address will show up in the com3
memory location, and the com4 adderess will be 0.  Which
explains why funny things happen when you are using ports 1, 2
and 4 with no 3, or 1 and 3 with no 2, etc., and why we are told
to always have consecutive com ports, with no &quot;missing&quot; numbers.
}
</i></font><font color="#FF0000"><b>program </b></font>testadr<font color="#000080">;
</font><font color="#FF0000"><b>var
   </b></font>com1adr <font color="#000080">: </font>Word <font color="#FF0000"><b>Absolute </b></font><font color="#800000">$0040</font><font color="#000080">:</font><font color="#800000">$0000</font><font color="#000080">; </font><font color="#008000"><i>{ Get COM1 Port address }
   </i></font>com2adr <font color="#000080">: </font>Word <font color="#FF0000"><b>Absolute </b></font><font color="#800000">$0040</font><font color="#000080">:</font><font color="#800000">$0002</font><font color="#000080">; </font><font color="#008000"><i>{ Get COM2 Port address }
   </i></font>com3adr <font color="#000080">: </font>Word <font color="#FF0000"><b>Absolute </b></font><font color="#800000">$0040</font><font color="#000080">:</font><font color="#800000">$0004</font><font color="#000080">; </font><font color="#008000"><i>{ Get COM3 Port address }
   </i></font>com4adr <font color="#000080">: </font>Word <font color="#FF0000"><b>Absolute </b></font><font color="#800000">$0040</font><font color="#000080">:</font><font color="#800000">$0006</font><font color="#000080">; </font><font color="#008000"><i>{ Get COM4 Port address }
   </i></font>lpt1adr <font color="#000080">: </font>Word <font color="#FF0000"><b>Absolute </b></font><font color="#800000">$0040</font><font color="#000080">:</font><font color="#800000">$0008</font><font color="#000080">; </font><font color="#008000"><i>{ Get LPT1 Port address }
   </i></font>lpt2adr <font color="#000080">: </font>Word <font color="#FF0000"><b>Absolute </b></font><font color="#800000">$0040</font><font color="#000080">:</font><font color="#800000">$000A</font><font color="#000080">; </font><font color="#008000"><i>{ Get LPT2 Port address }
   </i></font>lpt3adr <font color="#000080">: </font>Word <font color="#FF0000"><b>Absolute </b></font><font color="#800000">$0040</font><font color="#000080">:</font><font color="#800000">$000C</font><font color="#000080">; </font><font color="#008000"><i>{ Get LPT3 Port address }

</i></font><font color="#FF0000"><b>begin
   </b></font>writeln<font color="#000080">(</font><font color="#800000">'com1 address: '</font><font color="#000080">,</font>com1adr<font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">'com2 address: '</font><font color="#000080">,</font>com2adr<font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">'com3 address: '</font><font color="#000080">,</font>com3adr<font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">'com4 address: '</font><font color="#000080">,</font>com4adr<font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">'lpt1 address: '</font><font color="#000080">,</font>lpt1adr<font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">'lpt2 address: '</font><font color="#000080">,</font>lpt2adr<font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">'lpt3 address: '</font><font color="#000080">,</font>lpt3adr<font color="#000080">);
   </font>readln<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to HARDWARE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0024.PAS">Original</a><b>]</b></p></body>
</html>
