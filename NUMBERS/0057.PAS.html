<html>
<head><title> "BCD Reals" by NEIL J. RUBENKING</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to NUMBERS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0057.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#000000"> <font color="#008000"><i>{ The below is a function to convert BCD real numbers into &quot;normal&quot;
   Turbo Reals.  It runs under &quot;normal&quot; Turbo or Turbo-87.  Very likely
   the only use for it is to read BCD reals from a FILE and convert them.
                             --  Neil J. Rubenking}

  </i></font><font color="#FF0000"><b>TYPE
    </b></font>RealBCD <font color="#000080">= </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">9</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;

  </font><font color="#FF0000"><b>FUNCTION </b></font>BCDtoNorm<font color="#000080">(</font>R <font color="#000080">: </font>realBCD<font color="#000080">) : </font>real<font color="#000080">;
  </font><font color="#FF0000"><b>Var
    </b></font>I<font color="#000080">, </font>IntExponent    <font color="#000080">: </font>Integer<font color="#000080">;
    </font>N<font color="#000080">, </font>Tens<font color="#000080">, </font>Exponent <font color="#000080">: </font>Real<font color="#000080">;
    </font>sign              <font color="#000080">: </font>integer<font color="#000080">;
  </font><font color="#FF0000"><b>BEGIN
    IF </b></font>R<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">] = </font><font color="#800000">0 </font><font color="#FF0000"><b>THEN </b></font>BCDtoNORM <font color="#000080">:= </font><font color="#800000">0
    </font><font color="#FF0000"><b>ELSE
      BEGIN
        </b></font>IntExponent <font color="#000080">:= (</font>R<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">] </font><font color="#FF0000"><b>AND </b></font><font color="#800000">$7F</font><font color="#000080">) - </font><font color="#800000">$3F</font><font color="#000080">;
        </font><font color="#FF0000"><b>IF </b></font>R<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">] </font><font color="#FF0000"><b>AND </b></font><font color="#800000">$80 </font><font color="#000080">= </font><font color="#800000">$80 </font><font color="#FF0000"><b>THEN </b></font>Sign <font color="#000080">:= -</font><font color="#800000">1 </font><font color="#FF0000"><b>ELSE </b></font>Sign <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
        </font>N <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">; </font>Tens <font color="#000080">:= </font><font color="#800000">0.1</font><font color="#000080">;
        </font><font color="#FF0000"><b>FOR </b></font>I <font color="#000080">:= </font><font color="#800000">9 </font><font color="#FF0000"><b>downto </b></font><font color="#800000">1 </font><font color="#FF0000"><b>DO
          BEGIN
            </b></font>N <font color="#000080">:= </font>N <font color="#000080">+ </font>Tens<font color="#000080">*(</font>R<font color="#000080">[</font>I<font color="#000080">] </font><font color="#FF0000"><b>SHR </b></font><font color="#800000">4</font><font color="#000080">);
            </font>Tens <font color="#000080">:= </font>Tens <font color="#000080">* </font><font color="#800000">0.1</font><font color="#000080">;
            </font>N <font color="#000080">:= </font>N <font color="#000080">+ </font>Tens<font color="#000080">*(</font>R<font color="#000080">[</font>I<font color="#000080">] </font><font color="#FF0000"><b>AND </b></font><font color="#800000">$F</font><font color="#000080">);
            </font>Tens <font color="#000080">:= </font>Tens <font color="#000080">* </font><font color="#800000">0.1</font><font color="#000080">;
          </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
       </font>Exponent <font color="#000080">:= </font><font color="#800000">1.0</font><font color="#000080">;
       </font><font color="#FF0000"><b>FOR </b></font>I <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>IntExponent <font color="#FF0000"><b>DO </b></font>Exponent <font color="#000080">:= </font>Exponent <font color="#000080">* </font><font color="#800000">10.0</font><font color="#000080">;
       </font>BCDtoNORM <font color="#000080">:= </font>Exponent <font color="#000080">* </font>N <font color="#000080">* </font>Sign<font color="#000080">;
     </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to NUMBERS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0057.PAS">Original</a><b>]</b></p></body>
</html>
