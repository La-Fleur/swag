<html>
<head><title> "Rotate Bits LEFT/RIGHT" by CHRIS PRIEDE</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to NUMBERS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0005.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#000080">&gt; </font>I made a <font color="#FF0000"><b>Program in </b></font>Turbo<font color="#000080">-</font><font color="#FF0000"><b>Pascal </b></font>that rotates the bits <font color="#FF0000"><b>in </b></font>one Byte so I can
<font color="#000080">&gt; </font>encrypt<font color="#000080">/</font>decrypt a <font color="#FF0000"><b>File</b></font><font color="#000080">, </font>however the routine <font color="#FF0000"><b>is </b></font>slow<font color="#000080">. </font>I <font color="#FF0000"><b>then </b></font>made the same
<font color="#000080">&gt; </font><font color="#FF0000"><b>Program in </b></font>turbo<font color="#000080">-</font>C using _RotLeft <font color="#FF0000"><b>and </b></font>_RotRight<font color="#000080">, </font>the speed <font color="#FF0000"><b>of </b></font>execution was
<font color="#000080">&gt; </font>Really faster than Turbo<font color="#000080">-</font><font color="#FF0000"><b>Pascal</b></font><font color="#000080">. </font>Does anybody know <font color="#FF0000"><b>of </b></font>a way <font color="#FF0000"><b>to </b></font>rotate the
<font color="#000080">&gt; </font>bits <font color="#FF0000"><b>of </b></font>one Byte <font color="#FF0000"><b>in </b></font>turbo<font color="#000080">-</font><font color="#FF0000"><b>Pascal and </b></font>FAST <font color="#000080">!!!!


        </font>Since <font color="#800000">80</font>xxx CPUs have bit rotate instructions <font color="#000080">(</font>ROL<font color="#000080">, </font>ROR<font color="#000080">), </font>it would
be a shame <font color="#FF0000"><b>to </b></font>use some clumsy HLL Construct<font color="#000080">. </font>BTW<font color="#000080">, </font>I<font color="#800000">'m sure _RotLeft and
</font>_RotRight use rotate instructions too<font color="#000080">, </font>possibly insert them <font color="#FF0000"><b>Inline</b></font><font color="#000080">. </font><font color="#FF0000"><b>If
</b></font>you are using TP <font color="#800000">6.0</font><font color="#000080">+, </font><font color="#FF0000"><b>try </b></font>something like this<font color="#000080">:

</font><font color="#008000"><i>{ to rotate left }
</i></font><font color="#FF0000"><b>Function </b></font>RotLeft<font color="#000080">(</font>B<font color="#000080">, </font>Count<font color="#000080">: </font>Byte<font color="#000080">): </font>Byte<font color="#000080">; </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm
  </b></font><font color="#FF00FF">mov   al, B
  mov   cl, Count
  rol   al, cl
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ to rotate right }
</i></font><font color="#FF0000"><b>Function </b></font>RotRight<font color="#000080">(</font>B<font color="#000080">, </font>Count<font color="#000080">: </font>Byte<font color="#000080">): </font>Byte<font color="#000080">; </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm
  </b></font><font color="#FF00FF">mov   al, B
  mov   cl, Count
  ror   al, cl
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


        </font><font color="#FF0000"><b>Of </b></font>course<font color="#000080">, </font><font color="#FF0000"><b>if </b></font>you need <font color="#FF0000"><b>to do </b></font>this <font color="#FF0000"><b>in </b></font>only a few places it would
be better <font color="#FF0000"><b>not to </b></font>define Functions<font color="#000080">, </font>but insert <font color="#FF0000"><b>Asm </b></font><font color="#FF00FF">blocks in your code
directly.

        The fastest Pascal way to rotate Byte would be something like
this:

Function RotLeft(B, Count: Byte): Byte;
Var
  W : Word;
  A : Array[0..1] of Byte Absolute W;
begin
  A[0] := B;
  A[1] := B;
  W := W shl Count;
  RotLeft := A[1];
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

        </font><font color="#FF0000"><b>To </b></font>rotate right <font color="#FF0000"><b>With </b></font>this method<font color="#000080">, </font>you would shift right <font color="#FF0000"><b>and
</b></font>return A<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]. </font>I would like <font color="#FF0000"><b>to </b></font>think this <font color="#FF0000"><b>is as </b></font>fast <font color="#FF0000"><b>as </b></font>it gets <font color="#FF0000"><b>in </b></font>TP
without assembly<font color="#000080">, </font>but one can never be sure <font color="#000080">&lt;</font>g<font color="#000080">&gt;. </font>Anyway<font color="#000080">, </font>I recommend
the assembly solution over this one<font color="#000080">, </font>it <font color="#FF0000"><b>is </b></font>faster <font color="#FF0000"><b>and </b></font>more elegant<font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to NUMBERS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0005.PAS">Original</a><b>]</b></p></body>
</html>
