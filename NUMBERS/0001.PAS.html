<html>
<head><title> "BITS1.PAS" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to NUMBERS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0001.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
 Sean Palmer

&gt; What if I want to just access a bit?  Say I have a Byte, to store
&gt; Various access levels (if it does/doesn't have this, that, or the
&gt; other).  How can I

&gt; 1)  Access, say, bit 4?
&gt; 2)  Give, say, bit 4, a value of 1?

&gt; I have a simple routine that does &quot;GetBit:= Value SHR 1;&quot; to return
&gt; a value, but how can I *SET* a value?  And is the above a good
&gt; method? I only have TP5.5, so I can't do the Asm keyWord (yet..).

You COULD use TP sets to do it...
}

</i></font><font color="#FF0000"><b>Type
  </b></font>tByte <font color="#000080">= </font><font color="#FF0000"><b>set of </b></font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">7</font><font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>b <font color="#000080">: </font>Byte<font color="#000080">;

</font><font color="#008000"><i>{to get:
  Write('Bit 0 is ',Boolean(0 in tByte(b)));

to set:
  tByte(b):=tByte(b)+[1,3,4]-[0,2];
}

</i></font><font color="#FF0000"><b>Type
  </b></font>bitNum <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">7</font><font color="#000080">;
  </font>bit    <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">1</font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>getBit<font color="#000080">(</font>b <font color="#000080">: </font>Byte<font color="#000080">; </font>n <font color="#000080">: </font>bitNum<font color="#000080">) : </font>bit<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>getBit <font color="#000080">:= </font>bit<font color="#000080">(</font>odd<font color="#000080">(</font>b <font color="#FF0000"><b>shr </b></font>n<font color="#000080">));
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>setBit<font color="#000080">( </font>b <font color="#000080">: </font>Byte<font color="#000080">; </font>n <font color="#000080">: </font>bitNum<font color="#000080">) : </font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>setBit <font color="#000080">:= </font>b <font color="#FF0000"><b>or </b></font><font color="#000080">(</font><font color="#800000">1 </font><font color="#FF0000"><b>shl </b></font>n<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>clrBit<font color="#000080">(</font>b <font color="#000080">: </font>Byte<font color="#000080">; </font>n <font color="#000080">: </font>bitNum<font color="#000080">) : </font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>clrBit <font color="#000080">:= </font>b <font color="#FF0000"><b>and </b></font>hi<font color="#000080">(</font><font color="#800000">$FEFF </font><font color="#FF0000"><b>shl </b></font>n<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{
 OR.....using Inline() code  (the fastest)
 These are untested but I'm getting fairly good at assembling by hand...8)
}

</i></font><font color="#FF0000"><b>Function </b></font>getBit<font color="#000080">(</font>b <font color="#000080">: </font>Byte<font color="#000080">; </font>n <font color="#000080">: </font>bitNum<font color="#000080">) : </font>bit<font color="#000080">;
</font><font color="#FF0000"><b>Inline</b></font><font color="#000080">(
  </font><font color="#800000">$59</font><font color="#000080">/      </font><font color="#008000"><i>{pop cx}
  </i></font><font color="#800000">$58</font><font color="#000080">/      </font><font color="#008000"><i>{pop ax}
  </i></font><font color="#800000">$D2</font><font color="#000080">/</font><font color="#800000">$E8</font><font color="#000080">/  </font><font color="#008000"><i>{shr al,cl}
  </i></font><font color="#800000">$24</font><font color="#000080">/</font><font color="#800000">$01</font><font color="#000080">); </font><font color="#008000"><i>{and al,1}

</i></font><font color="#FF0000"><b>Function </b></font>setBit<font color="#000080">(</font>b <font color="#000080">: </font>Byte<font color="#000080">; </font>n <font color="#000080">: </font>bitNum<font color="#000080">) : </font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>Inline</b></font><font color="#000080">(
  </font><font color="#800000">$59</font><font color="#000080">/      </font><font color="#008000"><i>{pop cx}
  </i></font><font color="#800000">$58</font><font color="#000080">/      </font><font color="#008000"><i>{pop ax}
  </i></font><font color="#800000">$B3</font><font color="#000080">/</font><font color="#800000">$01</font><font color="#000080">/  </font><font color="#008000"><i>{mov bl,1}
  </i></font><font color="#800000">$D2</font><font color="#000080">/</font><font color="#800000">$E3</font><font color="#000080">/  </font><font color="#008000"><i>{shl bl,cl}
  </i></font><font color="#800000">$0A</font><font color="#000080">/</font><font color="#800000">$C3</font><font color="#000080">); </font><font color="#008000"><i>{or al,bl}

</i></font><font color="#FF0000"><b>Function </b></font>clrBit<font color="#000080">(</font>b <font color="#000080">: </font>Byte<font color="#000080">; </font>n <font color="#000080">: </font>bitNum<font color="#000080">) : </font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>Inline</b></font><font color="#000080">(
  </font><font color="#800000">$59</font><font color="#000080">/      </font><font color="#008000"><i>{pop cx}
  </i></font><font color="#800000">$58</font><font color="#000080">/      </font><font color="#008000"><i>{pop ax}
  </i></font><font color="#800000">$B3</font><font color="#000080">/</font><font color="#800000">$FE</font><font color="#000080">/  </font><font color="#008000"><i>{mov bl,$FE}
  </i></font><font color="#800000">$D2</font><font color="#000080">/</font><font color="#800000">$C3</font><font color="#000080">/  </font><font color="#008000"><i>{rol bl,cl}
  </i></font><font color="#800000">$22</font><font color="#000080">/</font><font color="#800000">$C3</font><font color="#000080">); </font><font color="#008000"><i>{or al,bl}
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to NUMBERS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0001.PAS">Original</a><b>]</b></p></body>
</html>
