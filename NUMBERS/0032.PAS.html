<html>
<head><title> "Setting/Getting BITS" by CHRIS QUARTETTI</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to NUMBERS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0032.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
CHRIS QUARTETTI

&gt;Is there an easy way to create a 1-bit or 2-bit data structure.  For
&gt;example, a 2-bit Type that can hold 4 possible values.  For that matter,
&gt;is there a hard way? &lt;g&gt;  Thanks very much -Greg

   I suppose this would qualify For the hard way-- not too flexible, but it
works. It would be a bit easier to do this if you wanted a bunch of the same
size Variables (ie 4 4 bit Variables, or an Array of 4*x 4 bit Variables).
FWIW I used BP7 here, but TP6 and up will work. Also, it need not be Object
oriented.
}

</i></font><font color="#FF0000"><b>Type
  </b></font>bitf <font color="#000080">= </font><font color="#FF0000"><b>Object                                                                                  </b></font><font color="#008000"><i>{ split 'bits' into bitfields }
    </i></font>bits <font color="#000080">: </font>Word<font color="#000080">;                         </font><font color="#008000"><i>{ 16 bits total }

    </i></font><font color="#FF0000"><b>Function  </b></font>get <font color="#000080">: </font>Word<font color="#000080">;

    </font><font color="#FF0000"><b>Procedure </b></font>set1<font color="#000080">(</font>value <font color="#000080">: </font>Word<font color="#000080">);        </font><font color="#008000"><i>{ this will be 2 bits }
    </i></font><font color="#FF0000"><b>Function  </b></font>get1 <font color="#000080">: </font>Word<font color="#000080">;

    </font><font color="#FF0000"><b>Procedure </b></font>set2<font color="#000080">(</font>value <font color="#000080">: </font>Word<font color="#000080">);        </font><font color="#008000"><i>{ this will be 13 bits }
    </i></font><font color="#FF0000"><b>Function  </b></font>get2 <font color="#000080">: </font>Word<font color="#000080">;

    </font><font color="#FF0000"><b>Procedure </b></font>set3<font color="#000080">(</font>value <font color="#000080">: </font>Word<font color="#000080">);        </font><font color="#008000"><i>{ this will be 1 bit }
    </i></font><font color="#FF0000"><b>Function  </b></font>get3 <font color="#000080">: </font>Word<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>bitf<font color="#000080">.</font>get <font color="#000080">: </font>Word<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>get <font color="#000080">:= </font>bits<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>bitf<font color="#000080">.</font>set1<font color="#000080">(</font>value <font color="#000080">: </font>Word<font color="#000080">);
</font><font color="#008000"><i>{ Set the value of the first bitfield }
</i></font><font color="#FF0000"><b>Const
  </b></font>valmask  <font color="#000080">: </font>Word <font color="#000080">= </font><font color="#800000">$C000</font><font color="#000080">;  </font><font color="#008000"><i>{ 11000000 00000000 }
  </i></font>bitsmask <font color="#000080">: </font>Word <font color="#000080">= </font><font color="#800000">$3FFF</font><font color="#000080">;  </font><font color="#008000"><i>{ 00111111 11111111 }
</i></font><font color="#FF0000"><b>begin
  </b></font>value <font color="#000080">:= </font>value <font color="#FF0000"><b>shl </b></font><font color="#800000">14 </font><font color="#FF0000"><b>and </b></font>valmask<font color="#000080">;
  </font>bits  <font color="#000080">:= </font>value <font color="#000080">+ (</font>bits <font color="#FF0000"><b>and </b></font>bitsmask<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>bitf<font color="#000080">.</font>get1 <font color="#000080">: </font>Word<font color="#000080">;
</font><font color="#008000"><i>{ Get the value of the first bitfield }
</i></font><font color="#FF0000"><b>begin
  </b></font>get1 <font color="#000080">:= </font>bits <font color="#FF0000"><b>shr </b></font><font color="#800000">14</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>bitf<font color="#000080">.</font>set2<font color="#000080">(</font>value <font color="#000080">: </font>Word<font color="#000080">);
</font><font color="#008000"><i>{ Set the value of the second bitfield }
</i></font><font color="#FF0000"><b>Const
  </b></font>valmask  <font color="#000080">: </font>Word <font color="#000080">= </font><font color="#800000">$3FFE</font><font color="#000080">;  </font><font color="#008000"><i>{ 00111111 11111110 }
  </i></font>bitsmask <font color="#000080">: </font>Word <font color="#000080">= </font><font color="#800000">$C001</font><font color="#000080">;  </font><font color="#008000"><i>{ 11000000 00000001 }
</i></font><font color="#FF0000"><b>begin
  </b></font>value <font color="#000080">:= (</font>value <font color="#FF0000"><b>shl </b></font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font>valmask<font color="#000080">;
  </font>bits  <font color="#000080">:= </font>value <font color="#000080">+ (</font>bits <font color="#FF0000"><b>and </b></font>bitsmask<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>bitf<font color="#000080">.</font>get2 <font color="#000080">: </font>Word<font color="#000080">;
</font><font color="#008000"><i>{ Get the value of the second bitfield }
</i></font><font color="#FF0000"><b>Const
  </b></font>valmask <font color="#000080">: </font>Word <font color="#000080">= </font><font color="#800000">$3FFE</font><font color="#000080">;   </font><font color="#008000"><i>{ 00111111 11111110 }
</i></font><font color="#FF0000"><b>begin
  </b></font>get2 <font color="#000080">:= (</font>bits <font color="#FF0000"><b>and </b></font>valmask<font color="#000080">) </font><font color="#FF0000"><b>shr </b></font><font color="#800000">1</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>bitf<font color="#000080">.</font>set3<font color="#000080">(</font>value <font color="#000080">: </font>Word<font color="#000080">);
</font><font color="#008000"><i>{ Set the value of the third bitfield }
</i></font><font color="#FF0000"><b>Const
  </b></font>valmask  <font color="#000080">: </font>Word <font color="#000080">= </font><font color="#800000">$0001</font><font color="#000080">;  </font><font color="#008000"><i>{ 00000000 00000001 }
  </i></font>bitsmask <font color="#000080">: </font>Word <font color="#000080">= </font><font color="#800000">$FFFE</font><font color="#000080">;  </font><font color="#008000"><i>{ 11111111 11111110 }
</i></font><font color="#FF0000"><b>begin
  </b></font>value <font color="#000080">:= </font>value <font color="#FF0000"><b>and </b></font>valmask<font color="#000080">;
  </font>bits  <font color="#000080">:= </font>value <font color="#000080">+ (</font>bits <font color="#FF0000"><b>and </b></font>bitsmask<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>bitf<font color="#000080">.</font>get3 <font color="#000080">: </font>Word<font color="#000080">;
</font><font color="#008000"><i>{ Get the value of the third bitfield }
</i></font><font color="#FF0000"><b>Const
  </b></font>valmask <font color="#000080">: </font>Word <font color="#000080">= </font><font color="#800000">$0001</font><font color="#000080">;  </font><font color="#008000"><i>{ 00000000 00000001 }
</i></font><font color="#FF0000"><b>begin
  </b></font>get3 <font color="#000080">:= </font>bits <font color="#FF0000"><b>and </b></font>valmask<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Var
  </b></font>x <font color="#000080">: </font>bitf<font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>x<font color="#000080">.</font>set1<font color="#000080">(</font><font color="#800000">3</font><font color="#000080">);        </font><font color="#008000"><i>{ set all to maximum values }
  </i></font>x<font color="#000080">.</font>set2<font color="#000080">(</font><font color="#800000">8191</font><font color="#000080">);
  </font>x<font color="#000080">.</font>set3<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
  </font>Writeln<font color="#000080">(</font>x<font color="#000080">.</font>get1<font color="#000080">, </font><font color="#800000">', '</font><font color="#000080">, </font>x<font color="#000080">.</font>get2<font color="#000080">, </font><font color="#800000">', '</font><font color="#000080">, </font>x<font color="#000080">.</font>get3<font color="#000080">, </font><font color="#800000">', '</font><font color="#000080">, </font>x<font color="#000080">.</font>get<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to NUMBERS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0032.PAS">Original</a><b>]</b></p></body>
</html>
