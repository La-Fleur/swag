<html>
<head><title> "Convert Number to HEX" by LOU DUCHEZ</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to NUMBERS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0034.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
LOU DUCHEZ

&gt;does andbody know an easy way to convert a Byte value from it's Integer
&gt; notation to hex notatation?

Well, thank you For this message.  It finally got me off my keister (sp?) to
Write a &quot;decimal-to-hex&quot; converter -- a project I'd been meaning to do, but
never got around to.  (Technically, since I was in a seated position, I
remained on my keister the whole time, but you know what I mean).  Actually,
the following is not just &quot;decimal-to-hex&quot; -- it's decimal-to-any-base-from-
2-to-36-converter (because base 1 and below doesn't make sense, and after
base 36 I run out of alphabet to represent &quot;digits&quot;).  Here is NUBASE:
}


</i></font><font color="#FF0000"><b>Function </b></font>nubase<font color="#000080">(</font>numin <font color="#000080">: </font>LongInt<font color="#000080">; </font>base<font color="#000080">, </font>numplaces <font color="#000080">: </font>Byte<font color="#000080">) : </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>tmpstr    <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
  </font>remainder <font color="#000080">: </font>Byte<font color="#000080">;
  </font>negatize  <font color="#000080">: </font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>negatize <font color="#000080">:= (</font>numin <font color="#000080">&lt; </font><font color="#800000">0</font><font color="#000080">);              </font><font color="#008000"><i>{ Record if it's a negative number }
  </i></font><font color="#FF0000"><b>if </b></font>negatize <font color="#FF0000"><b>then
    </b></font>numin <font color="#000080">:= </font>abs<font color="#000080">(</font>numin<font color="#000080">);                </font><font color="#008000"><i>{ convert to positive For calcs }
  </i></font>tmpstr<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">] := </font>Char<font color="#000080">(</font>numplaces<font color="#000080">);         </font><font color="#008000"><i>{ set length of the output String }

  </i></font><font color="#FF0000"><b>While </b></font>numplaces <font color="#000080">&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>do
  begin                                 </b></font><font color="#008000"><i>{ Loop: fills each space in String }
    </i></font>remainder <font color="#000080">:= </font>numin <font color="#FF0000"><b>mod </b></font>base<font color="#000080">;        </font><font color="#008000"><i>{ get next &quot;digit&quot; (under new base) }
    </i></font><font color="#FF0000"><b>if </b></font>remainder <font color="#000080">&gt; </font><font color="#800000">9 </font><font color="#FF0000"><b>then
      </b></font>tmpstr<font color="#000080">[</font>numplaces<font color="#000080">] := </font>Char<font color="#000080">(</font>remainder <font color="#000080">+ </font><font color="#800000">64 </font><font color="#000080">- </font><font color="#800000">9</font><font color="#000080">)   </font><font color="#008000"><i>{ convert to letter }
     </i></font><font color="#FF0000"><b>else
      </b></font>tmpstr<font color="#000080">[</font>numplaces<font color="#000080">] := </font>Char<font color="#000080">(</font>remainder <font color="#000080">+ </font><font color="#800000">48</font><font color="#000080">);      </font><font color="#008000"><i>{ use number as is }
    </i></font>numin <font color="#000080">:= </font>numin <font color="#FF0000"><b>div </b></font>base<font color="#000080">;            </font><font color="#008000"><i>{ reduce dividend For next &quot;pass&quot; }
    </i></font>numplaces <font color="#000080">:= </font>numplaces <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;         </font><font color="#008000"><i>{ go to &quot;next&quot; position in String }
  </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;                                  </font><font color="#008000"><i>{ end of loop }

  { The following: if we've run out of room on the String, or if it's a
    negative number and there's not enough space For the &quot;minus&quot; sign,
    convert the output String to all asterisks. }

  </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>numin <font color="#000080">&lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>negatize <font color="#FF0000"><b>and </b></font><font color="#000080">(</font>tmpstr<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] &lt;&gt; </font><font color="#800000">'0'</font><font color="#000080">)) </font><font color="#FF0000"><b>then
    For </b></font>numplaces <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>Byte<font color="#000080">(</font>tmpstr<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]) </font><font color="#FF0000"><b>do
      </b></font>tmpstr<font color="#000080">[</font>numplaces<font color="#000080">] := </font><font color="#800000">'*'</font><font color="#000080">;

  </font><font color="#008000"><i>{ add minus sign }

  </i></font><font color="#FF0000"><b>if </b></font>negatize <font color="#FF0000"><b>and </b></font><font color="#000080">(</font>tmpstr<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] = </font><font color="#800000">'0'</font><font color="#000080">) </font><font color="#FF0000"><b>then
    </b></font>tmpstr<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] := </font><font color="#800000">'-'</font><font color="#000080">;

  </font>nubase <font color="#000080">:= </font>tmpstr<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#008000"><i>{
Feed it the number to convert, the base to convert into, and the number of
spaces you want For it.  Leading zeros will be provided.  Example: to
convert 111 into hex (base 16)  and give 4 digits of answer, you could say:

Writeln(nubase(111, 16, 4))

and it'd Write out:

006F

This routine does handle negative numbers too.  if you don't give it enough
&quot;space&quot; in the third parameter you pass, it'll return all asterisks.  For
laughs, try converting the number 111 into base 10 and giving it 5 digits
of answer.  You'll get:

00111  (predictably enough)
}</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to NUMBERS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0034.PAS">Original</a><b>]</b></p></body>
</html>
