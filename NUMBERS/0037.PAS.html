<html>
<head><title> "Bit Handler" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to NUMBERS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0037.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>UNIT </b></font>Bits<font color="#000080">;
</font><font color="#008000"><i>(**) </i></font><font color="#FF0000"><b>INTERFACE </b></font><font color="#008000"><i>(**)
</i></font><font color="#FF0000"><b>TYPE
  </b></font>bbit <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">7</font><font color="#000080">;
  </font>wbit <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">15</font><font color="#000080">;
  </font>lbit <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">31</font><font color="#000080">;

  </font><font color="#FF0000"><b>PROCEDURE </b></font>SetBitB<font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>B <font color="#000080">: </font>Byte<font color="#000080">; </font>bit <font color="#000080">: </font>bbit<font color="#000080">);
  </font><font color="#FF0000"><b>PROCEDURE </b></font>ClearBitB<font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>B <font color="#000080">: </font>Byte<font color="#000080">; </font>bit <font color="#000080">: </font>bbit<font color="#000080">);
  </font><font color="#FF0000"><b>PROCEDURE </b></font>ToggleBitB<font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>B <font color="#000080">: </font>Byte<font color="#000080">; </font>bit <font color="#000080">: </font>bbit<font color="#000080">);
  </font><font color="#FF0000"><b>FUNCTION </b></font>BitSetB<font color="#000080">(</font>B <font color="#000080">: </font>Byte<font color="#000080">; </font>bit <font color="#000080">: </font>bbit<font color="#000080">) : </font>Boolean<font color="#000080">;
  </font><font color="#FF0000"><b>FUNCTION </b></font>BitClearB<font color="#000080">(</font>B <font color="#000080">: </font>Byte<font color="#000080">; </font>bit <font color="#000080">: </font>bbit<font color="#000080">) : </font>Boolean<font color="#000080">;

  </font><font color="#FF0000"><b>PROCEDURE </b></font>SetBitW<font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>W <font color="#000080">: </font>Word<font color="#000080">; </font>bit <font color="#000080">: </font>wbit<font color="#000080">);
  </font><font color="#FF0000"><b>PROCEDURE </b></font>ClearBitW<font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>W <font color="#000080">: </font>Word<font color="#000080">; </font>bit <font color="#000080">: </font>wbit<font color="#000080">);
  </font><font color="#FF0000"><b>PROCEDURE </b></font>ToggleBitW<font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>W <font color="#000080">: </font>Word<font color="#000080">; </font>bit <font color="#000080">: </font>wbit<font color="#000080">);
  </font><font color="#FF0000"><b>FUNCTION </b></font>BitSetW<font color="#000080">(</font>W <font color="#000080">: </font>Word<font color="#000080">; </font>bit <font color="#000080">: </font>wbit<font color="#000080">) : </font>Boolean<font color="#000080">;
  </font><font color="#FF0000"><b>FUNCTION </b></font>BitClearW<font color="#000080">(</font>W <font color="#000080">: </font>Word<font color="#000080">; </font>bit <font color="#000080">: </font>wbit<font color="#000080">) : </font>Boolean<font color="#000080">;

  </font><font color="#FF0000"><b>PROCEDURE </b></font>SetBitL<font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>L <font color="#000080">: </font>LongInt<font color="#000080">; </font>bit <font color="#000080">: </font>lbit<font color="#000080">);
  </font><font color="#FF0000"><b>PROCEDURE </b></font>ClearBitL<font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>L <font color="#000080">: </font>LongInt<font color="#000080">; </font>bit <font color="#000080">: </font>lbit<font color="#000080">);
  </font><font color="#FF0000"><b>PROCEDURE </b></font>ToggleBitL<font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>L <font color="#000080">: </font>LongInt<font color="#000080">; </font>bit <font color="#000080">: </font>lbit<font color="#000080">);
  </font><font color="#FF0000"><b>FUNCTION </b></font>BitSetL<font color="#000080">(</font>L <font color="#000080">: </font>LongInt<font color="#000080">; </font>bit <font color="#000080">: </font>lbit<font color="#000080">) : </font>Boolean<font color="#000080">;
  </font><font color="#FF0000"><b>FUNCTION </b></font>BitClearL<font color="#000080">(</font>L <font color="#000080">: </font>LongInt<font color="#000080">; </font>bit <font color="#000080">: </font>lbit<font color="#000080">) : </font>Boolean<font color="#000080">;

</font><font color="#008000"><i>(**) </i></font><font color="#FF0000"><b>IMPLEMENTATION </b></font><font color="#008000"><i>(**)
  </i></font><font color="#FF0000"><b>PROCEDURE </b></font>SetBitB<font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>B <font color="#000080">: </font>Byte<font color="#000080">; </font>bit <font color="#000080">: </font>bbit<font color="#000080">);
              </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>ASM
    </b></font><font color="#FF00FF">MOV CL, bit
    MOV BL, 1
    SHL BL, CL      </font><font color="#008000"><i>{BL contains 2-to-the-bit}
    </i></font><font color="#FF00FF">LES DI, B
    OR ES:[DI], BL  </font><font color="#008000"><i>{OR turns on bit}
  </i></font><font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>PROCEDURE </b></font>ClearBitB<font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>B <font color="#000080">: </font>Byte<font color="#000080">; </font>bit <font color="#000080">: </font>bbit<font color="#000080">);
              </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>ASM
    </b></font><font color="#FF00FF">MOV CL, bit
    MOV BL, 1
    SHL BL, CL      </font><font color="#008000"><i>{BL contains 2-to-the-bit}
    </i></font><font color="#FF00FF">NOT BL
    LES DI, B
    AND ES:[DI], BL </font><font color="#008000"><i>{AND of NOT BL turns off bit}
  </i></font><font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>PROCEDURE </b></font>ToggleBitB<font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>B <font color="#000080">: </font>Byte<font color="#000080">; </font>bit <font color="#000080">: </font>bbit<font color="#000080">);
              </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>ASM
    </b></font><font color="#FF00FF">MOV CL, bit
    MOV BL, 1
    SHL BL, CL      </font><font color="#008000"><i>{BL contains 2-to-the-bit}
    </i></font><font color="#FF00FF">LES DI, B
    XOR ES:[DI], BL </font><font color="#008000"><i>{XOR toggles bit}
  </i></font><font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>FUNCTION </b></font>BitSetB<font color="#000080">(</font>B <font color="#000080">: </font>Byte<font color="#000080">; </font>bit <font color="#000080">: </font>bbit<font color="#000080">) : </font>Boolean<font color="#000080">;
             </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>ASM
    </b></font><font color="#FF00FF">MOV CL, bit
    MOV BL, 1
    SHL BL, CL      </font><font color="#008000"><i>{BL contains 2-to-the-bit}
    </i></font><font color="#FF00FF">MOV AL, 0       </font><font color="#008000"><i>{set result to FALSE}
    </i></font><font color="#FF00FF">TEST B, BL
    JZ @No
    INC AL          </font><font color="#008000"><i>{set result to TRUE}
    </i></font><font color="#FF00FF">@No:
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>FUNCTION </b></font>BitClearB<font color="#000080">(</font>B <font color="#000080">: </font>Byte<font color="#000080">; </font>bit <font color="#000080">: </font>bbit<font color="#000080">) : </font>Boolean<font color="#000080">;
             </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>ASM
    </b></font><font color="#FF00FF">MOV CL, bit
    MOV BL, 1
    SHL BL, CL      </font><font color="#008000"><i>{BL contains 2-to-the-bit}
    </i></font><font color="#FF00FF">MOV AL, 0       </font><font color="#008000"><i>{set result to FALSE}
    </i></font><font color="#FF00FF">TEST B, BL
    JNZ @No
    INC AL          </font><font color="#008000"><i>{set result to TRUE}
    </i></font><font color="#FF00FF">@No:
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>PROCEDURE </b></font>SetBitW<font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>W <font color="#000080">: </font>Word<font color="#000080">; </font>bit <font color="#000080">: </font>wbit<font color="#000080">);
              </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>ASM
    </b></font><font color="#FF00FF">MOV CL, bit
    MOV BX, 1
    SHL BX, CL      </font><font color="#008000"><i>{BX contains 2-to-the-bit}
    </i></font><font color="#FF00FF">LES DI, W
    OR ES:[DI], BX  </font><font color="#008000"><i>{OR turns on bit}
  </i></font><font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>PROCEDURE </b></font>ClearBitW<font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>W <font color="#000080">: </font>Word<font color="#000080">; </font>bit <font color="#000080">: </font>wbit<font color="#000080">);
              </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>ASM
    </b></font><font color="#FF00FF">MOV CL, bit
    MOV BX, 1
    SHL BX, CL      </font><font color="#008000"><i>{BX contains 2-to-the-bit}
    </i></font><font color="#FF00FF">NOT BX
    LES DI, W
    AND ES:[DI], BX </font><font color="#008000"><i>{AND of NOT BX turns off bit}
  </i></font><font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>PROCEDURE </b></font>ToggleBitW<font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>W <font color="#000080">: </font>Word<font color="#000080">; </font>bit <font color="#000080">: </font>wbit<font color="#000080">);
              </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>ASM
    </b></font><font color="#FF00FF">MOV CL, bit
    MOV BX, 1
    SHL BX, CL      </font><font color="#008000"><i>{BX contains 2-to-the-bit}
    </i></font><font color="#FF00FF">LES DI, W
    XOR ES:[DI], BX </font><font color="#008000"><i>{XOR toggles bit}
  </i></font><font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>FUNCTION </b></font>BitSetW<font color="#000080">(</font>W <font color="#000080">: </font>Word<font color="#000080">; </font>bit <font color="#000080">: </font>wbit<font color="#000080">) : </font>Boolean<font color="#000080">;
             </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>ASM
    </b></font><font color="#FF00FF">MOV CL, bit
    MOV BX, 1
    SHL BX, CL      </font><font color="#008000"><i>{BX contains 2-to-the-bit}
    </i></font><font color="#FF00FF">MOV AL, 0       </font><font color="#008000"><i>{set result to FALSE}
    </i></font><font color="#FF00FF">TEST W, BX
    JZ @No
    INC AL          </font><font color="#008000"><i>{set result to TRUE}
    </i></font><font color="#FF00FF">@No:
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>FUNCTION </b></font>BitClearW<font color="#000080">(</font>W <font color="#000080">: </font>Word<font color="#000080">; </font>bit <font color="#000080">: </font>wbit<font color="#000080">) : </font>Boolean<font color="#000080">;
             </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>ASM
    </b></font><font color="#FF00FF">MOV CL, bit
    MOV BX, 1
    SHL BX, CL      </font><font color="#008000"><i>{BX contains 2-to-the-bit}
    </i></font><font color="#FF00FF">MOV AL, 0       </font><font color="#008000"><i>{set result to FALSE}
    </i></font><font color="#FF00FF">TEST W, BX
    JNZ @No
    INC AL          </font><font color="#008000"><i>{set result to TRUE}
    </i></font><font color="#FF00FF">@No:
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>PROCEDURE </b></font>SetBitL<font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>L <font color="#000080">: </font>LongInt<font color="#000080">; </font>bit <font color="#000080">: </font>lbit<font color="#000080">);
              </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>ASM
    </b></font><font color="#FF00FF">LES DI, L
    MOV CL, bit
    MOV BX, 1
    SHL BX, CL      </font><font color="#008000"><i>{BX contains 2-to-the-bit}
    </i></font><font color="#FF00FF">JZ @TopWord     </font><font color="#008000"><i>{if zero, use high word}
    </i></font><font color="#FF00FF">OR ES:[DI], BX  </font><font color="#008000"><i>{OR turns on bit}
    </i></font><font color="#FF00FF">JMP @Finish
    @TopWord:
    SUB CL, 16
    MOV BX, 1
    SHL BX, CL
    OR ES:[DI+2], BX
    @Finish:
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>PROCEDURE </b></font>ClearBitL<font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>L <font color="#000080">: </font>LongInt<font color="#000080">; </font>bit <font color="#000080">: </font>lbit<font color="#000080">);
              </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>ASM
    </b></font><font color="#FF00FF">LES DI, L
    MOV CL, bit
    MOV BX, 1
    SHL BX, CL      </font><font color="#008000"><i>{BX contains 2-to-the-bit}
    </i></font><font color="#FF00FF">JZ @TopWord     </font><font color="#008000"><i>{if zero, use high word}
    </i></font><font color="#FF00FF">NOT BX
    AND ES:[DI], BX </font><font color="#008000"><i>{AND of NOT BX turns off bit}
    </i></font><font color="#FF00FF">JMP @Finish
    @TopWord:
    SUB CL, 16
    MOV BX, 1
    SHL BX, CL
    NOT BX
    AND ES:[DI+2], BX
    @Finish:
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>PROCEDURE </b></font>ToggleBitL<font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>L <font color="#000080">: </font>LongInt<font color="#000080">; </font>bit <font color="#000080">: </font>lbit<font color="#000080">);
              </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>ASM
    </b></font><font color="#FF00FF">LES DI, L
    MOV CL, bit
    MOV BX, 1
    SHL BX, CL      </font><font color="#008000"><i>{BX contains 2-to-the-bit}
    </i></font><font color="#FF00FF">JZ @TopWord     </font><font color="#008000"><i>{if zero, use high word}
    </i></font><font color="#FF00FF">XOR ES:[DI], BX </font><font color="#008000"><i>{XOR toggles bit}
    </i></font><font color="#FF00FF">JMP @Finish
    @TopWord:
    SUB CL, 16
    MOV BX, 1
    SHL BX, CL
    XOR ES:[DI+2], BX
    @Finish:
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>FUNCTION </b></font>BitSetL<font color="#000080">(</font>L <font color="#000080">: </font>LongInt<font color="#000080">; </font>bit <font color="#000080">: </font>lbit<font color="#000080">) : </font>Boolean<font color="#000080">;
             </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>ASM
    </b></font><font color="#FF00FF">MOV AL, 0       </font><font color="#008000"><i>{set result to FALSE}
    </i></font><font color="#FF00FF">MOV CL, bit
    MOV BX, 1
    SHL BX, CL      </font><font color="#008000"><i>{BX contains 2-to-the-bit}
    </i></font><font color="#FF00FF">JZ @TopWord     </font><font color="#008000"><i>{if zero, use high word}
    </i></font><font color="#FF00FF">TEST Word(L), BX
    JMP @Finish
    @TopWord:
    SUB CL, 16
    MOV BX, 1
    SHL BX, CL
    TEST Word(L+2), BX
    @Finish:
    JZ @No
    INC AL          </font><font color="#008000"><i>{set result to TRUE}
    </i></font><font color="#FF00FF">@No:
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>FUNCTION </b></font>BitClearL<font color="#000080">(</font>L <font color="#000080">: </font>LongInt<font color="#000080">; </font>bit <font color="#000080">: </font>lbit<font color="#000080">) : </font>Boolean<font color="#000080">;
             </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>ASM
    </b></font><font color="#FF00FF">MOV AL, 0       </font><font color="#008000"><i>{set result to FALSE}
    </i></font><font color="#FF00FF">MOV CL, bit
    MOV BX, 1
    SHL BX, CL      </font><font color="#008000"><i>{BX contains 2-to-the-bit}
    </i></font><font color="#FF00FF">JZ @TopWord     </font><font color="#008000"><i>{if zero, use high word}
    </i></font><font color="#FF00FF">TEST Word(L), BX
    JMP @Finish
    @TopWord:
    SUB CL, 16
    MOV BX, 1
    SHL BX, CL
    TEST Word(L+2), BX
    @Finish:
    JNZ @No
    INC AL          </font><font color="#008000"><i>{set result to TRUE}
    </i></font><font color="#FF00FF">@No:
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to NUMBERS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0037.PAS">Original</a><b>]</b></p></body>
</html>
