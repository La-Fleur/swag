<html>
<head><title> "BITS2.PAS" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to NUMBERS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0002.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
ROB GREEN

&gt; What if I want to just access a bit?  Say I have a Byte, to store
&gt; Various access levels (if it does/doesn't have this, that, or the
&gt; other).  How can I
&gt; 1)  Access, say, bit 4?
&gt; 2)  Give, say, bit 4, a value of 1?

Heres a Procedure i wrote to handle all that.  if you need speed, then
i suggest to manually check each bit, rather than use the Procedures.

(these Procedures are based on 1, not 0.  thus each Byte is like so:
87654321   instead of 76543210.  to change to 0 base, change the Array to
[0..31] instead of [1..32].)

to set a bit: (b is an Integer Type, BIT is which bit to set
   b:=b or BIT;   ex: b:=b or 128  (set bit 8)

to clear a bit:
   b:=b and not BIT;  ex:b:=b and not 8;  (clears bit 4)

to check a bit:
   if b and BIT&lt;&gt;0 then..  ex:if b and 64 then..  (check bit 7)
}

</i></font><font color="#FF0000"><b>Const
</b></font><font color="#008000"><i>{ Used to convert the Bit value to the actual corresponding number }
   </i></font>bit <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">32</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>LongInt <font color="#000080">=
       (</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">, </font><font color="#800000">4</font><font color="#000080">, </font><font color="#800000">8</font><font color="#000080">, </font><font color="#800000">$10</font><font color="#000080">, </font><font color="#800000">$20</font><font color="#000080">, </font><font color="#800000">$40</font><font color="#000080">, </font><font color="#800000">$80</font><font color="#000080">, </font><font color="#800000">$100</font><font color="#000080">, </font><font color="#800000">$200</font><font color="#000080">, </font><font color="#800000">$400</font><font color="#000080">, </font><font color="#800000">$800</font><font color="#000080">, </font><font color="#800000">$1000</font><font color="#000080">, </font><font color="#800000">$2000</font><font color="#000080">,
        </font><font color="#800000">$4000</font><font color="#000080">, </font><font color="#800000">$8000</font><font color="#000080">, </font><font color="#800000">$10000</font><font color="#000080">, </font><font color="#800000">$20000</font><font color="#000080">, </font><font color="#800000">$40000</font><font color="#000080">, </font><font color="#800000">$80000</font><font color="#000080">, </font><font color="#800000">$100000</font><font color="#000080">, </font><font color="#800000">$200000</font><font color="#000080">,
        </font><font color="#800000">$400000</font><font color="#000080">, </font><font color="#800000">$800000</font><font color="#000080">, </font><font color="#800000">$1000000</font><font color="#000080">, </font><font color="#800000">$2000000</font><font color="#000080">, </font><font color="#800000">$4000000</font><font color="#000080">, </font><font color="#800000">$8000000</font><font color="#000080">, </font><font color="#800000">$10000000</font><font color="#000080">,
        </font><font color="#800000">$20000000</font><font color="#000080">, </font><font color="#800000">$40000000</font><font color="#000080">, </font><font color="#800000">$80000000</font><font color="#000080">);

</font><font color="#008000"><i>{b is which bit to set(1-32), size is the size of temp.
Use  SIZEOF(TEMP) to get the value, and temp is the actuall Integer based
number
returns True if bit set, False if not}

</i></font><font color="#FF0000"><b>Function </b></font>checkbit<font color="#000080">(</font>b <font color="#000080">: </font>Byte<font color="#000080">; </font>size <font color="#000080">: </font>Byte<font color="#000080">; </font><font color="#FF0000"><b>Var </b></font>temp<font color="#000080">) : </font>Boolean<font color="#000080">; </font><font color="#008000"><i>{1-32}
</i></font><font color="#FF0000"><b>Var
  </b></font>c <font color="#000080">: </font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>begin
   </b></font>c<font color="#000080">:=</font>False<font color="#000080">;
   </font><font color="#FF0000"><b>Case </b></font>size <font color="#FF0000"><b>of
     </b></font><font color="#800000">1 </font><font color="#000080">: </font>c <font color="#000080">:= </font>Byte<font color="#000080">(</font>temp<font color="#000080">) </font><font color="#FF0000"><b>and </b></font>bit<font color="#000080">[</font>b<font color="#000080">] &lt;&gt; </font><font color="#800000">0</font><font color="#000080">;     </font><font color="#008000"><i>{Byte,shortint}
     </i></font><font color="#800000">2 </font><font color="#000080">: </font>c <font color="#000080">:= </font>Word<font color="#000080">(</font>temp<font color="#000080">) </font><font color="#FF0000"><b>and </b></font>bit<font color="#000080">[</font>b<font color="#000080">] &lt;&gt; </font><font color="#800000">0</font><font color="#000080">;     </font><font color="#008000"><i>{Word,Integer}
     </i></font><font color="#800000">4 </font><font color="#000080">: </font>c <font color="#000080">:= </font>LongInt<font color="#000080">(</font>temp<font color="#000080">) </font><font color="#FF0000"><b>and </b></font>bit<font color="#000080">[</font>b<font color="#000080">] &lt;&gt; </font><font color="#800000">0</font><font color="#000080">;  </font><font color="#008000"><i>{LongInt}
     </i></font><font color="#FF0000"><b>else
       </b></font>Writeln<font color="#000080">(</font><font color="#800000">'Invalid size'</font><font color="#000080">);
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font>checkbit <font color="#000080">:= </font>c<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{b,size,and temp same as above.  if onoff =True the bit will be set,
else the bit will be cleared}

</i></font><font color="#FF0000"><b>Procedure </b></font>setbit<font color="#000080">(</font>b <font color="#000080">: </font>Byte<font color="#000080">; </font>onoff <font color="#000080">: </font>Boolean<font color="#000080">; </font>size <font color="#000080">: </font>Byte<font color="#000080">; </font><font color="#FF0000"><b>Var </b></font>temp<font color="#000080">); </font><font color="#008000"><i>{1-32}
</i></font><font color="#FF0000"><b>begin
   if </b></font>onoff <font color="#FF0000"><b>then
   Case </b></font>size <font color="#FF0000"><b>of
     </b></font><font color="#800000">1 </font><font color="#000080">: </font>Byte<font color="#000080">(</font>temp<font color="#000080">) := </font>Byte<font color="#000080">(</font>temp<font color="#000080">) </font><font color="#FF0000"><b>or </b></font>bit<font color="#000080">[</font>b<font color="#000080">];        </font><font color="#008000"><i>{Byte}
     </i></font><font color="#800000">2 </font><font color="#000080">: </font>Word<font color="#000080">(</font>temp<font color="#000080">) := </font>Word<font color="#000080">(</font>temp<font color="#000080">) </font><font color="#FF0000"><b>or </b></font>bit<font color="#000080">[</font>b<font color="#000080">];        </font><font color="#008000"><i>{Word}
     </i></font><font color="#800000">4 </font><font color="#000080">: </font>LongInt<font color="#000080">(</font>temp<font color="#000080">) := </font>LongInt<font color="#000080">(</font>Temp<font color="#000080">) </font><font color="#FF0000"><b>or </b></font>bit<font color="#000080">[</font>b<font color="#000080">];  </font><font color="#008000"><i>{LongInt}
     </i></font><font color="#FF0000"><b>else
       </b></font>Writeln<font color="#000080">(</font><font color="#800000">'Invalid size'</font><font color="#000080">);
   </font><font color="#FF0000"><b>end
   else
   Case </b></font>size <font color="#FF0000"><b>of
     </b></font><font color="#800000">1 </font><font color="#000080">: </font>Byte<font color="#000080">(</font>temp<font color="#000080">) := </font>Byte<font color="#000080">(</font>temp<font color="#000080">) </font><font color="#FF0000"><b>and not </b></font>bit<font color="#000080">[</font>b<font color="#000080">];   </font><font color="#008000"><i>{Byte}
     </i></font><font color="#800000">2 </font><font color="#000080">: </font>Word<font color="#000080">(</font>temp<font color="#000080">) := </font>Word<font color="#000080">(</font>temp<font color="#000080">) </font><font color="#FF0000"><b>and not </b></font>bit<font color="#000080">[</font>b<font color="#000080">];   </font><font color="#008000"><i>{Word}
     </i></font><font color="#800000">4 </font><font color="#000080">: </font>LongInt<font color="#000080">(</font>temp<font color="#000080">) := </font>LongInt<font color="#000080">(</font>Temp<font color="#000080">) </font><font color="#FF0000"><b>and not </b></font>bit<font color="#000080">[</font>b<font color="#000080">];</font><font color="#008000"><i>{LongInt}
     </i></font><font color="#FF0000"><b>else
       </b></font>Writeln<font color="#000080">(</font><font color="#800000">'Invalid size'</font><font color="#000080">);
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{this is a sample test Program i wrote For you to see how to use the
stuff above}

</i></font><font color="#FF0000"><b>Var
  </b></font>i <font color="#000080">: </font>LongInt<font color="#000080">;
  </font>j <font color="#000080">: </font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
   </b></font>i <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
   </font>setbit<font color="#000080">(</font><font color="#800000">4</font><font color="#000080">,</font>True<font color="#000080">,</font>sizeof<font color="#000080">(</font>i<font color="#000080">),</font>i<font color="#000080">);  </font><font color="#008000"><i>{8}
   </i></font>Writeln<font color="#000080">(</font>i<font color="#000080">);
   </font>setbit<font color="#000080">(</font><font color="#800000">9</font><font color="#000080">,</font>True<font color="#000080">,</font>sizeof<font color="#000080">(</font>i<font color="#000080">),</font>i<font color="#000080">);  </font><font color="#008000"><i>{256+8 = 264}
   </i></font>Writeln<font color="#000080">(</font>i<font color="#000080">);
   </font>setbit<font color="#000080">(</font><font color="#800000">9</font><font color="#000080">,</font>False<font color="#000080">,</font>sizeof<font color="#000080">(</font>i<font color="#000080">),</font>i<font color="#000080">); </font><font color="#008000"><i>{8}
   </i></font>Writeln<font color="#000080">(</font>i<font color="#000080">);
   </font>setbit<font color="#000080">(</font><font color="#800000">20</font><font color="#000080">,</font>True<font color="#000080">,</font>sizeof<font color="#000080">(</font>i<font color="#000080">),</font>i<font color="#000080">); </font><font color="#008000"><i>{ $80000+8 = $80008}
   </i></font>Writeln<font color="#000080">(</font>i<font color="#000080">);
   </font><font color="#FF0000"><b>For </b></font>i <font color="#000080">:= </font><font color="#800000">65550 </font><font color="#FF0000"><b>to </b></font><font color="#800000">65575 </font><font color="#FF0000"><b>do
   begin
     </b></font>Write<font color="#000080">(</font>i <font color="#000080">: </font><font color="#800000">8</font><font color="#000080">, </font><font color="#800000">' = '</font><font color="#000080">);
     </font><font color="#FF0000"><b>For </b></font>j <font color="#000080">:= </font><font color="#800000">32 </font><font color="#FF0000"><b>downto </b></font><font color="#800000">1 </font><font color="#FF0000"><b>do </b></font><font color="#008000"><i>{to print right}
       </i></font><font color="#FF0000"><b>if </b></font>checkbit<font color="#000080">(</font>j<font color="#000080">, </font>sizeof<font color="#000080">(</font>i<font color="#000080">), </font>i<font color="#000080">) </font><font color="#FF0000"><b>then
         </b></font>Write<font color="#000080">(</font><font color="#800000">'1'</font><font color="#000080">)
       </font><font color="#FF0000"><b>else
         </b></font>Write<font color="#000080">(</font><font color="#800000">'0'</font><font color="#000080">);
     </font>Writeln<font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to NUMBERS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0002.PAS">Original</a><b>]</b></p></body>
</html>
