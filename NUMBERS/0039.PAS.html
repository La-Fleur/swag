<html>
<head><title> "Complex Numbers" by DJ MURDOCH</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to NUMBERS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0039.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt;A&gt;overlooked. No Pascal compiler that I know of (including Turbo) can return
&gt;A&gt;a complex value (i.e., a record or an array) from a FUNCTION. In order for
&gt;
&gt;Hmm...never tried this before. Anyway, the sollution is quite simple:
&gt;just have the megaword-variable public, and pass it to the procedure.

Returning function values by setting a public variable is pretty dangerous -
what if your function calls another that uses the same public to return its
value?  In this case, it's not necessary, since there's a trick to let TP
return complex numbers:
}

</i></font><font color="#FF0000"><b>type
  </b></font>Float <font color="#000080">= </font>Double<font color="#000080">;
  </font>TComplex <font color="#000080">= </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">2</font><font color="#000080">*</font>sizeof<font color="#000080">(</font>float<font color="#000080">)];
  </font><font color="#008000"><i>{ Complex number.  Not a true string:  the values are stored in binary
    format within it. }

  </i></font>TCmplx <font color="#000080">= </font><font color="#FF0000"><b>record   </b></font><font color="#008000"><i>{ The internal storage format for TComplex }
    </i></font>len <font color="#000080">: </font>byte<font color="#000080">;
    </font>r<font color="#000080">,</font>i <font color="#000080">: </font>float<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>Re<font color="#000080">(</font>z<font color="#000080">:</font>TComplex<font color="#000080">):</font>float<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Re <font color="#000080">:= </font>TCmplx<font color="#000080">(</font>z<font color="#000080">).</font>r<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>Im<font color="#000080">(</font>z<font color="#000080">:</font>TComplex<font color="#000080">):</font>float<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Im <font color="#000080">:= </font>TCmplx<font color="#000080">(</font>z<font color="#000080">).</font>i<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>Complex<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">:</font>float<font color="#000080">):</font>TComplex<font color="#000080">;
</font><font color="#008000"><i>{ Convert x + iy to complex number. }
</i></font><font color="#FF0000"><b>var
  </b></font>result <font color="#000080">: </font>TCmplx<font color="#000080">;
</font><font color="#FF0000"><b>begin
  with </b></font>result <font color="#FF0000"><b>do
  begin
    </b></font>len <font color="#000080">:= </font><font color="#800000">2</font><font color="#000080">*</font>sizeof<font color="#000080">(</font>float<font color="#000080">);
    </font>r <font color="#000080">:= </font>x<font color="#000080">;
    </font>i <font color="#000080">:= </font>y<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>Complex <font color="#000080">:= </font>TComplex<font color="#000080">(</font>result<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{You can use these to build up lots of functions returning TComplex types.}
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to NUMBERS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0039.PAS">Original</a><b>]</b></p></body>
</html>
