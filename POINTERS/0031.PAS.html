<html>
<head><title> "Displaying Pointer Values on Screen" by IAN LIN</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to POINTERS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0031.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{ Convert it to 2 words and then do it. You can do it like this; }
</i></font><font color="#FF0000"><b>Type
 </b></font>St4  <font color="#000080">= </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">4</font><font color="#000080">];
 </font>PRec <font color="#000080">= </font><font color="#FF0000"><b>record
  </b></font>Ofs<font color="#000080">, </font>Seg<font color="#000080">: </font>Word<font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Var
 </b></font>P<font color="#000080">:</font>Pointer<font color="#000080">;
 </font>P2<font color="#000080">:</font>PRec <font color="#FF0000"><b>absolute </b></font>P<font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Hexw<font color="#000080">(</font>w<font color="#000080">:</font>word<font color="#000080">):</font>st4<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>s<font color="#000080">:</font>st4<font color="#000080">; </font>c<font color="#000080">:</font>byte<font color="#000080">; </font>n<font color="#000080">:</font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">2</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte <font color="#FF0000"><b>absolute </b></font>w<font color="#000080">;
</font><font color="#FF0000"><b>begin
 </b></font>s<font color="#000080">:=</font><font color="#800000">''</font><font color="#000080">;
 </font><font color="#FF0000"><b>for </b></font>c<font color="#000080">:=</font><font color="#800000">2 </font><font color="#FF0000"><b>downto </b></font><font color="#800000">1 </font><font color="#FF0000"><b>do </b></font>s<font color="#000080">:=</font>s<font color="#000080">+</font>hexid<font color="#000080">[</font>n<font color="#000080">[</font>c<font color="#000080">] </font><font color="#FF0000"><b>shr </b></font><font color="#800000">4</font><font color="#000080">]+</font>hexid<font color="#000080">[</font>n<font color="#000080">[</font>c<font color="#000080">] </font><font color="#FF0000"><b>and </b></font><font color="#800000">$f</font><font color="#000080">];
 </font>hexw<font color="#000080">:=</font>s<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Begin
 </b></font>Writeln<font color="#000080">(</font><font color="#800000">'Pointer P is at address: '</font><font color="#000080">,</font>P2<font color="#000080">.</font>Seg<font color="#000080">,</font><font color="#800000">':'</font><font color="#000080">,</font>P2<font color="#000080">.</font>Ofs<font color="#000080">,</font><font color="#800000">'.'</font><font color="#000080">);
 </font>writeln<font color="#000080">(</font><font color="#800000">'In hex, that''s '</font><font color="#000080">,</font>hexw<font color="#000080">(</font>p2<font color="#000080">.</font>seg<font color="#000080">),</font><font color="#800000">':'</font><font color="#000080">,</font>hexw<font color="#000080">(</font>p2<font color="#000080">.</font>ofs<font color="#000080">,</font><font color="#800000">'.'</font><font color="#000080">);
</font><font color="#FF0000"><b>End</b></font><font color="#000080">.
</font><font color="#008000"><i>{
You can also use typecasting instead of absolute variables. To do this,
you would use PRec(p) instead of P2 in all places.

&gt; am making an exitprocedure for runtime errors, but when I try to write
&gt; the address, its not allowed. I triedto convert it to a word but no-go.
&gt; Anyone, any ideas would be nicely taken.

It's not 1 word but 2. Word is 2 bytes, longint and pointer are 4. PRec
splits it into 2 fields each of size Word.
}
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to POINTERS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0031.PAS">Original</a><b>]</b></p></body>
</html>
