<html>
<head><title> "OOP-LLST.PAS" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to POINTERS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0005.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>Program </b></font>Linked<font color="#000080">;

</font><font color="#FF0000"><b>Type
  </b></font>FileDescriptor <font color="#000080">=
    </font><font color="#FF0000"><b>Object
      </b></font>Fpt       <font color="#000080">: </font><font color="#FF0000"><b>File</b></font><font color="#000080">;
      </font>Name      <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">80</font><font color="#000080">];
      </font>HeaderSize<font color="#000080">: </font>Word<font color="#000080">;
      </font>RecordSize<font color="#000080">: </font>Word<font color="#000080">;
      </font>RecordPtr <font color="#000080">: </font>Pointer<font color="#000080">;
      </font>SoftPut   <font color="#000080">: </font>Boolean<font color="#000080">;
      </font>IsOpen    <font color="#000080">: </font>Boolean<font color="#000080">;
      </font>CurRec    <font color="#000080">: </font>LongInt<font color="#000080">;

      </font><font color="#FF0000"><b>Constructor </b></font>Init<font color="#000080">(</font>Nam <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">; </font>Hdr <font color="#000080">: </font>Word<font color="#000080">; </font>Size <font color="#000080">: </font>Word<font color="#000080">; </font>Buff <font color="#000080">: </font>Pointer<font color="#000080">;
</font>Put <font color="#000080">: </font>Boolean<font color="#000080">);
      </font><font color="#FF0000"><b>Destructor  </b></font>Done<font color="#000080">; </font><font color="#FF0000"><b>Virtual</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>Procedure   </b></font>OpenFile<font color="#000080">; </font><font color="#FF0000"><b>Virtual</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>Procedure   </b></font>CloseFile<font color="#000080">; </font><font color="#FF0000"><b>Virtual</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>Procedure   </b></font>GetRecord<font color="#000080">(</font>Rec <font color="#000080">: </font>LongInt<font color="#000080">);
      </font><font color="#FF0000"><b>Procedure   </b></font>PutRecord<font color="#000080">(</font>Rec <font color="#000080">: </font>LongInt<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>FileLable <font color="#000080">=
    </font><font color="#FF0000"><b>Record
      </b></font>Eof <font color="#000080">: </font>LongInt<font color="#000080">;
      </font>MRD <font color="#000080">: </font>LongInt<font color="#000080">;
      </font>Act <font color="#000080">: </font>LongInt<font color="#000080">;
      </font>Val <font color="#000080">: </font>LongInt<font color="#000080">;
      </font>Sync<font color="#000080">: </font>LongInt<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>LabeledFile <font color="#000080">=
    </font><font color="#FF0000"><b>Object</b></font><font color="#000080">(</font>FileDescriptor<font color="#000080">)
      </font>Header <font color="#000080">: </font>FileLable<font color="#000080">;

      </font><font color="#FF0000"><b>Constructor </b></font>Init<font color="#000080">(</font>Nam <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">; </font>Size <font color="#000080">: </font>Word<font color="#000080">; </font>Buff <font color="#000080">: </font>Pointer<font color="#000080">; </font>Put <font color="#000080">:
</font>Boolean<font color="#000080">);
      </font><font color="#FF0000"><b>Destructor  </b></font>Done<font color="#000080">; </font><font color="#FF0000"><b>Virtual</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>Procedure   </b></font>OpenFile<font color="#000080">; </font><font color="#FF0000"><b>Virtual</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>Procedure   </b></font>CloseFile<font color="#000080">; </font><font color="#FF0000"><b>Virtual</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>Procedure   </b></font>WriteHeader<font color="#000080">;
      </font><font color="#FF0000"><b>Procedure   </b></font>ReadHeader<font color="#000080">;
      </font><font color="#FF0000"><b>Procedure   </b></font>AddRecord<font color="#000080">;
      </font><font color="#FF0000"><b>Procedure   </b></font>DelRecord<font color="#000080">(</font>Rec <font color="#000080">: </font>LongInt<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>DetailHeaderPtr <font color="#000080">= ^</font>DetailHeader<font color="#000080">;
  </font>DetailHeader <font color="#000080">=
    </font><font color="#FF0000"><b>Record
      </b></font>Master <font color="#000080">: </font>LongInt<font color="#000080">;
      </font>Prev   <font color="#000080">: </font>LongInt<font color="#000080">;
      </font>Next   <font color="#000080">: </font>LongInt<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>MasterHeaderPtr <font color="#000080">= ^</font>MasterHeader<font color="#000080">;
  </font>MasterHeader <font color="#000080">=
    </font><font color="#FF0000"><b>Record
      </b></font>First  <font color="#000080">: </font>LongInt<font color="#000080">;
      </font>Last   <font color="#000080">: </font>LongInt<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>DetailFileDetailPtr <font color="#000080">= ^</font>DetailFileDetail<font color="#000080">;
  </font>DetailFileDetail <font color="#000080">=
    </font><font color="#FF0000"><b>Object</b></font><font color="#000080">(</font>LabeledFile<font color="#000080">)
      </font><font color="#FF0000"><b>Constructor </b></font>Init<font color="#000080">(</font>Nam <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">; </font>Size <font color="#000080">: </font>Word<font color="#000080">; </font>Buff <font color="#000080">: </font>Pointer<font color="#000080">; </font>Put <font color="#000080">:
</font>Boolean<font color="#000080">);
      </font><font color="#FF0000"><b>Procedure   </b></font>LinkChain<font color="#000080">(</font>MR<font color="#000080">, </font>Last<font color="#000080">, </font>Curr <font color="#000080">: </font>LongInt<font color="#000080">);
      </font><font color="#FF0000"><b>Procedure   </b></font>DelinkChain<font color="#000080">(</font>Rec <font color="#000080">: </font>LongInt<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>DetailFileMaster <font color="#000080">=
    </font><font color="#FF0000"><b>Object</b></font><font color="#000080">(</font>LabeledFile<font color="#000080">)
      </font><font color="#FF0000"><b>Constructor </b></font>Init<font color="#000080">(</font>Nam <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">; </font>Size <font color="#000080">: </font>Word<font color="#000080">; </font>Buff <font color="#000080">: </font>Pointer<font color="#000080">; </font>Put <font color="#000080">:
</font>Boolean<font color="#000080">);
      </font><font color="#FF0000"><b>Procedure   </b></font>LinkDetail<font color="#000080">(</font>DF <font color="#000080">: </font>DetailFileDetailPtr<font color="#000080">);
      </font><font color="#FF0000"><b>Procedure   </b></font>DelinkDetail<font color="#000080">(</font>DF <font color="#000080">: </font>DetailFileDetailPtr<font color="#000080">; </font>DR <font color="#000080">: </font>LongInt<font color="#000080">);
      </font><font color="#FF0000"><b>Procedure   </b></font>GetFirst<font color="#000080">(</font>DF <font color="#000080">: </font>DetailFileDetailPtr<font color="#000080">);
      </font><font color="#FF0000"><b>Procedure   </b></font>GetLast<font color="#000080">(</font>DF <font color="#000080">: </font>DetailFileDetailPtr<font color="#000080">);
      </font><font color="#FF0000"><b>Procedure   </b></font>GetNext<font color="#000080">(</font>DF <font color="#000080">: </font>DetailFileDetailPtr<font color="#000080">);
      </font><font color="#FF0000"><b>Procedure   </b></font>GetPrev<font color="#000080">(</font>DF <font color="#000080">: </font>DetailFileDetailPtr<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{---------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>Constructor </b></font>FileDescriptor<font color="#000080">.</font>Init<font color="#000080">(</font>Nam <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">; </font>Hdr <font color="#000080">: </font>Word<font color="#000080">; </font>Size <font color="#000080">: </font>Word<font color="#000080">; </font>Buff <font color="#000080">:
                                </font>Pointer<font color="#000080">; </font>Put <font color="#000080">: </font>Boolean<font color="#000080">);
  </font><font color="#FF0000"><b>begin
    </b></font>IsOpen <font color="#000080">:= </font>False<font color="#000080">;
    </font>Name <font color="#000080">:= </font>Nam<font color="#000080">;
    </font>HeaderSize <font color="#000080">:= </font>Hdr<font color="#000080">;
    </font>RecordSize <font color="#000080">:= </font>Size<font color="#000080">;
    </font>RecordPtr <font color="#000080">:= </font>Buff<font color="#000080">;
    </font>SoftPut <font color="#000080">:= </font>Put<font color="#000080">;
    </font>CurRec <font color="#000080">:= -</font><font color="#800000">1</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Destructor  </b></font>FileDescriptor<font color="#000080">.</font>Done<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    if </b></font>SoftPut <font color="#FF0000"><b>and </b></font><font color="#000080">(</font>CurRec <font color="#000080">&lt;&gt; -</font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>then
        </b></font>PutRecord<font color="#000080">(</font>CurRec<font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font>IsOpen <font color="#FF0000"><b>then
        </b></font>CloseFile<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure   </b></font>FileDescriptor<font color="#000080">.</font>OpenFile<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    if </b></font>IsOpen <font color="#FF0000"><b>then
        </b></font>Exit<font color="#000080">;
    </font>Assign<font color="#000080">(</font>Fpt<font color="#000080">,</font>Name<font color="#000080">);
    </font><font color="#008000"><i>{$I-}
    </i></font>Reset<font color="#000080">(</font>Fpt<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font>IoResult <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
        </b></font>ReWrite<font color="#000080">(</font>Fpt<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font>IoResult <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then
        </b></font>IsOpen <font color="#000080">:= </font>True<font color="#000080">;
    </font><font color="#008000"><i>{$I+}
    </i></font>CurRec <font color="#000080">:= -</font><font color="#800000">1</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure   </b></font>FileDescriptor<font color="#000080">.</font>CloseFile<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    if not </b></font>IsOpen <font color="#FF0000"><b>then
        </b></font>Exit<font color="#000080">;
    </font><font color="#008000"><i>{$I-}
    </i></font>Close<font color="#000080">(</font>Fpt<font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font>IoResult <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then
        </b></font>IsOpen <font color="#000080">:= </font>False<font color="#000080">;
    </font><font color="#008000"><i>{$I+}
    </i></font>CurRec <font color="#000080">:= -</font><font color="#800000">1</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure   </b></font>FileDescriptor<font color="#000080">.</font>GetRecord<font color="#000080">(</font>Rec <font color="#000080">: </font>LongInt<font color="#000080">);
  </font><font color="#FF0000"><b>Var
    </b></font>Result <font color="#000080">: </font>Word<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    if not </b></font>IsOpen <font color="#FF0000"><b>then
        </b></font>Exit<font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font>CurRec <font color="#000080">= </font>Rec <font color="#FF0000"><b>then
        </b></font>Exit<font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font>SoftPut <font color="#FF0000"><b>and </b></font><font color="#000080">(</font>CurRec <font color="#000080">&lt;&gt; -</font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>then
        </b></font>PutRecord<font color="#000080">(</font>CurRec<font color="#000080">);
    </font><font color="#008000"><i>{$I-}
    </i></font><font color="#FF0000"><b>if </b></font>Rec <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then
      begin
        </b></font>Seek<font color="#000080">(</font>Fpt<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
        </font><font color="#FF0000"><b>if </b></font>IoResult <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then
          begin
            </b></font>BlockRead<font color="#000080">(</font>Fpt<font color="#000080">,</font>RecordPtr<font color="#000080">^,</font>HeaderSize<font color="#000080">,</font>Result<font color="#000080">);
            </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>Result <font color="#000080">&lt;&gt; </font>HeaderSize<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>IoResult <font color="#000080">&lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
                </b></font><font color="#008000"><i>{Error Routine}</i></font><font color="#000080">;
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>end
    else
      begin
        </b></font>Seek<font color="#000080">(</font>Fpt<font color="#000080">,</font>HeaderSize <font color="#000080">+ (</font>Rec <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">) * </font>RecordSize<font color="#000080">);
        </font><font color="#FF0000"><b>if </b></font>IoResult <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then
          begin
            </b></font>BlockRead<font color="#000080">(</font>Fpt<font color="#000080">,</font>RecordPtr<font color="#000080">^,</font>RecordSize<font color="#000080">,</font>Result<font color="#000080">);
            </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>Result <font color="#000080">&lt;&gt; </font>RecordSize<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>IoResult <font color="#000080">&lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
                </b></font><font color="#008000"><i>{Error Routine}</i></font><font color="#000080">;
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#008000"><i>{$I+}
    </i></font>CurRec <font color="#000080">:= </font>Rec<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure   </b></font>FileDescriptor<font color="#000080">.</font>PutRecord<font color="#000080">(</font>Rec <font color="#000080">: </font>LongInt<font color="#000080">);
  </font><font color="#FF0000"><b>Var
    </b></font>Result <font color="#000080">: </font>Word<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    if not </b></font>IsOpen <font color="#FF0000"><b>then
        </b></font>Exit<font color="#000080">;
    </font><font color="#008000"><i>{$I-}
    </i></font><font color="#FF0000"><b>if </b></font>Rec <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then
      begin
        </b></font>Seek<font color="#000080">(</font>Fpt<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
        </font><font color="#FF0000"><b>if </b></font>IoResult <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then
          begin
            </b></font>BlockWrite<font color="#000080">(</font>Fpt<font color="#000080">,</font>RecordPtr<font color="#000080">^,</font>HeaderSize<font color="#000080">,</font>Result<font color="#000080">);
            </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>Result <font color="#000080">&lt;&gt; </font>HeaderSize<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>IoResult <font color="#000080">&lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
                </b></font><font color="#008000"><i>{Error Routine}</i></font><font color="#000080">;
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>end
    else
      begin
        </b></font>Seek<font color="#000080">(</font>Fpt<font color="#000080">,</font>HeaderSize <font color="#000080">+ (</font>Rec <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">) * </font>RecordSize<font color="#000080">);
        </font><font color="#FF0000"><b>if </b></font>IoResult <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then
          begin
            </b></font>BlockWrite<font color="#000080">(</font>Fpt<font color="#000080">,</font>RecordPtr<font color="#000080">^,</font>RecordSize<font color="#000080">,</font>Result<font color="#000080">);
            </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>Result <font color="#000080">&lt;&gt; </font>RecordSize<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>IoResult <font color="#000080">&lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
                </b></font><font color="#008000"><i>{Error Routine}</i></font><font color="#000080">;
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>CurRec <font color="#000080">:= </font>Rec<font color="#000080">;
    </font><font color="#008000"><i>{$I+}
  </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{---------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>Constructor </b></font>LabeledFile<font color="#000080">.</font>Init<font color="#000080">(</font>Nam <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">; </font>Size <font color="#000080">: </font>Word<font color="#000080">; </font>Buff <font color="#000080">: </font>Pointer<font color="#000080">; </font>Put <font color="#000080">:
</font>Boolean<font color="#000080">);
  </font><font color="#FF0000"><b>begin
    if </b></font>Size <font color="#000080">&lt; </font><font color="#800000">4 </font><font color="#FF0000"><b>then
      begin
        </b></font>WriteLN<font color="#000080">(</font><font color="#800000">'Record size must be 4 or larger'</font><font color="#000080">);
        </font>Fail<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>FileDescriptor<font color="#000080">.</font>Init<font color="#000080">(</font>Nam<font color="#000080">,</font>Sizeof<font color="#000080">(</font>Header<font color="#000080">),</font>Size<font color="#000080">,</font>Buff<font color="#000080">,</font>Put<font color="#000080">);
    </font>Header<font color="#000080">.</font>Eof <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font>Header<font color="#000080">.</font>MRD <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font>Header<font color="#000080">.</font>Act <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font>Header<font color="#000080">.</font>Val <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font>Header<font color="#000080">.</font>Sync<font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Destructor </b></font>LabeledFile<font color="#000080">.</font>Done<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>CloseFile<font color="#000080">;
    </font>FileDescriptor<font color="#000080">.</font>Done<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>LabeledFile<font color="#000080">.</font>OpenFile<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>FileDescriptor<font color="#000080">.</font>OpenFile<font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font>IsOpen <font color="#FF0000"><b>then
        </b></font>ReadHeader<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>LabeledFile<font color="#000080">.</font>CloseFile<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font><font color="#008000"><i>{$I-}
    </i></font><font color="#FF0000"><b>if </b></font>IsOpen <font color="#FF0000"><b>then
      begin
        if </b></font>SoftPut <font color="#FF0000"><b>and </b></font><font color="#000080">(</font>CurRec <font color="#000080">&lt;&gt; -</font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>then
            </b></font>PutRecord<font color="#000080">(</font>CurRec<font color="#000080">);
        </font>Header<font color="#000080">.</font>Val <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
        </font>WriteHeader<font color="#000080">;
        </font>CurRec <font color="#000080">:= -</font><font color="#800000">1</font><font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>FileDescriptor<font color="#000080">.</font>CloseFile<font color="#000080">;
    </font><font color="#008000"><i>{$I+}
  </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>LabeledFile<font color="#000080">.</font>ReadHeader<font color="#000080">;
  </font><font color="#FF0000"><b>Var
    </b></font>Result <font color="#000080">: </font>Word<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font><font color="#008000"><i>{$I-}
    </i></font>Seek<font color="#000080">(</font>Fpt<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font>IoResult <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then
      begin
        </b></font>BlockRead<font color="#000080">(</font>Fpt<font color="#000080">,</font>Header<font color="#000080">,</font>HeaderSize<font color="#000080">,</font>Result<font color="#000080">);
        </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>Result <font color="#000080">&lt;&gt; </font>HeaderSize<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>IoResult <font color="#000080">&lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
            </b></font><font color="#008000"><i>{Error Routine}</i></font><font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#008000"><i>{$I+}
  </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>LabeledFile<font color="#000080">.</font>WriteHeader<font color="#000080">;
  </font><font color="#FF0000"><b>Var
    </b></font>Result <font color="#000080">: </font>Word<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font><font color="#008000"><i>{$I-}
    </i></font>Seek<font color="#000080">(</font>Fpt<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font>IoResult <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then
      begin
        </b></font>BlockWrite<font color="#000080">(</font>Fpt<font color="#000080">,</font>Header<font color="#000080">,</font>HeaderSize<font color="#000080">,</font>Result<font color="#000080">);
        </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>Result <font color="#000080">&lt;&gt; </font>HeaderSize<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>IoResult <font color="#000080">&lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
            </b></font><font color="#008000"><i>{Error Routine}</i></font><font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#008000"><i>{$I+}
  </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>LabeledFile<font color="#000080">.</font>AddRecord<font color="#000080">;
  </font><font color="#FF0000"><b>Var
    </b></font>TmpRec <font color="#000080">: </font>Pointer<font color="#000080">;
    </font>Result <font color="#000080">: </font>Word<font color="#000080">;
    </font>Next   <font color="#000080">: </font>LongInt<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font><font color="#008000"><i>{$I-}
    </i></font><font color="#FF0000"><b>if </b></font>Header<font color="#000080">.</font>MRD <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
      begin
        </b></font>GetMem<font color="#000080">(</font>TmpRec<font color="#000080">,</font>RecordSize<font color="#000080">);
        </font>Seek<font color="#000080">(</font>Fpt<font color="#000080">,</font>HeaderSize <font color="#000080">+ (</font>Header<font color="#000080">.</font>MRD <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">) * </font>RecordSize<font color="#000080">);
        </font><font color="#FF0000"><b>if </b></font>IoResult <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then
          begin
            </b></font>BlockRead<font color="#000080">(</font>Fpt<font color="#000080">,</font>TmpRec<font color="#000080">^,</font>RecordSize<font color="#000080">,</font>Result<font color="#000080">);
            </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>Result <font color="#000080">&lt;&gt; </font>RecordSize<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>IoResult <font color="#000080">&lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
                </b></font><font color="#008000"><i>{Error Routine}</i></font><font color="#000080">;
            </font>Next <font color="#000080">:= </font>LongInt<font color="#000080">(</font>TmpRec<font color="#000080">^);
            </font>PutRecord<font color="#000080">(</font>Header<font color="#000080">.</font>MRD<font color="#000080">);
            </font>Header<font color="#000080">.</font>MRD <font color="#000080">:= </font>Next<font color="#000080">;
            </font>Header<font color="#000080">.</font>Act <font color="#000080">:= </font>Header<font color="#000080">.</font>Act <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
        </font>FreeMem<font color="#000080">(</font>TmpRec<font color="#000080">,</font>RecordSize<font color="#000080">);
      </font><font color="#FF0000"><b>end
    else
      begin
        </b></font>PutRecord<font color="#000080">(</font>Header<font color="#000080">.</font>Eof<font color="#000080">);
        </font>Header<font color="#000080">.</font>Eof <font color="#000080">:= </font>Header<font color="#000080">.</font>Eof <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
        </font>Header<font color="#000080">.</font>Act <font color="#000080">:= </font>Header<font color="#000080">.</font>Act <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>WriteHeader<font color="#000080">;
    </font><font color="#008000"><i>{$I+}
  </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>LabeledFile<font color="#000080">.</font>DelRecord<font color="#000080">(</font>Rec <font color="#000080">: </font>LongInt<font color="#000080">);
  </font><font color="#FF0000"><b>Var
    </b></font>TmpRec <font color="#000080">: </font>Pointer<font color="#000080">;
    </font>Result <font color="#000080">: </font>Word<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font><font color="#008000"><i>{$I-}
    </i></font>GetMem<font color="#000080">(</font>TmpRec<font color="#000080">,</font>RecordSize<font color="#000080">);
    </font>Seek<font color="#000080">(</font>Fpt<font color="#000080">,</font>HeaderSize <font color="#000080">+ (</font>Rec <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">) * </font>RecordSize<font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font>IoResult <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then
      begin
        </b></font>BlockRead<font color="#000080">(</font>Fpt<font color="#000080">,</font>TmpRec<font color="#000080">^,</font>RecordSize<font color="#000080">,</font>Result<font color="#000080">);
        </font>LongInt<font color="#000080">(</font>TmpRec<font color="#000080">^) := </font>Header<font color="#000080">.</font>MRD<font color="#000080">;
        </font>BlockWrite<font color="#000080">(</font>Fpt<font color="#000080">,</font>TmpRec<font color="#000080">^,</font>RecordSize<font color="#000080">,</font>Result<font color="#000080">);
        </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>Result <font color="#000080">&lt;&gt; </font>RecordSize<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>IoResult <font color="#000080">&lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
           </b></font><font color="#008000"><i>{Error Routine}</i></font><font color="#000080">;
        </font>Header<font color="#000080">.</font>MRD <font color="#000080">:= </font>Rec<font color="#000080">;
        </font>Header<font color="#000080">.</font>Act <font color="#000080">:= </font>Header<font color="#000080">.</font>Act <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
        </font>WriteHeader<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#008000"><i>{$I+}
  </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{---------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>Constructor </b></font>DetailFileDetail<font color="#000080">.</font>Init<font color="#000080">(</font>Nam <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">; </font>Size <font color="#000080">: </font>Word<font color="#000080">; </font>Buff <font color="#000080">: </font>Pointer<font color="#000080">;
</font>Put <font color="#000080">: </font>Boolean<font color="#000080">);
  </font><font color="#FF0000"><b>begin
    if </b></font>Size <font color="#000080">&lt; </font><font color="#800000">12 </font><font color="#FF0000"><b>then
      begin
        </b></font>WriteLn<font color="#000080">(</font><font color="#800000">'Detail File Records must be 12 Bytes or more'</font><font color="#000080">);
        </font>Fail<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>LabeledFile<font color="#000080">.</font>Init<font color="#000080">(</font>Nam<font color="#000080">,</font>Size<font color="#000080">,</font>Buff<font color="#000080">,</font>Put<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure   </b></font>DetailFileDetail<font color="#000080">.</font>LinkChain<font color="#000080">(</font>MR<font color="#000080">, </font>Last<font color="#000080">, </font>Curr <font color="#000080">: </font>LongInt<font color="#000080">);
  </font><font color="#FF0000"><b>Var
    </b></font>Hdr <font color="#000080">: </font>DetailHeaderPtr<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>Hdr <font color="#000080">:= </font>RecordPtr<font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font>Last <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
      begin
        </b></font>GetRecord<font color="#000080">(</font>Last<font color="#000080">);
        </font>Hdr<font color="#000080">^.</font>Next <font color="#000080">:= </font>Curr<font color="#000080">;
        </font>PutRecord<font color="#000080">(</font>Last<font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>GetRecord<font color="#000080">(</font>Curr<font color="#000080">);
    </font>Hdr<font color="#000080">^.</font>Prev <font color="#000080">:= </font>Last<font color="#000080">;
    </font>Hdr<font color="#000080">^.</font>Master <font color="#000080">:= </font>MR<font color="#000080">;
    </font>Hdr<font color="#000080">^.</font>Next <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font>PutRecord<font color="#000080">(</font>Curr<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure   </b></font>DetailFileDetail<font color="#000080">.</font>DelinkChain<font color="#000080">(</font>Rec <font color="#000080">: </font>LongInt<font color="#000080">);  </font><font color="#FF0000"><b>Var
    </b></font>Hdr <font color="#000080">: </font>DetailHeaderPtr<font color="#000080">;
    </font>Tmp <font color="#000080">: </font>LongInt<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>Hdr <font color="#000080">:= </font>RecordPtr<font color="#000080">;
    </font>GetRecord<font color="#000080">(</font>Rec<font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font>Hdr<font color="#000080">^.</font>Next <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
      begin
        </b></font>Tmp <font color="#000080">:= </font>Hdr<font color="#000080">^.</font>Prev<font color="#000080">;
        </font>GetRecord<font color="#000080">(</font>Hdr<font color="#000080">^.</font>Next<font color="#000080">);
        </font>Hdr<font color="#000080">^.</font>Prev <font color="#000080">:= </font>Tmp<font color="#000080">;
        </font>PutRecord<font color="#000080">(</font>CurRec<font color="#000080">);
        </font>GetRecord<font color="#000080">(</font>Rec<font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font>Hdr<font color="#000080">^.</font>Prev <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
      begin
        </b></font>Tmp <font color="#000080">:= </font>Hdr<font color="#000080">^.</font>Next<font color="#000080">;
        </font>GetRecord<font color="#000080">(</font>Hdr<font color="#000080">^.</font>Prev<font color="#000080">);
        </font>Hdr<font color="#000080">^.</font>Next <font color="#000080">:= </font>Tmp<font color="#000080">;
        </font>PutRecord<font color="#000080">(</font>CurRec<font color="#000080">);
        </font>GetRecord<font color="#000080">(</font>Rec<font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>Hdr<font color="#000080">^.</font>Master <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font>Hdr<font color="#000080">^.</font>Next <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font>Hdr<font color="#000080">^.</font>Prev <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font>PutRecord<font color="#000080">(</font>Rec<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{---------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>Constructor </b></font>DetailFileMaster<font color="#000080">.</font>Init<font color="#000080">(</font>Nam <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">; </font>Size <font color="#000080">: </font>Word<font color="#000080">; </font>Buff <font color="#000080">: </font>Pointer<font color="#000080">;
</font>Put <font color="#000080">: </font>Boolean<font color="#000080">);
  </font><font color="#FF0000"><b>begin
    if </b></font>Size <font color="#000080">&lt; </font><font color="#800000">8 </font><font color="#FF0000"><b>then
      begin
        </b></font>WriteLn<font color="#000080">(</font><font color="#800000">'Master File Records must be 8 Bytes or more'</font><font color="#000080">);
        </font>Fail<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>LabeledFile<font color="#000080">.</font>Init<font color="#000080">(</font>Nam<font color="#000080">,</font>Size<font color="#000080">,</font>Buff<font color="#000080">,</font>Put<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure   </b></font>DetailFileMaster<font color="#000080">.</font>LinkDetail<font color="#000080">(</font>DF <font color="#000080">: </font>DetailFileDetailPtr<font color="#000080">);
  </font><font color="#FF0000"><b>Var
    </b></font>Hdr <font color="#000080">: </font>MasterHeaderPtr<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>Hdr <font color="#000080">:= </font>RecordPtr<font color="#000080">;
    </font>DF<font color="#000080">^.</font>AddRecord<font color="#000080">;
    </font>DF<font color="#000080">^.</font>LinkChain<font color="#000080">(</font>CurRec<font color="#000080">,</font>Hdr<font color="#000080">^.</font>Last<font color="#000080">,</font>DF<font color="#000080">^.</font>CurRec<font color="#000080">);
    </font>Hdr<font color="#000080">^.</font>Last <font color="#000080">:= </font>DF<font color="#000080">^.</font>CurRec<font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font>Hdr<font color="#000080">^.</font>First <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>Hdr<font color="#000080">^.</font>First <font color="#000080">:= </font>DF<font color="#000080">^.</font>CurRec<font color="#000080">;
    </font>PutRecord<font color="#000080">(</font>CurRec<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure   </b></font>DetailFileMaster<font color="#000080">.</font>DelinkDetail<font color="#000080">(</font>DF <font color="#000080">: </font>DetailFileDetailPtr<font color="#000080">; </font>DR <font color="#000080">:
</font>LongInt<font color="#000080">);
  </font><font color="#FF0000"><b>Var
    </b></font>Hdr <font color="#000080">: </font>MasterHeaderPtr<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>Hdr <font color="#000080">:= </font>RecordPtr<font color="#000080">;
    </font>DF<font color="#000080">^.</font>GetRecord<font color="#000080">(</font>DR<font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font>Hdr<font color="#000080">^.</font>Last <font color="#000080">= </font>DR <font color="#FF0000"><b>then
        </b></font>Hdr<font color="#000080">^.</font>Last <font color="#000080">:= </font>DetailHeader<font color="#000080">(</font>DF<font color="#000080">^.</font>RecordPtr<font color="#000080">^).</font>Prev<font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font>Hdr<font color="#000080">^.</font>First <font color="#000080">= </font>DR <font color="#FF0000"><b>then
        </b></font>Hdr<font color="#000080">^.</font>First <font color="#000080">:= </font>DetailHeader<font color="#000080">(</font>DF<font color="#000080">^.</font>RecordPtr<font color="#000080">^).</font>Next<font color="#000080">;
    </font>DF<font color="#000080">^.</font>DelinkChain<font color="#000080">(</font>DR<font color="#000080">);
    </font>PutRecord<font color="#000080">(</font>CurRec<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure   </b></font>DetailFileMaster<font color="#000080">.</font>GetFirst<font color="#000080">(</font>DF <font color="#000080">: </font>DetailFileDetailPtr<font color="#000080">);
  </font><font color="#FF0000"><b>Var
    </b></font>Hdr <font color="#000080">: </font>MasterHeaderPtr<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>Hdr <font color="#000080">:= </font>RecordPtr<font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font>Hdr<font color="#000080">^.</font>First <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then
      begin
        </b></font>FillChar<font color="#000080">(</font>DF<font color="#000080">^.</font>RecordPtr<font color="#000080">^,</font>DF<font color="#000080">^.</font>RecordSize<font color="#000080">,</font><font color="#800000">#0</font><font color="#000080">);
        </font>DF<font color="#000080">^.</font>CurRec <font color="#000080">:= -</font><font color="#800000">1</font><font color="#000080">;
        </font>Exit<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>DF<font color="#000080">^.</font>GetRecord<font color="#000080">(</font>Hdr<font color="#000080">^.</font>First<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure   </b></font>DetailFileMaster<font color="#000080">.</font>GetLast<font color="#000080">(</font>DF <font color="#000080">: </font>DetailFileDetailPtr<font color="#000080">);
  </font><font color="#FF0000"><b>Var
    </b></font>Hdr <font color="#000080">: </font>MasterHeaderPtr<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>Hdr <font color="#000080">:= </font>RecordPtr<font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font>Hdr<font color="#000080">^.</font>Last <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then
      begin
        </b></font>FillChar<font color="#000080">(</font>DF<font color="#000080">^.</font>RecordPtr<font color="#000080">^,</font>DF<font color="#000080">^.</font>RecordSize<font color="#000080">,</font><font color="#800000">#0</font><font color="#000080">);
        </font>DF<font color="#000080">^.</font>CurRec <font color="#000080">:= -</font><font color="#800000">1</font><font color="#000080">;
        </font>Exit<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>DF<font color="#000080">^.</font>GetRecord<font color="#000080">(</font>Hdr<font color="#000080">^.</font>Last<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure   </b></font>DetailFileMaster<font color="#000080">.</font>GetNext<font color="#000080">(</font>DF <font color="#000080">: </font>DetailFileDetailPtr<font color="#000080">);
  </font><font color="#FF0000"><b>Var
    </b></font>Hdr <font color="#000080">: </font>DetailHeaderPtr<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>Hdr <font color="#000080">:= </font>DF<font color="#000080">^.</font>RecordPtr<font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font>Hdr<font color="#000080">^.</font>Next <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then
      begin
        </b></font>FillChar<font color="#000080">(</font>DF<font color="#000080">^.</font>RecordPtr<font color="#000080">^,</font>DF<font color="#000080">^.</font>RecordSize<font color="#000080">,</font><font color="#800000">#0</font><font color="#000080">);
        </font>DF<font color="#000080">^.</font>CurRec <font color="#000080">:= -</font><font color="#800000">1</font><font color="#000080">;
        </font>Exit<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>DF<font color="#000080">^.</font>GetRecord<font color="#000080">(</font>Hdr<font color="#000080">^.</font>Next<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure   </b></font>DetailFileMaster<font color="#000080">.</font>GetPrev<font color="#000080">(</font>DF <font color="#000080">: </font>DetailFileDetailPtr<font color="#000080">);
  </font><font color="#FF0000"><b>Var
    </b></font>Hdr <font color="#000080">: </font>DetailHeaderPtr<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>Hdr <font color="#000080">:= </font>DF<font color="#000080">^.</font>RecordPtr<font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font>Hdr<font color="#000080">^.</font>Prev <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then
      begin
        </b></font>FillChar<font color="#000080">(</font>DF<font color="#000080">^.</font>RecordPtr<font color="#000080">^,</font>DF<font color="#000080">^.</font>RecordSize<font color="#000080">,</font><font color="#800000">#0</font><font color="#000080">);
        </font>DF<font color="#000080">^.</font>CurRec <font color="#000080">:= -</font><font color="#800000">1</font><font color="#000080">;
        </font>Exit<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>DF<font color="#000080">^.</font>GetRecord<font color="#000080">(</font>Hdr<font color="#000080">^.</font>Prev<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{---------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>begin
end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to POINTERS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0005.PAS">Original</a><b>]</b></p></body>
</html>
