<html>
<head><title> "Linked List of Text" by KEN BURROWS</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to POINTERS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0014.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
From: KEN BURROWS
Subj: Linked List Problem
---------------------------------------------------------------------------
Here is a short Linked List example. It loads a file, and lets you traverse the
list in two directions. It's as simple as it gets. You may also want to look
into the TCollection objects associated with the Objects unit of Borlands
version 6 and 7.
}

{$A+,B-,D+,E-,F+,G-,I-,L+,N-,O-,P-,Q-,R-,S-,T-,V-,X+,Y+}
{$M 16384,0,655360}
</i></font><font color="#FF0000"><b>Program </b></font>LinkedListOfText<font color="#000080">; </font><font color="#008000"><i>{tested}
</i></font><font color="#FF0000"><b>Uses </b></font>Dos<font color="#000080">,</font>CRT<font color="#000080">;
</font><font color="#FF0000"><b>Type
  </b></font>TextListPtr <font color="#000080">= ^</font>TextList<font color="#000080">;
  </font>TextList    <font color="#000080">= </font><font color="#FF0000"><b>Record
                 </b></font>line <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
                 </font>next<font color="#000080">,
                 </font>prev <font color="#000080">: </font>TextListPtr<font color="#000080">;
                </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Const
  </b></font>first <font color="#000080">: </font>TextListPtr <font color="#000080">= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">;
  </font>last  <font color="#000080">: </font>TextListPtr <font color="#000080">= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>FreeTheList<font color="#000080">(</font>p<font color="#000080">:</font>TextListPtr<font color="#000080">);
   </font><font color="#FF0000"><b>var </b></font>hold<font color="#000080">:</font>TextListPtr<font color="#000080">;
   </font><font color="#FF0000"><b>begin
     while </b></font>p <font color="#000080">&lt;&gt; </font><font color="#FF0000"><b>Nil do
       begin
         </b></font>hold <font color="#000080">:= </font>p<font color="#000080">;
         </font>p <font color="#000080">:= </font>p<font color="#000080">^.</font>next<font color="#000080">;
         </font>dispose<font color="#000080">(</font>hold<font color="#000080">);
       </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>ViewForward<font color="#000080">(</font>p<font color="#000080">:</font>TextListPtr<font color="#000080">);
   </font><font color="#FF0000"><b>begin
     </b></font>clrscr<font color="#000080">;
     </font><font color="#FF0000"><b>while </b></font>p <font color="#000080">&lt;&gt; </font><font color="#FF0000"><b>nil do
       begin
         </b></font>writeln<font color="#000080">(</font>p<font color="#000080">^.</font>line<font color="#000080">);
         </font>p <font color="#000080">:= </font>p<font color="#000080">^.</font>next<font color="#000080">;
       </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>ViewReverse<font color="#000080">(</font>p<font color="#000080">:</font>TextListPtr<font color="#000080">);
   </font><font color="#FF0000"><b>begin
     </b></font>clrscr<font color="#000080">;
     </font><font color="#FF0000"><b>while </b></font>p <font color="#000080">&lt;&gt; </font><font color="#FF0000"><b>nil do
       begin
         </b></font>writeln<font color="#000080">(</font>p<font color="#000080">^.</font>line<font color="#000080">);
         </font>p <font color="#000080">:= </font>p<font color="#000080">^.</font>prev<font color="#000080">;
       </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Doit<font color="#000080">(</font>fname<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">);
   </font><font color="#FF0000"><b>var </b></font>f    <font color="#000080">:</font>Text<font color="#000080">;
       </font>s    <font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">;
       </font>curr<font color="#000080">,
       </font>hold <font color="#000080">: </font>TextListPtr<font color="#000080">;
       </font>stop <font color="#000080">: </font>boolean<font color="#000080">;
   </font><font color="#FF0000"><b>begin
     </b></font>assign<font color="#000080">(</font>f<font color="#000080">,</font>fname<font color="#000080">);
     </font>reset<font color="#000080">(</font>f<font color="#000080">);
     </font><font color="#FF0000"><b>if </b></font>ioresult <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>exit<font color="#000080">;
     </font>curr <font color="#000080">:= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">;
     </font>hold <font color="#000080">:= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">;

     </font><font color="#FF0000"><b>while </b></font><font color="#000080">(</font><font color="#FF0000"><b>not </b></font>eof<font color="#000080">(</font>f<font color="#000080">)) </font><font color="#FF0000"><b>and
           </b></font><font color="#000080">(</font>maxavail <font color="#000080">&gt; </font>SizeOf<font color="#000080">(</font>TextList<font color="#000080">)) </font><font color="#FF0000"><b>do
       begin          </b></font><font color="#008000"><i>{load the list forward and link the prev fields}
         </i></font>readln<font color="#000080">(</font>f<font color="#000080">,</font>s<font color="#000080">);
         </font>new<font color="#000080">(</font>curr<font color="#000080">);
         </font>curr<font color="#000080">^.</font>prev <font color="#000080">:= </font>hold<font color="#000080">;
         </font>curr<font color="#000080">^.</font>next <font color="#000080">:= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">;
         </font>curr<font color="#000080">^.</font>line <font color="#000080">:= </font>s<font color="#000080">;
         </font>hold <font color="#000080">:= </font>curr<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
     </font>close<font color="#000080">(</font>f<font color="#000080">);

     </font><font color="#FF0000"><b>while </b></font>curr<font color="#000080">^.</font>prev <font color="#000080">&lt;&gt; </font><font color="#FF0000"><b>nil do   </b></font><font color="#008000"><i>{traverse the list backwards}
       </i></font><font color="#FF0000"><b>begin                      </b></font><font color="#008000"><i>{and link the next fields}
         </i></font>hold <font color="#000080">:= </font>curr<font color="#000080">;
         </font>curr <font color="#000080">:= </font>curr<font color="#000080">^.</font>prev<font color="#000080">;
         </font>curr<font color="#000080">^.</font>next <font color="#000080">:= </font>hold<font color="#000080">;
       </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

     </font>first <font color="#000080">:= </font>curr<font color="#000080">;               </font><font color="#008000"><i>{set the first and last records}
     </i></font><font color="#FF0000"><b>while </b></font>curr<font color="#000080">^.</font>next <font color="#000080">&lt;&gt; </font><font color="#FF0000"><b>Nil do </b></font>curr <font color="#000080">:= </font>curr<font color="#000080">^.</font>next<font color="#000080">;
     </font>last <font color="#000080">:= </font>curr<font color="#000080">;

     </font><font color="#FF0000"><b>Repeat   </b></font><font color="#008000"><i>{test it}
       </i></font>clrscr<font color="#000080">;
       </font>writeln<font color="#000080">(</font><font color="#800000">' [F]orward view : '</font><font color="#000080">);
       </font>writeln<font color="#000080">(</font><font color="#800000">' [R]everse view : '</font><font color="#000080">);
       </font>writeln<font color="#000080">(</font><font color="#800000">' [S]top         : '</font><font color="#000080">);
       </font>write<font color="#000080">(</font><font color="#800000">'enter a command : '</font><font color="#000080">);
       </font>readln<font color="#000080">(</font>s<font color="#000080">);
       </font>stop <font color="#000080">:= (</font>s <font color="#000080">= </font><font color="#800000">''</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>upcase<font color="#000080">(</font>s<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]) = </font><font color="#800000">'S'</font><font color="#000080">);
       </font><font color="#FF0000"><b>if   not </b></font>stop
       <font color="#FF0000"><b>then case </b></font>upcase<font color="#000080">(</font>s<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]) </font><font color="#FF0000"><b>of
             </b></font><font color="#800000">'F' </font><font color="#000080">: </font>ViewForward<font color="#000080">(</font>first<font color="#000080">);
             </font><font color="#800000">'R' </font><font color="#000080">: </font>ViewReverse<font color="#000080">(</font>last<font color="#000080">);
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
     </font><font color="#FF0000"><b>Until </b></font>Stop<font color="#000080">;

     </font>FreeTheList<font color="#000080">(</font>First<font color="#000080">);
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>var </b></font>m<font color="#000080">:</font>longint<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>m <font color="#000080">:= </font>memavail<font color="#000080">;
  </font><font color="#FF0000"><b>if   </b></font>paramcount <font color="#000080">&gt; </font><font color="#800000">0
  </font><font color="#FF0000"><b>then </b></font>doit<font color="#000080">(</font>paramstr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">))
  </font><font color="#FF0000"><b>else </b></font>writeln<font color="#000080">(</font><font color="#800000">'you need to supply a filename'</font><font color="#000080">);
  </font><font color="#FF0000"><b>if   </b></font>m <font color="#000080">&lt;&gt; </font>memavail
  <font color="#FF0000"><b>then </b></font>writeln<font color="#000080">(</font><font color="#800000">'memory error of '</font><font color="#000080">,</font>m<font color="#000080">-</font>memavail<font color="#000080">,</font><font color="#800000">' bytes'</font><font color="#000080">);
</font><font color="#FF0000"><b>End</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to POINTERS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0014.PAS">Original</a><b>]</b></p></body>
</html>
