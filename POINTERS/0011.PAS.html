<html>
<head><title> "AVL Binary Trees" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to POINTERS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0011.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt; Does anyone have code(preferably TP) the implements AVL trees?
&gt; I'm having trouble With the insertion part of it.  I'm writing a small
&gt; parts inventory Program For work(although I'm not employed as a
&gt; Programmer) and the AVL tree would be very fast For it.
}


</i></font><font color="#FF0000"><b>Program </b></font>avl<font color="#000080">;

</font><font color="#FF0000"><b>Type
  </b></font>nodeptr <font color="#000080">= ^</font>node<font color="#000080">;
  </font>node    <font color="#000080">= </font><font color="#FF0000"><b>Record
    </b></font>key   <font color="#000080">: </font>Char<font color="#000080">;
    </font>bal   <font color="#000080">: -</font><font color="#800000">1</font><font color="#000080">..+</font><font color="#800000">1</font><font color="#000080">; </font><font color="#008000"><i>{ bal = h(right) - h(left) }
    </i></font>left<font color="#000080">,
    </font>right <font color="#000080">: </font>nodeptr
  <font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>tree <font color="#000080">= </font>nodeptr<font color="#000080">;

</font><font color="#FF0000"><b>Var
  </b></font>t <font color="#000080">: </font>tree<font color="#000080">;
  </font>h <font color="#000080">: </font>Boolean<font color="#000080">; </font><font color="#008000"><i>{ insert &amp; delete parameter }


</i></font><font color="#FF0000"><b>Procedure </b></font>maketree<font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>t <font color="#000080">: </font>tree<font color="#000080">);
</font><font color="#FF0000"><b>begin
  </b></font>t <font color="#000080">:= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>member<font color="#000080">(</font>k <font color="#000080">: </font>Char<font color="#000080">; </font>t <font color="#000080">: </font>tree<font color="#000080">) : </font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>begin </b></font><font color="#008000"><i>{ member }
  </i></font><font color="#FF0000"><b>if </b></font>t <font color="#000080">= </font><font color="#FF0000"><b>nil then
    </b></font>member <font color="#000080">:= </font>False
  <font color="#FF0000"><b>else
  if </b></font>k <font color="#000080">= </font>t<font color="#000080">^.</font>key <font color="#FF0000"><b>then
    </b></font>member <font color="#000080">:= </font>True
  <font color="#FF0000"><b>else
  if </b></font>k <font color="#000080">&lt; </font>t<font color="#000080">^.</font>key <font color="#FF0000"><b>then
    </b></font>member <font color="#000080">:= </font>member<font color="#000080">(</font>k<font color="#000080">, </font>t<font color="#000080">^.</font>left<font color="#000080">)
  </font><font color="#FF0000"><b>else
    </b></font>member <font color="#000080">:= </font>member<font color="#000080">(</font>k<font color="#000080">, </font>t<font color="#000080">^.</font>right<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>ll<font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>t <font color="#000080">: </font>tree<font color="#000080">);
</font><font color="#FF0000"><b>Var
  </b></font>p <font color="#000080">: </font>tree<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>p <font color="#000080">:= </font>t<font color="#000080">^.</font>left<font color="#000080">;
  </font>t<font color="#000080">^.</font>left  <font color="#000080">:= </font>p<font color="#000080">^.</font>right<font color="#000080">;
  </font>p<font color="#000080">^.</font>right <font color="#000080">:= </font>t<font color="#000080">;
  </font>t <font color="#000080">:= </font>p<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>rr<font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>t <font color="#000080">: </font>tree<font color="#000080">);
</font><font color="#FF0000"><b>Var
   </b></font>p <font color="#000080">: </font>tree<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>p <font color="#000080">:= </font>t<font color="#000080">^.</font>right<font color="#000080">;
  </font>t<font color="#000080">^.</font>right <font color="#000080">:= </font>p<font color="#000080">^.</font>left<font color="#000080">;
  </font>p<font color="#000080">^.</font>left  <font color="#000080">:= </font>t<font color="#000080">;
  </font>t <font color="#000080">:= </font>p<font color="#000080">;
</font><font color="#FF0000"><b>end

Procedure </b></font>lr<font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>t <font color="#000080">: </font>tree<font color="#000080">);
</font><font color="#FF0000"><b>begin
  </b></font>rr<font color="#000080">(</font>t<font color="#000080">^.</font>left<font color="#000080">);
  </font>ll<font color="#000080">(</font>t<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>rl<font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>t <font color="#000080">: </font>tree<font color="#000080">);
</font><font color="#FF0000"><b>begin
  </b></font>ll<font color="#000080">(</font>t<font color="#000080">^.</font>right<font color="#000080">);
  </font>rr<font color="#000080">(</font>t<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>insert<font color="#000080">(</font>k <font color="#000080">: </font>Char<font color="#000080">; </font><font color="#FF0000"><b>Var </b></font>t <font color="#000080">: </font>tree<font color="#000080">; </font><font color="#FF0000"><b>Var </b></font>h <font color="#000080">: </font>Boolean<font color="#000080">);

  </font><font color="#FF0000"><b>Procedure </b></font>balanceleft<font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>t <font color="#000080">: </font>tree<font color="#000080">; </font><font color="#FF0000"><b>Var </b></font>h <font color="#000080">: </font>Boolean<font color="#000080">);
  </font><font color="#FF0000"><b>begin
    </b></font>Writeln<font color="#000080">(</font><font color="#800000">'balance left'</font><font color="#000080">);
    </font><font color="#FF0000"><b>Case </b></font>t<font color="#000080">^.</font>bal <font color="#FF0000"><b>of
      </b></font><font color="#000080">+</font><font color="#800000">1 </font><font color="#000080">:
        </font><font color="#FF0000"><b>begin
          </b></font>t<font color="#000080">^.</font>bal <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
          </font>h <font color="#000080">:= </font>False<font color="#000080">;
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
       </font><font color="#800000">0 </font><font color="#000080">: </font>t<font color="#000080">^.</font>bal <font color="#000080">:= -</font><font color="#800000">1</font><font color="#000080">;
      -</font><font color="#800000">1 </font><font color="#000080">:
        </font><font color="#FF0000"><b>begin </b></font><font color="#008000"><i>{ rebalance }
          </i></font><font color="#FF0000"><b>if </b></font>t<font color="#000080">^.</font>left<font color="#000080">^.</font>bal <font color="#000080">= -</font><font color="#800000">1 </font><font color="#FF0000"><b>then
          begin </b></font><font color="#008000"><i>{ single ll rotation }
            </i></font>Writeln<font color="#000080">(</font><font color="#800000">'single ll rotation'</font><font color="#000080">);
            </font>ll<font color="#000080">(</font>t<font color="#000080">);
            </font>t<font color="#000080">^.</font>right<font color="#000080">^.</font>bal <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
          </font><font color="#FF0000"><b>end
          else </b></font><font color="#008000"><i>{ t^.left^.bal  = +1 }
          </i></font><font color="#FF0000"><b>begin  </b></font><font color="#008000"><i>{ double lr rotation }
            </i></font>Writeln<font color="#000080">(</font><font color="#800000">'double lr rotation'</font><font color="#000080">);
            </font>lr<font color="#000080">(</font>t<font color="#000080">);
            </font><font color="#FF0000"><b>if </b></font>t<font color="#000080">^.</font>bal <font color="#000080">= -</font><font color="#800000">1 </font><font color="#FF0000"><b>then
              </b></font>t<font color="#000080">^.</font>right<font color="#000080">^.</font>bal <font color="#000080">:= +</font><font color="#800000">1
            </font><font color="#FF0000"><b>else
              </b></font>t<font color="#000080">^.</font>right<font color="#000080">^.</font>bal <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
            </font><font color="#FF0000"><b>if </b></font>t<font color="#000080">^.</font>bal <font color="#000080">= +</font><font color="#800000">1 </font><font color="#FF0000"><b>then
              </b></font>t<font color="#000080">^.</font>left<font color="#000080">^.</font>bal <font color="#000080">:= -</font><font color="#800000">1
            </font><font color="#FF0000"><b>else
              </b></font>t<font color="#000080">^.</font>left<font color="#000080">^.</font>bal <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
          </font>t<font color="#000080">^.</font>bal <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
          </font>h <font color="#000080">:= </font>False<font color="#000080">;
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>Procedure </b></font>balanceright<font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>t <font color="#000080">: </font>tree<font color="#000080">; </font><font color="#FF0000"><b>Var </b></font>h <font color="#000080">: </font>Boolean<font color="#000080">);
  </font><font color="#FF0000"><b>begin
    </b></font>Writeln<font color="#000080">(</font><font color="#800000">'balance right'</font><font color="#000080">);
    </font><font color="#FF0000"><b>Case </b></font>t<font color="#000080">^.</font>bal <font color="#FF0000"><b>of
      </b></font><font color="#000080">-</font><font color="#800000">1 </font><font color="#000080">:
        </font><font color="#FF0000"><b>begin
          </b></font>t<font color="#000080">^.</font>bal <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
          </font>h <font color="#000080">:= </font>False<font color="#000080">;
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
       </font><font color="#800000">0 </font><font color="#000080">: </font>t<font color="#000080">^.</font>bal <font color="#000080">:= +</font><font color="#800000">1</font><font color="#000080">;
      +</font><font color="#800000">1 </font><font color="#000080">:
        </font><font color="#FF0000"><b>begin </b></font><font color="#008000"><i>{ rebalance }
          </i></font><font color="#FF0000"><b>if </b></font>t<font color="#000080">^.</font>right<font color="#000080">^.</font>bal <font color="#000080">= +</font><font color="#800000">1 </font><font color="#FF0000"><b>then
          begin </b></font><font color="#008000"><i>{ single rr rotation }
            </i></font>Writeln<font color="#000080">(</font><font color="#800000">'single rr rotation'</font><font color="#000080">);
            </font>rr<font color="#000080">(</font>t<font color="#000080">);
            </font>t<font color="#000080">^.</font>left<font color="#000080">^.</font>bal <font color="#000080">:= </font><font color="#800000">0
          </font><font color="#FF0000"><b>end
          else </b></font><font color="#008000"><i>{ t^.right^.bal  = -1 }
          </i></font><font color="#FF0000"><b>begin  </b></font><font color="#008000"><i>{ double rl rotation }
            </i></font>Writeln<font color="#000080">(</font><font color="#800000">'double rl rotation'</font><font color="#000080">);
            </font>rl<font color="#000080">(</font>t<font color="#000080">);
            </font><font color="#FF0000"><b>if </b></font>t<font color="#000080">^.</font>bal <font color="#000080">= -</font><font color="#800000">1 </font><font color="#FF0000"><b>then
              </b></font>t<font color="#000080">^.</font>right<font color="#000080">^.</font>bal <font color="#000080">:= +</font><font color="#800000">1
            </font><font color="#FF0000"><b>else
              </b></font>t<font color="#000080">^.</font>right<font color="#000080">^.</font>bal <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
            </font><font color="#FF0000"><b>if </b></font>t<font color="#000080">^.</font>bal <font color="#000080">= +</font><font color="#800000">1 </font><font color="#FF0000"><b>then
              </b></font>t<font color="#000080">^.</font>left<font color="#000080">^.</font>bal <font color="#000080">:= -</font><font color="#800000">1
            </font><font color="#FF0000"><b>else
              </b></font>t<font color="#000080">^.</font>left<font color="#000080">^.</font>bal <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
          </font>t<font color="#000080">^.</font>bal <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
          </font>h <font color="#000080">:= </font>False<font color="#000080">;
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin </b></font><font color="#008000"><i>{ insert }
  </i></font><font color="#FF0000"><b>if </b></font>t <font color="#000080">= </font><font color="#FF0000"><b>nil then
  begin
    </b></font>new<font color="#000080">(</font>t<font color="#000080">);
    </font>t<font color="#000080">^.</font>key   <font color="#000080">:= </font>k<font color="#000080">;
    </font>t<font color="#000080">^.</font>bal   <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font>t<font color="#000080">^.</font>left  <font color="#000080">:= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">;
    </font>t<font color="#000080">^.</font>right <font color="#000080">:= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">;
          </font>h <font color="#000080">:= </font>True<font color="#000080">;
  </font><font color="#FF0000"><b>end
  else
  if </b></font>k <font color="#000080">&lt; </font>t<font color="#000080">^.</font>key <font color="#FF0000"><b>then
  begin
    </b></font>insert<font color="#000080">(</font>k<font color="#000080">, </font>t<font color="#000080">^.</font>left<font color="#000080">, </font>h<font color="#000080">);
          </font><font color="#FF0000"><b>if </b></font>h <font color="#FF0000"><b>then
      </b></font>balanceleft<font color="#000080">(</font>t<font color="#000080">, </font>h<font color="#000080">);
  </font><font color="#FF0000"><b>end
  else
  if </b></font>k <font color="#000080">&gt; </font>t<font color="#000080">^.</font>key <font color="#FF0000"><b>then
  begin
    </b></font>insert<font color="#000080">(</font>k<font color="#000080">, </font>t<font color="#000080">^.</font>right<font color="#000080">, </font>h<font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font>h <font color="#FF0000"><b>then
      </b></font>balanceright<font color="#000080">(</font>t<font color="#000080">, </font>h<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>delete<font color="#000080">(</font>k <font color="#000080">: </font>Char<font color="#000080">; </font><font color="#FF0000"><b>Var </b></font>t <font color="#000080">: </font>tree<font color="#000080">; </font><font color="#FF0000"><b>Var </b></font>h <font color="#000080">: </font>Boolean<font color="#000080">);

  </font><font color="#FF0000"><b>Procedure </b></font>balanceleft<font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>t <font color="#000080">: </font>tree<font color="#000080">; </font><font color="#FF0000"><b>Var </b></font>h <font color="#000080">: </font>Boolean<font color="#000080">);
  </font><font color="#FF0000"><b>begin
    </b></font>Writeln<font color="#000080">(</font><font color="#800000">'balance left'</font><font color="#000080">);
    </font><font color="#FF0000"><b>Case </b></font>t<font color="#000080">^.</font>bal <font color="#FF0000"><b>of
      </b></font><font color="#000080">-</font><font color="#800000">1 </font><font color="#000080">:
        </font><font color="#FF0000"><b>begin
          </b></font>t<font color="#000080">^.</font>bal <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
          </font>h <font color="#000080">:= </font>True<font color="#000080">;
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
       </font><font color="#800000">0 </font><font color="#000080">:
         </font><font color="#FF0000"><b>begin
                 </b></font>t<font color="#000080">^.</font>bal <font color="#000080">:= +</font><font color="#800000">1</font><font color="#000080">;
                 </font>h <font color="#000080">:= </font>False<font color="#000080">;
               </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      +</font><font color="#800000">1 </font><font color="#000080">:
        </font><font color="#FF0000"><b>begin </b></font><font color="#008000"><i>{ rebalance }
          </i></font><font color="#FF0000"><b>if </b></font>t<font color="#000080">^.</font>right<font color="#000080">^.</font>bal <font color="#000080">&gt;= </font><font color="#800000">0 </font><font color="#FF0000"><b>then
          begin
            </b></font>Writeln<font color="#000080">(</font><font color="#800000">'single rr rotation'</font><font color="#000080">); </font><font color="#008000"><i>{ single rr rotation }
                        </i></font><font color="#FF0000"><b>if </b></font>t<font color="#000080">^.</font>right<font color="#000080">^.</font>bal <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then
            begin
              </b></font>rr<font color="#000080">(</font>t<font color="#000080">);
                          </font>t<font color="#000080">^.</font>bal <font color="#000080">:= -</font><font color="#800000">1</font><font color="#000080">;
                          </font>h <font color="#000080">:= </font>False<font color="#000080">;
                        </font><font color="#FF0000"><b>end
                        else
            begin
              </b></font>rr<font color="#000080">(</font>t<font color="#000080">);
                          </font>t<font color="#000080">^.</font>left<font color="#000080">^.</font>bal <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
                          </font>t<font color="#000080">^.</font>bal <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
                          </font>h <font color="#000080">:= </font>True<font color="#000080">;
                        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
          </font><font color="#FF0000"><b>end
          else </b></font><font color="#008000"><i>{ t^.right^.bal  = -1 }
          </i></font><font color="#FF0000"><b>begin
                        </b></font>Writeln<font color="#000080">(</font><font color="#800000">'double rl rotation'</font><font color="#000080">);
                   </font>rl<font color="#000080">(</font>t<font color="#000080">);
                        </font>t<font color="#000080">^.</font>left<font color="#000080">^.</font>bal <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
            </font>t<font color="#000080">^.</font>right<font color="#000080">^.</font>bal <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
                        </font>h <font color="#000080">:= </font>True<font color="#000080">;
                      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>Procedure </b></font>balanceright<font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>t <font color="#000080">: </font>tree<font color="#000080">; </font><font color="#FF0000"><b>Var </b></font>h <font color="#000080">: </font>Boolean<font color="#000080">);
  </font><font color="#FF0000"><b>begin
    </b></font>Writeln<font color="#000080">(</font><font color="#800000">'balance right'</font><font color="#000080">);
    </font><font color="#FF0000"><b>Case </b></font>t<font color="#000080">^.</font>bal <font color="#FF0000"><b>of
      </b></font><font color="#000080">+</font><font color="#800000">1 </font><font color="#000080">:
        </font><font color="#FF0000"><b>begin
          </b></font>t<font color="#000080">^.</font>bal <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
          </font>h <font color="#000080">:= </font>True<font color="#000080">;
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
       </font><font color="#800000">0 </font><font color="#000080">:
         </font><font color="#FF0000"><b>begin
                 </b></font>t<font color="#000080">^.</font>bal <font color="#000080">:= -</font><font color="#800000">1</font><font color="#000080">;
                 </font>h <font color="#000080">:= </font>False<font color="#000080">;
               </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      -</font><font color="#800000">1 </font><font color="#000080">:
        </font><font color="#FF0000"><b>begin </b></font><font color="#008000"><i>{ rebalance }
          </i></font><font color="#FF0000"><b>if </b></font>t<font color="#000080">^.</font>left<font color="#000080">^.</font>bal <font color="#000080">&lt;= </font><font color="#800000">0 </font><font color="#FF0000"><b>then
          begin </b></font><font color="#008000"><i>{ single ll rotation }
            </i></font>Writeln<font color="#000080">(</font><font color="#800000">'single ll rotation'</font><font color="#000080">);
                        </font><font color="#FF0000"><b>if </b></font>t<font color="#000080">^.</font>left<font color="#000080">^.</font>bal <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then
            begin
              </b></font>ll<font color="#000080">(</font>t<font color="#000080">);
                          </font>t<font color="#000080">^.</font>bal <font color="#000080">:= +</font><font color="#800000">1</font><font color="#000080">;
                          </font>h <font color="#000080">:= </font>False<font color="#000080">;
                        </font><font color="#FF0000"><b>end
                        else
            begin
              </b></font>ll<font color="#000080">(</font>t<font color="#000080">);
                          </font>t<font color="#000080">^.</font>left<font color="#000080">^.</font>bal <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
                          </font>t<font color="#000080">^.</font>bal <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
                          </font>h <font color="#000080">:= </font>True<font color="#000080">;
                        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
          </font><font color="#FF0000"><b>end
          else </b></font><font color="#008000"><i>{ t^.left^.bal  = +1 }
          </i></font><font color="#FF0000"><b>begin  </b></font><font color="#008000"><i>{ double lr rotation }
            </i></font>Writeln<font color="#000080">(</font><font color="#800000">'double lr rotation'</font><font color="#000080">);
            </font>lr<font color="#000080">(</font>t<font color="#000080">);
                        </font>t<font color="#000080">^.</font>left<font color="#000080">^.</font>bal <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
                        </font>t<font color="#000080">^.</font>right<font color="#000080">^.</font>bal <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
                        </font>h <font color="#000080">:= </font>True<font color="#000080">;
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>Function </b></font>deletemin<font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>t <font color="#000080">: </font>tree<font color="#000080">; </font><font color="#FF0000"><b>Var </b></font>h <font color="#000080">: </font>Boolean<font color="#000080">) : </font>Char<font color="#000080">;
  </font><font color="#FF0000"><b>begin </b></font><font color="#008000"><i>{ deletemin }
    </i></font><font color="#FF0000"><b>if </b></font>t<font color="#000080">^.</font>left <font color="#000080">= </font><font color="#FF0000"><b>nil then
    begin
      </b></font>deletemin <font color="#000080">:= </font>t<font color="#000080">^.</font>key<font color="#000080">;
      </font>t <font color="#000080">:= </font>t<font color="#000080">^.</font>right<font color="#000080">;
            </font>h <font color="#000080">:= </font>True<font color="#000080">;
    </font><font color="#FF0000"><b>end
    else
    begin
      </b></font>deletemin <font color="#000080">:= </font>deletemin<font color="#000080">(</font>t<font color="#000080">^.</font>left<font color="#000080">, </font>h<font color="#000080">);
            </font><font color="#FF0000"><b>if </b></font>h <font color="#FF0000"><b>then
        </b></font>balanceleft<font color="#000080">(</font>t<font color="#000080">, </font>h<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin </b></font><font color="#008000"><i>{ delete }
  </i></font><font color="#FF0000"><b>if </b></font>t <font color="#000080">&lt;&gt; </font><font color="#FF0000"><b>nil then
  begin
    if </b></font>k <font color="#000080">&lt; </font>t<font color="#000080">^.</font>key <font color="#FF0000"><b>then
    begin
      </b></font>delete<font color="#000080">(</font>k<font color="#000080">, </font>t<font color="#000080">^.</font>left<font color="#000080">, </font>h<font color="#000080">);
            </font><font color="#FF0000"><b>if </b></font>h <font color="#FF0000"><b>then
        </b></font>balanceleft<font color="#000080">(</font>t<font color="#000080">, </font>h<font color="#000080">);
    </font><font color="#FF0000"><b>end
    else
    if </b></font>k <font color="#000080">&gt; </font>t<font color="#000080">^.</font>key <font color="#FF0000"><b>then
    begin
      </b></font>delete<font color="#000080">(</font>k<font color="#000080">, </font>t<font color="#000080">^.</font>right<font color="#000080">, </font>h<font color="#000080">);
            </font><font color="#FF0000"><b>if </b></font>h <font color="#FF0000"><b>then
        </b></font>balanceright<font color="#000080">(</font>t<font color="#000080">, </font>h<font color="#000080">);
    </font><font color="#FF0000"><b>end
    else
    if </b></font><font color="#000080">(</font>t<font color="#000080">^.</font>left <font color="#000080">= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>t<font color="#000080">^.</font>right <font color="#000080">= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">) </font><font color="#FF0000"><b>then
    begin
      </b></font>t <font color="#000080">:= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">;
            </font>h <font color="#000080">:= </font>True<font color="#000080">;
    </font><font color="#FF0000"><b>end
    else
    if </b></font>t<font color="#000080">^.</font>left <font color="#000080">= </font><font color="#FF0000"><b>nil then
    begin
      </b></font>t <font color="#000080">:= </font>t<font color="#000080">^.</font>right<font color="#000080">;
            </font>h <font color="#000080">:= </font>True<font color="#000080">;
    </font><font color="#FF0000"><b>end
    else
    if </b></font>t<font color="#000080">^.</font>right <font color="#000080">= </font><font color="#FF0000"><b>nil then
    begin
      </b></font>t <font color="#000080">:= </font>t<font color="#000080">^.</font>left<font color="#000080">;
            </font>h <font color="#000080">:= </font>True<font color="#000080">;
    </font><font color="#FF0000"><b>end
    else
    begin
      </b></font>t<font color="#000080">^.</font>key <font color="#000080">:= </font>deletemin<font color="#000080">(</font>t<font color="#000080">^.</font>right<font color="#000080">, </font>h<font color="#000080">);
            </font><font color="#FF0000"><b>if </b></font>h <font color="#FF0000"><b>then
              </b></font>balanceright<font color="#000080">(</font>t<font color="#000080">, </font>h<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to POINTERS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0011.PAS">Original</a><b>]</b></p></body>
</html>
