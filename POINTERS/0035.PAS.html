<html>
<head><title> "Re: String Queues" by MIKE PHILLIPS</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to POINTERS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0035.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#FF0000"><b>UNIT </b></font>Queues<font color="#000080">;  </font><font color="#008000"><i>{ see test program at the end ! }

</i></font><font color="#FF0000"><b>INTERFACE

TYPE
  </b></font>PStrRec <font color="#000080">= ^</font>TStrQueue<font color="#000080">;
  </font>TStrQueue <font color="#000080">= </font><font color="#FF0000"><b>RECORD
                 </b></font>Data <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
                 </font>Next <font color="#000080">: </font>PStrRec<font color="#000080">;
              </font><font color="#FF0000"><b>END</b></font><font color="#000080">; </font><font color="#008000"><i>(* of RECORD *)
  </i></font>StrQueue <font color="#000080">= </font><font color="#FF0000"><b>OBJECT
             Private
               </b></font>Start<font color="#000080">, </font>Finish<font color="#000080">, </font>Temp <font color="#000080">: </font>PStrRec<font color="#000080">;
             </font><font color="#FF0000"><b>Public
               CONSTRUCTOR </b></font>Init<font color="#000080">;
               </font><font color="#FF0000"><b>PROCEDURE </b></font>Reset<font color="#000080">;
               </font><font color="#FF0000"><b>FUNCTION </b></font>Copy <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
               </font><font color="#FF0000"><b>FUNCTION </b></font>AtEnd <font color="#000080">: </font>boolean<font color="#000080">;
               </font><font color="#FF0000"><b>PROCEDURE </b></font>Enqueue <font color="#000080">(</font>S <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">);
               </font><font color="#FF0000"><b>PROCEDURE </b></font>Dequeue <font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>S <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">);
               </font><font color="#FF0000"><b>FUNCTION </b></font>Empty <font color="#000080">: </font>boolean<font color="#000080">;
               </font><font color="#FF0000"><b>DESTRUCTOR </b></font>Done<font color="#000080">;
             </font><font color="#FF0000"><b>END</b></font><font color="#000080">; </font><font color="#008000"><i>(* of Object StrQueue *)
  </i></font>pStrQueue <font color="#000080">= ^</font>StrQueue<font color="#000080">;

</font><font color="#FF0000"><b>IMPLEMENTATION

CONSTRUCTOR </b></font>StrQueue<font color="#000080">.</font>Init<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>Start <font color="#000080">:= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">;
  </font>Finish <font color="#000080">:= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">;
  </font>Temp <font color="#000080">:= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">; </font><font color="#008000"><i>(* of CONSTRUCTOR StrQueue.Init *)



</i></font><font color="#FF0000"><b>PROCEDURE </b></font>StrQueue<font color="#000080">.</font>Reset<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>Temp <font color="#000080">:= </font>Start<font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;  </font><font color="#008000"><i>(* of StrQueue.Reset *)



</i></font><font color="#FF0000"><b>FUNCTION </b></font>StrQueue<font color="#000080">.</font>Copy <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  if </b></font>Temp <font color="#000080">&lt;&gt; </font><font color="#FF0000"><b>nil then </b></font>Copy <font color="#000080">:= </font>Temp<font color="#000080">^.</font>Data
  <font color="#FF0000"><b>else </b></font>Copy <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;

  </font><font color="#FF0000"><b>if </b></font>Temp <font color="#000080">&lt;&gt; </font>Finish <font color="#FF0000"><b>then </b></font>Temp <font color="#000080">:= </font>Temp<font color="#000080">^.</font>Next
  <font color="#FF0000"><b>else </b></font>Temp <font color="#000080">:= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">; </font><font color="#008000"><i>(* of StrQueue.Copy *)


</i></font><font color="#FF0000"><b>FUNCTION </b></font>StrQueue<font color="#000080">.</font>AtEnd <font color="#000080">: </font>boolean<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>AtEnd <font color="#000080">:= </font>Temp <font color="#000080">= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">; </font><font color="#008000"><i>(* of StrQueue.AtEnd *)



</i></font><font color="#FF0000"><b>PROCEDURE </b></font>StrQueue<font color="#000080">.</font>Enqueue <font color="#000080">(</font>S <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">);
</font><font color="#FF0000"><b>VAR
  </b></font>T <font color="#000080">: </font>PStrRec<font color="#000080">;

</font><font color="#FF0000"><b>BEGIN
  </b></font>new <font color="#000080">(</font>T<font color="#000080">);
  </font>T<font color="#000080">^.</font>Data <font color="#000080">:= </font>S<font color="#000080">;
  </font>T<font color="#000080">^.</font>Next <font color="#000080">:= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>IF </b></font>Start <font color="#000080">= </font><font color="#FF0000"><b>nil THEN
    </b></font>Start <font color="#000080">:= </font>T
  <font color="#FF0000"><b>ELSE
    </b></font>Finish<font color="#000080">^.</font>Next <font color="#000080">:= </font>T<font color="#000080">;
  </font>Finish <font color="#000080">:= </font>T<font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">; </font><font color="#008000"><i>(* of StrQueue.Enqueue *)



</i></font><font color="#FF0000"><b>PROCEDURE </b></font>StrQueue<font color="#000080">.</font>Dequeue <font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>S <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">);
</font><font color="#FF0000"><b>VAR
  </b></font>T <font color="#000080">: </font>PStrRec<font color="#000080">;

</font><font color="#FF0000"><b>BEGIN

  IF </b></font>Start <font color="#000080">= </font><font color="#FF0000"><b>nil THEN BEGIN
    </b></font>S <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
    </font>exit<font color="#000080">;
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">; </font><font color="#008000"><i>(* of IF *)

  </i></font>S <font color="#000080">:= </font>Start<font color="#000080">^.</font>Data<font color="#000080">;
  </font>T <font color="#000080">:= </font>Start<font color="#000080">^.</font>Next<font color="#000080">;
  </font>dispose <font color="#000080">(</font>Start<font color="#000080">);
  </font>Start <font color="#000080">:= </font>T<font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">; </font><font color="#008000"><i>(* of StrQueue.Dequeue *)



</i></font><font color="#FF0000"><b>FUNCTION </b></font>StrQueue<font color="#000080">.</font>Empty <font color="#000080">: </font>boolean<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>Empty <font color="#000080">:= </font>Start <font color="#000080">= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">; </font><font color="#008000"><i>(* of StrQueue.Empty *)



</i></font><font color="#FF0000"><b>DESTRUCTOR </b></font>StrQueue<font color="#000080">.</font>Done<font color="#000080">;
</font><font color="#FF0000"><b>VAR
  </b></font>Belch <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  REPEAT
    </b></font>Dequeue <font color="#000080">(</font>Belch<font color="#000080">);
  </font><font color="#FF0000"><b>UNTIL </b></font>Empty<font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">; </font><font color="#008000"><i>(* of Destructor StrQueue.Done *)


</i></font><font color="#FF0000"><b>END</b></font><font color="#000080">. </font><font color="#008000"><i>(* of UNIT Queues *)

</i></font><font color="#000080">---------------

</font><font color="#FF0000"><b>PROGRAM </b></font>TestStr<font color="#000080">;

</font><font color="#FF0000"><b>USES </b></font>Queues<font color="#000080">,</font>strings<font color="#000080">;

</font><font color="#FF0000"><b>CONST
  </b></font>MaxStrLen <font color="#000080">= </font><font color="#800000">$FFF8</font><font color="#000080">;

</font><font color="#FF0000"><b>VAR
  </b></font>ThisString <font color="#000080">: </font>StrQueue<font color="#000080">;
  </font>Temp <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
  </font>blah <font color="#000080">: </font>pchar<font color="#000080">;
  </font>theend <font color="#000080">: </font>pointer<font color="#000080">;
  </font>T2 <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">80</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>char<font color="#000080">;

</font><font color="#FF0000"><b>BEGIN

  </b></font>ThisString<font color="#000080">.</font>Init<font color="#000080">;

  </font>readln <font color="#000080">(</font>temp<font color="#000080">);
  </font><font color="#FF0000"><b>WHILE </b></font>Temp <font color="#000080">&lt;&gt; </font><font color="#800000">'' </font><font color="#FF0000"><b>DO BEGIN
    </b></font>ThisString<font color="#000080">.</font>enqueue <font color="#000080">(</font>Temp<font color="#000080">);
    </font>readln <font color="#000080">(</font>temp<font color="#000080">);
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">; </font><font color="#008000"><i>(* of WHILE *)

  </i></font>getmem <font color="#000080">(</font>blah<font color="#000080">, </font>MaxStrLen<font color="#000080">);
  </font>fillchar <font color="#000080">(</font>blah<font color="#000080">^, </font>MaxStrLen<font color="#000080">, </font><font color="#800000">#0</font><font color="#000080">);


  </font><font color="#FF0000"><b>WHILE </b></font><font color="#000080">(</font><font color="#FF0000"><b>NOT </b></font>ThisString<font color="#000080">.</font>Empty<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>strlen <font color="#000080">(</font>blah<font color="#000080">) &lt; (</font>MaxStrLen <font color="#000080">- </font><font color="#800000">81</font><font color="#000080">)) </font><font color="#FF0000"><b>DO BEGIN
    </b></font>ThisString<font color="#000080">.</font>dequeue <font color="#000080">(</font>Temp<font color="#000080">);
    </font>StrPCopy <font color="#000080">(</font>T2<font color="#000080">, </font>Temp<font color="#000080">);
    </font>StrLCat <font color="#000080">(</font>blah<font color="#000080">, </font>T2<font color="#000080">, </font>MaxStrLen<font color="#000080">);
    </font>StrLCat <font color="#000080">(</font>blah<font color="#000080">, </font><font color="#800000">#13#10</font><font color="#000080">, </font>MaxStrLen<font color="#000080">);
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">; </font><font color="#008000"><i>(* of WHILE *)

  </i></font>write <font color="#000080">(</font>blah<font color="#000080">);

  </font>freemem <font color="#000080">(</font>blah<font color="#000080">, </font>MaxStrLen<font color="#000080">);

  </font>readln<font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to POINTERS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0035.PAS">Original</a><b>]</b></p></body>
</html>
