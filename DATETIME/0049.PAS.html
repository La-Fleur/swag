<html>
<head><title> "Time & Date Stamp Generator" by SCOTT EARNEST</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to DATETIME SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0049.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>unit </b></font>Dates<font color="#000080">;

</font><font color="#008000"><i>{Gives time and date passed in DateTime format (defined by the DOS unit)
 as a fully formatted string.  DFormat is a word type variable that tells
 the code how to handle the time and date:


 Bit  Function:             If 0:                 If 1:
 ---  --------------------  --------------------  --------------------
  15  ShowDOW               Don't show day name   Show day name
  14  Century               Show year as XX       Show year as XXXX
  13  SpaceDate             No spaces in date     Space between fields
  12  CommaSep              Use comma in date     don't use comma
  11  MonthType             Numerical             English name
  10  &gt; DateOrder | 00 -- DDMMYY | 10 -- YYMMDD
   9  &gt;           | 01 -- MMDDYY | 11 -- YYDDMM
   8  MonthName             3 letters only        Full name of month
   7  DateSep               Space date with &quot; &quot;   Space date with &quot;-&quot;
   6  DTOrder               time then date        date then time
   5  &gt; TDSpace 00 - 11 : 1 - 4 spaces, respectively
   4  &gt;
   3  HourPad               Use needed spaces     Always uses 2 spaces
   2  HPadMeth              Pad hour with &quot; &quot;     Pad hour with &quot;0&quot;
   1  MSPadMeth             Pad min/sec with &quot; &quot;  Pad min/sec with &quot;0&quot;
   0  Show12_24             Use 12 hr. &amp; am/pm    24-hour (military)

 Some fields require others to be set/clear to have any affect.  I never
 got around to defining any constants for the fields, but that's easy
 enough to take care of in the interface section, if needed.

 Use freely in any venture, private or public, but if you use it in anything
 that makes money, please at the very least, let me the author of this unit,
 know about it!  :-)

 Standard disclaimers apply.

 Written (and Submitted) by Scott Earnest, some time in 1994
 e-mail (Internet): scott@whiplash.pc.cc.cmu.edu
}

</i></font><font color="#FF0000"><b>interface

uses </b></font>DOS<font color="#000080">;

</font><font color="#FF0000"><b>var
  </b></font>lastdate <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>DateTimeString <font color="#000080">(</font>Chron <font color="#000080">: </font>DateTime<font color="#000080">; </font>DFormat <font color="#000080">: </font>word<font color="#000080">) : </font><font color="#FF0000"><b>string</b></font><font color="#000080">;

</font><font color="#FF0000"><b>implementation

const
  </b></font>Month3 <font color="#000080">: </font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">1 </font><font color="#000080">.. </font><font color="#800000">12</font><font color="#000080">] </font><font color="#FF0000"><b>of string</b></font><font color="#000080">[</font><font color="#800000">3</font><font color="#000080">] =
    (</font><font color="#800000">'Jan'</font><font color="#000080">, </font><font color="#800000">'Feb'</font><font color="#000080">, </font><font color="#800000">'Mar'</font><font color="#000080">, </font><font color="#800000">'Apr'</font><font color="#000080">, </font><font color="#800000">'May'</font><font color="#000080">, </font><font color="#800000">'Jun'</font><font color="#000080">,
     </font><font color="#800000">'Jul'</font><font color="#000080">, </font><font color="#800000">'Aug'</font><font color="#000080">, </font><font color="#800000">'Sep'</font><font color="#000080">, </font><font color="#800000">'Oct'</font><font color="#000080">, </font><font color="#800000">'Nov'</font><font color="#000080">, </font><font color="#800000">'Dec'</font><font color="#000080">);
  </font>MonthF <font color="#000080">: </font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">1 </font><font color="#000080">.. </font><font color="#800000">12</font><font color="#000080">] </font><font color="#FF0000"><b>of string </b></font><font color="#000080">[</font><font color="#800000">6</font><font color="#000080">] =
    (</font><font color="#800000">'uary'</font><font color="#000080">,   </font><font color="#800000">'ruary'</font><font color="#000080">,  </font><font color="#800000">'ch'</font><font color="#000080">,     </font><font color="#800000">'il'</font><font color="#000080">,     </font><font color="#800000">''</font><font color="#000080">,       </font><font color="#800000">'e'</font><font color="#000080">,
     </font><font color="#800000">'y'</font><font color="#000080">,      </font><font color="#800000">'ust'</font><font color="#000080">,    </font><font color="#800000">'tember'</font><font color="#000080">, </font><font color="#800000">'ober'</font><font color="#000080">,   </font><font color="#800000">'ember'</font><font color="#000080">,  </font><font color="#800000">'ember'</font><font color="#000080">);
  </font>DayName <font color="#000080">: </font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">0 </font><font color="#000080">.. </font><font color="#800000">6</font><font color="#000080">] </font><font color="#FF0000"><b>of string</b></font><font color="#000080">[</font><font color="#800000">9</font><font color="#000080">] =
    (</font><font color="#800000">'Sunday'</font><font color="#000080">, </font><font color="#800000">'Monday'</font><font color="#000080">, </font><font color="#800000">'Tuesday'</font><font color="#000080">, </font><font color="#800000">'Wednesday'</font><font color="#000080">,
     </font><font color="#800000">'Thursday'</font><font color="#000080">, </font><font color="#800000">'Friday'</font><font color="#000080">, </font><font color="#800000">'Saturday'</font><font color="#000080">);
  </font>PadSpace <font color="#000080">= </font><font color="#800000">' '</font><font color="#000080">;
  </font>PadDash <font color="#000080">= </font><font color="#800000">'-'</font><font color="#000080">;
  </font>PadZero <font color="#000080">= </font><font color="#800000">'0'</font><font color="#000080">;

</font><font color="#FF0000"><b>type
  </b></font>TDateTimeFormat <font color="#000080">= </font><font color="#FF0000"><b>record
                      </b></font>ShowDOW<font color="#000080">,
                      </font>Century<font color="#000080">,
                      </font>SpaceDate<font color="#000080">,
                      </font>CommaSep<font color="#000080">,
                      </font>MonthType<font color="#000080">,
                      </font>MonthName<font color="#000080">,
                      </font>DateSep<font color="#000080">,
                      </font>DTOrder<font color="#000080">,
                      </font>HourPad<font color="#000080">,
                      </font>HPadMeth<font color="#000080">,
                      </font>MSPadMeth<font color="#000080">,
                      </font>Show12_24 <font color="#000080">: </font>boolean<font color="#000080">;
                      </font>DateOrder<font color="#000080">,
                      </font>TDSpace <font color="#000080">: </font>byte<font color="#000080">;
                    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>var
  </b></font>df <font color="#000080">: </font>TDateTimeFormat<font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>SetFlags_df <font color="#000080">(</font>fvar <font color="#000080">: </font>word<font color="#000080">);

  </font><font color="#FF0000"><b>procedure </b></font>shiftr<font color="#000080">;

  </font><font color="#FF0000"><b>begin
    </b></font>fvar <font color="#000080">:= </font>fvar <font color="#FF0000"><b>shr </b></font><font color="#800000">1</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>df<font color="#000080">.</font>DateOrder <font color="#000080">:= (</font>fvar <font color="#FF0000"><b>and </b></font><font color="#800000">$0600</font><font color="#000080">) </font><font color="#FF0000"><b>shr </b></font><font color="#800000">9</font><font color="#000080">;
  </font>df<font color="#000080">.</font>TDSpace <font color="#000080">:= (</font>fvar <font color="#FF0000"><b>and </b></font><font color="#800000">$0030</font><font color="#000080">) </font><font color="#FF0000"><b>shr </b></font><font color="#800000">4</font><font color="#000080">;
  </font>df<font color="#000080">.</font>Show12_24 <font color="#000080">:= </font>odd <font color="#000080">(</font>fvar<font color="#000080">); </font>shiftr<font color="#000080">;
  </font>df<font color="#000080">.</font>MSPadMeth <font color="#000080">:= </font>odd <font color="#000080">(</font>fvar<font color="#000080">); </font>shiftr<font color="#000080">;
  </font>df<font color="#000080">.</font>HPadMeth <font color="#000080">:= </font>odd <font color="#000080">(</font>fvar<font color="#000080">); </font>shiftr<font color="#000080">;
  </font>df<font color="#000080">.</font>HourPad <font color="#000080">:= </font>odd <font color="#000080">(</font>fvar<font color="#000080">); </font>shiftr<font color="#000080">;
  </font>shiftr<font color="#000080">; </font>shiftr<font color="#000080">;
  </font>df<font color="#000080">.</font>DTOrder <font color="#000080">:= </font>odd <font color="#000080">(</font>fvar<font color="#000080">); </font>shiftr<font color="#000080">;
  </font>df<font color="#000080">.</font>DateSep <font color="#000080">:= </font>odd <font color="#000080">(</font>fvar<font color="#000080">); </font>shiftr<font color="#000080">;
  </font>df<font color="#000080">.</font>MonthName <font color="#000080">:= </font>odd <font color="#000080">(</font>fvar<font color="#000080">); </font>shiftr<font color="#000080">;
  </font>shiftr<font color="#000080">; </font>shiftr<font color="#000080">;
  </font>df<font color="#000080">.</font>MonthType <font color="#000080">:= </font>odd <font color="#000080">(</font>fvar<font color="#000080">); </font>shiftr<font color="#000080">;
  </font>df<font color="#000080">.</font>CommaSep <font color="#000080">:= </font>odd <font color="#000080">(</font>fvar<font color="#000080">); </font>shiftr<font color="#000080">;
  </font>df<font color="#000080">.</font>SpaceDate <font color="#000080">:= </font>odd <font color="#000080">(</font>fvar<font color="#000080">); </font>shiftr<font color="#000080">;
  </font>df<font color="#000080">.</font>Century <font color="#000080">:= </font>odd <font color="#000080">(</font>fvar<font color="#000080">); </font>shiftr<font color="#000080">;
  </font>df<font color="#000080">.</font>ShowDow <font color="#000080">:= </font>odd <font color="#000080">(</font>fvar<font color="#000080">); </font>shiftr<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>CalcDOW <font color="#000080">(</font>d<font color="#000080">, </font>m<font color="#000080">, </font>y <font color="#000080">: </font>word<font color="#000080">) : </font>byte<font color="#000080">;

</font><font color="#FF0000"><b>var
  </b></font>t1<font color="#000080">, </font>t2<font color="#000080">, </font>t3<font color="#000080">, </font>t4<font color="#000080">, </font>t5<font color="#000080">, </font>t6<font color="#000080">, </font>t7 <font color="#000080">: </font>integer<font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>t1 <font color="#000080">:= </font>m <font color="#000080">+ </font><font color="#800000">12 </font><font color="#000080">* </font>trunc <font color="#000080">(</font><font color="#800000">0.6 </font><font color="#000080">+ </font><font color="#800000">1 </font><font color="#000080">/ </font>m<font color="#000080">);
  </font>t2 <font color="#000080">:= </font>y <font color="#000080">- </font>trunc <font color="#000080">(</font><font color="#800000">0.6 </font><font color="#000080">+ </font><font color="#800000">1 </font><font color="#000080">/ </font>m<font color="#000080">);
  </font>t3 <font color="#000080">:= </font>trunc <font color="#000080">(</font><font color="#800000">13 </font><font color="#000080">* (</font>t1 <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">) / </font><font color="#800000">5</font><font color="#000080">);
  </font>t4 <font color="#000080">:= </font>trunc <font color="#000080">(</font><font color="#800000">5 </font><font color="#000080">* </font>t2 <font color="#000080">/ </font><font color="#800000">4</font><font color="#000080">);
  </font>t5 <font color="#000080">:= </font>trunc <font color="#000080">(</font>t2 <font color="#000080">/ </font><font color="#800000">100</font><font color="#000080">);
  </font>t6 <font color="#000080">:= </font>trunc <font color="#000080">(</font>t2 <font color="#000080">/ </font><font color="#800000">400</font><font color="#000080">);
  </font>t7 <font color="#000080">:= </font>t3 <font color="#000080">+ </font>t4 <font color="#000080">- </font>t5 <font color="#000080">+ </font>t6 <font color="#000080">+ </font>d <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
  </font>CalcDOW <font color="#000080">:= </font>t7 <font color="#000080">- </font><font color="#800000">7 </font><font color="#000080">* </font>trunc <font color="#000080">(</font>t7 <font color="#000080">/ </font><font color="#800000">7</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>PadNum <font color="#000080">(</font>num <font color="#000080">: </font>word<font color="#000080">; </font>padch <font color="#000080">: </font>char<font color="#000080">; </font>places <font color="#000080">: </font>byte<font color="#000080">) : </font><font color="#FF0000"><b>string</b></font><font color="#000080">;

</font><font color="#FF0000"><b>var
  </b></font>holdstr<font color="#000080">,
  </font>padstr <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>fillchar <font color="#000080">(</font>padstr<font color="#000080">, </font>sizeof<font color="#000080">(</font>padstr<font color="#000080">), </font>padch<font color="#000080">);
  </font>padstr<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">] := </font><font color="#800000">#16</font><font color="#000080">;
  </font>str <font color="#000080">(</font>num<font color="#000080">, </font>holdstr<font color="#000080">);
  </font>padstr <font color="#000080">:= </font>concat <font color="#000080">(</font>padstr<font color="#000080">, </font>holdstr<font color="#000080">);
  </font>delete <font color="#000080">(</font>padstr<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font>length <font color="#000080">(</font>padstr<font color="#000080">) - </font>places<font color="#000080">);
  </font>PadNum <font color="#000080">:= </font>padstr<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>BuildTime <font color="#000080">(</font><font color="#FF0000"><b>var </b></font>dt <font color="#000080">: </font>DateTime<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>ts <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">);

</font><font color="#FF0000"><b>var
  </b></font>pad <font color="#000080">: </font>char<font color="#000080">;
  </font>tempstr <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
  </font>hour <font color="#000080">: </font>byte<font color="#000080">;

</font><font color="#FF0000"><b>begin
  case </b></font>df<font color="#000080">.</font>MSPadMeth <font color="#FF0000"><b>of
    </b></font>true  <font color="#000080">: </font>pad <font color="#000080">:= </font>PadZero<font color="#000080">;
    </font>false <font color="#000080">: </font>pad <font color="#000080">:= </font>PadSpace<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>ts <font color="#000080">:= </font>concat <font color="#000080">(</font><font color="#800000">':'</font><font color="#000080">, </font>PadNum <font color="#000080">(</font>dt<font color="#000080">.</font>min<font color="#000080">, </font>pad<font color="#000080">, </font><font color="#800000">2</font><font color="#000080">), </font><font color="#800000">':'</font><font color="#000080">, </font>PadNum <font color="#000080">(</font>dt<font color="#000080">.</font>sec<font color="#000080">, </font>pad<font color="#000080">, </font><font color="#800000">2</font><font color="#000080">));
  </font><font color="#FF0000"><b>case </b></font>df<font color="#000080">.</font>Show12_24 <font color="#FF0000"><b>of
    </b></font>true  <font color="#000080">: </font>hour <font color="#000080">:= </font>dt<font color="#000080">.</font>hour<font color="#000080">;
    </font>false <font color="#000080">: </font><font color="#FF0000"><b>begin
              </b></font>hour <font color="#000080">:= </font>dt<font color="#000080">.</font>hour <font color="#FF0000"><b>mod </b></font><font color="#800000">12</font><font color="#000080">;
              </font><font color="#FF0000"><b>if </b></font>hour <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>hour <font color="#000080">:= </font><font color="#800000">12</font><font color="#000080">;
              </font><font color="#FF0000"><b>case </b></font>dt<font color="#000080">.</font>hour <font color="#FF0000"><b>of
                </b></font><font color="#800000">0 </font><font color="#000080">.. </font><font color="#800000">11  </font><font color="#000080">: </font>ts <font color="#000080">:= </font>concat <font color="#000080">(</font>ts<font color="#000080">, </font><font color="#800000">'a'</font><font color="#000080">);
                </font><font color="#800000">12 </font><font color="#000080">.. </font><font color="#800000">23 </font><font color="#000080">: </font>ts <font color="#000080">:= </font>concat <font color="#000080">(</font>ts<font color="#000080">, </font><font color="#800000">'p'</font><font color="#000080">);
              </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>case </b></font>df<font color="#000080">.</font>HourPad <font color="#FF0000"><b>of
    </b></font>true  <font color="#000080">: </font><font color="#FF0000"><b>begin
              case </b></font>df<font color="#000080">.</font>HPadMeth <font color="#FF0000"><b>of
                </b></font>true  <font color="#000080">: </font>pad <font color="#000080">:= </font>PadZero<font color="#000080">;
                </font>false <font color="#000080">: </font>pad <font color="#000080">:= </font>PadSpace<font color="#000080">;
              </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
              </font>ts <font color="#000080">:= </font>concat <font color="#000080">(</font>PadNum <font color="#000080">(</font>hour<font color="#000080">, </font>pad<font color="#000080">, </font><font color="#800000">2</font><font color="#000080">), </font>ts<font color="#000080">);
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>false <font color="#000080">: </font><font color="#FF0000"><b>begin
              </b></font>str <font color="#000080">(</font>hour<font color="#000080">, </font>tempstr<font color="#000080">);
              </font>ts <font color="#000080">:= </font>concat <font color="#000080">(</font>tempstr<font color="#000080">, </font>ts<font color="#000080">);
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>BuildDate <font color="#000080">(</font><font color="#FF0000"><b>var </b></font>dt <font color="#000080">: </font>DateTime<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>ds <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">);

</font><font color="#FF0000"><b>var
  </b></font>DOW <font color="#000080">: </font>byte<font color="#000080">;
  </font>tempstr <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
  </font>pad <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">];
  </font>ystr<font color="#000080">, </font>dstr <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">4</font><font color="#000080">];
  </font>mstr <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">9</font><font color="#000080">];

</font><font color="#FF0000"><b>begin
  if </b></font>df<font color="#000080">.</font>ShowDOW <font color="#FF0000"><b>then
    </b></font>DOW <font color="#000080">:= </font>CalcDOW <font color="#000080">(</font>dt<font color="#000080">.</font>day<font color="#000080">, </font>dt<font color="#000080">.</font>month<font color="#000080">, </font>dt<font color="#000080">.</font>year<font color="#000080">);
  </font>ystr <font color="#000080">:= </font>PadNum <font color="#000080">(</font>dt<font color="#000080">.</font>year<font color="#000080">, </font><font color="#800000">' '</font><font color="#000080">, (</font>byte<font color="#000080">(</font>df<font color="#000080">.</font>Century<font color="#000080">) + </font><font color="#800000">1</font><font color="#000080">) * </font><font color="#800000">2</font><font color="#000080">);
  </font><font color="#FF0000"><b>case </b></font>df<font color="#000080">.</font>MonthType <font color="#FF0000"><b>of
    </b></font>false <font color="#000080">: </font><font color="#FF0000"><b>case </b></font>df<font color="#000080">.</font>SpaceDate <font color="#FF0000"><b>of
              </b></font>false <font color="#000080">: </font>mstr <font color="#000080">:= </font>PadNum <font color="#000080">(</font>dt<font color="#000080">.</font>month<font color="#000080">, </font><font color="#800000">'0'</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">);
              </font>true  <font color="#000080">: </font>str <font color="#000080">(</font>dt<font color="#000080">.</font>month<font color="#000080">, </font>mstr<font color="#000080">);
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>true  <font color="#000080">: </font><font color="#FF0000"><b>begin
              </b></font>mstr <font color="#000080">:= </font>Month3<font color="#000080">[</font>dt<font color="#000080">.</font>month<font color="#000080">];
              </font><font color="#FF0000"><b>if </b></font>df<font color="#000080">.</font>MonthName <font color="#FF0000"><b>then
                </b></font>mstr <font color="#000080">:= </font>concat <font color="#000080">(</font>mstr<font color="#000080">, </font>MonthF<font color="#000080">[</font>dt<font color="#000080">.</font>month<font color="#000080">]);
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>case </b></font>df<font color="#000080">.</font>SpaceDate <font color="#FF0000"><b>of
    </b></font>false <font color="#000080">: </font>dstr <font color="#000080">:= </font>PadNum <font color="#000080">(</font>dt<font color="#000080">.</font>day<font color="#000080">, </font><font color="#800000">'0'</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">);
    </font>true  <font color="#000080">: </font>str <font color="#000080">(</font>dt<font color="#000080">.</font>day<font color="#000080">, </font>dstr<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>case </b></font>df<font color="#000080">.</font>SpaceDate <font color="#FF0000"><b>of
    </b></font>false <font color="#000080">: </font><font color="#FF0000"><b>begin
              case </b></font>df<font color="#000080">.</font>DateOrder <font color="#FF0000"><b>of
                </b></font><font color="#800000">0 </font><font color="#000080">: </font>ds <font color="#000080">:= </font>concat <font color="#000080">(</font>dstr<font color="#000080">, </font>mstr<font color="#000080">, </font>ystr<font color="#000080">);
                </font><font color="#800000">1 </font><font color="#000080">: </font>ds <font color="#000080">:= </font>concat <font color="#000080">(</font>mstr<font color="#000080">, </font>dstr<font color="#000080">, </font>ystr<font color="#000080">);
                </font><font color="#800000">2 </font><font color="#000080">: </font>ds <font color="#000080">:= </font>concat <font color="#000080">(</font>ystr<font color="#000080">, </font>mstr<font color="#000080">, </font>dstr<font color="#000080">);
                </font><font color="#800000">3 </font><font color="#000080">: </font>ds <font color="#000080">:= </font>concat <font color="#000080">(</font>ystr<font color="#000080">, </font>dstr<font color="#000080">, </font>mstr<font color="#000080">);
              </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>true  <font color="#000080">: </font><font color="#FF0000"><b>begin
              case </b></font>df<font color="#000080">.</font>DateSep <font color="#FF0000"><b>of
                </b></font>false <font color="#000080">: </font>pad <font color="#000080">:= </font>PadSpace<font color="#000080">;
                </font>true  <font color="#000080">: </font>pad <font color="#000080">:= </font>PadDash<font color="#000080">;
              </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
              </font><font color="#FF0000"><b>case </b></font>df<font color="#000080">.</font>DateOrder <font color="#FF0000"><b>of
                </b></font><font color="#800000">0 </font><font color="#000080">: </font>ds <font color="#000080">:= </font>concat <font color="#000080">(</font>dstr<font color="#000080">, </font>pad<font color="#000080">, </font>mstr<font color="#000080">, </font>pad<font color="#000080">, </font>ystr<font color="#000080">);
                </font><font color="#800000">1 </font><font color="#000080">: </font><font color="#FF0000"><b>case </b></font>df<font color="#000080">.</font>CommaSep <font color="#FF0000"><b>of
                      </b></font>false <font color="#000080">: </font>ds <font color="#000080">:= </font>concat <font color="#000080">(</font>mstr<font color="#000080">, </font>pad<font color="#000080">, </font>dstr<font color="#000080">, </font>pad<font color="#000080">, </font>ystr<font color="#000080">);
                      </font>true  <font color="#000080">: </font>ds <font color="#000080">:= </font>concat <font color="#000080">(</font>mstr<font color="#000080">, </font>pad<font color="#000080">, </font>dstr<font color="#000080">, </font><font color="#800000">','</font><font color="#000080">, </font>pad<font color="#000080">, </font>ystr<font color="#000080">);
                    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
                </font><font color="#800000">2 </font><font color="#000080">: </font>ds <font color="#000080">:= </font>concat <font color="#000080">(</font>ystr<font color="#000080">, </font>pad<font color="#000080">, </font>mstr<font color="#000080">, </font>pad<font color="#000080">, </font>dstr<font color="#000080">);
                </font><font color="#800000">3 </font><font color="#000080">: </font>ds <font color="#000080">:= </font>concat <font color="#000080">(</font>ystr<font color="#000080">, </font>pad<font color="#000080">, </font>dstr<font color="#000080">, </font>pad<font color="#000080">, </font>mstr<font color="#000080">);
              </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>df<font color="#000080">.</font>ShowDOW <font color="#FF0000"><b>then
    </b></font>ds <font color="#000080">:= </font>concat <font color="#000080">(</font>DayName<font color="#000080">[</font>DOW<font color="#000080">], </font><font color="#800000">' '</font><font color="#000080">, </font>ds<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>spaces <font color="#000080">(</font>ns <font color="#000080">: </font>byte<font color="#000080">) : </font><font color="#FF0000"><b>string</b></font><font color="#000080">;

</font><font color="#FF0000"><b>var
  </b></font>holdstr <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>fillchar <font color="#000080">(</font>holdstr<font color="#000080">, </font>sizeof<font color="#000080">(</font>holdstr<font color="#000080">), </font><font color="#800000">32</font><font color="#000080">);
  </font>holdstr<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">] := </font>chr<font color="#000080">(</font>ns<font color="#000080">);
  </font>spaces <font color="#000080">:= </font>holdstr<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>DateTimeString <font color="#000080">(</font>Chron <font color="#000080">: </font>DateTime<font color="#000080">; </font>DFormat <font color="#000080">: </font>word<font color="#000080">) : </font><font color="#FF0000"><b>string</b></font><font color="#000080">;

</font><font color="#FF0000"><b>var
  </b></font>dstr<font color="#000080">, </font>tstr <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>dstr <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">; </font>tstr <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
  </font>SetFlags_df <font color="#000080">(</font>DFormat<font color="#000080">);
  </font>BuildTime <font color="#000080">(</font>Chron<font color="#000080">, </font>tstr<font color="#000080">);
  </font>BuildDate <font color="#000080">(</font>Chron<font color="#000080">, </font>dstr<font color="#000080">);
  </font><font color="#FF0000"><b>case </b></font>df<font color="#000080">.</font>DTOrder <font color="#FF0000"><b>of
    </b></font>false <font color="#000080">: </font>DateTimeString <font color="#000080">:= </font>concat <font color="#000080">(</font>tstr<font color="#000080">, </font>spaces<font color="#000080">(</font>df<font color="#000080">.</font>TDSpace <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">), </font>dstr<font color="#000080">);
    </font>true  <font color="#000080">: </font>DateTimeString <font color="#000080">:= </font>concat <font color="#000080">(</font>dstr<font color="#000080">, </font>spaces<font color="#000080">(</font>df<font color="#000080">.</font>TDSpace <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">), </font>tstr<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>lastdate <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to DATETIME SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0049.PAS">Original</a><b>]</b></p></body>
</html>
