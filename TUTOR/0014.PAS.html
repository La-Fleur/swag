<html>
<head><title> "Data representation; reading spec sheets" by GLENN GROTZINGER</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to TUTOR SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0014.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#000000">                        Turbo <font color="#FF0000"><b>Pascal for </b></font>DOS Tutorial
                             by Glenn Grotzinger
            Part <font color="#800000">11 </font><font color="#000080">-- </font>data representation<font color="#000080">; </font>reading specs sheets
                  copyright <font color="#000080">(</font>c<font color="#000080">) </font><font color="#800000">1995</font><font color="#000080">-</font><font color="#800000">96 </font>by Glenn Grotzinger

<font color="#FF0000"><b>Is </b></font>there still any interest <font color="#FF0000"><b>in </b></font>this tutorial<font color="#000080">?  </font><font color="#FF0000"><b>If </b></font>so<font color="#000080">, </font>tell me<font color="#000080">! :&gt;

</font>Here <font color="#FF0000"><b>is </b></font>a solution <font color="#FF0000"><b>to </b></font>last chapter<font color="#800000">'s problem.  Here is the unit.

</font>UNIT10

<font color="#008000"><i>{$O+}
</i></font><font color="#FF0000"><b>unit </b></font>unit10<font color="#000080">;

</font><font color="#FF0000"><b>interface
  uses </b></font>dos<font color="#000080">;
  </font><font color="#FF0000"><b>function </b></font>parse_filespec<font color="#000080">(</font>filename<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">):</font><font color="#FF0000"><b>string</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>procedure </b></font>copyafile<font color="#000080">(</font>inname<font color="#000080">, </font>outname<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">);
  </font><font color="#FF0000"><b>procedure </b></font>writehelp<font color="#000080">;
  </font><font color="#FF0000"><b>procedure </b></font>process<font color="#000080">;

</font><font color="#FF0000"><b>implementation

function </b></font>parse_filespec<font color="#000080">(</font>filename<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">):</font><font color="#FF0000"><b>string</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>const
      </b></font>all_files <font color="#000080">= </font><font color="#800000">$27</font><font color="#000080">;
    </font><font color="#FF0000"><b>var
      </b></font>dir<font color="#000080">: </font>dirstr<font color="#000080">;
      </font>name<font color="#000080">: </font>namestr<font color="#000080">;
      </font>ext<font color="#000080">: </font>extstr<font color="#000080">;
      </font>attr<font color="#000080">: </font>word<font color="#000080">;
      </font>f<font color="#000080">: </font>text<font color="#000080">;
    </font><font color="#FF0000"><b>begin
      </b></font>filename <font color="#000080">:= </font>fexpand<font color="#000080">(</font>filename<font color="#000080">);
      </font><font color="#FF0000"><b>if </b></font>filename<font color="#000080">[</font>length<font color="#000080">(</font>filename<font color="#000080">)] &lt;&gt; </font><font color="#800000">'\' </font><font color="#FF0000"><b>then
        begin
          </b></font>assign<font color="#000080">(</font>f<font color="#000080">, </font>filename<font color="#000080">);
          </font>getfattr<font color="#000080">(</font>f<font color="#000080">, </font>attr<font color="#000080">);
          </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>doserror <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>attr <font color="#FF0000"><b>and </b></font><font color="#800000">$10 </font><font color="#000080">&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
            </b></font>filename <font color="#000080">:= </font>filename <font color="#000080">+ </font><font color="#800000">'\'</font><font color="#000080">;
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font>fsplit<font color="#000080">(</font>filename<font color="#000080">, </font>dir<font color="#000080">, </font>name<font color="#000080">, </font>ext<font color="#000080">);
      </font><font color="#FF0000"><b>if </b></font>name <font color="#000080">= </font><font color="#800000">'' </font><font color="#FF0000"><b>then </b></font>name <font color="#000080">:= </font><font color="#800000">'*'</font><font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font>ext <font color="#000080">= </font><font color="#800000">'' </font><font color="#FF0000"><b>then </b></font>ext <font color="#000080">:= </font><font color="#800000">'.*'</font><font color="#000080">;
      </font>parse_filespec <font color="#000080">:= </font>dir<font color="#000080">+</font>name<font color="#000080">+</font>ext<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>procedure </b></font>copyafile<font color="#000080">(</font>inname<font color="#000080">, </font>outname<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">);
    </font><font color="#FF0000"><b>var
      </b></font>infile<font color="#000080">, </font>outfile<font color="#000080">: </font><font color="#FF0000"><b>file</b></font><font color="#000080">;
      </font>buffer<font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">8192</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
      </font>bytesw<font color="#000080">, </font>bytesr<font color="#000080">: </font>integer<font color="#000080">;
      </font>time<font color="#000080">: </font>longint<font color="#000080">;
      </font>attribute<font color="#000080">: </font>word<font color="#000080">;

    </font><font color="#FF0000"><b>begin
      </b></font>assign<font color="#000080">(</font>infile<font color="#000080">, </font>inname<font color="#000080">);
      </font>getfattr<font color="#000080">(</font>infile<font color="#000080">, </font>attribute<font color="#000080">);
      </font>reset<font color="#000080">(</font>infile<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
      </font>write<font color="#000080">(</font><font color="#800000">'Copying '</font><font color="#000080">, </font>inname<font color="#000080">, </font><font color="#800000">' ('</font><font color="#000080">, </font>filesize<font color="#000080">(</font>infile<font color="#000080">), </font><font color="#800000">' bytes)...'</font><font color="#000080">);
      </font>assign<font color="#000080">(</font>outfile<font color="#000080">, </font>outname<font color="#000080">);
      </font>setfattr<font color="#000080">(</font>outfile<font color="#000080">, </font>attribute<font color="#000080">);
      </font>rewrite<font color="#000080">(</font>outfile<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
      </font><font color="#FF0000"><b>repeat
        </b></font>blockread<font color="#000080">(</font>infile<font color="#000080">, </font>buffer<font color="#000080">, </font>sizeof<font color="#000080">(</font>buffer<font color="#000080">), </font>bytesr<font color="#000080">);
        </font><font color="#FF0000"><b>if </b></font>bytesr <font color="#000080">&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
          </b></font>blockwrite<font color="#000080">(</font>outfile<font color="#000080">, </font>buffer<font color="#000080">, </font>bytesr<font color="#000080">, </font>bytesw<font color="#000080">);
      </font><font color="#FF0000"><b>until </b></font>bytesr <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">;
      </font>getftime<font color="#000080">(</font>infile<font color="#000080">, </font>time<font color="#000080">);
      </font>setftime<font color="#000080">(</font>outfile<font color="#000080">, </font>time<font color="#000080">);
      </font>close<font color="#000080">(</font>infile<font color="#000080">);
      </font>close<font color="#000080">(</font>outfile<font color="#000080">);
      </font>writeln<font color="#000080">(</font><font color="#800000">'done...'</font><font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>procedure </b></font>writehelp<font color="#000080">;
    </font><font color="#FF0000"><b>begin
      </b></font>writeln<font color="#000080">(</font><font color="#800000">'Provide a source and a destination.'</font><font color="#000080">);
      </font>halt<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>procedure </b></font>process<font color="#000080">;
    </font><font color="#FF0000"><b>begin
      if </b></font>paramcount <font color="#000080">&lt;&gt; </font><font color="#800000">2 </font><font color="#FF0000"><b>then
        </b></font>writehelp<font color="#000080">;
      </font>copyafile<font color="#000080">(</font>parse_filespec<font color="#000080">(</font>paramstr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">)), </font>parse_filespec<font color="#000080">(</font>paramstr<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">)));
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font><font color="#FF0000"><b>And </b></font>here <font color="#FF0000"><b>is </b></font>the main <font color="#FF0000"><b>program

program </b></font>part10<font color="#000080">; </font><font color="#FF0000"><b>uses </b></font>unit10<font color="#000080">, </font>overlay<font color="#000080">;


  </font><font color="#008000"><i>{$O UNIT10.TPU}


  </i></font><font color="#FF0000"><b>begin
    </b></font>ovrinit<font color="#000080">(</font><font color="#800000">'PART10.OVR'</font><font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font>OvrResult <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
      begin
        case </b></font>OvrResult <font color="#FF0000"><b>of
          </b></font><font color="#000080">-</font><font color="#800000">1</font><font color="#000080">: </font>writeln<font color="#000080">(</font><font color="#800000">'Overlay manager error.'</font><font color="#000080">);
          -</font><font color="#800000">2</font><font color="#000080">: </font>writeln<font color="#000080">(</font><font color="#800000">'Overlay file not found.'</font><font color="#000080">);
          -</font><font color="#800000">3</font><font color="#000080">: </font>writeln<font color="#000080">(</font><font color="#800000">'Not enough memory for Overlay Buffer.'</font><font color="#000080">);
          -</font><font color="#800000">4</font><font color="#000080">: </font>writeln<font color="#000080">(</font><font color="#800000">'Overlay I/O error.'</font><font color="#000080">);
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
        </font>halt<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>OvrInitEMS<font color="#000080">;
    </font><font color="#FF0000"><b>case </b></font>OvrResult <font color="#FF0000"><b>of
      </b></font><font color="#800000">0</font><font color="#000080">: </font>writeln<font color="#000080">(</font><font color="#800000">'Overlay loaded to EMS memory!'</font><font color="#000080">);
     -</font><font color="#800000">5</font><font color="#000080">: </font>writeln<font color="#000080">(</font><font color="#800000">'No EMS driver found! Loading to conventional.'</font><font color="#000080">);
     -</font><font color="#800000">6</font><font color="#000080">: </font>writeln<font color="#000080">(</font><font color="#800000">'Not enough EMS memory!'</font><font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>process<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">.


</font>Basically<font color="#000080">, </font>the plan <font color="#FF0000"><b>for </b></font>this tutorial <font color="#FF0000"><b>is to </b></font>go through all standard data
types <font color="#FF0000"><b>and </b></font>show how TP stores them <font color="#FF0000"><b>in </b></font>memory<font color="#000080">, </font>so we will be able <font color="#FF0000"><b>to </b></font>interpret
a binary data <font color="#FF0000"><b>file </b></font>we may create<font color="#000080">.  </font><font color="#FF0000"><b>Then</b></font><font color="#000080">, </font>using the information we presented
<font color="#FF0000"><b>on </b></font>how things are stored<font color="#000080">, </font>we will get a spec sheet <font color="#FF0000"><b>on </b></font>a common format<font color="#000080">, </font><font color="#FF0000"><b>and
</b></font>interpret the data<font color="#000080">, </font>so we may be able <font color="#FF0000"><b>to </b></font>obtain data from that <font color="#FF0000"><b>file </b></font>through
a <font color="#FF0000"><b>Pascal program</b></font><font color="#000080">.

</font>Byte
<font color="#000080">====
</font>The basic idea <font color="#FF0000"><b>of </b></font>a byte has been covered <font color="#FF0000"><b>in </b></font>part <font color="#800000">7 </font><font color="#FF0000"><b>of </b></font>the tutorial<font color="#000080">.
</font>Please refer back <font color="#FF0000"><b>to </b></font>there <font color="#FF0000"><b>for </b></font>a refresher <font color="#FF0000"><b>on </b></font>the concept <font color="#FF0000"><b>of </b></font>what a byte <font color="#FF0000"><b>is</b></font><font color="#000080">.

</font>Basically<font color="#000080">, </font>a byte can be used <font color="#FF0000"><b>to </b></font>substitute <font color="#FF0000"><b>or </b></font>represent a char <font color="#FF0000"><b>type</b></font><font color="#000080">,
</font><font color="#FF0000"><b>or </b></font>a number <font color="#FF0000"><b>type</b></font><font color="#000080">....</font>The number types<font color="#000080">, </font>stored <font color="#FF0000"><b>as </b></font>a byte<font color="#000080">, </font>have a limit <font color="#FF0000"><b>of
</b></font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255 </font><font color="#FF0000"><b>as </b></font>an unsigned number <font color="#000080">(</font>byte<font color="#000080">), </font><font color="#FF0000"><b>and </b></font><font color="#000080">-</font><font color="#800000">128</font><font color="#000080">..</font><font color="#800000">127 </font><font color="#FF0000"><b>with </b></font>a signed number
<font color="#000080">(</font>shortint<font color="#000080">).  </font>The terms <font color="#FF0000"><b>in </b></font>the parentheses are what we would define the
byte <font color="#FF0000"><b>to </b></font>be <font color="#FF0000"><b>to </b></font>get the specified range<font color="#000080">.  </font>I will explain later <font color="#FF0000"><b>in </b></font>this
tutorial the difference between a <font color="#000080">&quot;</font>signed<font color="#000080">&quot; </font><font color="#FF0000"><b>and </b></font><font color="#000080">&quot;</font>unsigned<font color="#000080">&quot; </font>number<font color="#000080">, </font>actually
signed <font color="#FF0000"><b>and </b></font>unsigned data space <font color="#FF0000"><b>for </b></font>numbers<font color="#000080">.

</font>The number <font color="#FF0000"><b>for </b></font>an unsigned number <font color="#FF0000"><b>is </b></font>formed<font color="#000080">, </font>much like we were doing the
binary computations <font color="#FF0000"><b>in </b></font>part <font color="#800000">7.

</font>Numbers <font color="#FF0000"><b>as </b></font>Integers
<font color="#000080">===================
</font>There are several types <font color="#FF0000"><b>of </b></font>numbers we can define<font color="#000080">...

</font>Byte<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>ShortInt<font color="#000080">: </font><font color="#FF0000"><b>as </b></font>described above <font color="#FF0000"><b>in </b></font>the byte description<font color="#000080">...

</font>Integer types are either <font color="#FF0000"><b>as </b></font>signed <font color="#000080">(</font>range<font color="#000080">: -</font><font color="#800000">32768</font><font color="#000080">..</font><font color="#800000">32767</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font>unsigned
<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">65535</font><font color="#000080">) </font>words<font color="#000080">.  </font>A word <font color="#FF0000"><b>is </b></font>a <font color="#FF0000"><b>unit of </b></font><font color="#800000">2 </font>bytes <font color="#FF0000"><b>in </b></font>TP<font color="#000080">.  </font>Basically<font color="#000080">, </font><font color="#FF0000"><b>in
</b></font>a unsigned integer<font color="#000080">, </font>the number <font color="#FF0000"><b>is </b></font>calculated from right <font color="#FF0000"><b>to </b></font>left <font color="#FF0000"><b>in </b></font>binary
much like a byte<font color="#000080">.  </font>Since it <font color="#FF0000"><b>is </b></font>easier<font color="#000080">, </font><font color="#FF0000"><b>for </b></font>us <font color="#FF0000"><b>to </b></font>show binary storage
repsentation <font color="#FF0000"><b>as </b></font>hexadecimal units <font color="#FF0000"><b>of </b></font>bytes<font color="#000080">, </font>we will use hexadecimal values
<font color="#FF0000"><b>for </b></font>an example<font color="#000080">.

</font>An integer <font color="#FF0000"><b>type is </b></font>written <font color="#FF0000"><b>to </b></font>disk<font color="#000080">, </font><font color="#FF0000"><b>to </b></font>test something<font color="#000080">.  </font>The sequence <font color="#FF0000"><b>of
</b></font>two bytes <font color="#FF0000"><b>is</b></font><font color="#000080">:  </font><font color="#800000">3</font>F <font color="#800000">4</font>D  <font color="#000080">.  </font>What <font color="#FF0000"><b>is </b></font>the number <font color="#FF0000"><b>in </b></font>base <font color="#800000">10 </font>form<font color="#000080">?

</font><font color="#FF0000"><b>If </b></font>we remember from our hex notation<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>the way things work<font color="#000080">:

   </font><font color="#800000">3 </font><font color="#000080">* </font><font color="#800000">16</font><font color="#000080">^</font><font color="#800000">3 </font><font color="#000080">+ </font><font color="#800000">15 </font><font color="#000080">* </font><font color="#800000">16</font><font color="#000080">^</font><font color="#800000">2 </font><font color="#000080">+ </font><font color="#800000">4 </font><font color="#000080">* </font><font color="#800000">16</font><font color="#000080">^</font><font color="#800000">1 </font><font color="#000080">+ </font><font color="#800000">13 </font><font color="#000080">* </font><font color="#800000">16</font><font color="#000080">^</font><font color="#800000">0 </font><font color="#000080">= </font><font color="#800000">16205

</font>An integer <font color="#FF0000"><b>is </b></font>ALWAYS two bytes<font color="#000080">, </font>whether <font color="#FF0000"><b>or not </b></font>the number may technically
fill two bytes <font color="#FF0000"><b>in </b></font>this manner described before<font color="#000080">.  </font><font color="#FF0000"><b>For </b></font>example<font color="#000080">, </font><font color="#800000">13 </font><font color="#FF0000"><b>in </b></font>base
<font color="#800000">10 </font><font color="#FF0000"><b>is </b></font>stored <font color="#FF0000"><b>in </b></font>memory <font color="#FF0000"><b>and on </b></font>disk by TP <font color="#FF0000"><b>in </b></font>integer form <font color="#FF0000"><b>as </b></font><font color="#800000">00 0</font>D <font color="#000080">.  </font>We
could equally store this number <font color="#FF0000"><b>as </b></font>a byte <font color="#FF0000"><b>if </b></font>we knew that this variable
location would never be requested <font color="#FF0000"><b>to </b></font>hold a number that <font color="#FF0000"><b>is </b></font>greater than
<font color="#800000">255.  </font><font color="#FF0000"><b>For </b></font>example<font color="#000080">, </font><font color="#FF0000"><b>if </b></font>we knew we were going <font color="#FF0000"><b>to </b></font>hold days <font color="#FF0000"><b>of </b></font>the month
<font color="#FF0000"><b>in </b></font>memory<font color="#000080">, </font>we would never have a number greater than <font color="#800000">31</font><font color="#000080">, </font>so a byte <font color="#FF0000"><b>type
for </b></font>this number would be appropriate<font color="#000080">.

</font>A longint <font color="#FF0000"><b>type is </b></font>always a signed number<font color="#000080">, </font>but we <font color="#FF0000"><b>do </b></font>need <font color="#FF0000"><b>to </b></font>know<font color="#000080">, </font>that
it <font color="#FF0000"><b>is </b></font>what <font color="#FF0000"><b>is </b></font>called a double word<font color="#000080">, </font><font color="#FF0000"><b>or </b></font>two words put together<font color="#000080">.  </font>Therefore<font color="#000080">,
</font>we know that a longint <font color="#FF0000"><b>type is </b></font><font color="#800000">4 </font>bytes<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>has a maximum limit <font color="#FF0000"><b>of </b></font><font color="#800000">2</font>bil<font color="#000080">.
</font>A longint <font color="#FF0000"><b>is </b></font>ALWAYS <font color="#800000">4 </font>bytes<font color="#000080">, </font>whether <font color="#FF0000"><b>or not </b></font>the number may fill <font color="#800000">4 </font>bytes<font color="#000080">.
</font><font color="#800000">13 </font><font color="#FF0000"><b>in </b></font>base <font color="#800000">10 </font>would be stored <font color="#FF0000"><b>in </b></font>a longint <font color="#FF0000"><b>as </b></font><font color="#800000">00 00 00 0</font>D <font color="#000080">.

</font>Char
<font color="#000080">====
</font>A character <font color="#FF0000"><b>is </b></font>stored <font color="#FF0000"><b>in </b></font>memory <font color="#FF0000"><b>as </b></font>a byte<font color="#000080">, </font><font color="#FF0000"><b>with </b></font>the byte value
representing the corresponding character <font color="#FF0000"><b>as </b></font>it refers <font color="#FF0000"><b>to </b></font>the
ASCII chart<font color="#000080">.

</font>byte representation <font color="#800000">67 </font><font color="#FF0000"><b>as </b></font>a char <font color="#FF0000"><b>is </b></font>C<font color="#000080">.

</font>Signed vs<font color="#000080">. </font>Unsigned Integer Numbers
<font color="#000080">===================================
</font>We have talked before <font color="#FF0000"><b>in </b></font>this part about signed <font color="#FF0000"><b>and </b></font>unsigned numbers<font color="#000080">.  </font><font color="#FF0000"><b>In
</b></font>part <font color="#800000">7</font><font color="#000080">, </font>essentially<font color="#000080">, </font>we have covered unsigned numbers<font color="#000080">, </font>when we were
describing binary logic<font color="#000080">.  </font>Let<font color="#800000">'s describe what a signed number is.

</font>A signed number <font color="#FF0000"><b>is </b></font>represented by either using a base system <font color="#FF0000"><b>of </b></font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">1</font><font color="#000080">, </font><font color="#FF0000"><b>or
</b></font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">0 </font><font color="#FF0000"><b>in </b></font>binary<font color="#000080">.  </font><font color="#FF0000"><b>In </b></font>a signed number<font color="#000080">, </font>the leftmost bit <font color="#FF0000"><b>is </b></font>either <font color="#800000">0 </font><font color="#FF0000"><b>for </b></font>a
positive number<font color="#000080">, </font><font color="#FF0000"><b>and </b></font><font color="#800000">1 </font><font color="#FF0000"><b>for </b></font>a negative number<font color="#000080">.  </font><font color="#FF0000"><b>For </b></font>positive numbers<font color="#000080">, </font>the
remaining bits are considered using a <font color="#800000">0</font><font color="#000080">..</font><font color="#800000">1 </font>scheme <font color="#FF0000"><b>as </b></font>we did <font color="#FF0000"><b>in </b></font>part <font color="#800000">7
</font><font color="#FF0000"><b>with </b></font>the binary computations<font color="#000080">.  </font><font color="#FF0000"><b>For </b></font>a negative number<font color="#000080">, </font>we count starting
from <font color="#800000">1 </font><font color="#FF0000"><b>and </b></font>go down <font color="#FF0000"><b>to </b></font><font color="#800000">0.

</font>Let<font color="#800000">'s observe what that difference is, by demonstrating how 3 and -3 would
</font>be shown <font color="#FF0000"><b>in </b></font>a shortint <font color="#000080">(</font>signed<font color="#000080">) </font><font color="#FF0000"><b>type in </b></font>binary<font color="#000080">.

</font>Let<font color="#800000">'s start with 3 in binary as a signed number. That is a positive number
</font>so the leftmost bit will be <font color="#800000">0.  </font><font color="#FF0000"><b>Then </b></font>we will use a <font color="#800000">0</font><font color="#000080">..</font><font color="#800000">1 </font>counting system
<font color="#FF0000"><b>to </b></font>finish <font color="#FF0000"><b>out </b></font>the number using standard binary notation<font color="#000080">.  </font>So<font color="#000080">, </font><font color="#800000">3 </font>will be
represented <font color="#FF0000"><b>in </b></font>a shortint value <font color="#FF0000"><b>as</b></font><font color="#000080">:

                             </font><font color="#800000">0000     0010 

</font>just like it was an unsigned number<font color="#000080">.  </font>Now<font color="#000080">, </font>lets observe what <font color="#000080">-</font><font color="#800000">3 </font>would look
like<font color="#000080">.  </font>That <font color="#FF0000"><b>is </b></font>a negative number<font color="#000080">, </font>so the leftmost bit would be a <font color="#800000">1.  </font>Since
we use a <font color="#800000">1</font><font color="#000080">..</font><font color="#800000">0 </font>system<font color="#000080">, </font>we would start <font color="#FF0000"><b>with </b></font><font color="#800000">1's in everything.  We know 3 is
10 </font><font color="#FF0000"><b>in </b></font>binary<font color="#000080">, </font>so we use a reverse system <font color="#FF0000"><b>and </b></font>come up <font color="#FF0000"><b>with</b></font><font color="#000080">:

                             </font><font color="#800000">1111     1101

</font><font color="#FF0000"><b>To </b></font>illustrate further<font color="#000080">, </font><font color="#FF0000"><b>in </b></font>binary counting <font color="#000080">(</font><font color="#FF0000"><b>to </b></font>a computer<font color="#000080">) -</font><font color="#800000">1</font><font color="#000080">..-</font><font color="#800000">5 </font>would be
<font color="#000080">(</font>represented <font color="#FF0000"><b>in </b></font>hex<font color="#000080">) </font><font color="#FF0000"><b>as </b></font><font color="#800000">$FF</font><font color="#000080">,</font><font color="#800000">$FE</font><font color="#000080">,</font><font color="#800000">$FD</font><font color="#000080">,</font><font color="#800000">$FC</font><font color="#000080">,</font><font color="#800000">$FB</font><font color="#000080">; </font><font color="#FF0000"><b>as </b></font>opposed <font color="#FF0000"><b>to </b></font><font color="#800000">$01</font><font color="#000080">,</font><font color="#800000">$02</font><font color="#000080">,</font><font color="#800000">$03</font><font color="#000080">,
</font><font color="#800000">$04</font><font color="#000080">,</font><font color="#800000">$05 </font><font color="#FF0000"><b>for </b></font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">5 </font><font color="#000080">.  </font><font color="#FF0000"><b>In </b></font>a signed system<font color="#000080">, </font>negative number counting starts at
<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">, </font>which explains why the equal range <font color="#FF0000"><b>of </b></font>a shortint <font color="#FF0000"><b>is </b></font><font color="#000080">-</font><font color="#800000">128</font><font color="#000080">..</font><font color="#800000">127</font><font color="#000080">, </font><font color="#FF0000"><b>and
</b></font>there are equally <font color="#800000">128 </font>items <font color="#000080">(</font>positive <font color="#FF0000"><b>and </b></font>negative<font color="#000080">).

</font><font color="#FF0000"><b>As </b></font>practice<font color="#000080">, </font>look at the integers<font color="#000080">.</font>dat now<font color="#000080">, </font><font color="#FF0000"><b>in </b></font>a hex viewer<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>see exactly
how the numbers are stored<font color="#000080">.  </font>They are two bytes <font color="#FF0000"><b>in </b></font>length<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>should count
from one <font color="#FF0000"><b>to </b></font>ten<font color="#000080">, </font><font color="#FF0000"><b>as </b></font>we did <font color="#FF0000"><b>in </b></font>the <font color="#FF0000"><b>program</b></font><font color="#000080">.  </font>It should look like this <font color="#FF0000"><b>in
</b></font>your hex viewer<font color="#000080">....

</font><font color="#800000">00 01 00 02 00 03 00 04 00 05 00 06 00 07 00 08 00 09 00 0</font>A

I recommend very heavily that you get a hex viewer <font color="#FF0000"><b>to </b></font>be able <font color="#FF0000"><b>to </b></font>help <font color="#FF0000"><b>out</b></font><font color="#000080">.

</font>Boolean
<font color="#000080">=======
</font><font color="#800000">0 </font><font color="#000080">= </font>False<font color="#000080">; </font><font color="#800000">1 </font><font color="#000080">= </font>True

Common <font color="#FF0000"><b>Pascal </b></font>Strings
<font color="#000080">=====================
</font>Now we will start <font color="#FF0000"><b>to </b></font>discuss the format <font color="#FF0000"><b>of </b></font>grouped data<font color="#000080">.  </font>The first format
we will discuss will be the common <font color="#FF0000"><b>pascal string</b></font><font color="#000080">.  </font>The format <font color="#FF0000"><b>of </b></font>a <font color="#FF0000"><b>pascal
string </b></font>formatted group <font color="#FF0000"><b>of </b></font>characters <font color="#FF0000"><b>is </b></font>the following<font color="#000080">.

</font>When we define a <font color="#FF0000"><b>string </b></font>without a subscript<font color="#000080">, </font>we are defining a maximum <font color="#FF0000"><b>of
</b></font><font color="#800000">255 </font>characters<font color="#000080">. </font>When we define <font color="#FF0000"><b>for </b></font>example<font color="#000080">, </font>a <font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">20</font><font color="#000080">], </font>we are defining
a max <font color="#FF0000"><b>of </b></font><font color="#800000">20 </font>characters<font color="#000080">.  </font><font color="#FF0000"><b>In </b></font>reality<font color="#000080">, </font>we are defining the number <font color="#FF0000"><b>of </b></font>char<font color="#000080">-
</font>acters <font color="#000080">+ </font><font color="#800000">1.  </font>A <font color="#FF0000"><b>string </b></font>has a first byte <font color="#000080">(</font><font color="#800000">0</font>th byte<font color="#000080">) </font>that represents the
actual character length <font color="#FF0000"><b>of </b></font>the data stored <font color="#FF0000"><b>in </b></font>the <font color="#FF0000"><b>string</b></font><font color="#000080">, </font><font color="#FF0000"><b>as </b></font>an unsigned
byte<font color="#000080">. (</font>Actually<font color="#000080">, </font>the length <font color="#FF0000"><b>function </b></font>reads this byte when you call it<font color="#000080">,
</font>but it<font color="#800000">'s also possible to read and refer to the byte, and even SET it.)

</font>Refer back <font color="#FF0000"><b>to </b></font>part <font color="#800000">8 </font>where I said you could individually <font color="#FF0000"><b>set </b></font>each part
<font color="#FF0000"><b>of </b></font>the <font color="#FF0000"><b>string</b></font><font color="#000080">.  </font>It<font color="#800000">'s possible to actually build a string by setting the
</font>length byte<font color="#000080">, </font><font color="#FF0000"><b>then </b></font>setting the rest <font color="#FF0000"><b>of </b></font>the <font color="#FF0000"><b>string as </b></font>characters<font color="#000080">.  </font>Say<font color="#000080">,
</font><font color="#FF0000"><b>to set </b></font>the <font color="#FF0000"><b>dynamic </b></font>length <font color="#FF0000"><b>of </b></font>a <font color="#FF0000"><b>string to </b></font><font color="#800000">4</font><font color="#000080">, </font>we can <font color="#FF0000"><b>do </b></font>this<font color="#000080">, </font><font color="#FF0000"><b>as in </b></font>this
example<font color="#000080">, </font>which will only write <font color="#000080">&quot;</font>Hello<font color="#000080">&quot; </font>instead <font color="#FF0000"><b>of </b></font><font color="#000080">&quot;</font>Hello world<font color="#000080">!&quot;.  </font>We
are setting the <font color="#800000">0'th part of the string as a character, which we need
</font><font color="#FF0000"><b>to do</b></font><font color="#000080">:

</font><font color="#FF0000"><b>program </b></font>test<font color="#000080">; 
  </font><font color="#FF0000"><b>var
    </b></font>p<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>p <font color="#000080">:= </font><font color="#800000">'Hello world!'</font><font color="#000080">;
    </font>p<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">] := </font><font color="#800000">#5</font><font color="#000080">;
    </font>writeln<font color="#000080">(</font>p<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>Blocked Character Strings
<font color="#000080">=========================
</font>It<font color="#800000">'s also possible to work with an array of characters as a string, by
</font>referring <font color="#FF0000"><b>to </b></font>the whole <font color="#FF0000"><b>array</b></font><font color="#000080">.  </font>The maximum length must be <font color="#FF0000"><b>set </b></font>by the
length <font color="#FF0000"><b>of </b></font>the <font color="#FF0000"><b>array</b></font><font color="#000080">, </font>essentially<font color="#000080">.

</font>str<font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">20</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>char<font color="#000080">;

</font><font color="#FF0000"><b>if </b></font>we read this structure <font color="#FF0000"><b>in as </b></font>a whole<font color="#000080">, </font>it will have <font color="#800000">20 </font>characters <font color="#FF0000"><b>in </b></font>it<font color="#000080">,
</font><font color="#FF0000"><b>in </b></font>which we can write back <font color="#FF0000"><b>out to </b></font>the screen by saying WRITE<font color="#000080">(</font>STR<font color="#000080">);, </font><font color="#FF0000"><b>or
</b></font>actually convert <font color="#FF0000"><b>to </b></font>a <font color="#FF0000"><b>string </b></font>by counting through <font color="#FF0000"><b>to </b></font>find the actual length
<font color="#FF0000"><b>and then </b></font>setting the length byte<font color="#000080">.

</font>Null Terminated Strings
<font color="#000080">=======================
</font>This <font color="#FF0000"><b>is </b></font>a length <font color="#FF0000"><b>of </b></font>characters<font color="#000080">, </font>which are terminated by a null character<font color="#000080">,
</font><font color="#FF0000"><b>or </b></font><font color="#800000">#0</font><font color="#000080">.  </font>The strings <font color="#FF0000"><b>unit is </b></font>documented <font color="#FF0000"><b>to </b></font>work <font color="#FF0000"><b>with </b></font>these strings<font color="#000080">, </font>but it<font color="#800000">'s
</font>easier <font color="#FF0000"><b>to </b></font>get away <font color="#FF0000"><b>with </b></font>simply converting it into something we can work
<font color="#FF0000"><b>with </b></font>through <font color="#FF0000"><b>Pascal </b></font>itself<font color="#000080">, </font><font color="#FF0000"><b>if </b></font>we have <font color="#FF0000"><b>to do </b></font>much <font color="#FF0000"><b>with </b></font>it<font color="#000080">.

</font>Arrays
<font color="#000080">======
</font>The general structure <font color="#FF0000"><b>of </b></font>an <font color="#FF0000"><b>array </b></font>was described <font color="#FF0000"><b>in </b></font>part <font color="#800000">6.  </font>It <font color="#FF0000"><b>is </b></font>basically
usable <font color="#FF0000"><b>as </b></font>a grouping <font color="#FF0000"><b>of </b></font>items<font color="#000080">.

</font>Records
<font color="#000080">=======
</font>A <font color="#FF0000"><b>record is </b></font>stored <font color="#FF0000"><b>in </b></font>memory basically <font color="#FF0000"><b>as </b></font>a grouping <font color="#FF0000"><b>of </b></font>data types<font color="#000080">.  </font>The
<font color="#FF0000"><b>record type </b></font>below<font color="#000080">:

  </font>datarecord <font color="#000080">= </font><font color="#FF0000"><b>record
    </b></font>int<font color="#000080">: </font>integer<font color="#000080">;
    </font>character<font color="#000080">: </font>char<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font>would be stored <font color="#FF0000"><b>in </b></font>memory like this<font color="#000080">:

 </font>INT CHARACTER


Now<font color="#000080">, </font>we have described all <font color="#FF0000"><b>of </b></font>the pertinent items we need <font color="#FF0000"><b>to </b></font>know <font color="#FF0000"><b>to </b></font>be
able <font color="#FF0000"><b>to </b></font>work through a spec sheet <font color="#FF0000"><b>on </b></font>a common format<font color="#000080">.  </font>Basically<font color="#000080">, </font>data
<font color="#FF0000"><b>for </b></font>spec sheets are sometimes presented <font color="#FF0000"><b>as </b></font>the <font color="#FF0000"><b>record </b></font>format<font color="#000080">, </font><font color="#FF0000"><b>in </b></font>either
<font color="#FF0000"><b>Pascal or </b></font>C format<font color="#000080">.  </font>We don<font color="#800000">'t need to really do any work for that, but
</font>most <font color="#FF0000"><b>of </b></font>the time<font color="#000080">, </font>it will be presented <font color="#FF0000"><b>in </b></font>a byte by byte offset format<font color="#000080">.

</font>Let us look at this structure <font color="#FF0000"><b>file for </b></font>an example<font color="#000080">.  </font>It <font color="#FF0000"><b>is of </b></font>the standard
sound <font color="#FF0000"><b>file </b></font>called a <font color="#FF0000"><b>MOD file</b></font><font color="#000080">. (</font>you can find them anywhere<font color="#000080">, </font>almost<font color="#000080">)  </font>We
will cover just the header <font color="#FF0000"><b>of </b></font>the <font color="#FF0000"><b>file for </b></font>now<font color="#000080">...
-------------------------------------------------------------------------

</font>Protracker <font color="#800000">1.1</font>B Song<font color="#000080">/</font>Module Format<font color="#000080">:
 
</font>Offset  Bytes  Description
   <font color="#800000">0     20    </font>Songname<font color="#000080">. </font>Remember <font color="#FF0000"><b>to </b></font>put trailing null bytes at the <font color="#FF0000"><b>end</b></font><font color="#000080">...
 
</font>Information <font color="#FF0000"><b>for </b></font>sample <font color="#800000">1</font><font color="#000080">-</font><font color="#800000">31</font><font color="#000080">:
 
</font>Offset  Bytes  Description
  <font color="#800000">20     22    </font>Samplename <font color="#FF0000"><b>for </b></font>sample <font color="#800000">1. </font>Pad <font color="#FF0000"><b>with </b></font>null bytes<font color="#000080">.
  </font><font color="#800000">42      2    </font>Samplelength <font color="#FF0000"><b>for </b></font>sample <font color="#800000">1. </font>Stored <font color="#FF0000"><b>as </b></font>number <font color="#FF0000"><b>of </b></font>words<font color="#000080">.
               </font>Multiply by two <font color="#FF0000"><b>to </b></font>get real sample length <font color="#FF0000"><b>in </b></font>bytes<font color="#000080">.
  </font><font color="#800000">44      1    </font>Lower four bits are the finetune value<font color="#000080">, </font>stored <font color="#FF0000"><b>as </b></font>a signed
               four bit number<font color="#000080">. </font>The upper four bits are <font color="#FF0000"><b>not </b></font>used<font color="#000080">, </font><font color="#FF0000"><b>and
               </b></font>should be <font color="#FF0000"><b>set to </b></font>zero<font color="#000080">.
               </font>Value<font color="#000080">:  </font>Finetune<font color="#000080">:
                 </font><font color="#800000">0        0
                 1       </font><font color="#000080">+</font><font color="#800000">1
                 2       </font><font color="#000080">+</font><font color="#800000">2
                 3       </font><font color="#000080">+</font><font color="#800000">3
                 4       </font><font color="#000080">+</font><font color="#800000">4
                 5       </font><font color="#000080">+</font><font color="#800000">5
                 6       </font><font color="#000080">+</font><font color="#800000">6
                 7       </font><font color="#000080">+</font><font color="#800000">7
                 8       </font><font color="#000080">-</font><font color="#800000">8
                 9       </font><font color="#000080">-</font><font color="#800000">7
                 </font>A       <font color="#000080">-</font><font color="#800000">6
                 </font>B       <font color="#000080">-</font><font color="#800000">5
                 </font>C       <font color="#000080">-</font><font color="#800000">4
                 </font>D       <font color="#000080">-</font><font color="#800000">3
                 </font>E       <font color="#000080">-</font><font color="#800000">2
                 </font>F       <font color="#000080">-</font><font color="#800000">1
 
  45      1    </font>Volume <font color="#FF0000"><b>for </b></font>sample <font color="#800000">1. </font>Range <font color="#FF0000"><b>is </b></font><font color="#800000">$00</font><font color="#000080">-</font><font color="#800000">$40</font><font color="#000080">, </font><font color="#FF0000"><b>or </b></font><font color="#800000">0</font><font color="#000080">-</font><font color="#800000">64 </font>decimal<font color="#000080">.
  </font><font color="#800000">46      2    </font><font color="#FF0000"><b>Repeat </b></font>point <font color="#FF0000"><b>for </b></font>sample <font color="#800000">1. </font>Stored <font color="#FF0000"><b>as </b></font>number <font color="#FF0000"><b>of </b></font>words offset
               from start <font color="#FF0000"><b>of </b></font>sample<font color="#000080">. </font>Multiply by two <font color="#FF0000"><b>to </b></font>get offset <font color="#FF0000"><b>in </b></font>bytes<font color="#000080">.
  </font><font color="#800000">48      2    </font><font color="#FF0000"><b>Repeat </b></font>Length <font color="#FF0000"><b>for </b></font>sample <font color="#800000">1. </font>Stored <font color="#FF0000"><b>as </b></font>number <font color="#FF0000"><b>of </b></font>words <font color="#FF0000"><b>in
               </b></font>loop<font color="#000080">. </font>Multiply by two <font color="#FF0000"><b>to </b></font>get replen <font color="#FF0000"><b>in </b></font>bytes<font color="#000080">.
 
</font>Information <font color="#FF0000"><b>for </b></font>the next <font color="#800000">30 </font>samples starts here<font color="#000080">. </font>It<font color="#800000">'s just like the info for
</font>sample <font color="#800000">1.
 
</font>Offset  Bytes  Description
  <font color="#800000">50     30    </font>Sample <font color="#800000">2</font><font color="#000080">...
  </font><font color="#800000">80     30    </font>Sample <font color="#800000">3</font><font color="#000080">...
   .
   .
   .
 </font><font color="#800000">890     30    </font>Sample <font color="#800000">30</font><font color="#000080">...
 </font><font color="#800000">920     30    </font>Sample <font color="#800000">31</font><font color="#000080">...
 
</font>Offset  Bytes  Description
 <font color="#800000">950      1    </font>Songlength<font color="#000080">. </font>Range <font color="#FF0000"><b>is </b></font><font color="#800000">1</font><font color="#000080">-</font><font color="#800000">128.
 951      1    </font>Well<font color="#000080">... </font>this little byte here <font color="#FF0000"><b>is set to </b></font><font color="#800000">127</font><font color="#000080">, </font>so that old
               trackers will search through all patterns when loading<font color="#000080">.
               </font>Noisetracker <font color="#FF0000"><b>uses </b></font>this byte <font color="#FF0000"><b>for </b></font>restart<font color="#000080">, </font>but we don<font color="#800000">'t.
 952    128    </font>Song positions <font color="#800000">0</font><font color="#000080">-</font><font color="#800000">127. </font>Each hold a number from <font color="#800000">0</font><font color="#000080">-</font><font color="#800000">63 </font>that
               tells the tracker what pattern <font color="#FF0000"><b>to </b></font>play at that position<font color="#000080">.
</font><font color="#800000">1080      4    </font>The four letters <font color="#000080">&quot;</font>M<font color="#000080">.</font>K<font color="#000080">.&quot; - </font>This <font color="#FF0000"><b>is </b></font>something Mahoney <font color="#000080">&amp; </font>Kaktus
               inserted when they increased the number <font color="#FF0000"><b>of </b></font>samples from
               <font color="#800000">15 </font><font color="#FF0000"><b>to </b></font><font color="#800000">31. </font><font color="#FF0000"><b>If </b></font>it<font color="#800000">'s not there, the module/song uses 15 samples
               </font><font color="#FF0000"><b>or </b></font>the text has been removed <font color="#FF0000"><b>to </b></font>make the module harder <font color="#FF0000"><b>to
               </b></font>rip<font color="#000080">. </font>Startrekker puts <font color="#000080">&quot;</font>FLT4<font color="#000080">&quot; </font><font color="#FF0000"><b>or </b></font><font color="#000080">&quot;</font>FLT8<font color="#000080">&quot; </font>there instead<font color="#000080">.
 
</font>Source<font color="#000080">: </font>Lars <font color="#000080">&quot;</font>ZAP<font color="#000080">&quot; </font>Hamre<font color="#000080">/</font>Amiga Freelancers

<font color="#000080">--------------------------------------------------------------------------

</font>Building the basic <font color="#FF0000"><b>record </b></font>format
<font color="#000080">================================
</font>We will need <font color="#FF0000"><b>to </b></font>essentially<font color="#000080">, </font><font color="#FF0000"><b>for </b></font>any standard <font color="#FF0000"><b>file</b></font><font color="#000080">, </font>built <font color="#FF0000"><b>record </b></font>format<font color="#000080">(</font>s<font color="#000080">)
</font><font color="#FF0000"><b>for </b></font>the <font color="#FF0000"><b>file</b></font><font color="#000080">.  </font>Let us start <font color="#FF0000"><b>with </b></font>this one<font color="#000080">.

</font>It says above that the first <font color="#800000">20 </font>bytes would be a song title<font color="#000080">.  </font>The description
best seems <font color="#FF0000"><b>to </b></font>define it <font color="#FF0000"><b>as </b></font>a null<font color="#000080">-</font>terminated <font color="#FF0000"><b>string</b></font><font color="#000080">, </font>but we know the maximum
limit<font color="#000080">.  </font>So<font color="#000080">, </font>lets just call it a blocked character <font color="#FF0000"><b>string of </b></font>length <font color="#800000">20.  </font>So
we will use this description <font color="#FF0000"><b>for </b></font>part <font color="#FF0000"><b>of </b></font>our component <font color="#FF0000"><b>record</b></font><font color="#000080">:

</font>songname<font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">20</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>char<font color="#000080">;

</font><font color="#FF0000"><b>If </b></font>we read <font color="#FF0000"><b>on </b></font>through the <font color="#FF0000"><b>file</b></font><font color="#000080">, </font>it states data <font color="#FF0000"><b>for </b></font>samples <font color="#800000">1</font><font color="#000080">-</font><font color="#800000">31.  </font>They are
varied data<font color="#000080">, </font>so that infers that we need <font color="#FF0000"><b>to </b></font>build another <font color="#FF0000"><b>record </b></font>format<font color="#000080">.
</font>But <font color="#FF0000"><b>for </b></font>the position so <font color="#FF0000"><b>far in </b></font>our current <font color="#FF0000"><b>record </b></font>format<font color="#000080">, </font>we will use
this<font color="#000080">, </font>since we know that there are a group <font color="#FF0000"><b>of </b></font><font color="#800000">31 </font>samples<font color="#000080">...</font>we will call
our alternate <font color="#FF0000"><b>record for </b></font>the sample data<font color="#000080">, </font>samplerec<font color="#000080">.

</font>sampledata<font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">31</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>samplerec<font color="#000080">;

</font>Alternate Sample <font color="#FF0000"><b>Record
</b></font><font color="#000080">=======================
</font><font color="#800000">22 </font>bytes are defined <font color="#FF0000"><b>for </b></font>a samplename<font color="#000080">.  </font>Same logic <font color="#FF0000"><b>for </b></font>songname<font color="#000080">.  </font>So this
<font color="#FF0000"><b>unit of </b></font>our sample <font color="#FF0000"><b>record </b></font>will be

samplename<font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">22</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>char<font color="#000080">;

</font>The next part <font color="#FF0000"><b>is </b></font>a sample length defined by <font color="#800000">2 </font>bytes<font color="#000080">.  </font>So<font color="#000080">, </font>we could either
call this a word<font color="#000080">, </font><font color="#FF0000"><b>or </b></font>an integer<font color="#000080">:

</font>samplelength<font color="#000080">: </font>integer<font color="#000080">;

</font>One byte <font color="#FF0000"><b>for </b></font>a finetune value<font color="#000080">.  </font>Logical definition<font color="#000080">:

</font>finetune<font color="#000080">: </font>byte<font color="#000080">;

</font>Volume <font color="#FF0000"><b>is </b></font>defined <font color="#FF0000"><b>as </b></font>one byte<font color="#000080">.  </font>So<font color="#000080">...

</font>volume<font color="#000080">: </font>byte<font color="#000080">;

</font><font color="#FF0000"><b>Repeat </b></font>point <font color="#FF0000"><b>and Repeat </b></font>length are both defined <font color="#FF0000"><b>as </b></font>words above so<font color="#000080">...

</font>repeatpoint<font color="#000080">: </font>integer<font color="#000080">;
</font>repeatlength<font color="#000080">: </font>integer<font color="#000080">;

</font>It <font color="#FF0000"><b>is </b></font>indicated above that we are done <font color="#FF0000"><b>with </b></font>the samples<font color="#000080">.  </font>Therefore<font color="#000080">, </font>our
final <font color="#FF0000"><b>record </b></font>format <font color="#FF0000"><b>for </b></font>the samples would be<font color="#000080">:

</font>samplerec <font color="#000080">= </font><font color="#FF0000"><b>record
  </b></font>samplename<font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">22</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>char<font color="#000080">;
  </font>samplelength<font color="#000080">: </font>integer<font color="#000080">;
  </font>finetune<font color="#000080">: </font>byte<font color="#000080">;
  </font>volume<font color="#000080">: </font>byte<font color="#000080">;
  </font>repeatpoint<font color="#000080">: </font>integer<font color="#000080">;
  </font>repeatlength<font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font>Finishing the <font color="#FF0000"><b>Record </b></font>Format
<font color="#000080">===========================
</font>Continuing <font color="#FF0000"><b>on</b></font><font color="#000080">...

</font>songlength <font color="#FF0000"><b>is </b></font>a byte<font color="#000080">.  </font>So

songlength<font color="#000080">: </font>byte<font color="#000080">;

</font>A byte <font color="#FF0000"><b>is </b></font>defined next that seems like a filler byte<font color="#000080">.  </font>So<font color="#000080">...

</font>filler<font color="#000080">: </font>byte<font color="#000080">;

</font>The next <font color="#FF0000"><b>set of </b></font><font color="#800000">128 </font>bytes are defined <font color="#FF0000"><b>as </b></font><font color="#000080">&quot;</font>song positions <font color="#800000">0</font><font color="#000080">-</font><font color="#800000">127</font><font color="#000080">&quot;.  </font>Each byte
<font color="#FF0000"><b>is </b></font>also defined <font color="#FF0000"><b>to </b></font>hold a number<font color="#000080">, </font>so lets keep <font color="#FF0000"><b>to </b></font>that<font color="#000080">:

</font>positions<font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">127</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;

</font>The next <font color="#800000">4 </font>bytes <font color="#FF0000"><b>to </b></font>finish <font color="#FF0000"><b>out </b></font>our headers <font color="#FF0000"><b>is </b></font>the moduleid<font color="#000080">.  </font>it<font color="#800000">'s 4 bytes,
</font>text<font color="#000080">, </font>so<font color="#000080">...

</font>id<font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">4</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>char<font color="#000080">;

</font>Having gone through the header format <font color="#FF0000"><b>for </b></font>this <font color="#FF0000"><b>file</b></font><font color="#000080">, </font>we have come up <font color="#FF0000"><b>with
</b></font>a <font color="#FF0000"><b>record </b></font>we can use <font color="#FF0000"><b>to </b></font>read all the header data<font color="#000080">, </font>that we would need <font color="#FF0000"><b>to </b></font>read
<font color="#FF0000"><b>for </b></font>a <font color="#FF0000"><b>mod file</b></font><font color="#000080">.  </font>Therefore<font color="#000080">, </font>we can use a final <font color="#FF0000"><b>type </b></font>listing <font color="#FF0000"><b>in </b></font>our <font color="#FF0000"><b>program
to </b></font>read a <font color="#FF0000"><b>mod file </b></font>header <font color="#FF0000"><b>of</b></font><font color="#000080">:

</font>samplerec <font color="#000080">= </font><font color="#FF0000"><b>record
  </b></font>samplename<font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">22</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>char<font color="#000080">;
  </font>samplelength<font color="#000080">: </font>integer<font color="#000080">;
  </font>finetune<font color="#000080">: </font>byte<font color="#000080">;
  </font>volume<font color="#000080">: </font>byte<font color="#000080">;
  </font>repeatpoint<font color="#000080">: </font>integer<font color="#000080">;
  </font>repeatlength<font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font>modrecord <font color="#000080">= </font><font color="#FF0000"><b>record
  </b></font>songname<font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">20</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>char<font color="#000080">;
  </font>sampledata<font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">31</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>samplerec<font color="#000080">;
  </font>songlength<font color="#000080">: </font>byte<font color="#000080">;
  </font>filler<font color="#000080">: </font>byte<font color="#000080">;
  </font>positions<font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">127</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
  </font>id<font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">4</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>char<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font>We can use this format <font color="#FF0000"><b>to </b></font>gain any information we know about a <font color="#FF0000"><b>file</b></font><font color="#000080">.  </font><font color="#FF0000"><b>To
</b></font>test this format<font color="#000080">, </font>we need <font color="#FF0000"><b>to </b></font>write a <font color="#FF0000"><b>program </b></font>that pulls the information
<font color="#FF0000"><b>out of </b></font>a standard <font color="#FF0000"><b>file</b></font><font color="#000080">, </font>that we know<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>check <font color="#FF0000"><b>to </b></font>see <font color="#FF0000"><b>if </b></font>they<font color="#800000">'re identical.
</font><font color="#FF0000"><b>For </b></font>MODs<font color="#000080">, </font>we would need <font color="#FF0000"><b>to </b></font>get a player<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>load up the player<font color="#000080">, </font><font color="#FF0000"><b>in </b></font>order
<font color="#FF0000"><b>to </b></font>get data we are familiar <font color="#FF0000"><b>with </b></font>from the spec sheet<font color="#000080">, </font>such <font color="#FF0000"><b>as </b></font>the id being
<font color="#000080">&quot;</font>M<font color="#000080">.</font>K<font color="#000080">.&quot;.

</font>All the data we need <font color="#FF0000"><b>to </b></font>know <font color="#FF0000"><b>to </b></font>extract data <font color="#FF0000"><b>out</b></font><font color="#000080">, </font><font color="#FF0000"><b>and </b></font>get formatted data
from standards files<font color="#000080">, </font>have been presented<font color="#000080">.

</font>Practice Programming Problem <font color="#800000">#11
</font><font color="#000080">================================
</font><font color="#FF0000"><b>In </b></font>keeping <font color="#FF0000"><b>with </b></font>the topic <font color="#FF0000"><b>of </b></font>this tutorial<font color="#000080">, </font>I am asking you <font color="#FF0000"><b>to </b></font>write a
<font color="#FF0000"><b>program </b></font>entirely <font color="#FF0000"><b>in Pascal </b></font>that will take a ZIP <font color="#FF0000"><b>file </b></font>name from the command<font color="#000080">-
</font>line <font color="#FF0000"><b>and then </b></font>print a list <font color="#FF0000"><b>of </b></font>all the files within that zip <font color="#FF0000"><b>file</b></font><font color="#000080">.  </font><font color="#FF0000"><b>With
</b></font>each filename<font color="#000080">, </font>list the compressed size<font color="#000080">, </font>uncompressed size<font color="#000080">, </font>date<font color="#000080">, </font>time<font color="#000080">,
</font><font color="#FF0000"><b>and </b></font>compression method<font color="#000080">, </font>one per <font color="#FF0000"><b>file</b></font><font color="#000080">.  </font>At the <font color="#FF0000"><b>end</b></font><font color="#000080">, </font>list the total number
<font color="#FF0000"><b>of </b></font>files<font color="#000080">, </font>total compressed <font color="#FF0000"><b>and </b></font>uncompressed size<font color="#000080">, </font>effective compression
ratio<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>write the comment<font color="#000080">. </font><font color="#FF0000"><b>Then </b></font>output this list <font color="#FF0000"><b>to </b></font>a <font color="#FF0000"><b>file </b></font>taken <font color="#FF0000"><b>on
</b></font>the command<font color="#000080">-</font>line<font color="#000080">.  </font><font color="#FF0000"><b>For </b></font>example<font color="#000080">, </font>a command<font color="#000080">-</font>line will always be<font color="#000080">:

</font>ZIPLIST FILENAME<font color="#000080">.</font>ZIP OUTPUT<font color="#000080">.</font>TXT

Be sure <font color="#FF0000"><b>to </b></font>design this <font color="#FF0000"><b>program with </b></font>any error checks you may need <font color="#FF0000"><b>to </b></font>perform<font color="#000080">.
</font>Don<font color="#800000">'t forget to devise a check to be sure you are dealing with a ZIP file
</font><font color="#FF0000"><b>on </b></font>the first parameter<font color="#000080">.  </font>Here<font color="#000080">, </font>we have gone <font color="#FF0000"><b>to </b></font>look at some references<font color="#000080">,
</font><font color="#FF0000"><b>and </b></font>have found the following <font color="#FF0000"><b>out of </b></font>a specs list<font color="#000080">:

--------</font>A<font color="#000080">-</font>ZIP<font color="#000080">-------------------------------
</font>The ZIP archives are created by the PkZIP<font color="#000080">/</font>PkUnZIP combo produced
by the PkWare company<font color="#000080">. </font>The PkZIP programs have <font color="#FF0000"><b>with </b></font>LHArc <font color="#FF0000"><b>and </b></font>ARJ
the best compression<font color="#000080">.
</font>The directory information <font color="#FF0000"><b>is </b></font>stored at the <font color="#FF0000"><b>end of </b></font>the archive<font color="#000080">, </font>each local
<font color="#FF0000"><b>file in </b></font>the archive begins <font color="#FF0000"><b>with </b></font>the following header<font color="#000080">; </font>This header can be used
<font color="#FF0000"><b>to </b></font>identify a ZIP <font color="#FF0000"><b>file as </b></font>such <font color="#000080">:
</font>OFFSET              Count <font color="#FF0000"><b>TYPE   </b></font>Description
<font color="#800000">0000</font>h                   <font color="#800000">4 </font>char   ID<font color="#000080">=</font><font color="#800000">'PK'</font><font color="#000080">,</font><font color="#800000">03</font><font color="#000080">,</font><font color="#800000">04
0004</font>h                   <font color="#800000">1 </font>word   Version needed <font color="#FF0000"><b>to </b></font>extract archive
<font color="#800000">0006</font>h                   <font color="#800000">1 </font>word   General purpose bit field <font color="#000080">(</font>bit mapped<font color="#000080">)
                                      </font><font color="#800000">0 </font><font color="#000080">- </font><font color="#FF0000"><b>file is </b></font>encrypted
                                      <font color="#800000">1 </font><font color="#000080">- </font><font color="#800000">8</font>K<font color="#000080">/</font><font color="#800000">4</font>K sliding dictionary used
                                      <font color="#800000">2 </font><font color="#000080">- </font><font color="#800000">3</font><font color="#000080">/</font><font color="#800000">2 </font>Shannon<font color="#000080">-</font>Fano trees were used
                                    <font color="#800000">3</font><font color="#000080">-</font><font color="#800000">4 </font><font color="#000080">- </font>unused
                                   <font color="#800000">5</font><font color="#000080">-</font><font color="#800000">15 </font><font color="#000080">- </font>used internally by ZIP
                                 Note<font color="#000080">:  </font>Bits <font color="#800000">1 </font><font color="#FF0000"><b>and </b></font><font color="#800000">2 </font>are undefined <font color="#FF0000"><b>if </b></font>the
                                        compression method <font color="#FF0000"><b>is </b></font>other than
                                        <font color="#FF0000"><b>type </b></font><font color="#800000">6 </font><font color="#000080">(</font>Imploding<font color="#000080">).
</font><font color="#800000">0008</font>h                   <font color="#800000">1 </font>word   Compression method <font color="#000080">(</font>see table <font color="#800000">0010</font><font color="#000080">)
</font><font color="#800000">000</font>Ah                   <font color="#800000">1 </font>dword  Original DOS <font color="#FF0000"><b>file </b></font>date<font color="#000080">/</font>time <font color="#000080">(</font>see table <font color="#800000">0009</font><font color="#000080">)
</font><font color="#800000">000E</font>h                   <font color="#800000">1 </font>dword  <font color="#800000">32</font><font color="#000080">-</font>bit CRC <font color="#FF0000"><b>of file </b></font><font color="#000080">(</font>inverse<font color="#000080">??)
</font><font color="#800000">0012</font>h                   <font color="#800000">1 </font>dword  Compressed <font color="#FF0000"><b>file </b></font>size
<font color="#800000">0016</font>h                   <font color="#800000">1 </font>dword  Uncompressed <font color="#FF0000"><b>file </b></font>size
<font color="#800000">001</font>Ah                   <font color="#800000">1 </font>word   Length <font color="#FF0000"><b>of </b></font>filename
                                 <font color="#000080">=&quot;</font>LEN<font color="#000080">&quot;
</font><font color="#800000">001</font>Ch                   <font color="#800000">1 </font>word   Length <font color="#FF0000"><b>of </b></font>extra field
                                 <font color="#000080">=&quot;</font>XLN<font color="#000080">&quot;
</font><font color="#800000">001E</font>h               <font color="#000080">&quot;</font>LEN<font color="#000080">&quot; </font>char   path<font color="#000080">/</font>filename
<font color="#800000">001E</font>h               <font color="#000080">&quot;</font>XLN<font color="#000080">&quot; </font>char   extra field
<font color="#000080">+&quot;</font>LEN<font color="#000080">&quot;
</font>After all the files<font color="#000080">, </font>there comes the central directory structure<font color="#000080">.

(</font>Table <font color="#800000">0009</font><font color="#000080">)
</font>Format <font color="#FF0000"><b>of </b></font>the MS<font color="#000080">-</font>DOS time stamp <font color="#000080">(</font><font color="#800000">32</font><font color="#000080">-</font>bit<font color="#000080">)
</font>The MS<font color="#000080">-</font>DOS time stamp <font color="#FF0000"><b>is </b></font>limited <font color="#FF0000"><b>to </b></font>an even count <font color="#FF0000"><b>of </b></font>seconds<font color="#000080">, </font>since the
count <font color="#FF0000"><b>for </b></font>seconds <font color="#FF0000"><b>is </b></font>only <font color="#800000">5 </font>bits wide<font color="#000080">.

  </font><font color="#800000">31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16
 </font><font color="#000080">|&lt;---- </font>year<font color="#000080">-</font><font color="#800000">1980 </font><font color="#000080">---&gt;|&lt;- </font>month <font color="#000080">-&gt;|&lt;--- </font>day <font color="#000080">----&gt;|

  </font><font color="#800000">15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0
 </font><font color="#000080">|&lt;--- </font>hour <font color="#000080">---&gt;|&lt;---- </font>minute <font color="#000080">---&gt;|&lt;- </font>second<font color="#000080">/</font><font color="#800000">2 </font><font color="#000080">-&gt;|

(</font>Table <font color="#800000">0010</font><font color="#000080">)
</font>PkZip compression types
<font color="#800000">0 </font><font color="#000080">- </font>Stored <font color="#000080">/ </font>No compression
<font color="#800000">1 </font><font color="#000080">- </font>Shrunk <font color="#000080">/ </font>LZW<font color="#000080">, </font><font color="#800000">8</font>K buffer<font color="#000080">, </font><font color="#800000">9</font><font color="#000080">-</font><font color="#800000">13 </font>bits <font color="#FF0000"><b>with </b></font>partial clearing
<font color="#800000">2 </font><font color="#000080">- </font>Reduced<font color="#000080">-</font><font color="#800000">1 </font><font color="#000080">/ </font>Probalistic compression<font color="#000080">, </font>lower <font color="#800000">7 </font>bits
<font color="#800000">3 </font><font color="#000080">- </font>Reduced<font color="#000080">-</font><font color="#800000">2 </font><font color="#000080">/ </font>Probalistic compression<font color="#000080">, </font>lower <font color="#800000">6 </font>bits
<font color="#800000">4 </font><font color="#000080">- </font>Reduced<font color="#000080">-</font><font color="#800000">3 </font><font color="#000080">/ </font>Probalistic compression<font color="#000080">, </font>lower <font color="#800000">5 </font>bits
<font color="#800000">5 </font><font color="#000080">- </font>Reduced<font color="#000080">-</font><font color="#800000">4 </font><font color="#000080">/ </font>Probalistic compression<font color="#000080">, </font>lower <font color="#800000">4 </font>bits
<font color="#800000">6 </font><font color="#000080">- </font>Imploded <font color="#000080">/ </font><font color="#800000">2</font><font color="#000080">/</font><font color="#800000">3 </font>Shanno<font color="#000080">-</font>Fano trees<font color="#000080">, </font><font color="#800000">4</font>K<font color="#000080">/</font><font color="#800000">8</font>K sliding dictionary
<font color="#000080">[</font><font color="#800000">7</font><font color="#000080">..</font><font color="#800000">9 </font>also exist<font color="#000080">] =&gt; </font>note added by Glenn Grotzinger from Phil Katz<font color="#800000">'s
</font>description

<font color="#000080">--- </font>Central directory structure
The CDS <font color="#FF0000"><b>is </b></font>at the <font color="#FF0000"><b>end of </b></font>the archive <font color="#FF0000"><b>and contains </b></font>additional information
about the files stored within the archive<font color="#000080">.
</font>OFFSET              Count <font color="#FF0000"><b>TYPE   </b></font>Description
<font color="#800000">0000</font>h                   <font color="#800000">4 </font>char   ID<font color="#000080">=</font><font color="#800000">'PK'</font><font color="#000080">,</font><font color="#800000">01</font><font color="#000080">,</font><font color="#800000">02
0004</font>h                   <font color="#800000">1 </font>byte   Version made by
<font color="#800000">0005</font>h                   <font color="#800000">1 </font>byte   Host OS <font color="#000080">(</font>see table <font color="#800000">0011</font><font color="#000080">)
</font><font color="#800000">0006</font>h                   <font color="#800000">1 </font>byte   Minimum version needed <font color="#FF0000"><b>to </b></font>extract
<font color="#800000">0007</font>h                   <font color="#800000">1 </font>byte   Target OS
                                 see above <font color="#000080">&quot;</font>Host OS<font color="#000080">&quot;
</font><font color="#800000">0008</font>h                   <font color="#800000">1 </font>word   General purpose bit flag
                                 see above <font color="#000080">&quot;</font>General purpose bit flag<font color="#000080">&quot;
</font><font color="#800000">000</font>Ah                   <font color="#800000">1 </font>word   Compression method
                                 see above <font color="#000080">&quot;</font>Compression method<font color="#000080">&quot;
</font><font color="#800000">000</font>Ch                   <font color="#800000">1 </font>dword  DOS date <font color="#000080">/ </font>time <font color="#FF0000"><b>of file </b></font><font color="#000080">(</font>see table <font color="#800000">0009</font><font color="#000080">)
</font><font color="#800000">0010</font>h                   <font color="#800000">1 </font>dword  <font color="#800000">32</font><font color="#000080">-</font>bit CRC <font color="#FF0000"><b>of file 
</b></font><font color="#800000">0014</font>h                   <font color="#800000">1 </font>dword  Compressed size <font color="#FF0000"><b>of file
</b></font><font color="#800000">0018</font>h                   <font color="#800000">1 </font>dword  Uncompressed size <font color="#FF0000"><b>of file
</b></font><font color="#800000">001</font>Ch                   <font color="#800000">1 </font>word   Length <font color="#FF0000"><b>of </b></font>filename
                                 <font color="#000080">=&quot;</font>LEN<font color="#000080">&quot;
</font><font color="#800000">001E</font>h                   <font color="#800000">1 </font>word   Length <font color="#FF0000"><b>of </b></font>extra field
                                 <font color="#000080">=&quot;</font>XLN<font color="#000080">&quot;
</font><font color="#800000">0020</font>h                   <font color="#800000">1 </font>word   Length <font color="#FF0000"><b>of file </b></font>comment
                                 <font color="#000080">=&quot;</font>CMT<font color="#000080">&quot;
</font><font color="#800000">0022</font>h                   <font color="#800000">1 </font>word   Disk number <font color="#000080">??
</font><font color="#800000">0024</font>h                   <font color="#800000">1 </font>word   Internal <font color="#FF0000"><b>file </b></font>attributes <font color="#000080">(</font>bit mapped<font color="#000080">)
                                    </font><font color="#800000">0 </font><font color="#000080">- </font><font color="#FF0000"><b>file is </b></font>apparently an ASCII<font color="#000080">/</font>binary <font color="#FF0000"><b>file
                                 </b></font><font color="#800000">1</font><font color="#000080">-</font><font color="#800000">15 </font><font color="#000080">- </font>unused
<font color="#800000">0026</font>h                   <font color="#800000">1 </font>dword  <font color="#FF0000"><b>External file </b></font>attributes <font color="#000080">(</font>OS dependent<font color="#000080">)
</font><font color="#800000">002</font>Ah                   <font color="#800000">1 </font>dword  Relative offset <font color="#FF0000"><b>of </b></font>local header from the
                                 start <font color="#FF0000"><b>of </b></font>the first disk this <font color="#FF0000"><b>file </b></font>appears <font color="#FF0000"><b>on
</b></font><font color="#800000">002E</font>h               <font color="#000080">&quot;</font>LEN<font color="#000080">&quot; </font>char   Filename <font color="#000080">/ </font>path<font color="#000080">; </font>should <font color="#FF0000"><b>not </b></font>contain a drive
                                 <font color="#FF0000"><b>or </b></font>device letter<font color="#000080">, </font>all slashes should be <font color="#FF0000"><b>forward
                                 </b></font>slashes <font color="#800000">'/'</font><font color="#000080">.
</font><font color="#800000">002E</font>h<font color="#000080">+              &quot;</font>XLN<font color="#000080">&quot; </font>char   Extra field
<font color="#000080">+&quot;</font>LEN<font color="#000080">&quot;
</font><font color="#800000">002E</font>h               <font color="#000080">&quot;</font>CMT<font color="#000080">&quot; </font>char   <font color="#FF0000"><b>File </b></font>comment
<font color="#000080">+&quot;</font>LEN<font color="#000080">&quot;
+&quot;</font>XLN<font color="#000080">&quot;

(</font>Table <font color="#800000">0011</font><font color="#000080">)
</font>PkZip Host OS table
<font color="#800000">0 </font><font color="#000080">- </font>MS<font color="#000080">-</font>DOS <font color="#FF0000"><b>and </b></font>OS<font color="#000080">/</font><font color="#800000">2 </font><font color="#000080">(</font>FAT<font color="#000080">)
</font><font color="#800000">1 </font><font color="#000080">- </font>Amiga
<font color="#800000">2 </font><font color="#000080">- </font>VMS
<font color="#800000">3 </font><font color="#000080">- *</font>nix
<font color="#800000">4 </font><font color="#000080">- </font>VM<font color="#000080">/</font>CMS
<font color="#800000">5 </font><font color="#000080">- </font>Atari ST
<font color="#800000">6 </font><font color="#000080">- </font>OS<font color="#000080">/</font><font color="#800000">2 1.2 </font>extended <font color="#FF0000"><b>file </b></font>sys
<font color="#800000">7 </font><font color="#000080">- </font>Macintosh
<font color="#800000">8</font><font color="#000080">-</font><font color="#800000">255 </font><font color="#000080">- </font>unused

<font color="#000080">--- </font><font color="#FF0000"><b>End of </b></font>central directory structure
The <font color="#FF0000"><b>End of </b></font>Central Directory Structure header has following format <font color="#000080">:
</font>OFFSET              Count <font color="#FF0000"><b>TYPE   </b></font>Description
<font color="#800000">0000</font>h                   <font color="#800000">4 </font>char   ID<font color="#000080">=</font><font color="#800000">'PK'</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">06
0004</font>h                   <font color="#800000">1 </font>word   Number <font color="#FF0000"><b>of </b></font>this disk
<font color="#800000">0006</font>h                   <font color="#800000">1 </font>word   Number <font color="#FF0000"><b>of </b></font>disk <font color="#FF0000"><b>with </b></font>start <font color="#FF0000"><b>of </b></font>central directory
<font color="#800000">0008</font>h                   <font color="#800000">1 </font>word   Total number <font color="#FF0000"><b>of file</b></font><font color="#000080">/</font>path entries <font color="#FF0000"><b>on </b></font>this disk
<font color="#800000">000</font>Ah                   <font color="#800000">1 </font>word   Total number <font color="#FF0000"><b>of </b></font>entries <font color="#FF0000"><b>in </b></font>central dir
<font color="#800000">000</font>Ch                   <font color="#800000">1 </font>dword  Size <font color="#FF0000"><b>of </b></font>central directory
<font color="#800000">0010</font>h                   <font color="#800000">1 </font>dword  Offset <font color="#FF0000"><b>of </b></font>start <font color="#FF0000"><b>of </b></font>central directory relative
                                 <font color="#FF0000"><b>to </b></font>starting disk number
<font color="#800000">0014</font>h                   <font color="#800000">1 </font>word   Archive comment length
                                 <font color="#000080">=&quot;</font>CML<font color="#000080">&quot;
</font><font color="#800000">0016</font>h               <font color="#000080">&quot;</font>CML<font color="#000080">&quot; </font>char   Zip <font color="#FF0000"><b>file </b></font>comment

EXTENSION<font color="#000080">:</font>ZIP
OCCURENCES<font color="#000080">:</font>PC<font color="#000080">,</font>Amiga<font color="#000080">,</font>ST
PROGRAMS<font color="#000080">:</font>PkZIP<font color="#000080">,</font>WinZIP
REFERENCE<font color="#000080">:</font>Technote<font color="#000080">.</font>APP

Source<font color="#000080">: </font>FILEFMTS <font color="#000080">(</font>c<font color="#000080">) </font><font color="#800000">1994</font><font color="#000080">,</font><font color="#800000">1995 </font>Max Maischein


Sample output <font color="#FF0000"><b>for </b></font>this <font color="#FF0000"><b>program
</b></font><font color="#000080">==============================

                       </font>Files contained <font color="#FF0000"><b>in </b></font>FILENAME<font color="#000080">.</font>ZIP

NAME         COMP<font color="#000080">-</font>SIZE     DATE     TIME     UNCOMP<font color="#000080">-</font>SIZE  COMP<font color="#000080">-</font>METHOD       
<font color="#000080">---------------------------------------------------------------------
</font>FOOBAR10<font color="#000080">.</font>TXT       <font color="#800000">732  10</font><font color="#000080">-</font><font color="#800000">01</font><font color="#000080">-</font><font color="#800000">1993  02</font><font color="#000080">:</font><font color="#800000">30          1021       7
 </font>FOBAR11<font color="#000080">.</font>ZIP     <font color="#800000">11021  12</font><font color="#000080">-</font><font color="#800000">01</font><font color="#000080">-</font><font color="#800000">1995  22</font><font color="#000080">:</font><font color="#800000">03         23923       6
</font><font color="#000080">...
---------------------------------------------------------------------
               </font><font color="#800000">1520032                          4023232

15 </font>files<font color="#000080">; </font>Effective compression ratio<font color="#000080">: </font><font color="#800000">65.3</font><font color="#000080">%

&lt; </font>write the comment here<font color="#000080">, </font><font color="#FF0000"><b>or </b></font>write <font color="#000080">&quot;</font>No ZIP comment<font color="#000080">.&quot; </font><font color="#FF0000"><b>if </b></font>there <font color="#FF0000"><b>is </b></font>no
ZIP comment <font color="#000080">&gt;


</font>Notes<font color="#000080">:
</font><font color="#800000">1</font><font color="#000080">) </font>Note how I have the sample output<font color="#000080">.  </font>It needs <font color="#FF0000"><b>to </b></font>be EXACTLY <font color="#FF0000"><b>as </b></font>I have
listed it<font color="#000080">.
</font><font color="#800000">2</font><font color="#000080">) </font>The orders <font color="#FF0000"><b>and </b></font>the methods you need <font color="#FF0000"><b>to </b></font>use <font color="#FF0000"><b>to </b></font>read files should be
evident from the specs <font color="#FF0000"><b>file</b></font><font color="#000080">.  </font>They will be random reads<font color="#000080">...
</font><font color="#800000">3</font><font color="#000080">) </font><font color="#FF0000"><b>With </b></font>the random reads<font color="#000080">, </font>it <font color="#FF0000"><b>is </b></font>about impossible <font color="#FF0000"><b>to </b></font>tell what you got
read unless you check first<font color="#000080">...</font>Notice a good way <font color="#FF0000"><b>to </b></font>check <font color="#FF0000"><b>out of </b></font>the
first field <font color="#FF0000"><b>of </b></font>each <font color="#FF0000"><b>record</b></font><font color="#000080">...
</font><font color="#800000">4</font><font color="#000080">) </font>The <font color="#000080">&quot;</font>MS<font color="#000080">-</font>DOS Time Format<font color="#000080">&quot; </font>can be done really easily<font color="#000080">.  </font>Just think DOS
<font color="#FF0000"><b>unit</b></font><font color="#000080">.
</font><font color="#800000">5</font><font color="#000080">) </font><font color="#FF0000"><b>Do not </b></font>read anything unless you HAVE <font color="#FF0000"><b>to</b></font><font color="#000080">....
</font><font color="#800000">6</font><font color="#000080">) </font>Since this <font color="#FF0000"><b>is </b></font>a <font color="#FF0000"><b>program </b></font>that happens <font color="#FF0000"><b>to </b></font>use another <font color="#FF0000"><b>program</b></font><font color="#800000">'s data,
</font>more than likely<font color="#000080">, </font>the data are correct<font color="#000080">, </font>so there <font color="#FF0000"><b>is </b></font>no need <font color="#FF0000"><b>to </b></font>check
any <font color="#FF0000"><b>of </b></font>the data beyond determining whether it<font color="#800000">'s an actual ZIP file.

</font><font color="#FF0000"><b>With </b></font>this data listed<font color="#000080">, </font>you should be able <font color="#FF0000"><b>to do </b></font>anything related <font color="#FF0000"><b>to </b></font>listing<font color="#000080">,
</font>stripping comments<font color="#000080">, </font>showing comments<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>so <font color="#FF0000"><b>on and </b></font>so forth<font color="#000080">.

</font>Next Time
<font color="#000080">=========
</font>We will cover the use <font color="#FF0000"><b>of </b></font>stacks <font color="#FF0000"><b>and </b></font>queues<font color="#000080">.  </font>Send any comments<font color="#000080">,
</font>encouragements<font color="#000080">, </font>problems<font color="#000080">, </font>etc<font color="#000080">, </font>etc<font color="#000080">. </font><font color="#FF0000"><b>to </b></font>ggrotz<font color="#000080">@</font><font color="#800000">2</font>sprint<font color="#000080">.</font>net<font color="#000080">.  </font>Haven<font color="#800000">'t
</font>seen anything <font color="#FF0000"><b>of </b></font>that <font color="#FF0000"><b>type</b></font><font color="#000080">, </font>ya know<font color="#000080">....

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to TUTOR SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0014.PAS">Original</a><b>]</b></p></body>
</html>
