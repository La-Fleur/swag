<html>
<head><title> "Misc Topics" by GLENN GROTZINGER</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to TUTOR SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0023.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#000000">                        Turbo <font color="#FF0000"><b>Pascal for </b></font>DOS Tutorial
                             by Glenn Grotzinger
                       Part <font color="#800000">20</font><font color="#000080">: </font>Miscallaneous Topics
                     copyright <font color="#000080">(</font>c<font color="#000080">) </font>by Glenn Grotzinger

Hello<font color="#000080">.  </font>Here <font color="#FF0000"><b>is </b></font>a solution <font color="#FF0000"><b>for </b></font>the programming problem that was given <font color="#FF0000"><b>in
</b></font>part <font color="#800000">19 </font><font color="#FF0000"><b>with </b></font>a little background explanation<font color="#000080">.

</font>PART19A<font color="#000080">.</font>PAS
<font color="#000080">-----------
</font>This was the <font color="#FF0000"><b>program </b></font>written <font color="#FF0000"><b>to </b></font>generate the binary data <font color="#FF0000"><b>file for </b></font>use <font color="#FF0000"><b>with
</b></font>the actual word checker<font color="#000080">.  </font>A text <font color="#FF0000"><b>file </b></font>was written <font color="#FF0000"><b>to </b></font>facilitate reading <font color="#FF0000"><b>in
</b></font>the data<font color="#000080">, </font>one word per line<font color="#000080">, </font><font color="#FF0000"><b>to </b></font>ease <font color="#FF0000"><b>implementation</b></font><font color="#000080">.

</font><font color="#FF0000"><b>program </b></font>part19a<font color="#000080">;

  </font><font color="#FF0000"><b>var
    </b></font>infile<font color="#000080">: </font>text<font color="#000080">;
    </font>outfile<font color="#000080">: </font><font color="#FF0000"><b>file</b></font><font color="#000080">;
    </font>datastring<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">14</font><font color="#000080">];
  </font><font color="#FF0000"><b>begin
    </b></font>assign<font color="#000080">(</font>infile<font color="#000080">, </font><font color="#800000">'SOMEWRDS.TXT'</font><font color="#000080">);
    </font>assign<font color="#000080">(</font>outfile<font color="#000080">, </font><font color="#800000">'SOMEWRDS.DAT'</font><font color="#000080">);
    </font>reset<font color="#000080">(</font>infile<font color="#000080">);
    </font>rewrite<font color="#000080">(</font>outfile<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);

    </font>readln<font color="#000080">(</font>infile<font color="#000080">, </font>datastring<font color="#000080">);
    </font><font color="#FF0000"><b>while not </b></font>eof<font color="#000080">(</font>infile<font color="#000080">) </font><font color="#FF0000"><b>do
      begin
        </b></font>blockwrite<font color="#000080">(</font>outfile<font color="#000080">, </font>datastring<font color="#000080">, </font>sizeof<font color="#000080">(</font>datastring<font color="#000080">));
        </font>writeln<font color="#000080">(</font>datastring<font color="#000080">);
        </font>readln<font color="#000080">(</font>infile<font color="#000080">, </font>datastring<font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>blockwrite<font color="#000080">(</font>outfile<font color="#000080">, </font>datastring<font color="#000080">, </font>sizeof<font color="#000080">(</font>datastring<font color="#000080">));
    </font>writeln<font color="#000080">(</font>datastring<font color="#000080">);

    </font>close<font color="#000080">(</font>infile<font color="#000080">);
    </font>close<font color="#000080">(</font>outfile<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>PART19B<font color="#000080">.</font>PAS
<font color="#000080">-----------
</font>This <font color="#FF0000"><b>is </b></font>the actual word checker<font color="#000080">.  </font>It <font color="#FF0000"><b>is </b></font>made so the words typed into the
keyboard <font color="#FF0000"><b>do not </b></font>have <font color="#FF0000"><b>to </b></font>be <font color="#FF0000"><b>case </b></font>sensitive <font color="#FF0000"><b>with </b></font>reference <font color="#FF0000"><b>to </b></font>the datafile<font color="#000080">.
</font>All prevalent errors have error<font color="#000080">-</font>checking code<font color="#000080">.

</font><font color="#FF0000"><b>program </b></font>part19b<font color="#000080">;

  </font><font color="#FF0000"><b>type
    </b></font>strtype <font color="#000080">= </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">14</font><font color="#000080">];
    </font>nodeptr <font color="#000080">= ^</font>node<font color="#000080">;
    </font>node <font color="#000080">= </font><font color="#FF0000"><b>record
      </b></font>str<font color="#000080">: </font>strtype<font color="#000080">;
      </font>left<font color="#000080">, </font>right<font color="#000080">: </font>nodeptr<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>var
    </b></font>tree<font color="#000080">: </font>nodeptr<font color="#000080">;
    </font>datastring<font color="#000080">: </font>strtype<font color="#000080">;
    </font>infile<font color="#000080">: </font><font color="#FF0000"><b>file</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>procedure </b></font>opendatafile<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>infile<font color="#000080">: </font><font color="#FF0000"><b>file</b></font><font color="#000080">; </font>afile<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">);
    </font><font color="#FF0000"><b>begin
      </b></font>assign<font color="#000080">(</font>infile<font color="#000080">, </font>afile<font color="#000080">);
      </font><font color="#008000"><i>{$I-}</i></font>reset<font color="#000080">(</font>infile<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);</font><font color="#008000"><i>{$I+}
      </i></font><font color="#FF0000"><b>if </b></font>IOResult <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
        begin
          </b></font>writeln<font color="#000080">(</font><font color="#800000">'Terminating.  '</font><font color="#000080">, </font>afile<font color="#000080">, </font><font color="#800000">' does not exist!'</font><font color="#000080">);
          </font>halt<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>function </b></font>upstr<font color="#000080">(</font>instr<font color="#000080">: </font>strtype<font color="#000080">):</font>strtype<font color="#000080">;
    </font><font color="#FF0000"><b>var
      </b></font>i<font color="#000080">: </font>byte<font color="#000080">;
      </font>tempstr<font color="#000080">: </font>strtype<font color="#000080">;
    </font><font color="#FF0000"><b>begin
      </b></font>tempstr <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
      </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>length<font color="#000080">(</font>instr<font color="#000080">) </font><font color="#FF0000"><b>do
        </b></font>tempstr <font color="#000080">:= </font>tempstr <font color="#000080">+ </font>upcase<font color="#000080">(</font>instr<font color="#000080">[</font>i<font color="#000080">]);
      </font>upstr <font color="#000080">:= </font>tempstr<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>procedure </b></font>memoryerror<font color="#000080">;
    </font><font color="#FF0000"><b>begin
      </b></font>writeln<font color="#000080">(</font><font color="#800000">'Out of memory.'</font><font color="#000080">);
      </font>halt<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>procedure </b></font>deletetree<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>tree<font color="#000080">: </font>nodeptr<font color="#000080">);
    </font><font color="#FF0000"><b>begin
      if </b></font>tree <font color="#000080">&lt;&gt; </font><font color="#FF0000"><b>nil then
        begin
          </b></font>deletetree<font color="#000080">(</font>tree<font color="#000080">^.</font>right<font color="#000080">);
          </font>deletetree<font color="#000080">(</font>tree<font color="#000080">^.</font>left<font color="#000080">);
          </font>dispose<font color="#000080">(</font>tree<font color="#000080">);
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>procedure </b></font>inserttree<font color="#000080">(</font>datastring<font color="#000080">: </font>strtype<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>tree<font color="#000080">: </font>nodeptr<font color="#000080">);
    </font><font color="#FF0000"><b>begin
      if </b></font>tree <font color="#000080">= </font><font color="#FF0000"><b>nil then
        begin
          if </b></font>memavail <font color="#000080">- </font>sizeof<font color="#000080">(</font>tree<font color="#000080">) &gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
            </b></font>new<font color="#000080">(</font>tree<font color="#000080">)
          </font><font color="#FF0000"><b>else
            </b></font>memoryerror<font color="#000080">;
          </font>tree<font color="#000080">^.</font>str <font color="#000080">:= </font>datastring<font color="#000080">;
          </font>tree<font color="#000080">^.</font>left <font color="#000080">:= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">;
          </font>tree<font color="#000080">^.</font>right <font color="#000080">:= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">;
        </font><font color="#FF0000"><b>end
      else
        begin
          if </b></font>upstr<font color="#000080">(</font>datastring<font color="#000080">) &gt; </font>tree<font color="#000080">^.</font>str <font color="#FF0000"><b>then
            </b></font>inserttree<font color="#000080">(</font>upstr<font color="#000080">(</font>datastring<font color="#000080">), </font>tree<font color="#000080">^.</font>right<font color="#000080">);
          </font><font color="#FF0000"><b>if </b></font>upstr<font color="#000080">(</font>datastring<font color="#000080">) &lt; </font>tree<font color="#000080">^.</font>str <font color="#FF0000"><b>then
            </b></font>inserttree<font color="#000080">(</font>upstr<font color="#000080">(</font>datastring<font color="#000080">), </font>tree<font color="#000080">^.</font>left<font color="#000080">);
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>procedure </b></font>buildsearch<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>infile<font color="#000080">: </font><font color="#FF0000"><b>file</b></font><font color="#000080">; </font><font color="#FF0000"><b>var </b></font>tree<font color="#000080">: </font>nodeptr<font color="#000080">);
    </font><font color="#FF0000"><b>var
      </b></font>datastring<font color="#000080">: </font>strtype<font color="#000080">;
    </font><font color="#FF0000"><b>begin
      </b></font>blockread<font color="#000080">(</font>infile<font color="#000080">, </font>datastring<font color="#000080">, </font>sizeof<font color="#000080">(</font>datastring<font color="#000080">));
      </font><font color="#FF0000"><b>while not </b></font>eof<font color="#000080">(</font>infile<font color="#000080">) </font><font color="#FF0000"><b>do
        begin
          </b></font>inserttree<font color="#000080">(</font>datastring<font color="#000080">, </font>tree<font color="#000080">);
          </font>blockread<font color="#000080">(</font>infile<font color="#000080">, </font>datastring<font color="#000080">, </font>sizeof<font color="#000080">(</font>datastring<font color="#000080">));
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font>inserttree<font color="#000080">(</font>datastring<font color="#000080">, </font>tree<font color="#000080">);
      </font>close<font color="#000080">(</font>infile<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>procedure </b></font>searchtree<font color="#000080">(</font>datastring<font color="#000080">: </font>strtype<font color="#000080">; </font>tree<font color="#000080">: </font>nodeptr<font color="#000080">);
    </font><font color="#FF0000"><b>begin
      if </b></font>tree <font color="#000080">= </font><font color="#FF0000"><b>nil then
        </b></font>writeln<font color="#000080">(</font>datastring<font color="#000080">, </font><font color="#800000">' was not found in the data file.'</font><font color="#000080">)
      </font><font color="#FF0000"><b>else
        begin
          if </b></font>datastring <font color="#000080">= </font>tree<font color="#000080">^.</font>str <font color="#FF0000"><b>then
            </b></font>writeln<font color="#000080">(</font>datastring<font color="#000080">, </font><font color="#800000">' was found in the data file.'</font><font color="#000080">)
          </font><font color="#FF0000"><b>else
            begin
              if </b></font>datastring <font color="#000080">&gt; </font>tree<font color="#000080">^.</font>str <font color="#FF0000"><b>then
                </b></font>searchtree<font color="#000080">(</font>datastring<font color="#000080">, </font>tree<font color="#000080">^.</font>right<font color="#000080">);
              </font><font color="#FF0000"><b>if </b></font>datastring <font color="#000080">&lt; </font>tree<font color="#000080">^.</font>str <font color="#FF0000"><b>then
                </b></font>searchtree<font color="#000080">(</font>datastring<font color="#000080">, </font>tree<font color="#000080">^.</font>left<font color="#000080">);
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>procedure </b></font>promptwrite<font color="#000080">;
    </font><font color="#FF0000"><b>begin
      </b></font>writeln<font color="#000080">(</font><font color="#800000">'Type QUIT to terminate.'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font><font color="#800000">'Type a word, and we''ll see if it''s in the database.'</font><font color="#000080">);
      </font>writeln<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>begin
    </b></font>writeln<font color="#000080">(</font><font color="#800000">'Database checker.'</font><font color="#000080">);
    </font>writeln<font color="#000080">;
    </font>opendatafile<font color="#000080">(</font>infile<font color="#000080">, </font><font color="#800000">'SOMEWRDS.DAT'</font><font color="#000080">);
    </font>buildsearch<font color="#000080">(</font>infile<font color="#000080">, </font>tree<font color="#000080">);
    </font>promptwrite<font color="#000080">;
    </font>readln<font color="#000080">(</font>datastring<font color="#000080">);
    </font><font color="#FF0000"><b>while </b></font><font color="#000080">(</font>upstr<font color="#000080">(</font>datastring<font color="#000080">) &lt;&gt; </font><font color="#800000">'QUIT'</font><font color="#000080">) </font><font color="#FF0000"><b>do
      begin
        </b></font>searchtree<font color="#000080">(</font>upstr<font color="#000080">(</font>datastring<font color="#000080">), </font>tree<font color="#000080">);
        </font>promptwrite<font color="#000080">;
        </font>readln<font color="#000080">(</font>datastring<font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>deletetree<font color="#000080">(</font>tree<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>The written explanation <font color="#FF0000"><b>of </b></font>the delete code that was written <font color="#FF0000"><b>in </b></font>the example<font color="#000080">,
</font><font color="#FF0000"><b>to </b></font>completely remove the BST from memory<font color="#000080">...

</font>We know that <font color="#FF0000"><b>in </b></font>a pointer<font color="#000080">-</font>linked structure <font color="#FF0000"><b>if </b></font>we remove a node that has
links assigned <font color="#FF0000"><b>to </b></font>it<font color="#000080">, </font>that we will cause a heap leak <font color="#FF0000"><b>and </b></font>render the rest
<font color="#FF0000"><b>of </b></font>the data structure unremovable from memory<font color="#000080">.  </font><font color="#FF0000"><b>In </b></font>a BST<font color="#000080">, </font>that <font color="#FF0000"><b>case </b></font>becomes
when both right <font color="#FF0000"><b>and </b></font>left branches <font color="#FF0000"><b>of </b></font>the node are <font color="#FF0000"><b>nil</b></font><font color="#000080">.  </font>We have <font color="#FF0000"><b>to </b></font>use
recursion<font color="#000080">, </font>evidently<font color="#000080">, </font>since the problem <font color="#FF0000"><b>of </b></font>deleting the entire binary tree
comes down <font color="#FF0000"><b>to </b></font>many smaller problems <font color="#FF0000"><b>of </b></font>deleting nodes <font color="#FF0000"><b>with </b></font>both sides
assigned <font color="#FF0000"><b>to nil</b></font><font color="#000080">, </font>basically<font color="#000080">.  </font>So basically<font color="#000080">, </font><font color="#FF0000"><b>if </b></font>we observe those lines <font color="#FF0000"><b>of
</b></font>code<font color="#000080">, </font>recursion occurs <font color="#FF0000"><b>until </b></font>both the left <font color="#FF0000"><b>and </b></font>right sides <font color="#FF0000"><b>of </b></font>nodes become
<font color="#FF0000"><b>nil</b></font><font color="#000080">, </font><font color="#FF0000"><b>and then </b></font>a dispose occurs<font color="#000080">.  </font><font color="#FF0000"><b>In </b></font>working back up <font color="#FF0000"><b>in </b></font>returning from the
<font color="#FF0000"><b>procedure </b></font>calls<font color="#000080">, </font>the tree <font color="#FF0000"><b>is </b></font>essentially disposed <font color="#FF0000"><b>of </b></font>from the bottom up <font color="#FF0000"><b>to
</b></font>the root node<font color="#000080">, </font><font color="#FF0000"><b>in </b></font>reverse from the way the insert code illustration created
it<font color="#000080">.

</font>Contents <font color="#FF0000"><b>for </b></font>Part <font color="#800000">20
</font><font color="#000080">====================
</font>Since this part <font color="#FF0000"><b>contains </b></font>many random varied topics<font color="#000080">, </font>a table <font color="#FF0000"><b>of </b></font>contents <font color="#FF0000"><b>is
in </b></font>order<font color="#000080">....

        </font>A<font color="#000080">) </font>Linking OBJ code into <font color="#FF0000"><b>Pascal </b></font>programs<font color="#000080">.
        </font>B<font color="#000080">) </font>Including <font color="#FF0000"><b>ASM </b></font><font color="#FF00FF">or inline statements in Pascal programs.
        C) Hooking an interrupt in pascal programs.
        D) Calling an interrupt procedure.
        E) Conditional Compiler Compilation.

Linking OBJ code into Pascal programs
=====================================
This is a short program, which describes the exact process, USING A C
program's function (the topic of using C OBJ's came up).  If you do
this with C OBJ, the code must not make any calls to any C libraries,
or make any calls to a DLL.

A description of what's going on...

TEST1.H

int far pascal add2numbers(int num1, int num2)

  </font><font color="#008000"><i>{
    return (num1 + num2);
  }

</i></font><font color="#FF00FF">This is a C header file with a small defined function in it.  You MUST
define it using either void far pascal for a procedure or &lt;datatype&gt; far
pascal for a function.  I describe a function in test1.h.  For those who
wonder, a header file in C functions much like a unit does in Pascal.

For an OBJ you intend to use, each and every function must be defined in
the resultant pascal program.  (I know it is not liked, and you SHOULD
NEVER normally post attachments in c.l.p.b.) With differences
between so many different C compilers and syntaxes that exist in the world,
I will post the OBJ file I got from the compiler I use, for purposes of
enabling others to test this.  I recommend you to cut and paste it before
you uu or xx encode it if you need to obtain it.

begin 644 test1.obj
M@`D`!U1%4U0Q+D..B!\````;5$,X-B!&quot;;W)L86YD(%1U&lt;F)O($,K*R`S+C`P
MD8@/``#I=G%&quot;(`=415-4,2Y#3H@&amp;``#E`0``C(@5``#F!&amp;YU;3($&quot;@8`!&amp;YU
M;3$$&quot;@@`2(@&amp;``#E`08`AH@@``#F!F%N&lt;W=E&lt;@0&quot;_O\$;G5M,00*&quot;``$;G5M
M,@0*!@&quot;DB`4``.&lt;:`'*(!0``YQH`&lt;H@*``#N`0``!@`4`&amp;6(`P``Z8R(!0``
MZ@$+?98H```%7U1%6%0$0T]$105?1$%4001$051!!%]&quot;4U,#0E-3!D1'4D]5
M4-&amp;8!P`H&amp;@`&quot;`P$9F`&lt;`2```!`4!#Y@'`$@```8'`0N:!@`(_P+_`U60$@``
M`0M!1$0R3E5-0D524P```#N(&quot;P``XQ@````C!`4`1H@%``#A&amp;!ABH!X``0``
M58OL@^P&quot;BT8(`T8&amp;B4;^BT;^ZP&quot;+Y5W*!`&quot;ZB!```.@`!U1%4U0Q+D-V&lt;4(@
&lt;3I03```!`@````8`!@`'``\`&quot;``4`!B*`@``=```
`
</font><font color="#FF0000"><b>end

</b></font>TEST2C<font color="#000080">.</font>PAS

<font color="#008000"><i>{$F+}
</i></font><font color="#FF0000"><b>program </b></font>test2c<font color="#000080">;

  </font><font color="#008000"><i>{$L TEST1.OBJ}
  </i></font><font color="#FF0000"><b>function </b></font>add2numbers<font color="#000080">(</font>num1<font color="#000080">, </font>num2<font color="#000080">: </font>integer<font color="#000080">): </font>integer<font color="#000080">;</font><font color="#FF0000"><b>external</b></font><font color="#000080">;
  
  </font><font color="#FF0000"><b>begin
    </b></font>writeln<font color="#000080">(</font>add2numbers<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">, </font><font color="#800000">3</font><font color="#000080">));
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">.


</font>This <font color="#FF0000"><b>is </b></font>the <font color="#FF0000"><b>pascal </b></font>code using the OBJ<font color="#000080">.  </font>Basically<font color="#000080">, </font>the <font color="#800000">$F</font><font color="#000080">+ </font>compiler
directive <font color="#FF0000"><b>is </b></font>required<font color="#000080">.  </font><font color="#FF0000"><b>Then </b></font>observe the usage <font color="#FF0000"><b>of </b></font>the <font color="#800000">$</font>L compiler
directive<font color="#000080">.  </font>The <font color="#800000">$</font>L specifies the OBJ <font color="#FF0000"><b>file </b></font>name <font color="#FF0000"><b>to </b></font>link <font color="#FF0000"><b>in</b></font><font color="#000080">.
</font>Also note the use <font color="#FF0000"><b>of </b></font>the <font color="#FF0000"><b>external</b></font><font color="#000080">; </font>statement at the <font color="#FF0000"><b>end of </b></font>the <font color="#FF0000"><b>function
</b></font>declaration<font color="#000080">.  </font>That specifies that the <font color="#FF0000"><b>function is </b></font>defined externally<font color="#000080">,
</font><font color="#FF0000"><b>and not in </b></font>any <font color="#FF0000"><b>Pascal unit or </b></font>defined <font color="#FF0000"><b>in </b></font>the <font color="#FF0000"><b>program </b></font>itself<font color="#000080">.  </font>The
<font color="#FF0000"><b>function or procedure </b></font>declaration listed <font color="#FF0000"><b>in </b></font>the <font color="#FF0000"><b>pascal program </b></font>must
match EXACTLY <font color="#FF0000"><b>with </b></font>the one defined <font color="#FF0000"><b>in </b></font>the OBJ <font color="#FF0000"><b>file</b></font><font color="#000080">.  </font>It does <font color="#FF0000"><b>in </b></font>this
<font color="#FF0000"><b>case</b></font><font color="#000080">.

</font>Including <font color="#FF0000"><b>ASM </b></font><font color="#FF00FF">or inline statements in Pascal
============================================
Pascal is a compiler, which translates the data into </font><font color="#FF0000"><b>ASM</b></font><font color="#FF00FF">, and then into
machine language.  Naturally, if it takes the data to </font><font color="#FF0000"><b>ASM</b></font><font color="#FF00FF">, it can use
straight assembler code as as well.  Take a look at the short procedure
mockup below.

procedure dothis; assembler;
  </font><font color="#FF0000"><b>asm
   </b></font><font color="#008000"><i>{ assembler code goes in here }
  </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">is a keyword that may be used anywhere in code, which
tells the compiler to start looking for assembler code instead of pascal code.
The assembler keyword is one that can optionally be added to make the
compiler look for an </font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">keyword instead of the begin at a beginning of a
procedure or function.

An inline statement works much like a function call.  It makes it so
that machine language can be used in pascal code.  For example (the hex
codes are garbage I'm making up so don't use this in a real program),
an inline statement can look like this...

inline($80/$23/$14/$36);

The codes can go on infinitely, and are separated by /'s...

References
==========
There is so much specific information out there that is required to know
about computers that references are almost always needed.  Here are a few
of my recommendations.

   Ralf Brown's Interrupt List (INTERXXY.ZIP  XX being a version #, y
       being a through e. -- this is a big set of text files!)
       This is a listing of all known interrupt functions of a PC.

   The PC Game Programmer's Encyclopedia (PCGPE.ZIP)  This is a
       collection of text files...some hold tutorials about how to
       program in assembler and VGA, a lot of them hold specific
       information about how to program peripherals of your system.
       Another big download

   The SourceWare Archival Group collection (SWAG).  Very much known,
       this is a collection of pascal code which has been donated by
       programmers from all over the world that reference how to do
       various topics.  I recommend you use this code only as a reference
       for instruction and do not copy the code.  This is almost a 7.5MB
       download.

Hooking an Interrupt
====================
An interrupt is a signal made from the computer to the CPU for many
functions that occur in the computer.  There are many different types
and numbers of interrupts.  There are two basic types, though, hardware
and software interrupts.

A interrupt is put in simpler terms is an &quot;attention order&quot; from some
component of the system.  In most common systems, there are 255 of these
available, both software and hardware.

Below is an example where we hook an interrupt.  Hooking an interrupt
involves the replacement and augmentation of the basic system interrupt
process with something else, or nothing at all (if we want to temporarily
disable a piece of hardware for a security program, for example).

What this program does is hook the interrupt that handles the internal
PC timer.  That function is augmented by a count that is added by the
procedure &quot;count&quot; listed below.  As a background, for the PC timer,
approximately 18.2 timer ticks occur every second, or 0.054945 seconds
per tick.  Ultimately, you can see by running this program, that all it
does is wait for you to press a key. 

program writehello; uses dos;

  var
    intsave: procedure;
    counter: integer;

 </font><font color="#008000"><i>{$F+}
 </i></font><font color="#FF00FF">procedure count; interrupt;
   begin
     inc(counter);
     inline($9C); </font><font color="#008000"><i>{ prods an interrupt }
     </i></font><font color="#FF00FF">intsave;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#008000"><i>{$F-}

 </i></font><font color="#FF0000"><b>begin
   </b></font>writeln<font color="#000080">(</font><font color="#800000">'Press a key.'</font><font color="#000080">);
   </font>getintvec<font color="#000080">(</font><font color="#800000">$1C</font><font color="#000080">, @</font>intsave<font color="#000080">); </font><font color="#008000"><i>{ get current int. procedure. }
   </i></font>setintvec<font color="#000080">(</font><font color="#800000">$1C</font><font color="#000080">, @</font>count<font color="#000080">);   </font><font color="#008000"><i>{ replace it with our procedure. }
   </i></font>readln<font color="#000080">;
   </font>setintvec<font color="#000080">(</font><font color="#800000">$1C</font><font color="#000080">, @</font>intsave<font color="#000080">); </font><font color="#008000"><i>{ save the regular int. procedure back }
   </i></font>writeln<font color="#000080">(</font>counter<font color="#000080">, </font><font color="#800000">' timer ticks have passed.'</font><font color="#000080">);
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>We will now describe what <font color="#FF0000"><b>is </b></font>different here<font color="#000080">....

</font>getintvec<font color="#000080">() </font><font color="#FF0000"><b>is </b></font>a TP DOS <font color="#FF0000"><b>unit function </b></font>which pulls the <font color="#FF0000"><b>procedure </b></font>currently
  defined <font color="#FF0000"><b>on </b></font>that interrupt<font color="#000080">.
</font>setintvec<font color="#000080">() </font><font color="#FF0000"><b>is </b></font>a TP DOS <font color="#FF0000"><b>unit function </b></font>that resets the <font color="#FF0000"><b>function </b></font>defined by
  the interrupt<font color="#000080">.
</font>The interrupt keyword must be placed <font color="#FF0000"><b>on </b></font>the <font color="#FF0000"><b>procedure </b></font>definition<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>the
  <font color="#FF0000"><b>procedure </b></font>definition must be defined <font color="#FF0000"><b>as far</b></font><font color="#000080">, </font>like you see<font color="#000080">.

</font>A word <font color="#FF0000"><b>of </b></font>note <font color="#FF0000"><b>for </b></font>a <font color="#FF0000"><b>procedure </b></font>defined <font color="#FF0000"><b>as </b></font>an interrupt<font color="#000080">...</font>the original
interrupt <font color="#FF0000"><b>procedure </b></font>must be called within that interrupt <font color="#FF0000"><b>procedure</b></font><font color="#000080">.  </font>The
<font color="#FF0000"><b>inline</b></font><font color="#000080">(</font><font color="#800000">$9C</font><font color="#000080">) </font>seems <font color="#FF0000"><b>to </b></font>also be a required element<font color="#000080">.

</font>NOTE<font color="#000080">: </font>Hooking an interrupt <font color="#FF0000"><b>is </b></font>essentially a dangerous proposition<font color="#000080">, </font><font color="#FF0000"><b>to </b></font>a
degree<font color="#000080">.  </font>Be sure that you are careful <font color="#FF0000"><b>and </b></font>learn what happens <font color="#FF0000"><b>on </b></font>each
interrupt <font color="#FF0000"><b>and </b></font>know what the interrupt does before you <font color="#FF0000"><b>try to </b></font>hook it<font color="#000080">.
</font>Doing this actually CHANGES the hardware behavior <font color="#FF0000"><b>of </b></font>your system<font color="#000080">.
</font><font color="#FF0000"><b>If </b></font>attempting <font color="#FF0000"><b>to </b></font>hook an interrupt causes the system <font color="#FF0000"><b>to </b></font>behave adversely<font color="#000080">,
</font>STOP the <font color="#FF0000"><b>program </b></font>right there <font color="#000080">(</font>reboot the system even<font color="#000080">), </font><font color="#FF0000"><b>and do not </b></font>attempt
the code again <font color="#FF0000"><b>until </b></font>you are aware <font color="#FF0000"><b>of </b></font>what exactly happened <font color="#FF0000"><b>and </b></font>what <font color="#FF0000"><b>is </b></font>the
right thing <font color="#FF0000"><b>to do to </b></font>accomplish what you want<font color="#000080">.  </font><font color="#FF0000"><b>For </b></font>example<font color="#000080">, </font>I once tried
hooking a replacement <font color="#FF0000"><b>procedure on </b></font>the interrupt <font color="#FF0000"><b>for </b></font>the hard disk<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>I
had garbled output from the directory commands <font color="#FF0000"><b>until </b></font>I rebooted<font color="#000080">....

</font>Basically<font color="#000080">, </font>BE VERY CAREFUL <font color="#FF0000"><b>IN </b></font>HOOKING INTERRUPTS<font color="#000080">.

</font>Calling Software Interrupt Procedures
<font color="#000080">=====================================
</font>The system <font color="#000080">(</font>hardware <font color="#FF0000"><b>and </b></font>operating system<font color="#000080">) </font>has varied software interrupts
which may be called <font color="#FF0000"><b>to </b></font>perform certain functions <font color="#FF0000"><b>in </b></font>the system<font color="#000080">.  </font>This <font color="#FF0000"><b>is
</b></font>how most <font color="#FF0000"><b>of </b></font>the <font color="#FF0000"><b>file </b></font>access works <font color="#FF0000"><b>in </b></font>the other functions <font color="#FF0000"><b>of </b></font>the DOS <font color="#FF0000"><b>unit</b></font><font color="#000080">,
</font>such <font color="#FF0000"><b>as </b></font>assign<font color="#000080">, </font>reset<font color="#000080">, </font>rewrite<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>close<font color="#000080">; </font><font color="#FF0000"><b>for </b></font>example<font color="#000080">.

</font>The <font color="#FF0000"><b>record </b></font>registers <font color="#FF0000"><b>or </b></font>tregisters are defined <font color="#FF0000"><b>in </b></font>the DOS <font color="#FF0000"><b>unit or </b></font>WinDOS
<font color="#FF0000"><b>unit </b></font>respectively<font color="#000080">. </font>It looks like<font color="#000080">:

</font><font color="#FF0000"><b>type
  </b></font>registers <font color="#000080">= </font><font color="#FF0000"><b>record
    case </b></font>integer <font color="#FF0000"><b>of
      </b></font><font color="#800000">0</font><font color="#000080">: (</font>AX<font color="#000080">, </font>BX<font color="#000080">, </font>CX<font color="#000080">, </font>DX<font color="#000080">, </font>BP<font color="#000080">, </font>SI<font color="#000080">, </font>DI<font color="#000080">, </font>DS<font color="#000080">, </font>ES<font color="#000080">, </font>Flags<font color="#000080">: </font>Word<font color="#000080">);
      </font><font color="#800000">1</font><font color="#000080">: (</font>AL<font color="#000080">, </font>AH<font color="#000080">, </font>BL<font color="#000080">, </font>BH<font color="#000080">, </font>CL<font color="#000080">, </font>CH<font color="#000080">, </font>DL<font color="#000080">, </font>DH<font color="#000080">: </font>byte<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font>This <font color="#FF0000"><b>is </b></font>considered a variant <font color="#FF0000"><b>record</b></font><font color="#000080">, </font>which may be used <font color="#FF0000"><b>to </b></font>discriminate
the latter part <font color="#FF0000"><b>of </b></font>the field <font color="#FF0000"><b>if </b></font>data dictates it<font color="#000080">.  </font><font color="#FF0000"><b>If </b></font>you are familiar
<font color="#FF0000"><b>with </b></font>the <font color="#FF0000"><b>assembler </b></font>language<font color="#000080">, </font>you should recognize the fields from the
<font color="#FF0000"><b>record</b></font><font color="#000080">.

</font>Here <font color="#FF0000"><b>is </b></font>a sample <font color="#FF0000"><b>program</b></font><font color="#000080">, </font>which holds an example <font color="#FF0000"><b>of </b></font>a software interrupt
call<font color="#000080">.  </font><font color="#FF0000"><b>In </b></font>this <font color="#FF0000"><b>case</b></font><font color="#000080">, </font>the <font color="#FF0000"><b>program is </b></font>calling <font color="#FF0000"><b>function </b></font><font color="#800000">9 </font><font color="#000080">(?) </font><font color="#FF0000"><b>of </b></font>interrupt
<font color="#800000">$21</font><font color="#000080">, </font>which involves writing a <font color="#FF0000"><b>string out </b></font>via regular BIOS calls <font color="#000080">(</font>this <font color="#FF0000"><b>is
</b></font>what TP does when it writes <font color="#FF0000"><b>out </b></font>a <font color="#FF0000"><b>string</b></font><font color="#000080">).  </font>Note the conversion <font color="#FF0000"><b>of </b></font>the
<font color="#FF0000"><b>pascal string to </b></font>a blocked <font color="#FF0000"><b>array string</b></font><font color="#000080">.  </font>A <font color="#FF0000"><b>string </b></font>must <font color="#FF0000"><b>end with </b></font>a <font color="#000080">&quot;</font><font color="#800000">$</font><font color="#000080">&quot;
</font>when using this <font color="#FF0000"><b>function</b></font><font color="#000080">.

</font><font color="#FF0000"><b>program </b></font>writetest<font color="#000080">; </font><font color="#FF0000"><b>uses </b></font>dos<font color="#000080">;

  </font><font color="#FF0000"><b>type
    </b></font>strtype <font color="#000080">= </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>char<font color="#000080">;

  </font><font color="#FF0000"><b>procedure </b></font>writestring<font color="#000080">(</font>astring<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">);
    </font><font color="#FF0000"><b>var
      </b></font>tstr<font color="#000080">: </font>strtype<font color="#000080">;
      </font>i<font color="#000080">: </font>byte<font color="#000080">;
      </font>regs<font color="#000080">: </font>registers<font color="#000080">;
    </font><font color="#FF0000"><b>begin
      </b></font>i <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
      </font><font color="#FF0000"><b>repeat
        </b></font>tstr<font color="#000080">[</font>i<font color="#000080">] := </font>astring<font color="#000080">[</font>i<font color="#000080">];
        </font>inc<font color="#000080">(</font>i<font color="#000080">);
      </font><font color="#FF0000"><b>until </b></font>i <font color="#000080">= </font>length<font color="#000080">(</font>astring<font color="#000080">);
      </font>astring<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">] := </font><font color="#800000">'$'</font><font color="#000080">; 

      </font>Regs<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">9</font><font color="#000080">;
      </font>Regs<font color="#000080">.</font>Ds <font color="#000080">:= </font>Seg<font color="#000080">(</font>astring<font color="#000080">);
      </font>Regs<font color="#000080">.</font>Dx <font color="#000080">:= </font>Ofs<font color="#000080">(</font>astring<font color="#000080">);
      </font>intr<font color="#000080">(</font><font color="#800000">$21</font><font color="#000080">, </font>regs<font color="#000080">);  </font><font color="#008000"><i>{call interrupt $21 using regs register set }
    </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>begin
    </b></font>writestring<font color="#000080">(</font><font color="#800000">'Hello all!'</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>Amazingly<font color="#000080">, </font>this <font color="#FF0000"><b>program is </b></font><font color="#800000">304 </font>bytes smaller <font color="#FF0000"><b>as </b></font>an EXE than the
equivalent <font color="#FF0000"><b>program  </b></font>listed below written using exclusively the TP write
<font color="#FF0000"><b>procedure</b></font><font color="#000080">...</font>remember<font color="#000080">, </font>the most efficient code <font color="#FF0000"><b>is </b></font>USUALLY the code <font color="#FF0000"><b>with
</b></font>the shortest <font color="#800000"># </font><font color="#FF0000"><b>of </b></font>lines<font color="#000080">, </font>but <font color="#FF0000"><b>not </b></font>ALWAYS<font color="#000080">.

</font><font color="#FF0000"><b>program </b></font>writetest1<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>write<font color="#000080">(</font><font color="#800000">'Hello all!'</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>This <font color="#FF0000"><b>program </b></font>also introduces a few new <font color="#FF0000"><b>function </b></font>calls<font color="#000080">.  </font>Intr<font color="#000080">() </font><font color="#FF0000"><b>is </b></font>a
<font color="#FF0000"><b>Pascal function in </b></font>the DOS <font color="#FF0000"><b>unit </b></font>which executes a <font color="#FF0000"><b>function </b></font>call<font color="#000080">.  </font>It <font color="#FF0000"><b>is
</b></font>called like the example <font color="#FF0000"><b>program</b></font><font color="#000080">.

</font>Memory addresses<font color="#000080">, </font><font color="#FF0000"><b>as </b></font>you may have already seen from following pointers
using the debugger<font color="#000080">, </font>are <font color="#FF0000"><b>set </b></font>up <font color="#FF0000"><b>in </b></font>a <font color="#800000">20</font><font color="#000080">-</font>bit segment<font color="#000080">/</font>offset manner <font color="#000080">(</font><font color="#800000">20</font><font color="#000080">-</font>bit
memory <font color="#000080">= </font><font color="#800000">1024</font>KB addressable <font color="#000080">-- </font>they did this <font color="#FF0000"><b>for </b></font>the original <font color="#800000">8088's...).
</font>Seg<font color="#000080">() </font>shows the memory segment <font color="#FF0000"><b>of </b></font>any variable you place <font color="#FF0000"><b>in </b></font>there<font color="#000080">.
</font>Ofs<font color="#000080">() </font>shows the memory offset <font color="#FF0000"><b>of </b></font>any variable you place <font color="#FF0000"><b>in </b></font>there<font color="#000080">.
</font>Addr<font color="#000080">() </font>shows the complete memory address <font color="#FF0000"><b>of </b></font>any variable you place <font color="#FF0000"><b>in
</b></font>there<font color="#000080">.

</font>Consequently<font color="#000080">, </font>we may also use the <font color="#FF0000"><b>function </b></font>MsDos<font color="#000080">() </font><font color="#FF0000"><b>in </b></font>this <font color="#FF0000"><b>case to </b></font>replace
the Intr<font color="#000080">() </font>call above<font color="#000080">.  </font>MsDos<font color="#000080">() </font><font color="#FF0000"><b>is </b></font>an Intr<font color="#000080">() </font>call <font color="#FF0000"><b>to </b></font>interrupt <font color="#800000">$21 </font><font color="#000080">(</font>the
DOS operating system control interrupt<font color="#000080">).

</font>Conditional Compiler Compilation
<font color="#000080">================================
</font>Let us first define a few more compiler directives <font color="#FF0000"><b>for </b></font>your collection <font color="#FF0000"><b>of
</b></font>knowledge<font color="#000080">....</font>defaults marked <font color="#FF0000"><b>with </b></font><font color="#000080">~

                + </font>state                      <font color="#000080">- </font>state
                <font color="#000080">--------                    ----------
</font><font color="#800000">$</font>N               FPU <font color="#FF0000"><b>on                     </b></font><font color="#000080">~</font>FPU off
<font color="#800000">$</font>G               <font color="#800000">286 </font>code gen<font color="#000080">. </font><font color="#FF0000"><b>on           </b></font><font color="#000080">~</font><font color="#800000">286 </font>code gen<font color="#000080">. </font>off
<font color="#800000">$E              </font><font color="#000080">~</font>FPU emulation <font color="#FF0000"><b>on            </b></font>FPU emulation off

These are compiler directives often used conditionally<font color="#000080">.  </font>Conditional
compilation <font color="#FF0000"><b>is </b></font>essentially another language<font color="#000080">, </font>independent <font color="#FF0000"><b>of </b></font>the actual
language code<font color="#000080">.  </font>Identifiers may <font color="#FF0000"><b>not </b></font>be used from code <font color="#FF0000"><b>in </b></font>compiler
directives <font color="#FF0000"><b>and </b></font>vice versa<font color="#000080">.  </font>Let<font color="#800000">'s look at a few of the pertinent
</font>constants that <font color="#FF0000"><b>Pascal </b></font>defines <font color="#FF0000"><b>in </b></font>relation <font color="#FF0000"><b>to </b></font>this<font color="#000080">....

</font>MSDOS <font color="#000080">=&gt; </font>boolean<font color="#000080">: </font>indicates that the operating system <font color="#FF0000"><b>is </b></font>MS<font color="#000080">-</font>DOS <font color="#FF0000"><b>or </b></font>PC<font color="#000080">-</font>DOS
CPU87 <font color="#000080">=&gt; </font>boolean<font color="#000080">: </font>true <font color="#FF0000"><b>if </b></font>there <font color="#FF0000"><b>is </b></font>a math coprocessor <font color="#000080">(</font>FPU<font color="#000080">) </font>present<font color="#000080">.

</font>The only construct you will typically see <font color="#FF0000"><b>is </b></font>an <font color="#FF0000"><b>if then or if then else</b></font><font color="#000080">.

</font>The compiler directives I listed above are most commonly used <font color="#FF0000"><b>with </b></font>this
<font color="#FF0000"><b>type of </b></font>situation<font color="#000080">.  </font>There are additional floating point data types available
called comp<font color="#000080">, </font>single<font color="#000080">, </font>double<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>extended<font color="#000080">; </font>which are usable via the FPU
generally<font color="#000080">.  </font>The definitions <font color="#FF0000"><b>of </b></font>these variables may be defined using the
conditional compiler directives<font color="#000080">....

</font>The conditional compiler directives we need <font color="#FF0000"><b>to </b></font>know are<font color="#000080">:

</font><font color="#008000"><i>{$IFDEF &lt;name&gt;}                                </i></font><font color="#FF0000"><b>If </b></font>item defined
<font color="#008000"><i>{$IFNDEF &lt;name&gt; }                              </i></font><font color="#FF0000"><b>if </b></font>item <font color="#FF0000"><b>not </b></font>defined 
<font color="#008000"><i>{$ELSE}                                        </i></font><font color="#FF0000"><b>ELSE </b></font>directive
<font color="#008000"><i>{$IFOPT &lt;compiler directive&gt;}                  </i></font><font color="#FF0000"><b>If </b></font>compiler opt<font color="#000080">..
</font><font color="#008000"><i>{$ENDIF}                                       </i></font><font color="#FF0000"><b>END IF </b></font>STATEMENT
<font color="#008000"><i>{$DEFINE &lt;name&gt;}                               </i></font>define a statement
<font color="#008000"><i>{$UNDEF &lt;name&gt;}                                </i></font>undefine a statement<font color="#000080">.

</font>Functionally<font color="#000080">, </font>these work <font color="#FF0000"><b>and </b></font>compile the source code <font color="#FF0000"><b>if </b></font>certain things are
true<font color="#000080">.  </font><font color="#FF0000"><b>For </b></font>example<font color="#000080">, </font><font color="#008000"><i>{$IFOPT N+} </i></font><font color="#000080">&lt;</font>some code<font color="#000080">&gt; </font><font color="#008000"><i>{$ENDIF} </i></font><font color="#FF0000"><b>in </b></font>some code will make
it so the code represented by <font color="#000080">&lt;</font>some code<font color="#000080">&gt; </font>will only be used <font color="#FF0000"><b>if </b></font>N<font color="#000080">+ </font><font color="#FF0000"><b>is </b></font>defined<font color="#000080">.

</font>Here <font color="#FF0000"><b>is </b></font>a short example <font color="#FF0000"><b>program </b></font>using conditional compiler directives<font color="#000080">....

</font><font color="#FF0000"><b>program </b></font>condcomptest<font color="#000080">;

  </font><font color="#FF0000"><b>begin
    </b></font><font color="#008000"><i>{$IFDEF CPU87}
      </i></font>writeln<font color="#000080">(</font><font color="#800000">'There is a math coprocessor in the system.'</font><font color="#000080">);
    </font><font color="#008000"><i>{$ELSE}
      </i></font>writeln<font color="#000080">(</font><font color="#800000">'There is not a math coprocessor in the system.'</font><font color="#000080">);
    </font><font color="#008000"><i>{$ENDIF}
  </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>You will notice that only ONE writeln statement will execute itself<font color="#000080">.  </font>The
dependence will be whether a FPU exists <font color="#FF0000"><b>in </b></font>your system<font color="#000080">.

</font>Practice Programming Problem <font color="#800000">#20
</font><font color="#000080">================================
</font>Write a <font color="#FF0000"><b>program </b></font>which will count the number <font color="#FF0000"><b>of </b></font>keystrokes a user presses
<font color="#FF0000"><b>in </b></font>a period <font color="#FF0000"><b>of </b></font><font color="#800000">15 </font>seconds<font color="#000080">.  </font>Use proper programming interest <font color="#FF0000"><b>in </b></font>this
<font color="#FF0000"><b>program</b></font><font color="#000080">, </font><font color="#FF0000"><b>and </b></font>be sure <font color="#FF0000"><b>to </b></font>be friendly <font color="#FF0000"><b>to </b></font>the user <font color="#FF0000"><b>with </b></font>this <font color="#FF0000"><b>program</b></font><font color="#000080">.

</font>Background information<font color="#000080">.
   </font>Keyboard interrupt <font color="#FF0000"><b>is </b></font><font color="#800000">$09</font><font color="#000080">.  </font>Interrupt occurs <font color="#800000">2 </font>times <font color="#FF0000"><b>for </b></font>every
   key pressed<font color="#000080">.

</font>Notes<font color="#000080">: </font>Unfortunately<font color="#000080">, </font><font color="#FF0000"><b>in </b></font>all attempts I<font color="#800000">'ve made, to make it TERMINATE
</font>exactly <font color="#FF0000"><b>on </b></font><font color="#800000">15 </font>seconds<font color="#000080">, </font>it would cause a nasty problem<font color="#000080">.  </font>The <font color="#FF0000"><b>program </b></font>will
have <font color="#FF0000"><b>to </b></font>read <font color="#FF0000"><b>in </b></font>at least one key after termination<font color="#000080">.  </font><font color="#FF0000"><b>Do not </b></font>worry about
this<font color="#000080">.

</font>Next Time
<font color="#000080">=========
</font>We use the BGI<font color="#000080">.  </font>Write comments <font color="#FF0000"><b>to </b></font>ggrotz<font color="#000080">@</font><font color="#800000">2</font>sprint<font color="#000080">.</font>net<font color="#000080">.




</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to TUTOR SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0023.PAS">Original</a><b>]</b></p></body>
</html>
