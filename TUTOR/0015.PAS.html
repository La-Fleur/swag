<html>
<head><title> "Stacks and Queues" by GLENN GROTZINGER</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to TUTOR SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0015.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#000000">                       Turbo <font color="#FF0000"><b>Pascal for </b></font>DOS Tutorial
                            by Glenn Grotzinger
                        Part <font color="#800000">12</font><font color="#000080">: </font>Stacks <font color="#FF0000"><b>and </b></font>Queues
                 copyright<font color="#000080">(</font>c<font color="#000080">) </font><font color="#800000">1995</font><font color="#000080">-</font><font color="#800000">96 </font>by Glenn Grotzinger

Solution <font color="#FF0000"><b>to </b></font>part <font color="#800000">11's problem....

</font><font color="#FF0000"><b>program </b></font>part11<font color="#000080">; </font><font color="#FF0000"><b>uses </b></font>dos<font color="#000080">;

  </font><font color="#008000"><i>{ Lists files and data in a ZIP file. }

  </i></font><font color="#FF0000"><b>type
    </b></font>ziplocfileheader <font color="#000080">= </font><font color="#FF0000"><b>record
      </b></font>zipver<font color="#000080">: </font>integer<font color="#000080">;
      </font>bitfield<font color="#000080">: </font>word<font color="#000080">;
      </font>compmethod<font color="#000080">: </font>integer<font color="#000080">;
      </font>packtime<font color="#000080">: </font>longint<font color="#000080">;
      </font>crc32<font color="#000080">: </font>longint<font color="#000080">;
      </font>compsize<font color="#000080">: </font>longint<font color="#000080">;
      </font>uncompsize<font color="#000080">: </font>longint<font color="#000080">;
      </font>filelen<font color="#000080">: </font>integer<font color="#000080">;
      </font>xtralen<font color="#000080">: </font>integer<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

    </font>zipcds <font color="#000080">= </font><font color="#FF0000"><b>record
      </b></font>ver<font color="#000080">: </font>byte<font color="#000080">;
      </font>hostos<font color="#000080">: </font>byte<font color="#000080">;
      </font>verxtr<font color="#000080">: </font>byte<font color="#000080">;
      </font>targos<font color="#000080">: </font>byte<font color="#000080">;
      </font>bitfield<font color="#000080">: </font>word<font color="#000080">;
      </font>compmethod<font color="#000080">: </font>integer<font color="#000080">;
      </font>packtime<font color="#000080">: </font>longint<font color="#000080">;
      </font>crc32<font color="#000080">: </font>longint<font color="#000080">;
      </font>compsize<font color="#000080">: </font>longint<font color="#000080">;
      </font>uncompsize<font color="#000080">: </font>longint<font color="#000080">;
      </font>filelen<font color="#000080">: </font>integer<font color="#000080">;
      </font>xtralen<font color="#000080">: </font>integer<font color="#000080">;
      </font>comtlen<font color="#000080">: </font>integer<font color="#000080">;
      </font>disknum<font color="#000080">: </font>integer<font color="#000080">;
      </font>intattr<font color="#000080">: </font>integer<font color="#000080">;
      </font>extattr<font color="#000080">: </font>longint<font color="#000080">;
      </font>roffset<font color="#000080">: </font>longint<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

    </font>endcdsheader <font color="#000080">= </font><font color="#FF0000"><b>record
      </b></font>numdisk<font color="#000080">: </font>integer<font color="#000080">;
      </font>numdiska<font color="#000080">: </font>integer<font color="#000080">;
      </font>numfiles<font color="#000080">: </font>integer<font color="#000080">;
      </font>entries<font color="#000080">: </font>integer<font color="#000080">;
      </font>size<font color="#000080">: </font>longint<font color="#000080">;
      </font>ofs<font color="#000080">: </font>longint<font color="#000080">;
      </font>comtlength<font color="#000080">: </font>integer<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>var
    </b></font>zipfile<font color="#000080">: </font><font color="#FF0000"><b>file</b></font><font color="#000080">;
    </font>outfile<font color="#000080">: </font>text<font color="#000080">;
    </font>locfile<font color="#000080">: </font>ziplocfileheader<font color="#000080">;
    </font>dirstr<font color="#000080">: </font>zipcds<font color="#000080">;
    </font>endcds<font color="#000080">: </font>endcdsheader<font color="#000080">;
    </font>filechar<font color="#000080">: </font>char<font color="#000080">;
    </font>filelength<font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">20</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>char<font color="#000080">;
    </font>id<font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">4</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>char<font color="#000080">;
    </font>i<font color="#000080">: </font>integer<font color="#000080">;
    </font>totsize<font color="#000080">, </font>compsize<font color="#000080">, </font>uncompsize<font color="#000080">: </font>longint<font color="#000080">;
    </font>param1<font color="#000080">, </font>param2<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ Example structure of a ZIP file.
      localheader1
      loccompresseddata1
      localheader2
      loccompresseddata2
      centraldirectorystructure1
      centraldirectorystructure2
      endofcentraldirectorystructure }

  </i></font><font color="#FF0000"><b>procedure </b></font>readzip<font color="#000080">;

    </font><font color="#008000"><i>{ ZIP is a random data binary file.  We read the ID to check it, then
      differentiate it from there.  We also devise a test of whether the
      &quot;ZIP file&quot; is a valid ZIP file here. }

    </i></font><font color="#FF0000"><b>begin
      </b></font>blockread<font color="#000080">(</font>zipfile<font color="#000080">, </font>id<font color="#000080">, </font>sizeof<font color="#000080">(</font>id<font color="#000080">));
      </font>totsize <font color="#000080">:= </font>totsize <font color="#000080">+ </font><font color="#800000">4</font><font color="#000080">; </font><font color="#008000"><i>{ totsize is a seek index }
      </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>id<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] &lt;&gt; </font><font color="#800000">'P'</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>id<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">] &lt;&gt; </font><font color="#800000">'K'</font><font color="#000080">) </font><font color="#FF0000"><b>then
        begin
          </b></font>writeln<font color="#000080">(</font><font color="#800000">'Corrupted ZIP file, or not a ZIP file.'</font><font color="#000080">);
          </font>halt<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>case </b></font>id<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">] </font><font color="#FF0000"><b>of
        </b></font><font color="#800000">#05</font><font color="#000080">: </font><font color="#FF0000"><b>begin
               </b></font>blockread<font color="#000080">(</font>zipfile<font color="#000080">, </font>endcds<font color="#000080">, </font>sizeof<font color="#000080">(</font>endcds<font color="#000080">));
               </font>totsize <font color="#000080">:= </font>totsize <font color="#000080">+ </font>sizeof<font color="#000080">(</font>endcds<font color="#000080">);
             </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
        </font><font color="#800000">#03</font><font color="#000080">: </font><font color="#FF0000"><b>begin
               </b></font>blockread<font color="#000080">(</font>zipfile<font color="#000080">, </font>locfile<font color="#000080">, </font>sizeof<font color="#000080">(</font>locfile<font color="#000080">));
               </font>totsize <font color="#000080">:= </font>totsize <font color="#000080">+ </font>sizeof<font color="#000080">(</font>locfile<font color="#000080">);
             </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
        </font><font color="#800000">#01</font><font color="#000080">: </font><font color="#FF0000"><b>begin
               </b></font>blockread<font color="#000080">(</font>zipfile<font color="#000080">, </font>dirstr<font color="#000080">, </font>sizeof<font color="#000080">(</font>dirstr<font color="#000080">));
               </font>totsize <font color="#000080">:= </font>totsize <font color="#000080">+ </font>sizeof<font color="#000080">(</font>dirstr<font color="#000080">);
             </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>function </b></font>zero<font color="#000080">(</font>int<font color="#000080">: </font>integer<font color="#000080">):</font><font color="#FF0000"><b>string</b></font><font color="#000080">;
    </font><font color="#008000"><i>{places zero on the beginning of a number if it's &lt; 10 }
    </i></font><font color="#FF0000"><b>var
      </b></font>strng<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
      </font>numerr<font color="#000080">: </font>integer<font color="#000080">;
    </font><font color="#FF0000"><b>begin
      </b></font>str<font color="#000080">(</font>int<font color="#000080">, </font>strng<font color="#000080">);
      </font><font color="#FF0000"><b>if </b></font>int <font color="#000080">&lt; </font><font color="#800000">10 </font><font color="#FF0000"><b>then
        </b></font>strng <font color="#000080">:= </font><font color="#800000">'0' </font><font color="#000080">+ </font>strng<font color="#000080">;
      </font>zero <font color="#000080">:= </font>strng<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>function </b></font>strip<font color="#000080">(</font>str<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">):</font><font color="#FF0000"><b>string</b></font><font color="#000080">;

    </font><font color="#008000"><i>{ removes null characters from random-read filename }

    </i></font><font color="#FF0000"><b>var
      </b></font>tstr<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
      </font>i<font color="#000080">: </font>integer<font color="#000080">;
    </font><font color="#FF0000"><b>begin
      </b></font>tstr <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
      </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>length<font color="#000080">(</font>str<font color="#000080">) </font><font color="#FF0000"><b>do
        if </b></font>str<font color="#000080">[</font>i<font color="#000080">] &lt;&gt; </font><font color="#800000">#0 </font><font color="#FF0000"><b>then
          </b></font>tstr <font color="#000080">:= </font>tstr <font color="#000080">+ </font>str<font color="#000080">[</font>i<font color="#000080">];
      </font>strip <font color="#000080">:= </font>tstr<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>function </b></font>exist<font color="#000080">(</font>filename<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">):</font>boolean<font color="#000080">;
    </font><font color="#008000"><i>{ file existence test }
    </i></font><font color="#FF0000"><b>var
      </b></font>thefile<font color="#000080">: </font>text<font color="#000080">;
    </font><font color="#FF0000"><b>begin
      </b></font>assign<font color="#000080">(</font>thefile<font color="#000080">, </font>filename<font color="#000080">);
      </font><font color="#008000"><i>{$I-}</i></font>reset<font color="#000080">(</font>thefile<font color="#000080">);</font><font color="#008000"><i>{$I+}
      </i></font><font color="#FF0000"><b>if </b></font>IOResult <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
        </b></font>exist <font color="#000080">:= </font>false
      <font color="#FF0000"><b>else
        begin
          </b></font>exist <font color="#000080">:= </font>true<font color="#000080">;
          </font>close<font color="#000080">(</font>thefile<font color="#000080">);
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>procedure </b></font>header<font color="#000080">(</font>filename<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">);
    </font><font color="#008000"><i>{ writes header of data }
    </i></font><font color="#FF0000"><b>var
      </b></font>s<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>begin
      </b></font>writeln<font color="#000080">(</font>outfile<font color="#000080">, </font><font color="#800000">'Files contained in '</font><font color="#000080">:</font><font color="#800000">41</font><font color="#000080">, </font>filename<font color="#000080">);
      </font>writeln<font color="#000080">(</font>outfile<font color="#000080">);
      </font>writeln<font color="#000080">(</font>outfile<font color="#000080">, </font><font color="#800000">'NAME'</font><font color="#000080">, </font><font color="#800000">'COMP-SIZE'</font><font color="#000080">:</font><font color="#800000">21</font><font color="#000080">, </font><font color="#800000">'DATE'</font><font color="#000080">:</font><font color="#800000">9</font><font color="#000080">,</font><font color="#800000">'TIME'</font><font color="#000080">:</font><font color="#800000">12</font><font color="#000080">,
              </font><font color="#800000">'UNCOMP-SIZE'</font><font color="#000080">:</font><font color="#800000">15</font><font color="#000080">, </font><font color="#800000">'COMP-METHOD'</font><font color="#000080">:</font><font color="#800000">13</font><font color="#000080">);
      </font>fillchar<font color="#000080">(</font>s<font color="#000080">, </font><font color="#800000">75</font><font color="#000080">, </font><font color="#800000">'-'</font><font color="#000080">);
      </font><font color="#008000"><i>{ fillchar fills a set of contiguous bytes of any type defined by
        the position s is in, for x number of spaces (75), with a char-
        acter represented by - }
      </i></font>s<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">] := </font><font color="#800000">#74</font><font color="#000080">;  </font><font color="#008000"><i>{ set length byte }
      </i></font>writeln<font color="#000080">(</font>outfile<font color="#000080">, </font>s<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>procedure </b></font>footer<font color="#000080">(</font>compsize<font color="#000080">, </font>uncompsize<font color="#000080">: </font>longint<font color="#000080">);
    </font><font color="#008000"><i>{ write footer of data }
    </i></font><font color="#FF0000"><b>var
      </b></font>s<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>begin
      </b></font>fillchar<font color="#000080">(</font>s<font color="#000080">, </font><font color="#800000">75</font><font color="#000080">, </font><font color="#800000">'-'</font><font color="#000080">);
      </font>s<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">] := </font><font color="#800000">#74</font><font color="#000080">;
      </font>writeln<font color="#000080">(</font>outfile<font color="#000080">, </font>s<font color="#000080">);
      </font>writeln<font color="#000080">(</font>outfile<font color="#000080">, </font>compsize<font color="#000080">:</font><font color="#800000">22</font><font color="#000080">, </font>uncompsize<font color="#000080">:</font><font color="#800000">34</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font>outfile<font color="#000080">);
      </font>writeln<font color="#000080">(</font>outfile<font color="#000080">, </font>endcds<font color="#000080">.</font>numfiles<font color="#000080">, </font><font color="#800000">' files; Effective compression'</font><font color="#000080">,
                       </font><font color="#800000">' ratio: '</font><font color="#000080">, (</font>compsize <font color="#000080">/ </font>uncompsize<font color="#000080">)*</font><font color="#800000">100 </font><font color="#000080">:</font><font color="#800000">0</font><font color="#000080">:</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">'%'</font><font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>procedure </b></font>writehelp<font color="#000080">;
    </font><font color="#008000"><i>{ help for incorrect usage }
    </i></font><font color="#FF0000"><b>begin
      </b></font>writeln<font color="#000080">(</font><font color="#800000">'ZIPLIST &lt;zipfile&gt; &lt;datafile&gt;'</font><font color="#000080">);
      </font>halt<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>procedure </b></font>writedata<font color="#000080">(</font>locfile<font color="#000080">: </font>ziplocfileheader<font color="#000080">);
    </font><font color="#FF0000"><b>var
      </b></font>dt<font color="#000080">: </font>datetime<font color="#000080">;
    </font><font color="#FF0000"><b>begin
      </b></font>unpacktime<font color="#000080">(</font>locfile<font color="#000080">.</font>packtime<font color="#000080">, </font>dt<font color="#000080">);
      </font><font color="#008000"><i>{ this handles the MS-DOS time format }
      </i></font>writeln<font color="#000080">(</font>outfile<font color="#000080">, </font>strip<font color="#000080">(</font>filelength<font color="#000080">):</font><font color="#800000">12</font><font color="#000080">, </font>locfile<font color="#000080">.</font>compsize<font color="#000080">:</font><font color="#800000">10</font><font color="#000080">,
      </font>zero<font color="#000080">(</font>dt<font color="#000080">.</font>month<font color="#000080">):</font><font color="#800000">7</font><font color="#000080">,</font><font color="#800000">'-'</font><font color="#000080">,</font>zero<font color="#000080">(</font>dt<font color="#000080">.</font>day<font color="#000080">),</font><font color="#800000">'-'</font><font color="#000080">,</font>dt<font color="#000080">.</font>year<font color="#000080">,
      </font>zero<font color="#000080">(</font>dt<font color="#000080">.</font>hour<font color="#000080">):</font><font color="#800000">6</font><font color="#000080">,</font><font color="#800000">':'</font><font color="#000080">, </font>zero<font color="#000080">(</font>dt<font color="#000080">.</font>min<font color="#000080">),
      </font>locfile<font color="#000080">.</font>uncompsize<font color="#000080">:</font><font color="#800000">10</font><font color="#000080">, </font>locfile<font color="#000080">.</font>compmethod<font color="#000080">:</font><font color="#800000">12</font><font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>begin
    if </b></font>paramcount <font color="#000080">&lt;&gt; </font><font color="#800000">2 </font><font color="#FF0000"><b>then  </b></font><font color="#008000"><i>{ incorrect parameters? }
      </i></font>writehelp<font color="#000080">;
    </font>totsize <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;</font>compsize <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;</font>uncompsize <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font>param1 <font color="#000080">:= </font>paramstr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
    </font>param2 <font color="#000080">:= </font>paramstr<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">);
    </font>assign<font color="#000080">(</font>zipfile<font color="#000080">, </font>param1<font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font>exist<font color="#000080">(</font>param1<font color="#000080">) = </font>false <font color="#FF0000"><b>then
      begin
        </b></font>writeln<font color="#000080">(</font>param1<font color="#000080">, </font><font color="#800000">' does not exist!'</font><font color="#000080">);
        </font>halt<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>reset<font color="#000080">(</font>zipfile<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
    </font>assign<font color="#000080">(</font>outfile<font color="#000080">, </font>param2<font color="#000080">);
    </font>rewrite<font color="#000080">(</font>outfile<font color="#000080">);

    </font>header<font color="#000080">(</font>param1<font color="#000080">);
    </font>readzip<font color="#000080">;

    </font><font color="#FF0000"><b>while </b></font>id<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">] = </font><font color="#800000">#03 </font><font color="#FF0000"><b>do
     </b></font><font color="#008000"><i>{ process local file headers and compressed data }
      </i></font><font color="#FF0000"><b>begin
        </b></font>blockread<font color="#000080">(</font>zipfile<font color="#000080">, </font>filelength<font color="#000080">, </font>locfile<font color="#000080">.</font>filelen<font color="#000080">);
        </font>compsize <font color="#000080">:= </font>compsize <font color="#000080">+ </font>locfile<font color="#000080">.</font>compsize<font color="#000080">;
        </font>uncompsize <font color="#000080">:= </font>uncompsize <font color="#000080">+ </font>locfile<font color="#000080">.</font>uncompsize<font color="#000080">;
        </font>writedata<font color="#000080">(</font>locfile<font color="#000080">);
        </font>totsize <font color="#000080">:= </font>totsize <font color="#000080">+ </font>locfile<font color="#000080">.</font>filelen<font color="#000080">;
        </font>totsize <font color="#000080">:= </font>totsize <font color="#000080">+ </font>locfile<font color="#000080">.</font>xtralen<font color="#000080">;
        </font>fillchar<font color="#000080">(</font>filelength<font color="#000080">, </font>sizeof<font color="#000080">(</font>filelength<font color="#000080">),</font><font color="#800000">#0</font><font color="#000080">);
        </font>seek<font color="#000080">(</font>zipfile<font color="#000080">, </font>totsize<font color="#000080">);
        </font>totsize <font color="#000080">:= </font>totsize <font color="#000080">+ </font>locfile<font color="#000080">.</font>compsize<font color="#000080">;
        </font>seek<font color="#000080">(</font>zipfile<font color="#000080">, </font>totsize<font color="#000080">);
        </font>readzip<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

    </font><font color="#FF0000"><b>while </b></font>id<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">] = </font><font color="#800000">#01 </font><font color="#FF0000"><b>do
      </b></font><font color="#008000"><i>{ process central directory structure }
      </i></font><font color="#FF0000"><b>begin
        </b></font>totsize <font color="#000080">:= </font>totsize <font color="#000080">+ </font>dirstr<font color="#000080">.</font>filelen<font color="#000080">;
        </font>seek<font color="#000080">(</font>zipfile<font color="#000080">, </font>totsize<font color="#000080">);
        </font>totsize <font color="#000080">:= </font>totsize <font color="#000080">+ </font>dirstr<font color="#000080">.</font>xtralen<font color="#000080">;
        </font>seek<font color="#000080">(</font>zipfile<font color="#000080">, </font>totsize<font color="#000080">);
        </font>readzip<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

    </font>footer<font color="#000080">(</font>compsize<font color="#000080">, </font>uncompsize<font color="#000080">);

    </font>writeln<font color="#000080">(</font>outfile<font color="#000080">);

    </font><font color="#008000"><i>{ handle ZIP comment }
    </i></font><font color="#FF0000"><b>if </b></font>endcds<font color="#000080">.</font>comtlength <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then
      </b></font>writeln<font color="#000080">(</font>outfile<font color="#000080">, </font><font color="#800000">'No comment in ZIP file.'</font><font color="#000080">)
    </font><font color="#FF0000"><b>else
      for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>endcds<font color="#000080">.</font>comtlength <font color="#FF0000"><b>do
        begin
          </b></font>blockread<font color="#000080">(</font>zipfile<font color="#000080">, </font>filechar<font color="#000080">, </font>sizeof<font color="#000080">(</font>filechar<font color="#000080">));
          </font>write<font color="#000080">(</font>outfile<font color="#000080">, </font>filechar<font color="#000080">);
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    
    </font>close<font color="#000080">(</font>zipfile<font color="#000080">);
    </font>close<font color="#000080">(</font>outfile<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>Hello<font color="#000080">.  </font>Basically<font color="#000080">, </font>we are dealing <font color="#FF0000"><b>in </b></font>this part <font color="#FF0000"><b>with </b></font>specialized types <font color="#FF0000"><b>of
</b></font>data structures called stacks <font color="#FF0000"><b>and </b></font>queues<font color="#000080">.

</font>Stacks
<font color="#000080">======
</font>A stack <font color="#FF0000"><b>is </b></font>best analagous <font color="#FF0000"><b>to </b></font>a stack <font color="#FF0000"><b>of </b></font>papers <font color="#FF0000"><b>on </b></font>a desk<font color="#000080">, </font>only able <font color="#FF0000"><b>to
</b></font>either place a sheet <font color="#FF0000"><b>on </b></font>the top <font color="#FF0000"><b>of </b></font>the stack<font color="#000080">, </font><font color="#FF0000"><b>or </b></font>take a sheet off the
top <font color="#FF0000"><b>of </b></font>the stack<font color="#000080">.  </font>It <font color="#FF0000"><b>is </b></font>generally defined <font color="#FF0000"><b>as </b></font>a <font color="#FF0000"><b>record </b></font>format<font color="#000080">, </font>which
can take <font color="#FF0000"><b>on </b></font>the following<font color="#000080">:

</font>stack <font color="#000080">= </font><font color="#FF0000"><b>record
  </b></font>elements<font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font>maxstacksize<font color="#000080">] </font><font color="#FF0000"><b>of </b></font><font color="#000080">&lt;</font>whatever<font color="#000080">&gt;;
  </font>capacity<font color="#000080">: </font>integer<font color="#000080">; </font><font color="#008000"><i>{range of 0..maxstacksize}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font>It <font color="#FF0000"><b>is </b></font>best described <font color="#FF0000"><b>as </b></font>a last <font color="#FF0000"><b>in</b></font><font color="#000080">/ </font>first <font color="#FF0000"><b>out </b></font>data structure<font color="#000080">, </font>much like the
sheet <font color="#FF0000"><b>of </b></font>paper analogy<font color="#000080">.  </font>The elements <font color="#FF0000"><b>array </b></font>holds whatever information
we need<font color="#000080">, </font><font color="#FF0000"><b>while </b></font>capacity tells us how many elements are still <font color="#FF0000"><b>in </b></font>the <font color="#FF0000"><b>array</b></font><font color="#000080">.

</font>The best description I can use <font color="#FF0000"><b>for </b></font>this <font color="#FF0000"><b>and </b></font>queues <font color="#FF0000"><b>is </b></font>that it<font color="#800000">'s a limited
</font>defined access structure<font color="#000080">.

</font>I will now describe the basic actions <font color="#FF0000"><b>of </b></font>working <font color="#FF0000"><b>with </b></font>stacks<font color="#000080">.  </font>The best
way <font color="#FF0000"><b>to </b></font>think about coding this <font color="#FF0000"><b>is to </b></font>use the stack <font color="#FF0000"><b>of </b></font>paper <font color="#FF0000"><b>as </b></font>a view<font color="#000080">-
</font>point<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>using the sample stack <font color="#FF0000"><b>record </b></font>above<font color="#000080">.

</font><font color="#FF0000"><b>To </b></font>initialize <font color="#FF0000"><b>or </b></font>effectively kill a stack currently <font color="#FF0000"><b>in </b></font>usage <font color="#FF0000"><b>is to set
</b></font>capacity <font color="#FF0000"><b>to </b></font><font color="#800000">0.  </font>We can <font color="#FF0000"><b>do </b></font>this<font color="#000080">, </font>because all work <font color="#FF0000"><b>with </b></font>a stack ultimately
comes down <font color="#FF0000"><b>to </b></font>usage <font color="#FF0000"><b>of </b></font>capacity <font color="#FF0000"><b>as </b></font>an index<font color="#000080">.  </font><font color="#FF0000"><b>If </b></font>we have <font color="#800000">0 </font>sheets <font color="#FF0000"><b>of </b></font>paper
<font color="#FF0000"><b>on </b></font>an imaginary stack<font color="#000080">, </font>essentially<font color="#000080">, </font>the stack <font color="#FF0000"><b>is </b></font>empty<font color="#000080">.

</font>Now<font color="#000080">, </font>let<font color="#800000">'s add a sheet of paper to our imaginary stack.  We recognize that
</font>there <font color="#FF0000"><b>is </b></font>one more sheet <font color="#FF0000"><b>of </b></font>paper <font color="#FF0000"><b>on </b></font>the stack now<font color="#000080">.  </font><font color="#FF0000"><b>Then </b></font>we have <font color="#FF0000"><b>to </b></font>place
that sheet <font color="#FF0000"><b>on </b></font>the stack<font color="#000080">...</font>also<font color="#000080">, </font>we have <font color="#FF0000"><b>to </b></font>keep <font color="#FF0000"><b>in </b></font>mind <font color="#FF0000"><b>if </b></font>we have hit our
arbitrarily <font color="#FF0000"><b>set </b></font>limit <font color="#FF0000"><b>of </b></font>sheets <font color="#FF0000"><b>on </b></font>the stack<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>notify <font color="#FF0000"><b>of </b></font>such thing<font color="#000080">.

</font>What now<font color="#000080">, </font><font color="#FF0000"><b>if </b></font>we have <font color="#FF0000"><b>to </b></font>remove the sheet <font color="#FF0000"><b>of </b></font>paper from our imaginary stack
<font color="#FF0000"><b>of </b></font>paper<font color="#000080">?  </font>We would need <font color="#FF0000"><b>to </b></font>check <font color="#FF0000"><b>if </b></font>we had a sheet <font color="#FF0000"><b>of </b></font>paper <font color="#FF0000"><b>to </b></font>remove<font color="#000080">.
</font><font color="#FF0000"><b>Then </b></font>after that<font color="#000080">, </font>we would need <font color="#FF0000"><b>to </b></font>pull the sheet off <font color="#FF0000"><b>of </b></font>the stack<font color="#000080">, </font><font color="#FF0000"><b>then
</b></font>recognize that we removed the sheet<font color="#000080">.

</font>How <font color="#FF0000"><b>do </b></font>we recognize <font color="#FF0000"><b>if </b></font>we have a full stack <font color="#FF0000"><b>or </b></font>an empty stack<font color="#000080">?  </font>Look at the
value <font color="#FF0000"><b>of </b></font>capacity<font color="#000080">.  </font><font color="#FF0000"><b>If </b></font>it<font color="#800000">'s 0, then it'</font>s empty<font color="#000080">.  </font><font color="#FF0000"><b>If </b></font>it<font color="#800000">'s the value for the
</font>maximum capacity <font color="#FF0000"><b>of </b></font>the stack we decide<font color="#000080">, </font><font color="#FF0000"><b>then </b></font>we know it<font color="#800000">'s full.

</font>Basically<font color="#000080">, </font><font color="#FF0000"><b>in </b></font>the last four paragraphs<font color="#000080">, </font>I have<font color="#000080">, </font><font color="#FF0000"><b>in </b></font>discussing the actions
<font color="#FF0000"><b>of </b></font>working <font color="#FF0000"><b>with </b></font>stacks<font color="#000080">, </font>have given you all the pseudocode you need <font color="#FF0000"><b>to
</b></font>be able <font color="#FF0000"><b>to </b></font>come up <font color="#FF0000"><b>with </b></font>the code <font color="#FF0000"><b>to </b></font>work <font color="#FF0000"><b>with </b></font>a stack<font color="#000080">.

</font>It <font color="#FF0000"><b>is </b></font>basically good <font color="#FF0000"><b>to </b></font>develop all <font color="#FF0000"><b>of </b></font>these components <font color="#FF0000"><b>as </b></font>procedures<font color="#000080">.
</font><font color="#FF0000"><b>If </b></font>you come across a problem where a last <font color="#FF0000"><b>in</b></font><font color="#000080">, </font>first <font color="#FF0000"><b>out </b></font>solution <font color="#FF0000"><b>is
</b></font>needed<font color="#000080">, </font>a stack may be the proper way <font color="#FF0000"><b>to </b></font>go<font color="#000080">.

</font>Queues
<font color="#000080">======
</font>A queue <font color="#FF0000"><b>is set </b></font>up much like a line at the local shop <font color="#FF0000"><b>to </b></font>pay the merchant
at the cash <font color="#FF0000"><b>register</b></font><font color="#000080">.  </font>The first element <font color="#FF0000"><b>in is </b></font>the first element <font color="#FF0000"><b>out</b></font><font color="#000080">.
</font>Much like a stack<font color="#000080">, </font>a queue may be defined <font color="#FF0000"><b>as </b></font>a <font color="#FF0000"><b>record </b></font>format<font color="#000080">.

</font>queue <font color="#000080">= </font><font color="#FF0000"><b>record
  </b></font>elements<font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font>maxqueuesize<font color="#000080">] </font><font color="#FF0000"><b>of </b></font><font color="#000080">&lt;</font>whatever<font color="#000080">&gt;;
  </font>front<font color="#000080">, </font>back<font color="#000080">: </font>integer<font color="#000080">;
  </font>count<font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font>Notice that the differences we see here<font color="#000080">, </font>are that <font color="#FF0000"><b>to </b></font>take from the front
<font color="#FF0000"><b>of </b></font>the so called line we need <font color="#FF0000"><b>to </b></font>know where the front <font color="#FF0000"><b>is in </b></font>the order<font color="#000080">.
</font>The same idea occurs <font color="#FF0000"><b>with </b></font>the back<font color="#000080">.  </font>We need <font color="#FF0000"><b>to </b></font>know where the back <font color="#FF0000"><b>is
in </b></font>the <font color="#FF0000"><b>array</b></font><font color="#000080">.  </font>Count just helps us <font color="#FF0000"><b>in </b></font>knowing how many values we currently
have <font color="#FF0000"><b>in </b></font>the queue<font color="#000080">.

</font><font color="#FF0000"><b>To </b></font>start up a queue<font color="#000080">, </font>basically<font color="#000080">, </font>we need <font color="#FF0000"><b>to </b></font>start the front at <font color="#800000">1</font><font color="#000080">, </font>the rear
at the maximum size<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>count at zero<font color="#000080">.

</font><font color="#FF0000"><b>To </b></font>check whether it<font color="#800000">'s full or  empty is basically set through count.  Check
</font>count <font color="#FF0000"><b>to </b></font>be zero <font color="#FF0000"><b>for </b></font>a queue <font color="#FF0000"><b>to </b></font>be empty <font color="#FF0000"><b>and </b></font>maxsize <font color="#FF0000"><b>for </b></font>a queue <font color="#FF0000"><b>to </b></font>be full<font color="#000080">.

</font>One sticky mess comes up when we <font color="#FF0000"><b>try to </b></font>add an element <font color="#FF0000"><b>to </b></font>the back <font color="#FF0000"><b>of </b></font>the
line<font color="#000080">.  </font>How <font color="#FF0000"><b>do </b></font>we keep track <font color="#FF0000"><b>of </b></font>things<font color="#000080">?  </font>We increment the back unless it<font color="#800000">'s
</font>maxqueuesize<font color="#000080">, </font><font color="#FF0000"><b>then </b></font>we <font color="#FF0000"><b>set </b></font>it <font color="#FF0000"><b>to </b></font><font color="#800000">1</font><font color="#000080">, </font>essentially<font color="#000080">, </font><font color="#FF0000"><b>to </b></font>continue reusing the
<font color="#FF0000"><b>array </b></font>storage <font color="#FF0000"><b>as </b></font>a loop<font color="#000080">....

</font><font color="#FF0000"><b>To </b></font>add <font color="#FF0000"><b>to </b></font>the back <font color="#FF0000"><b>of </b></font>the line<font color="#000080">, </font>we <font color="#FF0000"><b>do </b></font>like we did <font color="#FF0000"><b>with </b></font>the stack<font color="#000080">.  </font>We add
the element <font color="#FF0000"><b>to </b></font>the back<font color="#000080">, </font><font color="#FF0000"><b>then </b></font>we increment the back count <font color="#FF0000"><b>as </b></font>described
above<font color="#000080">.

</font><font color="#FF0000"><b>To </b></font>take from the front <font color="#FF0000"><b>of </b></font>the line<font color="#000080">, </font>we pull the element from the front <font color="#FF0000"><b>of
</b></font>the queue<font color="#000080">, </font><font color="#FF0000"><b>and then </b></font>increment the front count <font color="#FF0000"><b>as </b></font>described above<font color="#000080">.

</font>Basically<font color="#000080">, </font>the effect we are getting <font color="#FF0000"><b>is </b></font>much like a <font color="#FF0000"><b>message </b></font>scrolling
across a surface<font color="#000080">, </font>like you may have seen <font color="#FF0000"><b>on </b></font>your television<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>at
Times Square <font color="#FF0000"><b>in </b></font>NY <font color="#000080">(</font><font color="#FF0000"><b>on </b></font>several movies<font color="#000080">).

</font>Conclusion
<font color="#000080">==========
</font>Both <font color="#FF0000"><b>of </b></font>these data storage schemes work beautifully<font color="#000080">, </font>when you have a lot <font color="#FF0000"><b>of
</b></font>data <font color="#FF0000"><b>to </b></font>deal <font color="#FF0000"><b>with </b></font>that can be passed through quickly<font color="#000080">, </font>but needs <font color="#FF0000"><b>to </b></font>be
released at other times<font color="#000080">...</font>beyond that<font color="#000080">, </font>at this point<font color="#000080">, </font>I can<font color="#800000">'t think of
</font>anything that can be done by only using a stack <font color="#FF0000"><b>or </b></font>a queue<font color="#000080">, </font>so my
suggestion <font color="#FF0000"><b>for </b></font>practice <font color="#FF0000"><b>is to </b></font>attempt coding each <font color="#FF0000"><b>of </b></font>these specialized
data types <font color="#FF0000"><b>to do </b></font>simple things<font color="#000080">.


</font>Practice Programming Problem<font color="#000080">(</font>s<font color="#000080">) </font><font color="#800000">#12
</font><font color="#000080">===================================
</font>Here are a couple <font color="#FF0000"><b>of </b></font>things <font color="#FF0000"><b>for </b></font>this one<font color="#000080">.

</font><font color="#800000">1</font><font color="#000080">) </font>Reverse a <font color="#FF0000"><b>string of </b></font>text inputted from the screen <font color="#000080">(</font><font color="#FF0000"><b>not </b></font>necessarily
a <font color="#FF0000"><b>string</b></font><font color="#000080">) </font><font color="#FF0000"><b>of </b></font>a maximum <font color="#FF0000"><b>of </b></font><font color="#800000">500 </font>characters<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>output the text back <font color="#FF0000"><b>to
</b></font>the screen<font color="#000080">.

</font>Sample
<font color="#000080">------
</font>Enter a <font color="#FF0000"><b>string</b></font><font color="#000080">: </font>AbCdE

Your <font color="#FF0000"><b>string </b></font>reversed <font color="#FF0000"><b>is</b></font><font color="#000080">: </font>EdCbA

<font color="#800000">2</font><font color="#000080">) </font>Use a queue <font color="#FF0000"><b>to </b></font>store a maximum <font color="#FF0000"><b>set of </b></font>numbers that <font color="#FF0000"><b>is </b></font><font color="#800000">50 </font>numbers long<font color="#000080">.
</font>These numbers will come from a series <font color="#FF0000"><b>of </b></font>randomly generated numbers by your
<font color="#FF0000"><b>program</b></font><font color="#000080">.  </font>The random numbers you will generate are from <font color="#800000">1</font><font color="#000080">..</font><font color="#800000">1000</font><font color="#000080">, </font><font color="#FF0000"><b>and
</b></font>the ones that are from <font color="#800000">1</font><font color="#000080">..</font><font color="#800000">50 </font>will be written <font color="#FF0000"><b>out to </b></font>the screen when the
queue <font color="#FF0000"><b>is </b></font>filled up <font color="#FF0000"><b>with </b></font>those numbers<font color="#000080">.  </font>Write the numbers <font color="#FF0000"><b>in </b></font>the queue <font color="#FF0000"><b>out
in </b></font><font color="#800000">5 </font>rows <font color="#FF0000"><b>of </b></font><font color="#800000">10</font><font color="#000080">, </font><font color="#FF0000"><b>and </b></font>at the bottom<font color="#000080">, </font>write <font color="#FF0000"><b>out </b></font>the total number <font color="#FF0000"><b>of </b></font>random
numbers you had <font color="#FF0000"><b>to </b></font>go through <font color="#FF0000"><b>to </b></font>get those <font color="#800000">50 </font>numbers <font color="#FF0000"><b>in </b></font>the proper range<font color="#000080">.

</font>Sample
<font color="#000080">------
</font><font color="#800000">23 23 11 22 33 1 9 12 23 11
23 3 11 22 33 11 9 12 23 11
23 23 11 22 33 11 9 12 23 11
23 29 11 2 33 11 9 12 23 11
23 23 11 22 33 11 9 50 23 11

987 </font>numbers were generated from <font color="#800000">1</font><font color="#000080">-</font><font color="#800000">1000 </font><font color="#FF0000"><b>to </b></font>get the <font color="#800000">50 </font>numbers from <font color="#800000">1</font><font color="#000080">-</font><font color="#800000">50.

</font>Next Time
<font color="#000080">=========
</font>Recursion<font color="#000080">. (</font>n<font color="#000080">) </font>See Recursion<font color="#000080">. :&gt;

</font>Any comments<font color="#000080">?  </font>Write ggrotz<font color="#000080">@</font><font color="#800000">2</font>sprint<font color="#000080">.</font>net<font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to TUTOR SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0015.PAS">Original</a><b>]</b></p></body>
</html>
