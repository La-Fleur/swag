<html>
<head><title> "Primary Concepts of Pointers" by GLENN GROTZINGER</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to TUTOR SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0020.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#000000">                        Turbo <font color="#FF0000"><b>Pascal for </b></font>DOS Tutorial
                            by Glenn Grotzinger
                     Part <font color="#800000">17</font><font color="#000080">: </font>Primary Concepts <font color="#FF0000"><b>of </b></font>Pointers
                   copyright<font color="#000080">(</font>c<font color="#000080">) </font><font color="#800000">1995</font><font color="#000080">-</font><font color="#800000">96 </font>by Glenn Grotzinger

Hello<font color="#000080">.  </font>Here <font color="#FF0000"><b>is </b></font>a solution from last time<font color="#000080">...

</font><font color="#FF0000"><b>program </b></font>part16<font color="#000080">;

  </font><font color="#FF0000"><b>var
    </b></font>a<font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">1000</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>integer<font color="#000080">;
    </font>number<font color="#000080">: </font>integer<font color="#000080">;
    </font>c<font color="#000080">, </font>i<font color="#000080">, </font>j<font color="#000080">, </font>PIVOT<font color="#000080">, </font>t<font color="#000080">: </font>integer<font color="#000080">;
    </font>found<font color="#000080">: </font>boolean<font color="#000080">;
    </font>location<font color="#000080">: </font>integer<font color="#000080">;
    </font>outfile<font color="#000080">: </font>text<font color="#000080">;

  </font><font color="#FF0000"><b>procedure </b></font>quicksort<font color="#000080">(</font>L<font color="#000080">, </font>R<font color="#000080">: </font>integer<font color="#000080">);
    </font><font color="#008000"><i>{ nothing to say we couldn't sort the data, especially with the
      fact that we will be performing 500 search hits on this 1000
      unit array...the overhead of sorting the data will be of good
      benefit in the long run... }

    </i></font><font color="#FF0000"><b>begin
      if </b></font>L <font color="#000080">&lt; </font>R <font color="#FF0000"><b>then
        begin
          </b></font>i <font color="#000080">:= </font>L <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
          </font>j <font color="#000080">:= </font>R<font color="#000080">;
          </font>PIVOT <font color="#000080">:= </font>A<font color="#000080">[</font>L<font color="#000080">];

          </font><font color="#FF0000"><b>repeat
            while </b></font>a<font color="#000080">[</font>i<font color="#000080">] &lt;= </font>PIVOT <font color="#FF0000"><b>do </b></font>inc<font color="#000080">(</font>i<font color="#000080">);
            </font><font color="#FF0000"><b>while </b></font>a<font color="#000080">[</font>j<font color="#000080">] &gt; </font>PIVOT <font color="#FF0000"><b>do </b></font>dec<font color="#000080">(</font>j<font color="#000080">);
            </font><font color="#FF0000"><b>if </b></font>i <font color="#000080">&lt; </font>j <font color="#FF0000"><b>then
              begin
                </b></font>t <font color="#000080">:= </font>A<font color="#000080">[</font>i<font color="#000080">];
                </font>A<font color="#000080">[</font>i<font color="#000080">] := </font>a<font color="#000080">[</font>j<font color="#000080">];
                </font>A<font color="#000080">[</font>j<font color="#000080">] := </font>t<font color="#000080">;
              </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
          </font><font color="#FF0000"><b>until </b></font>i <font color="#000080">&gt; </font>j<font color="#000080">;

          </font>a<font color="#000080">[</font>l<font color="#000080">] := </font>A<font color="#000080">[</font>j<font color="#000080">];
          </font>a<font color="#000080">[</font>j<font color="#000080">] := </font>PIVOT<font color="#000080">;

          </font>quicksort<font color="#000080">(</font>L<font color="#000080">, </font>j<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">);
          </font>quicksort<font color="#000080">(</font>i<font color="#000080">, </font>R<font color="#000080">);
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>procedure </b></font>bsearch<font color="#000080">(</font>number<font color="#000080">, </font>lowend<font color="#000080">, </font>highend<font color="#000080">: </font>integer<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>location<font color="#000080">: </font>integer<font color="#000080">;
                    </font><font color="#FF0000"><b>var </b></font>found<font color="#000080">: </font>boolean<font color="#000080">);
    </font><font color="#FF0000"><b>var
      </b></font>midpoint<font color="#000080">: </font>integer<font color="#000080">;
    </font><font color="#FF0000"><b>begin
      if </b></font>lowend <font color="#000080">&gt; </font>highend <font color="#FF0000"><b>then
        </b></font>found <font color="#000080">:= </font>false
      <font color="#FF0000"><b>else
        begin
          </b></font>midpoint <font color="#000080">:= (</font>lowend <font color="#000080">+ </font>highend<font color="#000080">) </font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">;
          </font><font color="#FF0000"><b>if </b></font>number <font color="#000080">= </font>a<font color="#000080">[</font>midpoint<font color="#000080">] </font><font color="#FF0000"><b>then
            begin
              </b></font>found <font color="#000080">:= </font>true<font color="#000080">;
              </font>location <font color="#000080">:= </font>midpoint<font color="#000080">;
            </font><font color="#FF0000"><b>end
          else if </b></font>number <font color="#000080">&lt; </font>a<font color="#000080">[</font>midpoint<font color="#000080">] </font><font color="#FF0000"><b>then
            </b></font>bsearch<font color="#000080">(</font>number<font color="#000080">, </font>lowend<font color="#000080">, </font>midpoint<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">, </font>location<font color="#000080">, </font>found<font color="#000080">)
          </font><font color="#FF0000"><b>else if </b></font>number <font color="#000080">&gt; </font>a<font color="#000080">[</font>midpoint<font color="#000080">] </font><font color="#FF0000"><b>then
            </b></font>bsearch<font color="#000080">(</font>number<font color="#000080">, </font>midpoint<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">, </font>highend<font color="#000080">, </font>location<font color="#000080">, </font>found<font color="#000080">);
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>begin
    </b></font>randomize<font color="#000080">;
    </font>assign<font color="#000080">(</font>outfile<font color="#000080">, </font><font color="#800000">'LOCATION.TXT'</font><font color="#000080">);
    </font>rewrite<font color="#000080">(</font>outfile<font color="#000080">);

    </font><font color="#FF0000"><b>for </b></font>c <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">1000 </font><font color="#FF0000"><b>do
      </b></font>a<font color="#000080">[</font>c<font color="#000080">] := </font>random<font color="#000080">(</font><font color="#800000">10000</font><font color="#000080">) + </font><font color="#800000">1</font><font color="#000080">;

    </font>quicksort<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1000</font><font color="#000080">);

    </font><font color="#FF0000"><b>for </b></font>c <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">500 </font><font color="#FF0000"><b>do
      begin
        </b></font>number <font color="#000080">:= </font>random<font color="#000080">(</font><font color="#800000">10000</font><font color="#000080">) + </font><font color="#800000">1</font><font color="#000080">;
        </font>bsearch<font color="#000080">(</font>number<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1000</font><font color="#000080">, </font>location<font color="#000080">, </font>found<font color="#000080">);
        </font><font color="#FF0000"><b>if </b></font>found <font color="#FF0000"><b>then
          </b></font>writeln<font color="#000080">(</font>outfile<font color="#000080">, </font>c<font color="#000080">, </font><font color="#800000">') '</font><font color="#000080">, </font>number<font color="#000080">, </font><font color="#800000">' was found at position '</font><font color="#000080">,
                  </font>location<font color="#000080">, </font><font color="#800000">'.'</font><font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

    </font>close<font color="#000080">(</font>outfile<font color="#000080">);

</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>Intro
<font color="#000080">=====
</font>This will be the first <font color="#FF0000"><b>of </b></font>several parts <font color="#FF0000"><b>on </b></font>the use <font color="#FF0000"><b>of </b></font>pointers<font color="#000080">...</font>This
part will contain the basic idea behind pointers <font color="#FF0000"><b>and </b></font>their use<font color="#000080">.  </font>I
would like feedback from anyone about how well they felt they learned
from this tutorial<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>the next two<font color="#000080">.  </font>They all will be about pointers<font color="#000080">,
</font><font color="#FF0000"><b>and </b></font>I want <font color="#FF0000"><b>to </b></font>be sure I am doing OK <font color="#FF0000"><b>in </b></font>explaining them coherently<font color="#000080">. :&gt;

</font>The Concept <font color="#FF0000"><b>of </b></font>a Pointer
<font color="#000080">========================
</font>A pointer <font color="#FF0000"><b>is </b></font>simply what it implies by the name<font color="#000080">.  </font>Something that points<font color="#000080">.
</font>A pointer <font color="#FF0000"><b>is </b></font>a <font color="#800000">4 </font>byte double word that stores the segment <font color="#FF0000"><b>and </b></font>offset <font color="#FF0000"><b>in
</b></font>memory where the variable <font color="#FF0000"><b>is </b></font>located<font color="#000080">.

</font>We have referred <font color="#FF0000"><b>to </b></font>before a method <font color="#FF0000"><b>of </b></font>getting more than <font color="#800000">64</font>K <font color="#FF0000"><b>in </b></font>a data
structure<font color="#000080">, </font><font color="#FF0000"><b>in </b></font>the <font color="#FF0000"><b>array </b></font>section<font color="#000080">.  </font>This <font color="#FF0000"><b>is </b></font>a way<font color="#000080">.  </font>A pointer <font color="#FF0000"><b>is </b></font>placed <font color="#FF0000"><b>on
</b></font>what <font color="#FF0000"><b>is </b></font>referred <font color="#FF0000"><b>to as </b></font>the heap<font color="#000080">.  </font>The heap <font color="#FF0000"><b>is </b></font>the remainder <font color="#FF0000"><b>of </b></font>conventional
memory <font color="#FF0000"><b>not </b></font>used by the <font color="#FF0000"><b>program </b></font>itself<font color="#000080">, </font>the data stack<font color="#000080">, </font><font color="#FF0000"><b>or </b></font>any TSRs that
may be <font color="#FF0000"><b>on </b></font>the system at any one time<font color="#000080">.  </font>The data stack <font color="#FF0000"><b>is </b></font>where variables
are normally allocated directly by name <font color="#FF0000"><b>and </b></font>can be a maximum <font color="#FF0000"><b>of </b></font><font color="#800000">64</font>K <font color="#FF0000"><b>in </b></font>size<font color="#000080">.

</font>Why would we want <font color="#FF0000"><b>to </b></font>use pointers<font color="#000080">?  </font>Well<font color="#000080">, </font>we have already eluded <font color="#FF0000"><b>to </b></font>one
reason<font color="#000080">, </font><font color="#FF0000"><b>to </b></font>get around the <font color="#800000">64</font>K data limit<font color="#000080">.  </font>Another reason <font color="#FF0000"><b>is to </b></font>dynamically
allocate memory space<font color="#000080">.  </font>Basically<font color="#000080">, </font>any variables declared by name<font color="#000080">(</font>s<font color="#000080">) </font><font color="#FF0000"><b>in </b></font>a
<font color="#FF0000"><b>program is </b></font>allocated at the initial start<font color="#000080">-</font>up <font color="#FF0000"><b>of </b></font>a <font color="#FF0000"><b>program</b></font><font color="#000080">, </font><font color="#FF0000"><b>and is </b></font>allocated
<font color="#FF0000"><b>until </b></font>the <font color="#FF0000"><b>end of </b></font>the <font color="#FF0000"><b>program</b></font><font color="#000080">.  </font><font color="#FF0000"><b>For </b></font>a lengthy <font color="#FF0000"><b>program with </b></font>a lot <font color="#FF0000"><b>of </b></font>variables<font color="#000080">,
</font>we may <font color="#FF0000"><b>not </b></font>want all variables <font color="#FF0000"><b>to </b></font>be allocated <font color="#FF0000"><b>for </b></font>something at the start<font color="#000080">.
</font>Therefore<font color="#000080">, </font>we can<font color="#000080">, </font><font color="#FF0000"><b>with </b></font>pointers<font color="#000080">, </font>allocate <font color="#FF0000"><b>and </b></font>deallocate memory anytime
we wish <font color="#FF0000"><b>in </b></font>a <font color="#FF0000"><b>program</b></font><font color="#000080">.

</font><font color="#FF0000"><b>If </b></font>we want <font color="#FF0000"><b>to </b></font>save memory <font color="#FF0000"><b>in </b></font>the data stack<font color="#000080">, </font><font color="#800000">1 4</font><font color="#000080">-</font>byte pointer compared <font color="#FF0000"><b>to</b></font><font color="#000080">,
</font>say<font color="#000080">, </font>an <font color="#FF0000"><b>array of </b></font><font color="#800000">1000 </font>integers would be preferable<font color="#000080">.  </font>That <font color="#FF0000"><b>is </b></font>one <font color="#FF0000"><b>function
of </b></font>a pointer<font color="#000080">.

</font><font color="#FF0000"><b>In </b></font>using pointers<font color="#000080">, </font>we must remember that they are <font color="#FF0000"><b>not </b></font>direct variables<font color="#000080">,
</font>but addresses <font color="#FF0000"><b>of </b></font>variables<font color="#000080">.  </font>Let us look at the first example <font color="#FF0000"><b>program
</b></font>below <font color="#FF0000"><b>to </b></font>see exactly what I mean by the last statement<font color="#000080">.  </font>We also will
see how <font color="#FF0000"><b>to </b></font>properly create variable space address pointers <font color="#FF0000"><b>in </b></font>memory<font color="#000080">,
</font>address that variable space<font color="#000080">, </font><font color="#FF0000"><b>and then </b></font>deallocate it<font color="#000080">.

</font><font color="#FF0000"><b>program </b></font>pointers_one<font color="#000080">;

  </font><font color="#FF0000"><b>type
    </b></font>strptr <font color="#000080">= ^</font><font color="#FF0000"><b>string</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>var
    </b></font>a<font color="#000080">, </font>b<font color="#000080">, </font>c<font color="#000080">: </font>strptr<font color="#000080">;

  </font><font color="#FF0000"><b>begin
    </b></font>new<font color="#000080">(</font>a<font color="#000080">);
    </font>a<font color="#000080">^ := </font><font color="#800000">'Turbo Pascal'</font><font color="#000080">;
    </font>new<font color="#000080">(</font>b<font color="#000080">);
    </font>b<font color="#000080">^ := </font><font color="#800000">'is fun!!!!!!'</font><font color="#000080">;

    </font>writeln<font color="#000080">(</font><font color="#800000">'a is now &quot;'</font><font color="#000080">, </font>a<font color="#000080">^, </font><font color="#800000">'&quot;.'</font><font color="#000080">);
    </font>writeln<font color="#000080">(</font><font color="#800000">'b is now &quot;'</font><font color="#000080">, </font>b<font color="#000080">^, </font><font color="#800000">'&quot;.'</font><font color="#000080">);

    </font>new<font color="#000080">(</font>c<font color="#000080">);
    </font>c<font color="#000080">^ := </font>a<font color="#000080">^;
    </font>a<font color="#000080">^ := </font>b<font color="#000080">^;
    </font>b<font color="#000080">^ := </font>c<font color="#000080">^;
    </font>dispose<font color="#000080">(</font>c<font color="#000080">);

    </font>writeln<font color="#000080">;
    </font>writeln<font color="#000080">(</font><font color="#800000">'a is now &quot;'</font><font color="#000080">, </font>a<font color="#000080">^, </font><font color="#800000">'&quot;.'</font><font color="#000080">);
    </font>writeln<font color="#000080">(</font><font color="#800000">'b is now &quot;'</font><font color="#000080">, </font>b<font color="#000080">^, </font><font color="#800000">'&quot;.'</font><font color="#000080">);
    </font>dispose<font color="#000080">(</font>a<font color="#000080">);</font>dispose<font color="#000080">(</font>b<font color="#000080">);

  </font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>We see the use <font color="#FF0000"><b>of </b></font>several use conventions <font color="#FF0000"><b>in </b></font>the <font color="#FF0000"><b>program </b></font>above<font color="#000080">.  </font>We have
three pointers listed <font color="#FF0000"><b>to </b></font>be pointers <font color="#FF0000"><b>of </b></font>strings<font color="#000080">.  (</font><font color="#FF0000"><b>as </b></font>a note<font color="#000080">, </font>any data
<font color="#FF0000"><b>type </b></font>that will eventually be a pointer should NORMALLY be defined under
the <font color="#FF0000"><b>type </b></font>declaration <font color="#FF0000"><b>to </b></font>facilitate the use <font color="#FF0000"><b>of </b></font>pointers <font color="#FF0000"><b>in </b></font>procedures<font color="#000080">.
</font>We will see this later<font color="#000080">.)

</font><font color="#FF0000"><b>In </b></font>the declaration <font color="#FF0000"><b>to </b></font>allocate the pointers<font color="#000080">, </font>we used the <font color="#000080">^ </font>sign first<font color="#000080">, </font><font color="#FF0000"><b>then
</b></font>the datatype<font color="#000080">.  </font>We say that the pointer will eventually point <font color="#FF0000"><b>to </b></font>a <font color="#FF0000"><b>string
</b></font>variable<font color="#000080">.

</font><font color="#FF0000"><b>To </b></font>address each <font color="#FF0000"><b>of </b></font>the pointer variables<font color="#000080">, </font>we used the <font color="#000080">^ </font>sign after the
particular variable name<font color="#000080">.  </font>The <font color="#000080">^ </font>sign references the variable that the
pointer <font color="#FF0000"><b>is </b></font>pointing <font color="#FF0000"><b>to</b></font><font color="#000080">, </font><font color="#FF0000"><b>and NOT </b></font>the pointer itself<font color="#000080">.  </font>You may see this
by doing a debug trace <font color="#FF0000"><b>for </b></font>a<font color="#000080">, </font>b<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>c <font color="#FF0000"><b>on </b></font>that <font color="#FF0000"><b>program</b></font><font color="#000080">.  </font>You will
clearly see that the pointer<font color="#800000">'s contents is NOT what the variable'</font>s
contents <font color="#FF0000"><b>is</b></font><font color="#000080">...

</font>The next thing <font color="#FF0000"><b>to </b></font>note <font color="#FF0000"><b>is </b></font>the assignment statements<font color="#000080">.  </font><font color="#FF0000"><b>For </b></font>a pointer
variable<font color="#000080">, </font>we are <font color="#FF0000"><b>not </b></font>assigning direct values<font color="#000080">, </font>but MOVING THE POINTER
address<font color="#000080">.  </font>When we say a<font color="#000080">^ := </font>c<font color="#000080">^, </font>we are moving the pointer c <font color="#FF0000"><b>to </b></font>point
<font color="#FF0000"><b>to </b></font>the value that a points <font color="#FF0000"><b>to</b></font><font color="#000080">.  **</font>WE ARE <font color="#FF0000"><b>NOT </b></font>DIRECTLY CHANGING THE
VALUE <font color="#FF0000"><b>OF </b></font>THAT LOCATION <font color="#FF0000"><b>IN </b></font>MEMORY<font color="#000080">!!!**.

</font>The last thing <font color="#FF0000"><b>to </b></font>note <font color="#FF0000"><b>is </b></font>the strategically placed <font color="#FF0000"><b>uses of </b></font>the functions
new<font color="#000080">() </font><font color="#FF0000"><b>and </b></font>dispose<font color="#000080">().  </font>These are new functions <font color="#FF0000"><b>to </b></font>us that we will learn
<font color="#FF0000"><b>and </b></font>make use <font color="#FF0000"><b>of in </b></font>the system <font color="#FF0000"><b>unit</b></font><font color="#000080">.  </font>The new<font color="#000080">() </font><font color="#FF0000"><b>function </b></font>will allocate
the space <font color="#FF0000"><b>for </b></font>the pointer listed <font color="#FF0000"><b>in </b></font>the variable <font color="#FF0000"><b>on </b></font>the heap<font color="#000080">.  </font>The
dispose<font color="#000080">() </font><font color="#FF0000"><b>function </b></font>will deallocate the space <font color="#FF0000"><b>for </b></font>the pointer <font color="#FF0000"><b>on </b></font>the heap<font color="#000080">.
</font><font color="#FF0000"><b>As </b></font>you can see<font color="#000080">, </font>we created <font color="#FF0000"><b>and </b></font>removed the variables <font color="#FF0000"><b>as </b></font>we needed them<font color="#000080">.

</font>The next thing you were probably wondering <font color="#FF0000"><b>with </b></font>pointers <font color="#FF0000"><b>is </b></font>how <font color="#FF0000"><b>to </b></font>get
a pointer <font color="#FF0000"><b>to not </b></font>point <font color="#FF0000"><b>to </b></font>anything<font color="#000080">.  </font>Make it address a reserved word
called <font color="#FF0000"><b>nil</b></font><font color="#000080">.  </font><font color="#FF0000"><b>If </b></font>I want pointer p <font color="#FF0000"><b>to not </b></font>point <font color="#FF0000"><b>to </b></font>anything<font color="#000080">, </font><font color="#FF0000"><b>then </b></font>I would
write<font color="#000080">:

        </font>p <font color="#000080">:= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">;

</font>Whatever you <font color="#FF0000"><b>do</b></font><font color="#000080">, </font><font color="#FF0000"><b>do not set </b></font>a pointer <font color="#FF0000"><b>to nil </b></font>before you dispose <font color="#FF0000"><b>of </b></font>the
pointer<font color="#000080">.  </font>The system will lose track <font color="#FF0000"><b>of </b></font>the variable <font color="#FF0000"><b>on </b></font>the heap<font color="#000080">, </font><font color="#FF0000"><b>and
</b></font>therefore <font color="#FF0000"><b>is </b></font>LOST <font color="#FF0000"><b>to </b></font>the system<font color="#000080">.  </font>Keep this issue <font color="#FF0000"><b>in </b></font>mind <font color="#FF0000"><b>as </b></font>we <font color="#FF0000"><b>do
</b></font>our work <font color="#FF0000"><b>and </b></font>examples <font color="#FF0000"><b>with </b></font>pointers<font color="#000080">.

</font>Look up getmem<font color="#000080">() </font><font color="#FF0000"><b>and </b></font>freemem<font color="#000080">().

</font>Another issue that wasn<font color="#800000">'t covered above is how we determine how much
</font>memory <font color="#FF0000"><b>is in </b></font>the heap<font color="#000080">.  </font>Use the functions memavail <font color="#FF0000"><b>and </b></font>maxavail <font color="#FF0000"><b>for
</b></font>the purpose <font color="#FF0000"><b>of </b></font>finding <font color="#FF0000"><b>out </b></font>how much memory you can allocate <font color="#FF0000"><b>and if </b></font>the
pointer data structure <font color="#FF0000"><b>is </b></font>big enough<font color="#000080">, </font>BE SURE <font color="#FF0000"><b>TO </b></font>CHECK <font color="#FF0000"><b>AND </b></font>SEE <font color="#FF0000"><b>IF </b></font>YOU
HAVE THE MEMORY <font color="#FF0000"><b>TO </b></font>ALLOCATE before you allocate it <font color="#FF0000"><b>for </b></font>a big structure<font color="#000080">.

</font><font color="#FF0000"><b>Procedure or Function </b></font>Pointers
<font color="#000080">==============================
</font>A <font color="#FF0000"><b>procedure or function </b></font>may also be addressed <font color="#FF0000"><b>as </b></font>a pointer<font color="#000080">.  </font><font color="#FF0000"><b>For </b></font>that<font color="#000080">,
</font><font color="#FF0000"><b>as </b></font>you will see <font color="#FF0000"><b>in </b></font>the example<font color="#000080">, </font>we can use a declaration <font color="#FF0000"><b>for </b></font>a variable
exactly like the <font color="#FF0000"><b>procedure or function </b></font>declaration<font color="#000080">.  </font>It <font color="#FF0000"><b>is </b></font>very useful
<font color="#FF0000"><b>to </b></font>minimize code usage<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>make things multi<font color="#000080">-</font>functional<font color="#000080">.  </font>This sheds
some light into the inner workings <font color="#FF0000"><b>of </b></font>the write command<font color="#000080">, </font><font color="#FF0000"><b>as </b></font>was wondered
<font color="#FF0000"><b>in </b></font>c<font color="#000080">.</font>l<font color="#000080">.</font>p<font color="#000080">.</font>b<font color="#000080">. </font>a little <font color="#FF0000"><b>while </b></font>ago<font color="#000080">...

</font><font color="#FF0000"><b>program </b></font>pointer_two<font color="#000080">;
  </font><font color="#FF0000"><b>type
    </b></font>compfunc <font color="#000080">= </font><font color="#FF0000"><b>function</b></font><font color="#000080">(</font>a<font color="#000080">, </font>b<font color="#000080">: </font>integer<font color="#000080">):</font>integer<font color="#000080">;
  </font><font color="#FF0000"><b>var
    </b></font>compute<font color="#000080">: </font>compfunc<font color="#000080">;
    </font>first<font color="#000080">, </font>second<font color="#000080">: </font>integer<font color="#000080">;
    </font>choice<font color="#000080">: </font>char<font color="#000080">;

  </font><font color="#008000"><i>{$F+}
  </i></font><font color="#FF0000"><b>function </b></font>compadd<font color="#000080">(</font>a<font color="#000080">, </font>b<font color="#000080">: </font>integer<font color="#000080">): </font>integer<font color="#000080">;
    </font><font color="#FF0000"><b>begin
      </b></font>compadd <font color="#000080">:= </font>a <font color="#000080">+ </font>b<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>function </b></font>compsub<font color="#000080">(</font>a<font color="#000080">, </font>b<font color="#000080">: </font>integer<font color="#000080">): </font>integer<font color="#000080">;
    </font><font color="#FF0000"><b>begin
      </b></font>compsub <font color="#000080">:= </font>a <font color="#000080">- </font>b<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>function </b></font>compmult<font color="#000080">(</font>a<font color="#000080">, </font>b<font color="#000080">: </font>integer<font color="#000080">): </font>integer<font color="#000080">;
    </font><font color="#FF0000"><b>begin
      </b></font>compmult <font color="#000080">:= </font>a <font color="#000080">* </font>b<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>function </b></font>compdiv<font color="#000080">(</font>a<font color="#000080">, </font>b<font color="#000080">: </font>integer<font color="#000080">): </font>integer<font color="#000080">;
    </font><font color="#FF0000"><b>begin
      </b></font>compdiv <font color="#000080">:= </font>a <font color="#FF0000"><b>div </b></font>b<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{$F-}

  </i></font><font color="#FF0000"><b>begin
    </b></font><font color="#000080">@</font>compute <font color="#000080">:= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">;
    </font>write<font color="#000080">(</font><font color="#800000">'Enter a first number: '</font><font color="#000080">);
    </font>readln<font color="#000080">(</font>first<font color="#000080">);
    </font>write<font color="#000080">(</font><font color="#800000">'Enter a second number: '</font><font color="#000080">);
    </font>readln<font color="#000080">(</font>second<font color="#000080">);
    </font>write<font color="#000080">(</font><font color="#800000">'Enter +, -, *, or / as a operation: '</font><font color="#000080">);
    </font>readln<font color="#000080">(</font>choice<font color="#000080">);
    </font><font color="#FF0000"><b>case </b></font>choice <font color="#FF0000"><b>of
      </b></font><font color="#800000">'+'</font><font color="#000080">: </font>compute <font color="#000080">:= </font>compadd<font color="#000080">;
      </font><font color="#800000">'-'</font><font color="#000080">: </font>compute <font color="#000080">:= </font>compsub<font color="#000080">;
      </font><font color="#800000">'*'</font><font color="#000080">: </font>compute <font color="#000080">:= </font>compmult<font color="#000080">;
      </font><font color="#800000">'/'</font><font color="#000080">: </font>compute <font color="#000080">:= </font>compdiv<font color="#000080">;
    </font><font color="#FF0000"><b>else
      </b></font>writeln<font color="#000080">(</font><font color="#800000">'Enter a correct option.'</font><font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>compute<font color="#000080">(</font>first<font color="#000080">, </font>second<font color="#000080">);
    </font>writeln<font color="#000080">(</font>first<font color="#000080">, </font><font color="#800000">' '</font><font color="#000080">, </font>choice<font color="#000080">, </font><font color="#800000">' '</font><font color="#000080">,</font>second<font color="#000080">,</font><font color="#800000">' = '</font><font color="#000080">,</font>compute<font color="#000080">(</font>first<font color="#000080">, </font>second<font color="#000080">));

  </font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font><font color="#FF0000"><b>As </b></font>you can see<font color="#000080">, </font>we are assigning a particular <font color="#FF0000"><b>function to </b></font>the <font color="#FF0000"><b>function
</b></font>named compute<font color="#000080">.  </font>After that<font color="#000080">, </font>compute performs the specified <font color="#FF0000"><b>function of
</b></font>the <font color="#FF0000"><b>function </b></font>that we just assigned <font color="#FF0000"><b>to </b></font>it<font color="#000080">.  </font>The rule <font color="#FF0000"><b>is </b></font>that those <font color="#FF0000"><b>FAR
</b></font>declarations MUST be present<font color="#000080">.  </font><font color="#FF0000"><b>As </b></font>well<font color="#000080">, </font>you can see how <font color="#FF0000"><b>to </b></font>refer <font color="#FF0000"><b>to </b></font>the
<font color="#FF0000"><b>procedure </b></font>pointer <font color="#000080">(</font><font color="#FF0000"><b>as </b></font><font color="#000080">@</font><font color="#FF0000"><b>procedure</b></font><font color="#000080">).  </font><font color="#FF0000"><b>As </b></font>long <font color="#FF0000"><b>as </b></font>the declarations are
similar <font color="#FF0000"><b>for </b></font>all the functions<font color="#000080">, </font>we can readdress functions<font color="#000080">/</font>procedures
using a variable like we did above<font color="#000080">.

</font>We see that we can probably cut down <font color="#FF0000"><b>on </b></font>a lot <font color="#FF0000"><b>of </b></font>code by using this
method <font color="#FF0000"><b>if </b></font>we had several different ways <font color="#FF0000"><b>of </b></font>doing things<font color="#000080">, </font><font color="#FF0000"><b>with </b></font>large
amounts <font color="#FF0000"><b>of </b></font>code <font color="#FF0000"><b>for </b></font>each thing<font color="#000080">.  </font><font color="#FF0000"><b>For </b></font>example<font color="#000080">, </font><font color="#FF0000"><b>if </b></font>we wanted <font color="#FF0000"><b>to </b></font>sort
something based <font color="#FF0000"><b>on </b></font>user input dependent upon many different methods
<font color="#FF0000"><b>or </b></font>types <font color="#000080">(</font>say sort increasing by name<font color="#000080">, </font>decreasing by name<font color="#000080">, </font>increasing
<font color="#FF0000"><b>on </b></font>size<font color="#000080">, </font>by date<font color="#000080">, </font>et<font color="#000080">.</font>al<font color="#000080">), </font>we can <font color="#FF0000"><b>set </b></font>up our swapping <font color="#FF0000"><b>procedure to </b></font>be
the way the compute <font color="#FF0000"><b>procedure is </b></font>above<font color="#000080">.

</font>Now<font color="#000080">, </font>we will lead into a special usage <font color="#FF0000"><b>of </b></font>a pointered <font color="#FF0000"><b>procedure </b></font>called
exitproc<font color="#000080">.

</font>ExitProc
<font color="#000080">========
</font>This <font color="#FF0000"><b>is </b></font>a special defined <font color="#FF0000"><b>procedure </b></font>pointer <font color="#FF0000"><b>in Pascal </b></font>that will determine
the procedures that will be performed upon an exit<font color="#000080">, </font>NO MATTER what happens<font color="#000080">,
</font>EVEN <font color="#FF0000"><b>IF </b></font>THERE <font color="#FF0000"><b>IS </b></font>A RUN<font color="#000080">-</font>TIME ERROR<font color="#000080">.  </font>Here <font color="#FF0000"><b>is </b></font>your method <font color="#FF0000"><b>on </b></font>being able <font color="#FF0000"><b>to
</b></font>catch <font color="#FF0000"><b>and </b></font>log those run<font color="#000080">-</font>time errors either <font color="#FF0000"><b>to </b></font>the screen<font color="#000080">, </font><font color="#FF0000"><b>or to </b></font>an errors
log<font color="#000080">.  </font>The primary usage <font color="#FF0000"><b>of </b></font>an exit <font color="#FF0000"><b>procedure</b></font><font color="#000080">, </font>though<font color="#000080">, </font><font color="#FF0000"><b>is to </b></font>perform any
maintenance that needs <font color="#FF0000"><b>to </b></font>be done upon termination that may <font color="#FF0000"><b>not </b></font>get done
upon an abnormal termination<font color="#000080">, </font>such <font color="#FF0000"><b>as </b></font>closing files<font color="#000080">. </font>The way things work
are basically the same <font color="#FF0000"><b>as </b></font>above<font color="#000080">...

</font>Here <font color="#FF0000"><b>is </b></font>a short example<font color="#000080">...</font>I will force a run<font color="#000080">-</font>time error <font color="#FF0000"><b>in </b></font>this <font color="#FF0000"><b>program</b></font><font color="#000080">,
</font>so we can see that the <font color="#FF0000"><b>end </b></font>gets run anyway<font color="#000080">.  </font><font color="#FF0000"><b>As </b></font>you may see<font color="#000080">, </font>exitproc
<font color="#FF0000"><b>is </b></font>defined <font color="#FF0000"><b>as </b></font>a pointered <font color="#FF0000"><b>procedure </b></font>when we work <font color="#FF0000"><b>with </b></font>it<font color="#000080">.  </font>The rest <font color="#FF0000"><b>is
</b></font>basically documented<font color="#000080">.

</font><font color="#FF0000"><b>program </b></font>pointer_three<font color="#000080">;

  </font><font color="#FF0000"><b>var
    </b></font>exitsave<font color="#000080">: </font><font color="#FF0000"><b>procedure</b></font><font color="#000080">;
    </font>afile<font color="#000080">: </font>text<font color="#000080">;

  </font><font color="#008000"><i>{$F+}    { must be far }
  </i></font><font color="#FF0000"><b>procedure </b></font>myexit<font color="#000080">; </font><font color="#008000"><i>{must be parameterless}
    </i></font><font color="#FF0000"><b>begin
      if </b></font>exitcode <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
        </b></font>writeln<font color="#000080">(</font><font color="#800000">'There was a problem.'</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font><font color="#800000">'We are exiting...'</font><font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#008000"><i>{$F-}

  </i></font><font color="#FF0000"><b>begin
    </b></font><font color="#000080">@</font>exitsave <font color="#000080">:= </font>exitproc<font color="#000080">;  </font><font color="#008000"><i>{ saving the original exit procedure }
    </i></font>exitproc <font color="#000080">:= @</font>myexit<font color="#000080">;    </font><font color="#008000"><i>{ set to new exit procedure }

    { I am placing a couple of error situations in here so you can
      experiment with what is going on...try it without errors too! }

    {1 - here is a standard file not found RTE.}
    </i></font>assign<font color="#000080">(</font>afile<font color="#000080">, </font><font color="#800000">'()()()().!!!'</font><font color="#000080">);
    </font>reset<font color="#000080">(</font>afile<font color="#000080">);

    </font><font color="#008000"><i>{2 - here is a division by zero.}
    { writeln(3 / 0); }

    </i></font>exitproc <font color="#000080">:= @</font>exitsave<font color="#000080">;  </font><font color="#008000"><i>{ set the original exit procedure back }
  </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>Here <font color="#FF0000"><b>is </b></font>enough material that I believe that <font color="#FF0000"><b>is </b></font>enough <font color="#FF0000"><b>to </b></font>digest <font color="#FF0000"><b>for </b></font>right
now <font color="#FF0000"><b>on </b></font>use <font color="#FF0000"><b>of </b></font>pointers<font color="#000080">.  </font>Practice allocating <font color="#FF0000"><b>and </b></font>using pointers very
heavily<font color="#000080">, </font><font color="#FF0000"><b>as </b></font>we will get into more advanced issues <font color="#FF0000"><b>of </b></font>using pointers <font color="#FF0000"><b>in </b></font>the
next two parts<font color="#000080">...</font>Remember that ANY structure can be placed <font color="#FF0000"><b>as </b></font>a pointer<font color="#000080">,
</font><font color="#FF0000"><b>except for </b></font>files<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>remember <font color="#FF0000"><b>to </b></font>define types <font color="#FF0000"><b>for </b></font>all pointers<font color="#000080">.

</font>Practice Programming Problem <font color="#800000">#17
</font><font color="#000080">================================
</font>Randomly generate <font color="#800000">15000 </font>numbers from <font color="#800000">1</font><font color="#000080">-</font><font color="#800000">25000 </font>into an <font color="#FF0000"><b>array</b></font><font color="#000080">.
</font><font color="#FF0000"><b>Then </b></font>generate another <font color="#800000">10000 </font>numbers from <font color="#800000">1</font><font color="#000080">-</font><font color="#800000">25000.
</font><font color="#FF0000"><b>If </b></font>there <font color="#FF0000"><b>is </b></font>a number from the second <font color="#FF0000"><b>set of </b></font>numbers that happens <font color="#FF0000"><b>to </b></font>be <font color="#FF0000"><b>in
</b></font>the first <font color="#FF0000"><b>set of </b></font>numbers<font color="#000080">, </font>write <font color="#FF0000"><b>out to </b></font>the <font color="#FF0000"><b>file </b></font>named LOCAT2<font color="#000080">.</font>TXT something
such <font color="#FF0000"><b>as</b></font><font color="#000080">:

</font><font color="#800000">13131 </font>was found at position <font color="#800000">12000.

</font>Only indicate the first instance <font color="#FF0000"><b>of </b></font>the number you encounter<font color="#000080">.
</font>You may wish <font color="#FF0000"><b>to </b></font>write a <font color="#000080">&quot;</font>redrawing bar<font color="#000080">&quot; </font><font color="#FF0000"><b>for </b></font>a process indicator<font color="#000080">.

</font>Note<font color="#000080">: </font>Be sure <font color="#FF0000"><b>with </b></font>the allocation <font color="#FF0000"><b>for </b></font>those first <font color="#800000">15000 </font>numbers that you
keep <font color="#FF0000"><b>in </b></font>line <font color="#FF0000"><b>with </b></font>the topic <font color="#FF0000"><b>of </b></font>this tutorial<font color="#000080">.

</font>Next Time
<font color="#000080">=========
</font>We will cover the concept <font color="#FF0000"><b>of </b></font>linked lists<font color="#000080">, </font><font color="#FF0000"><b>or </b></font>chained lists<font color="#000080">.  </font>Practice
very heavily the idea <font color="#FF0000"><b>of </b></font>pointers<font color="#000080">, </font>because you will need use <font color="#FF0000"><b>of </b></font>them
again <font color="#FF0000"><b>in </b></font>the next section<font color="#000080">.  </font>E<font color="#000080">-</font>mail ggrotz<font color="#000080">@</font><font color="#800000">2</font>sprint<font color="#000080">.</font>net <font color="#FF0000"><b>with </b></font>your comments<font color="#000080">.


</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to TUTOR SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0020.PAS">Original</a><b>]</b></p></body>
</html>
