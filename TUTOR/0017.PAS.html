<html>
<head><title> "The CRT unit" by GLENN GROTZINGER</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to TUTOR SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0017.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#000000">                       Turbo <font color="#FF0000"><b>Pascal for </b></font>DOS Tutorial
                           by Glenn Grotzinger
                          Part <font color="#800000">14</font><font color="#000080">: </font>The CRT <font color="#FF0000"><b>unit</b></font><font color="#000080">.
                </font>copyright <font color="#000080">(</font>c<font color="#000080">) </font><font color="#800000">1995</font><font color="#000080">-</font><font color="#800000">96 </font>by Glenn Grotzinger

Hello<font color="#000080">.  </font>Here <font color="#FF0000"><b>is </b></font>a solution from last time<font color="#000080">...

</font><font color="#008000"><i>{$M 65520,0,655360}
{$B+}
</i></font><font color="#FF0000"><b>program </b></font>part13<font color="#000080">; </font><font color="#FF0000"><b>uses </b></font>dos<font color="#000080">;

  </font><font color="#FF0000"><b>var
    </b></font>drive<font color="#000080">, </font>s<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
    </font>drivesize<font color="#000080">: </font>longint<font color="#000080">;
    </font>thefile<font color="#000080">: </font>text<font color="#000080">;

  </font><font color="#FF0000"><b>function </b></font>number<font color="#000080">(</font>n<font color="#000080">: </font>longint<font color="#000080">): </font><font color="#FF0000"><b>string</b></font><font color="#000080">; </font><font color="#FF0000"><b>forward</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>procedure </b></font>listdirsizes<font color="#000080">(</font>filedir<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">);
    </font><font color="#FF0000"><b>var
      </b></font>size<font color="#000080">: </font>longint<font color="#000080">;
      </font>f<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
      </font>dirinfo<font color="#000080">: </font>searchrec<font color="#000080">;
    </font><font color="#FF0000"><b>begin
      </b></font>size <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font>f <font color="#000080">:= </font>filedir <font color="#000080">+ </font><font color="#800000">'\*.*'</font><font color="#000080">;
      </font>findfirst<font color="#000080">(</font>f<font color="#000080">, </font><font color="#800000">$27</font><font color="#000080">, </font>dirinfo<font color="#000080">); </font><font color="#008000"><i>{ allfiles - VolumeID - directory }
      </i></font><font color="#FF0000"><b>while </b></font>doserror <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>do
        begin
          </b></font>size <font color="#000080">:= </font>size <font color="#000080">+ </font>dirinfo<font color="#000080">.</font>size<font color="#000080">;
          </font>findnext<font color="#000080">(</font>dirinfo<font color="#000080">);
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font>writeln<font color="#000080">(</font>thefile<font color="#000080">, </font>filedir<font color="#000080">, </font>number<font color="#000080">(</font>size<font color="#000080">):</font><font color="#800000">50</font><font color="#000080">-</font>length<font color="#000080">(</font>filedir<font color="#000080">));
      </font>drivesize <font color="#000080">:= </font>drivesize <font color="#000080">+ </font>size<font color="#000080">;
      </font>findfirst<font color="#000080">(</font>f<font color="#000080">, </font><font color="#800000">$10</font><font color="#000080">, </font>dirinfo<font color="#000080">);
      </font><font color="#FF0000"><b>while </b></font>doserror <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>do
        begin
         </b></font><font color="#008000"><i>{ for some reason, the findfirst above doesn't work right. }
         { Unable to determine exactly why...:&lt;                     }
          </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>dirinfo<font color="#000080">.</font>attr <font color="#000080">= </font><font color="#800000">$10</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>dirinfo<font color="#000080">.</font>name <font color="#000080">&lt;&gt; </font><font color="#800000">'.'</font><font color="#000080">)
             </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>dirinfo<font color="#000080">.</font>name <font color="#000080">&lt;&gt; </font><font color="#800000">'..'</font><font color="#000080">) </font><font color="#FF0000"><b>then
            begin
              </b></font>s <font color="#000080">:= </font>filedir <font color="#000080">+ </font><font color="#800000">'\' </font><font color="#000080">+ </font>dirinfo<font color="#000080">.</font>name<font color="#000080">;
              </font>listdirsizes<font color="#000080">(</font>s<font color="#000080">);
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
          </font>findnext<font color="#000080">(</font>dirinfo<font color="#000080">);
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>function </b></font>number<font color="#000080">;
    </font><font color="#FF0000"><b>var
      </b></font>i<font color="#000080">, </font>j<font color="#000080">: </font>integer<font color="#000080">;
      </font>s<font color="#000080">, </font>r<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
      </font>m<font color="#000080">: </font>integer<font color="#000080">;
    </font><font color="#FF0000"><b>begin
      </b></font>str<font color="#000080">(</font>n<font color="#000080">, </font>s<font color="#000080">);
      </font>r <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
      </font>i <font color="#000080">:= </font>length<font color="#000080">(</font>s<font color="#000080">);
      </font><font color="#FF0000"><b>if </b></font>i <font color="#000080">&gt; </font><font color="#800000">3 </font><font color="#FF0000"><b>then
        begin
          while </b></font>i <font color="#000080">&gt; </font><font color="#800000">3 </font><font color="#FF0000"><b>do
            begin
              for </b></font>j <font color="#000080">:= </font>i <font color="#FF0000"><b>downto </b></font>i<font color="#000080">-</font><font color="#800000">2 </font><font color="#FF0000"><b>do
                </b></font>r <font color="#000080">:= </font>s<font color="#000080">[</font>j<font color="#000080">] + </font>r<font color="#000080">;
              </font>r <font color="#000080">:= </font><font color="#800000">',' </font><font color="#000080">+ </font>r<font color="#000080">;
              </font>i <font color="#000080">:= </font>i <font color="#000080">- </font><font color="#800000">3</font><font color="#000080">;
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
          </font><font color="#FF0000"><b>for </b></font>j <font color="#000080">:= </font>i <font color="#FF0000"><b>downto </b></font><font color="#800000">1 </font><font color="#FF0000"><b>do
            </b></font>r <font color="#000080">:= </font>s<font color="#000080">[</font>j<font color="#000080">] + </font>r<font color="#000080">;
          </font>number <font color="#000080">:= </font>r<font color="#000080">;
        </font><font color="#FF0000"><b>end
      else
        </b></font>number <font color="#000080">:= </font>s<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>procedure </b></font>writehelp<font color="#000080">;
    </font><font color="#FF0000"><b>begin
      </b></font>writeln<font color="#000080">(</font><font color="#800000">'Include a drive like this: c:'</font><font color="#000080">);
      </font>halt<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>begin
    </b></font>assign<font color="#000080">(</font>thefile<font color="#000080">, </font><font color="#800000">'FILESLST.TXT'</font><font color="#000080">);
    </font>rewrite<font color="#000080">(</font>thefile<font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font>paramcount <font color="#000080">&lt;&gt; </font><font color="#800000">1 </font><font color="#FF0000"><b>then
      </b></font>writehelp<font color="#000080">;
    </font>drive <font color="#000080">:= </font>paramstr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>length<font color="#000080">(</font>drive<font color="#000080">) &lt;&gt; </font><font color="#800000">2</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>drive<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">] &lt;&gt; </font><font color="#800000">':'</font><font color="#000080">) </font><font color="#FF0000"><b>then
      </b></font>writehelp<font color="#000080">;
    </font>drive<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] := </font>upcase<font color="#000080">(</font>drive<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]);
    </font>writeln<font color="#000080">(</font>thefile<font color="#000080">, </font><font color="#800000">'Drive: '</font><font color="#000080">, </font>drive<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]);
    </font>listdirsizes<font color="#000080">(</font>drive<font color="#000080">);
    </font>writeln<font color="#000080">(</font>thefile<font color="#000080">, </font><font color="#800000">'==============='</font><font color="#000080">:</font><font color="#800000">50</font><font color="#000080">);
    </font>writeln<font color="#000080">(</font>thefile<font color="#000080">, </font>number<font color="#000080">(</font>drivesize<font color="#000080">):</font><font color="#800000">50</font><font color="#000080">);
    </font>close<font color="#000080">(</font>thefile<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font><font color="#FF0000"><b>In </b></font>this part<font color="#000080">, </font>we will <font color="#FF0000"><b>try to </b></font>discuss the complete usage <font color="#FF0000"><b>of </b></font>the CRT <font color="#FF0000"><b>unit</b></font><font color="#000080">.
</font>The CRT <font color="#FF0000"><b>unit </b></font>will allow <font color="#FF0000"><b>with </b></font>text different things<font color="#000080">, </font>such <font color="#FF0000"><b>as </b></font>PC speaker
control<font color="#000080">, </font>control <font color="#FF0000"><b>of </b></font>the screen <font color="#FF0000"><b>for </b></font>screen clears<font color="#000080">, </font>positioning <font color="#FF0000"><b>of </b></font>the
cursor<font color="#000080">, </font>changing the color <font color="#FF0000"><b>of </b></font>text <font color="#FF0000"><b>and </b></font>background<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>so forth<font color="#000080">.

</font>Basically<font color="#000080">, </font>when the <font color="#FF0000"><b>uses </b></font>crt<font color="#000080">, </font><font color="#FF0000"><b>or </b></font>wincrt<font color="#000080">, </font><font color="#FF0000"><b>is </b></font>used<font color="#000080">, </font>direct writes <font color="#FF0000"><b>to </b></font>the
screen are initiated<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>can <font color="#FF0000"><b>not </b></font>be redirected <font color="#FF0000"><b>to </b></font>text <font color="#FF0000"><b>file</b></font><font color="#000080">.

</font>Boolean variables<font color="#000080">.
==================
</font>There <font color="#FF0000"><b>is </b></font>a list <font color="#FF0000"><b>of </b></font>boolean control variables accessible through CRT<font color="#000080">.

</font>CheckBreak<font color="#000080">.  </font>It <font color="#FF0000"><b>is </b></font>true by <font color="#FF0000"><b>default</b></font><font color="#000080">. </font><font color="#FF0000"><b>If </b></font>it<font color="#800000">'s false, CTRL+BREAK will be
</font>unfunctional<font color="#000080">.

</font>CheckEOF<font color="#000080">.  </font>It <font color="#FF0000"><b>is </b></font>true by <font color="#FF0000"><b>default</b></font><font color="#000080">.  </font><font color="#FF0000"><b>If </b></font>it<font color="#800000">'s false, CTRL+Z when pressed
</font>will <font color="#FF0000"><b>not </b></font>represent an EOF <font color="#FF0000"><b>in </b></font>the <font color="#FF0000"><b>program</b></font><font color="#000080">.

</font>CheckSnow<font color="#000080">.  </font>Enables <font color="#FF0000"><b>and </b></font>disables <font color="#000080">&quot;</font>snow checking<font color="#000080">&quot; </font><font color="#FF0000"><b>on </b></font>CGA adapters<font color="#000080">.

</font>DirectVideo<font color="#000080">.  </font>Enables <font color="#FF0000"><b>and </b></font>disables direct video writes<font color="#000080">.

</font>Keypressed<font color="#000080">.  </font>Will return true <font color="#FF0000"><b>if </b></font>a key has been pressed<font color="#000080">.  </font>Usable <font color="#FF0000"><b>in </b></font>a
loop <font color="#FF0000"><b>for </b></font>doing something <font color="#FF0000"><b>until </b></font>the user stops it<font color="#000080">.  </font>A <font color="#FF0000"><b>function </b></font>like this
<font color="#FF0000"><b>is </b></font>similarly used <font color="#FF0000"><b>for </b></font>example <font color="#FF0000"><b>in </b></font>screen savers <font color="#FF0000"><b>to </b></font>stop the display<font color="#000080">.
</font>Here <font color="#FF0000"><b>is </b></font>a small example <font color="#FF0000"><b>to </b></font>see how it acts<font color="#000080">.

</font><font color="#FF0000"><b>program </b></font>the_key_pressed<font color="#000080">; </font><font color="#FF0000"><b>uses </b></font>crt<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    repeat
      </b></font>write<font color="#000080">(</font><font color="#800000">#254</font><font color="#000080">);
    </font><font color="#FF0000"><b>until </b></font>keypressed<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>This <font color="#FF0000"><b>program </b></font>should write ascii character <font color="#800000">#254 </font><font color="#FF0000"><b>to </b></font>the screen repeatedly
<font color="#FF0000"><b>until </b></font>the user presses a key<font color="#000080">.

</font>Screen Manipulation Commands
<font color="#000080">============================
</font>Clreol<font color="#000080">;  </font>Clears <font color="#FF0000"><b>to </b></font>the <font color="#FF0000"><b>end of </b></font>the line <font color="#FF0000"><b>for </b></font>the currently active window
from the current cursor position<font color="#000080">.  </font>The concept <font color="#FF0000"><b>of </b></font><font color="#000080">&quot;</font>currently active
window<font color="#000080">&quot; </font>will be explained later<font color="#000080">.

</font>Clrscr<font color="#000080">;  </font>Clears the screen<font color="#000080">.  </font>Already used <font color="#FF0000"><b>and </b></font>demonstrated<font color="#000080">.

</font>Delline<font color="#000080">;  </font>Deletes the current line containing the cursor<font color="#000080">.

</font>Insline<font color="#000080">;  </font>Inserts line at current position<font color="#000080">.

</font>PC Speaker Sounds <font color="#FF0000"><b>and </b></font>Machine Delay
<font color="#000080">===================================
</font>These are the basics <font color="#FF0000"><b>of </b></font>controlling the PC Speaker <font color="#FF0000"><b>to </b></font>make sounds<font color="#000080">.
</font>The first thing <font color="#FF0000"><b>is </b></font>that there <font color="#FF0000"><b>is </b></font>an ASCII character <font color="#800000">#7 </font>which will cause
a standard DOS PC Speaker beep<font color="#000080">.

</font><font color="#FF0000"><b>Then </b></font>there are some <font color="#FF0000"><b>pascal </b></font>procedures which will offer much more control<font color="#000080">.
</font>You will have <font color="#FF0000"><b>to </b></font>experiment <font color="#FF0000"><b>with </b></font>it using different numbers <font color="#FF0000"><b>in </b></font>the delay
<font color="#FF0000"><b>and </b></font>sound value<font color="#000080">.

</font>Delay<font color="#000080">(</font>milliseconds<font color="#000080">: </font>word<font color="#000080">); </font>will delay the <font color="#FF0000"><b>program for </b></font>approximately the
number time <font color="#FF0000"><b>in </b></font>Milliseconds<font color="#000080">.
</font>Sound<font color="#000080">(</font>hertz<font color="#000080">: </font>word<font color="#000080">); </font>will start up the PC speaker at a specified frequency<font color="#000080">.
</font>NoSound<font color="#000080">; </font>will stop the PC speaker<font color="#000080">.

</font>Here <font color="#FF0000"><b>is </b></font>an example <font color="#FF0000"><b>of </b></font>use <font color="#FF0000"><b>of </b></font>the PC speaker through TP<font color="#000080">.

</font><font color="#FF0000"><b>program </b></font>test_of_pc_speaker<font color="#000080">; </font><font color="#FF0000"><b>uses </b></font>crt<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>sound<font color="#000080">(</font><font color="#800000">1500</font><font color="#000080">);
    </font>delay<font color="#000080">(</font><font color="#800000">500</font><font color="#000080">);
    </font>nosound<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>Basically<font color="#000080">, </font>we<font color="#800000">'re emitting a sound of 1500 Hz, for a time of .5 seconds.

</font>Note<font color="#000080">: </font>The delay <font color="#FF0000"><b>procedure </b></font>can be used anytime <font color="#FF0000"><b>to </b></font><font color="#000080">&quot;</font>freeze<font color="#000080">&quot; </font>up the system
<font color="#FF0000"><b>for </b></font>a specified period <font color="#FF0000"><b>of </b></font>time<font color="#000080">, </font>say <font color="#FF0000"><b>if </b></font>we want <font color="#FF0000"><b>to </b></font>delay between writes<font color="#000080">.   

</font>Screen Positioning
<font color="#000080">==================
</font>These <font color="#FF0000"><b>is </b></font>a command <font color="#FF0000"><b>to </b></font>control positioning <font color="#FF0000"><b>of </b></font>writing <font color="#FF0000"><b>on </b></font>the screen<font color="#000080">.

</font>gotoxy<font color="#000080">(</font>x<font color="#000080">, </font>y<font color="#000080">); </font><font color="#FF0000"><b>is </b></font>a <font color="#FF0000"><b>procedure </b></font>that will position the cursor at the point
defined by x<font color="#000080">, </font>y<font color="#000080">.  </font>The standard defintion <font color="#FF0000"><b>of </b></font>the screen positioning <font color="#FF0000"><b>is
</b></font>a cartesian system like this <font color="#FF0000"><b>for </b></font>the standard video mode <font color="#000080">(</font><font color="#FF0000"><b>on </b></font>most systems
when you boot them up<font color="#000080">).

(</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">)(</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">)----------------------------------------------...  (</font>x<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">)
(</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">)
  |
(</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">4</font><font color="#000080">)
  |
  |
  |
  |
  |
  |
 ...
(</font><font color="#800000">1</font><font color="#000080">, </font>y<font color="#000080">)

</font>x <font color="#FF0000"><b>and </b></font>y <font color="#FF0000"><b>is </b></font>defined by the current video mode<font color="#000080">, </font>which <font color="#FF0000"><b>is </b></font>settable<font color="#000080">.  </font>We will
discuss how <font color="#FF0000"><b>to set </b></font>the current video mode<font color="#000080">.   </font>The standard video mode at
bootup <font color="#FF0000"><b>is </b></font><font color="#800000">80</font>x25<font color="#000080">.

</font>wherex <font color="#FF0000"><b>is </b></font>the current x position <font color="#FF0000"><b>of </b></font>the cursor<font color="#000080">, </font><font color="#FF0000"><b>while </b></font>wherey <font color="#FF0000"><b>is </b></font>the current
position <font color="#FF0000"><b>of </b></font>the y variable<font color="#000080">.  </font>gotoxy<font color="#000080">(</font>wherex<font color="#000080">, </font>wherey<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>is </b></font>valid <font color="#FF0000"><b>as </b></font>an
example<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>will move the cursor DIRECTLY down one <font color="#FF0000"><b>unit</b></font><font color="#000080">, </font>irreguardless
<font color="#FF0000"><b>of </b></font>where it <font color="#FF0000"><b>is </b></font><font color="#000080">(</font><font color="#FF0000"><b>as </b></font>long <font color="#FF0000"><b>as </b></font>x <font color="#FF0000"><b>and </b></font>y are valid<font color="#000080">, </font>most <font color="#FF0000"><b>of </b></font>these commands are
inactive <font color="#FF0000"><b>if </b></font>they get bad data<font color="#000080">)

</font>The view window can also actually be changed<font color="#000080">.  </font>The window <font color="#FF0000"><b>function </b></font>can
be used <font color="#FF0000"><b>for </b></font>this purpose<font color="#000080">.  </font>The window <font color="#FF0000"><b>is </b></font>measured by the coordinate <font color="#FF0000"><b>of
</b></font>the upper left hand corner <font color="#FF0000"><b>of </b></font>the window <font color="#000080">(</font>x1<font color="#000080">, </font>y1<font color="#000080">), </font><font color="#FF0000"><b>and </b></font>the lower right
hand corner <font color="#FF0000"><b>of </b></font>the window<font color="#000080">(</font>x2<font color="#000080">, </font>y2<font color="#000080">).  </font>The syntax <font color="#FF0000"><b>if </b></font>we call window <font color="#FF0000"><b>is
</b></font>window<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">);  </font>This <font color="#FF0000"><b>is </b></font>one <font color="#FF0000"><b>procedure </b></font>that you really need <font color="#FF0000"><b>to
</b></font>experiment <font color="#FF0000"><b>with to </b></font>see its effects<font color="#000080">.  </font><font color="#FF0000"><b>As </b></font>a note<font color="#000080">, </font>most<font color="#000080">, </font><font color="#FF0000"><b>if not </b></font>all <font color="#FF0000"><b>of </b></font>the
screen writing commands are affected by this window<font color="#000080">...

</font>Changing Text Color<font color="#000080">, </font>Appearance<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>Mode
<font color="#000080">=========================================
</font>These are functions <font color="#FF0000"><b>and </b></font>procedures which control the appearance <font color="#FF0000"><b>of </b></font>text<font color="#000080">.

</font>HighVideo<font color="#000080">; </font>will select high intensity characters<font color="#000080">.
</font>LowVideo<font color="#000080">; </font>will select low intensity characters<font color="#000080">.
</font>NormVideo<font color="#000080">; </font>will select the original intensity at startup<font color="#000080">.

</font>Textcolor<font color="#000080">(</font>color<font color="#000080">); </font><font color="#FF0000"><b>and </b></font>Textbackground<font color="#000080">(</font>color<font color="#000080">); </font>are used <font color="#FF0000"><b>to </b></font>control the
foreground <font color="#FF0000"><b>and </b></font>background color respectively<font color="#000080">.  </font>Foreground colors
work from <font color="#800000">0</font><font color="#000080">-</font><font color="#800000">15 </font><font color="#FF0000"><b>and </b></font>the background colors are from <font color="#800000">0</font><font color="#000080">-</font><font color="#800000">8.  </font>Blinking
foreground text adds <font color="#800000">128 </font><font color="#FF0000"><b>to </b></font>the value<font color="#000080">.  </font>A list <font color="#FF0000"><b>of </b></font>text color constants
which are equated <font color="#FF0000"><b>with </b></font>these numbers can be found <font color="#FF0000"><b>on </b></font>page <font color="#800000">192 </font><font color="#FF0000"><b>of </b></font>the
TP programmer<font color="#800000">'s reference.

</font>LastMode <font color="#FF0000"><b>is </b></font>a word variable which will hold the current video mode that
the system was <font color="#FF0000"><b>in </b></font>when the <font color="#FF0000"><b>program </b></font>started execution<font color="#000080">.

</font>Changing text mode actually involves changing what x <font color="#FF0000"><b>and </b></font>y <font color="#FF0000"><b>as </b></font>was originally
stated <font color="#FF0000"><b>in </b></font>the description <font color="#FF0000"><b>of </b></font>gotoxy<font color="#000080">.  </font>textmode<font color="#000080">(</font>modeconstant<font color="#000080">); </font>actually
does this<font color="#000080">.  </font><font color="#FF0000"><b>As with </b></font>everything <font color="#FF0000"><b>in </b></font>this part<font color="#000080">, </font>you should experiment <font color="#FF0000"><b>with
</b></font>all <font color="#FF0000"><b>of </b></font>the commands <font color="#FF0000"><b>and </b></font>procedures defined<font color="#000080">, </font>because you can<font color="#800000">'t exactly
</font>be showed the effects <font color="#FF0000"><b>of </b></font>these commands <font color="#FF0000"><b>in </b></font>this tutorial<font color="#000080">.  </font>A list <font color="#FF0000"><b>of
</b></font>mode constants can be found <font color="#FF0000"><b>on </b></font>page <font color="#800000">26 </font><font color="#FF0000"><b>of </b></font>the TP programmer<font color="#800000">'s reference.

</font>Here <font color="#FF0000"><b>is </b></font>a sample <font color="#FF0000"><b>program </b></font>which demonstrates several <font color="#FF0000"><b>of </b></font>the functions <font color="#FF0000"><b>and
</b></font>procedures listed<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>gives us an idea <font color="#FF0000"><b>of </b></font>what can be done <font color="#FF0000"><b>with
</b></font>manipulation <font color="#FF0000"><b>of </b></font>text windows<font color="#000080">, </font>colors<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>so forth<font color="#000080">.  </font>Be sure <font color="#FF0000"><b>to </b></font>run this
one<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>experiment <font color="#FF0000"><b>with </b></font>changing some <font color="#FF0000"><b>of </b></font>the values <font color="#FF0000"><b>and </b></font>actions <font color="#FF0000"><b>to </b></font>see
what happens<font color="#000080">.

</font><font color="#FF0000"><b>program </b></font>demo_of_fun_text_manipulation<font color="#000080">; </font><font color="#FF0000"><b>uses </b></font>crt<font color="#000080">;
  </font><font color="#FF0000"><b>var
    </b></font>oldx<font color="#000080">, </font>oldy<font color="#000080">: </font>byte<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font><font color="#008000"><i>{ save original position of cursor so we can return there later }
    </i></font>oldx <font color="#000080">:= </font>wherex<font color="#000080">;
    </font>oldy <font color="#000080">:= </font>wherey<font color="#000080">;

    </font>window<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">20</font><font color="#000080">,</font><font color="#800000">20</font><font color="#000080">);
    </font>textbackground<font color="#000080">(</font>Blue<font color="#000080">);
    </font>clrscr<font color="#000080">; </font><font color="#008000"><i>{ blue background now b/c blue when clrscr was called }
    </i></font>highvideo<font color="#000080">;
    </font>window<font color="#000080">(</font><font color="#800000">10</font><font color="#000080">,</font><font color="#800000">10</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">);
    </font>textbackground<font color="#000080">(</font>Green<font color="#000080">);
    </font>clrscr<font color="#000080">;
    </font>textcolor<font color="#000080">(</font>LightCyan <font color="#000080">+ </font>blink<font color="#000080">);
    </font>write<font color="#000080">(</font><font color="#800000">'Hello, how are we doing today?'</font><font color="#000080">);
    </font>window<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">80</font><font color="#000080">,</font><font color="#800000">25</font><font color="#000080">);
    </font>gotoxy<font color="#000080">(</font>oldx<font color="#000080">, </font>oldy<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>Reading Characters from the Keyboard
<font color="#000080">====================================
</font>You may have been wondering<font color="#000080">, </font>how <font color="#FF0000"><b>to </b></font>directly read things from the keyboard<font color="#000080">.
</font>The CRT offers a <font color="#FF0000"><b>function </b></font>called readkey<font color="#000080">, </font>which <font color="#FF0000"><b>is </b></font>a parameterless <font color="#FF0000"><b>function
</b></font>that returns a character<font color="#000080">.  </font>Unlike read <font color="#FF0000"><b>or </b></font>readln<font color="#000080">, </font>it does <font color="#FF0000"><b>not </b></font>require a
CR <font color="#FF0000"><b>to </b></font>initiate<font color="#000080">.  </font>You may see this by replacing a character read from the
keyboard somewhere <font color="#FF0000"><b>in </b></font>your <font color="#FF0000"><b>program with </b></font>something like this<font color="#000080">:

                </font>answer <font color="#000080">:= </font>readkey<font color="#000080">;

</font>You will notice that you did <font color="#FF0000"><b>not </b></font>have <font color="#FF0000"><b>to </b></font>press ENTER <font color="#FF0000"><b>to </b></font>move <font color="#FF0000"><b>on</b></font><font color="#000080">.  </font>Also<font color="#000080">,
</font>you will notice that the character didn<font color="#800000">'t echo.  Very useful for password
</font>applications<font color="#000080">.

</font>The next advantage <font color="#FF0000"><b>of </b></font>readkey <font color="#FF0000"><b>is </b></font>that it can be used <font color="#FF0000"><b>to </b></font>read about every
key <font color="#FF0000"><b>or </b></font>key combination <font color="#FF0000"><b>on </b></font>the keyboard<font color="#000080">.  </font><font color="#FF0000"><b>For </b></font>this tutorial<font color="#000080">, </font>we will discuss
simply the keys that can be accessed via one keypress using a basic standard
<font color="#FF0000"><b>to </b></font>be discussed <font color="#FF0000"><b>in </b></font>the next paragraph<font color="#000080">.

</font>Extended keys<font color="#000080">, </font>like the <font color="#FF0000"><b>function </b></font>keys<font color="#000080">, </font><font color="#FF0000"><b>or </b></font>the arrow keypad may be read
using readkey<font color="#000080">.  </font>These keys generate a <font color="#800000">#0 </font>character <font color="#FF0000"><b>as </b></font>their first character
followed by an extended scan code<font color="#000080">.  </font>These vary depending upon which key
<font color="#FF0000"><b>is </b></font>depressed<font color="#000080">.  </font><font color="#FF0000"><b>To </b></font>read extended keys<font color="#000080">, </font>we would have <font color="#FF0000"><b>to </b></font>use a structure
such <font color="#FF0000"><b>as </b></font>this<font color="#000080">:

            </font>char <font color="#000080">:= </font>readkey<font color="#000080">;
            </font><font color="#FF0000"><b>if </b></font>char <font color="#000080">= </font><font color="#800000">#0 </font><font color="#FF0000"><b>then
              </b></font>char <font color="#000080">:= </font>readkey<font color="#000080">;

</font>Most <font color="#FF0000"><b>of </b></font>the one press keys <font color="#FF0000"><b>on </b></font>the keyboard may be detected using this
method<font color="#000080">.  </font>Examples <font color="#FF0000"><b>of </b></font>those keys which can<font color="#800000">'t be detected using the
</font>method described by the snippet <font color="#FF0000"><b>of </b></font>code above are the shift keys<font color="#000080">,
</font>capslock<font color="#000080">, </font>ScrollLock<font color="#000080">, </font>NumLock<font color="#000080">, </font>F11<font color="#000080">, </font>F12<font color="#000080">, </font>the CTRL keys<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>the ALT
keys<font color="#000080">.  </font>There are other methods available <font color="#FF0000"><b>for </b></font>those keys <font color="#FF0000"><b>and </b></font>key comb<font color="#000080">-
</font>inations<font color="#000080">.  </font>I recommend <font color="#FF0000"><b>as </b></font>practice that you <font color="#FF0000"><b>set </b></font>up a reader <font color="#FF0000"><b>program </b></font>that
will tell you what the extended character codes are <font color="#FF0000"><b>for </b></font>each <font color="#FF0000"><b>of </b></font>the
extended keys <font color="#000080">(</font>any key <font color="#FF0000"><b>not on </b></font>the basic keyboard<font color="#000080">).

</font>Practice Programming Problem <font color="#800000">#14
</font><font color="#000080">================================
</font>Create a <font color="#FF0000"><b>program in Pascal and </b></font>entirely <font color="#FF0000"><b>Pascal </b></font>that will <font color="#FF0000"><b>do </b></font>the following<font color="#000080">:

</font><font color="#800000">1</font><font color="#000080">) </font>Using normal text mode<font color="#000080">, </font><font color="#FF0000"><b>set </b></font>up a screen that has a green background
all the way around the screen <font color="#FF0000"><b>as </b></font>a frame <font color="#FF0000"><b>of </b></font><font color="#800000">4 </font>units <font color="#FF0000"><b>in </b></font>size all the way
around<font color="#000080">.  </font>Inside <font color="#FF0000"><b>of </b></font>that<font color="#000080">, </font>place a red frame <font color="#FF0000"><b>of </b></font><font color="#800000">1 </font><font color="#FF0000"><b>unit </b></font>all the way around<font color="#000080">.

</font><font color="#800000">2</font><font color="#000080">) </font>Inside all <font color="#FF0000"><b>of </b></font>the frames described <font color="#FF0000"><b>in </b></font>part <font color="#800000">1</font><font color="#000080">, </font><font color="#FF0000"><b>set </b></font>up a title that
states <font color="#000080">&quot;</font>Keypress Detector<font color="#000080">&quot; </font><font color="#FF0000"><b>on </b></font>the first line available below the red
frame<font color="#000080">, </font><font color="#FF0000"><b>in </b></font>an high<font color="#000080">-</font>intensity light cyan<font color="#000080">.  </font>Be sure this title <font color="#FF0000"><b>is </b></font>NEVER
overwritten by scrolling text<font color="#000080">.

</font><font color="#800000">3</font><font color="#000080">) </font>The <font color="#000080">&quot;</font>Keypress Detector<font color="#000080">&quot; </font>title should be <font color="#FF0000"><b>on </b></font>a black background<font color="#000080">.  </font>Also<font color="#000080">,
</font>the text which shows what keys we have pressed are should be a dull
lightblue <font color="#FF0000"><b>on </b></font>a black background<font color="#000080">.  </font>The exception <font color="#FF0000"><b>to </b></font>the last statment <font color="#FF0000"><b>is
</b></font>that any standard key identity <font color="#FF0000"><b>in </b></font>the statement should be <font color="#FF0000"><b>in </b></font>a bright
green<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>any extended key identity <font color="#FF0000"><b>in </b></font>the statment should be <font color="#FF0000"><b>in </b></font>a
bright red<font color="#000080">.  </font>Key identity will be evident <font color="#FF0000"><b>as </b></font>I give a sample<font color="#000080">.

(</font>properly inside the <font color="#000080">&quot;</font>frame<font color="#000080">&quot;)

</font>Keypress Detector <font color="#000080">(</font>press ESC <font color="#800000">5 </font>times <font color="#FF0000"><b>to </b></font>terminate<font color="#000080">)
</font>You pressed the F1 key<font color="#000080">.
</font>You pressed the SPACE key<font color="#000080">.
</font>You pressed the LEFT key<font color="#000080">.
</font>You pressed the Backspace key<font color="#000080">.

</font>Note<font color="#000080">: </font>Some <font color="#FF0000"><b>of </b></font>the keys <font color="#FF0000"><b>on </b></font>the keyboard are singular control characters<font color="#000080">.
</font>Look at your ASCII chart<font color="#000080">.  </font><font color="#FF0000"><b>For </b></font>example<font color="#000080">, </font>the TAB key <font color="#FF0000"><b>is </b></font>actually ASCII
character <font color="#800000">#9</font><font color="#000080">, </font><font color="#FF0000"><b>and </b></font>character <font color="#800000">#9 </font>should be recognized <font color="#FF0000"><b>as </b></font>such<font color="#000080">...

</font>F1<font color="#000080">, </font>SPACE<font color="#000080">, </font>LEFT<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>BACKSPACE are the key identities <font color="#FF0000"><b>as </b></font>I described
earlier<font color="#000080">...

</font><font color="#800000">4</font><font color="#000080">) </font>Make sure that <font color="#FF0000"><b>in </b></font>order <font color="#FF0000"><b>to </b></font>terminate the <font color="#FF0000"><b>program</b></font><font color="#000080">, </font>the ESC key gets
pressed <font color="#800000">5 </font>times<font color="#000080">, </font><font color="#FF0000"><b>not </b></font>consecutively <font color="#000080">(</font>be sure <font color="#FF0000"><b>to </b></font>indicate the ESC key has
been pressed each time<font color="#000080">).  </font>Upon termination<font color="#000080">, </font>the entire screen should
visibly scroll up <font color="#FF0000"><b>until </b></font>none <font color="#FF0000"><b>of </b></font>what we wrote <font color="#FF0000"><b>is </b></font>visible anymore <font color="#000080">(</font>clue<font color="#000080">:
</font>use delay<font color="#000080">).

</font>Next Time
<font color="#000080">=========
</font>We will discuss the usage <font color="#FF0000"><b>of </b></font>the QuickSort <font color="#FF0000"><b>and </b></font>ShellSort algorithms<font color="#000080">.
</font>Please by all means send comments <font color="#FF0000"><b>to </b></font>ggrotz<font color="#000080">@</font><font color="#800000">2</font>sprint<font color="#000080">.</font>net<font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to TUTOR SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0017.PAS">Original</a><b>]</b></p></body>
</html>
