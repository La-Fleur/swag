<html>
<head><title> "SCRWRIT1.PAS" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0011.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
Does any one know of a way to Write 80 chrs to the bottom line of the
screen without the screen advancing?

You're gonna have to Write directly to the screen : the problem is that,
when you use std ways to Write to the screen, the cursor is always one
Character ahead of the Text you displayed... so standard display procs
can not be used to Write to the 80th Character of the 25th line.

Here is a simple proc to Write Text directly to the screen :
}

</i></font><font color="#FF0000"><b>Const
     </b></font>VideoSeg  <font color="#000080">: </font>Word <font color="#000080">= </font><font color="#800000">$b800 </font><font color="#000080">;    </font><font color="#008000"><i>{ Replace With $b000 if no color card }

</i></font><font color="#FF0000"><b>Procedure </b></font>DisplayString<font color="#000080">(</font>x<font color="#000080">, </font>y <font color="#000080">: </font>Byte<font color="#000080">; </font>Zlika <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">; </font>Attr <font color="#000080">: </font>Byte<font color="#000080">); </font><font color="#FF0000"><b>Assembler </b></font><font color="#000080">;

</font><font color="#008000"><i>{ x and y are 0-based }
</i></font><font color="#FF0000"><b>Asm
  </b></font><font color="#FF00FF">Mov  ES, VideoSeg        </font><font color="#008000"><i>{ Initialize screen segment adr }

  { Let's Compute the screen address of coordinates (x, y) }
  { Address:=(160*y)+(x ShL 2) ; }
  </i></font><font color="#FF00FF">Mov  AL, 160             </font><font color="#008000"><i>{ 160 Bytes per screen line }
  </i></font><font color="#FF00FF">Mul  Byte Ptr y
  Mov  BL, x
  Xor  BH, BH
  ShL  BX, 1               </font><font color="#008000"><i>{ 2 Bytes per on-screen Character }
  </i></font><font color="#FF00FF">Add  BX, AX              </font><font color="#008000"><i>{ BX contains offset where to display }

  { Initialize stuff... }
  </i></font><font color="#FF00FF">Push DS                  </font><font color="#008000"><i>{ Save DS }
  </i></font><font color="#FF00FF">ClD                      </font><font color="#008000"><i>{ String ops increment DI, SI }
  </i></font><font color="#FF00FF">LDS  SI, Zlika           </font><font color="#008000"><i>{ DS:DI points to String }
  </i></font><font color="#FF00FF">LodSB                    </font><font color="#008000"><i>{ Load String length in AL }
  </i></font><font color="#FF00FF">Mov  CL, AL              </font><font color="#008000"><i>{ Copy it to CL }
  </i></font><font color="#FF00FF">Xor  CH, CH              </font><font color="#008000"><i>{ CX contains String length }
  </i></font><font color="#FF00FF">Mov  DI, BX              </font><font color="#008000"><i>{ DI contains address where to display }
  </i></font><font color="#FF00FF">Mov  AH, Attr            </font><font color="#008000"><i>{ Attribute Byte in AH }
</i></font><font color="#FF00FF">@Boucle:
  LodSB                    </font><font color="#008000"><i>{ Load next Char to display in AL }
  </i></font><font color="#FF00FF">StoSW                    </font><font color="#008000"><i>{ Store Word (attr &amp; Char) to the screen }
  </i></font><font color="#FF00FF">Loop @Boucle             </font><font color="#008000"><i>{ Loop For all Chars }

  </i></font><font color="#FF00FF">Pop  DS                  </font><font color="#008000"><i>{ Restore DS }
</i></font><font color="#FF0000"><b>end </b></font><font color="#000080">;

</font><font color="#008000"><i>{
Furthermore, this is definitely faster than using Crt.Write...
I will ask those ones owning a CGA card to Forgive me, I ommited to
include the usual snow-checking... but this intends to be a short
example :-))
Also note that there is no kind of checking, so you can Write out of
the screen if you want... but that's no good idea.
BTW, the attribute Byte value is Computed With the &quot;magic Formula&quot;
Attr:=Foreground_Color + (16 * Background_color) [ + 128 For blinking ]
}
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0011.PAS">Original</a><b>]</b></p></body>
</html>
