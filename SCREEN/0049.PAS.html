<html>
<head><title> "Clearing the Screen" by MARK LEWIS</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0049.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt; If you're not using the CRT unit, that should write through the ansi
&gt; driver just fine.  I don't know about the codes you used, but they
&gt; won't be written directly to video memory.  If you're using the CRT
&gt; unit then he's right, it won't work without a slight modification.
 &gt;My whole point behind this was that you DON'T need CRT to
&gt; clear the screen like this.  You only need ANSI.SYS loaded.

you don't even need ANSI.SYS if you 'cheat' like borland did -=B-)
}

</i></font><font color="#FF0000"><b>procedure </b></font>clrscr<font color="#000080">; </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm
  </b></font><font color="#FF00FF">MOV    AX, 0600h    </font><font color="#008000"><i>{BIOS Scroll Up}   { &lt;&lt;---- !!!!!! }
  </i></font><font color="#FF00FF">MOV    BH, 07h      </font><font color="#008000"><i>{Mono Attribute}
  </i></font><font color="#FF00FF">XOR    CX, CX       </font><font color="#008000"><i>{top left = 0,0}
  </i></font><font color="#FF00FF">MOV    DX, 184fh    </font><font color="#008000"><i>{bottom right = 24,79}
  </i></font><font color="#FF00FF">INT    10h          </font><font color="#008000"><i>{BIOS interrupt}   { do the clear }
  </i></font><font color="#FF00FF">MOV    AH, 02h      </font><font color="#008000"><i>{BIOS Set Cursor Position}  { now let's }
  </i></font><font color="#FF00FF">XOR    DX, DX       </font><font color="#008000"><i>{DH = Row = 00, DL = Col = 00}
  </i></font><font color="#FF00FF">XOR    BH, BH       </font><font color="#008000"><i>{Do it on Page 0}    { move the cursor to }
  </i></font><font color="#FF00FF">INT    10h          </font><font color="#008000"><i>{BIOS Interrupt}     { the top left corner }
</i></font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#008000"><i>{ yeah, it's hardcoded for 25 lines and 80 columns }

</i></font><font color="#FF0000"><b>uses
  </b></font>DOS<font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>clrscr<font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>regs <font color="#000080">: </font>registers<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>regs<font color="#000080">.</font>AX <font color="#000080">:= </font><font color="#800000">$0600</font><font color="#000080">;   </font><font color="#008000"><i>{BIOS Scroll Up}   { &lt;&lt;---- !!!!!! }
  </i></font>regs<font color="#000080">.</font>BH <font color="#000080">:= </font><font color="#800000">$07</font><font color="#000080">;     </font><font color="#008000"><i>{Mono Attribute}
  </i></font>regs<font color="#000080">.</font>CX <font color="#000080">:= </font><font color="#800000">$0000</font><font color="#000080">;   </font><font color="#008000"><i>{top left = 0,0}
  </i></font>regs<font color="#000080">.</font>DX <font color="#000080">:= </font><font color="#800000">$184F</font><font color="#000080">;   </font><font color="#008000"><i>{bottom right = 24,79}
  </i></font>INTR<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">, </font>regs<font color="#000080">);    </font><font color="#008000"><i>{BIOS interrupt}   { do the clear }
  </i></font>regs<font color="#000080">.</font>AH <font color="#000080">:= </font><font color="#800000">$02</font><font color="#000080">;     </font><font color="#008000"><i>{BIOS Set Cursor Position}  { now let's }
  </i></font>regs<font color="#000080">.</font>DX <font color="#000080">:= </font><font color="#800000">$0000</font><font color="#000080">;   </font><font color="#008000"><i>{DH = Row = 00, DL = Col = 00}
  </i></font>regs<font color="#000080">.</font>BH <font color="#000080">:= </font><font color="#800000">$0000</font><font color="#000080">;   </font><font color="#008000"><i>{Do it on Page 0}    { move the cursor to }
  </i></font>INTR<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">, </font>regs<font color="#000080">);    </font><font color="#008000"><i>{BIOS Interrupt}     { the top left corner } </i></font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0049.PAS">Original</a><b>]</b></p></body>
</html>
