<html>
<head><title> "Fast Video Output to memory" by AVONTURE CHRISTOPHE</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0106.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{

   Very fast screen output in 80*25 mode by direct access to video memory


               &Eacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&raquo;
               &ordm;                                        &ordm;&deg;
               &ordm;          AVONTURE CHRISTOPHE           &ordm;&deg;
               &ordm;              AVC SOFTWARE              &ordm;&deg;
               &ordm;     BOULEVARD EDMOND MACHTENS 157/53   &ordm;&deg;
               &ordm;           B-1080 BRUXELLES             &ordm;&deg;
               &ordm;              BELGIQUE                  &ordm;&deg;
               &ordm;                                        &ordm;&deg;
               &Egrave;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&frac14;&deg;
               &deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;

}

</i></font><font color="#FF0000"><b>Procedure </b></font>WriteStr   <font color="#000080">(</font>Texte <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">);

</font><font color="#FF0000"><b>Var </b></font>Attribut <font color="#000080">: </font>Word<font color="#000080">;
    </font>Offset   <font color="#000080">: </font>Word<font color="#000080">;
    </font>i        <font color="#000080">: </font>Byte<font color="#000080">;

</font><font color="#FF0000"><b>Begin

     </b></font>Attribut <font color="#000080">:= ((</font>TextAttr <font color="#000080">+ (</font>TextBack <font color="#FF0000"><b>Shl </b></font><font color="#800000">4</font><font color="#000080">)) </font><font color="#FF0000"><b>shl </b></font><font color="#800000">8</font><font color="#000080">);

     </font><font color="#008000"><i>{ The Pge variable is the current screen page -There is a function in
       interrupt 10h nammed GetActivePage- So you should code something like
       Pge := GetActivePage where GetActivePage is a function that call this
       interrupt. You can also set this variable manually so if you code
       Pge := 0 then the screen output will be made to the first screen; if
       you code Pge := 1, this output will be made to the second screen, and
       so on until 7.  Be carefull: if the active screen page is the third
       and you have code Pge := 0 then you can't see the output because
       there are made on an invisible video page. }

     </i></font>offset <font color="#000080">:= </font>WhereY <font color="#000080">* </font><font color="#800000">160 </font><font color="#000080">+ </font>WhereX <font color="#FF0000"><b>Shl </b></font><font color="#800000">1 </font><font color="#000080">+ (</font>Pge <font color="#FF0000"><b>shl </b></font><font color="#800000">12</font><font color="#000080">);

     </font><font color="#FF0000"><b>For </b></font>i<font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>Length <font color="#000080">(</font>Texte<font color="#000080">) </font><font color="#FF0000"><b>do
         Begin
            </b></font>MemW<font color="#000080">[</font><font color="#800000">$B800</font><font color="#000080">:</font>Offset<font color="#000080">] := </font>Attribut <font color="#FF0000"><b>or </b></font>ord<font color="#000080">(</font>Texte<font color="#000080">[</font>i<font color="#000080">]);
            </font>Inc <font color="#000080">(</font>Offset<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">);
         </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

     </font>GotoXy <font color="#000080">(</font>WhereX <font color="#000080">+ </font>Length<font color="#000080">(</font>Texte<font color="#000080">), </font>WhereY<font color="#000080">);

</font><font color="#FF0000"><b>End</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Procedure </b></font>WriteStrLn   <font color="#000080">(</font>Texte <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">);

</font><font color="#FF0000"><b>Var </b></font>Attribut <font color="#000080">: </font>Word<font color="#000080">;
    </font>Offset   <font color="#000080">: </font>Word<font color="#000080">;
    </font>i        <font color="#000080">: </font>Byte<font color="#000080">;

</font><font color="#FF0000"><b>Begin

     </b></font>Attribut <font color="#000080">:= (((</font>TextBack <font color="#FF0000"><b>Shl </b></font><font color="#800000">4</font><font color="#000080">) + </font>TextAttr<font color="#000080">) </font><font color="#FF0000"><b>shl </b></font><font color="#800000">8</font><font color="#000080">);

     </font><font color="#008000"><i>{ The Pge variable is the current screen page -There is a function in
       interrupt 10h nammed GetActivePage- So you should code something like
       Pge := GetActivePage where GetActivePage is a function that call this
       interrupt. You can also set this variable manually so if you code
       Pge := 0 then the screen output will be made to the first screen; if
       you code Pge := 1, this output will be made to the second screen, and
       so on until 7.  Be carefull: if the active screen page is the third
       and you have code Pge := 0 then you can't see the output because
       there are made on an invisible video page. }

     </i></font>offset <font color="#000080">:= </font>WhereY <font color="#000080">* </font><font color="#800000">160 </font><font color="#000080">+ </font>WhereX <font color="#FF0000"><b>Shl </b></font><font color="#800000">1 </font><font color="#000080">+ (</font>Pge <font color="#FF0000"><b>shl </b></font><font color="#800000">12</font><font color="#000080">);

     </font><font color="#FF0000"><b>For </b></font>i<font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>Length <font color="#000080">(</font>Texte<font color="#000080">) </font><font color="#FF0000"><b>do
         Begin
            </b></font>MemW<font color="#000080">[</font><font color="#800000">$B800</font><font color="#000080">:</font>Offset<font color="#000080">] := </font>Attribut <font color="#FF0000"><b>or </b></font>ord<font color="#000080">(</font>Texte<font color="#000080">[</font>i<font color="#000080">]);
            </font>Inc <font color="#000080">(</font>Offset<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">);
         </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

     </font>GotoXy <font color="#000080">(</font><font color="#800000">0</font><font color="#000080">, </font>WhereY<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">);

</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>WriteStrXY <font color="#000080">(</font>X<font color="#000080">, </font>Y<font color="#000080">, </font>TAttr<font color="#000080">, </font>TBack <font color="#000080">: </font>Word<font color="#000080">; </font>Text <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">);

</font><font color="#008000"><i>{ Ecrit sur la page sp‚cifi‚e, le texte donn‚}

</i></font><font color="#FF0000"><b>Var </b></font>Offset   <font color="#000080">: </font>Word<font color="#000080">;
    </font>I        <font color="#000080">: </font>Byte<font color="#000080">;
    </font>Attr     <font color="#000080">: </font>Word<font color="#000080">;
    </font>AdressP  <font color="#000080">: </font>Word <font color="#FF0000"><b>Absolute </b></font><font color="#800000">$0040</font><font color="#000080">:</font><font color="#800000">$004E</font><font color="#000080">;</font><font color="#008000"><i>{Address of the Active Screen Page}

</i></font><font color="#FF0000"><b>Begin

    </b></font>Offset <font color="#000080">:= </font>Y <font color="#000080">* </font><font color="#800000">160 </font><font color="#000080">+ </font>X <font color="#FF0000"><b>Shl </b></font><font color="#800000">1 </font><font color="#000080">+ </font>AdressP<font color="#000080">;
    </font>Attr <font color="#000080">:= ((</font>TAttr<font color="#000080">+(</font>TBack <font color="#FF0000"><b>Shl </b></font><font color="#800000">4</font><font color="#000080">)) </font><font color="#FF0000"><b>Shl </b></font><font color="#800000">8</font><font color="#000080">);

    </font><font color="#FF0000"><b>For </b></font>I <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>Length <font color="#000080">(</font>Text<font color="#000080">) </font><font color="#FF0000"><b>Do
        Begin
           </b></font>MemW<font color="#000080">[</font>RamVideo<font color="#000080">:</font>Offset<font color="#000080">] := </font>Attr <font color="#FF0000"><b>OR </b></font>Ord<font color="#000080">(</font>Text<font color="#000080">[</font>I<font color="#000080">]);
           </font>Inc <font color="#000080">(</font>Offset<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">);
        </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0106.PAS">Original</a><b>]</b></p></body>
</html>
