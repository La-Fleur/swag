<html>
<head><title> "Capturing Video Strings" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0058.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt; I am writing some Pascal Units for speech synthesis to be added
&gt; to a DOS based application. In a part of the application, character
&gt; strings are written to the screen. I need to capture those
&gt; strings from the video buffer and pass them as parameters to
&gt; some functions. How do I do this? If anyone can provide code,
&gt; I would really appreciate it!

Well, that's easy, with an CGA/EGA/VGA graphics card, the video
memory resides at $B800:0000, and is always Character-Attribute,
two bytes, so to grab something from screen try this:
}

</i></font><font color="#FF0000"><b>function </b></font>onscreen<font color="#000080">(</font>where_x<font color="#000080">, </font>where_y<font color="#000080">, </font>how_long <font color="#000080">: </font>byte<font color="#000080">);
</font><font color="#FF0000"><b>var
  </b></font>dumb <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
  </font>x    <font color="#000080">: </font>word<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>dumb <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>x <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>how_long <font color="#000080">- </font><font color="#800000">1 </font><font color="#FF0000"><b>do
    </b></font>dumb <font color="#000080">:= </font>dumb <font color="#000080">+ </font>chr<font color="#000080">(</font>mem<font color="#000080">[</font><font color="#800000">$b800 </font><font color="#000080">: </font>where_y <font color="#000080">* </font><font color="#800000">160 </font><font color="#000080">+ (</font>where_x <font color="#000080">+ </font>x <font color="#000080">* </font><font color="#800000">2</font><font color="#000080">)]);
  </font>onscreen <font color="#000080">:= </font>dumb<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0058.PAS">Original</a><b>]</b></p></body>
</html>
