<html>
<head><title> "Partial Screen Scrolling Routines" by RUNE KVAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0087.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&acute; You mean there is a way to have just a PART of the screen scroll with
&acute; registers?!?!?

All this routines is importet from Myown ASM-lib. And works fine i
Turbo Pascal. v7

Use this routine to &quot;scroll&quot; the screen :-))
My English is not good enough to explain Exactly that it does!
}

</i></font><font color="#FF0000"><b>Procedure </b></font>ScreenPos<font color="#000080">(</font>Plass<font color="#000080">:</font>word<font color="#000080">); </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm
    </b></font><font color="#FF00FF">mov bx,plass
    mov dx,3d4h
    mov al,0ch
    mov ah,bh
    out dx,ax
    mov al,0dh
    mov ah,bl
    out dx,ax
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#008000"><i>{
Thos routine will tell you there the &quot;screen&quot; should start Writing the
screen one more time...
It's just called a Split, screen Routine...:)
}

</i></font><font color="#FF0000"><b>procedure </b></font>Split_screen<font color="#000080">(</font>Linje<font color="#000080">:</font>word<font color="#000080">); </font>assember<font color="#000080">;
</font><font color="#FF0000"><b>label </b></font>crt_ok<font color="#000080">, </font>Vga_split<font color="#000080">;
</font><font color="#FF0000"><b>asm
        </b></font><font color="#FF00FF">mov     dx,3d4h
crt_ok:
        mov     al,18h
        out     dx,al
        inc     dx
 
        MOV     AX,linje                
        out     dx,al
        dec     dx
VGA_split:
        mov     al,7
        out     dx,al
        inc     dx
        in      al,dx
        mov     bl,AH
        and     bl,1
        mov     cl,4
        shl     bl,cl
        and     al,not 10h
        or      al,bl
        out     dx,al
        dec     dx
        mov     al,9
        out     dx,al
        inc     dx
        in      al,dx
        and     al,not 40h
        out     dx,al
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#008000"><i>{ This routine will wait for the vertical Retrace! }

</i></font><font color="#FF0000"><b>Procedure </b></font>WaitBorder<font color="#000080">; </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>label </b></font>wb1<font color="#000080">,</font>wb2<font color="#000080">;
</font><font color="#FF0000"><b>asm
        </b></font><font color="#FF00FF">MOV DX,3dah
wb1:    in al,dx
        test al,8
        jnz wb1
wb2:    in al,dx
        test al,8
        jz wb2
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{
This was all!

Everytime you change some om the Split_Screens, and ScreenPos, Do wait
for the Vertical Retrace, if you don't want a flicking screen! :-)

And remember by using these registers in Text-modus, will show you
&quot;two&quot; pages, and might give you some errors.

The best place to use these routines is if you find a VGA, MODEX-
library!
But I will work half the way it should in standard VGA, 320x200. Mode.
But I know you will get it work :-))
}
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0087.PAS">Original</a><b>]</b></p></body>
</html>
