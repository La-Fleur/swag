<html>
<head><title> "Screen Saving Demo" by GREG ESTABROOKS</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0062.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{***********************************************************************}
</i></font><font color="#FF0000"><b>PROGRAM </b></font>ScreenPortDemo<font color="#000080">;         </font><font color="#008000"><i>{ Sept 6/93, Greg Estabrooks.           }
</i></font><font color="#FF0000"><b>USES </b></font>CRT<font color="#000080">;                       </font><font color="#008000"><i>{ LastMode,Clrscr.                      }
</i></font><font color="#FF0000"><b>CONST
     </b></font>Speed <font color="#000080">= </font><font color="#800000">50</font><font color="#000080">;                </font><font color="#008000"><i>{ Define speed for moving screen portion}
     {******** Change this to make the screen move faster/slower *******}
</i></font><font color="#FF0000"><b>TYPE
        </b></font>ScreenPort <font color="#000080">= </font><font color="#FF0000"><b>RECORD
                        </b></font>ScreenSt <font color="#000080">:</font><font color="#FF0000"><b>ARRAY</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">4000</font><font color="#000080">] </font><font color="#FF0000"><b>OF </b></font>BYTE<font color="#000080">;
                        </font>NumCols<font color="#000080">,
                        </font>NumRows  <font color="#000080">:</font>BYTE<font color="#000080">;
                     </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

        </font>ScreenPtr <font color="#000080">= ^</font>ScreenSet<font color="#000080">;
        </font>ScreenSet <font color="#000080">= </font><font color="#FF0000"><b>ARRAY</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">50</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">80</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">1</font><font color="#000080">] </font><font color="#FF0000"><b>OF </b></font>BYTE<font color="#000080">;
                        </font><font color="#008000"><i>{  1..50 = Row,  0..79 = Col, 0 = Character,
                                                      1 = Color Byte    }
</i></font><font color="#FF0000"><b>VAR
        </b></font>TextScreen     <font color="#000080">:</font>SCREENPTR<font color="#000080">;
        </font>BaseOfScreen   <font color="#000080">:</font>WORD<font color="#000080">;
        </font>BPort<font color="#000080">,
        </font>SPort          <font color="#000080">:</font>ScreenPort<font color="#000080">;
        </font>Row<font color="#000080">,</font>Colm       <font color="#000080">:</font>WORD<font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>SaveScrPort<font color="#000080">( </font>Col1<font color="#000080">, </font>Row1<font color="#000080">, </font>Col2<font color="#000080">, </font>Row2 <font color="#000080">:</font>BYTE<font color="#000080">; </font><font color="#FF0000"><b>VAR </b></font>ScrP <font color="#000080">:</font>SCREENPORT <font color="#000080">);
</font><font color="#FF0000"><b>VAR
        </b></font>LLength <font color="#000080">:</font>BYTE<font color="#000080">;
        </font>Counter1<font color="#000080">,</font>Counter2  <font color="#000080">:</font>WORD<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>Counter2 <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
  </font>LLength <font color="#000080">:= (</font><font color="#800000">2 </font><font color="#000080">* (</font>Col2 <font color="#000080">- </font>Col1<font color="#000080">))+</font><font color="#800000">2</font><font color="#000080">;
  </font><font color="#FF0000"><b>For </b></font>Counter1 <font color="#000080">:= </font>Row1 <font color="#FF0000"><b>To </b></font>Row2 <font color="#FF0000"><b>DO
    BEGIN
      </b></font>Move<font color="#000080">(</font>TextScreen<font color="#000080">^[</font>Counter1<font color="#000080">,</font>Col1<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">],</font>ScrP<font color="#000080">.</font>ScreenST<font color="#000080">[</font>Counter2<font color="#000080">],</font>LLength<font color="#000080">);
      </font>Inc<font color="#000080">(</font>Counter2<font color="#000080">,</font>LLength<font color="#000080">);
    </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
  </font>ScrP<font color="#000080">.</font>NumCols <font color="#000080">:= </font>LLength<font color="#000080">;
  </font>ScrP<font color="#000080">.</font>NumRows <font color="#000080">:= </font>Row2 <font color="#000080">- </font>Row1<font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>RestoreScrPort<font color="#000080">( </font>Col<font color="#000080">,</font>Row <font color="#000080">:</font>BYTE<font color="#000080">; </font><font color="#FF0000"><b>VAR </b></font>ScrP <font color="#000080">:</font>SCREENPORT <font color="#000080">);
</font><font color="#FF0000"><b>VAR
   </b></font>Counter1<font color="#000080">,</font>Counter2  <font color="#000080">:</font>WORD<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>Counter2 <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
  </font><font color="#FF0000"><b>For </b></font>Counter1 <font color="#000080">:= </font>Row <font color="#FF0000"><b>To </b></font><font color="#000080">(</font>Row <font color="#000080">+ </font>ScrP<font color="#000080">.</font>NumRows<font color="#000080">) </font><font color="#FF0000"><b>Do
    BEGIN
      </b></font>Move<font color="#000080">(</font>ScrP<font color="#000080">.</font>ScreenST<font color="#000080">[</font>Counter2<font color="#000080">],</font>TextScreen<font color="#000080">^[</font>Counter1<font color="#000080">,</font>Col<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">],</font>ScrP<font color="#000080">.</font>NumCols<font color="#000080">);
      </font>Inc<font color="#000080">(</font>Counter2<font color="#000080">,</font>ScrP<font color="#000080">.</font>NumCols<font color="#000080">);
    </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>BEGIN
  IF </b></font>LastMode <font color="#000080">= </font><font color="#800000">7 </font><font color="#FF0000"><b>THEN          </b></font><font color="#008000"><i>{ Check current video mode.             }
    </i></font>BaseOfScreen <font color="#000080">:= </font><font color="#800000">$B000       </font><font color="#008000"><i>{ If Monochrome load mono segment.      }
  </i></font><font color="#FF0000"><b>ELSE
    </b></font>BaseOfScreen <font color="#000080">:= </font><font color="#800000">$B800</font><font color="#000080">;      </font><font color="#008000"><i>{ if not load color segment.            }
  </i></font>TextScreen <font color="#000080">:= </font>Ptr<font color="#000080">(</font>BaseOfScreen<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">); </font><font color="#008000"><i>{ Now point TextScreen proper area.}

  </i></font>SaveScrPort<font color="#000080">(</font><font color="#800000">10</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">20</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font>BPort<font color="#000080">);</font><font color="#008000"><i>{ Save a cleared part of the screen.    }
  </i></font>GotoXY<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);                  </font><font color="#008000"><i>{ Move to top corner of screen.         }

  </i></font><font color="#FF0000"><b>FOR </b></font>Row <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">20 </font><font color="#FF0000"><b>DO         </b></font><font color="#008000"><i>{ Generate screen for demonstration.    }
    </i></font><font color="#FF0000"><b>FOR </b></font>Colm <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">80 </font><font color="#FF0000"><b>DO
       </b></font>Write<font color="#000080">(</font><font color="#800000">'A'</font><font color="#000080">);

  </font>SaveScrPort<font color="#000080">(</font><font color="#800000">10</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">20</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font>SPort<font color="#000080">);</font><font color="#008000"><i>{ Save a portion of the screen.         }
  </i></font>ClrScr<font color="#000080">;                       </font><font color="#008000"><i>{ Clear the screen.                     }
  </i></font>SaveScrPort<font color="#000080">(</font><font color="#800000">10</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">20</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font>BPort<font color="#000080">);</font><font color="#008000"><i>{ Redisplay saved portion.              }

  </i></font><font color="#FF0000"><b>FOR </b></font>Colm <font color="#000080">:= </font><font color="#800000">10 </font><font color="#FF0000"><b>to </b></font><font color="#800000">50 </font><font color="#FF0000"><b>DO       </b></font><font color="#008000"><i>{ Animate portion right.                }
   </i></font><font color="#FF0000"><b>BEGIN
     </b></font>RestoreScrPort<font color="#000080">(</font>Colm<font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font>SPort<font color="#000080">);
     </font>Delay<font color="#000080">(</font>Speed<font color="#000080">);
     </font>RestoreScrPort<font color="#000080">(</font>Colm<font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font>BPort<font color="#000080">);
   </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>FOR </b></font>Row <font color="#000080">:= </font><font color="#800000">5 </font><font color="#FF0000"><b>to </b></font><font color="#800000">14 </font><font color="#FF0000"><b>DO         </b></font><font color="#008000"><i>{ Animate Portion Down.                 }
   </i></font><font color="#FF0000"><b>BEGIN
     </b></font>RestoreScrPort<font color="#000080">(</font><font color="#800000">50</font><font color="#000080">,</font>Row<font color="#000080">,</font>SPort<font color="#000080">);
     </font>Delay<font color="#000080">(</font>Speed<font color="#000080">);
     </font>RestoreScrPort<font color="#000080">(</font><font color="#800000">50</font><font color="#000080">,</font>Row<font color="#000080">,</font>BPort<font color="#000080">);
   </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>FOR </b></font>Colm <font color="#000080">:= </font><font color="#800000">50 </font><font color="#FF0000"><b>DOWNTO </b></font><font color="#800000">10 </font><font color="#FF0000"><b>DO   </b></font><font color="#008000"><i>{ Animate Portion Left.                 }
   </i></font><font color="#FF0000"><b>BEGIN
     </b></font>RestoreScrPort<font color="#000080">(</font>Colm<font color="#000080">,</font><font color="#800000">14</font><font color="#000080">,</font>SPort<font color="#000080">);
     </font>Delay<font color="#000080">(</font>Speed<font color="#000080">);
     </font>RestoreScrPort<font color="#000080">(</font>Colm<font color="#000080">,</font><font color="#800000">14</font><font color="#000080">,</font>BPort<font color="#000080">);
   </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>FOR </b></font>Row <font color="#000080">:= </font><font color="#800000">14 </font><font color="#FF0000"><b>DOWNTO </b></font><font color="#800000">5 </font><font color="#FF0000"><b>DO     </b></font><font color="#008000"><i>{ Animate Portion Up.                   }
   </i></font><font color="#FF0000"><b>BEGIN
     </b></font>RestoreScrPort<font color="#000080">(</font><font color="#800000">10</font><font color="#000080">,</font>Row<font color="#000080">,</font>SPort<font color="#000080">);
     </font>Delay<font color="#000080">(</font>Speed<font color="#000080">);
     </font>RestoreScrPort<font color="#000080">(</font><font color="#800000">10</font><font color="#000080">,</font>Row<font color="#000080">,</font>BPort<font color="#000080">);
   </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
   </font>RestoreScrPort<font color="#000080">(</font><font color="#800000">10</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font>SPort<font color="#000080">);
  </font>Readln<font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">.
</font><font color="#008000"><i>{***********************************************************************}

</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0062.PAS">Original</a><b>]</b></p></body>
</html>
