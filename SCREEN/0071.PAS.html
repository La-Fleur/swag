<html>
<head><title> "Large Virtual Text Screen" by MICHAEL NICOLAI</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0071.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt; I just let dos write something on the screen, I'm in the normal
&gt; videomode, say that writes 100 lines to the screen. How can I read
&gt; whatever that program wrote if the lines have scrolled of the screen ???
&gt; I need to have the output in an array ... with the colors ... there might
&gt; even be an animation in the output (ansi) ... I know how to put a normal
&gt; 25x80 in an array or a 50x80 ... but how do you work with something
&gt; that's 100 lines long ... I want to be able to scroll back after the
&gt; display ...

You can use an Array to do it - or, you can program your graphic-card. :-)

Perhaps this little prog will give you a clue:
}

</i></font><font color="#FF0000"><b>program </b></font>BreakOut<font color="#000080">;

</font><font color="#FF0000"><b>uses </b></font>CRT<font color="#000080">, </font>DOS<font color="#000080">;

</font><font color="#FF0000"><b>const

 </b></font>UP   <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">;   </font><font color="#008000"><i>{ Verschieberichtung fuer Bildschirm. }
 </i></font>DOWN <font color="#000080">= </font><font color="#800000">1</font><font color="#000080">;
 </font>ST_X <font color="#000080">= </font><font color="#800000">10</font><font color="#000080">;  </font><font color="#008000"><i>{ Steine nebeneinander. }
 </i></font>ST_Y <font color="#000080">= </font><font color="#800000">5</font><font color="#000080">;   </font><font color="#008000"><i>{ Steine uebereinander. }

</i></font><font color="#FF0000"><b>type

 </b></font>screen_params <font color="#000080">= </font><font color="#FF0000"><b>record
  </b></font>zeichen  <font color="#000080">: </font>char<font color="#000080">;
  </font>attribut <font color="#000080">: </font>byte<font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

 </font>Video_params <font color="#000080">= </font><font color="#FF0000"><b>record
  </b></font>mode<font color="#000080">, </font>page     <font color="#000080">: </font>byte<font color="#000080">;
  </font>start_scanline <font color="#000080">: </font>byte<font color="#000080">;
  </font>end_scanline   <font color="#000080">: </font>byte<font color="#000080">;
  </font>row<font color="#000080">, </font>column    <font color="#000080">: </font>byte<font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

 </font>stone_params <font color="#000080">= </font><font color="#FF0000"><b>record
  </b></font>spalte <font color="#000080">: </font>byte<font color="#000080">;
  </font>zeile  <font color="#000080">: </font>byte<font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

 </font>bouncer_params <font color="#000080">= </font><font color="#FF0000"><b>record  </b></font><font color="#008000"><i>{ bouncer == schlaeger }
  </i></font>spalte <font color="#000080">: </font>shortint<font color="#000080">;
  </font>zeile  <font color="#000080">: </font>shortint<font color="#000080">;
  </font>dir    <font color="#000080">: </font>shortint<font color="#000080">;
  </font>speed  <font color="#000080">: </font>longint<font color="#000080">;
  </font>count  <font color="#000080">: </font>longint<font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

 </font>ball_params <font color="#000080">= </font><font color="#FF0000"><b>record
  </b></font>spalte <font color="#000080">: </font>real<font color="#000080">;
  </font>zeile  <font color="#000080">: </font>real<font color="#000080">;
  </font>speed  <font color="#000080">: </font>longint<font color="#000080">;
  </font>count  <font color="#000080">: </font>longint<font color="#000080">;
  </font>dir_x  <font color="#000080">: </font>real<font color="#000080">;
  </font>dir_y  <font color="#000080">: </font>real<font color="#000080">;
  </font>next_x <font color="#000080">: </font>real<font color="#000080">;
  </font>next_y <font color="#000080">: </font>real<font color="#000080">;
  </font>last_x <font color="#000080">: </font>real<font color="#000080">;
  </font>last_y <font color="#000080">: </font>real<font color="#000080">;
  </font>flag   <font color="#000080">: </font>byte<font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

 </font>screen_type <font color="#000080">= </font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">2000</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>screen_params<font color="#000080">;

</font><font color="#FF0000"><b>var

 </b></font>regs    <font color="#000080">: </font>Registers<font color="#000080">;
 </font>Video   <font color="#000080">: </font>Video_params<font color="#000080">;
 </font>bouncer <font color="#000080">: </font>bouncer_params<font color="#000080">;
 </font>ball    <font color="#000080">: </font>ball_params<font color="#000080">;
 </font>stone   <font color="#000080">: </font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font>ST_X<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">..</font>ST_Y<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>stone_params<font color="#000080">;
 </font>screen  <font color="#000080">: ^</font>screen_type<font color="#000080">;  </font><font color="#008000"><i>{ Zeiger auf aktuelle Seite. }
 </i></font>screen0 <font color="#000080">: </font>pointer<font color="#000080">;       </font><font color="#008000"><i>{ Zeiger auf Seite 0. }
 </i></font>screen1 <font color="#000080">: </font>pointer<font color="#000080">;       </font><font color="#008000"><i>{ Zeiger auf Seite 1. }
 </i></font>screen2 <font color="#000080">: </font>pointer<font color="#000080">;       </font><font color="#008000"><i>{ Zeiger auf Seite 2. }

</i></font><font color="#FF0000"><b>procedure </b></font>GetCurrentVideoMode<font color="#000080">;
</font><font color="#008000"><i>{
 Procedure to get and store the current video mode settings.
}

</i></font><font color="#FF0000"><b>begin
 </b></font>regs<font color="#000080">.</font>ah <font color="#000080">:= </font><font color="#800000">$0F</font><font color="#000080">;
 </font>intr<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">, </font>regs<font color="#000080">);
 </font>Video<font color="#000080">.</font>mode <font color="#000080">:= </font>regs<font color="#000080">.</font>al<font color="#000080">;
 </font>Video<font color="#000080">.</font>page <font color="#000080">:= </font>regs<font color="#000080">.</font>bh<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>GetCurrentCursorSettings<font color="#000080">;
</font><font color="#008000"><i>{
 Procedure to get and store the current cursor settings.
}

</i></font><font color="#FF0000"><b>begin
 </b></font>regs<font color="#000080">.</font>ah <font color="#000080">:= </font><font color="#800000">3</font><font color="#000080">;
 </font>regs<font color="#000080">.</font>bh <font color="#000080">:= </font>Video<font color="#000080">.</font>page<font color="#000080">;
 </font>intr<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">, </font>regs<font color="#000080">);
 </font>Video<font color="#000080">.</font>start_scanline <font color="#000080">:= </font>regs<font color="#000080">.</font>ch<font color="#000080">;
 </font>Video<font color="#000080">.</font>end_scanline <font color="#000080">:= </font>regs<font color="#000080">.</font>cl<font color="#000080">;
 </font>Video<font color="#000080">.</font>row <font color="#000080">:= </font>regs<font color="#000080">.</font>dh<font color="#000080">;
 </font>Video<font color="#000080">.</font>column <font color="#000080">:= </font>regs<font color="#000080">.</font>dl<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>SetVideoMode<font color="#000080">(</font>mode <font color="#000080">: </font>byte<font color="#000080">);
</font><font color="#008000"><i>{
 Procedure to set a specific video mode.

 mode = new video mode.
}

</i></font><font color="#FF0000"><b>begin
 </b></font>regs<font color="#000080">.</font>ah <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
 </font>regs<font color="#000080">.</font>al <font color="#000080">:= </font>mode<font color="#000080">;
 </font>intr<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">, </font>regs<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>HideCursor<font color="#000080">;
</font><font color="#008000"><i>{
 Procedure to make the cursor invisible on the screen.
}

</i></font><font color="#FF0000"><b>begin
 </b></font>regs<font color="#000080">.</font>ah <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
 </font>regs<font color="#000080">.</font>al <font color="#000080">:= </font>Video<font color="#000080">.</font>mode<font color="#000080">;
 </font>regs<font color="#000080">.</font>cx <font color="#000080">:= </font><font color="#800000">$FFFF</font><font color="#000080">;
 </font>intr<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">, </font>regs<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>RestoreCursor<font color="#000080">;
</font><font color="#008000"><i>{
 Procedure to restore the old cursor.
}

</i></font><font color="#FF0000"><b>begin
 </b></font>regs<font color="#000080">.</font>ah <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
 </font>regs<font color="#000080">.</font>al <font color="#000080">:= </font>Video<font color="#000080">.</font>mode<font color="#000080">;
 </font>regs<font color="#000080">.</font>ch <font color="#000080">:= </font>Video<font color="#000080">.</font>start_scanline<font color="#000080">;
 </font>regs<font color="#000080">.</font>cl <font color="#000080">:= </font>Video<font color="#000080">.</font>end_scanline<font color="#000080">;
 </font>intr<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">, </font>regs<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>ClearScreen<font color="#000080">;

</font><font color="#FF0000"><b>var

 </b></font>i <font color="#000080">: </font>integer<font color="#000080">;

</font><font color="#FF0000"><b>begin
 for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">2000 </font><font color="#FF0000"><b>do
 begin
  </b></font>screen<font color="#000080">^[</font>i<font color="#000080">].</font>zeichen <font color="#000080">:= </font><font color="#800000">#32</font><font color="#000080">;
  </font>screen<font color="#000080">^[</font>i<font color="#000080">].</font>attribut <font color="#000080">:= </font><font color="#800000">7</font><font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>DrawBorder<font color="#000080">;

</font><font color="#FF0000"><b>var

 </b></font>i <font color="#000080">: </font>integer<font color="#000080">;

</font><font color="#FF0000"><b>begin
 for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">80 </font><font color="#FF0000"><b>do
  </b></font>screen<font color="#000080">^[</font>i<font color="#000080">].</font>attribut <font color="#000080">:= </font><font color="#800000">$30</font><font color="#000080">;
 </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">81 </font><font color="#FF0000"><b>to </b></font><font color="#800000">1920 </font><font color="#FF0000"><b>do  </b></font><font color="#008000"><i>{ 1920 = 2000 - 80 }
 </i></font><font color="#FF0000"><b>begin
  </b></font>screen<font color="#000080">^[</font>i<font color="#000080">].</font>attribut <font color="#000080">:= </font><font color="#800000">$30</font><font color="#000080">;
  </font>i <font color="#000080">:= </font>i <font color="#000080">+ </font><font color="#800000">79</font><font color="#000080">;
  </font>screen<font color="#000080">^[</font>i<font color="#000080">].</font>attribut <font color="#000080">:= </font><font color="#800000">$30</font><font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>InitializeStones<font color="#000080">;

</font><font color="#FF0000"><b>var

 </b></font>i<font color="#000080">, </font>j <font color="#000080">: </font>byte<font color="#000080">;
 </font>x<font color="#000080">, </font>y <font color="#000080">: </font>byte<font color="#000080">;  </font><font color="#008000"><i>{ x = Spalte; y = Zeile }

</i></font><font color="#FF0000"><b>begin
 </b></font>y <font color="#000080">:= </font><font color="#800000">4</font><font color="#000080">;
 </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>ST_Y <font color="#FF0000"><b>do  </b></font><font color="#008000"><i>{ Zeilen }
 </i></font><font color="#FF0000"><b>begin
  </b></font>x <font color="#000080">:= </font><font color="#800000">7</font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>j <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>ST_X <font color="#FF0000"><b>do  </b></font><font color="#008000"><i>{ Spalten }
  </i></font><font color="#FF0000"><b>begin
   </b></font>stone<font color="#000080">[</font>j<font color="#000080">, </font>i<font color="#000080">].</font>spalte <font color="#000080">:= </font>x<font color="#000080">;
   </font>stone<font color="#000080">[</font>j<font color="#000080">, </font>i<font color="#000080">].</font>zeile <font color="#000080">:= </font>y<font color="#000080">;
   </font>x <font color="#000080">:= </font>x <font color="#000080">+ </font><font color="#800000">7</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>y <font color="#000080">:= </font>y <font color="#000080">+ </font><font color="#800000">2</font><font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>DrawStones<font color="#000080">;

</font><font color="#FF0000"><b>var

 </b></font>pos     <font color="#000080">: </font>integer<font color="#000080">;
 </font>i<font color="#000080">, </font>j<font color="#000080">, </font>k <font color="#000080">: </font>byte<font color="#000080">;

</font><font color="#FF0000"><b>begin
 for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>ST_Y <font color="#FF0000"><b>do  </b></font><font color="#008000"><i>{ Zeilen }
 </i></font><font color="#FF0000"><b>begin
  for </b></font>j <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>ST_X <font color="#FF0000"><b>do  </b></font><font color="#008000"><i>{ Spalten }
  </i></font><font color="#FF0000"><b>begin
   </b></font>pos <font color="#000080">:= </font>stone<font color="#000080">[</font>j<font color="#000080">, </font>i<font color="#000080">].</font>zeile <font color="#000080">* </font><font color="#800000">80 </font><font color="#000080">+ </font>stone<font color="#000080">[</font>j<font color="#000080">, </font>i<font color="#000080">].</font>spalte<font color="#000080">;
   </font><font color="#FF0000"><b>for </b></font>k <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">4 </font><font color="#FF0000"><b>do
    </b></font>screen<font color="#000080">^[(</font>pos <font color="#000080">+ </font>k<font color="#000080">)].</font>attribut <font color="#000080">:= </font><font color="#800000">$60</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>DrawBouncer<font color="#000080">;

</font><font color="#FF0000"><b>var

 </b></font>i   <font color="#000080">: </font>integer<font color="#000080">;
 </font>pos <font color="#000080">: </font>integer<font color="#000080">;

</font><font color="#FF0000"><b>begin
 </b></font>pos <font color="#000080">:= </font>bouncer<font color="#000080">.</font>zeile <font color="#000080">* </font><font color="#800000">80 </font><font color="#000080">+ </font>bouncer<font color="#000080">.</font>spalte <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
 </font>screen<font color="#000080">^[</font>pos<font color="#000080">].</font>attribut <font color="#000080">:= </font><font color="#800000">7</font><font color="#000080">;
 </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">8 </font><font color="#FF0000"><b>do
  </b></font>screen<font color="#000080">^[(</font>pos <font color="#000080">+ </font>i<font color="#000080">)].</font>attribut <font color="#000080">:= </font><font color="#800000">$70</font><font color="#000080">;
 </font>screen<font color="#000080">^[(</font>pos <font color="#000080">+ </font><font color="#800000">9</font><font color="#000080">)].</font>attribut <font color="#000080">:= </font><font color="#800000">7</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>DrawBall<font color="#000080">;

</font><font color="#FF0000"><b>var

 </b></font>pos <font color="#000080">: </font>integer<font color="#000080">;

</font><font color="#FF0000"><b>begin
 </b></font>pos <font color="#000080">:= </font>integer<font color="#000080">(</font>trunc<font color="#000080">(</font>ball<font color="#000080">.</font>last_y<font color="#000080">) * </font><font color="#800000">80 </font><font color="#000080">+ </font>trunc<font color="#000080">(</font>ball<font color="#000080">.</font>last_x<font color="#000080">));
 </font>screen<font color="#000080">^[</font>pos<font color="#000080">].</font>zeichen <font color="#000080">:= </font><font color="#800000">#32</font><font color="#000080">;
 </font>screen<font color="#000080">^[</font>pos<font color="#000080">].</font>attribut <font color="#000080">:= </font><font color="#800000">7</font><font color="#000080">;
 </font>pos <font color="#000080">:= </font>integer<font color="#000080">(</font>trunc<font color="#000080">(</font>ball<font color="#000080">.</font>zeile<font color="#000080">) * </font><font color="#800000">80 </font><font color="#000080">+ </font>trunc<font color="#000080">(</font>ball<font color="#000080">.</font>spalte<font color="#000080">));
 </font>screen<font color="#000080">^[</font>pos<font color="#000080">].</font>zeichen <font color="#000080">:= </font><font color="#800000">'o'</font><font color="#000080">;
 </font>screen<font color="#000080">^[</font>pos<font color="#000080">].</font>attribut <font color="#000080">:= </font><font color="#800000">5</font><font color="#000080">;
 </font>ball<font color="#000080">.</font>last_x <font color="#000080">:= </font>ball<font color="#000080">.</font>spalte<font color="#000080">;
 </font>ball<font color="#000080">.</font>last_y <font color="#000080">:= </font>ball<font color="#000080">.</font>zeile<font color="#000080">;
 </font>ball<font color="#000080">.</font>next_x <font color="#000080">:= </font>ball<font color="#000080">.</font>spalte <font color="#000080">+ </font>ball<font color="#000080">.</font>dir_x<font color="#000080">;
 </font>ball<font color="#000080">.</font>next_y <font color="#000080">:= </font>ball<font color="#000080">.</font>zeile <font color="#000080">+ </font>ball<font color="#000080">.</font>dir_y<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>MovePicture<font color="#000080">(</font>scr <font color="#000080">: </font>pointer<font color="#000080">; </font>direction <font color="#000080">: </font>byte<font color="#000080">);

</font><font color="#FF0000"><b>var

 </b></font>dir     <font color="#000080">: </font>integer<font color="#000080">;
 </font>count   <font color="#000080">: </font>word<font color="#000080">;
 </font>zaehler <font color="#000080">: </font>word<font color="#000080">;

</font><font color="#FF0000"><b>begin
 </b></font>zaehler <font color="#000080">:= </font>ofs<font color="#000080">(</font>screen<font color="#000080">^) </font><font color="#FF0000"><b>shr </b></font><font color="#800000">1</font><font color="#000080">;
 </font>port<font color="#000080">[</font><font color="#800000">$03D4</font><font color="#000080">] := </font><font color="#800000">$0C</font><font color="#000080">;
 </font>port<font color="#000080">[</font><font color="#800000">$03D5</font><font color="#000080">] := </font>hi<font color="#000080">(</font>zaehler<font color="#000080">);
 </font>port<font color="#000080">[</font><font color="#800000">$03D4</font><font color="#000080">] := </font><font color="#800000">$0D</font><font color="#000080">;
 </font>port<font color="#000080">[</font><font color="#800000">$03D5</font><font color="#000080">] := </font>lo<font color="#000080">(</font>zaehler<font color="#000080">);
 </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>direction <font color="#000080">= </font>UP<font color="#000080">) </font><font color="#FF0000"><b>then
  </b></font>dir <font color="#000080">:= </font><font color="#800000">80
 </font><font color="#FF0000"><b>else
  </b></font>dir <font color="#000080">:= (-</font><font color="#800000">80</font><font color="#000080">);
 </font>count <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
 </font><font color="#FF0000"><b>repeat
  </b></font>inc<font color="#000080">(</font>count<font color="#000080">);
  </font>zaehler <font color="#000080">:= </font>zaehler <font color="#000080">+ </font>dir<font color="#000080">;
  </font>port<font color="#000080">[</font><font color="#800000">$03D4</font><font color="#000080">] := </font><font color="#800000">$0C</font><font color="#000080">;
  </font>port<font color="#000080">[</font><font color="#800000">$03D5</font><font color="#000080">] := </font>hi<font color="#000080">(</font>zaehler<font color="#000080">);
  </font>port<font color="#000080">[</font><font color="#800000">$03D4</font><font color="#000080">] := </font><font color="#800000">$0D</font><font color="#000080">;
  </font>port<font color="#000080">[</font><font color="#800000">$03D5</font><font color="#000080">] := </font>lo<font color="#000080">(</font>zaehler<font color="#000080">);
  </font>delay<font color="#000080">(</font><font color="#800000">20</font><font color="#000080">);
 </font><font color="#FF0000"><b>until </b></font><font color="#000080">(</font>count <font color="#000080">= </font><font color="#800000">25</font><font color="#000080">);
 </font>screen <font color="#000080">:= </font>scr<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>MoveBouncer <font color="#000080">: </font>byte<font color="#000080">;

</font><font color="#FF0000"><b>var

 </b></font>c <font color="#000080">: </font>char<font color="#000080">;

</font><font color="#FF0000"><b>begin
 </b></font>bouncer<font color="#000080">.</font>count <font color="#000080">:= </font>bouncer<font color="#000080">.</font>count <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
 </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>bouncer<font color="#000080">.</font>count <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
 begin
  </b></font>bouncer<font color="#000080">.</font>count <font color="#000080">:= </font>bouncer<font color="#000080">.</font>speed<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>keypressed<font color="#000080">) </font><font color="#FF0000"><b>then
  begin
   </b></font>c <font color="#000080">:= </font>readkey<font color="#000080">;
   </font><font color="#FF0000"><b>case </b></font>c <font color="#FF0000"><b>of
    </b></font><font color="#800000">#0  </font><font color="#000080">: </font><font color="#FF0000"><b>begin
           </b></font>c <font color="#000080">:= </font>readkey<font color="#000080">;
           </font><font color="#FF0000"><b>case </b></font>c <font color="#FF0000"><b>of
            </b></font><font color="#800000">#75 </font><font color="#000080">: </font>bouncer<font color="#000080">.</font>dir <font color="#000080">:= (-</font><font color="#800000">1</font><font color="#000080">);
            </font><font color="#800000">#77 </font><font color="#000080">: </font>bouncer<font color="#000080">.</font>dir <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
           </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#800000">#27 </font><font color="#000080">: </font><font color="#FF0000"><b>begin
           </b></font>MoveBouncer <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
           </font>exit<font color="#000080">;
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#800000">#32 </font><font color="#000080">: </font>bouncer<font color="#000080">.</font>dir <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>bouncer<font color="#000080">.</font>spalte <font color="#000080">:= </font>bouncer<font color="#000080">.</font>spalte <font color="#000080">+ </font>bouncer<font color="#000080">.</font>dir<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>bouncer<font color="#000080">.</font>spalte <font color="#000080">&lt; </font><font color="#800000">2</font><font color="#000080">) </font><font color="#FF0000"><b>then
  begin
   </b></font>bouncer<font color="#000080">.</font>spalte <font color="#000080">:= </font><font color="#800000">2</font><font color="#000080">;
   </font>bouncer<font color="#000080">.</font>dir <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>bouncer<font color="#000080">.</font>spalte <font color="#000080">= </font><font color="#800000">73</font><font color="#000080">) </font><font color="#FF0000"><b>then
  begin
   </b></font>bouncer<font color="#000080">.</font>spalte <font color="#000080">:= </font><font color="#800000">72</font><font color="#000080">;
   </font>bouncer<font color="#000080">.</font>dir <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>bouncer<font color="#000080">.</font>dir <font color="#000080">&lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
   </b></font>DrawBouncer<font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font>MoveBouncer <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>MoveBall<font color="#000080">;

</font><font color="#FF0000"><b>var

 </b></font>pos    <font color="#000080">: </font>integer<font color="#000080">;

</font><font color="#FF0000"><b>begin
 </b></font>ball<font color="#000080">.</font>count <font color="#000080">:= </font>ball<font color="#000080">.</font>count <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
 </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>ball<font color="#000080">.</font>count <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
 begin
  </b></font>ball<font color="#000080">.</font>count <font color="#000080">:= </font>ball<font color="#000080">.</font>speed<font color="#000080">;

  </font><font color="#008000"><i>{ Linken und rechten Rand abfragen. }

  </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">((</font>trunc<font color="#000080">(</font>ball<font color="#000080">.</font>next_x<font color="#000080">) &lt; </font><font color="#800000">2</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>trunc<font color="#000080">(</font>ball<font color="#000080">.</font>next_x<font color="#000080">) &gt; </font><font color="#800000">79</font><font color="#000080">)) </font><font color="#FF0000"><b>then
  begin
   </b></font>ball<font color="#000080">.</font>dir_x <font color="#000080">:= </font>ball<font color="#000080">.</font>dir_x <font color="#000080">* (-</font><font color="#800000">1.0</font><font color="#000080">);
   </font>ball<font color="#000080">.</font>next_x <font color="#000080">:= </font>ball<font color="#000080">.</font>spalte <font color="#000080">+ </font>ball<font color="#000080">.</font>dir_x<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ Oberen Rand abfragen. }

  </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>trunc<font color="#000080">(</font>ball<font color="#000080">.</font>next_y<font color="#000080">) &lt; </font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>then
  begin
   </b></font>ball<font color="#000080">.</font>dir_y <font color="#000080">:= </font>ball<font color="#000080">.</font>dir_y <font color="#000080">* (-</font><font color="#800000">1.0</font><font color="#000080">);
   </font>ball<font color="#000080">.</font>next_y <font color="#000080">:= </font>ball<font color="#000080">.</font>zeile <font color="#000080">+ </font>ball<font color="#000080">.</font>dir_y<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ Unteren Rand abfragen. }

  </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>trunc<font color="#000080">(</font>ball<font color="#000080">.</font>next_y<font color="#000080">) &gt; </font><font color="#800000">23</font><font color="#000080">) </font><font color="#FF0000"><b>then
  begin
   </b></font>pos <font color="#000080">:= </font>integer<font color="#000080">((</font>trunc<font color="#000080">(</font>ball<font color="#000080">.</font>zeile<font color="#000080">) + </font><font color="#800000">1</font><font color="#000080">) * </font><font color="#800000">80 </font><font color="#000080">+ </font>trunc<font color="#000080">(</font>ball<font color="#000080">.</font>spalte<font color="#000080">));
   </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>screen<font color="#000080">^[</font>pos<font color="#000080">].</font>attribut <font color="#000080">= </font><font color="#800000">$70</font><font color="#000080">) </font><font color="#FF0000"><b>then
   begin
    </b></font>ball<font color="#000080">.</font>dir_y <font color="#000080">:= </font>ball<font color="#000080">.</font>dir_y <font color="#000080">* (-</font><font color="#800000">1.0</font><font color="#000080">);
    </font>ball<font color="#000080">.</font>next_y <font color="#000080">:= </font>ball<font color="#000080">.</font>zeile <font color="#000080">+ </font>ball<font color="#000080">.</font>dir_y<font color="#000080">;
   </font><font color="#FF0000"><b>end
   else
   begin
    </b></font>ball<font color="#000080">.</font>flag <font color="#000080">:= </font><font color="#800000">2</font><font color="#000080">;
    </font>exit<font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>ball<font color="#000080">.</font>spalte <font color="#000080">:= </font>ball<font color="#000080">.</font>next_x<font color="#000080">;
  </font>ball<font color="#000080">.</font>zeile <font color="#000080">:= </font>ball<font color="#000080">.</font>next_y<font color="#000080">;
  </font>DrawBall<font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>Play<font color="#000080">;

</font><font color="#FF0000"><b>var

 </b></font>erg <font color="#000080">: </font>byte<font color="#000080">;

</font><font color="#FF0000"><b>begin
 while </b></font><font color="#000080">(</font>TRUE<font color="#000080">) </font><font color="#FF0000"><b>do
 begin
  </b></font>erg <font color="#000080">:= </font>MoveBouncer<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>erg <font color="#000080">= </font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>then
   </b></font>exit<font color="#000080">;
  </font>MoveBall<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>ball<font color="#000080">.</font>flag <font color="#000080">= </font><font color="#800000">2</font><font color="#000080">) </font><font color="#FF0000"><b>then
   </b></font>exit<font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
 </b></font>GetCurrentVideoMode<font color="#000080">;
 </font>GetCurrentCursorSettings<font color="#000080">;
 </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>Video<font color="#000080">.</font>mode <font color="#000080">&lt;&gt; </font><font color="#800000">3</font><font color="#000080">) </font><font color="#FF0000"><b>then
  </b></font>SetVideoMode<font color="#000080">(</font><font color="#800000">3</font><font color="#000080">);
 </font>HideCursor<font color="#000080">;

 </font>screen0 <font color="#000080">:= </font>ptr<font color="#000080">(</font><font color="#800000">$B800</font><font color="#000080">, </font><font color="#800000">0000</font><font color="#000080">);  </font><font color="#008000"><i>{ Bildschirmseite 0. }
 </i></font>screen1 <font color="#000080">:= </font>ptr<font color="#000080">(</font><font color="#800000">$B800</font><font color="#000080">, </font><font color="#800000">4000</font><font color="#000080">);  </font><font color="#008000"><i>{ Bildschirmseite 1. }
 </i></font>screen2 <font color="#000080">:= </font>ptr<font color="#000080">(</font><font color="#800000">$B800</font><font color="#000080">, </font><font color="#800000">8000</font><font color="#000080">);  </font><font color="#008000"><i>{ Bildschirmseite 2. }
 </i></font>screen <font color="#000080">:= </font>screen0<font color="#000080">;
 </font>ClearScreen<font color="#000080">;
 </font>screen <font color="#000080">:= </font>screen2<font color="#000080">;
 </font>ClearScreen<font color="#000080">;
 </font>screen <font color="#000080">:= </font>screen1<font color="#000080">;
 </font>ClearScreen<font color="#000080">;
 </font>DrawBorder<font color="#000080">;
 </font>InitializeStones<font color="#000080">;
 </font>DrawStones<font color="#000080">;
 </font>bouncer<font color="#000080">.</font>spalte <font color="#000080">:= </font><font color="#800000">35</font><font color="#000080">;
 </font>bouncer<font color="#000080">.</font>zeile <font color="#000080">:= </font><font color="#800000">24</font><font color="#000080">;
 </font>bouncer<font color="#000080">.</font>dir <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
 </font>bouncer<font color="#000080">.</font>speed <font color="#000080">:= </font><font color="#800000">3000</font><font color="#000080">;
 </font>bouncer<font color="#000080">.</font>count <font color="#000080">:= </font>bouncer<font color="#000080">.</font>speed<font color="#000080">;
 </font>DrawBouncer<font color="#000080">;
 </font>ball<font color="#000080">.</font>spalte <font color="#000080">:= </font><font color="#800000">40.0</font><font color="#000080">;
 </font>ball<font color="#000080">.</font>zeile <font color="#000080">:= </font><font color="#800000">20.0</font><font color="#000080">;
 </font>ball<font color="#000080">.</font>speed <font color="#000080">:= </font><font color="#800000">8000</font><font color="#000080">;
 </font>ball<font color="#000080">.</font>count <font color="#000080">:= </font>ball<font color="#000080">.</font>speed<font color="#000080">;
 </font>ball<font color="#000080">.</font>dir_x <font color="#000080">:= </font><font color="#800000">1.0</font><font color="#000080">;
 </font>ball<font color="#000080">.</font>dir_y <font color="#000080">:= (-</font><font color="#800000">1.0</font><font color="#000080">);
 </font>ball<font color="#000080">.</font>last_x <font color="#000080">:= </font><font color="#800000">39.0</font><font color="#000080">;
 </font>ball<font color="#000080">.</font>last_y <font color="#000080">:= </font><font color="#800000">21.0</font><font color="#000080">;
 </font>ball<font color="#000080">.</font>flag <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
 </font>DrawBall<font color="#000080">;
 </font>screen <font color="#000080">:= </font>screen0<font color="#000080">;
 </font><font color="#FF0000"><b>repeat
  </b></font>MovePicture<font color="#000080">(</font>screen1<font color="#000080">, </font>UP<font color="#000080">);
  </font>MovePicture<font color="#000080">(</font>screen2<font color="#000080">, </font>UP<font color="#000080">);
  </font>MovePicture<font color="#000080">(</font>screen1<font color="#000080">, </font>DOWN<font color="#000080">);
  </font>MovePicture<font color="#000080">(</font>screen0<font color="#000080">, </font>DOWN<font color="#000080">);
 </font><font color="#FF0000"><b>until </b></font><font color="#000080">(</font>keypressed<font color="#000080">);

 </font>MovePicture<font color="#000080">(</font>screen1<font color="#000080">, </font>UP<font color="#000080">);
 </font>Play<font color="#000080">;

 </font>RestoreCursor<font color="#000080">;
 </font>port<font color="#000080">[</font><font color="#800000">$03D4</font><font color="#000080">] := </font><font color="#800000">$0C</font><font color="#000080">;
 </font>port<font color="#000080">[</font><font color="#800000">$03D5</font><font color="#000080">] := </font><font color="#800000">0</font><font color="#000080">;
 </font>port<font color="#000080">[</font><font color="#800000">$03D4</font><font color="#000080">] := </font><font color="#800000">$0D</font><font color="#000080">;
 </font>port<font color="#000080">[</font><font color="#800000">$03D5</font><font color="#000080">] := </font><font color="#800000">0</font><font color="#000080">;
 </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>Video<font color="#000080">.</font>mode <font color="#000080">&lt;&gt; </font><font color="#800000">3</font><font color="#000080">) </font><font color="#FF0000"><b>then
  </b></font>SetVideoMode<font color="#000080">(</font>Video<font color="#000080">.</font>mode<font color="#000080">)
 </font><font color="#FF0000"><b>else
  </b></font>clrscr<font color="#000080">;
 </font>textattr <font color="#000080">:= </font>LIGHTGRAY<font color="#000080">;
 </font>writeln<font color="#000080">;
 </font>writeln<font color="#000080">(</font><font color="#800000">'Thank you for playing BreakOut!'</font><font color="#000080">);
 </font>writeln<font color="#000080">;
 </font>writeln<font color="#000080">(</font><font color="#800000">'Do have a nice day...'</font><font color="#000080">);
 </font>writeln<font color="#000080">; </font>writeln<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0071.PAS">Original</a><b>]</b></p></body>
</html>
