<html>
<head><title> "Sorta good WriteString" by STERLING BATES</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0082.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#FF0000"><b>Procedure </b></font>WriteS <font color="#000080">(</font>DispStr <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">; </font>X<font color="#000080">,</font>Y<font color="#000080">,</font>Colr <font color="#000080">: </font>Byte<font color="#000080">);

               </font><font color="#008000"><i>(* DispStr = String to display on screen
                  X,Y     = Coordinates to being writing
                  Colr    = Color attribute
               *)

  (* This is a simple procedure to directly write a string to the screen,
     accounting for imbedded color codes.  These color codes are identified
     by a \ followed by a two or three digit number representing the color
     desired.  All subsequent output of the string will be given the new
     color until otherwise declared.  The string '\M' is also recognized as
     a carriage return, where the string will be continued on the next line,
     aligned with the above line.  No values are returned.

     It's fairly fast, and it does the job, but I know that it could use a
     lot of tweaking, so if anybody does improve on it, please give me an
     updated copy.

     ** NOTE **  The screen address is kept in the variable VidSeg.  You can
                 either go through the procedure and replace it with a constant
                 screen address, or assign the variable VidSeg in your program.
  *)

  (* Standard disclaimer: I'm not liable for anything this procedure does
                          outside the original purpose of the procedure.  If
                          something bad happens, let me know, but that's all
                          I can do.
  *)

</i></font><font color="#FF0000"><b>Var
   </b></font>Loc<font color="#000080">, </font>TmpInt<font color="#000080">, </font>OldX                    <font color="#000080">: </font>Integer<font color="#000080">;
   </font>TmpStr                               <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">3</font><font color="#000080">];

</font><font color="#FF0000"><b>Begin
     </b></font>OldX <font color="#000080">:= </font>X<font color="#000080">;
     </font>Loc <font color="#000080">:= ((</font>X<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">)*</font><font color="#800000">2</font><font color="#000080">)+((</font>Y<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">)*</font><font color="#800000">160</font><font color="#000080">);
     </font>Loop <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
     </font><font color="#FF0000"><b>While </b></font>Loop <font color="#000080">&lt;= </font>Length <font color="#000080">(</font>DispStr<font color="#000080">) </font><font color="#FF0000"><b>Do
     Begin
          </b></font>TmpStr <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
          </font><font color="#FF0000"><b>If </b></font><font color="#000080">(</font>DispStr<font color="#000080">[</font>Loop<font color="#000080">] = </font><font color="#800000">'\'</font><font color="#000080">) </font><font color="#FF0000"><b>And </b></font><font color="#000080">(</font>DispStr<font color="#000080">[</font>Loop<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">] &lt;&gt; </font><font color="#800000">'\'</font><font color="#000080">) </font><font color="#FF0000"><b>Then
          Begin
               </b></font>Inc <font color="#000080">(</font>Loop<font color="#000080">);
               </font><font color="#FF0000"><b>If </b></font>DispStr<font color="#000080">[</font>Loop<font color="#000080">] </font><font color="#FF0000"><b>In </b></font><font color="#000080">[</font><font color="#800000">'0'</font><font color="#000080">..</font><font color="#800000">'9'</font><font color="#000080">] </font><font color="#FF0000"><b>Then
               Begin
                    While </b></font><font color="#000080">(</font>DispStr<font color="#000080">[</font>Loop<font color="#000080">] </font><font color="#FF0000"><b>In </b></font><font color="#000080">[</font><font color="#800000">'0'</font><font color="#000080">..</font><font color="#800000">'9'</font><font color="#000080">]) </font><font color="#FF0000"><b>And
                          </b></font><font color="#000080">(</font>Length <font color="#000080">(</font>TmpStr<font color="#000080">) &lt; </font><font color="#800000">3</font><font color="#000080">) </font><font color="#FF0000"><b>Do
                    Begin
                         </b></font>TmpStr <font color="#000080">:= </font>TmpStr <font color="#000080">+ </font>DispStr<font color="#000080">[</font>Loop<font color="#000080">];
                         </font>Inc <font color="#000080">(</font>Loop<font color="#000080">);
                    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
                    </font>Val <font color="#000080">(</font>TmpStr<font color="#000080">,</font>Colr<font color="#000080">,</font>TmpInt<font color="#000080">);
                    </font>Colr <font color="#000080">:= </font>CheckColor <font color="#000080">(</font>Colr<font color="#000080">);
               </font><font color="#FF0000"><b>End
               Else
               If </b></font>UpCase <font color="#000080">(</font>DispStr<font color="#000080">[</font>Loop<font color="#000080">]) = </font><font color="#800000">'M' </font><font color="#FF0000"><b>Then
               Begin
                    </b></font>Inc <font color="#000080">(</font>Y<font color="#000080">);
                    </font>X <font color="#000080">:= </font>OldX<font color="#000080">;
                    </font>Loc <font color="#000080">:= ((</font>X<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">)*</font><font color="#800000">2</font><font color="#000080">)+((</font>Y<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">)*</font><font color="#800000">160</font><font color="#000080">);
               </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
          </font><font color="#FF0000"><b>End
          Else
          Begin
               If </b></font>DispStr<font color="#000080">[</font>Loop<font color="#000080">] = </font><font color="#800000">'\' </font><font color="#FF0000"><b>Then
                  </b></font>Delete <font color="#000080">(</font>DispStr<font color="#000080">,</font>Loop<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
               </font>Mem<font color="#000080">[</font>VidSeg<font color="#000080">:</font>Loc<font color="#000080">] := </font>Ord <font color="#000080">(</font>DispStr<font color="#000080">[</font>Loop<font color="#000080">]);
               </font>Mem<font color="#000080">[</font>VidSeg<font color="#000080">:</font>Loc<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">] := </font>Colr<font color="#000080">;
               </font>Inc <font color="#000080">(</font>Loc<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">);
               </font>Inc <font color="#000080">(</font>Loop<font color="#000080">);
          </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
     </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0082.PAS">Original</a><b>]</b></p></body>
</html>
