<html>
<head><title> "MELT Chars on Video" by BERNIE PALLEK</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0024.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>(*
===========================================================================
 BBS: Canada Remote Systems
Date: 07-14-93 (10:28)             Number: 30550
From: BERNIE PALLEK                Refer#: NONE
  To: DENNIS HO                     Recvd: NO
Subj: NEATO VIDEO TRICKS             Conf: (1221) F-PASCAL
---------------------------------------------------------------------------
DH&gt;     Could anyone possibly tell me how I could make the
DH&gt; characters on the screen change the the next letter until
DH&gt; they are Z then they disappear?  Sort of a melting effect.
DH&gt; I realize that this would probably have to be done in ASM
DH&gt; but I would just like the source to incorperate into one of
DH&gt; my programs.

Hi, Dennis.  Just a suggestion: it would probably look better if they
decremented down to a space character (and it would be easier to
program), but here's an example:
*)

</i></font><font color="#FF0000"><b>PROGRAM </b></font>MeltTheCharactersInVideoMemory<font color="#000080">;

</font><font color="#008000"><i>{ untested, by Bernie Pallek, 1993 }
{ best used in 80x25 mode, or you may have problems :') }

{ I don't think the program needs a USES clause }

</i></font><font color="#FF0000"><b>CONST
     </b></font>vidSeg <font color="#000080">: </font>Word <font color="#000080">= </font><font color="#800000">$B800</font><font color="#000080">;  </font><font color="#008000"><i>{ use $B000 for mono monitors }

</i></font><font color="#FF0000"><b>VAR
   </b></font>max <font color="#000080">: </font>Byte<font color="#000080">;
   </font>w1<font color="#000080">,
   </font>w2  <font color="#000080">: </font>Word<font color="#000080">;

</font><font color="#FF0000"><b>BEGIN
     </b></font><font color="#008000"><i>{ the below part finds the max. number of iterations req'd by
       the melting loop }
     </i></font>max <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
     </font><font color="#FF0000"><b>FOR </b></font>w1 <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>TO </b></font><font color="#800000">1999 </font><font color="#FF0000"><b>DO IF </b></font><font color="#000080">(</font>Mem<font color="#000080">[</font>vidSeg <font color="#000080">: </font>w1 <font color="#000080">* </font><font color="#800000">2</font><font color="#000080">] &gt; </font>max<font color="#000080">) </font><font color="#FF0000"><b>THEN
         </b></font>max <font color="#000080">:= </font>Mem<font color="#000080">[</font>vidSeg <font color="#000080">: </font>w1 <font color="#000080">* </font><font color="#800000">2</font><font color="#000080">];
     </font><font color="#008000"><i>{ I know, I know, bad indenting style :') }
     </i></font><font color="#FF0000"><b>FOR </b></font>w1 <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>TO </b></font>max <font color="#FF0000"><b>DO </b></font><font color="#008000"><i>{ could be from *0* TO max }
         { by using w1 * 2, we skip the colour attributes }
         </i></font><font color="#FF0000"><b>FOR </b></font>w2 <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>TO </b></font><font color="#800000">1999 </font><font color="#FF0000"><b>DO IF </b></font><font color="#000080">(</font>Mem<font color="#000080">[</font>vidSeg <font color="#000080">: </font>w2 <font color="#000080">* </font><font color="#800000">2</font><font color="#000080">] &gt; </font><font color="#800000">32</font><font color="#000080">) </font><font color="#FF0000"><b>THEN
             </b></font>Mem<font color="#000080">[</font>vidSeg <font color="#000080">: </font>w2 <font color="#000080">* </font><font color="#800000">2</font><font color="#000080">] := </font>Mem<font color="#000080">[</font>vidSeg <font color="#000080">: </font>w2 <font color="#000080">* </font><font color="#800000">2</font><font color="#000080">] - </font><font color="#800000">1</font><font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">.

</font>Oh<font color="#000080">, </font>you want me <font color="#FF0000"><b>to </b></font><font color="#000080">*</font>explain<font color="#000080">* </font>it<font color="#000080">.  </font>I see<font color="#000080">.  </font>Well<font color="#000080">, </font>text video memory <font color="#FF0000"><b>is set
</b></font>up like this<font color="#000080">: </font><font color="#800000">4000 </font>bytes starting at <font color="#800000">$B800 </font><font color="#000080">(</font><font color="#FF0000"><b>for </b></font>colour<font color="#000080">, </font><font color="#800000">$B000 </font><font color="#FF0000"><b>for </b></font>mono<font color="#000080">).
</font>The first byte <font color="#000080">(</font><font color="#800000">$B800 </font><font color="#000080">: </font><font color="#800000">0</font><font color="#000080">) </font>rep<font color="#800000">'s the ASCII code of the char at 1, 1
</font><font color="#000080">(</font>screen pos<font color="#000080">.), </font><font color="#FF0000"><b>and </b></font>the next byte <font color="#000080">(</font><font color="#800000">$B800 </font><font color="#000080">: </font><font color="#800000">1</font><font color="#000080">) </font>rep<font color="#800000">'s the colour attribute
</font><font color="#FF0000"><b>of </b></font>the char at <font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1.  </font><font color="#FF0000"><b>Then </b></font>comes the ASCII code <font color="#FF0000"><b>for </b></font>the next character<font color="#000080">,
</font><font color="#FF0000"><b>and then </b></font>the colour <font color="#FF0000"><b>for </b></font>it<font color="#000080">.  </font>This keeps going<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>when you reach memory
position <font color="#800000">$B800 </font><font color="#000080">: </font><font color="#800000">160 </font><font color="#000080">(</font>that <font color="#800000">160 </font><font color="#FF0000"><b>is </b></font>decimal<font color="#000080">, </font><font color="#FF0000"><b>not </b></font>hex<font color="#000080">), </font>it wraps <font color="#FF0000"><b>to </b></font>the
next line <font color="#FF0000"><b>on </b></font>your screen<font color="#000080">.  </font>This goes <font color="#FF0000"><b>on until </b></font>you reach <font color="#800000">$B800 </font><font color="#000080">: </font><font color="#800000">3999</font><font color="#000080">,
</font>which <font color="#FF0000"><b>is </b></font>the lower<font color="#000080">-</font>right char<font color="#800000">'s colour attribute.
</font>The beginning part just finds how many times the characters will have
<font color="#FF0000"><b>to </b></font>be updated before they are all space characters<font color="#000080">.
</font>BTW<font color="#000080">, </font>sorry <font color="#FF0000"><b>for not </b></font>making them turn <font color="#FF0000"><b>to </b></font>Zs<font color="#000080">; </font>it was easier <font color="#FF0000"><b>to do </b></font>it <font color="#FF0000"><b>with
</b></font>spaces<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>you may modify the <font color="#FF0000"><b>program as </b></font>you wish<font color="#000080">.

</font>Have fun<font color="#000080">, </font>TTYL<font color="#000080">.

</font>Bernie<font color="#000080">.
</font>___
 <font color="#000080">* </font>SLMR <font color="#800000">2.0 </font><font color="#000080">* ... </font>I wouldn<font color="#800000">'t be caught dead with a necrophiliac!

</font><font color="#000080">--- </font>Maximus <font color="#800000">2.01</font>wb
 <font color="#000080">* </font>Origin<font color="#000080">: * </font>idiot savant <font color="#000080">* +</font><font color="#800000">1 416 935 6628 </font><font color="#000080">* (</font><font color="#800000">1</font><font color="#000080">:</font><font color="#800000">247</font><font color="#000080">/</font><font color="#800000">128</font><font color="#000080">)
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0024.PAS">Original</a><b>]</b></p></body>
</html>
