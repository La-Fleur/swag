<html>
<head><title> "Screen Info" by SEAN PALMER</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0050.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt; This would be a simple way to check for the screen size.
&gt; Clr The screen
&gt; Set the colors to Back on Background and Forground so that no one sees
&gt; what is happening.
&gt; Make a For L := 1 to 50;
&gt; Do a WriteLN(L);
&gt; then after the top line shgould have the letter &quot;2&quot; if it's a 50 lines
&gt; down else it would have 9 there.
&gt; to get the image just use the IF PORT[$B800:000] =$32 Then { 50 lines
}

</i></font><font color="#FF0000"><b>var
 </b></font>mode<font color="#000080">:</font>byte <font color="#FF0000"><b>absolute </b></font><font color="#800000">$40</font><font color="#000080">:</font><font color="#800000">$49</font><font color="#000080">;       </font><font color="#008000"><i>{cur video mode}
 </i></font>columns<font color="#000080">:</font>byte <font color="#FF0000"><b>absolute </b></font><font color="#800000">$40</font><font color="#000080">:</font><font color="#800000">$4A</font><font color="#000080">;
 </font>dispSize<font color="#000080">:</font>word <font color="#FF0000"><b>absolute </b></font><font color="#800000">$40</font><font color="#000080">:</font><font color="#800000">$4C</font><font color="#000080">;   </font><font color="#008000"><i>{cur page size in bytes}
 </i></font>dispOfs<font color="#000080">:</font>word <font color="#FF0000"><b>absolute </b></font><font color="#800000">$40</font><font color="#000080">:</font><font color="#800000">$4E</font><font color="#000080">;    </font><font color="#008000"><i>{cur page offset}
 </i></font>cursor<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">7</font><font color="#000080">]</font><font color="#FF0000"><b>of record </b></font>x<font color="#000080">,</font>y<font color="#000080">:</font>byte<font color="#000080">;</font><font color="#FF0000"><b>end absolute </b></font><font color="#800000">$40</font><font color="#000080">:</font><font color="#800000">$50</font><font color="#000080">;
 </font>cursorMode<font color="#000080">:</font>word <font color="#FF0000"><b>absolute </b></font><font color="#800000">$40</font><font color="#000080">:</font><font color="#800000">$60</font><font color="#000080">; </font><font color="#008000"><i>{scan lines start/end?}
 </i></font>numPages<font color="#000080">:</font>byte <font color="#FF0000"><b>absolute </b></font><font color="#800000">$40</font><font color="#000080">:</font><font color="#800000">$62</font><font color="#000080">;   </font><font color="#008000"><i>{video pages avail} {or activePage??}
 </i></font>crtcPort<font color="#000080">:</font>word <font color="#FF0000"><b>absolute </b></font><font color="#800000">$40</font><font color="#000080">:</font><font color="#800000">$63</font><font color="#000080">;   </font><font color="#008000"><i>{CRTC port addr}
 </i></font>modeSave<font color="#000080">:</font>byte <font color="#FF0000"><b>absolute </b></font><font color="#800000">$40</font><font color="#000080">:</font><font color="#800000">$65</font><font color="#000080">;   </font><font color="#008000"><i>{crtModeSet}
 </i></font>colorSave<font color="#000080">:</font>byte <font color="#FF0000"><b>absolute </b></font><font color="#800000">$40</font><font color="#000080">:</font><font color="#800000">$66</font><font color="#000080">;  </font><font color="#008000"><i>{crtPalette}

 </i></font>ticker<font color="#000080">:</font>longint <font color="#FF0000"><b>absolute </b></font><font color="#800000">$40</font><font color="#000080">:</font><font color="#800000">$6C</font><font color="#000080">;  </font><font color="#008000"><i>{18.2x/sec} {timer}

 </i></font>lastRow<font color="#000080">:</font>byte <font color="#FF0000"><b>absolute </b></font><font color="#800000">$40</font><font color="#000080">:</font><font color="#800000">$84</font><font color="#000080">;    </font><font color="#008000"><i>{newer bios only:rows on screen-1}
 </i></font>points<font color="#000080">:</font>byte <font color="#FF0000"><b>absolute </b></font><font color="#800000">$40</font><font color="#000080">:</font><font color="#800000">$85</font><font color="#000080">;     </font><font color="#008000"><i>{newer bios only:scan lines per char}

{
These last two are the interesting ones. LastRow is set to rows-1 on newer
bios's and by up-to-date programs that tweak the CRTC. Otherwise it will
contain 0, meaning 25 lines, for older Bios's

There's a wealth of information up there, man.

And I think this:
}
</i></font><font color="#FF0000"><b>function </b></font>ScrnLines<font color="#000080">:</font>word<font color="#000080">;</font><font color="#FF0000"><b>begin
 if </b></font>lastRow<font color="#000080">=</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>lastRow<font color="#000080">:=</font><font color="#800000">24</font><font color="#000080">;   </font><font color="#008000"><i>{set in case BIOS doesn't}
 </i></font>scrnLines<font color="#000080">:=</font>lastRow<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#008000"><i>{Untested but should work.}
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0050.PAS">Original</a><b>]</b></p></body>
</html>
