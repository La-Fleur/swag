<html>
<head><title> "Screen Saver w/mouse" by DAVID RAWSTHORNE</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0066.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
Here is my unit for a screen saver - totally self contained with mouse support
as well (Moving the mouse will reset the screensaver time delay as well, and
placing the mouse in top right corner will blank the screen!)
}
</i></font><font color="#FF0000"><b>unit </b></font>blanker<font color="#000080">;

</font><font color="#FF0000"><b>interface

const
</b></font>blank_screen     <font color="#000080">: </font>boolean<font color="#000080">=</font>true<font color="#000080">;            </font><font color="#008000"><i>{True=blank the screen.         }
</i></font>blank_screen_now <font color="#000080">: </font>boolean<font color="#000080">=</font>false<font color="#000080">;           </font><font color="#008000"><i>{True=blank screen immediately. }
</i></font>count            <font color="#000080">: </font>integer <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">;             </font><font color="#008000"><i>{To keep track of our calls.    }
</i></font>screen_cond      <font color="#000080">: </font>boolean<font color="#000080">=</font>false<font color="#000080">;           </font><font color="#008000"><i>{True=screen is blanked.        }

</i></font><font color="#FF0000"><b>var
 </b></font>rows<font color="#000080">,</font>columns<font color="#000080">:</font>byte<font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>mouseinbox<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">,</font>butt<font color="#000080">:</font>word<font color="#000080">):</font>boolean<font color="#000080">;

</font><font color="#FF0000"><b>implementation

uses </b></font>dos<font color="#000080">,</font>bmouse<font color="#000080">;   </font><font color="#008000"><i>{ NOTE : bmouse is in MOUSE.SWG.  SWAG SUPPORT TEAM }

</i></font><font color="#FF0000"><b>var
 </b></font>OldInt9       <font color="#000080">: </font><font color="#FF0000"><b>Procedure</b></font><font color="#000080">;
 </font>OldInt1c      <font color="#000080">: </font>pointer<font color="#000080">;
 </font>ExitSave      <font color="#000080">: </font>pointer<font color="#000080">;
 </font>r             <font color="#000080">: </font>Registers<font color="#000080">;
 </font>loop          <font color="#000080">: </font>byte<font color="#000080">;
 </font>x             <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">30</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
 </font>y             <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">30</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
 </font>xystar        <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">30</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>char<font color="#000080">;

</font><font color="#008000"><i>{$F+}

{****************************************************************************}
{*                                                                          *}
{*                            MouseinBox Procedure                          *}
{*                                                                          *}
{****************************************************************************}
</i></font><font color="#FF0000"><b>function </b></font>mouseinbox<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">,</font>butt<font color="#000080">:</font>word<font color="#000080">):</font>boolean<font color="#000080">;
</font><font color="#FF0000"><b>var
 </b></font>a1<font color="#000080">, </font>b1<font color="#000080">, </font>c <font color="#000080">: </font>word <font color="#000080">;
</font><font color="#FF0000"><b>begin
 </b></font>ms_read<font color="#000080">(</font>a1<font color="#000080">,</font>b1<font color="#000080">,</font>c<font color="#000080">);
 </font>a1<font color="#000080">:=(</font>a1 <font color="#FF0000"><b>div </b></font><font color="#800000">8</font><font color="#000080">) + </font><font color="#800000">1</font><font color="#000080">;
 </font>b1<font color="#000080">:=(</font>b1 <font color="#FF0000"><b>div </b></font><font color="#800000">8</font><font color="#000080">) + </font><font color="#800000">1</font><font color="#000080">;
 </font><font color="#FF0000"><b>if </b></font><font color="#000080">((</font>a1<font color="#000080">&gt;=</font>x1<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>a1<font color="#000080">&lt;=</font>x2<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>b1<font color="#000080">&gt;=</font>y1<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>b1<font color="#000080">&lt;=</font>y2<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>c<font color="#000080">=</font>butt<font color="#000080">)) </font><font color="#FF0000"><b>then
    </b></font>mouseinbox<font color="#000080">:=</font>true
 <font color="#FF0000"><b>else
    </b></font>mouseinbox<font color="#000080">:=</font>false<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;



</font><font color="#008000"><i>{****************************************************************************}
{*                                                                          *}
{*                       Draw the stars on video page 1                     *}
{*                                                                          *}
{****************************************************************************}
</i></font><font color="#FF0000"><b>Procedure </b></font>stars<font color="#000080">;
</font><font color="#FF0000"><b>begin
 for </b></font>loop<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">30 </font><font color="#FF0000"><b>do
 begin
    if </b></font><font color="#000080">((</font>random<font color="#000080">(</font><font color="#800000">80</font><font color="#000080">)&lt;</font><font color="#800000">10</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>ord<font color="#000080">(</font>xystar<font color="#000080">[</font>loop<font color="#000080">])=</font><font color="#800000">15</font><font color="#000080">)) </font><font color="#FF0000"><b>then
    begin
       </b></font>xystar<font color="#000080">[</font>loop<font color="#000080">]:=</font><font color="#800000">' '</font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font><font color="#000080">((</font>random<font color="#000080">(</font><font color="#800000">80</font><font color="#000080">)&lt;</font><font color="#800000">5</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>xystar<font color="#000080">[</font>loop<font color="#000080">]=</font><font color="#800000">'&ugrave;'</font><font color="#000080">)) </font><font color="#FF0000"><b>then
    begin
       </b></font>xystar<font color="#000080">[</font>loop<font color="#000080">]:=</font>chr<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font><font color="#000080">((</font>random<font color="#000080">(</font><font color="#800000">80</font><font color="#000080">)&lt;</font><font color="#800000">5</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>xystar<font color="#000080">[</font>loop<font color="#000080">]=</font><font color="#800000">'&uacute;'</font><font color="#000080">)) </font><font color="#FF0000"><b>then
    begin
       </b></font>xystar<font color="#000080">[</font>loop<font color="#000080">]:=</font><font color="#800000">'&ugrave;'</font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font><font color="#000080">((</font>random<font color="#000080">(</font><font color="#800000">80</font><font color="#000080">)&lt;</font><font color="#800000">20</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>xystar<font color="#000080">[</font>loop<font color="#000080">]=</font><font color="#800000">' '</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>x<font color="#000080">[</font>loop<font color="#000080">]=</font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and
</b></font><font color="#000080">(</font>y<font color="#000080">[</font>loop<font color="#000080">]=</font><font color="#800000">0</font><font color="#000080">)) </font><font color="#FF0000"><b>then
    begin
       </b></font>x<font color="#000080">[</font>loop<font color="#000080">]:=</font>random<font color="#000080">(</font>rows<font color="#000080">);
       </font>y<font color="#000080">[</font>loop<font color="#000080">]:=</font>random<font color="#000080">(</font>columns<font color="#000080">);
       </font>xystar<font color="#000080">[</font>loop<font color="#000080">]:=</font><font color="#800000">'&uacute;'</font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>for </b></font>loop<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">30 </font><font color="#FF0000"><b>do
 begin
    </b></font>r<font color="#000080">.</font>ah<font color="#000080">:=</font><font color="#800000">$02</font><font color="#000080">;
    </font>r<font color="#000080">.</font>bh<font color="#000080">:=</font><font color="#800000">$01</font><font color="#000080">;
    </font>r<font color="#000080">.</font>dh<font color="#000080">:=</font>x<font color="#000080">[</font>loop<font color="#000080">];
    </font>r<font color="#000080">.</font>dl<font color="#000080">:=</font>y<font color="#000080">[</font>loop<font color="#000080">];
    </font>intr<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">,</font>r<font color="#000080">);

    </font>r<font color="#000080">.</font>al<font color="#000080">:=</font>ord<font color="#000080">(</font>xystar<font color="#000080">[</font>loop<font color="#000080">]);
    </font>r<font color="#000080">.</font>ah<font color="#000080">:=</font><font color="#800000">$09</font><font color="#000080">;
    </font>r<font color="#000080">.</font>bl<font color="#000080">:=</font><font color="#800000">7</font><font color="#000080">;
    </font>r<font color="#000080">.</font>bh<font color="#000080">:=</font><font color="#800000">$01</font><font color="#000080">;
    </font>r<font color="#000080">.</font>cx<font color="#000080">:=</font><font color="#800000">01</font><font color="#000080">;
    </font>intr<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">,</font>r<font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font>xystar<font color="#000080">[</font>loop<font color="#000080">]=</font><font color="#800000">' ' </font><font color="#FF0000"><b>then
    begin
       </b></font>x<font color="#000080">[</font>loop<font color="#000080">]:=</font><font color="#800000">0</font><font color="#000080">;
       </font>y<font color="#000080">[</font>loop<font color="#000080">]:=</font><font color="#800000">0</font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{****************************************************************************}
{*                                                                          *}
{*                       Initialize the stars Procedure                     *}
{*                                                                          *}
{****************************************************************************}
</i></font><font color="#FF0000"><b>Procedure </b></font>starsinit<font color="#000080">;
</font><font color="#FF0000"><b>begin
 for </b></font>loop<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">20 </font><font color="#FF0000"><b>do </b></font>xystar<font color="#000080">[</font>loop<font color="#000080">]:=</font><font color="#800000">' '</font><font color="#000080">;
 </font>stars<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{****************************************************************************}
{*                                                                          *}
{*                        Check timer &amp; blank the screen                    *}
{*                                                                          *}
{****************************************************************************}
</i></font><font color="#FF0000"><b>procedure </b></font>blank<font color="#000080">; </font>interrupt<font color="#000080">;
                                            </font><font color="#008000"><i>{This will be called every clock}
                                            {tick by hardware interrupt $08.}
</i></font><font color="#FF0000"><b>begin
 if </b></font>screen_cond <font color="#FF0000"><b>then </b></font>stars<font color="#000080">;
 </font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">cli </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>if </b></font>blank_screen <font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>count<font color="#000080">);
 </font><font color="#FF0000"><b>if </b></font><font color="#000080">((</font>blank_screen_now<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>blank_screen<font color="#000080">)) </font><font color="#FF0000"><b>then </b></font>count<font color="#000080">:=</font><font color="#800000">180</font><font color="#000080">;
 </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>count <font color="#000080">&gt;= </font><font color="#800000">180</font><font color="#000080">) </font><font color="#FF0000"><b>then                    </b></font><font color="#008000"><i>{Ticks till Screen is blanked.  }
                                            {Time is 18.2 TICKS/SEC, or 1092}
                                            {Per minute, so                 }
                                            {2 Mins = 2184,                 }
                                            {3 Mins = 3276,                 }
                                            {4 Mins = 4368,                 }
                                            {5 Mins = 5460,                 }
                                            {6 Mins = 6552,                 }
                                            {7 Mins = 7644,                 }
                                            {8 Mins = 8736,                 }
                                            {9 Mins = 9828,                 }
                                            {10 Mins = 10920,               }
                                            {20 Mins = 21840,               }
                                            {30 Mins = 32760, which is      }
                                            {maximum limit of Integer       }
                                            {variable used.                 }
 </i></font><font color="#FF0000"><b>begin
    </b></font>count       <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;                       </font><font color="#008000"><i>{Equality check and assignment  }
                                            {faster than mod.               }
    </i></font><font color="#FF0000"><b>asm
    </b></font><font color="#FF00FF">mov AX,$02                              </font><font color="#008000"><i>{Turn mouse off.                }
    </i></font><font color="#FF00FF">Int $33

    mov ah,$03                              </font><font color="#008000"><i>{Turn the cursor off            }
    </i></font><font color="#FF00FF">mov bh,$00
    int $10
    or ch,$20
    mov ah,$01
    int $10

    mov ah,$05                              </font><font color="#008000"><i>{Swaps to video page 1          }
    </i></font><font color="#FF00FF">mov al,$01
    int $10
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>if not </b></font>screen_cond <font color="#FF0000"><b>then </b></font>starsinit<font color="#000080">;
    </font>screen_cond<font color="#000080">:=</font>true<font color="#000080">;
 </font><font color="#FF0000"><b>end
 else
 begin
    asm
    </b></font><font color="#FF00FF">mov ax,$0006                            </font><font color="#008000"><i>{Check for Mouse Button press.  }
    </i></font><font color="#FF00FF">int $33
    cmp bx,0
    je @Test2
    mov count,0
 @test2:
    mov ax,$000b                            </font><font color="#008000"><i>{Check for mouse movement.      }
    </i></font><font color="#FF00FF">int $33
    cmp cx,0
    jz @test3
    mov count,0
 @test3:
    cmp dx,0
    jz @test4
    mov count,0
 @test4:
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font><font color="#000080">((</font>count<font color="#000080">=</font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>screen_cond<font color="#000080">)) </font><font color="#FF0000"><b>then
    begin
       asm
       </b></font><font color="#FF00FF">mov ah,$05                           </font><font color="#008000"><i>{Restore the first video page   }
       </i></font><font color="#FF00FF">mov al,$00;
       int $10

       mov ah,$03                           </font><font color="#008000"><i>{Turn the cursor on             }
       </i></font><font color="#FF00FF">mov bh,$00
       int $10
       and ch,$DF
       mov ah,$01
       int $10

       mov AX,$01                           </font><font color="#008000"><i>{Turn mouse on                  }
       </i></font><font color="#FF00FF">Int $33
       </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
       </font>screen_cond<font color="#000080">:=</font>false<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>asm
 </b></font><font color="#FF00FF">sti
 pushf                                      </font><font color="#008000"><i>{Push flags to set up for IRET. }
 </i></font><font color="#FF00FF">call OldInt1c;                             </font><font color="#008000"><i>{Call old ISR entry point.      }
 </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{****************************************************************************}
{*                                                                          *}
{*                         New Interrupt 9 Procedure                        *}
{*                                                                          *}
{****************************************************************************}
</i></font><font color="#FF0000"><b>Procedure </b></font>NewInt9<font color="#000080">; </font>Interrupt<font color="#000080">;
</font><font color="#FF0000"><b>Begin
 </b></font>blank_screen_now<font color="#000080">:=</font>false<font color="#000080">;
 </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>mouseinbox<font color="#000080">(</font><font color="#800000">80</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">80</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">))=</font>true <font color="#FF0000"><b>then
 asm
 </b></font><font color="#FF00FF">mov ax,0004
 mov cx,630
 mov dx,1
 int $33
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font>count<font color="#000080">:=-</font><font color="#800000">1</font><font color="#000080">;                                 </font><font color="#008000"><i>{Set to -1 because the blank    }
                                            {procedure will increment before}
                                            {it tests, so to get it to 0, it}
                                            {must be set to -1.             }
 </i></font><font color="#FF0000"><b>asm
 </b></font><font color="#FF00FF">pushf                                      </font><font color="#008000"><i>{Push flags to set up for IRET. }
 </i></font><font color="#FF00FF">call OldInt9;                              </font><font color="#008000"><i>{Call old ISR entry point.      }
 </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;


</font><font color="#008000"><i>{****************************************************************************}
{*                                                                          *}
{*                  Reset everything at the end of the unit                 *}
{*                                                                          *}
{****************************************************************************}
</i></font><font color="#FF0000"><b>procedure </b></font>ClockExitProc<font color="#000080">;
                                            </font><font color="#008000"><i>{This procedure is VERY         }
                                            {important as you have hooked an}
                                            {interrupt and therefore if this}
                                            {is omitted when the unit is    }
                                            {terminated your system will    }
                                            {crash in an unpredictable and  }
                                            {possibly damaging way.         }
</i></font><font color="#FF0000"><b>begin
 </b></font>ExitProc <font color="#000080">:= </font>ExitSave<font color="#000080">;
 </font>SetIntVec<font color="#000080">(</font><font color="#800000">$1c</font><font color="#000080">,</font>OldInt1c<font color="#000080">);                   </font><font color="#008000"><i>{This &quot;unhooks&quot; the timer vector}
 </i></font>SetIntVec<font color="#000080">(</font><font color="#800000">$09</font><font color="#000080">, </font>Addr<font color="#000080">(</font>OldInt9<font color="#000080">));             </font><font color="#008000"><i>{This restores normal keyboard  }
                                            {routines.                      }

</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{$F-}


{****************************************************************************}
{*                                                                          *}
{*                        Unit Initializing procedure                       *}
{*                                                                          *}
{****************************************************************************}
</i></font><font color="#FF0000"><b>procedure </b></font>Initialise<font color="#000080">;
</font><font color="#FF0000"><b>var
 </b></font>mode <font color="#000080">: </font>byte <font color="#FF0000"><b>absolute </b></font><font color="#800000">$40</font><font color="#000080">:</font><font color="#800000">$49</font><font color="#000080">;
</font><font color="#FF0000"><b>begin
 asm
 </b></font><font color="#FF00FF">mov ah,$05                                 </font><font color="#008000"><i>{Swap to video page 1, clear the}
 </i></font><font color="#FF00FF">mov al,$01                                 </font><font color="#008000"><i>{screen by scrolling it, then   }
 </i></font><font color="#FF00FF">int $10                                    </font><font color="#008000"><i>{return to video page 0.        }

 </i></font><font color="#FF00FF">mov ah,$06
 mov al,$00
 mov bx,$00
 int $10

 mov ah,$05                                 </font><font color="#008000"><i>{Restore the first video page   }
 </i></font><font color="#FF00FF">mov al,$00
 int $10
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font>GetIntVec<font color="#000080">(</font><font color="#800000">$09</font><font color="#000080">, </font>Addr<font color="#000080">(</font>OldInt9<font color="#000080">));             </font><font color="#008000"><i>{These two lines activate the   }
 </i></font>SetIntVec<font color="#000080">(</font><font color="#800000">$09</font><font color="#000080">, </font>Addr<font color="#000080">(</font>NewInt9<font color="#000080">));             </font><font color="#008000"><i>{new keyboard routine handler.  }
 </i></font>GetIntVec<font color="#000080">(</font><font color="#800000">$1c</font><font color="#000080">,</font>OldInt1c<font color="#000080">);                   </font><font color="#008000"><i>{Get old timer vector &amp; save it.}
 </i></font>ExitSave <font color="#000080">:= </font>ExitProc<font color="#000080">;                      </font><font color="#008000"><i>{Save old exit procedure.       }
 </i></font>ExitProc <font color="#000080">:= @</font>ClockExitProc<font color="#000080">;                </font><font color="#008000"><i>{Setup a new exit procedure.    }
 </i></font>SetIntVec<font color="#000080">(</font><font color="#800000">$1c</font><font color="#000080">,@</font>blank<font color="#000080">);                     </font><font color="#008000"><i>{Hook the timer vector to the   }
                                            {new procedure.                 }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#008000"><i>{****************************************************************************}
{*                                                                          *}
{*                           Main program starts here                       *}
{*                                                                          *}
{****************************************************************************}
</i></font><font color="#FF0000"><b>begin
 </b></font>Initialise<font color="#000080">;
 </font>Rows<font color="#000080">:=(</font>mem<font color="#000080">[</font><font color="#800000">$0040</font><font color="#000080">:</font><font color="#800000">$0084</font><font color="#000080">]) + </font><font color="#800000">1</font><font color="#000080">;              </font><font color="#008000"><i>{Find the size from memory      }
 </i></font>Columns<font color="#000080">:=</font>mem<font color="#000080">[</font><font color="#800000">$0040</font><font color="#000080">:</font><font color="#800000">$004a</font><font color="#000080">];
 </font><font color="#FF0000"><b>if </b></font>rows   <font color="#000080">=</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>rows   <font color="#000080">:=</font><font color="#800000">25</font><font color="#000080">;             </font><font color="#008000"><i>{If it could not find anything  }
 </i></font><font color="#FF0000"><b>if </b></font>columns<font color="#000080">=</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>columns<font color="#000080">:=</font><font color="#800000">80</font><font color="#000080">;             </font><font color="#008000"><i>{assume 25*80 mode.             }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0066.PAS">Original</a><b>]</b></p></body>
</html>
