<html>
<head><title> "TESTVID.PAS" by CHRIS LAUTENBACH</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0014.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>Program </b></font>TestVid<font color="#000080">;

</font><font color="#008000"><i>{ High speed Text-video routines For working With binary Files, direct   }
{ screen access etc.  (c)1993 Chris Lautenbach                           }
{                                                                        }
{ You are hereby permitted to use this routines, so long as you give me  }
{ credit.  If you modify them, do not distribute the modified version.   }
{                                                                        }
{ This is the example Program, see SPEEDVID.PAS For the actual Unit      }
{ code, and usage information.                                           }
{                                                                        }
{ &quot;ScreenFile&quot; is a File containing sequential binary screen images. The }
{ easiest way to make these, is to draw several screens in a Program     }
{ like TheDraw, then save them as Binary.  After you are done, copy them }
{ all to one File, like so:                                              }
{                                                                        }
{ COPY /B SCREEN1.BIN+SCREEN2.BIN+SCREEN3.BIN SCREEN.BIN                 }
{                                                                        }
{ Note: the /B option is NECESSARY.  Without specifying binary mode,     }
{       COPY will insert ^Z's and other wierd stuff that will screw up   }
{       the resulting File.                                              }

</i></font><font color="#FF0000"><b>Uses  </b></font>Dos<font color="#000080">, </font>Crt<font color="#000080">, </font>SpeedVid<font color="#000080">;

</font><font color="#FF0000"><b>Var   </b></font>ScreenFile <font color="#000080">: </font><font color="#FF0000"><b>File of </b></font>ScreenLine<font color="#000080">;
      </font>StartLine<font color="#000080">, </font>TempLine<font color="#000080">, </font>idx <font color="#000080">: </font>Integer<font color="#000080">;
      </font>Cmd <font color="#000080">: </font>Char<font color="#000080">;
      </font>p <font color="#000080">: </font>Pointer<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>ShowScreenLine<font color="#000080">(</font>Index<font color="#000080">:</font>Word<font color="#000080">);
</font><font color="#FF0000"><b>begin
  If </b></font>StartLine<font color="#000080">+</font>Index<font color="#000080">&lt;</font>Filesize<font color="#000080">(</font>ScreenFile<font color="#000080">) </font><font color="#FF0000"><b>then
  begin
    </b></font>Seek<font color="#000080">(</font>ScreenFile<font color="#000080">, </font>StartLine<font color="#000080">+</font>Index<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">);
    </font>Read<font color="#000080">(</font>ScreenFile<font color="#000080">, </font>VideoScreen<font color="#000080">[</font>Index<font color="#000080">]);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>MonoMode <font color="#000080">:= (</font>VideoMode <font color="#000080">= </font><font color="#800000">7</font><font color="#000080">);
  </font>SaveScreen<font color="#000080">(</font>P<font color="#000080">);
  </font>Assign<font color="#000080">(</font>ScreenFile<font color="#000080">,</font><font color="#800000">'testvid.exe'</font><font color="#000080">);
  </font><font color="#008000"><i>{$I-} </i></font>Reset<font color="#000080">(</font>ScreenFile<font color="#000080">); </font><font color="#008000"><i>{$I+}
  </i></font><font color="#FF0000"><b>If </b></font>IOResult<font color="#000080">&lt;&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then
  begin
    </b></font>Writeln<font color="#000080">(</font><font color="#800000">'Error: Cannot open SCREEN.BIN.'</font><font color="#000080">);
    </font>Halt<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>StartLine<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>For </b></font>TempLine<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>ScreenHeight <font color="#FF0000"><b>do </b></font>ShowScreenLine<font color="#000080">(</font>TempLine<font color="#000080">);
  </font><font color="#FF0000"><b>Repeat
    Repeat Until </b></font>KeyPressed<font color="#000080">;
    </font>Cmd<font color="#000080">:=</font>ReadKey<font color="#000080">;
    </font><font color="#FF0000"><b>If </b></font>Cmd<font color="#000080">=</font><font color="#800000">#0 </font><font color="#FF0000"><b>then
    begin
      </b></font>Cmd<font color="#000080">:=</font>ReadKey<font color="#000080">;
      </font><font color="#FF0000"><b>Case </b></font>Cmd <font color="#FF0000"><b>of
</b></font><font color="#008000"><i>{Down}  </i></font><font color="#800000">#80 </font><font color="#000080">: </font><font color="#FF0000"><b>If </b></font>StartLine<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">&lt;</font>Filesize<font color="#000080">(</font>ScreenFile<font color="#000080">) </font><font color="#FF0000"><b>then
              begin
                </b></font>Inc<font color="#000080">(</font>StartLine<font color="#000080">);
                </font>ScrollScreen<font color="#000080">(</font>Up<font color="#000080">);
                </font>ShowScreenLine<font color="#000080">(</font>ScreenHeight<font color="#000080">);
              </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{Up}    </i></font><font color="#800000">#72 </font><font color="#000080">: </font><font color="#FF0000"><b>If </b></font>StartLine<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">&gt;=</font><font color="#800000">0 </font><font color="#FF0000"><b>then
              begin
                </b></font>Dec<font color="#000080">(</font>StartLine<font color="#000080">);
                </font>ScrollScreen<font color="#000080">(</font>Down<font color="#000080">);
                </font>ShowScreenLine<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
              </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{PgDn}  </i></font><font color="#800000">#81 </font><font color="#000080">: </font><font color="#FF0000"><b>begin
                If </b></font>StartLine<font color="#000080">+</font>ScreenHeight<font color="#000080">&lt;</font>Filesize<font color="#000080">(</font>ScreenFile<font color="#000080">) </font><font color="#FF0000"><b>then
                  </b></font>TempLine<font color="#000080">:=</font>ScreenHeight
                    <font color="#FF0000"><b>ELSE
                  </b></font>TempLine<font color="#000080">:=</font>ScreenHeight<font color="#000080">-(</font>Filesize<font color="#000080">(</font>ScreenFile<font color="#000080">)-</font>ScreenHeight<font color="#000080">);
                </font><font color="#FF0000"><b>For </b></font>idx<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>TempLine <font color="#FF0000"><b>do
                begin
                  </b></font>Inc<font color="#000080">(</font>StartLine<font color="#000080">);
                  </font>ScrollScreen<font color="#000080">(</font>Up<font color="#000080">);
                  </font>ShowScreenLine<font color="#000080">(</font>ScreenHeight<font color="#000080">);
                </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
              </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{PgUp}  </i></font><font color="#800000">#73 </font><font color="#000080">: </font><font color="#FF0000"><b>begin
                If </b></font>StartLine<font color="#000080">-</font>ScreenHeight<font color="#000080">&gt;=</font><font color="#800000">0 </font><font color="#FF0000"><b>then
                  </b></font>TempLine<font color="#000080">:=</font>ScreenHeight
                    <font color="#FF0000"><b>ELSE
                  </b></font>TempLine<font color="#000080">:=</font>StartLine<font color="#000080">;
                </font><font color="#FF0000"><b>For </b></font>idx<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>TempLine <font color="#FF0000"><b>do
                begin
                  </b></font>Dec<font color="#000080">(</font>StartLine<font color="#000080">);
                  </font>ScrollScreen<font color="#000080">(</font>Down<font color="#000080">);
                  </font>ShowScreenLine<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
                </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
              </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{case}
    </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>Until </b></font>Cmd<font color="#000080">=</font><font color="#800000">#27</font><font color="#000080">; </font><font color="#008000"><i>{ESC}
  </i></font>Close<font color="#000080">(</font>ScreenFile<font color="#000080">);
  </font>RestoreScreen<font color="#000080">(</font>P<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0014.PAS">Original</a><b>]</b></p></body>
</html>
