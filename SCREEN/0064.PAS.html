<html>
<head><title> "Virtual Screens" by DAVID DUNSON</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0064.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#008000"><i>{
William Schroeder wrote in a message to All:

 WS&gt; PROCEDURE CopyScreen(First, Second, Mask: Byte);
 WS&gt; BEGIN
 WS&gt;   Move(VirtualScreen[First],VirtualScreen[Second],64000);
 WS&gt; END;

I would suggest that you use First and Second as Pointers as opposed to Bytes
and pass the address of your screens.

Try this procedure and see what this does for ya.

--------------------------------------------------------------------------
}
</i></font><font color="#FF0000"><b>Program </b></font>Mask<font color="#000080">;

</font><font color="#FF0000"><b>Var
    </b></font>s1<font color="#000080">, </font>s2 <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>CopyMask<font color="#000080">(</font>Org<font color="#000080">, </font>Dst<font color="#000080">: </font>Pointer<font color="#000080">; </font>Size<font color="#000080">: </font>Word<font color="#000080">; </font>Mask<font color="#000080">: </font>Byte<font color="#000080">); </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>ASM
      </b></font><font color="#FF00FF">PUSH  DS
      LDS   SI, Org
      LES   DI, Dst
      MOV   CX, Size
      MOV   BL, Mask
@@1:  LODSB
      CMP   AL, BL
      JNZ   @@2
      INC   DI
      JMP   @@3
@@2:  STOSB
@@3:  LOOP  @@1
      POP   DS
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Begin
   </b></font>s1 <font color="#000080">:= </font><font color="#800000">'Hello'</font><font color="#000080">;
   </font>s2 <font color="#000080">:= </font><font color="#800000">'XXXXXXXXX'</font><font color="#000080">;
   </font>CopyMask<font color="#000080">(@</font>s1<font color="#000080">, @</font>s2<font color="#000080">, </font><font color="#800000">255</font><font color="#000080">, </font>Byte<font color="#000080">(</font><font color="#800000">'l'</font><font color="#000080">));
   </font>WriteLn<font color="#000080">(</font>s1<font color="#000080">);
   </font>WriteLn<font color="#000080">(</font>s2<font color="#000080">);
</font><font color="#FF0000"><b>End</b></font><font color="#000080">.

-------------------------------------------------------------------------

</font><font color="#FF0000"><b>If </b></font>you run this <font color="#FF0000"><b>program</b></font><font color="#000080">, </font>you<font color="#800000">'ll notice that s1 ('</font>Hello<font color="#800000">') is copied to s2 with
</font>the exception that <font color="#800000">'l' </font>was <font color="#FF0000"><b>not </b></font>copied giving s2 a value <font color="#FF0000"><b>of </b></font><font color="#800000">'HeXXo'</font><font color="#000080">.  </font>Be
carefull <font color="#FF0000"><b>in </b></font>using this <font color="#FF0000"><b>on Pascal type </b></font>strings<font color="#000080">, </font>because byte<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">] (</font>the length
byte<font color="#000080">) </font><font color="#FF0000"><b>is </b></font>also <font color="#000080">&quot;</font>masked<font color="#000080">&quot;.

</font><font color="#FF0000"><b>In </b></font>order <font color="#FF0000"><b>for </b></font>you <font color="#FF0000"><b>to </b></font>use this <font color="#FF0000"><b>procedure for </b></font>your <font color="#FF0000"><b>virtual </b></font>screens<font color="#000080">, </font>you would have
<font color="#FF0000"><b>to </b></font>call it passing the address <font color="#FF0000"><b>of </b></font>your screens<font color="#000080">.  </font>Example<font color="#000080">:

</font>CopyMask<font color="#000080">(@</font>VirtualScreen<font color="#000080">[</font>first<font color="#000080">], @</font>VirtualScreen<font color="#000080">[</font>Second<font color="#000080">], </font><font color="#800000">64000</font><font color="#000080">, </font>Mask<font color="#000080">);

</font>David

</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0064.PAS">Original</a><b>]</b></p></body>
</html>
