<html>
<head><title> "GETCHAR routines" by VARIOUS</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0045.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
From: GREG ESTABROOKS

I was wondering if anybody knew how to capture a character in Turbo
Pascal 6.0 at any x,y location like QuickBasic's SCREEN(x,y).
}

</i></font><font color="#FF0000"><b>FUNCTION </b></font>GetChar<font color="#000080">( </font>X<font color="#000080">,</font>Y <font color="#000080">:</font>WORD<font color="#000080">; </font><font color="#FF0000"><b>VAR </b></font>Attrib<font color="#000080">:</font>BYTE <font color="#000080">) :</font>CHAR<font color="#000080">;
</font><font color="#FF0000"><b>VAR
   </b></font>Ofs <font color="#000080">:</font>WORD<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
                        </b></font><font color="#008000"><i>{ NOTE: Change the Segment from $B800 }
                        {       to $B000 for MonoChrome.      }
  </i></font>Ofs <font color="#000080">:= ((</font>Y<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">) * </font><font color="#800000">160</font><font color="#000080">) + ((</font>X <font color="#FF0000"><b>SHL </b></font><font color="#800000">1</font><font color="#000080">) - </font><font color="#800000">1</font><font color="#000080">);
  </font>Attrib <font color="#000080">:= </font>MEM<font color="#000080">[</font><font color="#800000">$B800</font><font color="#000080">:</font>Ofs<font color="#000080">];
  </font>GetChar <font color="#000080">:= </font>CHR<font color="#000080">( </font>MEM<font color="#000080">[</font><font color="#800000">$B800</font><font color="#000080">:</font>Ofs<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">] );
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#008000"><i>{
From: LOU DUCHEZ
------------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>function </b></font>getvideodata<font color="#000080">(</font>x<font color="#000080">, </font>y<font color="#000080">: </font>byte<font color="#000080">): </font>char<font color="#000080">;

</font><font color="#008000"><i>{ &quot;Reads&quot; a character off the video screen. }

</i></font><font color="#FF0000"><b>type  </b></font>videolocation <font color="#000080">= </font><font color="#FF0000"><b>record                  </b></font><font color="#008000"><i>{ video memory locations }
        </i></font>videodata<font color="#000080">: </font>char<font color="#000080">;                      </font><font color="#008000"><i>{ character displayed }
        </i></font>videoattribute<font color="#000080">: </font>byte<font color="#000080">;                 </font><font color="#008000"><i>{ attributes }
        </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>var </b></font>vidptr<font color="#000080">: ^</font>videolocation<font color="#000080">;
    </font>monosystem<font color="#000080">: </font>boolean<font color="#000080">;
    </font>videosegment<font color="#000080">: </font>word<font color="#000080">;
    </font>scrncols<font color="#000080">:  </font>byte <font color="#FF0000"><b>absolute </b></font><font color="#800000">$0040</font><font color="#000080">:</font><font color="#800000">$004a</font><font color="#000080">;
    </font>videomode<font color="#000080">: </font>byte <font color="#FF0000"><b>absolute </b></font><font color="#800000">$0040</font><font color="#000080">:</font><font color="#800000">$0049</font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>monosystem <font color="#000080">:= (</font>videomode <font color="#000080">= </font><font color="#800000">7</font><font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>monosystem <font color="#FF0000"><b>then </b></font>videosegment <font color="#000080">:= </font><font color="#800000">$b000 </font><font color="#FF0000"><b>else </b></font>videosegment <font color="#000080">:= </font><font color="#800000">$b800</font><font color="#000080">;
  </font>vidptr <font color="#000080">:= </font>ptr<font color="#000080">(</font>videosegment<font color="#000080">, </font><font color="#800000">2</font><font color="#000080">*(</font>scrncols<font color="#000080">*(</font>y <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">) + (</font>x <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">)));
  </font>getvideodata <font color="#000080">:= </font>vidptr<font color="#000080">^.</font>videodata<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0045.PAS">Original</a><b>]</b></p></body>
</html>
