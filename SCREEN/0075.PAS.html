<html>
<head><title> "GetPut Video portions" by CALABRO DAVIDE</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0075.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>(*

  Name: GETPUT
  Version: 1.0
  Date of release: 02/Ago/1994
  Language: it can be used with Turbo Pascal 6.0  or
                                Borland Pascal 7.0


  Donated to the public domain by:  Calabro' Davide
                                    P.O.Box 65
                                    21019 Somma Lombardo (VA)
                                    Italy

                            E-mail: calabro@dsi.unimi.it

  Send comments,modifications or conversions in any other
  language to me thanks!


  This unit implements a useful Backup/Restore text video-portions feature.
  No static buffers are used to retain the saved video memory. Be sure
  to have enough heap space when call the GetVideo function or you'll get
  an &quot;Heap overflow error&quot; at runtime!

  This is an easy example of use of the GetPut unit:

  +--- START EXAMPLE ----------------------------------------------------+
  | Uses GETPUT;                                                         |
  |                                                                      |
  | Var A:PGetPut;  {&lt;---- Each saved portion has its own pointer}       |
  |                                                                      |
  | Begin                                                                |
  |   A:=GetVideo(10,10,30,5);                                           |
  |              { +--|--|-|---- Start X position }                      |
  |              {    +--|-|---- Start Y position }                      |
  |              {       +-|---- Length on X axis }                      |
  |              {         +---- Length on Y axis }                      |
  |                                                                      |
  |   PutVideo(A); {&lt;---- Restore the previously saved portion       }   |
  |                {      Warning: Dinamic buffer is disposed, don't }   |
  |                {               call with same buffer twice!      }   |
  |                                                                      |
  | End.                                                                 |
  +--- END EXAMPLE ------------------------------------------------------+

*)

</i></font><font color="#FF0000"><b>Unit </b></font>GETPUT<font color="#000080">;

</font><font color="#FF0000"><b>INTERFACE

Type </b></font>PGetPut<font color="#000080">=^</font>TGetPut<font color="#000080">;
     </font>TGetPut<font color="#000080">=</font><font color="#FF0000"><b>Record
               </b></font>Item<font color="#000080">:</font>Byte<font color="#000080">;
               </font>Next<font color="#000080">:</font>PGetPut<font color="#000080">;
             </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function  </b></font>GetVideo<font color="#000080">(</font>X<font color="#000080">,</font>Y<font color="#000080">,</font>LX<font color="#000080">,</font>LY<font color="#000080">:</font>Byte<font color="#000080">):</font>PGetPut<font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>PutVideo<font color="#000080">(</font>BufPunt<font color="#000080">:</font>PGetPut<font color="#000080">);

</font><font color="#FF0000"><b>IMPLEMENTATION

Var </b></font>GenPunt1<font color="#000080">,
    </font>GenPunt2<font color="#000080">:</font>PGetPut<font color="#000080">;
    </font>Loop1<font color="#000080">:</font>Byte<font color="#000080">;
    </font>Loop<font color="#000080">:</font>Word<font color="#000080">;
    </font>StartAddr<font color="#000080">:</font>Word<font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>GetVideo<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>New<font color="#000080">(</font>GenPunt1<font color="#000080">);
  </font>GetVideo<font color="#000080">:=</font>GenPunt1<font color="#000080">;
  </font><font color="#FF0000"><b>For </b></font>Loop<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>To </b></font><font color="#800000">4 </font><font color="#FF0000"><b>Do
    Begin
      Case </b></font>Loop <font color="#FF0000"><b>Of
        </b></font><font color="#800000">1</font><font color="#000080">: </font>GenPunt1<font color="#000080">^.</font>Item<font color="#000080">:=</font>X<font color="#000080">;
        </font><font color="#800000">2</font><font color="#000080">: </font>GenPunt1<font color="#000080">^.</font>Item<font color="#000080">:=</font>Y<font color="#000080">;
        </font><font color="#800000">3</font><font color="#000080">: </font>GenPunt1<font color="#000080">^.</font>Item<font color="#000080">:=</font>LX<font color="#000080">;
        </font><font color="#800000">4</font><font color="#000080">: </font>GenPunt1<font color="#000080">^.</font>Item<font color="#000080">:=</font>LY<font color="#000080">;
      </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
      </font>New<font color="#000080">(</font>GenPunt2<font color="#000080">);
      </font>GenPunt1<font color="#000080">^.</font>Next<font color="#000080">:=</font>GenPunt2<font color="#000080">;
      </font>GenPunt1<font color="#000080">:=</font>GenPunt2<font color="#000080">;
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font>StartAddr<font color="#000080">:=</font><font color="#800000">160</font><font color="#000080">*(</font>Y<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">)+</font><font color="#800000">2</font><font color="#000080">*(</font>X<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">);
  </font><font color="#FF0000"><b>For </b></font>Loop1<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>To </b></font>LY <font color="#FF0000"><b>Do
    Begin
      For </b></font>Loop<font color="#000080">:=</font>StartAddr <font color="#FF0000"><b>To </b></font>StartAddr<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">*</font>LX<font color="#000080">-</font><font color="#800000">1 </font><font color="#FF0000"><b>Do
        Begin
          </b></font>GenPunt1<font color="#000080">^.</font>Item<font color="#000080">:=</font>Mem<font color="#000080">[</font><font color="#800000">$B800</font><font color="#000080">:</font>Loop<font color="#000080">];
          </font>New<font color="#000080">(</font>GenPunt2<font color="#000080">);
          </font>GenPunt1<font color="#000080">^.</font>Next<font color="#000080">:=</font>GenPunt2<font color="#000080">;
          </font>GenPunt1<font color="#000080">:=</font>GenPunt2<font color="#000080">;
        </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
      </font>Inc<font color="#000080">(</font>StartAddr<font color="#000080">,</font><font color="#800000">160</font><font color="#000080">);
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font>GenPunt1<font color="#000080">^.</font>Next<font color="#000080">:=</font><font color="#FF0000"><b>Nil</b></font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>PutVideo<font color="#000080">;
</font><font color="#FF0000"><b>Var </b></font>X<font color="#000080">,</font>Y<font color="#000080">,</font>LX<font color="#000080">,</font>LY<font color="#000080">:</font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>GenPunt1<font color="#000080">:=</font>BufPunt<font color="#000080">;
  </font><font color="#FF0000"><b>For </b></font>Loop<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>To </b></font><font color="#800000">4 </font><font color="#FF0000"><b>Do
    Begin
      Case </b></font>Loop <font color="#FF0000"><b>Of
        </b></font><font color="#800000">1</font><font color="#000080">: </font>X<font color="#000080">:=</font>GenPunt1<font color="#000080">^.</font>Item<font color="#000080">;
        </font><font color="#800000">2</font><font color="#000080">: </font>Y<font color="#000080">:=</font>GenPunt1<font color="#000080">^.</font>Item<font color="#000080">;
        </font><font color="#800000">3</font><font color="#000080">: </font>LX<font color="#000080">:=</font>GenPunt1<font color="#000080">^.</font>Item<font color="#000080">;
        </font><font color="#800000">4</font><font color="#000080">: </font>LY<font color="#000080">:=</font>GenPunt1<font color="#000080">^.</font>Item<font color="#000080">;
      </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
      </font>GenPunt2<font color="#000080">:=</font>GenPunt1<font color="#000080">^.</font>Next<font color="#000080">;
      </font>Dispose<font color="#000080">(</font>GenPunt1<font color="#000080">);
      </font>GenPunt1<font color="#000080">:=</font>GenPunt2<font color="#000080">;
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font>StartAddr<font color="#000080">:=</font><font color="#800000">160</font><font color="#000080">*(</font>Y<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">)+</font><font color="#800000">2</font><font color="#000080">*(</font>X<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">);
  </font><font color="#FF0000"><b>For </b></font>Loop1<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>To </b></font>LY <font color="#FF0000"><b>Do
    Begin
      For </b></font>Loop<font color="#000080">:=</font>StartAddr <font color="#FF0000"><b>To </b></font>StartAddr<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">*</font>LX<font color="#000080">-</font><font color="#800000">1 </font><font color="#FF0000"><b>Do
        Begin
          </b></font>Mem<font color="#000080">[</font><font color="#800000">$B800</font><font color="#000080">:</font>Loop<font color="#000080">]:=</font>GenPunt1<font color="#000080">^.</font>Item<font color="#000080">;
          </font>GenPunt2<font color="#000080">:=</font>GenPunt1<font color="#000080">^.</font>Next<font color="#000080">;
          </font>Dispose<font color="#000080">(</font>GenPunt1<font color="#000080">);
          </font>GenPunt1<font color="#000080">:=</font>GenPunt2<font color="#000080">;
        </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
      </font>Inc<font color="#000080">(</font>StartAddr<font color="#000080">,</font><font color="#800000">160</font><font color="#000080">);
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Begin
End</b></font><font color="#000080">.</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0075.PAS">Original</a><b>]</b></p></body>
</html>
