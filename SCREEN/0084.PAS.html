<html>
<head><title> "Multi-color Strings" by ORLANDO LLANES</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0084.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>UNIT </b></font>FWColor<font color="#000080">;
</font><font color="#008000"><i>{ This unit prints a string using John O'Harrow's FWrite and  }
{ has the ability to change color from within the string. The }
{ demo program is at the end of this unit.                    }

{ If you have any questions, improvements, or comments, etc., }
{ E-Mail me (Orlando Llanes) either via NetMail at 1:369/68   }
{ or via the Internet at a010111t@bcfreenet.seflin.lib.fl.us  }

{ Thanks go to -&gt; John O'Harrow &lt;- for his &quot;Universal FastWrite&quot;   }
{ routine! Compilation of this unit requires his FWrite unit       }
{ found in SWAG9411 in SCREEN.SWG (Love the new format SWAG Team!) }

{ Possible enhancements:                             }
{  - Use a different character for the color marker. }
{  - Optimizations.                                  }
{  - Use character equivalent of FastWrite(?)        }

{ Notes:                                                    }
{  - Coordinates are *not* zero based as in the FWrite,     }
{    unit, the upper left corner is (1,1).                  }
{  - The marker character is ASCII character 0, hopefully,  }
{    this will not interfere with anything.                 }
{  - Sorry for the Boolean and type-casting in the demo,    }
{    I didn't feel like doing the math for the attributes,  }
{    and type-casting makes things faster when converting   }
{    between similar types, i.e. Char &lt;--&gt; Byte.            }

</i></font><font color="#FF0000"><b>INTERFACE
USES </b></font>FWrite<font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>FastWriteColor<font color="#000080">( </font>X<font color="#000080">, </font>Y <font color="#000080">: </font>Byte<font color="#000080">; </font>Str <font color="#000080">: </font><font color="#FF0000"><b>String </b></font><font color="#000080">);

</font><font color="#FF0000"><b>IMPLEMENTATION

PROCEDURE </b></font>FastWriteColor<font color="#000080">( </font>X<font color="#000080">, </font>Y <font color="#000080">: </font>Byte<font color="#000080">; </font>Str <font color="#000080">: </font><font color="#FF0000"><b>String </b></font><font color="#000080">);
</font><font color="#FF0000"><b>VAR
  </b></font>_X<font color="#000080">, </font>Index<font color="#000080">, </font>FWCAttr <font color="#000080">: </font>Byte<font color="#000080">;

</font><font color="#FF0000"><b>BEGIN
  </b></font>_X <font color="#000080">:= </font>X<font color="#000080">;  </font>Index <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
  </font><font color="#FF0000"><b>WHILE </b></font>Index <font color="#000080">&lt;= </font>Byte<font color="#000080">( </font>Str<font color="#000080">[ </font><font color="#800000">0 </font><font color="#000080">] ) </font><font color="#FF0000"><b>DO
  </b></font><font color="#008000"><i>{ ^^ Loop from 1 to length of string }
    </i></font><font color="#FF0000"><b>BEGIN
      IF </b></font>Str<font color="#000080">[ </font>Index <font color="#000080">] = </font><font color="#800000">#0 </font><font color="#FF0000"><b>THEN
      </b></font><font color="#008000"><i>{ ^^ Is the current character the marker? }
        </i></font><font color="#FF0000"><b>BEGIN
          </b></font>FWCAttr <font color="#000080">:= </font>Byte<font color="#000080">( </font>Str<font color="#000080">[ </font>Index <font color="#000080">+ </font><font color="#800000">1 </font><font color="#000080">] );
          </font><font color="#008000"><i>{ ^^ Set Text Attributes }
          </i></font>Inc<font color="#000080">( </font>Index<font color="#000080">, </font><font color="#800000">2 </font><font color="#000080">);
          </font><font color="#008000"><i>{ ^^ Point past marker and the color }
        </i></font><font color="#FF0000"><b>END </b></font><font color="#008000"><i>{ of Str[ Index ] = marker }
      </i></font><font color="#FF0000"><b>ELSE
        BEGIN
          </b></font>FastWrite<font color="#000080">( </font>_X <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">, </font>Y <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">, </font>FWCAttr<font color="#000080">, </font>Str<font color="#000080">[ </font>Index <font color="#000080">] );
          </font><font color="#008000"><i>{ ^^ Zero based, so decrement _X and Y }
          </i></font>Inc<font color="#000080">( </font>_X <font color="#000080">);
          </font><font color="#008000"><i>{ ^^ Increment reference to next screen position }
          </i></font>Inc<font color="#000080">( </font>Index <font color="#000080">);
          </font><font color="#008000"><i>{ ^^ Increment reference to next character }
        </i></font><font color="#FF0000"><b>END</b></font><font color="#000080">; </font><font color="#008000"><i>{ of ELSE }
    </i></font><font color="#FF0000"><b>END</b></font><font color="#000080">; </font><font color="#008000"><i>{ of WHILE..DO }
</i></font><font color="#FF0000"><b>END</b></font><font color="#000080">; </font><font color="#008000"><i>{ of FastWriteColor }
</i></font><font color="#FF0000"><b>END</b></font><font color="#000080">. </font><font color="#008000"><i>{ of UNIT FWColor }

</i></font><font color="#FF0000"><b>PROGRAM </b></font>FWCDemo<font color="#000080">;
</font><font color="#FF0000"><b>USES </b></font>Crt<font color="#000080">, </font>FWColor<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN </b></font><font color="#008000"><i>{ Main program }
  </i></font>ClrScr<font color="#000080">;
  </font>FastWriteColor<font color="#000080">( </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">,
    </font><font color="#800000">#0#$4F'This '#0#9'is'#0#$3F' so'#0#15' cool!' </font><font color="#000080">);
  </font>FastWriteColor<font color="#000080">( </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">,
    </font><font color="#800000">#0 </font><font color="#000080">+ </font>Char<font color="#000080">((</font><font color="#FF0000"><b>NOT </b></font><font color="#800000">15</font><font color="#000080">) </font><font color="#FF0000"><b>AND NOT </b></font><font color="#800000">128</font><font color="#000080">) + </font><font color="#800000">'You '#0#4'can '#0 </font><font color="#000080">+
      </font>Char<font color="#000080">(</font><font color="#800000">33 </font><font color="#FF0000"><b>OR </b></font><font color="#800000">128</font><font color="#000080">) + </font><font color="#800000">'change' </font><font color="#000080">);
  </font>FastWriteColor<font color="#000080">( </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">3</font><font color="#000080">,
    </font><font color="#800000">#0#14'colors '#0#10'on '#0#13'the '#0#$FF'fly!' </font><font color="#000080">);
  </font>FastWriteColor<font color="#000080">( </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">4</font><font color="#000080">,
    </font><font color="#800000">#0#$25'And you can even write control characters! ' </font><font color="#000080">+
      </font><font color="#800000">#12#4#7#2#1#0#14#14#13#27#26 </font><font color="#000080">);
  </font>GoToXY<font color="#000080">( </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">5 </font><font color="#000080">);
</font><font color="#FF0000"><b>END</b></font><font color="#000080">. </font><font color="#008000"><i>{ of demo }
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to SCREEN SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0084.PAS">Original</a><b>]</b></p></body>
</html>
