<html>
<head><title> "Grab 256 Color PCX and save to file" by SCOTT TUNSTALL</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0213.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
========================================

GRABIMG.PAS (C) 1994-1996 SCOTT TUNSTALL
DISTRIBUTE FREELY

----------------------------------------

This program allows you to load in a 256 colour PCX and save
areas of it as a .IMG file.

Use the cursor keys to move the cross hairs. Press space when you
are at the top left of the area you wish to cut, then when the
second pair of cross hairs appear, move them to the bottom right
of the image to cut. You will see the size of the image in
horizontal width &amp; vertical height at the bottom left of the
screen. When you have a sprite of the desired size defined
within the crosshairs, press space again.

If the Shape (it must be less than width/height 255 * 255) can be
grabbed then you will be asked for a filename for the Shape to
be saved.

Standard MS - DOS filenames are required.





===============

For the coders:

---------------

Shape grabbed is from the non planar, unchained VGA mode $13.




=====================

File format of image:

---------------------

Byte 0 : Width
Byte 1 : Height
Byte 2.. Actual Shape data itself, uncompressed. The data is
         saved row by row, line by line.

To read it use the LoadShape command present in NEWGRAPH

ex:
        var p: pointer;
        LoadShape('SPRITE.IMG',p);
        ...

To display it use the Blit/Block/ClipBlit/ClipBlock commands.

}

</i></font><font color="#FF0000"><b>Uses </b></font>NEWGRAPH<font color="#000080">, </font>NWKBDINT<font color="#000080">, </font>CRT<font color="#000080">, </font>DOS<font color="#000080">;

     </font><font color="#008000"><i>{ NOTE : NWKBDINT - in KEYBOARD.SWG
              NEWGRAPH - in GRAPHICS.SWG }


</i></font><font color="#FF0000"><b>Var </b></font>BarColour <font color="#000080">: </font>byte<font color="#000080">;
    </font>FirstBarX<font color="#000080">,
    </font>FirstBarY<font color="#000080">,
    </font>SecondBarX<font color="#000080">,
    </font>SecondBarY<font color="#000080">: </font>word<font color="#000080">;
    </font>Grabbing<font color="#000080">: </font>boolean<font color="#000080">;
    </font>BufferSeg<font color="#000080">,
    </font>BufferOffset<font color="#000080">:</font>word<font color="#000080">;
    </font>ThePalette<font color="#000080">: </font>PaletteType<font color="#000080">;





</font><font color="#008000"><i>{
Find the brightest colour available, and, yes I did program
this, it's not from SWAG or anything like that. Shall I explain
it to you ?

Each Colour has it's own Red, Green and Blue value attached to it.
Each Colour can have Red, Green and Blue component values of 64
thus giving 262,144 colours (64 * 64 * 64)

To find the brightest colour you just read the palette entries,
add up the Red, Green and Blue values and check if they are the
brightest so far. If they are, take a note of what Colour has
those values and do until all Colours are scanned. Easy eh? :-)
}




</i></font><font color="#FF0000"><b>Function </b></font>GetBrightestColour<font color="#000080">: </font>byte<font color="#000080">;
</font><font color="#FF0000"><b>Var </b></font>Total<font color="#000080">: </font>byte<font color="#000080">;
    </font>Count<font color="#000080">: </font>byte<font color="#000080">;
    </font>RedTotal<font color="#000080">,
    </font>GreenTotal<font color="#000080">,
    </font>BlueTotal<font color="#000080">, </font>ColourWithBestHue <font color="#000080">: </font>byte<font color="#000080">;

    </font>BestHueFound<font color="#000080">,
    </font>HueValue<font color="#000080">: </font>longint<font color="#000080">;

</font><font color="#FF0000"><b>Begin
     </b></font>Count<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;

     </font>BestHueFound<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
     </font>ColourWithBestHue<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;

     </font>HueValue<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;

     </font><font color="#FF0000"><b>Repeat
           </b></font>GetPalette<font color="#000080">(</font>Count<font color="#000080">,</font>RedTotal<font color="#000080">,</font>GreenTotal<font color="#000080">,</font>BlueTotal<font color="#000080">);
           </font>HueValue<font color="#000080">:=</font>BlueTotal<font color="#000080">+(</font>GreenTotal<font color="#000080">*</font><font color="#800000">16</font><font color="#000080">)+(</font>RedTotal <font color="#000080">* </font><font color="#800000">256</font><font color="#000080">);
           </font><font color="#FF0000"><b>If </b></font>HueValue <font color="#000080">&gt; </font>BestHueFound <font color="#FF0000"><b>Then
              Begin
              </b></font>BestHueFound<font color="#000080">:=</font>HueValue<font color="#000080">;
              </font>ColourWithBestHue<font color="#000080">:=</font>Count<font color="#000080">;
           </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
           </font>Inc<font color="#000080">(</font>Count<font color="#000080">);
     </font><font color="#FF0000"><b>Until </b></font>Count<font color="#000080">=</font><font color="#800000">0</font><font color="#000080">;

     </font>GetBrightestColour<font color="#000080">:=</font>ColourWithBestHue<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;









</font><font color="#FF0000"><b>Procedure </b></font>Sort<font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>N1<font color="#000080">, </font>N2<font color="#000080">: </font>word<font color="#000080">);
</font><font color="#FF0000"><b>Var </b></font>Temp<font color="#000080">: </font>word<font color="#000080">;
</font><font color="#FF0000"><b>Begin
     If </b></font>N1 <font color="#000080">&gt; </font>N2  <font color="#FF0000"><b>Then
        Begin
        </b></font>Temp<font color="#000080">:=</font>N1<font color="#000080">;
        </font>N1<font color="#000080">:=</font>N2<font color="#000080">;
        </font>N2<font color="#000080">:=</font>Temp<font color="#000080">;
     </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;







</font><font color="#FF0000"><b>Procedure </b></font>GetTheShape<font color="#000080">;
</font><font color="#FF0000"><b>Var </b></font>ShapeName<font color="#000080">: </font>PathStr<font color="#000080">;
    </font>Palette<font color="#000080">: </font>PaletteType<font color="#000080">;
    </font>OldBarX<font color="#000080">,
    </font>OldBarY<font color="#000080">: </font>word<font color="#000080">;
    </font>TheShapePointer<font color="#000080">: </font>pointer<font color="#000080">;
    </font>MemRequired<font color="#000080">: </font>word<font color="#000080">;
    </font>Key<font color="#000080">: </font>char<font color="#000080">;

</font><font color="#FF0000"><b>Begin
     </b></font>OldBarX<font color="#000080">:=</font>FirstBarX<font color="#000080">;
     </font>OldBarY<font color="#000080">:=</font>FirstBarY<font color="#000080">;

     </font><font color="#008000"><i>{
     O.K. As the graphics unit I've written only takes X and Y
     coordinates that are ordered (i.e. define a rectangular
     area) I've got to make sure than X1 is less than X2 and
     Y1 is less than Y2.
     }


     </i></font>Sort<font color="#000080">(</font>FirstBarX<font color="#000080">,</font>SecondBarX<font color="#000080">);
     </font>Sort<font color="#000080">(</font>FirstBarY<font color="#000080">,</font>SecondBarY<font color="#000080">);


     </font><font color="#FF0000"><b>If </b></font><font color="#000080">(</font>FirstBarX <font color="#000080">&lt; </font>SecondBarX<font color="#000080">) </font><font color="#FF0000"><b>And </b></font><font color="#000080">(</font>FirstBarY <font color="#000080">&lt; </font>SecondBarY<font color="#000080">) </font><font color="#FF0000"><b>Then
        Begin

        </b></font>GetAllPalette<font color="#000080">(</font>Palette<font color="#000080">);

        </font>MemRequired<font color="#000080">:= </font>ExtShapeSize<font color="#000080">((</font>SecondBarX<font color="#000080">-</font>FirstBarX<font color="#000080">),
                      (</font>SecondBarY<font color="#000080">-</font>FirstBarY<font color="#000080">));

        </font>GetMem<font color="#000080">(</font>TheShapePointer<font color="#000080">,</font>MemRequired<font color="#000080">);
        </font>GetAShape<font color="#000080">(</font>FirstBarX<font color="#000080">,</font>FirstBarY<font color="#000080">,</font>SecondBarX<font color="#000080">,</font>SecondBarY<font color="#000080">,</font>TheShapePointer<font color="#000080">^);

        </font>SetSourceBitmapAddr<font color="#000080">(</font><font color="#800000">$a000</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
        </font>Cls<font color="#000080">;

        </font>Block<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>TheShapePointer<font color="#000080">^);

        </font>BarColour<font color="#000080">:=</font>GetBrightestColour<font color="#000080">;
        </font>SetColour<font color="#000080">(</font>BarColour<font color="#000080">);
        </font>OutTextXY<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">192</font><font color="#000080">,</font><font color="#800000">'SAVE THIS IMAGE (Y/N) :'</font><font color="#000080">);

        </font><font color="#FF0000"><b>Repeat
              </b></font>key<font color="#000080">:=</font>upcase<font color="#000080">(</font>readkey<font color="#000080">);
        </font><font color="#FF0000"><b>Until </b></font><font color="#000080">(</font>key<font color="#000080">= </font><font color="#800000">'Y'</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>key <font color="#000080">= </font><font color="#800000">'N'</font><font color="#000080">);

        </font><font color="#FF0000"><b>If </b></font>key <font color="#000080">= </font><font color="#800000">'Y' </font><font color="#FF0000"><b>Then
           Begin
           Asm
           </b></font><font color="#FF00FF">MOV AX,2
           INT $10
           </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

           </font>Write<font color="#000080">(</font><font color="#800000">'Save Shape as :'</font><font color="#000080">);
           </font>Readln<font color="#000080">(</font>ShapeName<font color="#000080">);

           </font><font color="#008000"><i>{$i-}
           </i></font>SaveShape<font color="#000080">(</font>ShapeName<font color="#000080">,</font>TheShapePointer<font color="#000080">);
           </font><font color="#008000"><i>{$i+}
        </i></font><font color="#FF0000"><b>End</b></font><font color="#000080">;

        </font>FreeShape<font color="#000080">(</font>TheShapePointer<font color="#000080">);

        </font>InitVGAMode<font color="#000080">;
        </font>SetAllPalette<font color="#000080">(</font>ThePalette<font color="#000080">);
        </font>ShowBitmap<font color="#000080">(</font>BufferSeg<font color="#000080">,</font>BufferOffset<font color="#000080">);

        </font>FirstBarX<font color="#000080">:=</font>OldBarX<font color="#000080">;
        </font>FirstBarY<font color="#000080">:=</font>OldBarY<font color="#000080">;

     </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;








</font><font color="#008000"><i>{
I'm not too keen on this proc.. reckon I will change it later
when my Bsc is over.
}




</i></font><font color="#FF0000"><b>Procedure </b></font>UpdateBars<font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>HorizontalBar<font color="#000080">, </font>VerticalBar<font color="#000080">: </font>word<font color="#000080">);
</font><font color="#FF0000"><b>Begin
     If </b></font>Keydown<font color="#000080">[</font><font color="#800000">72</font><font color="#000080">] </font><font color="#FF0000"><b>And </b></font><font color="#000080">(</font>VerticalBar <font color="#000080">&gt;</font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>Then
        </b></font>Dec<font color="#000080">(</font>VerticalBar<font color="#000080">);
     </font><font color="#FF0000"><b>If </b></font>Keydown<font color="#000080">[</font><font color="#800000">80</font><font color="#000080">] </font><font color="#FF0000"><b>And </b></font><font color="#000080">(</font>VerticalBar <font color="#000080">&lt;</font><font color="#800000">200</font><font color="#000080">) </font><font color="#FF0000"><b>Then
        </b></font>Inc<font color="#000080">(</font>VerticalBar<font color="#000080">);
     </font><font color="#FF0000"><b>If </b></font>Keydown<font color="#000080">[</font><font color="#800000">75</font><font color="#000080">] </font><font color="#FF0000"><b>And </b></font><font color="#000080">(</font>HorizontalBar <font color="#000080">&gt;=</font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>Then
        </b></font>Dec<font color="#000080">(</font>HorizontalBar<font color="#000080">);
     </font><font color="#FF0000"><b>If </b></font>Keydown<font color="#000080">[</font><font color="#800000">77</font><font color="#000080">] </font><font color="#FF0000"><b>And </b></font><font color="#000080">(</font>HorizontalBar <font color="#000080">&lt;</font><font color="#800000">320</font><font color="#000080">) </font><font color="#FF0000"><b>Then
        </b></font>Inc<font color="#000080">(</font>HorizontalBar<font color="#000080">);
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;










</font><font color="#FF0000"><b>Procedure </b></font>GrabShape<font color="#000080">;
</font><font color="#FF0000"><b>Var
    </b></font>Dist<font color="#000080">: </font>integer<font color="#000080">;
    </font>TempString<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">4</font><font color="#000080">];

</font><font color="#FF0000"><b>Begin
     </b></font>BarColour<font color="#000080">:=</font>GetBrightestColour<font color="#000080">;
     </font>HookKeyboardInt<font color="#000080">;

     </font><font color="#FF0000"><b>Repeat
           </b></font>ShowBitmap<font color="#000080">(</font>BufferSeg<font color="#000080">,</font>BufferOffset<font color="#000080">);
           </font>SetSourceBitmapAddr<font color="#000080">(</font><font color="#800000">$a000</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);

           </font>SetColour<font color="#000080">(</font>BarColour<font color="#000080">);

           </font>Line<font color="#000080">(</font>FirstBarX<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>FirstBarX<font color="#000080">,</font><font color="#800000">199</font><font color="#000080">);
           </font>Line<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font>FirstBarY<font color="#000080">,</font><font color="#800000">319</font><font color="#000080">,</font>FirstBarY<font color="#000080">);

           </font><font color="#FF0000"><b>If </b></font>Grabbing <font color="#FF0000"><b>Then
              Begin
              </b></font>Line<font color="#000080">(</font>SecondBarX<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>SecondBarX<font color="#000080">,</font><font color="#800000">199</font><font color="#000080">);
              </font>Line<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font>SecondBarY<font color="#000080">,</font><font color="#800000">319</font><font color="#000080">,</font>SecondBarY<font color="#000080">);

              </font><font color="#FF0000"><b>If </b></font>SecondBarX <font color="#000080">&gt; </font>FirstBarX <font color="#FF0000"><b>Then
                 </b></font>Dist<font color="#000080">:=(</font>SecondBarX <font color="#000080">- </font>FirstBarX<font color="#000080">)+</font><font color="#800000">1
              </font><font color="#FF0000"><b>Else
                  </b></font>Dist<font color="#000080">:=(</font>FirstBarX <font color="#000080">- </font>SecondBarX<font color="#000080">)+</font><font color="#800000">1</font><font color="#000080">;

              </font>Str<font color="#000080">(</font>Dist<font color="#000080">,</font>TempString<font color="#000080">);
              </font>OutTextXY<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">190</font><font color="#000080">,</font><font color="#800000">'WIDTH: '</font><font color="#000080">+</font>TempString<font color="#000080">);

              </font><font color="#FF0000"><b>If </b></font>SecondBarY <font color="#000080">&gt; </font>FirstBarY <font color="#FF0000"><b>Then
                 </b></font>Dist<font color="#000080">:=(</font>SecondBarY <font color="#000080">- </font>FirstBarY<font color="#000080">)+</font><font color="#800000">1
              </font><font color="#FF0000"><b>Else
                  </b></font>Dist<font color="#000080">:=(</font>FirstBarY <font color="#000080">- </font>SecondBarY<font color="#000080">)+</font><font color="#800000">1</font><font color="#000080">;

              </font>Str<font color="#000080">(</font>Dist<font color="#000080">,</font>TempString<font color="#000080">);
              </font>OutTextXY<font color="#000080">(</font><font color="#800000">160</font><font color="#000080">,</font><font color="#800000">190</font><font color="#000080">,</font><font color="#800000">'HEIGHT:'</font><font color="#000080">+</font>TempString<font color="#000080">);

              </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

           </font><font color="#008000"><i>{ Memw[$40:$1a]:=Memw[$40:$1c]; }

           </i></font><font color="#FF0000"><b>If Not </b></font>Grabbing <font color="#FF0000"><b>Then
              Begin
              </b></font>UpdateBars<font color="#000080">(</font>FirstBarX<font color="#000080">, </font>FirstBarY<font color="#000080">);
              </font><font color="#FF0000"><b>If </b></font>Keydown<font color="#000080">[</font><font color="#800000">57</font><font color="#000080">] </font><font color="#FF0000"><b>Then Begin
                  </b></font>Sound<font color="#000080">(</font><font color="#800000">50</font><font color="#000080">);
                  </font>Delay<font color="#000080">(</font><font color="#800000">100</font><font color="#000080">);
                  </font>NoSound<font color="#000080">;
                  </font>Grabbing<font color="#000080">:=</font>True<font color="#000080">;
                  </font>SecondBarX<font color="#000080">:=</font>FirstBarX<font color="#000080">+</font><font color="#800000">15</font><font color="#000080">;
                  </font>SecondBarY<font color="#000080">:=</font>FirstBarY<font color="#000080">+</font><font color="#800000">15</font><font color="#000080">;
              </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
              </font><font color="#FF0000"><b>End
           Else
               Begin
               </b></font>UpdateBars<font color="#000080">(</font>SecondBarX<font color="#000080">, </font>SecondBarY<font color="#000080">);

               </font><font color="#FF0000"><b>If </b></font>Keydown<font color="#000080">[</font><font color="#800000">57</font><font color="#000080">] </font><font color="#FF0000"><b>Then
                  Begin
                  </b></font>UnHookKeyBoardInt<font color="#000080">;
                  </font>SetSourceBitmapAddr<font color="#000080">(</font>BufferSeg<font color="#000080">,</font>BufferOffset<font color="#000080">);
                  </font>GetTheShape<font color="#000080">;
                  </font>Grabbing<font color="#000080">:=</font>False<font color="#000080">;
                  </font>HookKeyBoardInt<font color="#000080">;
                  </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
               </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

           </font><font color="#008000"><i>{ Make sure that bars flicker }

           </i></font><font color="#FF0000"><b>Until </b></font>KeyDown<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">];
     </font>UnHookKeyboardInt<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;















</font><font color="#008000"><i>{
What this does is allocate memory for the PCX (Assuming 64000
bytes are free for it) then loads the PCX into RAM, where it
can be read (but not altered) by this program.
}

</i></font><font color="#FF0000"><b>Procedure </b></font>LoadPCXIntoBuffer<font color="#000080">(</font>ThePCXFileName<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">);
</font><font color="#FF0000"><b>Begin
     If </b></font>MaxAvail <font color="#000080">&gt; </font><font color="#800000">64000 </font><font color="#FF0000"><b>Then
        Begin
        </b></font>Bitmap<font color="#000080">(</font>BufferSeg<font color="#000080">,</font>BufferOffset<font color="#000080">);
        </font>SetSourceBitmapAddr<font color="#000080">(</font>BufferSeg<font color="#000080">,</font>BufferOffset<font color="#000080">);
        </font>InitVGAMode<font color="#000080">;

        </font>LoadPCX<font color="#000080">(</font>ThePCXFileName<font color="#000080">,</font>ThePalette<font color="#000080">);
        </font>SetAllPalette<font color="#000080">(</font>ThePalette<font color="#000080">);
        </font>SetSourceBitmapAddr<font color="#000080">(</font><font color="#800000">$a000</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
        </font>CopySourceBitmap<font color="#000080">;
        </font><font color="#FF0000"><b>End
     Else
         Begin
         </b></font>Writeln<font color="#000080">;
         </font>Writeln<font color="#000080">(</font><font color="#800000">'Out of memory error. The program needed 64K for the'</font><font color="#000080">);
         </font>Writeln<font color="#000080">(</font><font color="#800000">'PCX buffer but only '</font><font color="#000080">,</font>maxavail <font color="#FF0000"><b>div </b></font><font color="#800000">1024</font><font color="#000080">,</font><font color="#800000">'K was'</font><font color="#000080">);
         </font>Writeln<font color="#000080">(</font><font color="#800000">'available.'</font><font color="#000080">);
         </font>Writeln<font color="#000080">;
         </font>Halt<font color="#000080">;
         </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>End</b></font><font color="#000080">;






</font><font color="#FF0000"><b>Procedure </b></font>FreeBuffer<font color="#000080">;
</font><font color="#FF0000"><b>Begin
     </b></font>FreeBitmap<font color="#000080">(</font>BufferSeg<font color="#000080">,</font>BufferOffset<font color="#000080">);
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;










</font><font color="#008000"><i>{
Ask for the name of PCX to load.
}


</i></font><font color="#FF0000"><b>Procedure </b></font>RequestPCXFile<font color="#000080">;
</font><font color="#FF0000"><b>Var </b></font>PCXName<font color="#000080">: </font>PathStr<font color="#000080">;
    </font>DummyFileVar<font color="#000080">: </font><font color="#FF0000"><b>File</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Begin
     </b></font>Writeln<font color="#000080">;
     </font>Writeln<font color="#000080">(</font><font color="#800000">'Enter name of Mode 13h 256 colour PCX file to load :'</font><font color="#000080">);
     </font>Readln<font color="#000080">(</font>PCXName<font color="#000080">);
     </font>Assign<font color="#000080">(</font>DummyFileVar<font color="#000080">,</font>PCXName<font color="#000080">);
     </font><font color="#008000"><i>{$i-}
     </i></font>Reset<font color="#000080">(</font>DummyFileVar<font color="#000080">);
     </font><font color="#008000"><i>{$i+}

     </i></font><font color="#FF0000"><b>If </b></font>IoResult <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>Then
        </b></font>LoadPCXIntoBuffer<font color="#000080">(</font>PCXName<font color="#000080">)
     </font><font color="#FF0000"><b>Else
         Begin
         </b></font>Writeln<font color="#000080">;
         </font>Writeln<font color="#000080">(</font><font color="#800000">'Error in loading your .PCX file!'</font><font color="#000080">);
         </font>Writeln<font color="#000080">(</font><font color="#800000">'The filename (and/or path) specified does not exist.'</font><font color="#000080">);
         </font>Halt<font color="#000080">;
     </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;









</font><font color="#008000"><i>{
Main()
}

</i></font><font color="#FF0000"><b>Begin
     </b></font>Writeln<font color="#000080">;
     </font>Writeln<font color="#000080">(</font><font color="#800000">'PCX Shape grabber  (C) 1995 Scott Tunstall.'</font><font color="#000080">);
     </font>Writeln<font color="#000080">;
     </font>Writeln<font color="#000080">(</font><font color="#800000">'Written especially for :'</font><font color="#000080">);
     </font>Writeln<font color="#000080">(</font><font color="#800000">'   Scott &quot;B &amp; Q&quot; Ramsay'</font><font color="#000080">);
     </font>Writeln<font color="#000080">(</font><font color="#800000">'   Paul Langa'</font><font color="#000080">);
     </font>Writeln<font color="#000080">;

     </font><font color="#FF0000"><b>If </b></font>ParamCount <font color="#000080">&lt;&gt;</font><font color="#800000">1 </font><font color="#FF0000"><b>Then
        </b></font>RequestPCXFile
     <font color="#FF0000"><b>Else
         </b></font>LoadPCXIntoBuffer<font color="#000080">(</font>Paramstr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">));

     </font>Grabbing<font color="#000080">:=</font>False<font color="#000080">;
     </font>FirstBarX<font color="#000080">:=</font><font color="#800000">160</font><font color="#000080">;
     </font>FirstBarY<font color="#000080">:=</font><font color="#800000">100</font><font color="#000080">;
     </font>SecondBarX<font color="#000080">:=</font><font color="#800000">160</font><font color="#000080">;
     </font>SecondBarY<font color="#000080">:=</font><font color="#800000">100</font><font color="#000080">;

     </font>GrabShape<font color="#000080">;
     </font>FreeBuffer<font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">.



</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0213.PAS">Original</a><b>]</b></p></body>
</html>
