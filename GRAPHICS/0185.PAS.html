<html>
<head><title> "Vector Math & Routines" by CLIVE MOSES</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0185.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#FF0000"><b>FUNCTION </b></font>sign <font color="#000080">(</font>r <font color="#000080">: </font>real<font color="#000080">) : </font>integer<font color="#000080">;
</font><font color="#008000"><i>{ Returns 1 if r&gt;0, 0 if r=0 or -1 if r&lt;0 }
</i></font><font color="#FF0000"><b>BEGIN
  IF </b></font>r <font color="#000080">&gt; </font>epsilon
  <font color="#FF0000"><b>THEN
     </b></font>sign <font color="#000080">:= </font><font color="#800000">1
  </font><font color="#FF0000"><b>ELSE
     IF </b></font>r <font color="#000080">&lt; -</font>epsilon
     <font color="#FF0000"><b>THEN
        </b></font>sign <font color="#000080">:= -</font><font color="#800000">1
     </font><font color="#FF0000"><b>ELSE
        </b></font>sign <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>FUNCTION </b></font>orient <font color="#000080">(</font>p1<font color="#000080">, </font>p2<font color="#000080">, </font>p3 <font color="#000080">: </font>vector2<font color="#000080">) : </font>integer<font color="#000080">;
</font><font color="#008000"><i>{ Returns the orientation of the polygon with consecutive vertices
  p1, p2 and p3. -1 -&gt; Clockwise orientation
                 +1 -&gt; Anticlockwise orientation
                  0 -&gt; Degenerate, i.e. Line or Point }
</i></font><font color="#FF0000"><b>VAR </b></font>d1<font color="#000080">, </font>d2 <font color="#000080">: </font>vector2<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>d1<font color="#000080">.</font>x <font color="#000080">:= </font>p2<font color="#000080">.</font>x <font color="#000080">- </font>p1<font color="#000080">.</font>x<font color="#000080">; </font>d1<font color="#000080">.</font>y <font color="#000080">:= </font>p2<font color="#000080">.</font>y <font color="#000080">-</font>p1<font color="#000080">.</font>y<font color="#000080">;
  </font>d2<font color="#000080">.</font>x <font color="#000080">:= </font>p3<font color="#000080">.</font>x <font color="#000080">- </font>p2<font color="#000080">.</font>x<font color="#000080">; </font>d2<font color="#000080">.</font>y <font color="#000080">:= </font>p3<font color="#000080">.</font>y <font color="#000080">-</font>p2<font color="#000080">.</font>y<font color="#000080">;
  </font>orient <font color="#000080">:= </font>sign<font color="#000080">(</font>d1<font color="#000080">.</font>x<font color="#000080">*</font>d2<font color="#000080">.</font>y <font color="#000080">- </font>d1<font color="#000080">.</font>y<font color="#000080">*</font>d2<font color="#000080">.</font>x<font color="#000080">);
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#008000"><i>{
You can use this routine to determine if the vertices of a
two-dimensional polygon are oriented clockwise or
anti-clockwise. If the orientation is wrong you can invert
the order of the points, and there you go ...

The corresponding routine for 3-D is as follows ...
}

</i></font><font color="#FF0000"><b>PROCEDURE </b></font>vectorproduct <font color="#000080">(</font>p<font color="#000080">,</font>q <font color="#000080">: </font>vector3<font color="#000080">; </font><font color="#FF0000"><b>VAR </b></font>v <font color="#000080">: </font>vector3<font color="#000080">);
</font><font color="#008000"><i>{ Calculates the vector (cross) product of two vectors p and q }
</i></font><font color="#FF0000"><b>BEGIN
   </b></font>v<font color="#000080">.</font>x <font color="#000080">:= </font>p<font color="#000080">.</font>y<font color="#000080">*</font>q<font color="#000080">.</font>z <font color="#000080">- </font>p<font color="#000080">.</font>z<font color="#000080">*</font>q<font color="#000080">.</font>y<font color="#000080">;
   </font>v<font color="#000080">.</font>y <font color="#000080">:= </font>p<font color="#000080">.</font>z<font color="#000080">*</font>q<font color="#000080">.</font>x <font color="#000080">- </font>p<font color="#000080">.</font>x<font color="#000080">*</font>q<font color="#000080">.</font>z<font color="#000080">;
   </font>v<font color="#000080">.</font>z <font color="#000080">:= </font>p<font color="#000080">.</font>x<font color="#000080">*</font>q<font color="#000080">.</font>y <font color="#000080">- </font>p<font color="#000080">.</font>y<font color="#000080">*</font>q<font color="#000080">.</font>x<font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>FUNCTION </b></font>dot3 <font color="#000080">(</font>v1<font color="#000080">, </font>v2 <font color="#000080">: </font>vector3<font color="#000080">) : </font>REAL<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
   </b></font>dot3 <font color="#000080">:= </font>v1<font color="#000080">.</font>x<font color="#000080">*</font>v2<font color="#000080">.</font>x <font color="#000080">+ </font>v1<font color="#000080">.</font>y<font color="#000080">*</font>v2<font color="#000080">.</font>y <font color="#000080">+ </font>v1<font color="#000080">.</font>z<font color="#000080">*</font>v2<font color="#000080">.</font>z<font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>FUNCTION </b></font>orient3 <font color="#000080">(</font>p1<font color="#000080">, </font>p2<font color="#000080">, </font>p3<font color="#000080">, </font>e <font color="#000080">: </font>vector3<font color="#000080">) : </font>integer<font color="#000080">;
</font><font color="#008000"><i>{ Returns the orientation of the polygon with consecutive vertices
  p1, p2 and p3, as viewed from position 'e'
      -1 : Clockwise
      +1 : Anti-clockwise
       0 : Degenerate - Line or Point }
</i></font><font color="#FF0000"><b>VAR </b></font>d1<font color="#000080">, </font>d2<font color="#000080">, </font>d1xd2<font color="#000080">, </font>v <font color="#000080">: </font>vector3<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
   </b></font>d1<font color="#000080">.</font>x <font color="#000080">:= </font>p2<font color="#000080">.</font>x <font color="#000080">- </font>p1<font color="#000080">.</font>x<font color="#000080">; </font>d1<font color="#000080">.</font>y <font color="#000080">:= </font>p2<font color="#000080">.</font>y <font color="#000080">- </font>p1<font color="#000080">.</font>y<font color="#000080">; </font>d1<font color="#000080">.</font>z <font color="#000080">:= </font>p2<font color="#000080">.</font>z <font color="#000080">- </font>p1<font color="#000080">.</font>z<font color="#000080">;
   </font>d2<font color="#000080">.</font>x <font color="#000080">:= </font>p3<font color="#000080">.</font>x <font color="#000080">- </font>p2<font color="#000080">.</font>x<font color="#000080">; </font>d2<font color="#000080">.</font>y <font color="#000080">:= </font>p3<font color="#000080">.</font>y <font color="#000080">- </font>p2<font color="#000080">.</font>y<font color="#000080">; </font>d2<font color="#000080">.</font>z <font color="#000080">:= </font>p3<font color="#000080">.</font>z <font color="#000080">- </font>p2<font color="#000080">.</font>z<font color="#000080">;
   </font>vectorproduct <font color="#000080">(</font>d1<font color="#000080">, </font>d2<font color="#000080">, </font>d1xd2<font color="#000080">);
   </font>v<font color="#000080">.</font>x <font color="#000080">:= </font>e<font color="#000080">.</font>x <font color="#000080">- </font>p1<font color="#000080">.</font>x<font color="#000080">; </font>v<font color="#000080">.</font>y <font color="#000080">:= </font>e<font color="#000080">.</font>y <font color="#000080">- </font>p1<font color="#000080">.</font>y<font color="#000080">; </font>v<font color="#000080">.</font>z <font color="#000080">:= </font>e<font color="#000080">.</font>z <font color="#000080">- </font>p1<font color="#000080">.</font>z<font color="#000080">;
   </font>orient3 <font color="#000080">:= </font>sign<font color="#000080">(</font>dot3<font color="#000080">(</font>d1xd2<font color="#000080">, </font>v<font color="#000080">));
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#008000"><i>{ You will probably need the following definitions as well :- }

</i></font><font color="#FF0000"><b>TYPE </b></font>vector2 <font color="#000080">= </font><font color="#FF0000"><b>RECORD
        </b></font>x<font color="#000080">, </font>y <font color="#000080">: </font>real<font color="#000080">;
     </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

     </font>vector3 <font color="#000080">= </font><font color="#FF0000"><b>RECORD
        </b></font>x<font color="#000080">, </font>y<font color="#000080">, </font>z <font color="#000080">: </font>real<font color="#000080">;
     </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>CONST </b></font>epsilon <font color="#000080">= </font><font color="#800000">0.00001</font><font color="#000080">;

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0185.PAS">Original</a><b>]</b></p></body>
</html>
