<html>
<head><title> "Scrolling Images" by JENS LARSSON</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0125.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
Michael, you wondered how you could scroll an image (320*200) over the
screen. And yes, as you probably have figured out, the most reliable
solution to that is mode-x (or tweaked mode or whatever...).
Here's an example program:

---------------------------------------------------------&gt;8-------------------
{

 Mode-x scrolling, by Jens Larsson 2:201/2120.3, Sweden, PD.
 ( btw, hope you know some assembly... &lt;g&gt; )

}
{$G+}
</i></font><font color="#FF0000"><b>Uses </b></font>Crt<font color="#000080">;

   </font><font color="#FF0000"><b>Var </b></font>i<font color="#000080">, </font>ScrBase <font color="#000080">: </font>Word<font color="#000080">;

    </font><font color="#FF0000"><b>Procedure </b></font>PutPix<font color="#000080">(</font>x<font color="#000080">, </font>y <font color="#000080">: </font>Word<font color="#000080">; </font>Color <font color="#000080">: </font>Byte<font color="#000080">); </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>Asm
        </b></font><font color="#FF00FF">mov     ax,0a000h
        mov     es,ax
        mov     bx,x
        mov     dx,3c4h
        mov     ax,0102h
        mov     cl,bl
        and     cl,3
        shl     ah,cl
        out     dx,ax
        mov     ax,y
        shl     ax,4
        mov     di,ax
        shl     ax,2
        add     di,ax
        shr     bx,2
        add     di,bx
        add     di,ScrBase
        mov     al,Color
        mov     es:[di],al
      </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

    </font><font color="#FF0000"><b>Procedure </b></font>ScrPan<font color="#000080">(</font>ScrOfs <font color="#000080">: </font>Word<font color="#000080">); </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>Asm
        </b></font><font color="#FF00FF">mov     bx,ScrOfs
        mov     dx,3d4h
        mov     ah,bh
        mov     al,0ch
        out     dx,ax
        mov     ah,bl
        inc     al
        out     dx,ax
      </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

    </font><font color="#FF0000"><b>Procedure </b></font>SetModeX<font color="#000080">; </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>Asm
        </b></font><font color="#FF00FF">mov     ax,0012h
        int     10h
        mov     ax,0013h
        int     10h
        mov     dx,3c4h
        mov     ax,0604h
        out     dx,ax
        mov     dx,3d4h
        mov     ax,0014h
        out     dx,ax
        mov     ax,0e317h
        out     dx,ax
      </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

    </font><font color="#FF0000"><b>Procedure </b></font>Synk<font color="#000080">; </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>Asm
        </b></font><font color="#FF00FF">mov     dx,3dah
@L1:
        in      al,dx
        test    al,08h
        jne     @L1
@L2:
        in      al,dx
        test    al,08h
        je      @L2
      </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

       </font><font color="#FF0000"><b>Begin
         </b></font>Randomize<font color="#000080">;
         </font>SetModeX<font color="#000080">;
         </font>ScrBase <font color="#000080">:= </font><font color="#800000">200</font><font color="#000080">*</font><font color="#800000">80</font><font color="#000080">;
         </font><font color="#FF0000"><b>For </b></font>i <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">9999 </font><font color="#FF0000"><b>do </b></font>PutPix<font color="#000080">(</font>Random<font color="#000080">(</font><font color="#800000">320</font><font color="#000080">),</font>Random<font color="#000080">(</font><font color="#800000">200</font><font color="#000080">),</font>Random<font color="#000080">(</font><font color="#800000">256</font><font color="#000080">));
         </font><font color="#FF0000"><b>For </b></font>i <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">200 </font><font color="#FF0000"><b>do Begin
           </b></font>ScrPan<font color="#000080">(</font>i<font color="#000080">*</font><font color="#800000">80</font><font color="#000080">);
           </font>Synk<font color="#000080">;
          </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
         </font>ReadKey<font color="#000080">;
         </font><font color="#FF0000"><b>Asm</b></font><font color="#FF00FF">; mov ax,0003h; int 10h; </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
       </font><font color="#FF0000"><b>End</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0125.PAS">Original</a><b>]</b></p></body>
</html>
