<html>
<head><title> "Integer Math Starfield" by JACK MOTT</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0238.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{ MAKE SURE TO SET THE BGI PATH BELOW !! }
{ Integer Math Starfield }
{ Jack Mott - (C) 1996 }
{ free to use for noncommercial purposes }
{ Give credit where credit is due }
{ Contact: thecrow@iconn.net }
</i></font><font color="#FF0000"><b>PROGRAM </b></font>StarFieldCoolness<font color="#000080">;

</font><font color="#FF0000"><b>USES
 </b></font>crt<font color="#000080">,</font>graph<font color="#000080">;
</font><font color="#FF0000"><b>CONST
 </b></font>MAX <font color="#000080">= </font><font color="#800000">250</font><font color="#000080">;
</font><font color="#FF0000"><b>VAR
  </b></font>xv <font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font>MAX<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>integer<font color="#000080">;
  </font>yv <font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font>MAX<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>integer<font color="#000080">;
  </font>x<font color="#000080">,</font>y<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font>MAX<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>integer<font color="#000080">;
  </font>x2<font color="#000080">,</font>y2<font color="#000080">:</font>longint<font color="#000080">;
  </font>xyS<font color="#000080">:</font>longint<font color="#000080">;
  </font>c<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font>MAX<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>integer<font color="#000080">;
  </font>i<font color="#000080">,</font>count<font color="#000080">:</font>integer<font color="#000080">;
  </font>speed<font color="#000080">:</font>integer<font color="#000080">;
  </font>k<font color="#000080">:</font>char<font color="#000080">;


</font><font color="#FF0000"><b>PROCEDURE </b></font>Init<font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>grDriver <font color="#000080">: </font>Integer<font color="#000080">;
  </font>grMode   <font color="#000080">: </font>Integer<font color="#000080">;
  </font>ErrCode  <font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>grDriver <font color="#000080">:= </font>Detect<font color="#000080">;
  </font>InitGraph<font color="#000080">(</font>grDriver<font color="#000080">,</font>grMode<font color="#000080">,</font><font color="#800000">'\turbo\tp\'</font><font color="#000080">);
  </font>ErrCode <font color="#000080">:= </font>GraphResult<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>PROCEDURE </b></font>ResetStar<font color="#000080">(</font>star<font color="#000080">:</font>integer<font color="#000080">);
</font><font color="#FF0000"><b>VAR
  </b></font>r<font color="#000080">:</font>integer<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>x<font color="#000080">[</font>star<font color="#000080">] := </font>random<font color="#000080">(</font><font color="#800000">640</font><font color="#000080">)+</font><font color="#800000">1</font><font color="#000080">;
  </font>y<font color="#000080">[</font>star<font color="#000080">] := </font>random<font color="#000080">(</font><font color="#800000">480</font><font color="#000080">)+</font><font color="#800000">1</font><font color="#000080">;
  </font>x<font color="#000080">[</font>star<font color="#000080">] := </font>x<font color="#000080">[</font>star<font color="#000080">] - </font><font color="#800000">250</font><font color="#000080">;
  </font>y<font color="#000080">[</font>star<font color="#000080">] := </font>y<font color="#000080">[</font>star<font color="#000080">] - </font><font color="#800000">170</font><font color="#000080">;

</font><font color="#FF0000"><b>if </b></font>speed <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
  begin
  </b></font>xv<font color="#000080">[</font>star<font color="#000080">] := </font>x<font color="#000080">[</font>star<font color="#000080">] </font><font color="#FF0000"><b>div </b></font>speed<font color="#000080">;
  </font>yv<font color="#000080">[</font>star<font color="#000080">] := </font>y<font color="#000080">[</font>star<font color="#000080">] </font><font color="#FF0000"><b>div </b></font>speed<font color="#000080">;
  </font><font color="#FF0000"><b>end
else
  begin
  </b></font>xv<font color="#000080">[</font>star<font color="#000080">] := </font>x<font color="#000080">[</font>star<font color="#000080">];
  </font>yv<font color="#000080">[</font>star<font color="#000080">] := </font>y<font color="#000080">[</font>star<font color="#000080">];
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;



</font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>xv<font color="#000080">[</font>star<font color="#000080">] = </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>yv<font color="#000080">[</font>star<font color="#000080">] = </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
  begin
    </b></font>xv<font color="#000080">[</font>star<font color="#000080">] := </font><font color="#800000">1</font><font color="#000080">;
    </font>yv<font color="#000080">[</font>star<font color="#000080">] := </font><font color="#800000">1</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;




</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>MoveRight<font color="#000080">;
</font><font color="#FF0000"><b>VAR
  </b></font>i<font color="#000080">:</font>integer<font color="#000080">;

</font><font color="#FF0000"><b>BEGIN
  for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>MAX <font color="#FF0000"><b>do </b></font>xv<font color="#000080">[</font>i<font color="#000080">] := </font>xv<font color="#000080">[</font>i<font color="#000080">] - </font><font color="#800000">1</font><font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;
</font><font color="#FF0000"><b>PROCEDURE </b></font>MoveLeft<font color="#000080">;
</font><font color="#FF0000"><b>VAR
  </b></font>i<font color="#000080">:</font>integer<font color="#000080">;

</font><font color="#FF0000"><b>BEGIN
  for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>MAX <font color="#FF0000"><b>do </b></font>xv<font color="#000080">[</font>i<font color="#000080">] := </font>xv<font color="#000080">[</font>i<font color="#000080">] + </font><font color="#800000">1</font><font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>MoveUp<font color="#000080">;
</font><font color="#FF0000"><b>VAR
  </b></font>i<font color="#000080">:</font>integer<font color="#000080">;

</font><font color="#FF0000"><b>BEGIN
  for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>MAX <font color="#FF0000"><b>do </b></font>yv<font color="#000080">[</font>i<font color="#000080">] := </font>yv<font color="#000080">[</font>i<font color="#000080">] + </font><font color="#800000">1</font><font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>MoveDown<font color="#000080">;
</font><font color="#FF0000"><b>VAR
  </b></font>i<font color="#000080">:</font>integer<font color="#000080">;

</font><font color="#FF0000"><b>BEGIN
  for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>MAX <font color="#FF0000"><b>do </b></font>yv<font color="#000080">[</font>i<font color="#000080">] := </font>yv<font color="#000080">[</font>i<font color="#000080">] - </font><font color="#800000">1</font><font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>MoveUpLeft<font color="#000080">;
</font><font color="#FF0000"><b>VAR
  </b></font>i<font color="#000080">:</font>integer<font color="#000080">;

</font><font color="#FF0000"><b>BEGIN
  for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>MAX <font color="#FF0000"><b>do
    begin
      </b></font>yv<font color="#000080">[</font>i<font color="#000080">] := </font>yv<font color="#000080">[</font>i<font color="#000080">] + </font><font color="#800000">1</font><font color="#000080">;
      </font>xv<font color="#000080">[</font>i<font color="#000080">] := </font>xv<font color="#000080">[</font>i<font color="#000080">] + </font><font color="#800000">1</font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>MoveUpRight<font color="#000080">;
</font><font color="#FF0000"><b>VAR
  </b></font>i<font color="#000080">:</font>integer<font color="#000080">;

</font><font color="#FF0000"><b>BEGIN
  for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>MAX <font color="#FF0000"><b>do
    begin
      </b></font>yv<font color="#000080">[</font>i<font color="#000080">] := </font>yv<font color="#000080">[</font>i<font color="#000080">] + </font><font color="#800000">1</font><font color="#000080">;
      </font>xv<font color="#000080">[</font>i<font color="#000080">] := </font>xv<font color="#000080">[</font>i<font color="#000080">] - </font><font color="#800000">1</font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>MoveDownRight<font color="#000080">;
</font><font color="#FF0000"><b>VAR
  </b></font>i<font color="#000080">:</font>integer<font color="#000080">;

</font><font color="#FF0000"><b>BEGIN
  for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>MAX <font color="#FF0000"><b>do
    begin
      </b></font>yv<font color="#000080">[</font>i<font color="#000080">] := </font>yv<font color="#000080">[</font>i<font color="#000080">] - </font><font color="#800000">1</font><font color="#000080">;
      </font>xv<font color="#000080">[</font>i<font color="#000080">] := </font>xv<font color="#000080">[</font>i<font color="#000080">] -</font><font color="#800000">1</font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>MoveDownLeft<font color="#000080">;
</font><font color="#FF0000"><b>VAR
  </b></font>i<font color="#000080">:</font>integer<font color="#000080">;

</font><font color="#FF0000"><b>BEGIN
  for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>MAX <font color="#FF0000"><b>do
    begin
      </b></font>yv<font color="#000080">[</font>i<font color="#000080">] := </font>yv<font color="#000080">[</font>i<font color="#000080">] - </font><font color="#800000">1</font><font color="#000080">;
      </font>xv<font color="#000080">[</font>i<font color="#000080">] := </font>xv<font color="#000080">[</font>i<font color="#000080">] +</font><font color="#800000">1</font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;




</font><font color="#FF0000"><b>BEGIN

</b></font>Init<font color="#000080">;
</font>randomize<font color="#000080">;
</font>speed <font color="#000080">:= </font><font color="#800000">15</font><font color="#000080">;
</font><font color="#FF0000"><b>FOR </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>TO </b></font>MAX <font color="#FF0000"><b>DO </b></font>ResetStar<font color="#000080">(</font>i<font color="#000080">);
</font>count <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
</font><font color="#FF0000"><b>REPEAT
</b></font>inc<font color="#000080">(</font>count<font color="#000080">);

</font><font color="#FF0000"><b>FOR </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>TO </b></font>MAX <font color="#FF0000"><b>DO
  BEGIN

    </b></font><font color="#008000"><i>{Optional, makes stars move faster as they get closer}
    { Havent gotten this to look very good yet }
{
    if count mod 15 = 0 then
      begin
        if xv[i] &gt; 0 then xv[i] := xv[i] + 1
        else if xv[i] &lt; 0 then xv[i] := xv[i] - 1;

        if yv[i] &gt; 0 then yv[i] := yv[i] + 1
        else if yv[i] &lt; 0 then yv[i] := yv[i] - 1;
      end;
 }
    </i></font>x<font color="#000080">[</font>i<font color="#000080">] := </font>x<font color="#000080">[</font>i<font color="#000080">] + </font>xv<font color="#000080">[</font>i<font color="#000080">];
    </font>y<font color="#000080">[</font>i<font color="#000080">] := </font>y<font color="#000080">[</font>i<font color="#000080">] + </font>yv<font color="#000080">[</font>i<font color="#000080">];
    </font><font color="#FF0000"><b>IF </b></font><font color="#000080">(</font>x<font color="#000080">[</font>i<font color="#000080">] &gt; </font><font color="#800000">320</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>x<font color="#000080">[</font>i<font color="#000080">] &lt; -</font><font color="#800000">320</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>y<font color="#000080">[</font>i<font color="#000080">] &gt; </font><font color="#800000">240</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>y<font color="#000080">[</font>i<font color="#000080">] &lt; -</font><font color="#800000">240</font><font color="#000080">) </font><font color="#FF0000"><b>THEN
      </b></font>ResetStar<font color="#000080">(</font>i<font color="#000080">);
    </font>x2 <font color="#000080">:= </font>x<font color="#000080">[</font>i<font color="#000080">];
    </font>y2 <font color="#000080">:= </font>y<font color="#000080">[</font>i<font color="#000080">];
    </font>xyS <font color="#000080">:= </font>x2<font color="#000080">*</font>x2<font color="#000080">+</font>y2<font color="#000080">*</font>y2<font color="#000080">;
    </font><font color="#008000"><i>{ x^2+y^2 = d^2 (distance from origin) would work better but slower}
    </i></font><font color="#FF0000"><b>if </b></font>xyS <font color="#000080">&gt; </font><font color="#800000">40000 </font><font color="#FF0000"><b>then </b></font>c<font color="#000080">[</font>i<font color="#000080">] := </font><font color="#800000">15
    </font><font color="#FF0000"><b>else if </b></font>xyS <font color="#000080">&gt; </font><font color="#800000">10000 </font><font color="#FF0000"><b>then </b></font>c<font color="#000080">[</font>i<font color="#000080">] :=</font><font color="#800000">7
    </font><font color="#FF0000"><b>else </b></font>c<font color="#000080">[</font>i<font color="#000080">] := </font><font color="#800000">8</font><font color="#000080">;

    </font>putpixel<font color="#000080">(</font>x<font color="#000080">[</font>i<font color="#000080">]+</font><font color="#800000">320</font><font color="#000080">,</font>y<font color="#000080">[</font>i<font color="#000080">]+</font><font color="#800000">240</font><font color="#000080">,</font>c<font color="#000080">[</font>i<font color="#000080">]);

  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

    </font><font color="#FF0000"><b>if </b></font>keypressed <font color="#FF0000"><b>then
      begin
        </b></font>k <font color="#000080">:= </font>readkey<font color="#000080">;
        </font><font color="#FF0000"><b>if </b></font>k <font color="#000080">= </font><font color="#800000">'q' </font><font color="#FF0000"><b>then </b></font>halt<font color="#000080">;
        </font><font color="#FF0000"><b>if </b></font>k <font color="#000080">= </font><font color="#800000">'6' </font><font color="#FF0000"><b>then </b></font>MoveRight<font color="#000080">;
        </font><font color="#FF0000"><b>if </b></font>k <font color="#000080">= </font><font color="#800000">'4' </font><font color="#FF0000"><b>then </b></font>MoveLeft<font color="#000080">;
        </font><font color="#FF0000"><b>if </b></font>k <font color="#000080">= </font><font color="#800000">'8' </font><font color="#FF0000"><b>then </b></font>MoveUp<font color="#000080">;
        </font><font color="#FF0000"><b>if </b></font>k <font color="#000080">= </font><font color="#800000">'2' </font><font color="#FF0000"><b>then </b></font>MoveDown<font color="#000080">;
        </font><font color="#FF0000"><b>if </b></font>k <font color="#000080">= </font><font color="#800000">'7' </font><font color="#FF0000"><b>then </b></font>MoveUpLeft<font color="#000080">;
        </font><font color="#FF0000"><b>if </b></font>k <font color="#000080">= </font><font color="#800000">'9' </font><font color="#FF0000"><b>then </b></font>MoveUpRight<font color="#000080">;
        </font><font color="#FF0000"><b>if </b></font>k <font color="#000080">= </font><font color="#800000">'1' </font><font color="#FF0000"><b>then </b></font>MoveDownLeft<font color="#000080">;
        </font><font color="#FF0000"><b>if </b></font>k <font color="#000080">= </font><font color="#800000">'3' </font><font color="#FF0000"><b>then </b></font>MoveDownRight<font color="#000080">;
        </font><font color="#FF0000"><b>if </b></font>k <font color="#000080">= </font><font color="#800000">'=' </font><font color="#FF0000"><b>then </b></font>dec<font color="#000080">(</font>speed<font color="#000080">);
        </font><font color="#FF0000"><b>if </b></font>k <font color="#000080">= </font><font color="#800000">'-' </font><font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>speed<font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font>delay<font color="#000080">(</font><font color="#800000">20</font><font color="#000080">);
</font><font color="#FF0000"><b>FOR </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>TO </b></font>MAX <font color="#FF0000"><b>DO
  </b></font>putpixel<font color="#000080">(</font>x<font color="#000080">[</font>i<font color="#000080">]+</font><font color="#800000">320</font><font color="#000080">,</font>y<font color="#000080">[</font>i<font color="#000080">]+</font><font color="#800000">240</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);

</font><font color="#FF0000"><b>UNTIL </b></font><font color="#800000">1 </font><font color="#000080">= </font><font color="#800000">2</font><font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">.</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0238.PAS">Original</a><b>]</b></p></body>
</html>
