<html>
<head><title> "Gif info display" by DAVID DANIEL ANDERSON</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0111.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
BS&gt; Can anone out there tell me where you get the resoloution out of a Gif file
BS&gt; from? What I am saying is, I would like to make a program to look at a Gif
BS&gt; and grab the resoloution out of it for my dir list files. Any help would be
BS&gt; appreciated.

I've written a freeware program to do just this.  Program name is GRR,
and Pascal source accompanies it.  Here is the source from the latest
(and only) version.  I apologize for the lack of comments, but it is
rather straightforward, I think. }

</i></font><font color="#FF0000"><b>program </b></font>getGIFheader<font color="#000080">;
</font><font color="#FF0000"><b>uses
  </b></font>dos<font color="#000080">;
</font><font color="#FF0000"><b>const
  </b></font>progdata <font color="#000080">= </font><font color="#800000">'GRR- Free DOS utility: GIF file info displayer.'</font><font color="#000080">;
  </font>progdat2 <font color="#000080">=
  </font><font color="#800000">'V1.00: August 19, 1993. (c) 1993 by David Daniel Anderson - Reign Ware.'</font><font color="#000080">;
  </font>usage <font color="#000080">=
  </font><font color="#800000">'Usage:  GRR directory and/or file_spec[.GIF]   Example:  GRR cindyc*'</font><font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>header <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">6</font><font color="#000080">];
  </font>gpixn <font color="#000080">: </font>byte<font color="#000080">;
  </font>gpixels<font color="#000080">, </font>gback<font color="#000080">, </font>rwidthLSB<font color="#000080">, </font>rheightLSB<font color="#000080">, </font>rwidth<font color="#000080">, </font>rheight <font color="#000080">: </font>char<font color="#000080">;
  </font>gifname <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">12</font><font color="#000080">];
  </font>giffile <font color="#000080">: </font>text<font color="#000080">;
  </font>dirinfo <font color="#000080">: </font>searchrec<font color="#000080">;
  </font>gpath <font color="#000080">: </font>pathstr<font color="#000080">;
  </font>gdir <font color="#000080">: </font>dirstr<font color="#000080">;
  </font>gname <font color="#000080">: </font>namestr<font color="#000080">;
  </font>gext <font color="#000080">: </font>extstr<font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>showhelp<font color="#000080">;
</font><font color="#FF0000"><b>begin </b></font><font color="#008000"><i>{-- showhelp --}
  </i></font>writeln<font color="#000080">(</font>progdata<font color="#000080">);
  </font>writeln<font color="#000080">(</font>progdat2<font color="#000080">);
  </font>writeln<font color="#000080">(</font>usage<font color="#000080">);
  </font>halt<font color="#000080">;
</font><font color="#FF0000"><b>end </b></font><font color="#008000"><i>{-- showhelp --}</i></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>taffy<font color="#000080">(</font>astring <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">; </font>newlen <font color="#000080">: </font>byte<font color="#000080">) : </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
</font><font color="#FF0000"><b>begin </b></font><font color="#008000"><i>{-- taffy --}
  </i></font><font color="#FF0000"><b>while </b></font><font color="#000080">(</font>length<font color="#000080">(</font>astring<font color="#000080">) &lt; </font>newlen<font color="#000080">) </font><font color="#FF0000"><b>do
    </b></font>astring <font color="#000080">:= </font>astring <font color="#000080">+ </font><font color="#800000">' '</font><font color="#000080">;
  </font>taffy <font color="#000080">:= </font>astring<font color="#000080">;
</font><font color="#FF0000"><b>end </b></font><font color="#008000"><i>{-- taffy --}</i></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>LeadingZero<font color="#000080">(</font>w <font color="#000080">: </font>Word<font color="#000080">) : </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>s <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
</font><font color="#FF0000"><b>begin </b></font><font color="#008000"><i>{-- LeadingZero --}
  </i></font>Str<font color="#000080">(</font>w <font color="#000080">: </font><font color="#800000">0</font><font color="#000080">, </font>s<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>length<font color="#000080">(</font>s<font color="#000080">) = </font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>then
    </b></font>s <font color="#000080">:= </font><font color="#800000">'0' </font><font color="#000080">+ </font>s<font color="#000080">;
  </font>LeadingZero <font color="#000080">:= </font>s<font color="#000080">;
</font><font color="#FF0000"><b>end </b></font><font color="#008000"><i>{-- LeadingZero --}</i></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>writeftime<font color="#000080">(</font>fdatetime <font color="#000080">: </font>longint<font color="#000080">);
</font><font color="#FF0000"><b>var
  </b></font>Year2 <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
  </font>DateTimeInf <font color="#000080">: </font>DateTime<font color="#000080">;
</font><font color="#FF0000"><b>begin </b></font><font color="#008000"><i>{-- writeftime --}
  </i></font>UnpackTime<font color="#000080">(</font>fdatetime<font color="#000080">, </font>DateTimeInf<font color="#000080">);
  </font><font color="#FF0000"><b>with </b></font>DateTimeInf <font color="#FF0000"><b>do
  begin
  </b></font>Year2 <font color="#000080">:= </font>LeadingZero<font color="#000080">(</font>Year<font color="#000080">);
  </font>Delete<font color="#000080">(</font>Year2<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">);
  </font>Write<font color="#000080">(</font>LeadingZero<font color="#000080">(</font>Month<font color="#000080">), </font><font color="#800000">'-'</font><font color="#000080">, </font>LeadingZero<font color="#000080">(</font>Day<font color="#000080">), </font><font color="#800000">'-'</font><font color="#000080">, </font>Year2<font color="#000080">, </font><font color="#800000">'  '</font><font color="#000080">,
  </font>LeadingZero<font color="#000080">(</font>Hour<font color="#000080">), </font><font color="#800000">':'</font><font color="#000080">, </font>LeadingZero<font color="#000080">(</font>Min<font color="#000080">), </font><font color="#800000">':'</font><font color="#000080">, </font>LeadingZero<font color="#000080">(</font>Sec<font color="#000080">));
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end </b></font><font color="#008000"><i>{-- writeftime --}</i></font><font color="#000080">;


</font><font color="#FF0000"><b>procedure </b></font>displaygifscreenstats<font color="#000080">(</font>screendes <font color="#000080">: </font>byte<font color="#000080">);
</font><font color="#FF0000"><b>var
  </b></font>GCM <font color="#000080">: </font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>begin </b></font><font color="#008000"><i>{-- displaygifscreenstats --}
  </i></font>GCM <font color="#000080">:= </font>screendes <font color="#000080">&gt; </font><font color="#800000">128</font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>screendes <font color="#000080">&gt; </font><font color="#800000">128</font><font color="#000080">) </font><font color="#FF0000"><b>then
    </b></font>screendes <font color="#000080">:= </font>screendes <font color="#000080">- </font><font color="#800000">128</font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>screendes <font color="#000080">&gt; </font><font color="#800000">64</font><font color="#000080">) </font><font color="#FF0000"><b>then
    </b></font>screendes <font color="#000080">:= </font>screendes <font color="#000080">- </font><font color="#800000">64</font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>screendes <font color="#000080">&gt; </font><font color="#800000">32</font><font color="#000080">) </font><font color="#FF0000"><b>then
    </b></font>screendes <font color="#000080">:= </font>screendes <font color="#000080">- </font><font color="#800000">32</font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>screendes <font color="#000080">&gt; </font><font color="#800000">16</font><font color="#000080">) </font><font color="#FF0000"><b>then
    </b></font>screendes <font color="#000080">:= </font>screendes <font color="#000080">- </font><font color="#800000">16</font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>screendes <font color="#000080">&gt; </font><font color="#800000">8</font><font color="#000080">) </font><font color="#FF0000"><b>then
    </b></font>screendes <font color="#000080">:= </font>screendes <font color="#000080">- </font><font color="#800000">8</font><font color="#000080">;
  </font><font color="#FF0000"><b>case </b></font><font color="#000080">(</font>screendes<font color="#000080">) </font><font color="#FF0000"><b>of
    </b></font><font color="#800000">0</font><font color="#000080">: </font>Write<font color="#000080">(</font><font color="#800000">'  2'</font><font color="#000080">);
    </font><font color="#800000">1</font><font color="#000080">: </font>Write<font color="#000080">(</font><font color="#800000">'  4'</font><font color="#000080">);
    </font><font color="#800000">2</font><font color="#000080">: </font>Write<font color="#000080">(</font><font color="#800000">'  8'</font><font color="#000080">);
    </font><font color="#800000">3</font><font color="#000080">: </font>Write<font color="#000080">(</font><font color="#800000">' 16'</font><font color="#000080">);
    </font><font color="#800000">4</font><font color="#000080">: </font>Write<font color="#000080">(</font><font color="#800000">' 32'</font><font color="#000080">);
    </font><font color="#800000">5</font><font color="#000080">: </font>Write<font color="#000080">(</font><font color="#800000">' 64'</font><font color="#000080">);
    </font><font color="#800000">6</font><font color="#000080">: </font>Write<font color="#000080">(</font><font color="#800000">'128'</font><font color="#000080">);
    </font><font color="#800000">7</font><font color="#000080">: </font>Write<font color="#000080">(</font><font color="#800000">'256'</font><font color="#000080">);
  </font><font color="#FF0000"><b>end </b></font><font color="#008000"><i>{-- CASE --}</i></font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>GCM<font color="#000080">) </font><font color="#FF0000"><b>then
    </b></font>Write<font color="#000080">(</font><font color="#800000">' ]  GCM/'</font><font color="#000080">)
  </font><font color="#FF0000"><b>else
    </b></font>Write<font color="#000080">(</font><font color="#800000">' ]  ---/'</font><font color="#000080">);
</font><font color="#FF0000"><b>end </b></font><font color="#008000"><i>{-- displaygifscreenstats --}</i></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>checkforgiflite<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>thefile <font color="#000080">: </font>text<font color="#000080">);
</font><font color="#FF0000"><b>var
  </b></font>ic <font color="#000080">: </font>Word<font color="#000080">;
  </font>dummy<font color="#000080">, </font>glite <font color="#000080">: </font>char<font color="#000080">;
  </font>gliteword <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">7</font><font color="#000080">];
</font><font color="#FF0000"><b>begin </b></font><font color="#008000"><i>{-- checkforgiflite --}
  </i></font><font color="#FF0000"><b>for </b></font>ic <font color="#000080">:= </font><font color="#800000">13 </font><font color="#FF0000"><b>to </b></font><font color="#800000">784 </font><font color="#FF0000"><b>do
    </b></font>read<font color="#000080">(</font>thefile<font color="#000080">, </font>dummy<font color="#000080">);
  </font>gliteword <font color="#000080">:= </font><font color="#800000">'       '</font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>ic <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">7 </font><font color="#FF0000"><b>do
    begin
    </b></font>read<font color="#000080">(</font>thefile<font color="#000080">, </font>glite<font color="#000080">);
    </font>gliteword<font color="#000080">[</font>ic<font color="#000080">] := </font>glite<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>pos<font color="#000080">(</font><font color="#800000">'GIFLITE'</font><font color="#000080">, </font>gliteword<font color="#000080">) = </font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>then
    </b></font>Write<font color="#000080">(</font><font color="#800000">'GL'</font><font color="#000080">)
  </font><font color="#FF0000"><b>else
    </b></font>Write<font color="#000080">(</font><font color="#800000">'--'</font><font color="#000080">);
</font><font color="#FF0000"><b>end </b></font><font color="#008000"><i>{-- checkforgiflite --}</i></font><font color="#000080">;

</font><font color="#FF0000"><b>begin </b></font><font color="#008000"><i>{-- getGIFheader --}
  </i></font>gpath <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
  </font>gpath <font color="#000080">:= </font>paramstr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>gpath <font color="#000080">= </font><font color="#800000">''</font><font color="#000080">) </font><font color="#FF0000"><b>then
    </b></font>gpath <font color="#000080">:= </font><font color="#800000">'*.gif'</font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>pos<font color="#000080">(</font><font color="#800000">'.'</font><font color="#000080">, </font>gpath<font color="#000080">) &lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
    begin
    </b></font>gpath <font color="#000080">:= </font>copy<font color="#000080">(</font>gpath<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font>pos<font color="#000080">(</font><font color="#800000">'.'</font><font color="#000080">, </font>gpath<font color="#000080">));
    </font>gpath <font color="#000080">:= </font>gpath <font color="#000080">+ </font><font color="#800000">'gif'
    </font><font color="#FF0000"><b>end
  else
    </b></font>gpath <font color="#000080">:= </font>gpath <font color="#000080">+ </font><font color="#800000">'*.gif'</font><font color="#000080">;
  </font>fsplit<font color="#000080">(</font>fexpand<font color="#000080">(</font>gpath<font color="#000080">), </font>gdir<font color="#000080">, </font>gname<font color="#000080">, </font>gext<font color="#000080">);
  </font>findfirst<font color="#000080">(</font>gpath<font color="#000080">, </font>archive<font color="#000080">, </font>dirinfo<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>doserror <font color="#000080">&lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
    </b></font>showhelp<font color="#000080">;
  </font><font color="#FF0000"><b>while </b></font><font color="#000080">(</font>doserror <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>do
    begin
    </b></font>gifname <font color="#000080">:= </font>dirinfo<font color="#000080">.</font>name<font color="#000080">;
    </font>assign<font color="#000080">(</font>giffile<font color="#000080">, </font>gdir <font color="#000080">+ </font>gifname<font color="#000080">);
    </font>reset<font color="#000080">(</font>giffile<font color="#000080">);
    </font>read<font color="#000080">(</font>giffile<font color="#000080">, </font>header<font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>pos<font color="#000080">(</font><font color="#800000">'GIF'</font><font color="#000080">, </font>header<font color="#000080">) &lt;&gt; </font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>then
      </b></font>header <font color="#000080">:= </font><font color="#800000">'?_GIF?'</font><font color="#000080">;
    </font>read<font color="#000080">(</font>giffile<font color="#000080">, </font>rwidthLSB<font color="#000080">, </font>rwidth<font color="#000080">, </font>rheightLSB<font color="#000080">, </font>rheight<font color="#000080">, </font>gpixels<font color="#000080">, </font>gback<font color="#000080">);
    </font>gifname <font color="#000080">:= </font>taffy<font color="#000080">(</font>gifname<font color="#000080">, </font><font color="#800000">12</font><font color="#000080">);
    </font>Write<font color="#000080">(</font>gifname<font color="#000080">, </font><font color="#800000">'  '</font><font color="#000080">, </font>dirinfo<font color="#000080">.</font>size<font color="#000080">:</font><font color="#800000">7</font><font color="#000080">, </font><font color="#800000">'  '</font><font color="#000080">);
    </font>writeftime<font color="#000080">(</font>dirinfo<font color="#000080">.</font>time<font color="#000080">);
    </font>Write<font color="#000080">(</font><font color="#800000">'    '</font><font color="#000080">, </font>header<font color="#000080">, </font><font color="#800000">'   ['</font><font color="#000080">);
    </font>Write<font color="#000080">((</font>ord<font color="#000080">(</font>rwidthLSB<font color="#000080">) + (</font><font color="#800000">256 </font><font color="#000080">* </font>ord<font color="#000080">(</font>rwidth<font color="#000080">))):</font><font color="#800000">4</font><font color="#000080">, </font><font color="#800000">' '</font><font color="#000080">,
         (</font>ord<font color="#000080">(</font>rheightLSB<font color="#000080">) + (</font><font color="#800000">256 </font><font color="#000080">* </font>ord<font color="#000080">(</font>rheight<font color="#000080">))):</font><font color="#800000">4</font><font color="#000080">, </font><font color="#800000">'  '</font><font color="#000080">);
    </font>gpixn <font color="#000080">:= </font>ord<font color="#000080">(</font>gpixels<font color="#000080">);
    </font>displaygifscreenstats<font color="#000080">(</font>gpixn<font color="#000080">);
    </font><font color="#008000"><i>{         write ( ', ', ord ( gback )); }
    { This is the background color, commented out since it is not used }
    </i></font>checkforgiflite<font color="#000080">(</font>giffile<font color="#000080">);
    </font>writeln<font color="#000080">;
    </font>close<font color="#000080">(</font>giffile<font color="#000080">);
    </font>findnext<font color="#000080">(</font>dirinfo<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end </b></font><font color="#008000"><i>{-- getGIFheader --}</i></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0111.PAS">Original</a><b>]</b></p></body>
</html>
