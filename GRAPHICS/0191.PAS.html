<html>
<head><title> "3840 Color Mode X" by DAVID DAHL</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0191.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>Unit </b></font>X3840<font color="#000080">;
</font><font color="#008000"><i>{=========================================
 =   320X200 3840 color, 2 page Mode X   =
 =        by David Dahl @ 1:272/85       =
 =========================================}
(* PUBLIC DOMAIN *)
</i></font><font color="#FF0000"><b>Interface
  Uses </b></font>CRT<font color="#000080">, </font>DOS<font color="#000080">;
  </font><font color="#FF0000"><b>Procedure </b></font>PutPixel <font color="#000080">(</font>XCoord<font color="#000080">, </font>YCoord   <font color="#000080">: </font>Word<font color="#000080">;
                      </font>Red<font color="#000080">, </font>Green<font color="#000080">, </font>Blue <font color="#000080">: </font>Byte<font color="#000080">);
  </font><font color="#FF0000"><b>Procedure </b></font>InitializeGraphics<font color="#000080">;
  </font><font color="#FF0000"><b>Procedure </b></font>EnableScreen<font color="#000080">;
  </font><font color="#FF0000"><b>Procedure </b></font>SetActivePage <font color="#000080">(</font>PageNo <font color="#000080">: </font>Word<font color="#000080">);
  </font><font color="#FF0000"><b>Procedure </b></font>SetDisplayPage <font color="#000080">(</font>PageNo <font color="#000080">: </font>Word<font color="#000080">);
</font><font color="#FF0000"><b>Implementation
Const </b></font>SC_INDEX <font color="#000080">= </font><font color="#800000">$3C4</font><font color="#000080">; </font>SC_MEM_MODE <font color="#000080">= </font><font color="#800000">4</font><font color="#000080">;
      </font>GC_INDEX <font color="#000080">= </font><font color="#800000">$3CE</font><font color="#000080">; </font>GC_GRAPH_MODE <font color="#000080">= </font><font color="#800000">5</font><font color="#000080">; </font>GC_MISCELL <font color="#000080">= </font><font color="#800000">6</font><font color="#000080">;
      </font>CRTC_INDEX <font color="#000080">= </font><font color="#800000">$3D4</font><font color="#000080">; </font>CC_UNDERLINE <font color="#000080">= </font><font color="#800000">$14</font><font color="#000080">; </font>CC_MODE_CTRL <font color="#000080">= </font><font color="#800000">$17</font><font color="#000080">;
      </font>DAC_WRITE_ADR <font color="#000080">= </font><font color="#800000">$3C8</font><font color="#000080">; </font>DAC_DATA <font color="#000080">= </font><font color="#800000">$3C9</font><font color="#000080">;
      </font>SeqCtrlIndex   <font color="#000080">= </font><font color="#800000">$3C4</font><font color="#000080">;
      </font>AttrCtrlWrite  <font color="#000080">= </font><font color="#800000">$3C0</font><font color="#000080">;
      </font>INPUT_STATUS_1 <font color="#000080">= </font><font color="#800000">$3DA</font><font color="#000080">;
</font><font color="#FF0000"><b>Type  </b></font>PageOfsArray <font color="#000080">= </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">3</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Word<font color="#000080">;
      </font>CRTCPageRec <font color="#000080">= </font><font color="#FF0000"><b>Record </b></font>High<font color="#000080">:</font>Word<font color="#000080">; </font>Low<font color="#000080">:</font>Word<font color="#000080">; </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
      </font>CRTCPageArray <font color="#000080">= </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">3</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>CRTCPageRec<font color="#000080">;
      </font>PaletteRec <font color="#000080">= </font><font color="#FF0000"><b>Record </b></font>Red<font color="#000080">:</font>Byte<font color="#000080">; </font>Green<font color="#000080">:</font>Byte<font color="#000080">; </font>Blue<font color="#000080">:</font>Byte<font color="#000080">; </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
      </font>PaletteArray <font color="#000080">= </font><font color="#FF0000"><b>Array </b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>PaletteRec<font color="#000080">;
</font><font color="#FF0000"><b>Const </b></font>PageOfs    <font color="#000080">: </font>PageOfsArray <font color="#000080">= (</font><font color="#800000">$0000</font><font color="#000080">,</font><font color="#800000">$4000</font><font color="#000080">,</font><font color="#800000">$8000</font><font color="#000080">,</font><font color="#800000">$C000</font><font color="#000080">);
</font><font color="#FF0000"><b>Var   </b></font>CRTCPage   <font color="#000080">: </font>CRTCPageArray<font color="#000080">;
      </font>Palette    <font color="#000080">: </font>PaletteArray<font color="#000080">;
      </font>InGraphics <font color="#000080">: </font>Boolean<font color="#000080">;
      </font>SaveExit   <font color="#000080">: </font>Pointer<font color="#000080">;
      </font>DisplayPage <font color="#000080">: </font>Word<font color="#000080">;
      </font>ActivePage  <font color="#000080">: </font>Word<font color="#000080">;
      </font>PageNum     <font color="#000080">: </font>Word<font color="#000080">;
</font><font color="#008000"><i>{-[ Initialize Variables ]------------------------------------------------}
</i></font><font color="#FF0000"><b>Procedure </b></font>InitializeVariables<font color="#000080">;
</font><font color="#FF0000"><b>Var </b></font>Index <font color="#000080">: </font>Integer<font color="#000080">;
    </font>RedCount<font color="#000080">,
    </font>GreenCount<font color="#000080">,
    </font>BlueCount   <font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>PageNum     <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>DisplayPage <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>ActivePage  <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#008000"><i>{ Calculate CRTC Page Offsets }
  </i></font><font color="#FF0000"><b>For </b></font>Index <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">3 </font><font color="#FF0000"><b>do
  Begin
    </b></font>CRTCPage<font color="#000080">[</font>Index<font color="#000080">].</font>High <font color="#000080">:= (</font>Word<font color="#000080">(</font>Hi<font color="#000080">(</font>PageOfs<font color="#000080">[</font>Index<font color="#000080">])) </font><font color="#FF0000"><b>SHL </b></font><font color="#800000">8</font><font color="#000080">) </font><font color="#FF0000"><b>OR </b></font><font color="#800000">$0C</font><font color="#000080">;
    </font>CRTCPage<font color="#000080">[</font>Index<font color="#000080">].</font>Low  <font color="#000080">:= (</font>Word<font color="#000080">(</font>Lo<font color="#000080">(</font>PageOfs<font color="#000080">[</font>Index<font color="#000080">])) </font><font color="#FF0000"><b>SHL </b></font><font color="#800000">8</font><font color="#000080">) </font><font color="#FF0000"><b>OR </b></font><font color="#800000">$0D</font><font color="#000080">;
  </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font><font color="#008000"><i>{ Calculate Palette }
  </i></font>Index <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>For </b></font>BlueCount <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">14 </font><font color="#FF0000"><b>do
    For </b></font>RedCount <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">15 </font><font color="#FF0000"><b>do
    Begin
      </b></font>Palette<font color="#000080">[</font>Index<font color="#000080">].</font>Red   <font color="#000080">:= (</font>RedCount  <font color="#000080">* </font><font color="#800000">63</font><font color="#000080">) </font><font color="#FF0000"><b>DIV </b></font><font color="#800000">15</font><font color="#000080">;
      </font>Palette<font color="#000080">[</font>Index<font color="#000080">].</font>Green <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font>Palette<font color="#000080">[</font>Index<font color="#000080">].</font>Blue  <font color="#000080">:= (</font>BlueCount <font color="#000080">* </font><font color="#800000">63</font><font color="#000080">) </font><font color="#FF0000"><b>DIV </b></font><font color="#800000">14</font><font color="#000080">;
      </font>Inc<font color="#000080">(</font>Index<font color="#000080">)
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>For </b></font>GreenCount <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">15 </font><font color="#FF0000"><b>do
  Begin
    </b></font>Palette<font color="#000080">[</font>Index<font color="#000080">].</font>Red   <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font>Palette<font color="#000080">[</font>Index<font color="#000080">].</font>Green <font color="#000080">:= (</font>GreenCount <font color="#000080">* </font><font color="#800000">63</font><font color="#000080">) </font><font color="#FF0000"><b>DIV </b></font><font color="#800000">15</font><font color="#000080">;
    </font>Palette<font color="#000080">[</font>Index<font color="#000080">].</font>Blue  <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font>Inc<font color="#000080">(</font>Index<font color="#000080">);
  </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#008000"><i>{-[ Put Pixel To Screen ]-------------------------------------------------}
</i></font><font color="#FF0000"><b>Procedure </b></font>PutPixel <font color="#000080">(</font>XCoord<font color="#000080">, </font>YCoord   <font color="#000080">: </font>Word<font color="#000080">;
                    </font>Red<font color="#000080">, </font>Green<font color="#000080">, </font>Blue <font color="#000080">: </font>Byte<font color="#000080">); </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>ASM
  </b></font><font color="#FF00FF">MOV AX, SegA000; MOV ES, AX
  MOV DI, ActivePage; SHL DI, 1; MOV BX, XCoord;
  MOV CX, BX; AND CX, $03; MOV AX, 1; SHL AX, CL
  MOV DX, SeqCtrlIndex; MOV AH, AL; MOV AL, 2; OUT DX, AX
  ADD BX, YCoord; MOV CX, BX; AND BX, 1; SHL BX, 1
  MOV SI, Word(PageOfs[DI+BX])
  MOV BX, CX; INC BX; AND BX, 1;  SHL BX, 1
  MOV DI, Word(PageOfs[DI+BX])
  MOV AX, YCoord; MOV BX, AX; SHL AX, 4; SHL BX, 6; ADD AX, BX
  MOV BX, XCoord; SHR BX, 2; ADD BX, AX
  MOV AL, Blue; SHL AL, 4; ADD AL, Red
  MOV AH, Green; ADD AH, 15 * 16
  MOV ES:[DI+BX], AH; MOV ES:[SI+BX], AL
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#008000"><i>{-[ Set VGA DAC ]---------------------------------------------------------}
</i></font><font color="#FF0000"><b>Procedure </b></font>SetPalette <font color="#000080">(</font>Pal <font color="#000080">: </font>Pointer<font color="#000080">); </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>ASM
  </b></font><font color="#FF00FF">LES DI, Pal; MOV DX, DAC_WRITE_ADR; XOR AL, AL; OUT DX, AL
  MOV DX, DAC_DATA; MOV CX, 256 * 3
  @PalOut:; MOV AL, Byte(ES:[DI]); INC DI; OUT DX, AL; LOOP @PalOut
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;
</font><font color="#008000"><i>{-[ Initialize 3840 Color Mode X ]----------------------------------------}
</i></font><font color="#FF0000"><b>Procedure </b></font>InitializeGraphics<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>InGraphics <font color="#000080">:= </font>True<font color="#000080">;
  </font><font color="#FF0000"><b>ASM
    </b></font><font color="#FF00FF">MOV AX, $12; INT $10; MOV AX, $13; INT $10
    MOV DX, GC_INDEX; MOV AL, GC_GRAPH_MODE; OUT DX, AL; INC DX
    IN  AL, DX; AND AL, 11101111b; OUT DX, AL; DEC DX
    MOV AL, GC_MISCELL; OUT DX, AL; INC DX; IN  AL, DX
    AND AL, 11111101b; OUT DX, AL
    MOV DX, SC_INDEX; MOV AL, SC_MEM_MODE; OUT DX, AL; INC DX
    IN  AL, DX; AND AL, 11110111b; OR  AL, 4; OUT DX, AL
    MOV DX, CRTC_INDEX; MOV AL, CC_UNDERLINE; OUT DX, AL; INC DX
    IN  AL, DX; AND AL, 10111111b; OR  AL, 4; OUT DX, AL; DEC DX
    MOV AL, CC_MODE_CTRL; OUT DX, AL; INC DX; IN  AL, DX
    OR  AL, 01000000b; OUT DX, AL
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
  </font>PortW<font color="#000080">[</font>CRTC_INDEX<font color="#000080">]  := </font><font color="#800000">$4218</font><font color="#000080">;
  </font>Port<font color="#000080">[</font>CRTC_INDEX<font color="#000080">]   := </font><font color="#800000">$07</font><font color="#000080">;
  </font>Port<font color="#000080">[</font>CRTC_INDEX<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">] := </font>Port<font color="#000080">[</font>CRTC_INDEX<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">] </font><font color="#FF0000"><b>OR </b></font><font color="#800000">$10</font><font color="#000080">;
  </font>Port<font color="#000080">[</font>CRTC_INDEX<font color="#000080">]   := </font><font color="#800000">$09</font><font color="#000080">;
  </font>Port<font color="#000080">[</font>CRTC_INDEX<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">] := </font>Port<font color="#000080">[</font>CRTC_INDEX<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">] </font><font color="#FF0000"><b>AND Not</b></font><font color="#000080">(</font><font color="#800000">$20</font><font color="#000080">);
  </font>Port<font color="#000080">[</font>AttrCtrlWrite<font color="#000080">] := </font><font color="#800000">$10 </font><font color="#FF0000"><b>OR </b></font><font color="#800000">$20</font><font color="#000080">;
  </font>Port<font color="#000080">[</font>AttrCtrlWrite<font color="#000080">] := </font><font color="#800000">$61</font><font color="#000080">; </font><font color="#008000"><i>{01100001b;}
  </i></font>SetPalette <font color="#000080">(</font>Addr<font color="#000080">(</font>Palette<font color="#000080">));
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#008000"><i>{-[ Ping-Pong Screen To Enable 3840 Colors ]------------------------------}
</i></font><font color="#FF0000"><b>Procedure </b></font>EnableScreen<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>PageNum <font color="#000080">:= (</font>PageNum <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>AND </b></font><font color="#800000">1</font><font color="#000080">;
  </font><font color="#FF0000"><b>Repeat Until </b></font><font color="#000080">(</font>Port<font color="#000080">[</font>Input_Status_1<font color="#000080">] </font><font color="#FF0000"><b>AND </b></font><font color="#800000">8</font><font color="#000080">) = </font><font color="#800000">0</font><font color="#000080">;
  </font>PortW<font color="#000080">[</font>CRTC_INDEX<font color="#000080">] := </font>CRTCPage<font color="#000080">[</font>PageNum <font color="#FF0000"><b>OR </b></font>DisplayPage<font color="#000080">].</font>High<font color="#000080">;
  </font>PortW<font color="#000080">[</font>CRTC_INDEX<font color="#000080">] := </font>CRTCPage<font color="#000080">[</font>PageNum <font color="#FF0000"><b>OR </b></font>DisplayPage<font color="#000080">].</font>Low<font color="#000080">;
  </font><font color="#FF0000"><b>Repeat Until </b></font><font color="#000080">(</font>Port<font color="#000080">[</font>Input_Status_1<font color="#000080">] </font><font color="#FF0000"><b>AND </b></font><font color="#800000">8</font><font color="#000080">) &lt;&gt; </font><font color="#800000">0</font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#008000"><i>{-[ Set Active Page # ]---------------------------------------------------}
</i></font><font color="#FF0000"><b>Procedure </b></font>SetActivePage <font color="#000080">(</font>PageNo <font color="#000080">: </font>Word<font color="#000080">);
</font><font color="#FF0000"><b>Begin </b></font>ActivePage <font color="#000080">:= (</font>PageNo <font color="#FF0000"><b>AND </b></font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>SHL </b></font><font color="#800000">1</font><font color="#000080">; </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#008000"><i>{-[ Set Display Page # ]--------------------------------------------------}
</i></font><font color="#FF0000"><b>Procedure </b></font>SetDisplayPage <font color="#000080">(</font>PageNo <font color="#000080">: </font>Word<font color="#000080">);
</font><font color="#FF0000"><b>Begin </b></font>DisplayPage <font color="#000080">:= (</font>PageNo <font color="#FF0000"><b>AND </b></font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>SHL </b></font><font color="#800000">1</font><font color="#000080">; </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#008000"><i>{-[ Exit Code ]-----------------------------------------------------------}
{$F+}
</i></font><font color="#FF0000"><b>Procedure </b></font>GpxExit<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>ExitProc <font color="#000080">:= </font>SaveExit<font color="#000080">;
  </font><font color="#FF0000"><b>If </b></font>InGraphics
  <font color="#FF0000"><b>Then
    </b></font>TextMode<font color="#000080">(</font>C80<font color="#000080">);
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#008000"><i>{$F-}
{=[ Unit Init Code ]======================================================}
</i></font><font color="#FF0000"><b>Begin
  </b></font>InGraphics <font color="#000080">:= </font>False<font color="#000080">;
  </font>SaveExit   <font color="#000080">:= </font>ExitProc<font color="#000080">;
  </font>ExitProc   <font color="#000080">:= </font>Addr<font color="#000080">(</font>GpxExit<font color="#000080">);
  </font>InitializeVariables<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">.

</font><font color="#008000"><i>{  -------------------  DEMO PROGRAMS ------------------ }

{$Q-,A+,S-,R-}
</i></font><font color="#FF0000"><b>Program </b></font>DisplayTGA<font color="#000080">;
</font><font color="#008000"><i>{====================================
 = Display TGA in 3840 color Mode X =
 =     by David Dahl @ 1:272/85     =
 ====================================}
(* Public Domain *)
</i></font><font color="#FF0000"><b>Uses </b></font>CRT<font color="#000080">, </font>X3840<font color="#000080">;
</font><font color="#FF0000"><b>Type </b></font>TGAHeaderRec <font color="#000080">= </font><font color="#FF0000"><b>Record
                      </b></font>IDLen      <font color="#000080">: </font>Byte<font color="#000080">;
                      </font>ColMapType <font color="#000080">: </font>Byte<font color="#000080">; </font>ImageType <font color="#000080">: </font>Byte<font color="#000080">;
                      </font>CMOrg      <font color="#000080">: </font>Word<font color="#000080">; </font>CMLen     <font color="#000080">: </font>Word<font color="#000080">; </font>CMBits <font color="#000080">: </font>Byte<font color="#000080">;
                      </font>XOfs       <font color="#000080">: </font>Word<font color="#000080">; </font>YOfs      <font color="#000080">: </font>Word<font color="#000080">;
                      </font>XSize      <font color="#000080">: </font>Word<font color="#000080">; </font>YSize     <font color="#000080">: </font>Word<font color="#000080">;
                      </font>BPix       <font color="#000080">: </font>Byte<font color="#000080">;
                      </font>ImageDesc  <font color="#000080">: </font>Byte<font color="#000080">;
                    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
     </font>TGAHeaderPtr <font color="#000080">= ^</font>TGAHeaderRec<font color="#000080">;
     </font>Buffer32Array <font color="#000080">= </font><font color="#FF0000"><b>Array </b></font><font color="#000080">[</font><font color="#800000">0 </font><font color="#000080">.. (</font><font color="#800000">127 </font><font color="#000080">* </font><font color="#800000">4</font><font color="#000080">)] </font><font color="#FF0000"><b>of </b></font>Byte<font color="#000080">;
     </font>Buffer32Ptr   <font color="#000080">= ^</font>Buffer32Array<font color="#000080">;
</font><font color="#FF0000"><b>Var </b></font>Header       <font color="#000080">: </font>TGAHeaderPtr<font color="#000080">;
    </font>Fin          <font color="#000080">: </font><font color="#FF0000"><b>File</b></font><font color="#000080">;
    </font>YPos<font color="#000080">, </font>XPos   <font color="#000080">: </font>LongInt<font color="#000080">;
    </font>XSize<font color="#000080">, </font>YSize <font color="#000080">: </font>Integer<font color="#000080">;
    </font>CodeByte     <font color="#000080">: </font>Byte<font color="#000080">;
    </font>Count        <font color="#000080">: </font>Byte<font color="#000080">;
    </font>Index        <font color="#000080">: </font>Word<font color="#000080">;
    </font>ColorBuffer  <font color="#000080">: </font>Buffer32Ptr<font color="#000080">;
    </font>PixelSize    <font color="#000080">: </font>Word<font color="#000080">;
    </font>Done         <font color="#000080">: </font>Boolean<font color="#000080">;
    </font>FileName     <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>New <font color="#000080">(</font>ColorBuffer<font color="#000080">); </font>New <font color="#000080">(</font>Header<font color="#000080">);
  </font><font color="#FF0000"><b>If </b></font>ParamCount <font color="#000080">= </font><font color="#800000">1
  </font><font color="#FF0000"><b>Then
    </b></font>FileName <font color="#000080">:= </font>ParamStr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">)
  </font><font color="#FF0000"><b>Else
  Begin
    </b></font>Writeln <font color="#000080">(</font><font color="#800000">'Enter Filename of Targa File to View'</font><font color="#000080">);
    </font>Readln  <font color="#000080">(</font>FileName<font color="#000080">);
  </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>If </b></font>Pos<font color="#000080">(</font><font color="#800000">'.'</font><font color="#000080">,</font>FileName<font color="#000080">) = </font><font color="#800000">0
  </font><font color="#FF0000"><b>Then
    </b></font>FileName <font color="#000080">:= </font>FileName <font color="#000080">+ </font><font color="#800000">'.TGA'</font><font color="#000080">;
  </font>Assign <font color="#000080">(</font>Fin<font color="#000080">, </font>FileName<font color="#000080">); </font>Reset  <font color="#000080">(</font>Fin<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
  </font>BlockRead <font color="#000080">(</font>Fin<font color="#000080">, </font>Header<font color="#000080">^, </font>SizeOf<font color="#000080">(</font>Header<font color="#000080">^));
  </font><font color="#FF0000"><b>If </b></font>Header<font color="#000080">^.</font>ImageDesc <font color="#000080">= </font><font color="#800000">0
  </font><font color="#FF0000"><b>Then
  Begin
    With </b></font>Header<font color="#000080">^ </font><font color="#FF0000"><b>do
    Begin
      </b></font>Writeln <font color="#000080">(</font><font color="#800000">'XSize, YSize :'</font><font color="#000080">,</font>XSize<font color="#000080">:</font><font color="#800000">6</font><font color="#000080">,</font>YSize<font color="#000080">:</font><font color="#800000">6</font><font color="#000080">);
      </font>Writeln <font color="#000080">(</font><font color="#800000">'Image Type   :'</font><font color="#000080">,</font>ImageType<font color="#000080">:</font><font color="#800000">6</font><font color="#000080">);
      </font>Writeln <font color="#000080">(</font><font color="#800000">'Bits/Pixel   :'</font><font color="#000080">,</font>BPix<font color="#000080">:</font><font color="#800000">6</font><font color="#000080">);
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>If </b></font><font color="#000080">((</font>Header<font color="#000080">^.</font>BPix <font color="#000080">= </font><font color="#800000">16</font><font color="#000080">)</font><font color="#FF0000"><b>OR</b></font><font color="#000080">(</font>Header<font color="#000080">^.</font>BPix <font color="#000080">= </font><font color="#800000">24</font><font color="#000080">)</font><font color="#FF0000"><b>OR</b></font><font color="#000080">(</font>Header<font color="#000080">^.</font>BPix <font color="#000080">= </font><font color="#800000">32</font><font color="#000080">)) </font><font color="#FF0000"><b>AND
       </b></font><font color="#000080">(</font>Header<font color="#000080">^.</font>ImageType <font color="#000080">&gt;= </font><font color="#800000">8</font><font color="#000080">)
    </font><font color="#FF0000"><b>Then
    Begin
      </b></font>Writeln <font color="#000080">(</font><font color="#800000">'Press Any Key To View Image.'</font><font color="#000080">);
      </font><font color="#FF0000"><b>While </b></font>Keypressed <font color="#FF0000"><b>do </b></font>Readkey<font color="#000080">;
      </font><font color="#FF0000"><b>Repeat Until </b></font>Keypressed<font color="#000080">;
      </font><font color="#FF0000"><b>While </b></font>Keypressed <font color="#FF0000"><b>do </b></font>Readkey<font color="#000080">;
      </font>InitializeGraphics<font color="#000080">;
      </font>XSize     <font color="#000080">:= </font>Header<font color="#000080">^.</font>XSize<font color="#000080">;
      </font>YSize     <font color="#000080">:= </font>Header<font color="#000080">^.</font>YSize<font color="#000080">;
      </font>XPos      <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font>YPos      <font color="#000080">:= </font>Header<font color="#000080">^.</font>YSize<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">;
      </font>PixelSize <font color="#000080">:= (</font>Header<font color="#000080">^.</font>BPix <font color="#FF0000"><b>SHR </b></font><font color="#800000">3</font><font color="#000080">);
      </font>Done      <font color="#000080">:= </font>False<font color="#000080">;
      </font><font color="#FF0000"><b>Repeat
        </b></font>BlockRead <font color="#000080">(</font>Fin<font color="#000080">, </font>CodeByte<font color="#000080">, </font>SizeOf<font color="#000080">(</font>CodeByte<font color="#000080">));
        </font>Count <font color="#000080">:= (</font>CodeByte <font color="#FF0000"><b>AND </b></font><font color="#800000">127</font><font color="#000080">) + </font><font color="#800000">1</font><font color="#000080">;
        </font>CodeByte <font color="#000080">:= </font>CodeByte <font color="#FF0000"><b>SHR </b></font><font color="#800000">7</font><font color="#000080">;
        </font><font color="#FF0000"><b>If </b></font>CodeByte <font color="#000080">= </font><font color="#800000">0
        </font><font color="#FF0000"><b>Then  </b></font><font color="#008000"><i>{ Output Count Colors }
        </i></font><font color="#FF0000"><b>Begin
          </b></font>BlockRead <font color="#000080">(</font>Fin<font color="#000080">, </font>ColorBuffer<font color="#000080">^, </font>Count <font color="#000080">* </font>PixelSize<font color="#000080">);
          </font>Index <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
          </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>Count <font color="#000080">&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>AND Not</b></font><font color="#000080">(</font>Done<font color="#000080">) </font><font color="#FF0000"><b>do
          Begin
            If </b></font>PixelSize <font color="#000080">&gt; </font><font color="#800000">2
            </font><font color="#FF0000"><b>Then
              </b></font>PutPixel <font color="#000080">((</font>XPos <font color="#000080">* </font><font color="#800000">319</font><font color="#000080">) </font><font color="#FF0000"><b>DIV </b></font>XSize<font color="#000080">,
                        (</font>YPos <font color="#000080">* </font><font color="#800000">199</font><font color="#000080">) </font><font color="#FF0000"><b>DIV </b></font>YSize<font color="#000080">,
                        </font>ColorBuffer<font color="#000080">^[</font>Index<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">] </font><font color="#FF0000"><b>SHR </b></font><font color="#800000">4</font><font color="#000080">,  </font><font color="#008000"><i>{ Red   }
                        </i></font>ColorBuffer<font color="#000080">^[</font>Index<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">] </font><font color="#FF0000"><b>SHR </b></font><font color="#800000">4</font><font color="#000080">,  </font><font color="#008000"><i>{ Green }
                        </i></font><font color="#000080">(</font>ColorBuffer<font color="#000080">^[</font>Index<font color="#000080">] * </font><font color="#800000">14</font><font color="#000080">) </font><font color="#FF0000"><b>DIV </b></font><font color="#800000">255</font><font color="#000080">) </font><font color="#008000"><i>{ Blue  }
            </i></font><font color="#FF0000"><b>Else
              </b></font>PutPixel <font color="#000080">((</font>XPos <font color="#000080">* </font><font color="#800000">319</font><font color="#000080">) </font><font color="#FF0000"><b>DIV </b></font>XSize<font color="#000080">,
                        (</font>YPos <font color="#000080">* </font><font color="#800000">199</font><font color="#000080">) </font><font color="#FF0000"><b>DIV </b></font>YSize<font color="#000080">,
                        (</font>ColorBuffer<font color="#000080">^[</font>Index<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">] </font><font color="#FF0000"><b>SHR </b></font><font color="#800000">3</font><font color="#000080">) </font><font color="#FF0000"><b>AND </b></font><font color="#800000">15</font><font color="#000080">,   </font><font color="#008000"><i>{ Red   }
                        </i></font><font color="#000080">((</font>ColorBuffer<font color="#000080">^[</font>Index<font color="#000080">] </font><font color="#FF0000"><b>SHR </b></font><font color="#800000">6</font><font color="#000080">) </font><font color="#FF0000"><b>OR
                        </b></font><font color="#000080">(</font>ColorBuffer<font color="#000080">^[</font>Index<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">] </font><font color="#FF0000"><b>SHL </b></font><font color="#800000">2</font><font color="#000080">)) </font><font color="#FF0000"><b>AND </b></font><font color="#800000">15</font><font color="#000080">, </font><font color="#008000"><i>{ Green }
                        </i></font><font color="#000080">(</font>ColorBuffer<font color="#000080">^[</font>Index<font color="#000080">] </font><font color="#FF0000"><b>SHR </b></font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>AND </b></font><font color="#800000">15</font><font color="#000080">);    </font><font color="#008000"><i>{ Blue  }
            </i></font>Inc<font color="#000080">(</font>Index<font color="#000080">, </font>PixelSize<font color="#000080">);
            </font>Dec<font color="#000080">(</font>Count<font color="#000080">);
            </font>Inc<font color="#000080">(</font>XPos<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
            </font><font color="#FF0000"><b>If </b></font>XPos <font color="#000080">&gt;= </font>XSize
            <font color="#FF0000"><b>Then
            Begin
              </b></font>XPos <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">; </font>Dec <font color="#000080">(</font>YPos<font color="#000080">);
              </font><font color="#FF0000"><b>If </b></font>YPos <font color="#000080">&lt; </font><font color="#800000">0
              </font><font color="#FF0000"><b>Then
                </b></font>Done <font color="#000080">:= </font>True<font color="#000080">;
            </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
            </font><font color="#FF0000"><b>If </b></font>KeyPressed
            <font color="#FF0000"><b>Then
              </b></font>Done <font color="#000080">:= </font>ReadKey <font color="#000080">= </font><font color="#800000">#27</font><font color="#000080">;
          </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
        </font><font color="#FF0000"><b>End
        Else
        Begin  </b></font><font color="#008000"><i>{ Output Color Count Times }
          </i></font>BlockRead <font color="#000080">(</font>Fin<font color="#000080">, </font>ColorBuffer<font color="#000080">^, </font>PixelSize<font color="#000080">);
          </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>Count <font color="#000080">&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>AND Not</b></font><font color="#000080">(</font>Done<font color="#000080">) </font><font color="#FF0000"><b>do
          Begin
            If </b></font>PixelSize <font color="#000080">&gt; </font><font color="#800000">2
            </font><font color="#FF0000"><b>Then
              </b></font>PutPixel <font color="#000080">((</font>XPos <font color="#000080">* </font><font color="#800000">319</font><font color="#000080">) </font><font color="#FF0000"><b>DIV </b></font>XSize<font color="#000080">,
                        (</font>YPos <font color="#000080">* </font><font color="#800000">199</font><font color="#000080">) </font><font color="#FF0000"><b>DIV </b></font>YSize<font color="#000080">,
                        </font>ColorBuffer<font color="#000080">^[</font><font color="#800000">2</font><font color="#000080">] </font><font color="#FF0000"><b>SHR </b></font><font color="#800000">4</font><font color="#000080">,  </font><font color="#008000"><i>{ Red   }
                        </i></font>ColorBuffer<font color="#000080">^[</font><font color="#800000">1</font><font color="#000080">] </font><font color="#FF0000"><b>SHR </b></font><font color="#800000">4</font><font color="#000080">,  </font><font color="#008000"><i>{ Green }
                        </i></font><font color="#000080">(</font>ColorBuffer<font color="#000080">^[</font><font color="#800000">0</font><font color="#000080">] * </font><font color="#800000">14</font><font color="#000080">) </font><font color="#FF0000"><b>DIV </b></font><font color="#800000">255</font><font color="#000080">) </font><font color="#008000"><i>{ Blue  }
            </i></font><font color="#FF0000"><b>Else
              </b></font>PutPixel <font color="#000080">((</font>XPos <font color="#000080">* </font><font color="#800000">319</font><font color="#000080">) </font><font color="#FF0000"><b>DIV </b></font>XSize<font color="#000080">,
                        (</font>YPos <font color="#000080">* </font><font color="#800000">199</font><font color="#000080">) </font><font color="#FF0000"><b>DIV </b></font>YSize<font color="#000080">,
                        (</font>ColorBuffer<font color="#000080">^[</font><font color="#800000">1</font><font color="#000080">] </font><font color="#FF0000"><b>SHR </b></font><font color="#800000">3</font><font color="#000080">) </font><font color="#FF0000"><b>AND </b></font><font color="#800000">15</font><font color="#000080">,   </font><font color="#008000"><i>{ Red   }
                        </i></font><font color="#000080">((</font>ColorBuffer<font color="#000080">^[</font><font color="#800000">0</font><font color="#000080">] </font><font color="#FF0000"><b>SHR </b></font><font color="#800000">6</font><font color="#000080">) </font><font color="#FF0000"><b>OR
                         </b></font><font color="#000080">(</font>ColorBuffer<font color="#000080">^[</font><font color="#800000">1</font><font color="#000080">] </font><font color="#FF0000"><b>SHL </b></font><font color="#800000">2</font><font color="#000080">)) </font><font color="#FF0000"><b>AND </b></font><font color="#800000">15</font><font color="#000080">, </font><font color="#008000"><i>{ Green }
                        </i></font><font color="#000080">(</font>ColorBuffer<font color="#000080">^[</font><font color="#800000">0</font><font color="#000080">] </font><font color="#FF0000"><b>SHR </b></font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>AND </b></font><font color="#800000">15</font><font color="#000080">);  </font><font color="#008000"><i>{ Blue  }
            </i></font>Dec<font color="#000080">(</font>Count<font color="#000080">);
            </font>Inc<font color="#000080">(</font>XPos<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
            </font><font color="#FF0000"><b>If </b></font>XPos <font color="#000080">&gt;= </font>XSize
            <font color="#FF0000"><b>Then
            Begin
              </b></font>XPos <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">; </font>Dec <font color="#000080">(</font>YPos<font color="#000080">);
              </font><font color="#FF0000"><b>If </b></font>YPos <font color="#000080">&lt; </font><font color="#800000">0
              </font><font color="#FF0000"><b>Then
                </b></font>Done <font color="#000080">:= </font>True<font color="#000080">;
            </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
            </font><font color="#FF0000"><b>If </b></font>KeyPressed
            <font color="#FF0000"><b>Then
              </b></font>Done <font color="#000080">:= </font>ReadKey <font color="#000080">= </font><font color="#800000">#27</font><font color="#000080">;
          </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
        </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>Until </b></font>Done<font color="#000080">;
      </font><font color="#FF0000"><b>While </b></font>Keypressed <font color="#FF0000"><b>do </b></font>Readkey<font color="#000080">;
      </font><font color="#FF0000"><b>Repeat </b></font>EnableScreen <font color="#FF0000"><b>Until </b></font>Keypressed<font color="#000080">;
      </font><font color="#FF0000"><b>While </b></font>Keypressed <font color="#FF0000"><b>do </b></font>Readkey<font color="#000080">;
      </font>TextMode <font color="#000080">(</font>C80<font color="#000080">);
    </font><font color="#FF0000"><b>End
    Else
      </b></font>Writeln <font color="#000080">(</font><font color="#800000">'Cannot view this picture.'</font><font color="#000080">);
  </font><font color="#FF0000"><b>End
  Else
    </b></font>Writeln <font color="#000080">(</font><font color="#800000">'Not a TGA File.'</font><font color="#000080">);
  </font>Close  <font color="#000080">(</font>Fin<font color="#000080">); </font>Dispose <font color="#000080">(</font>Header<font color="#000080">); </font>Dispose <font color="#000080">(</font>ColorBuffer<font color="#000080">);
</font><font color="#FF0000"><b>End</b></font><font color="#000080">.

</font><font color="#008000"><i>{ --------------------------- CUT -------------- }

</i></font><font color="#FF0000"><b>Program </b></font>TestX3840<font color="#000080">;
</font><font color="#008000"><i>{=============================
 =  Display All 3840 Colors  =
 = by David Dahl  @ 1:272/85 =
 =============================}
(* PUBLIC DOMAIN *)
</i></font><font color="#FF0000"><b>Uses </b></font>CRT<font color="#000080">, </font>X3840<font color="#000080">;
</font><font color="#FF0000"><b>Var </b></font>Red<font color="#000080">, </font>Green<font color="#000080">, </font>Blue <font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>InitializeGraphics<font color="#000080">;                    </font><font color="#008000"><i>{ Initialize 3840 Color Mode X }
  </i></font><font color="#FF0000"><b>For </b></font>Red <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">15 </font><font color="#FF0000"><b>do
    For </b></font>Green <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">15 </font><font color="#FF0000"><b>do
      For </b></font>Blue <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">14 </font><font color="#FF0000"><b>do
        </b></font>PutPixel <font color="#000080">(</font>Red<font color="#000080">+(</font>Blue<font color="#000080">*</font><font color="#800000">16</font><font color="#000080">), </font>Green<font color="#000080">,  </font><font color="#008000"><i>{ X, Y  }
                  </i></font>Red<font color="#000080">, </font>Green<font color="#000080">, </font>Blue<font color="#000080">);     </font><font color="#008000"><i>{ Color }
  </i></font><font color="#FF0000"><b>Repeat </b></font>EnableScreen <font color="#FF0000"><b>Until </b></font>Keypressed<font color="#000080">;  </font><font color="#008000"><i>{ Enable 3840 Colors }
  </i></font><font color="#FF0000"><b>While </b></font>Keypressed <font color="#FF0000"><b>do </b></font>Readkey<font color="#000080">;
  </font>TextMode<font color="#000080">(</font>C80<font color="#000080">);
</font><font color="#FF0000"><b>End</b></font><font color="#000080">.

----------------------------[ </font>CUT HERE <font color="#000080">]------------------------

        </font><font color="#FF0000"><b>Message </b></font><font color="#800000">1 </font><font color="#FF0000"><b>contains </b></font>a <font color="#FF0000"><b>unit to </b></font>display a pseudo <font color="#800000">3840 
</font>color Mode X <font color="#FF0000"><b>on </b></font>a standard VGA<font color="#000080">.  </font><font color="#FF0000"><b>Message </b></font><font color="#800000">2 </font><font color="#FF0000"><b>contains </b></font>a bare<font color="#000080">-</font>bone 
Targa viewer<font color="#000080">.  </font><font color="#FF0000"><b>Message </b></font><font color="#800000">3 </font><font color="#FF0000"><b>contains </b></font>a <font color="#FF0000"><b>program to </b></font>display all <font color="#800000">3840 
</font>colors <font color="#FF0000"><b>to </b></font>the screen <font color="#FF0000"><b>and </b></font>this short text description<font color="#000080">.  

        </font>A brief description <font color="#FF0000"><b>of </b></font>the procedures <font color="#FF0000"><b>in </b></font>the X3840 <font color="#FF0000"><b>unit 
</b></font>follow<font color="#000080">: 

</font>InitializeGraphics<font color="#000080">;

  </font>Initializes the <font color="#800000">3840 </font>color graphic mode<font color="#000080">.  </font>EnableScreen must be 
  called <font color="#FF0000"><b>to </b></font>view the <font color="#800000">3840 </font>colors<font color="#000080">.

</font>EnableScreen<font color="#000080">;

  </font>Enables <font color="#800000">3840 </font>colors<font color="#000080">.  </font>This <font color="#FF0000"><b>procedure </b></font>should be called <font color="#FF0000"><b>in </b></font>a 
  tight loop <font color="#FF0000"><b>in </b></font>order <font color="#FF0000"><b>to </b></font>properly display the colors<font color="#000080">.  </font>See included 
  programs <font color="#FF0000"><b>for </b></font>example<font color="#000080">. 

</font>Putpixel <font color="#000080">(</font>XCoord<font color="#000080">, </font>YCoord <font color="#000080">: </font>Integer<font color="#000080">; </font>Red<font color="#000080">, </font>Green<font color="#000080">, </font>Blue <font color="#000080">: </font>Byte<font color="#000080">); 

  </font>XCoord <font color="#FF0000"><b>is </b></font>an integer <font color="#FF0000"><b>in </b></font>the <font color="#FF0000"><b>set </b></font><font color="#800000">0 </font><font color="#000080">.. </font><font color="#800000">319.  </font>YCoord <font color="#FF0000"><b>is </b></font>an integer 
  <font color="#FF0000"><b>in </b></font>the <font color="#FF0000"><b>set </b></font><font color="#800000">0 </font><font color="#000080">.. </font><font color="#800000">199.  </font>Red<font color="#000080">, </font>Green<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>Blue specify the 
  corresponding color components <font color="#FF0000"><b>of </b></font>the pixel<font color="#000080">.  </font>Red <font color="#FF0000"><b>and </b></font>Green 
  must be <font color="#FF0000"><b>in </b></font>the <font color="#FF0000"><b>set </b></font><font color="#800000">0 </font><font color="#000080">.. </font><font color="#800000">15</font><font color="#000080">, </font>but Blue must be <font color="#FF0000"><b>in </b></font>the <font color="#FF0000"><b>set </b></font><font color="#800000">0 </font><font color="#000080">.. 
  </font><font color="#800000">14.  </font>No range checking <font color="#FF0000"><b>is </b></font>performed so you must make sure the 
  values <font color="#FF0000"><b>do not </b></font>stray outside these sets <font color="#FF0000"><b>or </b></font>unexpected results 
  will occur<font color="#000080">. 

</font>SetActivePage <font color="#000080">(</font>PageNumber <font color="#000080">: </font>Integer<font color="#000080">);
  
  </font>Sets the page <font color="#FF0000"><b>to </b></font>be written <font color="#FF0000"><b>to</b></font><font color="#000080">.  </font>There are <font color="#800000">2 </font>pages <font color="#000080">(</font><font color="#800000">0 </font><font color="#FF0000"><b>and </b></font><font color="#800000">1</font><font color="#000080">) 
  </font><font color="#FF0000"><b>for </b></font>use<font color="#000080">.

</font>SetDisplayPage <font color="#000080">(</font>PageNumber <font color="#000080">: </font>Integer<font color="#000080">);

  </font>Sets the page <font color="#FF0000"><b>to </b></font>be displayed<font color="#000080">.  </font>There are <font color="#800000">2 </font>pages <font color="#000080">(</font><font color="#800000">0 </font><font color="#FF0000"><b>and </b></font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>for 
  </b></font>use<font color="#000080">.

        </font>How <font color="#800000">3840 </font>color works<font color="#000080">: 
        </font>This mode <font color="#FF0000"><b>is </b></font>really just a <font color="#800000">256 </font>color mode <font color="#FF0000"><b>in </b></font>which the 
palette has been carefully selected <font color="#FF0000"><b>to </b></font>give <font color="#800000">16 </font>intensities <font color="#FF0000"><b>of </b></font>red 
<font color="#FF0000"><b>and </b></font>green<font color="#000080">, </font><font color="#FF0000"><b>and </b></font><font color="#800000">15 </font>intensities <font color="#FF0000"><b>of </b></font>blue<font color="#000080">.  </font>The red <font color="#FF0000"><b>and </b></font>blue colors 
are mixed <font color="#FF0000"><b>in </b></font>the palette <font color="#FF0000"><b>as </b></font>indices <font color="#800000">0 </font><font color="#000080">.. </font><font color="#800000">239</font><font color="#000080">, </font><font color="#FF0000"><b>and </b></font>green <font color="#FF0000"><b>as 
</b></font>indices <font color="#800000">240 </font><font color="#000080">.. </font><font color="#800000">255.  </font><font color="#FF0000"><b>To </b></font>get an effective <font color="#800000">3840 </font>colors<font color="#000080">, </font>the 
red<font color="#000080">/</font>blue mix <font color="#FF0000"><b>of </b></font>a pixel <font color="#FF0000"><b>is </b></font>placed <font color="#FF0000"><b>on </b></font>one page <font color="#FF0000"><b>and </b></font>the green <font color="#FF0000"><b>is 
</b></font>placed <font color="#FF0000"><b>on </b></font>another page <font color="#FF0000"><b>and </b></font>the screen <font color="#FF0000"><b>is </b></font>flipped quickly between 
the two pages<font color="#000080">.  </font><font color="#FF0000"><b>If </b></font>the pages are flipped quick enough<font color="#000080">, </font>your eye 
blends he colors together <font color="#FF0000"><b>and </b></font>sees <font color="#800000">3840 </font>colors <font color="#000080">(</font><font color="#800000">16</font>R <font color="#000080">* </font><font color="#800000">16</font>G <font color="#000080">* </font><font color="#800000">15</font>B<font color="#000080">) 
</font>instead <font color="#FF0000"><b>of </b></font>just <font color="#800000">256. 

        </font>The bare<font color="#000080">-</font>bone targa <font color="#FF0000"><b>file </b></font>viewer will only view <font color="#800000">16</font><font color="#000080">, </font><font color="#800000">24</font><font color="#000080">, </font><font color="#FF0000"><b>or 
</b></font><font color="#800000">32</font><font color="#000080">-</font>bit color RLE compressed files<font color="#000080">.  </font><font color="#800000">8</font><font color="#000080">-</font>Bit Grey scale <font color="#FF0000"><b>and </b></font>raw 
image files are <font color="#FF0000"><b>not </b></font>supported<font color="#000080">.  </font>I only tested it <font color="#FF0000"><b>on </b></font>a <font color="#800000">24</font><font color="#000080">-</font>bit 
image<font color="#000080">, </font>but I believe <font color="#800000">16 </font><font color="#FF0000"><b>and </b></font><font color="#800000">32</font><font color="#000080">-</font>bit should work alright also<font color="#000080">. 

                                                </font>Dave


</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0191.PAS">Original</a><b>]</b></p></body>
</html>
