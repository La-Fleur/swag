<html>
<head><title> "Screen Dump To File" by MARTIN RICHARDSON</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0098.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#000000"> <font color="#008000"><i>{
   DUMPSCR.PAS
   Demo to dump a 25 line screen to disk and then restore it
   By Martin Richardson
   (This code is Public Domain... Enjoy!)
 }
 </i></font><font color="#FF0000"><b>USES </b></font>CRT<font color="#000080">;

 </font><font color="#FF0000"><b>TYPE
    </b></font>ScreenArray <font color="#000080">= </font><font color="#FF0000"><b>ARRAY</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">25 </font><font color="#000080">* </font><font color="#800000">80</font><font color="#000080">] </font><font color="#FF0000"><b>OF </b></font>WORD<font color="#000080">;
    </font>ScreenPtr <font color="#000080">= ^</font>ScreenArray<font color="#000080">;

 </font><font color="#FF0000"><b>VAR
   </b></font>_Screen<font color="#000080">: </font>ScreenPtr<font color="#000080">;
   </font>fHandle<font color="#000080">: </font><font color="#FF0000"><b>FILE</b></font><font color="#000080">;
   </font>ScreenRows<font color="#000080">: </font>BYTE<font color="#000080">;

 </font><font color="#FF0000"><b>BEGIN
     IF </b></font><font color="#000080">(</font>LastMode <font color="#000080">= </font>Mono<font color="#000080">) </font><font color="#FF0000"><b>THEN
        </b></font>_Screen <font color="#000080">:= </font>PTR<font color="#000080">( </font><font color="#800000">$B000</font><font color="#000080">, </font><font color="#800000">0 </font><font color="#000080">)
     </font><font color="#FF0000"><b>ELSE
        </b></font>_Screen <font color="#000080">:= </font>PTR<font color="#000080">( </font><font color="#800000">$B800</font><font color="#000080">, </font><font color="#800000">0 </font><font color="#000080">);

     </font>ASSIGN<font color="#000080">( </font>fHandle<font color="#000080">, </font><font color="#800000">'DUMP.SCR' </font><font color="#000080">);

 </font><font color="#008000"><i>{ First we save the screen to the file DUMP.SCR }
     </i></font>REWRITE<font color="#000080">( </font>fHandle<font color="#000080">, </font><font color="#800000">1 </font><font color="#000080">);
     </font>BLOCKWRITE<font color="#000080">( </font>fHandle<font color="#000080">, </font>_Screen<font color="#000080">^, </font>SIZEOF<font color="#000080">( </font>_Screen<font color="#000080">^ ) );
     </font>CLOSE<font color="#000080">( </font>fHandle <font color="#000080">);

 </font><font color="#008000"><i>{ Now a little pause as we catch our breath }
     </i></font>CLRSCR<font color="#000080">;
     </font>WRITELN<font color="#000080">( </font><font color="#800000">'Press any key...' </font><font color="#000080">);
     </font><font color="#FF0000"><b>WHILE </b></font>READKEY <font color="#000080">= </font><font color="#800000">#0 </font><font color="#FF0000"><b>DO</b></font><font color="#000080">;

 </font><font color="#008000"><i>{ And finally we restore the screen from the file DUMP.SCR }
     </i></font>RESET<font color="#000080">( </font>fHandle<font color="#000080">, </font><font color="#800000">1 </font><font color="#000080">);
     </font>BLOCKREAD<font color="#000080">( </font>fHandle<font color="#000080">, </font>_Screen<font color="#000080">^, </font>SIZEOF<font color="#000080">( </font>_Screen<font color="#000080">^ ) );
     </font>CLOSE<font color="#000080">( </font>fHandle <font color="#000080">);

 </font><font color="#008000"><i>{ Another pause to view our handiwork }
     </i></font><font color="#FF0000"><b>WHILE </b></font>READKEY <font color="#000080">= </font><font color="#800000">#0 </font><font color="#FF0000"><b>DO</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>END</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0098.PAS">Original</a><b>]</b></p></body>
</html>
