<html>
<head><title> "MCGATUT.TXT" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0002.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#000000">                           MCGA Graphics Tutorial
                                 Lesson <font color="#800000">#1
                                </font>by Jim Cook

I<font color="#800000">'m not sure how this online tutorial will be received, but with your
</font>comments <font color="#FF0000"><b>and </b></font>feedback I plan <font color="#FF0000"><b>on </b></font>creating a full<font color="#000080">-</font>blown animation <font color="#FF0000"><b>package</b></font><font color="#000080">. </font>This
graphics <font color="#FF0000"><b>library </b></font>will be available <font color="#FF0000"><b>to </b></font>the <font color="#FF0000"><b>public </b></font>domain <font color="#FF0000"><b>and </b></font>will contain the
following abilities<font color="#000080">:

                </font>Setting<font color="#000080">/</font>Reading Pixels
                Drawing lines
                Saving<font color="#000080">/</font>Restoring areas <font color="#FF0000"><b>of </b></font>the screen
                Displaying PCX<font color="#000080">/</font>LBM files <font color="#FF0000"><b>to </b></font>the screen
                Spriting <font color="#000080">(</font>Display picture <font color="#FF0000"><b>with </b></font>transparent areas<font color="#000080">)
                </font>Palette control <font color="#000080">(</font>Smooth fades <font color="#FF0000"><b>to </b></font>black<font color="#000080">)
                </font>Page flipping

Before we<font color="#800000">'re done, you will have the tools to produce programs with rich,
</font>even photo<font color="#000080">-</font>realistic <font color="#000080">(</font><font color="#FF0000"><b>for </b></font>the resolution<font color="#000080">) </font>images <font color="#FF0000"><b>on </b></font>your PC<font color="#000080">.  </font>The necessary
hardware <font color="#FF0000"><b>is </b></font>a VGA card <font color="#FF0000"><b>and </b></font>monitor that<font color="#800000">'s it.  I'</font>ll be using Turbo <font color="#FF0000"><b>Pascal
</b></font>version <font color="#800000">6.0.  </font>Please holler <font color="#FF0000"><b>if </b></font>that will be a problem<font color="#000080">.  </font>I<font color="#800000">'m using it to
</font>create <font color="#FF0000"><b>inline </b></font>assembly<font color="#000080">.  </font>My alternatives are <font color="#FF0000"><b>inline </b></font>code <font color="#000080">(</font>yuk<font color="#000080">) </font><font color="#FF0000"><b>or </b></font>linking <font color="#FF0000"><b>in
external </b></font>assembly<font color="#000080">.  </font><font color="#FF0000"><b>For </b></font>speed <font color="#000080">(</font><font color="#FF0000"><b>and </b></font>actually ease<font color="#000080">) </font>the latter <font color="#FF0000"><b>is </b></font>better<font color="#000080">.  </font><font color="#FF0000"><b>If </b></font>I
receive three complaints against <font color="#800000">6.0</font><font color="#000080">, </font>I<font color="#800000">'ll use external assembly.

                                </font>What <font color="#FF0000"><b>is </b></font>MCGA<font color="#000080">?

</font>Multi<font color="#000080">-</font>Color Graphics <font color="#FF0000"><b>Array is </b></font>the video card that IBM built into it<font color="#800000">'s Model
25 </font><font color="#FF0000"><b>and </b></font><font color="#800000">30 </font>PS<font color="#000080">/</font><font color="#800000">2's.  It subsequently became a subset of the standard VGA
</font>adapter card<font color="#000080">.  </font>It has the distiction <font color="#FF0000"><b>of </b></font>being the first card <font color="#000080">(</font>excluding
Targa <font color="#FF0000"><b>and </b></font>other expensive cards<font color="#000080">) </font><font color="#FF0000"><b>to </b></font>display <font color="#800000">256 </font>colors at once <font color="#FF0000"><b>on </b></font>the
computer screen<font color="#000080">.  </font><font color="#FF0000"><b>To </b></font>us that meant cool games <font color="#FF0000"><b>and </b></font>neat pictures<font color="#000080">.  </font>The MCGA
addapter has added two new video modes <font color="#FF0000"><b>to </b></font>the PC world<font color="#000080">:

                </font>Mode <font color="#800000">$11        640</font>x480x2 colors
                Mode <font color="#800000">$13        320</font>x200x256 colors

Obviously<font color="#000080">, </font>we will deal <font color="#FF0000"><b>with </b></font>mode <font color="#800000">$13</font><font color="#000080">.  </font><font color="#FF0000"><b>If </b></font>we wanted <font color="#FF0000"><b>to </b></font>deal <font color="#FF0000"><b>with </b></font>two
colors<font color="#000080">, </font>we<font color="#800000">'d be programming a CGA.  So much for the history lesson...let'</font>s
dive <font color="#FF0000"><b>in</b></font><font color="#000080">.

</font>I<font color="#800000">'ve created a unit, MCGALib, that will contain all of our MCGA routines.
</font>The first two procedures we will concern ourselves <font color="#FF0000"><b>with </b></font>are setting the
graphics mode <font color="#FF0000"><b>and </b></font>setting a pixel<font color="#000080">.  </font>The MCGALib <font color="#FF0000"><b>is </b></font>followed by a test
<font color="#FF0000"><b>program </b></font>that <font color="#FF0000"><b>uses </b></font>the two procedures<font color="#000080">:

</font><font color="#FF0000"><b>Unit </b></font>MCGALib<font color="#000080">;

</font><font color="#FF0000"><b>interface

Procedure </b></font>SetGraphMode <font color="#000080">(</font>Num<font color="#000080">:</font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Procedure </b></font>SetPixel     <font color="#000080">(</font>X<font color="#000080">,</font>Y<font color="#000080">:</font>Integer<font color="#000080">;</font>Color<font color="#000080">:</font>Byte<font color="#000080">);

</font><font color="#FF0000"><b>implementation

var
  </b></font>ScreenWide  <font color="#000080">:  </font>Integer<font color="#000080">;
  </font>ScreenAddr  <font color="#000080">:  </font>Word<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>SetGraphMode <font color="#000080">(</font>Num<font color="#000080">:</font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>begin
  asm
    </b></font><font color="#FF00FF">mov al,Num
    mov ah,0
    int 10h
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>Case </b></font>Num <font color="#FF0000"><b>of
    </b></font><font color="#800000">$13 </font><font color="#000080">: </font>ScreenWide <font color="#000080">:= </font><font color="#800000">320</font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>ScreenAddr <font color="#000080">:= </font><font color="#800000">$A000</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{
Function PixelAddr (X,Y:Word) : Word;
begin
  PixelAddr := Y * ScreenWide + X;
end;

Procedure SetPixel (X,Y:Integer;Color:Byte);
var
  Ofs    :  Word;
begin
  Ofs := PixelAddr (X,Y);
  Mem [ScreenAddr:Ofs] := Color;
end;
}

</i></font><font color="#FF0000"><b>Procedure </b></font>SetPixel <font color="#000080">(</font>X<font color="#000080">,</font>Y<font color="#000080">:</font>Integer<font color="#000080">;</font>Color<font color="#000080">:</font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>begin
  asm
    </b></font><font color="#FF00FF">push ds
    mov  ax,ScreenAddr
    mov  ds,ax

    mov  ax,Y
    mov  bx,320
    mul  bx
    mov  bx,X
    add  bx,ax

    mov  al,Color
    mov  byte ptr ds:[bx],al
    pop  ds
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Begin
End</b></font><font color="#000080">.

</font>This <font color="#FF0000"><b>is </b></font>the test <font color="#FF0000"><b>program to </b></font>make sure it<font color="#800000">'s working...

</font><font color="#FF0000"><b>Program </b></font>MCGATest<font color="#000080">;

</font><font color="#FF0000"><b>uses
  </b></font>Crt<font color="#000080">,</font>Dos<font color="#000080">,</font>MCGALib<font color="#000080">;

</font><font color="#FF0000"><b>var
  </b></font>Stop<font color="#000080">,
  </font>Start  <font color="#000080">:  </font>LongInt<font color="#000080">;
  </font>Regs   <font color="#000080">:  </font>Registers<font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Tick <font color="#000080">: </font>LongInt<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Regs<font color="#000080">.</font>ah <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>Intr <font color="#000080">(</font><font color="#800000">$1A</font><font color="#000080">,</font>regs<font color="#000080">);
= </font>egs<font color="#000080">.</font>cx hl <font color="#800000">16  </font>Rgs<font color="#000080">.</font>dx<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Control<font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>I<font color="#000080">,</font>J <font color="#000080">:  </font>Integr<font color="#000080">;</font><font color="#FF0000"><b>begin
  </b></font>Start <font color="#000080">:= </font>ic<font color="#000080">;
  </font>Fr I <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">199 </font><font color="#FF0000"><b>do
  For </b></font>J  SetPixe <font color="#000080">(</font>J<font color="#000080">,</font>I<font color="#000080">,</font>Random<font color="#000080">(</font><font color="#800000">256</font><font color="#000080">));
 </font>Stop <font color="#000080">:= </font>Tick<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font>Pocdure Closing<font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>Ch    <font color="#000080">:  </font>Chr<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Repet <font color="#FF0000"><b>Until </b></font>Keypressed<font color="#000080">;
  </font><font color="#FF0000"><b>While </b></font>Keypressed <font color="#FF0000"><b>do </b></font>Ch<font color="#000080">:= </font>Reake<font color="#000080">;
  </font>TextMode <font color="#000080">(</font><font color="#800000">3</font><font color="#000080">);
</font>ook <font color="#800000">'(Stop-Start),' </font>ticks <font color="#FF0000"><b>or </b></font><font color="#000080">,(</font>Stop<font color="#000080">-</font>Start<font color="#000080">)/</font><font color="#800000">182</font><font color="#000080">:</font><font color="#800000">4</font><font color="#000080">:</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">'
 </font>seconds<font color="#000080">!</font><font color="#800000">');
</font>nd<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Init<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>SetGaphMode <font color="#000080">(</font><font color="#800000">$13</font><font color="#000080">);
 </font>Randoiz<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Begin
 </b></font>Init
  Control<font color="#000080">;
  </font>Cosing<font color="#000080">;
</font>e where these listings coul get unbearably long <font color="#FF0000"><b>in </b></font>time<font color="#000080">.  </font>I<font color="#800000">'l
</font>explore a few ays I can get this information <font color="#FF0000"><b>to </b></font>ya<font color="#800000">'ll without takingup too
</font>much pace<font color="#000080">. </font>Iwould like you tomake sue this routine works<font color="#000080">, </font>ust <font color="#FF0000"><b>in case
</b></font>you ou graphis card<font color="#000080">. </font>You may notce two SetPxel
procedures <font color="#FF0000"><b>in </b></font>the MCGALib<font color="#000080">, </font>one <font color="#FF0000"><b>is </b></font>commented <font color="#FF0000"><b>out</b></font><font color="#000080">.  </font>Remove he comments<font color="#000080">,
</font>comment up the uncommented SetPixel <font color="#FF0000"><b>and </b></font>run the test <font color="#FF0000"><b>program </b></font>aain<font color="#000080">.  </font>Notice
the speed degradation<font color="#000080">.  </font>Linking <font color="#FF0000"><b>in </b></font>raw assembly will eve improve upon the
speed <font color="#FF0000"><b>of </b></font>the <font color="#FF0000"><b>inline </b></font>assembly<font color="#000080">.
</font>Please take the time <font color="#FF0000"><b>to </b></font>study each <font color="#FF0000"><b>procedure and </b></font>ASK ANY QUESTIONS tht you
may have<font color="#000080">, </font>even <font color="#FF0000"><b>if </b></font>it doesn<font color="#800000">'t relate to the graphics routines.  I'</font>m cetain I
<font color="#FF0000"><b>do not </b></font>want <font color="#FF0000"><b>to </b></font>get pulled off track by any discussions about STYLE<font color="#000080">,</font>ur critique
 <font color="#FF0000"><b>for </b></font>others <font color="#FF0000"><b>to </b></font>learn rom<font color="#000080">.

                              </font>Coming next time

I think a discussio <font color="#FF0000"><b>of </b></font>video memory <font color="#FF0000"><b>is </b></font>paramount<font color="#000080">.  </font>Possibly vertical <font color="#FF0000"><b>and
</b></font>horizontal lines<font color="#000080">, </font><font color="#FF0000"><b>if </b></font>spce permits<font color="#000080">.

</font>Happy grafx
jim

<font color="#000080">--- </font>QuickBBS <font color="#800000">2.75
 </font><font color="#000080">* </font>Origin<font color="#000080">: </font>Quantum Leap<font color="#000080">.. (</font><font color="#800000">512</font><font color="#000080">)</font><font color="#800000">333</font><font color="#000080">-</font><font color="#800000">5360  </font>HST<font color="#000080">/</font>DS <font color="#000080">(</font><font color="#800000">1</font><font color="#000080">:</font><font color="#800000">387</font><font color="#000080">/</font><font color="#800000">307</font><font color="#000080">)
</font>                                                                                                                     
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0002.PAS">Original</a><b>]</b></p></body>
</html>
