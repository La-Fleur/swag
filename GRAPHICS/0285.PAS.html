<html>
<head><title> ""transparent sphere" routine" by SCOTT TUNSTALL</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0285.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
=================================================================

PROGRAM NAME : NEWLENS.PAS

AUTHOR       : Bas Van Gaalen (originally for GFXFX2)
               Scott Tunstall (for KOJAKVGA 3.3) in August 1997.

NOTES        :

This is Bas Van Gaalen's LENS.PAS &quot;transparent sphere&quot; routine
converted to KOJAKVGA 3.3. Only the data tables and
initialisation code remain from the GFXFX2 version.

The rest of the graphics code has been changed to suit my unit.

Why did I convert it? 'Cos I like the sphere!

The lens draw routine is now converted to 90% assembler; I HATE
slow Pascal routines!


What you do is specify your 320 x 200 x 256 colour PCX file name
as the command line parameter and watch the sphere bounce around.
Hope you enjoy it...
     Scott.


P.S.
    You can get my KOJAKVGA 3.3 unit from June 97's GRAPHICS
    section.


DISCLAIMER:
There's no way this should damage your PC -unless you have a
286 processor or an EGA graphics card. However, use this at your
own risk!

-----------------------------------------------------------------
}






</i></font><font color="#FF0000"><b>program </b></font>Newlens<font color="#000080">;

</font><font color="#008000"><i>{ Lens effect (Wierd? Yeah!) By Bas van Gaalen,
  Update by Scott Tunstall.
  If you have a fast computer, try using a transparent sprite... }

</i></font><font color="#FF0000"><b>uses </b></font>KOJAKVGA<font color="#000080">,</font>crt<font color="#000080">;

</font><font color="#FF0000"><b>const
  </b></font>radius<font color="#000080">=</font><font color="#800000">30</font><font color="#000080">; </font><font color="#008000"><i>{ sphere radius }
  </i></font>maxpoints<font color="#000080">=</font><font color="#800000">3000</font><font color="#000080">; </font><font color="#008000"><i>{ maximum number of points }
  </i></font>xs<font color="#000080">=</font><font color="#800000">60</font><font color="#000080">;
  </font>ys<font color="#000080">=</font><font color="#800000">60</font><font color="#000080">; </font><font color="#008000"><i>{ size is two times sphere-radius }

  </i></font>ptab<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">=( </font><font color="#008000"><i>{ parabole table for bounce }
    </i></font><font color="#800000">123</font><font color="#000080">,</font><font color="#800000">121</font><font color="#000080">,</font><font color="#800000">119</font><font color="#000080">,</font><font color="#800000">117</font><font color="#000080">,</font><font color="#800000">115</font><font color="#000080">,</font><font color="#800000">114</font><font color="#000080">,</font><font color="#800000">112</font><font color="#000080">,</font><font color="#800000">110</font><font color="#000080">,</font><font color="#800000">108</font><font color="#000080">,</font><font color="#800000">106</font><font color="#000080">,</font><font color="#800000">104</font><font color="#000080">,</font><font color="#800000">103</font><font color="#000080">,</font><font color="#800000">101</font><font color="#000080">,</font><font color="#800000">99</font><font color="#000080">,</font><font color="#800000">97</font><font color="#000080">,</font><font color="#800000">96</font><font color="#000080">,</font><font color="#800000">94</font><font color="#000080">,</font><font color="#800000">92</font><font color="#000080">,</font><font color="#800000">91</font><font color="#000080">,
    </font><font color="#800000">89</font><font color="#000080">,</font><font color="#800000">87</font><font color="#000080">,</font><font color="#800000">86</font><font color="#000080">,</font><font color="#800000">84</font><font color="#000080">,</font><font color="#800000">82</font><font color="#000080">,</font><font color="#800000">81</font><font color="#000080">,</font><font color="#800000">79</font><font color="#000080">,</font><font color="#800000">78</font><font color="#000080">,</font><font color="#800000">76</font><font color="#000080">,</font><font color="#800000">75</font><font color="#000080">,</font><font color="#800000">73</font><font color="#000080">,</font><font color="#800000">72</font><font color="#000080">,</font><font color="#800000">70</font><font color="#000080">,</font><font color="#800000">69</font><font color="#000080">,</font><font color="#800000">67</font><font color="#000080">,</font><font color="#800000">66</font><font color="#000080">,</font><font color="#800000">64</font><font color="#000080">,</font><font color="#800000">63</font><font color="#000080">,</font><font color="#800000">62</font><font color="#000080">,</font><font color="#800000">60</font><font color="#000080">,</font><font color="#800000">59</font><font color="#000080">,</font><font color="#800000">58</font><font color="#000080">,</font><font color="#800000">56</font><font color="#000080">,
    </font><font color="#800000">55</font><font color="#000080">,</font><font color="#800000">54</font><font color="#000080">,</font><font color="#800000">52</font><font color="#000080">,</font><font color="#800000">51</font><font color="#000080">,</font><font color="#800000">50</font><font color="#000080">,</font><font color="#800000">49</font><font color="#000080">,</font><font color="#800000">48</font><font color="#000080">,</font><font color="#800000">46</font><font color="#000080">,</font><font color="#800000">45</font><font color="#000080">,</font><font color="#800000">44</font><font color="#000080">,</font><font color="#800000">43</font><font color="#000080">,</font><font color="#800000">42</font><font color="#000080">,</font><font color="#800000">41</font><font color="#000080">,</font><font color="#800000">39</font><font color="#000080">,</font><font color="#800000">38</font><font color="#000080">,</font><font color="#800000">37</font><font color="#000080">,</font><font color="#800000">36</font><font color="#000080">,</font><font color="#800000">35</font><font color="#000080">,</font><font color="#800000">34</font><font color="#000080">,</font><font color="#800000">33</font><font color="#000080">,</font><font color="#800000">32</font><font color="#000080">,</font><font color="#800000">31</font><font color="#000080">,</font><font color="#800000">30</font><font color="#000080">,
    </font><font color="#800000">29</font><font color="#000080">,</font><font color="#800000">28</font><font color="#000080">,</font><font color="#800000">27</font><font color="#000080">,</font><font color="#800000">26</font><font color="#000080">,</font><font color="#800000">26</font><font color="#000080">,</font><font color="#800000">25</font><font color="#000080">,</font><font color="#800000">24</font><font color="#000080">,</font><font color="#800000">23</font><font color="#000080">,</font><font color="#800000">22</font><font color="#000080">,</font><font color="#800000">21</font><font color="#000080">,</font><font color="#800000">21</font><font color="#000080">,</font><font color="#800000">20</font><font color="#000080">,</font><font color="#800000">19</font><font color="#000080">,</font><font color="#800000">18</font><font color="#000080">,</font><font color="#800000">17</font><font color="#000080">,</font><font color="#800000">17</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">14</font><font color="#000080">,</font><font color="#800000">13</font><font color="#000080">,</font><font color="#800000">13</font><font color="#000080">,</font><font color="#800000">12</font><font color="#000080">,
    </font><font color="#800000">12</font><font color="#000080">,</font><font color="#800000">11</font><font color="#000080">,</font><font color="#800000">10</font><font color="#000080">,</font><font color="#800000">10</font><font color="#000080">,</font><font color="#800000">9</font><font color="#000080">,</font><font color="#800000">9</font><font color="#000080">,</font><font color="#800000">8</font><font color="#000080">,</font><font color="#800000">8</font><font color="#000080">,</font><font color="#800000">7</font><font color="#000080">,</font><font color="#800000">7</font><font color="#000080">,</font><font color="#800000">6</font><font color="#000080">,</font><font color="#800000">6</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,
    </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">6</font><font color="#000080">,</font><font color="#800000">6</font><font color="#000080">,
    </font><font color="#800000">7</font><font color="#000080">,</font><font color="#800000">7</font><font color="#000080">,</font><font color="#800000">7</font><font color="#000080">,</font><font color="#800000">8</font><font color="#000080">,</font><font color="#800000">8</font><font color="#000080">,</font><font color="#800000">9</font><font color="#000080">,</font><font color="#800000">9</font><font color="#000080">,</font><font color="#800000">10</font><font color="#000080">,</font><font color="#800000">11</font><font color="#000080">,</font><font color="#800000">11</font><font color="#000080">,</font><font color="#800000">12</font><font color="#000080">,</font><font color="#800000">12</font><font color="#000080">,</font><font color="#800000">13</font><font color="#000080">,</font><font color="#800000">14</font><font color="#000080">,</font><font color="#800000">14</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">17</font><font color="#000080">,</font><font color="#800000">18</font><font color="#000080">,</font><font color="#800000">19</font><font color="#000080">,</font><font color="#800000">19</font><font color="#000080">,</font><font color="#800000">20</font><font color="#000080">,</font><font color="#800000">21</font><font color="#000080">,</font><font color="#800000">22</font><font color="#000080">,
    </font><font color="#800000">23</font><font color="#000080">,</font><font color="#800000">23</font><font color="#000080">,</font><font color="#800000">24</font><font color="#000080">,</font><font color="#800000">25</font><font color="#000080">,</font><font color="#800000">26</font><font color="#000080">,</font><font color="#800000">27</font><font color="#000080">,</font><font color="#800000">28</font><font color="#000080">,</font><font color="#800000">29</font><font color="#000080">,</font><font color="#800000">30</font><font color="#000080">,</font><font color="#800000">31</font><font color="#000080">,</font><font color="#800000">32</font><font color="#000080">,</font><font color="#800000">33</font><font color="#000080">,</font><font color="#800000">34</font><font color="#000080">,</font><font color="#800000">35</font><font color="#000080">,</font><font color="#800000">36</font><font color="#000080">,</font><font color="#800000">37</font><font color="#000080">,</font><font color="#800000">38</font><font color="#000080">,</font><font color="#800000">39</font><font color="#000080">,</font><font color="#800000">40</font><font color="#000080">,</font><font color="#800000">41</font><font color="#000080">,</font><font color="#800000">42</font><font color="#000080">,</font><font color="#800000">43</font><font color="#000080">,</font><font color="#800000">44</font><font color="#000080">,
    </font><font color="#800000">46</font><font color="#000080">,</font><font color="#800000">47</font><font color="#000080">,</font><font color="#800000">48</font><font color="#000080">,</font><font color="#800000">49</font><font color="#000080">,</font><font color="#800000">51</font><font color="#000080">,</font><font color="#800000">52</font><font color="#000080">,</font><font color="#800000">53</font><font color="#000080">,</font><font color="#800000">54</font><font color="#000080">,</font><font color="#800000">56</font><font color="#000080">,</font><font color="#800000">57</font><font color="#000080">,</font><font color="#800000">58</font><font color="#000080">,</font><font color="#800000">60</font><font color="#000080">,</font><font color="#800000">61</font><font color="#000080">,</font><font color="#800000">62</font><font color="#000080">,</font><font color="#800000">64</font><font color="#000080">,</font><font color="#800000">65</font><font color="#000080">,</font><font color="#800000">67</font><font color="#000080">,</font><font color="#800000">68</font><font color="#000080">,</font><font color="#800000">69</font><font color="#000080">,</font><font color="#800000">71</font><font color="#000080">,</font><font color="#800000">72</font><font color="#000080">,</font><font color="#800000">74</font><font color="#000080">,</font><font color="#800000">75</font><font color="#000080">,
    </font><font color="#800000">77</font><font color="#000080">,</font><font color="#800000">78</font><font color="#000080">,</font><font color="#800000">80</font><font color="#000080">,</font><font color="#800000">82</font><font color="#000080">,</font><font color="#800000">83</font><font color="#000080">,</font><font color="#800000">85</font><font color="#000080">,</font><font color="#800000">86</font><font color="#000080">,</font><font color="#800000">88</font><font color="#000080">,</font><font color="#800000">90</font><font color="#000080">,</font><font color="#800000">91</font><font color="#000080">,</font><font color="#800000">93</font><font color="#000080">,</font><font color="#800000">95</font><font color="#000080">,</font><font color="#800000">96</font><font color="#000080">,</font><font color="#800000">98</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">102</font><font color="#000080">,</font><font color="#800000">103</font><font color="#000080">,</font><font color="#800000">105</font><font color="#000080">,</font><font color="#800000">107</font><font color="#000080">,</font><font color="#800000">109</font><font color="#000080">,</font><font color="#800000">111</font><font color="#000080">,
    </font><font color="#800000">113</font><font color="#000080">,</font><font color="#800000">114</font><font color="#000080">,</font><font color="#800000">116</font><font color="#000080">,</font><font color="#800000">118</font><font color="#000080">,</font><font color="#800000">120</font><font color="#000080">,</font><font color="#800000">122</font><font color="#000080">,</font><font color="#800000">124</font><font color="#000080">,</font><font color="#800000">126</font><font color="#000080">);

</font><font color="#FF0000"><b>type
  </b></font>parastruc<font color="#000080">=</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font>xs<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">..</font>ys<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>shortint<font color="#000080">;

</font><font color="#FF0000"><b>var
  </b></font>para<font color="#000080">:</font>parastruc<font color="#000080">;
  </font>pal<font color="#000080">:</font>paletteType<font color="#000080">;
  </font>virscr<font color="#000080">,</font>bckscr<font color="#000080">:</font>pointer<font color="#000080">;

</font><font color="#FF0000"><b>const
  </b></font>paraptr<font color="#000080">:</font>pointer<font color="#000080">=@</font>para<font color="#000080">;


</font><font color="#FF0000"><b>procedure </b></font>initialize<font color="#000080">;
</font><font color="#FF0000"><b>const
  </b></font>step<font color="#000080">=</font><font color="#800000">0.035</font><font color="#000080">; </font><font color="#008000"><i>{ working step-size for a radius of 30 }
</i></font><font color="#FF0000"><b>var
  </b></font>alpha<font color="#000080">,</font>beta<font color="#000080">:</font>real<font color="#000080">;
  </font>r<font color="#000080">,</font>x<font color="#000080">,</font>y<font color="#000080">,</font>z<font color="#000080">:</font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>writeln<font color="#000080">(</font><font color="#800000">'Calculating hemi-sphere data. Can take a few secs...'</font><font color="#000080">);
  </font>fillchar<font color="#000080">(</font>para<font color="#000080">,</font>sizeof<font color="#000080">(</font>para<font color="#000080">),</font><font color="#800000">0</font><font color="#000080">);
  </font>alpha<font color="#000080">:=</font>pi<font color="#000080">;
  </font><font color="#FF0000"><b>while </b></font>alpha<font color="#000080">&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>do begin
    </b></font>beta<font color="#000080">:=</font>pi<font color="#000080">;
    </font><font color="#FF0000"><b>while </b></font>beta<font color="#000080">&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>do begin
      </b></font>x<font color="#000080">:=</font>radius<font color="#000080">+</font>round<font color="#000080">(</font>radius<font color="#000080">*</font>cos<font color="#000080">(</font>alpha<font color="#000080">)*</font>sin<font color="#000080">(</font>beta<font color="#000080">));
      </font>y<font color="#000080">:=</font>radius<font color="#000080">+</font>round<font color="#000080">(</font><font color="#800000">0.833</font><font color="#000080">*</font>radius<font color="#000080">*</font>cos<font color="#000080">(</font>beta<font color="#000080">));
      </font>z<font color="#000080">:=</font>round<font color="#000080">(</font>radius<font color="#000080">*</font>sin<font color="#000080">(</font>alpha<font color="#000080">)*</font>sin<font color="#000080">(</font>beta<font color="#000080">));
      </font>para<font color="#000080">[</font>x<font color="#000080">,</font>y<font color="#000080">]:=(</font>radius<font color="#000080">-</font>z<font color="#000080">) </font><font color="#FF0000"><b>shr </b></font><font color="#800000">1</font><font color="#000080">;
      </font>beta<font color="#000080">:=</font>beta<font color="#000080">-</font>step<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>alpha<font color="#000080">:=</font>alpha<font color="#000080">-</font>step<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#008000"><i>{ Bas said: Anyone brainy enough could rewrite this to assembler,
  that would speed up things considerably.


  So (ahem) seeing as I'm sad enough to do things like that..
  I did. ;)

  Sickening isn't it: all that assembler!

}



{ Bas's original code: }

{procedure displaypara(x,y:word);
var p:parastruc; i,j:word;
begin
  for i:=x to x+xs-1 do for j:=y to y+ys-1 do
    mem[seg(virscr^):j*320+i]:=
    mem[seg(virscr^):(j-para[i-x,j-y])*320+i+para[i-x,j-y]];
end;}



{ And the (mostly) assembler equivalent : }

</i></font><font color="#FF0000"><b>procedure </b></font>displaypara<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">:</font>word<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>p<font color="#000080">:</font>parastruc<font color="#000080">;
    </font>short<font color="#000080">: </font>shortint<font color="#000080">;
    </font>i<font color="#000080">,</font>j<font color="#000080">:</font>word<font color="#000080">;

</font><font color="#FF0000"><b>begin
     for </b></font>i<font color="#000080">:=</font>x <font color="#FF0000"><b>to </b></font>x<font color="#000080">+</font>xs<font color="#000080">-</font><font color="#800000">1 </font><font color="#FF0000"><b>do
     for </b></font>j<font color="#000080">:=</font>y <font color="#FF0000"><b>to </b></font>y<font color="#000080">+</font>ys<font color="#000080">-</font><font color="#800000">1 </font><font color="#FF0000"><b>do
         begin

         </b></font>short<font color="#000080">:=</font>para<font color="#000080">[</font>i<font color="#000080">-</font>x<font color="#000080">,</font>j<font color="#000080">-</font>y<font color="#000080">];
         </font><font color="#FF0000"><b>asm
         </b></font><font color="#FF00FF">les di,virscr
         mov dx,es          </font><font color="#008000"><i>{ Save ES in DX }

         </i></font><font color="#FF00FF">mov ax,j
         mov cx,ax
         shl ax,8           </font><font color="#008000"><i>{ J * 256 }
         </i></font><font color="#FF00FF">shl cx,6           </font><font color="#008000"><i>{ J * 64 }
         </i></font><font color="#FF00FF">add ax,cx          </font><font color="#008000"><i>{ = J * 320 }
         </i></font><font color="#FF00FF">add ax,i           </font><font color="#008000"><i>{ + I }
         </i></font><font color="#FF00FF">mov di,ax          </font><font color="#008000"><i>{ DI = AX }

         </i></font><font color="#FF00FF">push es        </font><font color="#008000"><i>{ Got to save es and di onto the stack }
         </i></font><font color="#FF00FF">push di        </font><font color="#008000"><i>{ as they will be corrupted }

         </i></font><font color="#FF00FF">mov ax,j       </font><font color="#008000"><i>{ AX = J }
         </i></font><font color="#FF00FF">xor bh,bh
         mov bl,short
         sub ax,bx      </font><font color="#008000"><i>{ J - Para[i-x,j-y] }

         </i></font><font color="#FF00FF">mov cx,ax      </font><font color="#008000"><i>{ J * 320, see above please }
         </i></font><font color="#FF00FF">shl ax,8
         shl cx,6
         add ax,cx
         add ax,i       </font><font color="#008000"><i>{ Add I too }

         </i></font><font color="#FF00FF">add ax,bx      </font><font color="#008000"><i>{ Mind take into account Para[i-x,j-y] ! }
         </i></font><font color="#FF00FF">xchg ax,bx     </font><font color="#008000"><i>{ I want BX to be the offset }

         </i></font><font color="#FF00FF">mov es,dx        </font><font color="#008000"><i>{ Restore ES }
         </i></font><font color="#FF00FF">mov al,[es:bx]   </font><font color="#008000"><i>{ Read byte from screen }

         </i></font><font color="#FF00FF">pop di           </font><font color="#008000"><i>{ And now restore the screen pointer }
         </i></font><font color="#FF00FF">pop es

         mov [es:di],al   </font><font color="#008000"><i>{ Store new byte. }


         </i></font><font color="#FF0000"><b>end
     end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;








</font><font color="#FF0000"><b>var </b></font>di<font color="#000080">:</font>shortint<font color="#000080">; </font>i<font color="#000080">:</font>integer<font color="#000080">; </font>idx<font color="#000080">:</font>byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>initialize<font color="#000080">;

  </font>initVGAMode<font color="#000080">;
  </font>bckscr<font color="#000080">:=</font>New64KBitmap<font color="#000080">;
  </font>UseBitmap<font color="#000080">(</font>bckscr<font color="#000080">);
  </font>Cls<font color="#000080">;

  </font>LoadPCX<font color="#000080">(</font>paramstr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">),</font>pal<font color="#000080">);
  </font>UsePalette<font color="#000080">(</font>pal<font color="#000080">);

  </font>ShowAllBitmap<font color="#000080">(</font>bckscr<font color="#000080">);

  </font>VirScr<font color="#000080">:=</font>New64KBitmap<font color="#000080">;
  </font>UseBitmap<font color="#000080">(</font>VirScr<font color="#000080">);
  </font>Cls<font color="#000080">;


  </font>i<font color="#000080">:=</font><font color="#800000">30</font><font color="#000080">;
  </font>idx<font color="#000080">:=</font><font color="#800000">128</font><font color="#000080">;
  </font>di<font color="#000080">:=</font><font color="#800000">2</font><font color="#000080">;

  </font><font color="#FF0000"><b>repeat
    </b></font>CopyBitmap<font color="#000080">(</font>bckscr<font color="#000080">,</font>virscr<font color="#000080">);
    </font>UseBitmap<font color="#000080">(</font>virscr<font color="#000080">);
    </font>displaypara<font color="#000080">(</font>i<font color="#000080">,</font><font color="#800000">15</font><font color="#000080">+</font>ptab<font color="#000080">[</font>idx<font color="#000080">]); </font>inc<font color="#000080">(</font>idx<font color="#000080">,</font><font color="#800000">3</font><font color="#000080">);

    </font>inc<font color="#000080">(</font>i<font color="#000080">,</font>di<font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>i<font color="#000080">&lt;</font><font color="#800000">25</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>i<font color="#000080">+</font>xs<font color="#000080">&gt;</font><font color="#800000">295</font><font color="#000080">) </font><font color="#FF0000"><b>then
       </b></font>di<font color="#000080">:=-</font>di<font color="#000080">;

</font><font color="#008000"><i>{ Removing the VWAIT could cause faster computers (P200s)
  to spout flames &lt;grin&gt; as the sphere will be drawn VERY quickly!
}

    </i></font>Vwait<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
    </font>CopyBitmap<font color="#000080">(</font>virscr<font color="#000080">,</font>ptr<font color="#000080">(</font><font color="#800000">$a000</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">));
  </font><font color="#FF0000"><b>until </b></font>keypressed<font color="#000080">;

  </font>freebitmap<font color="#000080">(</font>virscr<font color="#000080">);
  </font>freebitmap<font color="#000080">(</font>bckscr<font color="#000080">);

</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0285.PAS">Original</a><b>]</b></p></body>
</html>
