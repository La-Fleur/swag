<html>
<head><title> "VGA 640X480x16" by OLAF BARTELT</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0121.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
 NV&gt;     Could somebody tell me how to use mode 640x480x16? I
 NV&gt; don't mean using     it with int 10, 'cause it's too slow,
 NV&gt; but writing directly to VGA     memory. So how do I draw a
 NV&gt; pixel and how do I read a pixel?
well, you set the mode with:

      ASM MOV AX, 12h; INT 10h; END;

and then draw a pixel with: }

</i></font><font color="#FF0000"><b>PROCEDURE </b></font>plot_640x480x16<font color="#000080">(</font>x<font color="#000080">, </font>y <font color="#000080">: </font>WORD<font color="#000080">; </font>c <font color="#000080">: </font>BYTE<font color="#000080">); </font><font color="#FF0000"><b>ASSEMBLER</b></font><font color="#000080">;
</font><font color="#FF0000"><b>ASM
  </b></font><font color="#008000"><i>{$IFDEF DPMI}
  </i></font><font color="#FF00FF">MOV ES, SEGA000
  </font><font color="#008000"><i>{$ELSE}
  </i></font><font color="#FF00FF">MOV AX, $A000
  MOV ES, AX
  </font><font color="#008000"><i>{$ENDIF}
  </i></font><font color="#FF00FF">MOV DI, x
  MOV CX, DI
  SHR DI, 3
  MOV AX, 80
  MUL y
  ADD DI, AX
  AND CL, $07
  MOV AH, $80
  SHR AH, CL
  MOV AL, $08
  MOV DX, $03CE
  OUT DX, AX
  MOV AL, c
  MOV AH, [ES:DI]
  MOV [ES:DI], AL
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;


</font><font color="#008000"><i>{ and read a pixel with: }


</i></font><font color="#FF0000"><b>FUNCTION </b></font>point_640x480x16<font color="#000080">(</font>x<font color="#000080">, </font>y <font color="#000080">: </font>WORD<font color="#000080">) : </font>BYTE<font color="#000080">; </font><font color="#FF0000"><b>ASSEMBLER</b></font><font color="#000080">;
</font><font color="#FF0000"><b>ASM
  </b></font><font color="#FF00FF">MOV  AX, 80
  MUL  y
  MOV  SI, x
  MOV  CX, SI
  SHR  SI, 3
  ADD  SI, AX
  AND  CL, $07
  XOR  CL, $07
  MOV  CH, 1
  SHL  CH, CL
  </font><font color="#008000"><i>{$IFDEF DPMI}
  </i></font><font color="#FF00FF">MOV  ES, SEGA000
  </font><font color="#008000"><i>{$ELSE}
  </i></font><font color="#FF00FF">MOV  AX, $A000
  MOV  ES, AX
  </font><font color="#008000"><i>{$ENDIF}
  </i></font><font color="#FF00FF">MOV  DX, $03CE
  MOV  AX, 772
  XOR  BL, BL
@gp1:
  OUT  DX, AX
  MOV  BH, ES:[SI]
  AND  BH, CH
  NEG  BH
  ROL  BX, $0001
  DEC  AH
  JGE  @gp1
  MOV  AL, BL
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0121.PAS">Original</a><b>]</b></p></body>
</html>
