<html>
<head><title> "Gif decoder" by PAUL HURST</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0196.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{Well here's a simple gif decoder for everyone:}

{
GIF Decompressor:
DECGIF.BAS by Rich Geldreich March 1992
DECGIF.PAS translated to Pascal, Paul Hurst 1995
}
 
</i></font><font color="#FF0000"><b>Uses </b></font>Crt<font color="#000080">;
</font><font color="#FF0000"><b>Const
  </b></font>BufferLength <font color="#000080">= </font><font color="#800000">18000</font><font color="#000080">;

</font><font color="#FF0000"><b>Var
  </b></font>ByteBuffer<font color="#000080">: </font>Byte<font color="#000080">;
  </font>Powers<font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">8</font><font color="#000080">] </font><font color="#FF0000"><b>Of </b></font>Integer<font color="#000080">;
  </font>Prefix<font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">4096</font><font color="#000080">] </font><font color="#FF0000"><b>Of </b></font>Integer<font color="#000080">;
  </font>Suffix<font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">4096</font><font color="#000080">] </font><font color="#FF0000"><b>Of </b></font>Integer<font color="#000080">;
  </font>OutCode<font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">1024</font><font color="#000080">] </font><font color="#FF0000"><b>Of </b></font>Integer<font color="#000080">;
  </font>MaxCodes<font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">12</font><font color="#000080">] </font><font color="#FF0000"><b>Of </b></font>Integer<font color="#000080">;
  </font>Powers2<font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">16</font><font color="#000080">] </font><font color="#FF0000"><b>Of </b></font>Integer<font color="#000080">;
  </font>CodeMask<font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">8</font><font color="#000080">] </font><font color="#FF0000"><b>Of </b></font>Integer<font color="#000080">;
  </font>Buffer<font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font>BufferLength<font color="#000080">] </font><font color="#FF0000"><b>Of </b></font>Byte<font color="#000080">;
  </font>Numread<font color="#000080">: </font>Word<font color="#000080">;
  </font>Red<font color="#000080">, </font>Green<font color="#000080">, </font>Blue<font color="#000080">: </font>Byte<font color="#000080">;
  </font>a<font color="#000080">,</font>b<font color="#000080">,</font>c<font color="#000080">: </font>Integer<font color="#000080">;
  </font>s<font color="#000080">, </font>Fn<font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
  </font>f<font color="#000080">: </font><font color="#FF0000"><b>File</b></font><font color="#000080">;
  </font>BackGround<font color="#000080">: </font>Byte<font color="#000080">;
  </font>XEnd<font color="#000080">, </font>YEnd<font color="#000080">, </font>TotalX<font color="#000080">, </font>TotalY<font color="#000080">, </font>BitsPixel<font color="#000080">, </font>XStart<font color="#000080">, </font>YStart<font color="#000080">, </font>XLength<font color="#000080">, </font>YLength<font color="#000080">,
  </font>CodeSize<font color="#000080">, </font>ClearCode<font color="#000080">,</font>EOFCode<font color="#000080">, </font>FirstFree<font color="#000080">, </font>InitCodeSize<font color="#000080">,</font>MaxCode<font color="#000080">,</font>BitMask<font color="#000080">,
  </font>FreeCode<font color="#000080">, </font>BlockLength<font color="#000080">, </font>BitsIn<font color="#000080">, </font>BytesLeft<font color="#000080">, </font>Num<font color="#000080">, </font>OutCount<font color="#000080">, </font>X<font color="#000080">, </font>Y<font color="#000080">, </font>Code<font color="#000080">,
  </font>Address<font color="#000080">,</font>Aa<font color="#000080">, </font>TempChar<font color="#000080">, </font>CurCode<font color="#000080">, </font>OldCode<font color="#000080">, </font>FinChar<font color="#000080">, </font>InCode
  <font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>OM<font color="#000080">; </font><font color="#FF0000"><b>Begin </b></font>TextMode<font color="#000080">(</font>LastMode<font color="#000080">);  </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
 
</font><font color="#FF0000"><b>Function </b></font>Ex<font color="#000080">(</font>base<font color="#000080">, </font>ras<font color="#000080">: </font>LongInt<font color="#000080">): </font>LongInt<font color="#000080">;
</font><font color="#FF0000"><b>Var </b></font>i<font color="#000080">,</font>t <font color="#000080">: </font>LongInt<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  if </b></font><font color="#000080">(</font>ras <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then begin </b></font>Ex <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">; </font>Exit<font color="#000080">; </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>ras <font color="#000080">= </font><font color="#800000">1 </font><font color="#FF0000"><b>then begin </b></font>Ex <font color="#000080">:= </font>Base<font color="#000080">; </font>Exit<font color="#000080">; </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font>t <font color="#000080">:= </font>base<font color="#000080">;
  </font><font color="#FF0000"><b>For </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>To </b></font>ras<font color="#000080">-</font><font color="#800000">1 </font><font color="#FF0000"><b>Do </b></font>t <font color="#000080">:= </font>t <font color="#000080">* </font>base<font color="#000080">;
  </font>ex <font color="#000080">:= </font>t<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>ErrSound<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>Sound<font color="#000080">(</font><font color="#800000">500</font><font color="#000080">); </font>Delay<font color="#000080">(</font><font color="#800000">10</font><font color="#000080">); </font>NoSound<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Begin
  For </b></font>A <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>To </b></font><font color="#800000">7 </font><font color="#FF0000"><b>Do </b></font>Powers<font color="#000080">[</font>a<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">] := </font>Ex<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">, </font>a<font color="#000080">);
  </font>clrscr<font color="#000080">;
   </font>B <font color="#000080">:= </font><font color="#800000">4</font><font color="#000080">; </font><font color="#FF0000"><b>For </b></font>A <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">11 </font><font color="#FF0000"><b>do begin  </b></font>MaxCodes<font color="#000080">[</font>A<font color="#000080">] := </font>B<font color="#000080">;  </font>B<font color="#000080">:=</font>B<font color="#000080">*</font><font color="#800000">2</font><font color="#000080">; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>b <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">; </font>c <font color="#000080">:= </font><font color="#800000">2</font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>A <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">8 </font><font color="#FF0000"><b>do begin  </b></font>CodeMask<font color="#000080">[</font>a<font color="#000080">] := </font>B<font color="#000080">;  </font>B<font color="#000080">:=</font>B<font color="#000080">+</font>c<font color="#000080">;  </font>C<font color="#000080">:=</font>C<font color="#000080">*</font><font color="#800000">2</font><font color="#000080">; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>B <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
  </font><font color="#FF0000"><b>For </b></font>A <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">14 </font><font color="#FF0000"><b>do begin  </b></font>Powers2<font color="#000080">[</font>A<font color="#000080">] := </font>B<font color="#000080">;  </font>B<font color="#000080">:=</font>B<font color="#000080">*</font><font color="#800000">2</font><font color="#000080">; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 
  </font>WriteLn<font color="#000080">(</font><font color="#800000">'SHOWGIF.PAS, Basic version by Rich Geldreich, Translated to TP by
</font>Paul Hurst<font color="#800000">');  Write('</font>filename<font color="#000080">: </font><font color="#800000">'); ReadLn(fn);
  </font>Assign<font color="#000080">(</font>F<font color="#000080">, </font>fn<font color="#000080">); </font>Reset<font color="#000080">(</font>F<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);

  </font>s <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
  </font><font color="#FF0000"><b>For </b></font>a<font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>To </b></font><font color="#800000">6 </font><font color="#FF0000"><b>Do Begin </b></font>BlockRead<font color="#000080">(</font>f<font color="#000080">,</font>bytebuffer<font color="#000080">,</font>SizeOf<font color="#000080">(</font>bytebuffer<font color="#000080">));
    </font>s <font color="#000080">:= </font>s <font color="#000080">+ </font>Chr<font color="#000080">(</font>bytebuffer<font color="#000080">);
  </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>If </b></font>s <font color="#000080">&lt;&gt; </font><font color="#800000">'GIF87a' </font><font color="#FF0000"><b>Then Begin </b></font>WriteLn<font color="#000080">(</font><font color="#800000">'Sorry format not accepted!'</font><font color="#000080">); </font>Halt<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;  </font>BlockRead<font color="#000080">(</font>F<font color="#000080">, </font>TotalX<font color="#000080">, </font>SizeOf<font color="#000080">(</font>TotalX<font color="#000080">));
  </font>BlockRead<font color="#000080">(</font>F<font color="#000080">, </font>TotalY<font color="#000080">, </font>SizeOf<font color="#000080">(</font>TotalY<font color="#000080">));
 
  </font>BlockRead<font color="#000080">(</font>F<font color="#000080">, </font>ByteBuffer<font color="#000080">, </font>SizeOf<font color="#000080">(</font>ByteBuffer<font color="#000080">));
  </font>BitsPixel <font color="#000080">:= (</font>ByteBuffer <font color="#FF0000"><b>And </b></font><font color="#800000">7</font><font color="#000080">) + </font><font color="#800000">1</font><font color="#000080">;
  </font>BlockRead<font color="#000080">(</font>F<font color="#000080">, </font>ByteBuffer<font color="#000080">, </font>SizeOf<font color="#000080">(</font>ByteBuffer<font color="#000080">));
  </font>BackGround <font color="#000080">:= </font>ByteBuffer<font color="#000080">;
  </font>BlockRead<font color="#000080">(</font>f<font color="#000080">, </font>ByteBuffer<font color="#000080">, </font>SizeOf<font color="#000080">(</font>ByteBuffer<font color="#000080">));
  </font><font color="#FF0000"><b>If </b></font>ByteBuffer <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>Then Begin </b></font>OM<font color="#000080">; </font>WriteLn<font color="#000080">(</font><font color="#800000">'Error!1'</font><font color="#000080">); </font>ErrSound<font color="#000080">;  </font>Halt<font color="#000080">; </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>Asm </b></font><font color="#FF00FF">Mov AX, 13h; Int 10h; </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>For </b></font>A <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>To </b></font>Ex<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">, </font>BitsPixel<font color="#000080">) - </font><font color="#800000">1 </font><font color="#FF0000"><b>Do Begin
    </b></font>BlockRead<font color="#000080">(</font>F<font color="#000080">, </font>Red<font color="#000080">, </font>SizeOf<font color="#000080">(</font>Red<font color="#000080">));
    </font>BlockRead<font color="#000080">(</font>F<font color="#000080">, </font>Green<font color="#000080">, </font>SizeOf<font color="#000080">(</font>Green<font color="#000080">));
    </font>BlockRead<font color="#000080">(</font>F<font color="#000080">, </font>Blue<font color="#000080">, </font>SizeOf<font color="#000080">(</font>Blue<font color="#000080">));
    </font>Port<font color="#000080">[</font><font color="#800000">$3c7</font><font color="#000080">] := </font>A<font color="#000080">;  </font>Port<font color="#000080">[</font><font color="#800000">$3c8</font><font color="#000080">] := </font>A<font color="#000080">;
    </font>Port<font color="#000080">[</font><font color="#800000">$3c9</font><font color="#000080">] := </font>Red <font color="#FF0000"><b>Div </b></font><font color="#800000">4</font><font color="#000080">;
    </font>Port<font color="#000080">[</font><font color="#800000">$3c9</font><font color="#000080">] := </font>Green <font color="#FF0000"><b>Div </b></font><font color="#800000">4</font><font color="#000080">;
    </font>Port<font color="#000080">[</font><font color="#800000">$3c9</font><font color="#000080">] := </font>Blue <font color="#FF0000"><b>Div </b></font><font color="#800000">4</font><font color="#000080">;
  </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font><font color="#008000"><i>{line(0,0)-(319,199),0,background}
  </i></font>BlockRead<font color="#000080">(</font>F<font color="#000080">, </font>ByteBuffer<font color="#000080">, </font>SizeOf<font color="#000080">(</font>ByteBuffer<font color="#000080">));
  </font><font color="#FF0000"><b>If </b></font>ByteBuffer <font color="#000080">&lt;&gt; </font>Ord<font color="#000080">(</font><font color="#800000">','</font><font color="#000080">) </font><font color="#FF0000"><b>Then Begin </b></font>OM<font color="#000080">; </font>WriteLn<font color="#000080">(</font><font color="#800000">'Error!2'</font><font color="#000080">); </font>ErrSound<font color="#000080">; </font>Halt<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;  </font>BlockRead<font color="#000080">(</font>F<font color="#000080">,</font>XStart<font color="#000080">, </font>SizeOf<font color="#000080">(</font>XStart<font color="#000080">));
  </font>BlockRead<font color="#000080">(</font>F<font color="#000080">,</font>YStart<font color="#000080">, </font>SizeOf<font color="#000080">(</font>YStart<font color="#000080">));
  </font>BlockRead<font color="#000080">(</font>F<font color="#000080">,</font>XLength<font color="#000080">, </font>SizeOf<font color="#000080">(</font>XLength<font color="#000080">));
  </font>BlockRead<font color="#000080">(</font>F<font color="#000080">,</font>YLength<font color="#000080">, </font>SizeOf<font color="#000080">(</font>YLength<font color="#000080">));
  </font>XEnd <font color="#000080">:= </font>XLength <font color="#000080">+ </font>XStart <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">; </font>YEnd <font color="#000080">:= </font>YLength <font color="#000080">+ </font>YStart <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
  </font>BlockRead<font color="#000080">(</font>F<font color="#000080">, </font>ByteBuffer<font color="#000080">, </font>SizeOf<font color="#000080">(</font>ByteBuffer<font color="#000080">));
  </font><font color="#FF0000"><b>If </b></font><font color="#000080">((</font>ByteBuffer <font color="#FF0000"><b>And </b></font><font color="#800000">128</font><font color="#000080">) = </font><font color="#800000">128</font><font color="#000080">) </font><font color="#FF0000"><b>Or </b></font><font color="#000080">((</font>ByteBuffer <font color="#FF0000"><b>And </b></font><font color="#800000">64</font><font color="#000080">) = </font><font color="#800000">64</font><font color="#000080">) </font><font color="#FF0000"><b>Then Begin
    </b></font>OM<font color="#000080">; </font>WriteLn<font color="#000080">(</font><font color="#800000">'Error!3'</font><font color="#000080">); </font>ErrSound<font color="#000080">; </font>Halt<font color="#000080">;
  </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font>BlockRead<font color="#000080">(</font>F<font color="#000080">, </font>ByteBuffer<font color="#000080">, </font>SizeOf<font color="#000080">(</font>ByteBuffer<font color="#000080">));
  </font>CodeSize <font color="#000080">:= </font>ByteBuffer<font color="#000080">;
  </font>ClearCode <font color="#000080">:= </font>Powers2<font color="#000080">[</font>CodeSize<font color="#000080">];
  </font>EOFCode <font color="#000080">:= </font>ClearCode <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">; </font>FirstFree <font color="#000080">:= </font>ClearCode <font color="#000080">+ </font><font color="#800000">2</font><font color="#000080">;
  </font>FreeCode <font color="#000080">:= </font>FirstFree<font color="#000080">; </font>CodeSize <font color="#000080">:= </font>CodeSize <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
  </font>InitCodeSize <font color="#000080">:= </font>COdeSize<font color="#000080">; </font>MaxCode <font color="#000080">:= </font>MaxCodes<font color="#000080">[</font>CodeSize <font color="#000080">- </font><font color="#800000">2</font><font color="#000080">];
  </font>BitMask <font color="#000080">:= </font>CodeMask<font color="#000080">[</font>BitsPixel<font color="#000080">];
  </font>BlockRead<font color="#000080">(</font>F<font color="#000080">, </font>ByteBuffer<font color="#000080">, </font>SizeOf<font color="#000080">(</font>ByteBuffer<font color="#000080">));
  </font>BlockLength <font color="#000080">:= </font>ByteBuffer <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
  </font>BitsIn <font color="#000080">:= </font><font color="#800000">8</font><font color="#000080">; </font>BytesLeft <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">; </font>Num <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>OutCount <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>X <font color="#000080">:= </font>XStart<font color="#000080">; </font>Y <font color="#000080">:= </font>YStart<font color="#000080">;
  </font><font color="#FF0000"><b>Repeat
    </b></font>Code <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font><font color="#FF0000"><b>For </b></font>Aa <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>To </b></font>CodeSize <font color="#000080">- </font><font color="#800000">1 </font><font color="#FF0000"><b>Do Begin
      </b></font>BitsIn <font color="#000080">:= </font>BItsIn <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
      </font><font color="#FF0000"><b>If </b></font>BitsIn <font color="#000080">= </font><font color="#800000">9 </font><font color="#FF0000"><b>Then Begin
        </b></font>BytesLeft <font color="#000080">:= </font>BytesLeft <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
        </font><font color="#FF0000"><b>If </b></font>BytesLeft <font color="#000080">&lt;= </font><font color="#800000">0 </font><font color="#FF0000"><b>Then Begin
          </b></font>BlockRead<font color="#000080">(</font>F<font color="#000080">, </font>Buffer<font color="#000080">, </font>SizeOf<font color="#000080">(</font>Buffer<font color="#000080">), </font>numread<font color="#000080">);
          </font>BytesLeft <font color="#000080">:= </font>BufferLength<font color="#000080">;
          </font>Address <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
        </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
        </font>Address <font color="#000080">:= </font>Address <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
        </font>TempChar <font color="#000080">:= </font>Buffer<font color="#000080">[</font>Address<font color="#000080">];
        </font>BitsIn <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
        </font>Num <font color="#000080">:= </font>Num <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
        </font><font color="#FF0000"><b>If </b></font>Num <font color="#000080">= </font>BlockLength <font color="#FF0000"><b>Then Begin
          </b></font>BytesLeft <font color="#000080">:= </font>BytesLeft <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
          </font><font color="#FF0000"><b>If </b></font>BytesLeft <font color="#000080">&lt;= </font><font color="#800000">0 </font><font color="#FF0000"><b>Then Begin
            </b></font>BlockRead<font color="#000080">(</font>F<font color="#000080">, </font>Buffer<font color="#000080">, </font>SizeOf<font color="#000080">(</font>Buffer<font color="#000080">), </font>numread<font color="#000080">);
            </font>Address <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
            </font>BytesLeft <font color="#000080">:= </font>BufferLength<font color="#000080">;
          </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
          </font>BlockLength <font color="#000080">:= </font>TempChar <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
          </font>Address <font color="#000080">:= </font>Address <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
          </font>TempChar <font color="#000080">:= </font>Buffer<font color="#000080">[</font>Address<font color="#000080">];
          </font>Num <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
        </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>If </b></font><font color="#000080">(</font>TempChar <font color="#FF0000"><b>And </b></font>Powers<font color="#000080">[</font>BitsIn<font color="#000080">]) &gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>Then </b></font>Code <font color="#000080">:= </font>Code <font color="#000080">+ </font>Powers2<font color="#000080">[</font>Aa<font color="#000080">];
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;  </font><font color="#008000"><i>{next}
 

    </i></font><font color="#FF0000"><b>If </b></font>Code <font color="#000080">&lt;&gt; </font>EOFCode <font color="#FF0000"><b>Then Begin
      If </b></font>Code <font color="#000080">= </font>ClearCode <font color="#FF0000"><b>Then Begin
        </b></font>CodeSize <font color="#000080">:= </font>InitCodeSize<font color="#000080">;
        </font>MaxCode <font color="#000080">:= </font>MaxCodes<font color="#000080">[</font>CodeSize <font color="#000080">- </font><font color="#800000">2</font><font color="#000080">];
        </font>FreeCode <font color="#000080">:= </font>FirstFree<font color="#000080">;
        </font>Code <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
        </font><font color="#FF0000"><b>For </b></font>Aa <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>To </b></font>CodeSize <font color="#000080">- </font><font color="#800000">1 </font><font color="#FF0000"><b>Do Begin
          </b></font>BitsIn <font color="#000080">:= </font>BitsIn <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
          </font><font color="#FF0000"><b>If </b></font>BitsIn <font color="#000080">= </font><font color="#800000">9 </font><font color="#FF0000"><b>Then Begin
            </b></font>BytesLeft <font color="#000080">:= </font>BytesLeft <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
            </font><font color="#FF0000"><b>If </b></font>BytesLeft <font color="#000080">&lt;= </font><font color="#800000">0 </font><font color="#FF0000"><b>Then Begin
              </b></font>BlockRead<font color="#000080">(</font>F<font color="#000080">, </font>Buffer<font color="#000080">, </font>SizeOf<font color="#000080">(</font>Buffer<font color="#000080">),</font>numread<font color="#000080">);
              </font>Address <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
              </font>BytesLeft <font color="#000080">:= </font>BufferLength<font color="#000080">;
            </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
            </font>Address <font color="#000080">:= </font>Address <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
            </font>TempChar <font color="#000080">:= </font>Buffer<font color="#000080">[</font>Address<font color="#000080">];
            </font>BitsIn <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
            </font>Num <font color="#000080">:= </font>Num <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
            </font><font color="#FF0000"><b>If </b></font>Num <font color="#000080">= </font>BlockLength <font color="#FF0000"><b>Then Begin
              </b></font>BytesLeft <font color="#000080">:= </font>BytesLeft <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
              </font><font color="#FF0000"><b>If </b></font>BytesLeft <font color="#000080">&lt;= </font><font color="#800000">0 </font><font color="#FF0000"><b>Then Begin
                </b></font>BlockRead<font color="#000080">(</font>F<font color="#000080">, </font>Buffer<font color="#000080">, </font>SizeOf<font color="#000080">(</font>Buffer<font color="#000080">),</font>numread<font color="#000080">);
                </font>Address <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
                </font>BytesLeft <font color="#000080">:= </font>BufferLength<font color="#000080">;
              </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
              </font>BlockLength <font color="#000080">:= </font>TempChar <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
              </font>Address <font color="#000080">:= </font>Address <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
              </font>TempChar <font color="#000080">:= </font>Buffer<font color="#000080">[</font>Address<font color="#000080">];
              </font>Num <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
            </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
          </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
          </font><font color="#FF0000"><b>If </b></font><font color="#000080">(</font>TempChar <font color="#FF0000"><b>And </b></font>Powers<font color="#000080">[</font>BitsIn<font color="#000080">]) &gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>Then begin
            </b></font>Code <font color="#000080">:= </font>Code <font color="#000080">+ </font>Powers2<font color="#000080">[</font>Aa<font color="#000080">];
        </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>End</b></font><font color="#000080">; </font><font color="#008000"><i>{next}
      </i></font>CurCode <font color="#000080">:= </font>Code<font color="#000080">;
      </font>OldCode <font color="#000080">:= </font>Code<font color="#000080">;
      </font>FinChar <font color="#000080">:= </font>Code <font color="#FF0000"><b>And </b></font>BitMask<font color="#000080">;
      </font>Mem<font color="#000080">[</font><font color="#800000">$A000</font><font color="#000080">:</font>Y<font color="#000080">*</font><font color="#800000">320 </font><font color="#000080">+ </font>X<font color="#000080">] := </font>FinChar<font color="#000080">; </font>X <font color="#000080">:= </font>X <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
      </font><font color="#FF0000"><b>If </b></font>X <font color="#000080">&gt; </font>XEnd <font color="#FF0000"><b>Then Begin </b></font>X <font color="#000080">:= </font>XStart<font color="#000080">; </font>Y <font color="#000080">:= </font>Y <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">; </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>End
    Else Begin
      </b></font>CurCode <font color="#000080">:= </font>Code<font color="#000080">;
      </font>InCode <font color="#000080">:= </font>Code<font color="#000080">;
      </font><font color="#FF0000"><b>If </b></font>Code <font color="#000080">&gt;= </font>FreeCode <font color="#FF0000"><b>Then Begin
        </b></font>CurCode <font color="#000080">:= </font>OldCode<font color="#000080">;
        </font>OutCode<font color="#000080">[</font>OutCount<font color="#000080">] := </font>FinChar<font color="#000080">;
        </font>OutCount <font color="#000080">:= </font>OutCount <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
      </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>If </b></font>CurCode <font color="#000080">&gt; </font>BitMask <font color="#FF0000"><b>Then Begin
        Repeat
          </b></font>OutCode<font color="#000080">[</font>OutCount<font color="#000080">] := </font>Suffix<font color="#000080">[</font>CurCode<font color="#000080">];
          </font>OutCount <font color="#000080">:= </font>OutCount <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">; </font>CurCode <font color="#000080">:= </font>PreFix<font color="#000080">[</font>CurCode<font color="#000080">];
        </font><font color="#FF0000"><b>Until </b></font>CurCode <font color="#000080">&lt;= </font>BitMask<font color="#000080">;
      </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
 
      </font>FinChar <font color="#000080">:= </font>CurCode <font color="#FF0000"><b>And </b></font>BitMask<font color="#000080">;
      </font>OutCode<font color="#000080">[</font>OutCount<font color="#000080">] := </font>FinChar<font color="#000080">;
      </font>OutCount <font color="#000080">:= </font>OutCount <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
      </font><font color="#FF0000"><b>For </b></font>A <font color="#000080">:= </font>OutCount <font color="#000080">- </font><font color="#800000">1 </font><font color="#FF0000"><b>DownTo </b></font><font color="#800000">0 </font><font color="#FF0000"><b>Do Begin
        </b></font>Mem<font color="#000080">[</font><font color="#800000">$A000</font><font color="#000080">:</font>Y<font color="#000080">*</font><font color="#800000">320</font><font color="#000080">+</font>X<font color="#000080">] := </font>OutCode<font color="#000080">[</font>A<font color="#000080">];
        </font>X <font color="#000080">:= </font>X <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
        </font><font color="#FF0000"><b>If </b></font>X <font color="#000080">&gt; </font>XEnd <font color="#FF0000"><b>Then Begin </b></font>X <font color="#000080">:= </font>XStart<font color="#000080">; </font>Y <font color="#000080">:= </font>Y <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">; </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
      </font>OutCount <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font>PreFix<font color="#000080">[</font>FreeCode<font color="#000080">] := </font>OldCode<font color="#000080">;
      </font>Suffix<font color="#000080">[</font>FreeCode<font color="#000080">] := </font>FinChar<font color="#000080">;
      </font>OldCode <font color="#000080">:= </font>InCode<font color="#000080">;
      </font>FreeCode <font color="#000080">:= </font>FreeCode <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
      </font><font color="#FF0000"><b>If </b></font><font color="#000080">(</font>FreeCode <font color="#000080">&gt;= </font>MaxCode<font color="#000080">) </font><font color="#FF0000"><b>And </b></font><font color="#000080">(</font>CodeSize <font color="#000080">&lt; </font><font color="#800000">12</font><font color="#000080">) </font><font color="#FF0000"><b>Then Begin
        </b></font>Codesize <font color="#000080">:= </font>CodeSize <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
        </font>MaxCode <font color="#000080">:= </font>MaxCode <font color="#000080">+ </font>MaxCode <font color="#008000"><i>{*2}
      </i></font><font color="#FF0000"><b>End</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>Until </b></font>Code <font color="#000080">= </font>EOFCode<font color="#000080">;
  </font>Close<font color="#000080">(</font>F<font color="#000080">);
  </font>Sound<font color="#000080">(</font><font color="#800000">1500</font><font color="#000080">); </font>Delay<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">); </font>NoSound<font color="#000080">;
  </font>ReadKey<font color="#000080">;
  </font>OM<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">.

</font>It works <font color="#FF0000"><b>and is </b></font>fairly fast<font color="#000080">. </font>only does <font color="#800000">320</font>x200 non interlaced<font color="#000080">, </font>no local color
map<font color="#000080">. </font>Hope you enjoy<font color="#000080">...  </font><font color="#FF0000"><b>If </b></font>anyone makes this better could ya post it <font color="#FF0000"><b>for
</b></font>everyone <font color="#000080">(</font><font color="#FF0000"><b>and </b></font>me<font color="#000080">) :)
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0196.PAS">Original</a><b>]</b></p></body>
</html>
