<html>
<head><title> "SCI File Viewer" by SIMEON SPRY</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0123.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#FF0000"><b>Program </b></font>ViewASCi<font color="#000080">;

</font><font color="#008000"><i>{ Simple SCi Viewer - By Simeon Spry

This code will display a SCi (320*200*256) file. I would reccomend that you
add code to find out if the SCi File name is valid. I had some, but I got
it out of a book so it *might* be copyrighted :-(. You also might want to
save the old pallete and restore it afterwards I didn't do it because I
lost my reference.

This may be freely distributed, if you incorporate any portions of this
code into a part of anything you MUST give me some credit.
}


</i></font><font color="#FF0000"><b>Procedure </b></font>ViewSci<font color="#000080">( </font>SciF <font color="#000080">: </font><font color="#FF0000"><b>STRING</b></font><font color="#000080">);
 </font><font color="#FF0000"><b>CONST    </b></font>Header <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">4</font><font color="#000080">] </font><font color="#FF0000"><b>OF </b></font>CHAR <font color="#000080">= (</font><font color="#800000">'R'</font><font color="#000080">,</font><font color="#800000">'I'</font><font color="#000080">,</font><font color="#800000">'X'</font><font color="#000080">,</font><font color="#800000">'3'</font><font color="#000080">);

 </font><font color="#FF0000"><b>VAR     </b></font>SciFile <font color="#000080">: </font><font color="#FF0000"><b>File</b></font><font color="#000080">;
         </font>HeaderBuf <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">10</font><font color="#000080">] </font><font color="#FF0000"><b>OF </b></font>CHAR<font color="#000080">;
         </font>NewPal    <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">768</font><font color="#000080">] </font><font color="#FF0000"><b>OF </b></font>BYTE<font color="#000080">; </font><font color="#008000"><i>{ 3 Bytes Per colour, 3*256 = 768}
         </i></font>OldPal    <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">768</font><font color="#000080">] </font><font color="#FF0000"><b>OF </b></font>BYTE<font color="#000080">; </font><font color="#008000"><i>{ &quot;  &quot;  &quot;}
         </i></font>Screen    <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">64000</font><font color="#000080">] </font><font color="#FF0000"><b>OF </b></font>BYTE <font color="#FF0000"><b>ABSOLUTE </b></font><font color="#800000">$A000</font><font color="#000080">:</font><font color="#800000">0000</font><font color="#000080">; </font><font color="#008000"><i>{ Direct to
the screen }
         </i></font>i         <font color="#000080">: </font>integer<font color="#000080">;
 </font><font color="#FF0000"><b>Procedure </b></font>SetPal<font color="#000080">(</font>Pallete <font color="#000080">: </font><font color="#FF0000"><b>Array OF </b></font>BYTE<font color="#000080">);
 </font><font color="#FF0000"><b>VAR
   </b></font>PalPtr <font color="#000080">: </font>POINTER<font color="#000080">;
 </font><font color="#FF0000"><b>BEGIN
  </b></font>PalPtr <font color="#000080">:= @</font>Pallete<font color="#000080">;
  </font><font color="#FF0000"><b>asm
   </b></font><font color="#FF00FF">mov ax,1012h
   xor bx,bx
   mov cx,0100h
   les dx,PalPtr
   int 10h
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

 </font><font color="#FF0000"><b>Procedure </b></font>WaitForKey<font color="#000080">;</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>ASM
   </b></font><font color="#FF00FF">xor ax,ax
   int 16h
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>SetMode<font color="#000080">(</font>Mode <font color="#000080">: </font>BYTE<font color="#000080">); </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>ASM
    </b></font><font color="#FF00FF">mov ah, 00
    mov al, mode
    int 10h
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

 </font><font color="#FF0000"><b>BEGIN
  </b></font><font color="#008000"><i>{ Open The File }
  </i></font>assign<font color="#000080">(</font>SciFile<font color="#000080">, </font>SciF<font color="#000080">);
  </font>Reset<font color="#000080">(</font>SciFile<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);

  </font><font color="#008000"><i>{ Check The Header }
  </i></font>BlockRead<font color="#000080">(</font>SciFile<font color="#000080">,</font>HeaderBuf<font color="#000080">,</font>SizeOF<font color="#000080">(</font>HeaderBuf<font color="#000080">));
  </font><font color="#FF0000"><b>For </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">4 </font><font color="#FF0000"><b>DO
   Begin
    If </b></font>HeaderBuf<font color="#000080">[</font>i<font color="#000080">] &lt;&gt; </font>Header<font color="#000080">[</font>i<font color="#000080">] </font><font color="#FF0000"><b>Then
     BEGIN
      </b></font>WriteLn<font color="#000080">;
      </font>WriteLn<font color="#000080">(</font><font color="#800000">' Invalid SCI File. '</font><font color="#000080">);
      </font>WriteLn<font color="#000080">;
      </font>Halt<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
     </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

 </font><font color="#008000"><i>{ Set Mode $13 }
 </i></font>SetMode<font color="#000080">(</font><font color="#800000">$13</font><font color="#000080">);

 </font><font color="#008000"><i>{ Read Pallete into a 768 Byte Buffer &amp; DisPlay. }
  </i></font>BlockRead<font color="#000080">(</font>SciFile<font color="#000080">,</font>NewPal<font color="#000080">,</font><font color="#800000">768</font><font color="#000080">);
  </font>SetPal<font color="#000080">(</font>NewPal<font color="#000080">);

 </font><font color="#008000"><i>{ Read 64000 bytes then write DIRECTLY to Video Memory }
  </i></font>BlockRead<font color="#000080">(</font>SCIFile<font color="#000080">,</font>Screen<font color="#000080">,</font><font color="#800000">64000</font><font color="#000080">);
  </font>cLOSE<font color="#000080">(</font>SCIFILE<font color="#000080">);
 </font><font color="#008000"><i>{ Wait Until Key Pressed }
 </i></font>WaitForKey<font color="#000080">;

 </font><font color="#008000"><i>{ Set Text Mode }
  </i></font>SetMode<font color="#000080">(</font><font color="#800000">$3</font><font color="#000080">);
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Var </b></font>SciFile <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">12</font><font color="#000080">];

</font><font color="#FF0000"><b>BEGIN
   </b></font><font color="#008000"><i>{ Ask For File To View }
  </i></font>WriteLn<font color="#000080">(</font><font color="#800000">'SCi Viewer - By Simeon Spry'</font><font color="#000080">);
  </font>Write<font color="#000080">(</font><font color="#800000">'View File: '</font><font color="#000080">);
  </font>ReadLn<font color="#000080">(</font>SciFile<font color="#000080">);

   </font><font color="#008000"><i>{ View SCi File }
  </i></font>ViewSCI<font color="#000080">( </font>SciFile <font color="#000080">);

   </font><font color="#008000"><i>{ Display Made-By Message }
  </i></font>WriteLn<font color="#000080">(</font><font color="#800000">'Simple SCi Viewer by Simeon Spry'</font><font color="#000080">);
  </font>WriteLn<font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0123.PAS">Original</a><b>]</b></p></body>
</html>
