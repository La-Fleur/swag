<html>
<head><title> "Virtual Screens" by RYAN PETRIE</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0085.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{

WS&gt;Hello! I've thought about writing my own 3D games or just any high graphics
WS&gt;program and am in the process of writing a unit that handles virtual screens
WS&gt;have 6 virtual screens (0..5, where 0 will be MOVEd to $A000:0000) that are
WS&gt;type pointer with 64000 bytes each. They are designed for Mode 13h, of cours
WS&gt;I have a procedure called CopyScreen. Basically,

Just FYI:  You might want to consider using Mode-X.  Matt Pritchard has
written a great freeware library for such (MODEX10?.ZIP) with a Pascal
example.  With Mode-X, you can use the VGA's memory instead of precious
conventional (if in real mode) memory, and the page switching is a lot
faster than copying 64k from memory.
}

</i></font><font color="#FF0000"><b>procedure </b></font>copyscreen<font color="#000080">(</font>source<font color="#000080">,</font>dest <font color="#000080">: </font>pointer<font color="#000080">; </font>mask <font color="#000080">: </font>byte<font color="#000080">); </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;

</font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">push  ds
  lds   si,source
  les   di,dest
  mov   cx,64000
  cld
@loop:
  lodsb
  cmp   mask,al
  je    @nodraw
  mov   es:[di],al
@nodraw:
  inc   di
  loop  @loop
  pop   ds
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font>You need <font color="#FF0000"><b>to </b></font>call it like this <font color="#000080">(</font>note the <font color="#800000">'@'</font><font color="#000080">):

  </font>copyscreen<font color="#000080">(@</font>virtualscreen<font color="#000080">[</font>first<font color="#000080">],@</font>virtualscreen<font color="#000080">[</font>second<font color="#000080">],</font>mask<font color="#000080">);
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0085.PAS">Original</a><b>]</b></p></body>
</html>
