<html>
<head><title> "Hypnotic Sinus Demo" by SUNE MARCHER</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0220.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{$g+,x-,o-,q-,r-,s-,d-,l-,y-,a+,n-,e-,p-,t-,v-,y-}
</i></font><font color="#FF0000"><b>uses </b></font>gru<font color="#000080">;
</font><font color="#FF0000"><b>const
  </b></font>add1<font color="#000080">=</font><font color="#800000">1</font><font color="#000080">;
  </font>add2<font color="#000080">=-</font><font color="#800000">1</font><font color="#000080">;
  </font>add3<font color="#000080">=-</font><font color="#800000">1</font><font color="#000080">;
  </font>sofs<font color="#000080">=</font><font color="#800000">75</font><font color="#000080">;
  </font>samp<font color="#000080">=</font><font color="#800000">75</font><font color="#000080">;
  </font>slen<font color="#000080">=</font><font color="#800000">255</font><font color="#000080">;
  </font>sprpic<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">15</font><font color="#000080">]</font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">=(
    (</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">),
    (</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">),
    (</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">),
    (</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">),
    (</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">),
    (</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">),
    (</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">),
    (</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">),
    (</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">),
    (</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">),
    (</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">),
    (</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">),
    (</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">),
    (</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">),
    (</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">),
    (</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">));
</font><font color="#FF0000"><b>type
  </b></font>sinarray<font color="#000080">=</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font>slen<font color="#000080">]</font><font color="#FF0000"><b>of </b></font>word<font color="#000080">;

</font><font color="#FF0000"><b>var
  </b></font>stab<font color="#000080">:</font>sinarray<font color="#000080">; </font><font color="#008000"><i>{ Used to move shade bob. }
  </i></font>ctab<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">319</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
  </font>stab1<font color="#000080">,</font>stab2<font color="#000080">,</font>stab3<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
  </font>i<font color="#000080">,</font>i1<font color="#000080">,</font>i2<font color="#000080">,</font>i3<font color="#000080">:</font>word<font color="#000080">;
  </font>workp<font color="#000080">:</font>pointer<font color="#000080">;
  </font>work<font color="#000080">:</font>word<font color="#000080">;
  </font>timer<font color="#000080">:</font>longint <font color="#FF0000"><b>absolute </b></font><font color="#800000">$0040</font><font color="#000080">:</font><font color="#800000">$006c</font><font color="#000080">;
  </font>frame<font color="#000080">,</font>t1<font color="#000080">,</font>t2<font color="#000080">:</font>longint<font color="#000080">;
  </font>pal1<font color="#000080">,</font>pal2<font color="#000080">:</font>paltype<font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>keypressed<font color="#000080">:</font>boolean<font color="#000080">; </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">mov ah, 01h
  int 16h
  mov ax, 00h
  jz @1
  inc ax
  @1:
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>readkey<font color="#000080">:</font>char<font color="#000080">; </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">xor ah,ah
  int 16h
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>virtup<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>getmem<font color="#000080">(</font>workp<font color="#000080">,</font><font color="#800000">64000</font><font color="#000080">);
  </font>work<font color="#000080">:=</font>seg<font color="#000080">(</font>workp<font color="#000080">^);
  </font>clear386<font color="#000080">(</font>work<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>virtdn<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>work<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font>freemem<font color="#000080">(</font>workp<font color="#000080">,</font><font color="#800000">64000</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>calcsinus<font color="#000080">;
</font><font color="#FF0000"><b>begin
  for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>slen <font color="#FF0000"><b>do </b></font>stab<font color="#000080">[</font>i<font color="#000080">]:=</font>round<font color="#000080">(</font>sin<font color="#000080">(</font>i<font color="#000080">*</font><font color="#800000">4</font><font color="#000080">*</font>pi<font color="#000080">/</font>slen<font color="#000080">)*</font>samp<font color="#000080">)+</font>sofs<font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do begin
    </b></font>stab1<font color="#000080">[</font>i<font color="#000080">]:=</font>round<font color="#000080">(</font>sin<font color="#000080">(</font>i<font color="#000080">*</font><font color="#800000">2</font><font color="#000080">*</font>pi<font color="#000080">/</font><font color="#800000">255</font><font color="#000080">)*</font><font color="#800000">50</font><font color="#000080">)+</font><font color="#800000">109</font><font color="#000080">;
    </font>stab2<font color="#000080">[</font>i<font color="#000080">]:=</font>round<font color="#000080">(</font>cos<font color="#000080">(</font>i<font color="#000080">*</font><font color="#800000">4</font><font color="#000080">*</font>pi<font color="#000080">/</font><font color="#800000">255</font><font color="#000080">)*</font><font color="#800000">25</font><font color="#000080">);
    </font>stab3<font color="#000080">[</font>i<font color="#000080">]:=</font>round<font color="#000080">(</font>sin<font color="#000080">(</font>i<font color="#000080">*</font><font color="#800000">4</font><font color="#000080">*</font>pi<font color="#000080">/</font><font color="#800000">255</font><font color="#000080">)*</font><font color="#800000">25</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>fillchar<font color="#000080">(</font>ctab<font color="#000080">,</font>sizeof<font color="#000080">(</font>ctab<font color="#000080">),</font><font color="#800000">0</font><font color="#000080">);
  </font>i1<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">; </font>i2<font color="#000080">:=</font><font color="#800000">25</font><font color="#000080">; </font>i3<font color="#000080">:=</font><font color="#800000">100</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>init<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>virtup<font color="#000080">;
  </font>calcsinus<font color="#000080">;
  </font>frame<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>volplot<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>where<font color="#000080">:</font>word<font color="#000080">;</font>c<font color="#000080">:</font>byte<font color="#000080">);
</font><font color="#FF0000"><b>begin
  </b></font>plot2<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>where<font color="#000080">,</font>c<font color="#000080">);
  </font>plot2<font color="#000080">(</font>x<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,</font>y<font color="#000080">,</font>where<font color="#000080">,</font>c<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">);
  </font>plot2<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,</font>where<font color="#000080">,</font>c<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">);
  </font>plot2<font color="#000080">(</font>x<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,</font>y<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,</font>where<font color="#000080">,</font>c<font color="#000080">+</font><font color="#800000">3</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>volsmoth<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>where<font color="#000080">:</font>word<font color="#000080">);
</font><font color="#FF0000"><b>begin
  </b></font>smooth1<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>where<font color="#000080">);
  </font>smooth1<font color="#000080">(</font>x<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,</font>y<font color="#000080">,</font>where<font color="#000080">);
  </font>smooth1<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,</font>where<font color="#000080">);
  </font>smooth1<font color="#000080">(</font>x<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,</font>y<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,</font>where<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>abort<font color="#000080">:</font>boolean<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>abort<font color="#000080">:=(</font>keypressed<font color="#000080">)</font><font color="#FF0000"><b>and</b></font><font color="#000080">(</font>readkey<font color="#000080">=</font><font color="#800000">#27</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>waves<font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>x<font color="#000080">,</font>y<font color="#000080">,</font>s<font color="#000080">,</font>e<font color="#000080">,</font>loops<font color="#000080">:</font>word<font color="#000080">;
  </font>done<font color="#000080">,</font>dir<font color="#000080">:</font>boolean<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>s<font color="#000080">:=</font><font color="#800000">159</font><font color="#000080">;
  </font>e<font color="#000080">:=</font><font color="#800000">161</font><font color="#000080">;
  </font>done<font color="#000080">:=</font>false<font color="#000080">;
  </font><font color="#FF0000"><b>repeat
    </b></font>clear386<font color="#000080">(</font>work<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
    </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font>s <font color="#FF0000"><b>to </b></font>e <font color="#FF0000"><b>do
    begin
      </b></font>ctab<font color="#000080">[</font>i<font color="#000080">]:=</font>stab1<font color="#000080">[(</font>i<font color="#000080">+</font>i1<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">]+</font>stab2<font color="#000080">[(</font>i<font color="#000080">+</font>i2<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">]+</font>stab3<font color="#000080">[(</font>i<font color="#000080">+</font>i3<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">];
      </font>volplot<font color="#000080">(</font>i<font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">],</font>work<font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">]);
      </font>smooth1<font color="#000080">(</font>i<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">]-</font><font color="#800000">1</font><font color="#000080">,</font>work<font color="#000080">);
      </font>smooth1<font color="#000080">(</font>i<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">],</font>work<font color="#000080">);
      </font>smooth1<font color="#000080">(</font>i<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">]-</font><font color="#800000">1</font><font color="#000080">,</font>work<font color="#000080">);
      </font>smooth1<font color="#000080">(</font>i<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">]+</font><font color="#800000">1</font><font color="#000080">,</font>work<font color="#000080">);
      </font>smooth1<font color="#000080">(</font>i<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">],</font>work<font color="#000080">);
      </font>smooth1<font color="#000080">(</font>i<font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">]+</font><font color="#800000">1</font><font color="#000080">,</font>work<font color="#000080">);
      </font>smooth1<font color="#000080">(</font>i<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">]+</font><font color="#800000">1</font><font color="#000080">,</font>work<font color="#000080">);
      </font>smooth1<font color="#000080">(</font>i<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">]-</font><font color="#800000">1</font><font color="#000080">,</font>work<font color="#000080">);
      </font>smooth1<font color="#000080">(</font>i<font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">],</font>work<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>i1<font color="#000080">:=(</font>i1<font color="#000080">+</font>add1<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">; </font>i2<font color="#000080">:=(</font>i2<font color="#000080">+</font>add2<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">; </font>i3<font color="#000080">:=(</font>i3<font color="#000080">+</font>add3<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">;
    </font>flip386<font color="#000080">(</font>work<font color="#000080">,</font>vidseg<font color="#000080">);
    </font><font color="#FF0000"><b>if</b></font><font color="#000080">(</font>frame <font color="#FF0000"><b>mod </b></font><font color="#800000">3</font><font color="#000080">)=</font><font color="#800000">0 </font><font color="#FF0000"><b>then
    begin
      if</b></font><font color="#000080">(</font>s<font color="#000080">&gt;</font><font color="#800000">1</font><font color="#000080">)</font><font color="#FF0000"><b>then </b></font>dec<font color="#000080">(</font>s<font color="#000080">);
      </font><font color="#FF0000"><b>if</b></font><font color="#000080">(</font>e<font color="#000080">&lt;</font><font color="#800000">318</font><font color="#000080">)</font><font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>e<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>inc<font color="#000080">(</font>frame<font color="#000080">);
    </font><font color="#FF0000"><b>if</b></font><font color="#000080">(</font>s<font color="#000080">&lt;=</font><font color="#800000">1</font><font color="#000080">)</font><font color="#FF0000"><b>and</b></font><font color="#000080">(</font>e<font color="#000080">&gt;=</font><font color="#800000">318</font><font color="#000080">)</font><font color="#FF0000"><b>then </b></font>done<font color="#000080">:=</font>true<font color="#000080">;
  </font><font color="#FF0000"><b>until</b></font><font color="#000080">(</font>done<font color="#000080">)</font><font color="#FF0000"><b>or</b></font><font color="#000080">(</font>abort<font color="#000080">);
  </font>done<font color="#000080">:=</font>false<font color="#000080">;
  </font>s<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>repeat
    </b></font>clear386<font color="#000080">(</font>work<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
    </font>done<font color="#000080">:=</font>true<font color="#000080">;
    </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">319 </font><font color="#FF0000"><b>do
    begin
      if</b></font><font color="#000080">(</font>ctab<font color="#000080">[</font>i<font color="#000080">]&gt;</font><font color="#800000">0</font><font color="#000080">)</font><font color="#FF0000"><b>then </b></font>done<font color="#000080">:=</font>false<font color="#000080">;
      </font>plot2<font color="#000080">(</font>i<font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">],</font>work<font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">]);
      </font>smooth1<font color="#000080">(</font>i<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">]-</font><font color="#800000">1</font><font color="#000080">,</font>work<font color="#000080">);
      </font>smooth1<font color="#000080">(</font>i<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">],</font>work<font color="#000080">);
      </font>smooth1<font color="#000080">(</font>i<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">]-</font><font color="#800000">1</font><font color="#000080">,</font>work<font color="#000080">);
      </font>smooth1<font color="#000080">(</font>i<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">]+</font><font color="#800000">1</font><font color="#000080">,</font>work<font color="#000080">);
      </font>smooth1<font color="#000080">(</font>i<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">],</font>work<font color="#000080">);
      </font>smooth1<font color="#000080">(</font>i<font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">]+</font><font color="#800000">1</font><font color="#000080">,</font>work<font color="#000080">);
      </font>smooth1<font color="#000080">(</font>i<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">]+</font><font color="#800000">1</font><font color="#000080">,</font>work<font color="#000080">);
      </font>smooth1<font color="#000080">(</font>i<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">]-</font><font color="#800000">1</font><font color="#000080">,</font>work<font color="#000080">);
      </font>smooth1<font color="#000080">(</font>i<font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">],</font>work<font color="#000080">);
      </font><font color="#FF0000"><b>if</b></font><font color="#000080">(</font>ctab<font color="#000080">[</font>i<font color="#000080">]&gt;</font><font color="#800000">0</font><font color="#000080">)</font><font color="#FF0000"><b>then </b></font>dec<font color="#000080">(</font>ctab<font color="#000080">[</font>i<font color="#000080">]);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>inc<font color="#000080">(</font>frame<font color="#000080">);
    </font>flip386<font color="#000080">(</font>work<font color="#000080">,</font>vidseg<font color="#000080">);
  </font><font color="#FF0000"><b>until</b></font><font color="#000080">(</font>done<font color="#000080">)</font><font color="#FF0000"><b>or</b></font><font color="#000080">(</font>abort<font color="#000080">);
  </font>done<font color="#000080">:=</font>false<font color="#000080">;
  </font>s<font color="#000080">:=</font><font color="#800000">159</font><font color="#000080">; </font>e<font color="#000080">:=</font><font color="#800000">161</font><font color="#000080">;
  </font><font color="#FF0000"><b>repeat
    </b></font>clear386<font color="#000080">(</font>work<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
    </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font>s <font color="#FF0000"><b>to </b></font>e <font color="#FF0000"><b>do
    begin
      </b></font>ctab<font color="#000080">[</font>i<font color="#000080">]:=</font>stab1<font color="#000080">[(</font>i<font color="#000080">+</font>i1<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">]+</font>stab2<font color="#000080">[(</font>i<font color="#000080">+</font>i2<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">]+</font>stab3<font color="#000080">[(</font>i<font color="#000080">+</font>i3<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">];
      </font>vline2<font color="#000080">(</font>i<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">],</font>work<font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">]);
      </font>vline2<font color="#000080">(</font>i<font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">],</font><font color="#800000">199</font><font color="#000080">,</font>work<font color="#000080">,</font><font color="#FF0000"><b>not</b></font><font color="#000080">(</font>ctab<font color="#000080">[</font>i<font color="#000080">]+</font><font color="#800000">40</font><font color="#000080">));
      </font>smooth1<font color="#000080">(</font>i<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">]-</font><font color="#800000">1</font><font color="#000080">,</font>work<font color="#000080">);
      </font>smooth1<font color="#000080">(</font>i<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">],</font>work<font color="#000080">);
      </font>smooth1<font color="#000080">(</font>i<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">]-</font><font color="#800000">1</font><font color="#000080">,</font>work<font color="#000080">);
      </font>smooth1<font color="#000080">(</font>i<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">]+</font><font color="#800000">1</font><font color="#000080">,</font>work<font color="#000080">);
      </font>smooth1<font color="#000080">(</font>i<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">],</font>work<font color="#000080">);
      </font>smooth1<font color="#000080">(</font>i<font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">]+</font><font color="#800000">1</font><font color="#000080">,</font>work<font color="#000080">);
      </font>smooth1<font color="#000080">(</font>i<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">]+</font><font color="#800000">1</font><font color="#000080">,</font>work<font color="#000080">);
      </font>smooth1<font color="#000080">(</font>i<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">]-</font><font color="#800000">1</font><font color="#000080">,</font>work<font color="#000080">);
      </font>smooth1<font color="#000080">(</font>i<font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">],</font>work<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>flip386<font color="#000080">(</font>work<font color="#000080">,</font>vidseg<font color="#000080">);
    </font><font color="#FF0000"><b>if</b></font><font color="#000080">(</font>frame <font color="#FF0000"><b>mod </b></font><font color="#800000">3</font><font color="#000080">)=</font><font color="#800000">0 </font><font color="#FF0000"><b>then
    begin
      if</b></font><font color="#000080">(</font>s<font color="#000080">&gt;</font><font color="#800000">1</font><font color="#000080">)</font><font color="#FF0000"><b>then </b></font>dec<font color="#000080">(</font>s<font color="#000080">);
      </font><font color="#FF0000"><b>if</b></font><font color="#000080">(</font>e<font color="#000080">&lt;</font><font color="#800000">318</font><font color="#000080">)</font><font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>e<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>inc<font color="#000080">(</font>frame<font color="#000080">);
    </font>i1<font color="#000080">:=(</font>i1<font color="#000080">+</font>add1<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">; </font>i2<font color="#000080">:=(</font>i2<font color="#000080">+</font>add2<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">; </font>i3<font color="#000080">:=(</font>i3<font color="#000080">+</font>add3<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">;
    </font><font color="#FF0000"><b>if</b></font><font color="#000080">(</font>s<font color="#000080">&lt;=</font><font color="#800000">1</font><font color="#000080">)</font><font color="#FF0000"><b>and</b></font><font color="#000080">(</font>e<font color="#000080">&gt;=</font><font color="#800000">318</font><font color="#000080">)</font><font color="#FF0000"><b>then </b></font>done<font color="#000080">:=</font>true<font color="#000080">;
  </font><font color="#FF0000"><b>until</b></font><font color="#000080">(</font>done<font color="#000080">)</font><font color="#FF0000"><b>or</b></font><font color="#000080">(</font>abort<font color="#000080">);
  </font>done<font color="#000080">:=</font>false<font color="#000080">;
  </font>s<font color="#000080">:=</font><font color="#800000">99</font><font color="#000080">; </font>e<font color="#000080">:=</font><font color="#800000">101</font><font color="#000080">;
  </font><font color="#FF0000"><b>repeat
    </b></font>clear386<font color="#000080">(</font>work<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
    </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font>s <font color="#FF0000"><b>to </b></font>e <font color="#FF0000"><b>do
    begin
      </b></font>ctab<font color="#000080">[</font>i<font color="#000080">]:=</font>stab1<font color="#000080">[(</font>i<font color="#000080">+</font>i1<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">]+</font>stab2<font color="#000080">[(</font>i<font color="#000080">+</font>i2<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">]+</font>stab3<font color="#000080">[(</font>i<font color="#000080">+</font>i3<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">];
      </font>hline2<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">]+</font><font color="#800000">99</font><font color="#000080">,</font>i<font color="#000080">,</font>work<font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">]);
      </font>hline2<font color="#000080">(</font>ctab<font color="#000080">[</font>i<font color="#000080">]+</font><font color="#800000">99</font><font color="#000080">,</font><font color="#800000">319</font><font color="#000080">,</font>i<font color="#000080">,</font>work<font color="#000080">,</font><font color="#FF0000"><b>not</b></font><font color="#000080">(</font>ctab<font color="#000080">[</font>i<font color="#000080">]+</font><font color="#800000">40</font><font color="#000080">));
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">319 </font><font color="#FF0000"><b>do
    begin
      </b></font>smooth1<font color="#000080">(</font>i<font color="#000080">,</font>s<font color="#000080">,</font>work<font color="#000080">);
      </font>smooth1<font color="#000080">(</font>i<font color="#000080">,</font>e<font color="#000080">,</font>work<font color="#000080">);
      </font>smooth1<font color="#000080">(</font>i<font color="#000080">,</font>s<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,</font>work<font color="#000080">);
      </font>smooth1<font color="#000080">(</font>i<font color="#000080">,</font>e<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">,</font>work<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>flip386<font color="#000080">(</font>work<font color="#000080">,</font>vidseg<font color="#000080">);
    </font><font color="#FF0000"><b>if</b></font><font color="#000080">(</font>frame <font color="#FF0000"><b>mod </b></font><font color="#800000">3</font><font color="#000080">)=</font><font color="#800000">0 </font><font color="#FF0000"><b>then
    begin
      if</b></font><font color="#000080">(</font>s<font color="#000080">&gt;</font><font color="#800000">1</font><font color="#000080">)</font><font color="#FF0000"><b>then </b></font>dec<font color="#000080">(</font>s<font color="#000080">);
      </font><font color="#FF0000"><b>if</b></font><font color="#000080">(</font>e<font color="#000080">&lt;</font><font color="#800000">198</font><font color="#000080">)</font><font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>e<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>inc<font color="#000080">(</font>frame<font color="#000080">);
    </font>i1<font color="#000080">:=(</font>i1<font color="#000080">+</font>add1<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">; </font>i2<font color="#000080">:=(</font>i2<font color="#000080">+</font>add2<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">; </font>i3<font color="#000080">:=(</font>i3<font color="#000080">+</font>add3<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">;
    </font><font color="#FF0000"><b>if</b></font><font color="#000080">(</font>s<font color="#000080">&lt;=</font><font color="#800000">1</font><font color="#000080">)</font><font color="#FF0000"><b>and</b></font><font color="#000080">(</font>e<font color="#000080">&gt;=</font><font color="#800000">198</font><font color="#000080">)</font><font color="#FF0000"><b>then </b></font>done<font color="#000080">:=</font>true<font color="#000080">;
  </font><font color="#FF0000"><b>until</b></font><font color="#000080">(</font>done<font color="#000080">)</font><font color="#FF0000"><b>or</b></font><font color="#000080">(</font>abort<font color="#000080">);
  </font>done<font color="#000080">:=</font>false<font color="#000080">;
  </font>loops<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font>i<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>repeat
    </b></font>smooth<font color="#000080">(</font>work<font color="#000080">);
    </font>flip386<font color="#000080">(</font>work<font color="#000080">,</font>vidseg<font color="#000080">);
    </font>inc<font color="#000080">(</font>frame<font color="#000080">);
    </font>inc<font color="#000080">(</font>i<font color="#000080">);
    </font>done<font color="#000080">:=(</font>i<font color="#000080">&gt;=</font><font color="#800000">299</font><font color="#000080">);
  </font><font color="#FF0000"><b>until</b></font><font color="#000080">(</font>done<font color="#000080">)</font><font color="#FF0000"><b>or</b></font><font color="#000080">(</font>abort<font color="#000080">);
  </font>done<font color="#000080">:=</font>false<font color="#000080">;
  </font>dir<font color="#000080">:=</font>true<font color="#000080">;
  </font>i<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font>clear386<font color="#000080">(</font>work<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
  </font><font color="#FF0000"><b>repeat
    </b></font>ctab<font color="#000080">[</font>i<font color="#000080">]:=</font>stab1<font color="#000080">[(</font>i<font color="#000080">+</font>i1<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">]+</font>stab2<font color="#000080">[(</font>i<font color="#000080">+</font>i2<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">]+</font>stab3<font color="#000080">[(</font>i<font color="#000080">+</font>i3<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">];
    </font>volplot<font color="#000080">(</font>i<font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">]-</font><font color="#800000">5</font><font color="#000080">,</font>work<font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">]);
    </font><font color="#FF0000"><b>if</b></font><font color="#000080">(</font>dir<font color="#000080">)</font><font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>i<font color="#000080">)</font><font color="#FF0000"><b>else </b></font>dec<font color="#000080">(</font>i<font color="#000080">);
    </font><font color="#FF0000"><b>if</b></font><font color="#000080">(</font>i<font color="#000080">&gt;=</font><font color="#800000">318</font><font color="#000080">)</font><font color="#FF0000"><b>or</b></font><font color="#000080">(</font>i<font color="#000080">&lt;=</font><font color="#800000">0</font><font color="#000080">)</font><font color="#FF0000"><b>then </b></font>dir<font color="#000080">:=</font><font color="#FF0000"><b>not</b></font><font color="#000080">(</font>dir<font color="#000080">);
    </font>smooth<font color="#000080">(</font>work<font color="#000080">);
    </font>flip386<font color="#000080">(</font>work<font color="#000080">,</font>vidseg<font color="#000080">);
    </font>i1<font color="#000080">:=(</font>i1<font color="#000080">+</font>add1<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">; </font>i2<font color="#000080">:=(</font>i2<font color="#000080">+</font>add2<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">; </font>i3<font color="#000080">:=(</font>i3<font color="#000080">+</font>add3<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">;
    </font>done<font color="#000080">:=(</font>loops<font color="#000080">&gt;=</font><font color="#800000">990</font><font color="#000080">);
    </font>inc<font color="#000080">(</font>frame<font color="#000080">);
    </font>inc<font color="#000080">(</font>loops<font color="#000080">);
  </font><font color="#FF0000"><b>until</b></font><font color="#000080">(</font>done<font color="#000080">)</font><font color="#FF0000"><b>or</b></font><font color="#000080">(</font>abort<font color="#000080">);
  </font>done<font color="#000080">:=</font>false<font color="#000080">;
  </font>dir<font color="#000080">:=</font>true<font color="#000080">;
  </font>i<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font>loops<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>repeat
    </b></font>ctab<font color="#000080">[</font>i<font color="#000080">]:=</font>stab1<font color="#000080">[(</font>i<font color="#000080">+</font>i1<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">]+</font>stab2<font color="#000080">[(</font>i<font color="#000080">+</font>i2<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">]+</font>stab3<font color="#000080">[(</font>i<font color="#000080">+</font>i3<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">];
    </font>line2<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>i<font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">],</font>work<font color="#000080">,</font>ctab<font color="#000080">[</font>i<font color="#000080">]);
    </font>smooth<font color="#000080">(</font>work<font color="#000080">);
    </font><font color="#FF0000"><b>if</b></font><font color="#000080">(</font>dir<font color="#000080">)</font><font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>i<font color="#000080">)</font><font color="#FF0000"><b>else </b></font>dec<font color="#000080">(</font>i<font color="#000080">);
    </font><font color="#FF0000"><b>if</b></font><font color="#000080">(</font>i<font color="#000080">&gt;=</font><font color="#800000">318</font><font color="#000080">)</font><font color="#FF0000"><b>or</b></font><font color="#000080">(</font>i<font color="#000080">&lt;=</font><font color="#800000">0</font><font color="#000080">)</font><font color="#FF0000"><b>then </b></font>dir<font color="#000080">:=</font><font color="#FF0000"><b>not</b></font><font color="#000080">(</font>dir<font color="#000080">);
    </font>flip386<font color="#000080">(</font>work<font color="#000080">,</font>vidseg<font color="#000080">);
    </font>i1<font color="#000080">:=(</font>i1<font color="#000080">+</font>add1<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">; </font>i2<font color="#000080">:=(</font>i2<font color="#000080">+</font>add2<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">; </font>i3<font color="#000080">:=(</font>i3<font color="#000080">+</font>add3<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">;
    </font>done<font color="#000080">:=(</font>loops<font color="#000080">&gt;=</font><font color="#800000">960</font><font color="#000080">);
    </font>inc<font color="#000080">(</font>frame<font color="#000080">);
    </font>inc<font color="#000080">(</font>loops<font color="#000080">);
  </font><font color="#FF0000"><b>until</b></font><font color="#000080">(</font>done<font color="#000080">)</font><font color="#FF0000"><b>or</b></font><font color="#000080">(</font>abort<font color="#000080">);
  </font>done<font color="#000080">:=</font>false<font color="#000080">;
  </font>i<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>repeat
    </b></font>smooth<font color="#000080">(</font>work<font color="#000080">);
    </font>flip386<font color="#000080">(</font>work<font color="#000080">,</font>vidseg<font color="#000080">);
    </font>inc<font color="#000080">(</font>frame<font color="#000080">);
    </font>done<font color="#000080">:=(</font>i<font color="#000080">&gt;=</font><font color="#800000">230</font><font color="#000080">);
    </font>inc<font color="#000080">(</font>i<font color="#000080">);
  </font><font color="#FF0000"><b>until</b></font><font color="#000080">(</font>done<font color="#000080">)</font><font color="#FF0000"><b>or</b></font><font color="#000080">(</font>abort<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>bobs<font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>loop<font color="#000080">,</font>cnt<font color="#000080">:</font>longint<font color="#000080">;
  </font>x<font color="#000080">,</font>y<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">,</font>x3<font color="#000080">,</font>y3<font color="#000080">:</font>integer<font color="#000080">;
  </font>i<font color="#000080">,</font>j<font color="#000080">,</font>i2<font color="#000080">,</font>j2<font color="#000080">,</font>i3<font color="#000080">,</font>j3<font color="#000080">:</font>byte<font color="#000080">;
  </font>dir<font color="#000080">,</font>done<font color="#000080">:</font>boolean<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>getvgapal<font color="#000080">(</font>pal1<font color="#000080">);
  </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do
  begin
    with </b></font>pal2<font color="#000080">[</font>i<font color="#000080">]</font><font color="#FF0000"><b>do
    begin
      </b></font>r<font color="#000080">:=(</font>i <font color="#FF0000"><b>shl </b></font><font color="#800000">2</font><font color="#000080">)+</font><font color="#800000">25</font><font color="#000080">;
      </font>g<font color="#000080">:=(</font>i <font color="#FF0000"><b>shl </b></font><font color="#800000">1</font><font color="#000080">)-</font><font color="#800000">1</font><font color="#000080">;
      </font>b<font color="#000080">:=</font>i<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>f2black<font color="#000080">(</font>pal1<font color="#000080">);
  </font>clear386<font color="#000080">(</font>work<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
  </font>i<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font>j<font color="#000080">:=</font><font color="#800000">25</font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>cnt<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">199 </font><font color="#FF0000"><b>do
  begin
    </b></font>x<font color="#000080">:=</font><font color="#800000">2</font><font color="#000080">*</font>stab<font color="#000080">[</font>i<font color="#000080">];
    </font>y<font color="#000080">:=</font>stab<font color="#000080">[</font>j<font color="#000080">];
    </font>inc<font color="#000080">(</font>i<font color="#000080">);
    </font>inc<font color="#000080">(</font>j<font color="#000080">);
    </font>drawsprite<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>work<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>sprpic<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>flip386<font color="#000080">(</font>work<font color="#000080">,</font>vidseg<font color="#000080">);
  </font>ffblack<font color="#000080">(</font>pal2<font color="#000080">);
  </font>i<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font>j<font color="#000080">:=</font><font color="#800000">25</font><font color="#000080">;
  </font>dir<font color="#000080">:=</font>false<font color="#000080">;
  </font>done<font color="#000080">:=</font>false<font color="#000080">;
  </font>loop<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>repeat
    </b></font>x<font color="#000080">:=</font><font color="#800000">2</font><font color="#000080">*</font>stab<font color="#000080">[</font>i<font color="#000080">];
    </font>y<font color="#000080">:=</font>stab<font color="#000080">[</font>j<font color="#000080">];
    </font>inc<font color="#000080">(</font>i<font color="#000080">);
    </font>inc<font color="#000080">(</font>j<font color="#000080">);
    </font>drawsprite<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>work<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>sprpic<font color="#000080">);
    </font>dir<font color="#000080">:=</font><font color="#FF0000"><b>not</b></font><font color="#000080">(</font>dir<font color="#000080">);
    </font><font color="#FF0000"><b>if</b></font><font color="#000080">(</font>dir<font color="#000080">)</font><font color="#FF0000"><b>then </b></font>smooth<font color="#000080">(</font>work<font color="#000080">);
    </font>flip386<font color="#000080">(</font>work<font color="#000080">,</font>vidseg<font color="#000080">);
    </font>inc<font color="#000080">(</font>frame<font color="#000080">);
    </font>inc<font color="#000080">(</font>loop<font color="#000080">);
    </font>done<font color="#000080">:=(</font>loop<font color="#000080">&gt;=</font><font color="#800000">500</font><font color="#000080">);
  </font><font color="#FF0000"><b>until</b></font><font color="#000080">(</font>abort<font color="#000080">)</font><font color="#FF0000"><b>or</b></font><font color="#000080">(</font>done<font color="#000080">);
  </font><font color="#008000"><i>{ End of the first comet bob. }
  </i></font>i<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;   </font>j<font color="#000080">:=</font><font color="#800000">25</font><font color="#000080">;
  </font>i2<font color="#000080">:=</font><font color="#800000">50</font><font color="#000080">; </font>j2<font color="#000080">:=</font><font color="#800000">70</font><font color="#000080">;
  </font>dir<font color="#000080">:=</font>false<font color="#000080">;
  </font>done<font color="#000080">:=</font>false<font color="#000080">;
  </font>loop<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font>clear386<font color="#000080">(</font>work<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
  </font><font color="#FF0000"><b>repeat
    </b></font>x<font color="#000080">:=</font><font color="#800000">2</font><font color="#000080">*</font>stab<font color="#000080">[</font>i<font color="#000080">];   </font>y<font color="#000080">:=</font>stab<font color="#000080">[</font>j<font color="#000080">];
    </font>x2<font color="#000080">:=</font><font color="#800000">2</font><font color="#000080">*</font>stab<font color="#000080">[</font>i2<font color="#000080">]; </font>y2<font color="#000080">:=</font>stab<font color="#000080">[</font>j2<font color="#000080">];
    </font>inc<font color="#000080">(</font>i<font color="#000080">);  </font>inc<font color="#000080">(</font>j<font color="#000080">);
    </font>inc<font color="#000080">(</font>i2<font color="#000080">); </font>inc<font color="#000080">(</font>j2<font color="#000080">);
    </font>drawsprite<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>work<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>sprpic<font color="#000080">);
    </font>drawsprite<font color="#000080">(</font>x2<font color="#000080">,</font>y2<font color="#000080">,</font>work<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>sprpic<font color="#000080">);
    </font>dir<font color="#000080">:=</font><font color="#FF0000"><b>not</b></font><font color="#000080">(</font>dir<font color="#000080">);
    </font><font color="#FF0000"><b>if</b></font><font color="#000080">(</font>dir<font color="#000080">)</font><font color="#FF0000"><b>then </b></font>smooth<font color="#000080">(</font>work<font color="#000080">);
    </font>flip386<font color="#000080">(</font>work<font color="#000080">,</font>vidseg<font color="#000080">);
    </font>inc<font color="#000080">(</font>frame<font color="#000080">);
    </font>inc<font color="#000080">(</font>loop<font color="#000080">);
    </font>done<font color="#000080">:=(</font>loop<font color="#000080">&gt;=</font><font color="#800000">500</font><font color="#000080">);
  </font><font color="#FF0000"><b>until</b></font><font color="#000080">(</font>abort<font color="#000080">)</font><font color="#FF0000"><b>or</b></font><font color="#000080">(</font>done<font color="#000080">);
  </font><font color="#008000"><i>{ end of the second comet bob }
  </i></font>i<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;   </font>j<font color="#000080">:=</font><font color="#800000">25</font><font color="#000080">;
  </font>i2<font color="#000080">:=</font><font color="#800000">50</font><font color="#000080">; </font>j2<font color="#000080">:=</font><font color="#800000">60</font><font color="#000080">;
  </font>i3<font color="#000080">:=</font><font color="#800000">50</font><font color="#000080">; </font>j3<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font>dir<font color="#000080">:=</font>false<font color="#000080">;
  </font>done<font color="#000080">:=</font>false<font color="#000080">;
  </font>loop<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font>clear386<font color="#000080">(</font>work<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
  </font><font color="#FF0000"><b>repeat
    </b></font>x<font color="#000080">:=</font><font color="#800000">2</font><font color="#000080">*</font>stab<font color="#000080">[</font>i<font color="#000080">];   </font>y<font color="#000080">:=</font>stab<font color="#000080">[</font>j<font color="#000080">];
    </font>x2<font color="#000080">:=</font><font color="#800000">2</font><font color="#000080">*</font>stab<font color="#000080">[</font>i2<font color="#000080">]; </font>y2<font color="#000080">:=</font>stab<font color="#000080">[</font>j2<font color="#000080">];
    </font>x3<font color="#000080">:=</font><font color="#800000">2</font><font color="#000080">*</font>stab<font color="#000080">[</font>i3<font color="#000080">]; </font>y3<font color="#000080">:=</font>stab<font color="#000080">[</font>j3<font color="#000080">];
    </font>inc<font color="#000080">(</font>i<font color="#000080">);  </font>inc<font color="#000080">(</font>j<font color="#000080">);
    </font>inc<font color="#000080">(</font>i2<font color="#000080">); </font>dec<font color="#000080">(</font>j2<font color="#000080">);
    </font>dec<font color="#000080">(</font>i3<font color="#000080">); </font>inc<font color="#000080">(</font>j3<font color="#000080">);
    </font>drawsprite<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>work<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>sprpic<font color="#000080">);
    </font>drawsprite<font color="#000080">(</font>x2<font color="#000080">,</font>y2<font color="#000080">,</font>work<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>sprpic<font color="#000080">);
    </font>drawsprite<font color="#000080">(</font>x3<font color="#000080">,</font>y3<font color="#000080">,</font>work<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>sprpic<font color="#000080">);
    </font>dir<font color="#000080">:=</font><font color="#FF0000"><b>not</b></font><font color="#000080">(</font>dir<font color="#000080">);
    </font><font color="#FF0000"><b>if</b></font><font color="#000080">(</font>dir<font color="#000080">)</font><font color="#FF0000"><b>then </b></font>smooth<font color="#000080">(</font>work<font color="#000080">);
    </font>flip386<font color="#000080">(</font>work<font color="#000080">,</font>vidseg<font color="#000080">);
    </font>inc<font color="#000080">(</font>frame<font color="#000080">);
    </font>inc<font color="#000080">(</font>loop<font color="#000080">);
    </font>done<font color="#000080">:=(</font>loop<font color="#000080">&gt;=</font><font color="#800000">500</font><font color="#000080">);
  </font><font color="#FF0000"><b>until</b></font><font color="#000080">(</font>abort<font color="#000080">)</font><font color="#FF0000"><b>or</b></font><font color="#000080">(</font>done<font color="#000080">);
  </font><font color="#008000"><i>{ end of the third comet bob. This one have THREE bobs! }
  </i></font>i<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;   </font>j<font color="#000080">:=</font><font color="#800000">25</font><font color="#000080">;
  </font>dir<font color="#000080">:=</font>false<font color="#000080">;
  </font>done<font color="#000080">:=</font>false<font color="#000080">;
  </font>loop<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font>clear386<font color="#000080">(</font>work<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
  </font><font color="#FF0000"><b>repeat
    </b></font>x<font color="#000080">:=</font><font color="#800000">2</font><font color="#000080">*</font>stab<font color="#000080">[</font>i<font color="#000080">];   </font>y<font color="#000080">:=</font>stab<font color="#000080">[</font>j<font color="#000080">];
    </font>inc<font color="#000080">(</font>i<font color="#000080">);  </font>inc<font color="#000080">(</font>j<font color="#000080">);
    </font>line2<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>x<font color="#000080">+</font><font color="#800000">8</font><font color="#000080">,</font>y<font color="#000080">+</font><font color="#800000">8</font><font color="#000080">,</font>work<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">);
    </font>line2<font color="#000080">(</font><font color="#800000">319</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>x<font color="#000080">+</font><font color="#800000">8</font><font color="#000080">,</font>y<font color="#000080">+</font><font color="#800000">8</font><font color="#000080">,</font>work<font color="#000080">,</font><font color="#800000">4</font><font color="#000080">);
    </font>line2<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">199</font><font color="#000080">,</font>x<font color="#000080">+</font><font color="#800000">8</font><font color="#000080">,</font>y<font color="#000080">+</font><font color="#800000">8</font><font color="#000080">,</font>work<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">);
    </font>line2<font color="#000080">(</font><font color="#800000">319</font><font color="#000080">,</font><font color="#800000">199</font><font color="#000080">,</font>x<font color="#000080">+</font><font color="#800000">8</font><font color="#000080">,</font>y<font color="#000080">+</font><font color="#800000">8</font><font color="#000080">,</font>work<font color="#000080">,</font><font color="#800000">4</font><font color="#000080">);
    </font>drawsprite<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>work<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>sprpic<font color="#000080">);
    </font>dir<font color="#000080">:=</font><font color="#FF0000"><b>not</b></font><font color="#000080">(</font>dir<font color="#000080">);
    </font><font color="#FF0000"><b>if</b></font><font color="#000080">(</font>dir<font color="#000080">)</font><font color="#FF0000"><b>then </b></font>smooth<font color="#000080">(</font>work<font color="#000080">);
    </font>flip386<font color="#000080">(</font>work<font color="#000080">,</font>vidseg<font color="#000080">);
    </font>inc<font color="#000080">(</font>frame<font color="#000080">);
    </font>inc<font color="#000080">(</font>loop<font color="#000080">);
    </font>done<font color="#000080">:=(</font>loop<font color="#000080">&gt;=</font><font color="#800000">800</font><font color="#000080">);
  </font><font color="#FF0000"><b>until</b></font><font color="#000080">(</font>abort<font color="#000080">)</font><font color="#FF0000"><b>or</b></font><font color="#000080">(</font>done<font color="#000080">);
  </font><font color="#008000"><i>{ End of the tracking fire bob. }
  </i></font>getvgapal<font color="#000080">(</font>pal1<font color="#000080">);
  </font>f2black<font color="#000080">(</font>pal1<font color="#000080">);
  </font><font color="#008000"><i>{ Fade to black }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>bobwaves<font color="#000080">;
</font><font color="#008000"><i>{
  This is gonna be a SHORT &quot;chapter&quot;!
  And it's not going to cover ONLY sinus-bobs.
}
</i></font><font color="#FF0000"><b>const
  </b></font>maxtrail<font color="#000080">:</font>word<font color="#000080">=</font><font color="#800000">3</font><font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>c<font color="#000080">,</font>x<font color="#000080">,</font>y<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">,</font>x3<font color="#000080">,</font>y3<font color="#000080">:</font>integer<font color="#000080">;
  </font>loop<font color="#000080">,</font>cnt<font color="#000080">:</font>longint<font color="#000080">;
  </font>dir<font color="#000080">,</font>done<font color="#000080">:</font>boolean<font color="#000080">;
  </font>i<font color="#000080">,</font>j<font color="#000080">:</font>byte<font color="#000080">;

</font><font color="#FF0000"><b>begin
  for </b></font>i<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do
  begin
    with </b></font>pal1<font color="#000080">[</font>i<font color="#000080">]</font><font color="#FF0000"><b>do
    begin
      </b></font>r<font color="#000080">:=</font>i<font color="#000080">*</font><font color="#800000">3</font><font color="#000080">;
      </font>g<font color="#000080">:=</font>i<font color="#000080">*</font><font color="#800000">3</font><font color="#000080">;
      </font>b<font color="#000080">:=</font>i<font color="#000080">*</font><font color="#800000">3</font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>clear386<font color="#000080">(</font>work<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
  </font>clear386<font color="#000080">(</font>vidseg<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
  </font>setvgapal<font color="#000080">(</font>pal1<font color="#000080">);
  </font>done<font color="#000080">:=</font>false<font color="#000080">;
  </font>loop<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>repeat
    </b></font>clear386<font color="#000080">(</font>work<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
    </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#000080">(</font><font color="#800000">184 </font><font color="#FF0000"><b>shr </b></font><font color="#800000">1</font><font color="#000080">)</font><font color="#FF0000"><b>do
    begin
      </b></font>ctab<font color="#000080">[</font>i<font color="#000080">]:=</font>stab1<font color="#000080">[(</font>i<font color="#000080">+</font>i1<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">]+</font>stab2<font color="#000080">[(</font>i<font color="#000080">+</font>i2<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">]+</font>stab3<font color="#000080">[(</font>i<font color="#000080">+</font>i3<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">];
      </font>x<font color="#000080">:=</font>ctab<font color="#000080">[</font>i<font color="#000080">]+</font><font color="#800000">90</font><font color="#000080">;
      </font>y<font color="#000080">:=(</font>i<font color="#000080">);
      </font>drawsprite<font color="#000080">(</font>x<font color="#000080">,</font>y <font color="#FF0000"><b>shl </b></font><font color="#800000">1</font><font color="#000080">,</font>work<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>sprpic<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#000080">(</font><font color="#800000">303 </font><font color="#FF0000"><b>shr </b></font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>do
    begin
      </b></font>ctab<font color="#000080">[</font>i<font color="#000080">]:=</font>stab1<font color="#000080">[(</font>i<font color="#000080">+</font>i1<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">]+</font>stab2<font color="#000080">[(</font>i<font color="#000080">+</font>i2<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">]+</font>stab3<font color="#000080">[(</font>i<font color="#000080">+</font>i3<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">];
      </font>x<font color="#000080">:=</font>i<font color="#000080">;
      </font>y<font color="#000080">:=</font>ctab<font color="#000080">[</font>i<font color="#000080">];
      </font>drawsprite<font color="#000080">(</font>x <font color="#FF0000"><b>shl </b></font><font color="#800000">1</font><font color="#000080">,</font>y<font color="#000080">,</font>work<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>sprpic<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>i1<font color="#000080">:=(</font>i1<font color="#000080">+</font>add1<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">; </font>i2<font color="#000080">:=(</font>i2<font color="#000080">+</font>add2<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">; </font>i3<font color="#000080">:=(</font>i3<font color="#000080">+</font>add3<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">;
    </font>flip386<font color="#000080">(</font>work<font color="#000080">,</font>vidseg<font color="#000080">);
    </font>inc<font color="#000080">(</font>frame<font color="#000080">);
    </font>inc<font color="#000080">(</font>loop<font color="#000080">);
    </font>done<font color="#000080">:=(</font>loop<font color="#000080">&gt;=</font><font color="#800000">1000</font><font color="#000080">);
  </font><font color="#FF0000"><b>until</b></font><font color="#000080">(</font>done<font color="#000080">)</font><font color="#FF0000"><b>or</b></font><font color="#000080">(</font>abort<font color="#000080">);
  </font><font color="#008000"><i>{ End of the first double-sinus-bob. }
  </i></font>clear386<font color="#000080">(</font>work<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
  </font>clear386<font color="#000080">(</font>vidseg<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
  </font>done<font color="#000080">:=</font>false<font color="#000080">;
  </font>loop<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>repeat
    </b></font>clear386<font color="#000080">(</font>work<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
    </font><font color="#FF0000"><b>for </b></font>c<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">319 </font><font color="#FF0000"><b>do
      </b></font>ctab<font color="#000080">[</font>c<font color="#000080">]:=</font>stab1<font color="#000080">[(</font>c<font color="#000080">+</font>i1<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">]+</font>stab2<font color="#000080">[(</font>c<font color="#000080">+</font>i2<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">]+</font>stab3<font color="#000080">[(</font>c<font color="#000080">+</font>i3<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">];
    </font>line2<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font>ctab<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">],</font><font color="#800000">319</font><font color="#000080">,</font>ctab<font color="#000080">[</font><font color="#800000">319</font><font color="#000080">],</font>work<font color="#000080">,</font><font color="#800000">10</font><font color="#000080">);
    </font>line2<font color="#000080">(</font>ctab<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]+</font><font color="#800000">30</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>ctab<font color="#000080">[</font><font color="#800000">199</font><font color="#000080">],</font><font color="#800000">199</font><font color="#000080">,</font>work<font color="#000080">,</font><font color="#800000">10</font><font color="#000080">);
    </font>drawsprite<font color="#000080">(</font>ctab<font color="#000080">[</font><font color="#800000">160</font><font color="#000080">],</font>ctab<font color="#000080">[</font><font color="#800000">99</font><font color="#000080">],</font>work<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>sprpic<font color="#000080">);
    </font>drawsprite<font color="#000080">(</font>ctab<font color="#000080">[</font><font color="#800000">99</font><font color="#000080">],</font>ctab<font color="#000080">[</font><font color="#800000">160</font><font color="#000080">],</font>work<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>sprpic<font color="#000080">);
    </font>drawsprite<font color="#000080">(</font>ctab<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">],</font>ctab<font color="#000080">[</font><font color="#800000">200</font><font color="#000080">],</font>work<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>sprpic<font color="#000080">);
    </font>drawsprite<font color="#000080">(</font>ctab<font color="#000080">[</font><font color="#800000">200</font><font color="#000080">],</font>ctab<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">],</font>work<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>sprpic<font color="#000080">);
    </font>i1<font color="#000080">:=(</font>i1<font color="#000080">+</font>add1<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">; </font>i2<font color="#000080">:=(</font>i2<font color="#000080">+</font>add2<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">; </font>i3<font color="#000080">:=(</font>i3<font color="#000080">+</font>add3<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">;
    </font>flip386<font color="#000080">(</font>work<font color="#000080">,</font>vidseg<font color="#000080">);
    </font>inc<font color="#000080">(</font>frame<font color="#000080">);
    </font>inc<font color="#000080">(</font>loop<font color="#000080">);
    </font>done<font color="#000080">:=(</font>loop<font color="#000080">&gt;=</font><font color="#800000">2000</font><font color="#000080">);
  </font><font color="#FF0000"><b>until</b></font><font color="#000080">(</font>done<font color="#000080">)</font><font color="#FF0000"><b>or</b></font><font color="#000080">(</font>abort<font color="#000080">);
  </font><font color="#008000"><i>{ End of the first sinus-line bob show. }
  </i></font>clear386<font color="#000080">(</font>work<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
  </font>clear386<font color="#000080">(</font>vidseg<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
  </font>done<font color="#000080">:=</font>false<font color="#000080">;
  </font>loop<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>repeat
    for </b></font>c<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">319 </font><font color="#FF0000"><b>do
      </b></font>ctab<font color="#000080">[</font>c<font color="#000080">]:=</font>stab1<font color="#000080">[(</font>c<font color="#000080">+</font>i1<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">]+</font>stab2<font color="#000080">[(</font>c<font color="#000080">+</font>i2<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">]+</font>stab3<font color="#000080">[(</font>c<font color="#000080">+</font>i3<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">];
    </font>line2<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font>ctab<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">],</font><font color="#800000">319</font><font color="#000080">,</font>ctab<font color="#000080">[</font><font color="#800000">319</font><font color="#000080">],</font>work<font color="#000080">,</font><font color="#800000">10</font><font color="#000080">);
    </font>line2<font color="#000080">(</font>ctab<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]+</font><font color="#800000">30</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>ctab<font color="#000080">[</font><font color="#800000">199</font><font color="#000080">],</font><font color="#800000">199</font><font color="#000080">,</font>work<font color="#000080">,</font><font color="#800000">10</font><font color="#000080">);
    </font>drawsprite<font color="#000080">(</font>ctab<font color="#000080">[</font><font color="#800000">160</font><font color="#000080">],</font>ctab<font color="#000080">[</font><font color="#800000">99</font><font color="#000080">],</font>work<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>sprpic<font color="#000080">);
    </font>drawsprite<font color="#000080">(</font>ctab<font color="#000080">[</font><font color="#800000">99</font><font color="#000080">],</font>ctab<font color="#000080">[</font><font color="#800000">160</font><font color="#000080">],</font>work<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>sprpic<font color="#000080">);
    </font>drawsprite<font color="#000080">(</font>ctab<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">],</font>ctab<font color="#000080">[</font><font color="#800000">200</font><font color="#000080">],</font>work<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>sprpic<font color="#000080">);
    </font>drawsprite<font color="#000080">(</font>ctab<font color="#000080">[</font><font color="#800000">200</font><font color="#000080">],</font>ctab<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">],</font>work<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>sprpic<font color="#000080">);
    </font>i1<font color="#000080">:=(</font>i1<font color="#000080">+</font>add1<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">; </font>i2<font color="#000080">:=(</font>i2<font color="#000080">+</font>add2<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">; </font>i3<font color="#000080">:=(</font>i3<font color="#000080">+</font>add3<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">;
    </font>smooth<font color="#000080">(</font>work<font color="#000080">);
    </font>flip386<font color="#000080">(</font>work<font color="#000080">,</font>vidseg<font color="#000080">);
    </font>inc<font color="#000080">(</font>frame<font color="#000080">);
    </font>inc<font color="#000080">(</font>loop<font color="#000080">);
    </font>done<font color="#000080">:=(</font>loop<font color="#000080">&gt;=</font><font color="#800000">1000</font><font color="#000080">);
  </font><font color="#FF0000"><b>until</b></font><font color="#000080">(</font>done<font color="#000080">)</font><font color="#FF0000"><b>or</b></font><font color="#000080">(</font>abort<font color="#000080">);
  </font><font color="#008000"><i>{ End of the smoothed sinus-line bob show. }
  </i></font>getvgapal<font color="#000080">(</font>pal1<font color="#000080">);
  </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do
  begin
    with </b></font>pal2<font color="#000080">[</font>i<font color="#000080">]</font><font color="#FF0000"><b>do
    begin
      </b></font>r<font color="#000080">:=(</font>i <font color="#FF0000"><b>shl </b></font><font color="#800000">2</font><font color="#000080">)+</font><font color="#800000">25</font><font color="#000080">;
      </font>g<font color="#000080">:=(</font>i <font color="#FF0000"><b>shl </b></font><font color="#800000">1</font><font color="#000080">)-</font><font color="#800000">1</font><font color="#000080">;
      </font>b<font color="#000080">:=</font>i<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>fadefrompaltopal<font color="#000080">(</font>pal1<font color="#000080">,</font>pal2<font color="#000080">);
  </font>done<font color="#000080">:=</font>false<font color="#000080">;
  </font>loop<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>repeat
    for </b></font>c<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">319 </font><font color="#FF0000"><b>do
      </b></font>ctab<font color="#000080">[</font>c<font color="#000080">]:=</font>stab1<font color="#000080">[(</font>c<font color="#000080">+</font>i1<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">]+</font>stab2<font color="#000080">[(</font>c<font color="#000080">+</font>i2<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">]+</font>stab3<font color="#000080">[(</font>c<font color="#000080">+</font>i3<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">];
    </font>line2<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font>ctab<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">],</font><font color="#800000">319</font><font color="#000080">,</font>ctab<font color="#000080">[</font><font color="#800000">319</font><font color="#000080">],</font>work<font color="#000080">,</font><font color="#800000">5</font><font color="#000080">);
    </font>line2<font color="#000080">(</font>ctab<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]+</font><font color="#800000">30</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>ctab<font color="#000080">[</font><font color="#800000">199</font><font color="#000080">],</font><font color="#800000">199</font><font color="#000080">,</font>work<font color="#000080">,</font><font color="#800000">5</font><font color="#000080">);
    </font>drawsprite<font color="#000080">(</font>ctab<font color="#000080">[</font><font color="#800000">160</font><font color="#000080">],</font>ctab<font color="#000080">[</font><font color="#800000">99</font><font color="#000080">],</font>work<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>sprpic<font color="#000080">);
    </font>drawsprite<font color="#000080">(</font>ctab<font color="#000080">[</font><font color="#800000">99</font><font color="#000080">],</font>ctab<font color="#000080">[</font><font color="#800000">160</font><font color="#000080">],</font>work<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>sprpic<font color="#000080">);
    </font>drawsprite<font color="#000080">(</font>ctab<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">],</font>ctab<font color="#000080">[</font><font color="#800000">200</font><font color="#000080">],</font>work<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>sprpic<font color="#000080">);
    </font>drawsprite<font color="#000080">(</font>ctab<font color="#000080">[</font><font color="#800000">200</font><font color="#000080">],</font>ctab<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">],</font>work<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>sprpic<font color="#000080">);
    </font>i1<font color="#000080">:=(</font>i1<font color="#000080">+</font>add1<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">; </font>i2<font color="#000080">:=(</font>i2<font color="#000080">+</font>add2<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">; </font>i3<font color="#000080">:=(</font>i3<font color="#000080">+</font>add3<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">;
    </font>smooth<font color="#000080">(</font>work<font color="#000080">);
    </font>line2<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">199</font><font color="#000080">,</font><font color="#800000">319</font><font color="#000080">,</font><font color="#800000">199</font><font color="#000080">,</font>work<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
    </font>flip386<font color="#000080">(</font>work<font color="#000080">,</font>vidseg<font color="#000080">);
    </font>inc<font color="#000080">(</font>frame<font color="#000080">);
    </font>inc<font color="#000080">(</font>loop<font color="#000080">);
    </font>done<font color="#000080">:=(</font>loop<font color="#000080">&gt;=</font><font color="#800000">1000</font><font color="#000080">);
  </font><font color="#FF0000"><b>until</b></font><font color="#000080">(</font>done<font color="#000080">)</font><font color="#FF0000"><b>or</b></font><font color="#000080">(</font>abort<font color="#000080">);
  </font><font color="#008000"><i>{ End of the smoothed sinus-line bob with fire colors show. }
  </i></font>done<font color="#000080">:=</font>false<font color="#000080">;
  </font>loop<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font>cnt<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font>getvgapal<font color="#000080">(</font>pal1<font color="#000080">);
  </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do
  begin
    with </b></font>pal2<font color="#000080">[</font>i<font color="#000080">]</font><font color="#FF0000"><b>do
    begin
      </b></font>r<font color="#000080">:=</font>i<font color="#000080">;
      </font>g<font color="#000080">:=</font>sqr<font color="#000080">(</font>i<font color="#000080">);
      </font>b<font color="#000080">:=(</font>i <font color="#FF0000"><b>shl </b></font><font color="#800000">2</font><font color="#000080">)+</font><font color="#800000">25</font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>fadefrompaltopal<font color="#000080">(</font>pal1<font color="#000080">,</font>pal2<font color="#000080">);
  </font>clear386<font color="#000080">(</font>work<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
  </font>clear386<font color="#000080">(</font>vidseg<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
  </font><font color="#FF0000"><b>repeat
    for </b></font>c<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">319 </font><font color="#FF0000"><b>do
      </b></font>ctab<font color="#000080">[</font>c<font color="#000080">]:=</font>stab1<font color="#000080">[(</font>c<font color="#000080">+</font>i1<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">]+</font>stab2<font color="#000080">[(</font>c<font color="#000080">+</font>i2<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">]+</font>stab3<font color="#000080">[(</font>c<font color="#000080">+</font>i3<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">];
    </font>line2<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font>ctab<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">],</font><font color="#800000">319</font><font color="#000080">,</font>ctab<font color="#000080">[</font><font color="#800000">319</font><font color="#000080">],</font>work<font color="#000080">,(</font>i <font color="#FF0000"><b>mod </b></font><font color="#800000">3</font><font color="#000080">)+</font><font color="#800000">5</font><font color="#000080">);
    </font>line2<font color="#000080">(</font>ctab<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]+</font><font color="#800000">30</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>ctab<font color="#000080">[</font><font color="#800000">199</font><font color="#000080">],</font><font color="#800000">199</font><font color="#000080">,</font>work<font color="#000080">,(</font>i <font color="#FF0000"><b>mod </b></font><font color="#800000">3</font><font color="#000080">)+</font><font color="#800000">4</font><font color="#000080">);
    </font>line2<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">199</font><font color="#000080">,</font><font color="#800000">319</font><font color="#000080">,</font><font color="#800000">199</font><font color="#000080">,</font>work<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
    </font>i1<font color="#000080">:=(</font>i1<font color="#000080">+</font>add1<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">; </font>i2<font color="#000080">:=(</font>i2<font color="#000080">+</font>add2<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">; </font>i3<font color="#000080">:=(</font>i3<font color="#000080">+</font>add3<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">;
    </font>inc<font color="#000080">(</font>cnt<font color="#000080">);
    </font><font color="#FF0000"><b>if</b></font><font color="#000080">(</font>cnt<font color="#000080">&gt;=</font>maxtrail<font color="#000080">)</font><font color="#FF0000"><b>then
    begin
      </b></font>smooth<font color="#000080">(</font>work<font color="#000080">);
      </font>cnt<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>flip386<font color="#000080">(</font>work<font color="#000080">,</font>vidseg<font color="#000080">);
    </font>inc<font color="#000080">(</font>frame<font color="#000080">);
    </font>inc<font color="#000080">(</font>loop<font color="#000080">);
    </font>done<font color="#000080">:=(</font>loop<font color="#000080">&gt;=</font><font color="#800000">1500</font><font color="#000080">);
  </font><font color="#FF0000"><b>until</b></font><font color="#000080">(</font>done<font color="#000080">)</font><font color="#FF0000"><b>or</b></font><font color="#000080">(</font>abort<font color="#000080">);
  </font><font color="#008000"><i>{ End of the traily line. }
  </i></font>i<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font>j<font color="#000080">:=</font><font color="#800000">25</font><font color="#000080">;
  </font>c<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font>loop<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font>done<font color="#000080">:=</font>false<font color="#000080">;
  </font>clear386<font color="#000080">(</font>work<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
  </font><font color="#FF0000"><b>repeat
    if</b></font><font color="#000080">(</font>c<font color="#000080">&gt;</font><font color="#800000">4</font><font color="#000080">)</font><font color="#FF0000"><b>then
    begin
      </b></font>c<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
      </font>smooth<font color="#000080">(</font>work<font color="#000080">);
      </font>line2<font color="#000080">(</font><font color="#800000">160</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">,</font>x<font color="#000080">,</font>y<font color="#000080">,</font>work<font color="#000080">,</font><font color="#800000">8</font><font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>x<font color="#000080">:=</font><font color="#800000">2</font><font color="#000080">*</font>stab<font color="#000080">[</font>i<font color="#000080">];
    </font>y<font color="#000080">:=</font>stab<font color="#000080">[</font>j<font color="#000080">];
    </font>inc<font color="#000080">(</font>i<font color="#000080">);
    </font>inc<font color="#000080">(</font>j<font color="#000080">);
    </font>drawsprite<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>work<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>sprpic<font color="#000080">);
    </font>line2<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">319</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>work<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
    </font>line2<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">199</font><font color="#000080">,</font>work<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
    </font>line2<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">199</font><font color="#000080">,</font><font color="#800000">319</font><font color="#000080">,</font><font color="#800000">199</font><font color="#000080">,</font>work<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
    </font>line2<font color="#000080">(</font><font color="#800000">319</font><font color="#000080">,</font><font color="#800000">199</font><font color="#000080">,</font><font color="#800000">319</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>work<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
    </font>flip386<font color="#000080">(</font>work<font color="#000080">,</font>vidseg<font color="#000080">);
    </font>done<font color="#000080">:=(</font>loop<font color="#000080">&gt;</font><font color="#800000">1500</font><font color="#000080">);
    </font>inc<font color="#000080">(</font>c<font color="#000080">);
    </font>inc<font color="#000080">(</font>loop<font color="#000080">);
  </font><font color="#FF0000"><b>until</b></font><font color="#000080">(</font>done<font color="#000080">)</font><font color="#FF0000"><b>or</b></font><font color="#000080">(</font>abort<font color="#000080">);
  </font><font color="#008000"><i>{ Okay, maybe not exactly a bob-line, but it still rock! ;-) }
  </i></font>clear386<font color="#000080">(</font>work<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
  </font>clear386<font color="#000080">(</font>vidseg<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
  </font>done<font color="#000080">:=</font>false<font color="#000080">;
  </font>dir<font color="#000080">:=</font>false<font color="#000080">;
  </font>loop<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>repeat
    </b></font>clear386<font color="#000080">(</font>work<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
    </font><font color="#FF0000"><b>for </b></font>c<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">319 </font><font color="#FF0000"><b>do
      </b></font>ctab<font color="#000080">[</font>c<font color="#000080">]:=</font>stab1<font color="#000080">[(</font>c<font color="#000080">+</font>i1<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">]+</font>stab2<font color="#000080">[(</font>c<font color="#000080">+</font>i2<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">]+</font>stab3<font color="#000080">[(</font>c<font color="#000080">+</font>i3<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">];
    </font>line2<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font>ctab<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">],</font><font color="#800000">319</font><font color="#000080">,</font>ctab<font color="#000080">[</font><font color="#800000">319</font><font color="#000080">],</font>work<font color="#000080">,</font><font color="#800000">3</font><font color="#000080">);
    </font>line2<font color="#000080">(</font>ctab<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]+</font><font color="#800000">30</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>ctab<font color="#000080">[</font><font color="#800000">199</font><font color="#000080">],</font><font color="#800000">199</font><font color="#000080">,</font>work<font color="#000080">,</font><font color="#800000">3</font><font color="#000080">);
    </font>line2<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font>ctab<font color="#000080">[</font><font color="#800000">319</font><font color="#000080">],</font><font color="#800000">319</font><font color="#000080">,</font>ctab<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">],</font>work<font color="#000080">,</font><font color="#800000">30</font><font color="#000080">);
    </font>line2<font color="#000080">(</font>ctab<font color="#000080">[</font><font color="#800000">199</font><font color="#000080">],</font><font color="#800000">0</font><font color="#000080">,</font>ctab<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">],</font><font color="#800000">199</font><font color="#000080">,</font>work<font color="#000080">,</font><font color="#800000">30</font><font color="#000080">);
    </font>line2<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font>ctab<font color="#000080">[</font><font color="#800000">160</font><font color="#000080">],</font><font color="#800000">319</font><font color="#000080">,</font>ctab<font color="#000080">[</font><font color="#800000">99</font><font color="#000080">],</font>work<font color="#000080">,</font><font color="#800000">50</font><font color="#000080">);
    </font>line2<font color="#000080">(</font>ctab<font color="#000080">[</font><font color="#800000">99</font><font color="#000080">],</font><font color="#800000">0</font><font color="#000080">,</font>ctab<font color="#000080">[</font><font color="#800000">160</font><font color="#000080">],</font><font color="#800000">199</font><font color="#000080">,</font>work<font color="#000080">,</font><font color="#800000">50</font><font color="#000080">);
    </font>drawsprite<font color="#000080">(</font>ctab<font color="#000080">[</font><font color="#800000">160</font><font color="#000080">],</font>ctab<font color="#000080">[</font><font color="#800000">99</font><font color="#000080">],</font>work<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>sprpic<font color="#000080">);
    </font>drawsprite<font color="#000080">(</font>ctab<font color="#000080">[</font><font color="#800000">99</font><font color="#000080">],</font>ctab<font color="#000080">[</font><font color="#800000">160</font><font color="#000080">],</font>work<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>sprpic<font color="#000080">);
    </font>drawsprite<font color="#000080">(</font>ctab<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">],</font>ctab<font color="#000080">[</font><font color="#800000">200</font><font color="#000080">],</font>work<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>sprpic<font color="#000080">);
    </font>drawsprite<font color="#000080">(</font>ctab<font color="#000080">[</font><font color="#800000">200</font><font color="#000080">],</font>ctab<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">],</font>work<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>sprpic<font color="#000080">);
    </font>drawsprite<font color="#000080">(</font>ctab<font color="#000080">[</font><font color="#800000">100</font><font color="#000080">],</font>ctab<font color="#000080">[</font><font color="#800000">10</font><font color="#000080">],</font>work<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>sprpic<font color="#000080">);
    </font>drawsprite<font color="#000080">(</font>ctab<font color="#000080">[</font><font color="#800000">10</font><font color="#000080">],</font>ctab<font color="#000080">[</font><font color="#800000">199</font><font color="#000080">],</font>work<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>sprpic<font color="#000080">);
    </font>drawsprite<font color="#000080">(</font>ctab<font color="#000080">[</font><font color="#800000">300</font><font color="#000080">],</font>ctab<font color="#000080">[</font><font color="#800000">50</font><font color="#000080">],</font>work<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>sprpic<font color="#000080">);
    </font>drawsprite<font color="#000080">(</font>ctab<font color="#000080">[</font><font color="#800000">50</font><font color="#000080">],</font>ctab<font color="#000080">[</font><font color="#800000">100</font><font color="#000080">],</font>work<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>sprpic<font color="#000080">);
    </font>i1<font color="#000080">:=(</font>i1<font color="#000080">+</font>add1<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">; </font>i2<font color="#000080">:=(</font>i2<font color="#000080">+</font>add2<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">; </font>i3<font color="#000080">:=(</font>i3<font color="#000080">+</font>add3<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">;
    </font>flip386<font color="#000080">(</font>work<font color="#000080">,</font>vidseg<font color="#000080">);
    </font>inc<font color="#000080">(</font>frame<font color="#000080">);
    </font>inc<font color="#000080">(</font>loop<font color="#000080">);
    </font>done<font color="#000080">:=(</font>loop<font color="#000080">&gt;=</font><font color="#800000">2300</font><font color="#000080">);
  </font><font color="#FF0000"><b>until</b></font><font color="#000080">(</font>done<font color="#000080">)</font><font color="#FF0000"><b>or</b></font><font color="#000080">(</font>abort<font color="#000080">);
  </font><font color="#008000"><i>{ End of retarded crosses with EIGHT bobs show. }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>main<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>init<font color="#000080">;
  </font>setmode<font color="#000080">(</font><font color="#800000">$13</font><font color="#000080">);
  </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">199 </font><font color="#FF0000"><b>do </b></font>setpal<font color="#000080">(</font>i<font color="#000080">,</font>i <font color="#FF0000"><b>div </b></font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">20</font><font color="#000080">+</font>i <font color="#FF0000"><b>div </b></font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">10</font><font color="#000080">+</font>i <font color="#FF0000"><b>div </b></font><font color="#800000">6</font><font color="#000080">);
  </font>t1<font color="#000080">:=</font>timer<font color="#000080">;
  </font>waves<font color="#000080">;
  </font>bobs<font color="#000080">;
  </font>bobwaves<font color="#000080">;
  </font>t2<font color="#000080">:=(</font>timer<font color="#000080">-</font>t1<font color="#000080">);
  </font>setmode<font color="#000080">(</font><font color="#800000">$03</font><font color="#000080">);
  </font>writeln<font color="#000080">(</font><font color="#800000">'SiNUS &quot;DEMO&quot;. Whatever. Coded by Sune Marcher'</font><font color="#000080">);
  </font>writeln<font color="#000080">(</font><font color="#800000">'You saw '</font><font color="#000080">,</font>frame<font color="#000080">,</font><font color="#800000">' of the demos frames.'</font><font color="#000080">);
  </font>writeln<font color="#000080">(</font><font color="#800000">'It took '</font><font color="#000080">,(</font>t2<font color="#000080">/</font><font color="#800000">18.2</font><font color="#000080">):</font><font color="#800000">0</font><font color="#000080">:</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">' seconds.'</font><font color="#000080">);
  </font>writeln<font color="#000080">(</font><font color="#800000">'  ('</font><font color="#000080">,((</font>t2<font color="#000080">/</font><font color="#800000">18.2</font><font color="#000080">)/</font><font color="#800000">60</font><font color="#000080">):</font><font color="#800000">0</font><font color="#000080">:</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">' minutes).'</font><font color="#000080">);
  </font>writeln<font color="#000080">(</font>round<font color="#000080">((</font>frame<font color="#000080">*</font><font color="#800000">18.2</font><font color="#000080">)/</font>t2<font color="#000080">),</font><font color="#800000">' fps.'</font><font color="#000080">);
  </font>virtdn<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>main<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0220.PAS">Original</a><b>]</b></p></body>
</html>
