<html>
<head><title> "Vector Line Intersection" by PAUL SANTA-MARIA</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0167.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
FROM:	Paul R. Santa-Maria 71674,422, 71674,422
TO:	Gayle Davis, 72067,2726
DATE:	1/16/95 10:47 PM
Re:	SWAG submission (GRAPHICS)

{The algorithm of this line intersection routine is based on vector
cross products of the line endpoints.  The recursion is only one level 
deep, to handle a specific degenerate case (collinear lines).  If the 
degenerate case is detected, it nudges one end of one line and looks 
to see if the intersection criterion is still fulfilled.  If not, it 
nudges the other end and tries again.--Steve Schafer [CIS 76711,522]}
 
  </i></font><font color="#FF0000"><b>function </b></font>INTERSECT<font color="#000080">(</font>L1X1<font color="#000080">, </font>L1Y1<font color="#000080">, </font>L1X2<font color="#000080">, </font>L1Y2<font color="#000080">,
                     </font>L2X1<font color="#000080">, </font>L2Y1<font color="#000080">, </font>L2X2<font color="#000080">, </font>L2Y2 <font color="#000080">: </font>LongInt<font color="#000080">) : </font>Boolean<font color="#000080">;
  </font><font color="#FF0000"><b>var
    </b></font>Z1<font color="#000080">, </font>Z2<font color="#000080">, </font>Z3<font color="#000080">, </font>Z4 <font color="#000080">: </font>LongInt<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>Z1 <font color="#000080">:= </font>L1X1<font color="#000080">*(</font>L2Y2<font color="#000080">-</font>L2Y1<font color="#000080">)+</font>L2X2<font color="#000080">*(</font>L2Y1<font color="#000080">-</font>L1Y1<font color="#000080">)+</font>L2X1<font color="#000080">*(</font>L1Y1<font color="#000080">-</font>L2Y2<font color="#000080">);
    </font>Z2 <font color="#000080">:= </font>L2X1<font color="#000080">*(</font>L1Y1<font color="#000080">-</font>L1Y2<font color="#000080">)+</font>L1X1<font color="#000080">*(</font>L1Y2<font color="#000080">-</font>L2Y1<font color="#000080">)+</font>L1X2<font color="#000080">*(</font>L2Y1<font color="#000080">-</font>L1Y1<font color="#000080">);
    </font>Z3 <font color="#000080">:= </font>L1X2<font color="#000080">*(</font>L2Y1<font color="#000080">-</font>L2Y2<font color="#000080">)+</font>L2X1<font color="#000080">*(</font>L2Y2<font color="#000080">-</font>L1Y2<font color="#000080">)+</font>L2X2<font color="#000080">*(</font>L1Y2<font color="#000080">-</font>L2Y1<font color="#000080">);
    </font>Z4 <font color="#000080">:= </font>L2X2<font color="#000080">*(</font>L1Y2<font color="#000080">-</font>L1Y1<font color="#000080">)+</font>L1X2<font color="#000080">*(</font>L1Y1<font color="#000080">-</font>L2Y2<font color="#000080">)+</font>L1X1<font color="#000080">*(</font>L2Y2<font color="#000080">-</font>L1Y2<font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>Z1 <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>Z2 <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>Z3 <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>Z4 <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
      </b></font>INTERSECT <font color="#000080">:= (</font>INTERSECT<font color="#000080">(</font>L1X1<font color="#000080">, </font>L1Y1<font color="#000080">, </font>L1X2<font color="#000080">, </font>L1Y2<font color="#000080">, </font>L2X1<font color="#000080">, </font>L2Y1<font color="#000080">, 
                              </font>L2X1<font color="#000080">+</font>L2Y2<font color="#000080">-</font>L2Y1<font color="#000080">, </font>L2Y1<font color="#000080">+</font>L2X1<font color="#000080">-</font>L2X2<font color="#000080">) </font><font color="#FF0000"><b>or 
                    </b></font>INTERSECT<font color="#000080">(</font>L1X1<font color="#000080">, </font>L1Y1<font color="#000080">, </font>L1X2<font color="#000080">, </font>L1Y2<font color="#000080">, </font>L2X2<font color="#000080">+</font>L2Y2<font color="#000080">-</font>L2Y1<font color="#000080">,
                              </font>L2Y2<font color="#000080">+</font>L2X1<font color="#000080">-</font>L2X2<font color="#000080">, </font>L2X2<font color="#000080">, </font>L2Y2<font color="#000080">))
    </font><font color="#FF0000"><b>else if </b></font><font color="#000080">(((</font>Z1 <font color="#000080">&gt;= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>Z2 <font color="#000080">&gt;= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>Z3 <font color="#000080">&gt;= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>Z4 <font color="#000080">&gt;= </font><font color="#800000">0</font><font color="#000080">)) </font><font color="#FF0000"><b>or
             </b></font><font color="#000080">((</font>Z1 <font color="#000080">&lt;= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>Z2 <font color="#000080">&lt;= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>Z3 <font color="#000080">&lt;= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>Z4 <font color="#000080">&lt;= </font><font color="#800000">0</font><font color="#000080">))) </font><font color="#FF0000"><b>then
      </b></font>INTERSECT <font color="#000080">:= </font>True
    <font color="#FF0000"><b>else
      </b></font>INTERSECT <font color="#000080">:= </font>False<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0167.PAS">Original</a><b>]</b></p></body>
</html>
