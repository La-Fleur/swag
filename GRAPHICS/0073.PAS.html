<html>
<head><title> "RIP Bezier Curves" by SEAN PALMER</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0073.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
From: SEAN PALMER
Subj: RIP Bezier Curve
---------------------------------------------------------------------------
 NO&gt; Does anyone have any code for constructing a RIP Bezier curve that is
 NO&gt; exactly the same as the one used by Telegrafix developers. I have some
 NO&gt; code that comes close, but close isn't good enough. I need this to be
 NO&gt; dead on accurate.
 NO&gt; PS. I'm willing to share my code with others that are interested in
 NO&gt; RIP.

{Public domain by Sean Palmer}
{converted from Steve Enns' original Basic subroutines by Sean Palmer}

</i></font><font color="#FF0000"><b>var </b></font>color<font color="#000080">:</font>byte<font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>plot<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">:</font>word<font color="#000080">);</font><font color="#FF0000"><b>begin
 </b></font>mem<font color="#000080">[</font><font color="#800000">$A000</font><font color="#000080">:</font>y<font color="#000080">*</font><font color="#800000">320</font><font color="#000080">+</font>x<font color="#000080">]:=</font>color<font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>type
 </b></font>coord<font color="#000080">=</font><font color="#FF0000"><b>record </b></font>x<font color="#000080">,</font>y<font color="#000080">:</font>integer<font color="#000080">; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font>CurveDataRec<font color="#000080">=</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">65521 </font><font color="#FF0000"><b>div </b></font>sizeof<font color="#000080">(</font>coord<font color="#000080">)]</font><font color="#FF0000"><b>of </b></font>coord<font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>drawBSpline<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>d0<font color="#000080">:</font>coord<font color="#000080">;</font>nPoints<font color="#000080">,</font>nSteps<font color="#000080">:</font>word<font color="#000080">);
 </font><font color="#FF0000"><b>const </b></font>nsa<font color="#000080">=</font><font color="#800000">1</font><font color="#000080">/</font><font color="#800000">6</font><font color="#000080">; </font>nsb<font color="#000080">=</font><font color="#800000">2</font><font color="#000080">/</font><font color="#800000">3</font><font color="#000080">;
 </font><font color="#FF0000"><b>var
  </b></font>i<font color="#000080">,</font>i2<font color="#000080">,</font>xx<font color="#000080">,</font>yy<font color="#000080">:</font>integer<font color="#000080">;
  </font>t<font color="#000080">,</font>ta<font color="#000080">,</font>t2<font color="#000080">,</font>t2a<font color="#000080">,</font>t3<font color="#000080">,</font>t3a<font color="#000080">,</font>nc1<font color="#000080">,</font>nc2<font color="#000080">,</font>nc3<font color="#000080">,</font>nc4<font color="#000080">,</font>step<font color="#000080">:</font>real<font color="#000080">;
  </font>d<font color="#000080">:</font>curveDataRec <font color="#FF0000"><b>absolute </b></font>d0<font color="#000080">;
</font><font color="#FF0000"><b>begin
 </b></font>step<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">/</font>nSteps<font color="#000080">;
 </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>nPoints<font color="#000080">-</font><font color="#800000">4 </font><font color="#FF0000"><b>do begin
  </b></font>color<font color="#000080">:=</font>i<font color="#000080">+</font><font color="#800000">32</font><font color="#000080">+</font><font color="#800000">2</font><font color="#000080">;
  </font>t<font color="#000080">:=</font><font color="#800000">0.0</font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>i2<font color="#000080">:=</font>pred<font color="#000080">(</font>nSteps<font color="#000080">)</font><font color="#FF0000"><b>downto </b></font><font color="#800000">0 </font><font color="#FF0000"><b>do begin
   </b></font>t<font color="#000080">:=</font>t<font color="#000080">+</font>step<font color="#000080">;
   </font>ta<font color="#000080">:=</font>t<font color="#000080">*</font><font color="#800000">0.5</font><font color="#000080">; </font>t2<font color="#000080">:=</font>t<font color="#000080">*</font>t<font color="#000080">; </font>t2A<font color="#000080">:=</font>t2<font color="#000080">*</font><font color="#800000">0.5</font><font color="#000080">; </font>t3<font color="#000080">:=</font>t2<font color="#000080">*</font>t<font color="#000080">; </font>t3A<font color="#000080">:=</font>t3<font color="#000080">*</font><font color="#800000">0.5</font><font color="#000080">;
   </font>nc1<font color="#000080">:=-</font>nsa<font color="#000080">*</font>t3<font color="#000080">+</font>t2A<font color="#000080">-</font>ta<font color="#000080">+</font>nsa<font color="#000080">;
   </font>nc2<font color="#000080">:=</font>t3a<font color="#000080">-</font>t2<font color="#000080">+</font>nsb<font color="#000080">;
   </font>nc3<font color="#000080">:=-</font>t3a<font color="#000080">+</font>t2a<font color="#000080">+</font>ta<font color="#000080">+</font>nsa<font color="#000080">;
   </font>nc4<font color="#000080">:=</font>nsa<font color="#000080">*</font>t3<font color="#000080">;
   </font>xx<font color="#000080">:=</font>round<font color="#000080">(</font>nc1<font color="#000080">*</font>d<font color="#000080">[</font>i<font color="#000080">].</font>x<font color="#000080">+</font>nc2<font color="#000080">*</font>d<font color="#000080">[</font>succ<font color="#000080">(</font>i<font color="#000080">)].</font>x<font color="#000080">+</font>nc3<font color="#000080">*</font>d<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">].</font>x<font color="#000080">+</font>nc4<font color="#000080">*</font>d<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">3</font><font color="#000080">].</font>x<font color="#000080">);
   </font>yy<font color="#000080">:=</font>round<font color="#000080">(</font>nc1<font color="#000080">*</font>d<font color="#000080">[</font>i<font color="#000080">].</font>y<font color="#000080">+</font>nc2<font color="#000080">*</font>d<font color="#000080">[</font>succ<font color="#000080">(</font>i<font color="#000080">)].</font>y<font color="#000080">+</font>nc3<font color="#000080">*</font>d<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">].</font>y<font color="#000080">+</font>nc4<font color="#000080">*</font>d<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">3</font><font color="#000080">].</font>y<font color="#000080">);
   </font>plot<font color="#000080">(</font>xx<font color="#000080">,</font>yy<font color="#000080">);
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>drawBezier<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>d0<font color="#000080">:</font>coord<font color="#000080">;</font>nPoints<font color="#000080">,</font>nSteps<font color="#000080">:</font>word<font color="#000080">);
 </font><font color="#FF0000"><b>const </b></font>nsa<font color="#000080">=</font><font color="#800000">1</font><font color="#000080">/</font><font color="#800000">6</font><font color="#000080">; </font>nsb<font color="#000080">=</font><font color="#800000">2</font><font color="#000080">/</font><font color="#800000">3</font><font color="#000080">;
 </font><font color="#FF0000"><b>var
  </b></font>i<font color="#000080">,</font>i2<font color="#000080">,</font>i3<font color="#000080">,</font>xx<font color="#000080">,</font>yy<font color="#000080">:</font>integer<font color="#000080">;
  </font>t<font color="#000080">,</font>tm3<font color="#000080">,</font>t2<font color="#000080">,</font>t2m3<font color="#000080">,</font>t3<font color="#000080">,</font>t3m3<font color="#000080">,</font>nc1<font color="#000080">,</font>nc2<font color="#000080">,</font>nc3<font color="#000080">,</font>nc4<font color="#000080">,</font>step<font color="#000080">:</font>real<font color="#000080">;
  </font>d<font color="#000080">:</font>curveDataRec <font color="#FF0000"><b>absolute </b></font>d0<font color="#000080">;
</font><font color="#FF0000"><b>begin
 </b></font>step<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">/</font>nSteps<font color="#000080">;
 </font><font color="#FF0000"><b>for </b></font>i2<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>pred<font color="#000080">(</font>nPoints<font color="#000080">) </font><font color="#FF0000"><b>div </b></font><font color="#800000">4 </font><font color="#FF0000"><b>do begin
  </b></font>i<font color="#000080">:=</font>i2<font color="#000080">*</font><font color="#800000">4</font><font color="#000080">;
  </font>t<font color="#000080">:=</font><font color="#800000">0.0</font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>i3<font color="#000080">:=</font>pred<font color="#000080">(</font>nSteps<font color="#000080">) </font><font color="#FF0000"><b>downto </b></font><font color="#800000">0 </font><font color="#FF0000"><b>do begin
   </b></font>t<font color="#000080">:=</font>t<font color="#000080">+</font>step<font color="#000080">;
   </font>tm3<font color="#000080">:=</font>t<font color="#000080">*</font><font color="#800000">3.0</font><font color="#000080">; </font>t2<font color="#000080">:=</font>t<font color="#000080">*</font>t<font color="#000080">; </font>t2m3<font color="#000080">:=</font>t2<font color="#000080">*</font><font color="#800000">3.0</font><font color="#000080">; </font>t3<font color="#000080">:=</font>t2<font color="#000080">*</font>t<font color="#000080">; </font>t3m3<font color="#000080">:=</font>t3<font color="#000080">*</font><font color="#800000">3.0</font><font color="#000080">;
   </font>nc1<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">-</font>tm3<font color="#000080">+</font>t2m3<font color="#000080">-</font>t3<font color="#000080">;
   </font>nc2<font color="#000080">:=</font>t3m3<font color="#000080">-</font><font color="#800000">2.0</font><font color="#000080">*</font>t2m3<font color="#000080">+</font>tm3<font color="#000080">;
   </font>nc3<font color="#000080">:=</font>t2m3<font color="#000080">-</font>t3m3<font color="#000080">;
   </font>nc4<font color="#000080">:=</font>t3<font color="#000080">;

   </font>xx<font color="#000080">:=</font>round<font color="#000080">(</font>nc1<font color="#000080">*</font>d<font color="#000080">[</font>i<font color="#000080">].</font>x<font color="#000080">+</font>nc2<font color="#000080">*</font>d<font color="#000080">[</font>succ<font color="#000080">(</font>i<font color="#000080">)].</font>x<font color="#000080">+</font>nc3<font color="#000080">*</font>d<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">].</font>x<font color="#000080">+</font>nc4<font color="#000080">*</font>d<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">3</font><font color="#000080">].</font>x<font color="#000080">);
   </font>yy<font color="#000080">:=</font>round<font color="#000080">(</font>nc1<font color="#000080">*</font>d<font color="#000080">[</font>i<font color="#000080">].</font>y<font color="#000080">+</font>nc2<font color="#000080">*</font>d<font color="#000080">[</font>succ<font color="#000080">(</font>i<font color="#000080">)].</font>y<font color="#000080">+</font>nc3<font color="#000080">*</font>d<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">].</font>y<font color="#000080">+</font>nc4<font color="#000080">*</font>d<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">3</font><font color="#000080">].</font>y<font color="#000080">);
   </font>plot<font color="#000080">(</font>xx<font color="#000080">,</font>yy<font color="#000080">);
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>const </b></font>numpoints<font color="#000080">=</font><font color="#800000">40</font><font color="#000080">;

</font><font color="#FF0000"><b>var </b></font>c<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[-</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">2</font><font color="#000080">+</font>numPoints<font color="#000080">]</font><font color="#FF0000"><b>of </b></font>coord<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>i<font color="#000080">:</font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
 asm </b></font><font color="#FF00FF">mov ax,$13; int $10; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{init vga/mcga graphics}
 </i></font>randomize<font color="#000080">;
 </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>numPoints <font color="#FF0000"><b>do with </b></font>c<font color="#000080">[</font>i<font color="#000080">] </font><font color="#FF0000"><b>do begin
  </b></font>x<font color="#000080">:=</font>i<font color="#000080">*(</font><font color="#800000">319 </font><font color="#FF0000"><b>div </b></font>numPoints<font color="#000080">);    </font><font color="#008000"><i>{for precision demo}
 {x:=random(320);}             {for fun demo}
  </i></font>y<font color="#000080">:=</font>random<font color="#000080">(</font><font color="#800000">200</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>numPoints <font color="#FF0000"><b>div </b></font><font color="#800000">2 </font><font color="#FF0000"><b>do </b></font>c<font color="#000080">[</font>i<font color="#000080">*</font><font color="#800000">2</font><font color="#000080">+</font><font color="#800000">1</font><font color="#000080">].</font>y<font color="#000080">:=</font>c<font color="#000080">[</font>i<font color="#000080">*</font><font color="#800000">2</font><font color="#000080">].</font>y<font color="#000080">;    </font><font color="#008000"><i>{fit closer}
 </i></font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>numPoints <font color="#FF0000"><b>do with </b></font>c<font color="#000080">[</font>i<font color="#000080">] </font><font color="#FF0000"><b>do begin </b></font>color<font color="#000080">:=</font>i<font color="#000080">+</font><font color="#800000">32</font><font color="#000080">; </font>plot<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">); </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font>c<font color="#000080">[-</font><font color="#800000">1</font><font color="#000080">]:=</font>c<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]; </font>c<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]:=</font>c<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">];  </font><font color="#008000"><i>{replicate end points so curves fit to input}
 </i></font>c<font color="#000080">[</font>numPoints<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">]:=</font>c<font color="#000080">[</font>numPoints<font color="#000080">]; </font>c<font color="#000080">[</font>numPoints<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">]:=</font>c<font color="#000080">[</font>numPoints<font color="#000080">];
 </font>drawBSpline<font color="#000080">(</font>c<font color="#000080">[-</font><font color="#800000">1</font><font color="#000080">],</font>numPoints<font color="#000080">+</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">256</font><font color="#000080">); </font><font color="#008000"><i>{set third parm to 256 for precision, 64 f}
 </i></font>readln<font color="#000080">;
 </font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">mov ax,3; int $10; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{text mode again}
 </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0073.PAS">Original</a><b>]</b></p></body>
</html>
