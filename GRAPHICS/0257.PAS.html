<html>
<head><title> "BMP Loader/Saver" by ELTETO EDMOND</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0257.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#000080">&gt; </font>Can anyone send me source <font color="#FF0000"><b>of </b></font>BMP Loader<font color="#000080">/</font>Saver<font color="#000080">.
&gt; </font><font color="#FF0000"><b>If </b></font>you help me<font color="#000080">, </font>I would be thankful <font color="#FF0000"><b>to </b></font>you<font color="#000080">.
&gt;
&gt; </font>Mohammad Reza Nikrou
<font color="#000080">&gt; </font>nikrou<font color="#000080">@</font>kadous<font color="#000080">.</font>gu<font color="#000080">.</font>ac<font color="#000080">.</font>ir
<font color="#000080">&gt;


</font>Hi<font color="#000080">,
  </font>i send you a loader BMP<font color="#000080">, </font><font color="#FF0000"><b>if </b></font>you are interested <font color="#FF0000"><b>try </b></font>this <font color="#000080">:

</font><font color="#FF0000"><b>To </b></font>ENCODE <font color="#000080">(</font><font color="#FF0000"><b>and </b></font>decode<font color="#000080">) </font>GIF files
two programs <font color="#000080">:

</font>gifpasse<font color="#000080">.</font>zip <font color="#000080">: </font>ftp<font color="#000080">.</font>usask<font color="#000080">.</font>ca <font color="#000080">/</font>pub<font color="#000080">/</font>dos<font color="#000080">/</font>prog<font color="#000080">/</font>gifpasse<font color="#000080">.</font>zip
endegif<font color="#000080">.</font>zip  <font color="#000080">: </font>ftp<font color="#000080">.</font>uni<font color="#000080">-</font>mainz<font color="#000080">.</font>de<font color="#000080">/</font>pub<font color="#000080">/</font>pc<font color="#000080">/</font>local<font color="#000080">/</font>dos<font color="#000080">/</font>programm<font color="#000080">/</font><font color="#FF0000"><b>pascal</b></font><font color="#000080">/</font>endegif<font color="#000080">.</font>zip
               ftp<font color="#000080">.</font>ku<font color="#000080">-</font>eichstaett<font color="#000080">.</font>de<font color="#000080">/</font>pub<font color="#000080">/</font>dos<font color="#000080">/</font>graphics<font color="#000080">/</font>gifutils<font color="#000080">/</font>endegif<font color="#000080">.</font>zip
               ftp<font color="#000080">.</font>uni<font color="#000080">-</font>koeln<font color="#000080">.</font>de<font color="#000080">/</font>msdos<font color="#000080">/</font>graphics<font color="#000080">/</font>gifutils<font color="#000080">/</font>endegif<font color="#000080">.</font>zip
         ftp<font color="#000080">.</font>informatik<font color="#000080">.</font>hu<font color="#000080">-</font>berlin<font color="#000080">.</font>de<font color="#000080">/</font>pub<font color="#000080">/</font>pc<font color="#000080">/</font>msdos<font color="#000080">/</font>graphics<font color="#000080">/</font>gifutils<font color="#000080">/</font>endegif<font color="#000080">.</font>zip

  Edmond

<font color="#008000"><i>{X,Y - screen coordinates, if x &lt;0 bmp file will be centered on the
screen

file_name - name and path of the bmp file

erro - will return a error condition (0 no error)
if error &lt;0 it's a bmp problem
if error &gt;0 it's a disk error ( dos error codes)

Carlos Rondao
Universidade Catolica Portuguesa
Lisboa
Portugal

Send me a note if you have any comments or problems ...}


</i></font><font color="#FF0000"><b>uses </b></font>dos<font color="#000080">,</font>graph<font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>grDriver <font color="#000080">: </font>Integer<font color="#000080">;
  </font>grMode   <font color="#000080">: </font>Integer<font color="#000080">;
  </font>ErrCode  <font color="#000080">: </font>Integer<font color="#000080">;
  </font>erro <font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>const </b></font>filename <font color="#000080">= </font><font color="#800000">'c:\download\picture1.bmp'</font><font color="#000080">;</font><font color="#008000"><i>{put filename and path here}
</i></font><font color="#FF0000"><b>Procedure </b></font>GetEgaPal<font color="#000080">(</font>cor <font color="#000080">:</font>byte <font color="#000080">;</font><font color="#FF0000"><b>var </b></font>pal<font color="#000080">:</font>byte<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>asm
   </b></font><font color="#FF00FF">mov bl,cor
   mov ah,$10
   mov al,$07
   int $10
   les DI,pal
   mov ES:[DI],BH
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>SetEgaPal<font color="#000080">(</font>cor <font color="#000080">:</font>byte <font color="#000080">;</font>pal<font color="#000080">:</font>byte<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>asm
   </b></font><font color="#FF00FF">mov bl,cor
   mov bh,pal
   mov ah,$10
   mov al,$00
   int $10
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>SetPal16<font color="#000080">(</font>Cor<font color="#000080">,</font>r<font color="#000080">,</font>g<font color="#000080">,</font>b <font color="#000080">: </font>byte<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">mov AH,$10
  mov AL,$10
  xor BH,BH
  mov BL,cor
  mov DH,r
  mov CH,g
  mov CL,b
  int $10
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{===================================================}
</i></font><font color="#FF0000"><b>Procedure </b></font>GetPal16<font color="#000080">(</font>Cor<font color="#000080">:</font>byte<font color="#000080">;</font><font color="#FF0000"><b>Var </b></font>r<font color="#000080">,</font>g<font color="#000080">,</font>b <font color="#000080">: </font>byte<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">mov AH,$10
  mov AL,$15
  xor BH,BH
  mov BL,cor
  int $10
  les DI,r
  mov ES:[DI],DH
  les DI,g
  mov ES:[DI],CH
  les DI,b
  mov ES:[DI],CL
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>SetAllPal16<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>pal <font color="#000080">;</font>cor<font color="#000080">,</font>n<font color="#000080">:</font>integer<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">mov AH,$10
  mov AL,$12
  mov BX,cor
  mov CX,n
  les DX,pal
  int $10
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>EgaDefault<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>i<font color="#000080">,</font>reg <font color="#000080">: </font>byte<font color="#000080">;
    </font>r<font color="#000080">,</font>g<font color="#000080">,</font>b <font color="#000080">: </font>byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
 for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">15 </font><font color="#FF0000"><b>do
  begin
   </b></font>GetEgaPal<font color="#000080">(</font>i<font color="#000080">,</font>reg<font color="#000080">);
   </font>SetEgaPal<font color="#000080">(</font>i<font color="#000080">,</font>i<font color="#000080">);
   </font>GetPal16<font color="#000080">(</font>reg<font color="#000080">,</font>r<font color="#000080">,</font>g<font color="#000080">,</font>b<font color="#000080">);
   </font>SetPal16<font color="#000080">(</font>i<font color="#000080">,</font>r<font color="#000080">,</font>g<font color="#000080">,</font>b<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;


</font><font color="#FF0000"><b>procedure </b></font>Load_BMP<font color="#000080">(</font>X<font color="#000080">,</font>Y<font color="#000080">:</font>integer<font color="#000080">;</font>file_name <font color="#000080">: </font>pathstr<font color="#000080">;</font><font color="#FF0000"><b>var </b></font>erro <font color="#000080">:
</font>integer<font color="#000080">);
 </font><font color="#FF0000"><b>VAR
   </b></font>header <font color="#000080">: </font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">27</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>word<font color="#000080">;
   </font>rgb_struct <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">] </font><font color="#FF0000"><b>of record
                                  </b></font>b<font color="#000080">,</font>g<font color="#000080">,</font>r<font color="#000080">,</font>cor <font color="#000080">: </font>byte<font color="#000080">;
                                 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font>rgb_triple <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">] </font><font color="#FF0000"><b>of record
                                  </b></font>b<font color="#000080">,</font>g<font color="#000080">,</font>r <font color="#000080">: </font>byte<font color="#000080">;
                                 </font><font color="#FF0000"><b>end absolute </b></font>rgb_struct<font color="#000080">;
   </font>pal <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">] </font><font color="#FF0000"><b>of record
                            </b></font>red<font color="#000080">,</font>green<font color="#000080">,</font>blue <font color="#000080">: </font>byte<font color="#000080">;
                           </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font>F <font color="#000080">: </font><font color="#FF0000"><b>File</b></font><font color="#000080">;
    </font>i<font color="#000080">,</font>j <font color="#000080">: </font>integer<font color="#000080">;
  </font>locer <font color="#000080">: </font>integer<font color="#000080">;
   </font>Xp<font color="#000080">,</font>Yp<font color="#000080">,</font>lido<font color="#000080">,</font>larg<font color="#000080">,</font>larg1<font color="#000080">,</font>alt<font color="#000080">,</font>cores<font color="#000080">,</font>bufsize<font color="#000080">,</font>desloc<font color="#000080">,</font>reloc<font color="#000080">,</font>grupo <font color="#000080">:
</font>word<font color="#000080">;
    </font>buf <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">10000</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
    </font>pic_point_1<font color="#000080">,</font>pic_point_2 <font color="#000080">: </font>byte<font color="#000080">;
    </font>sign <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">2</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>char <font color="#FF0000"><b>absolute </b></font>header<font color="#000080">;
    </font>maxX<font color="#000080">,</font>maxY <font color="#000080">: </font>word<font color="#000080">;
  </font><font color="#FF0000"><b>Begin
   </b></font>maxX <font color="#000080">:= </font>GetmaxX<font color="#000080">;
   </font>maxY <font color="#000080">:= </font>GetMaxY<font color="#000080">;
   </font>assign<font color="#000080">(</font>f<font color="#000080">,</font>file_name<font color="#000080">);
   </font><font color="#008000"><i>{$I-}
   </i></font>reset<font color="#000080">(</font>f<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
   </font><font color="#008000"><i>{$I+}
   </i></font>erro <font color="#000080">:= </font>IoResult<font color="#000080">;
   </font><font color="#FF0000"><b>if </b></font>erro<font color="#000080">&lt;&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>THEN </b></font>exit<font color="#000080">;
   </font><font color="#008000"><i>{$I-}
   </i></font>blockread<font color="#000080">(</font>f<font color="#000080">,</font>header<font color="#000080">,</font><font color="#800000">18</font><font color="#000080">,</font>lido<font color="#000080">);
   </font>erro <font color="#000080">:= </font>IoResult<font color="#000080">;
   </font><font color="#FF0000"><b>if </b></font>erro <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then
    if </b></font>sign<font color="#000080">&lt;&gt;</font><font color="#800000">'BM' </font><font color="#FF0000"><b>THEN
       </b></font>erro <font color="#000080">:= -</font><font color="#800000">100</font><font color="#000080">;
   </font><font color="#FF0000"><b>IF </b></font>erro <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>THEN
    BEGIN
     </b></font>desloc <font color="#000080">:= </font>header<font color="#000080">[</font><font color="#800000">8</font><font color="#000080">]-</font><font color="#800000">4</font><font color="#000080">;
     </font><font color="#FF0000"><b>if </b></font>desloc <font color="#000080">&gt;</font><font color="#800000">36 </font><font color="#FF0000"><b>then </b></font>desloc <font color="#000080">:= </font><font color="#800000">36</font><font color="#000080">;
     </font>blockread<font color="#000080">(</font>f<font color="#000080">,</font>header<font color="#000080">[</font><font color="#800000">10</font><font color="#000080">],</font>desloc<font color="#000080">,</font>lido<font color="#000080">);
     </font>erro <font color="#000080">:= </font>IoResult<font color="#000080">;
    </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>if </b></font>erro <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>THEN
    begin
     </b></font>reloc <font color="#000080">:= </font>ord<font color="#000080">(</font>desloc<font color="#000080">&lt;&gt;</font><font color="#800000">8</font><font color="#000080">);
     </font>larg <font color="#000080">:= </font>header<font color="#000080">[</font><font color="#800000">10</font><font color="#000080">];
     </font>alt <font color="#000080">:= </font>header<font color="#000080">[</font><font color="#800000">11</font><font color="#000080">+</font>reloc<font color="#000080">];
     </font>cores <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>shl </b></font>header<font color="#000080">[</font><font color="#800000">13</font><font color="#000080">+</font><font color="#800000">2</font><font color="#000080">*</font>reloc<font color="#000080">];
     </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>alt <font color="#000080">&gt; </font>maxY<font color="#000080">) </font><font color="#FF0000"><b>OR </b></font><font color="#000080">(</font>larg<font color="#000080">&gt;</font>maxX<font color="#000080">) </font><font color="#FF0000"><b>then
        </b></font>erro <font color="#000080">:= -</font><font color="#800000">101</font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>If </b></font>erro <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>THEN
    BEGIN
     if </b></font><font color="#000080">(</font>X<font color="#000080">&lt;</font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>OR </b></font><font color="#000080">(</font>Y<font color="#000080">&lt;</font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>THEN
       Begin
        </b></font>X <font color="#000080">:= (</font>maxX<font color="#000080">-</font>larg<font color="#000080">) </font><font color="#FF0000"><b>DIV </b></font><font color="#800000">2</font><font color="#000080">;
        </font>Y <font color="#000080">:= (</font>maxY<font color="#000080">-</font>alt<font color="#000080">) </font><font color="#FF0000"><b>DIV </b></font><font color="#800000">2</font><font color="#000080">;
       </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
     </font>blockread<font color="#000080">(</font>f<font color="#000080">,</font>rgb_struct<font color="#000080">,</font>header<font color="#000080">[</font><font color="#800000">6</font><font color="#000080">]-</font><font color="#800000">18</font><font color="#000080">-</font>desloc<font color="#000080">,</font>lido<font color="#000080">);
     </font>erro <font color="#000080">:= </font>IoResult<font color="#000080">;
    </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>IF </b></font>erro <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>THEN
     BEGIN
         if </b></font>cores <font color="#000080">= </font><font color="#800000">16 </font><font color="#FF0000"><b>THEN
          begin
           </b></font>larg1 <font color="#000080">:= </font><font color="#800000">8</font><font color="#000080">*(</font>larg <font color="#FF0000"><b>DIV </b></font><font color="#800000">8</font><font color="#000080">) + </font><font color="#800000">8</font><font color="#000080">*</font>ord<font color="#000080">(</font>larg <font color="#FF0000"><b>MOD </b></font><font color="#800000">8</font><font color="#000080">&lt;&gt;</font><font color="#800000">0</font><font color="#000080">);
           </font>LARG1 <font color="#000080">:= </font>LARG1 <font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">;
          </font><font color="#FF0000"><b>end
         else
          begin
           </b></font>larg1 <font color="#000080">:= </font><font color="#800000">4</font><font color="#000080">*(</font>larg <font color="#FF0000"><b>DIV </b></font><font color="#800000">4</font><font color="#000080">) + </font><font color="#800000">4</font><font color="#000080">*</font>ord<font color="#000080">(</font>larg <font color="#FF0000"><b>MOD </b></font><font color="#800000">4</font><font color="#000080">&lt;&gt;</font><font color="#800000">0</font><font color="#000080">);
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
         </font><font color="#FF0000"><b>if </b></font>reloc <font color="#000080">= </font><font color="#800000">1 </font><font color="#FF0000"><b>THEN
          for </b></font>i <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>cores<font color="#000080">-</font><font color="#800000">1 </font><font color="#FF0000"><b>do
           Begin
            </b></font>pal<font color="#000080">[</font>i<font color="#000080">].</font>red <font color="#000080">:= </font>rgb_struct<font color="#000080">[</font>i<font color="#000080">].</font>r <font color="#FF0000"><b>DIV </b></font><font color="#800000">4</font><font color="#000080">;
            </font>pal<font color="#000080">[</font>i<font color="#000080">].</font>green <font color="#000080">:= </font>rgb_struct<font color="#000080">[</font>i<font color="#000080">].</font>g <font color="#FF0000"><b>DIV </b></font><font color="#800000">4</font><font color="#000080">;
            </font>pal<font color="#000080">[</font>i<font color="#000080">].</font>blue <font color="#000080">:= </font>rgb_struct<font color="#000080">[</font>i<font color="#000080">].</font>b <font color="#FF0000"><b>DIV </b></font><font color="#800000">4  </font><font color="#000080">;
           </font><font color="#FF0000"><b>end
         else
          for </b></font>i <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>cores<font color="#000080">-</font><font color="#800000">1 </font><font color="#FF0000"><b>do
           Begin
            </b></font>pal<font color="#000080">[</font>i<font color="#000080">].</font>red <font color="#000080">:= </font>rgb_triple<font color="#000080">[</font>i<font color="#000080">].</font>r <font color="#FF0000"><b>DIV </b></font><font color="#800000">4</font><font color="#000080">;
            </font>pal<font color="#000080">[</font>i<font color="#000080">].</font>green <font color="#000080">:= </font>rgb_triple<font color="#000080">[</font>i<font color="#000080">].</font>g <font color="#FF0000"><b>DIV </b></font><font color="#800000">4</font><font color="#000080">;
            </font>pal<font color="#000080">[</font>i<font color="#000080">].</font>blue <font color="#000080">:= </font>rgb_triple<font color="#000080">[</font>i<font color="#000080">].</font>b <font color="#FF0000"><b>DIV </b></font><font color="#800000">4  </font><font color="#000080">;
           </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
         </font>EgaDefault<font color="#000080">;
         </font>setallpal16<font color="#000080">(</font>Pal<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>cores<font color="#000080">);
         </font>bufsize <font color="#000080">:= </font>larg1<font color="#000080">*(</font><font color="#800000">10000 </font><font color="#FF0000"><b>DIV </b></font>larg1<font color="#000080">);
         </font>lido <font color="#000080">:= </font>bufsize<font color="#000080">;
         </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>lido<font color="#000080">=</font>bufsize<font color="#000080">) </font><font color="#FF0000"><b>AND </b></font><font color="#000080">(</font>erro<font color="#000080">=</font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>do
          begin
           </b></font>blockread<font color="#000080">(</font>f<font color="#000080">,</font>buf<font color="#000080">,</font>bufsize<font color="#000080">,</font>lido<font color="#000080">);
           </font>erro <font color="#000080">:= </font>IoResult<font color="#000080">;
           </font><font color="#FF0000"><b>if </b></font>erro<font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>Then
            IF </b></font>Cores <font color="#000080">= </font><font color="#800000">16 </font><font color="#FF0000"><b>THEN
             For </b></font>j <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>lido <font color="#FF0000"><b>DIV </b></font>larg1 <font color="#FF0000"><b>do
              For </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>larg<font color="#000080">-</font><font color="#800000">1 </font><font color="#FF0000"><b>do
               Begin
                </b></font>XP <font color="#000080">:= </font>X<font color="#000080">+</font>i<font color="#000080">;
                </font>YP <font color="#000080">:= </font>Y<font color="#000080">+</font>alt<font color="#000080">-</font>j<font color="#000080">;
                </font>pic_point_1 <font color="#000080">:= </font>buf<font color="#000080">[(</font>j<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">)*</font>larg1<font color="#000080">+ </font><font color="#800000">1 </font><font color="#000080">+ </font>i <font color="#FF0000"><b>DIV </b></font><font color="#800000">2</font><font color="#000080">];
                </font>pic_point_2<font color="#000080">:=(</font>pic_point_1 <font color="#FF0000"><b>SHR </b></font><font color="#800000">4</font><font color="#000080">)*((</font>i<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>MOD </b></font><font color="#800000">2</font><font color="#000080">) +
                 (</font>pic_point_1 <font color="#FF0000"><b>AND </b></font><font color="#800000">15</font><font color="#000080">)*((</font>i<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">) </font><font color="#FF0000"><b>MOD </b></font><font color="#800000">2</font><font color="#000080">) ;
                </font>putpixel<font color="#000080">(</font>XP<font color="#000080">,</font>YP<font color="#000080">,</font>pic_point_2<font color="#000080">)
              </font><font color="#FF0000"><b>End
            ELSE
             For </b></font>j <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>lido <font color="#FF0000"><b>DIV </b></font>larg1 <font color="#FF0000"><b>do
              For </b></font>i<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>larg <font color="#FF0000"><b>do
               Begin
                </b></font>XP <font color="#000080">:= </font>X<font color="#000080">+(</font>i<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">);
                </font>YP <font color="#000080">:= </font>Y<font color="#000080">+</font>alt<font color="#000080">-</font>j<font color="#000080">;
                </font>pic_point_1 <font color="#000080">:= </font>buf<font color="#000080">[(</font>j<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">)*</font>larg1<font color="#000080">+</font>i<font color="#000080">];
                </font>putpixel<font color="#000080">(</font>XP<font color="#000080">,</font>YP<font color="#000080">,</font>pic_point_1<font color="#000080">);
               </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
           </font>Y <font color="#000080">:= </font>Y <font color="#000080">- </font>lido <font color="#FF0000"><b>DIV </b></font>larg1<font color="#000080">;
         </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ while }
    </i></font><font color="#FF0000"><b>END</b></font><font color="#000080">; </font><font color="#008000"><i>{ erro = 0 }
    </i></font>close<font color="#000080">(</font>f<font color="#000080">);
    </font><font color="#008000"><i>{$I+}
    </i></font>locer <font color="#000080">:= </font>Ioresult<font color="#000080">;
    </font><font color="#FF0000"><b>If </b></font>erro <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>THEN </b></font>erro <font color="#000080">:= </font>locer<font color="#000080">;
 </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>grDriver <font color="#000080">:= </font>Detect<font color="#000080">;
  </font>InitGraph<font color="#000080">(</font>grDriver<font color="#000080">,</font>grMode<font color="#000080">,</font><font color="#800000">'c:\tp\bgi'</font><font color="#000080">);
  </font>ErrCode <font color="#000080">:= </font>GraphResult<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>ErrCode <font color="#000080">= </font>grOk <font color="#FF0000"><b>then
    begin
      </b></font>Load_BMP<font color="#000080">(-</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>filename<font color="#000080">,</font>erro<font color="#000080">);
      </font>readln<font color="#000080">;
      </font>CloseGraph<font color="#000080">;
    </font><font color="#FF0000"><b>end
  else
    </b></font>WriteLn<font color="#000080">(</font><font color="#800000">'Graphics error:'</font><font color="#000080">,
            </font>GraphErrorMsg<font color="#000080">(</font>ErrCode<font color="#000080">));

</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0257.PAS">Original</a><b>]</b></p></body>
</html>
