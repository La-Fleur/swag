<html>
<head><title> "Mandelbrot and Julia Maker" by MIGUEL MARTINEZ</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0139.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
For all of you who are interested on fractals, here is a little program,
taken from a source code in Modula-2, that will draw a Mandelbrot fractal.

Just one problem: If your computer doesn't have a math coprocessor, the
program will run &quot;a bit&quot; slow :).

Try modifying all the constants, you'll get strange results :).
}

{$X+ Enable Extended Syntax                                       }

</i></font><font color="#FF0000"><b>Program </b></font>Mandelbrot<font color="#000080">;     </font><font color="#008000"><i>{Using real numbers. For TP 6.0 and above }

</i></font><font color="#FF0000"><b>Uses </b></font>Crt<font color="#000080">;               </font><font color="#008000"><i>{Only to use &quot;ReadKey&quot; Function.          }

</i></font><font color="#FF0000"><b>Const </b></font>Colours<font color="#000080">=</font><font color="#800000">32</font><font color="#000080">;       </font><font color="#008000"><i>{Number of colors to be on the image.     }
      </i></font>Width<font color="#000080">=</font><font color="#800000">320</font><font color="#000080">;        </font><font color="#008000"><i>{Width of the image.                      }
      </i></font>Height<font color="#000080">=</font><font color="#800000">200</font><font color="#000080">;       </font><font color="#008000"><i>{Height of the image.                     }
      </i></font>Limit<font color="#000080">=</font><font color="#800000">8.0</font><font color="#000080">;        </font><font color="#008000"><i>{Until when we calculate.                 }
      </i></font>XRMin<font color="#000080">=-</font><font color="#800000">2.0</font><font color="#000080">;       </font><font color="#008000"><i>{Left limit of the fractal.               }
      </i></font>XRMax<font color="#000080">=</font><font color="#800000">1.0</font><font color="#000080">;        </font><font color="#008000"><i>{Right limit of the fractal.              }
      </i></font>YRMin<font color="#000080">=-</font><font color="#800000">1.3</font><font color="#000080">;       </font><font color="#008000"><i>{Lower limit of the fractal.              }
      </i></font>YRMax<font color="#000080">=</font><font color="#800000">1.3</font><font color="#000080">;        </font><font color="#008000"><i>{Upper limit of the fractal.              }

</i></font><font color="#FF0000"><b>Type </b></font>Palette<font color="#000080">=</font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">767</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte<font color="#000080">;  </font><font color="#008000"><i>{MCGA/VGA palette type       }

</i></font><font color="#FF0000"><b>Var </b></font>XPos<font color="#000080">,</font>YPos<font color="#000080">:</font>Word<font color="#000080">;

</font><font color="#008000"><i>{Sets the desired video mode (13h)                                }
</i></font><font color="#FF0000"><b>Procedure </b></font>SetVideoMode<font color="#000080">(</font>VideoMode<font color="#000080">:</font>Byte<font color="#000080">); </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm
  </b></font><font color="#FF00FF">xor ax,ax                 </font><font color="#008000"><i>{BIOS Function 00h: Set Video Mode.   }
  </i></font><font color="#FF00FF">mov al,VideoMode          </font><font color="#008000"><i>{Desired Video Mode.                  }
  </i></font><font color="#FF00FF">int 10h
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#008000"><i>{Creates a palette: Black --&gt; red --&gt; yellow                      }
</i></font><font color="#FF0000"><b>Procedure </b></font>MakePalette<font color="#000080">;
</font><font color="#FF0000"><b>Var </b></font>CPal<font color="#000080">:</font>Palette<font color="#000080">;
    </font>i<font color="#000080">:</font>Byte<font color="#000080">;

  </font><font color="#008000"><i>{Sets the palette.                                              }
  </i></font><font color="#FF0000"><b>Procedure </b></font>SetPalette<font color="#000080">(</font>Pal<font color="#000080">:</font>Palette<font color="#000080">); </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>Asm
    </b></font><font color="#FF00FF">push es
    mov ax,1012h            </font><font color="#008000"><i>{BIOS function 10h, subfunction 12h.  }
    </i></font><font color="#FF00FF">xor bx,bx               </font><font color="#008000"><i>{first color register.                }
    </i></font><font color="#FF00FF">mov cx,20h              </font><font color="#008000"><i>{number of color registers.           }
    </i></font><font color="#FF00FF">les dx,Pal              </font><font color="#008000"><i>{ES:DX Segment:Offset of color table. }
    </i></font><font color="#FF00FF">Int 10h
    pop es
  </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Begin
  For </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">15 </font><font color="#FF0000"><b>do
  Begin
    </b></font>CPal<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">*</font>i<font color="#000080">]:=</font><font color="#800000">4</font><font color="#000080">*</font>i<font color="#000080">+</font><font color="#800000">3</font><font color="#000080">; </font>CPal<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">*</font>i<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">]:=</font><font color="#800000">0</font><font color="#000080">; </font>CPal<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">*</font>i<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">]:=</font><font color="#800000">0</font><font color="#000080">;
    </font>CPal<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">*</font>i<font color="#000080">+</font><font color="#800000">48</font><font color="#000080">]:=</font><font color="#800000">63</font><font color="#000080">; </font>CPal<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">*</font>i<font color="#000080">+</font><font color="#800000">49</font><font color="#000080">]:=</font><font color="#800000">4</font><font color="#000080">*</font>i<font color="#000080">+</font><font color="#800000">3</font><font color="#000080">; </font>CPal<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">*</font>i<font color="#000080">+</font><font color="#800000">50</font><font color="#000080">]:=</font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font>SetPalette<font color="#000080">(</font>CPal<font color="#000080">);
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#008000"><i>{Draws a Plot of the desired color on screen.                     }
</i></font><font color="#FF0000"><b>Procedure </b></font>DrawPixel<font color="#000080">(</font>XPos<font color="#000080">,</font>YPos<font color="#000080">:</font>Word<font color="#000080">; </font>PlotColour<font color="#000080">:</font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Begin
  </b></font>Mem<font color="#000080">[</font><font color="#800000">$A000</font><font color="#000080">:</font>YPos<font color="#000080">*</font><font color="#800000">320</font><font color="#000080">+</font>XPos<font color="#000080">]:=</font>PlotColour<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#008000"><i>{Needs to be explained? ;-)                                       }
</i></font><font color="#FF0000"><b>Procedure </b></font>Beep<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>Sound<font color="#000080">(</font><font color="#800000">3000</font><font color="#000080">); </font>Delay<font color="#000080">(</font><font color="#800000">90</font><font color="#000080">); </font>Sound<font color="#000080">(</font><font color="#800000">2500</font><font color="#000080">); </font>Delay<font color="#000080">(</font><font color="#800000">90</font><font color="#000080">);
  </font>NoSound<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#008000"><i>{Calculates the color for each point.                             }
</i></font><font color="#FF0000"><b>Function </b></font>ComputeColour<font color="#000080">(</font>XPos<font color="#000080">,</font>YPos<font color="#000080">:</font>Word<font color="#000080">):</font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>Var </b></font>RealP<font color="#000080">,</font>ImagP<font color="#000080">:</font>Real<font color="#000080">;
    </font>CurrX<font color="#000080">,</font>CurrY<font color="#000080">:</font>Real<font color="#000080">;
    </font>a2<font color="#000080">,</font>b2<font color="#000080">:</font>Real<font color="#000080">;
    </font>Counter<font color="#000080">:</font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>CurrX<font color="#000080">:=</font>XPos<font color="#000080">/</font>Width<font color="#000080">*(</font>XRMax<font color="#000080">-</font>XRMin<font color="#000080">)+</font>XRMin<font color="#000080">;
  </font>CurrY<font color="#000080">:=</font>YPos<font color="#000080">/</font>Height<font color="#000080">*(</font>YRMax<font color="#000080">-</font>YRMin<font color="#000080">)+</font>YRMin<font color="#000080">;
  </font>RealP<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font>ImagP<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font>Counter<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>Repeat
    </b></font>a2<font color="#000080">:=</font>Sqr<font color="#000080">(</font>RealP<font color="#000080">);
    </font>b2<font color="#000080">:=</font>Sqr<font color="#000080">(</font>ImagP<font color="#000080">);
    </font>ImagP<font color="#000080">:=</font><font color="#800000">2</font><font color="#000080">*</font>RealP<font color="#000080">*</font>ImagP<font color="#000080">+</font>CurrY<font color="#000080">;
    </font>RealP<font color="#000080">:=</font>a2<font color="#000080">-</font>b2<font color="#000080">+</font>CurrX<font color="#000080">;
    </font>Inc<font color="#000080">(</font>Counter<font color="#000080">);
  </font><font color="#FF0000"><b>Until </b></font><font color="#000080">(</font>Counter<font color="#000080">&gt;=</font>Colours<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>a2<font color="#000080">+</font>b2<font color="#000080">&gt;=</font>Limit<font color="#000080">);
  </font>ComputeColour<font color="#000080">:=</font>Counter<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Begin
  </b></font>Writeln<font color="#000080">(</font><font color="#800000">'Program to draw Fractals of Mandelbrot.'</font><font color="#000080">);
  </font>Writeln<font color="#000080">(</font><font color="#800000">'Written by Miguel Mart&iexcl;nez. '</font><font color="#000080">);
  </font>Writeln<font color="#000080">(</font><font color="#800000">'Press any key to continue...'</font><font color="#000080">);
  </font><font color="#FF0000"><b>If </b></font>ReadKey<font color="#000080">=</font><font color="#800000">#0 </font><font color="#FF0000"><b>Then </b></font>ReadKey<font color="#000080">;   </font><font color="#008000"><i>{Skip double codes.               }

  </i></font>SetVideoMode<font color="#000080">(</font><font color="#800000">19</font><font color="#000080">);             </font><font color="#008000"><i>{Set 320x200x256 graphics mode.   }
  </i></font>MakePalette<font color="#000080">;
  </font><font color="#FF0000"><b>For </b></font>YPos<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#000080">(</font>Height<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>do
    For </b></font>XPos<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#000080">(</font>Width<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>do
      </b></font>DrawPixel<font color="#000080">(</font>XPos<font color="#000080">,</font>YPos<font color="#000080">,</font>ComputeColour<font color="#000080">(</font>XPos<font color="#000080">,</font>YPos<font color="#000080">));
  </font>Beep<font color="#000080">;                         </font><font color="#008000"><i>{Beep when finished.              }
  </i></font><font color="#FF0000"><b>If </b></font>ReadKey<font color="#000080">=</font><font color="#800000">#0 </font><font color="#FF0000"><b>Then </b></font>ReadKey<font color="#000080">;
  </font>ReadKey<font color="#000080">;
  </font>SetVideoMode<font color="#000080">(</font><font color="#800000">3</font><font color="#000080">);              </font><font color="#008000"><i>{Restore text mode.               }
</i></font><font color="#FF0000"><b>End</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0139.PAS">Original</a><b>]</b></p></body>
</html>
