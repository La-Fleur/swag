<html>
<head><title> "GRAPHICS ROUTINES" by GARTH KRUMINS</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0130.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{here are some assembler routines for the 320x200x256 mode.}

</i></font><font color="#FF0000"><b>uses
 </b></font>crt<font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>InitVGA<font color="#000080">; </font><font color="#FF0000"><b>ASSEMBLER</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm
   </b></font><font color="#FF00FF">mov  ax, 13h
   int  10h
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>InitTEXT<font color="#000080">; </font><font color="#FF0000"><b>ASSEMBLER</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm
   </b></font><font color="#FF00FF">mov  ax, 03h
   int  10h
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>PlotPixel1<font color="#000080">(</font>X<font color="#000080">, </font>Y<font color="#000080">: </font>Word<font color="#000080">; </font>Color<font color="#000080">: </font>Byte<font color="#000080">); </font><font color="#FF0000"><b>ASSEMBLER</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm
   </b></font><font color="#FF00FF">push es
   push di
   mov  ax, Y
   mov  bx, ax
   shl  ax, 8
   shl  bx, 6
   add  ax, bx
   add  ax, X
   mov  di, ax
   mov  ax, $A000
   mov  es, ax
   mov  al, Color
   mov  es:[di], al
   pop  di
   pop  es
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>PlotPixel2<font color="#000080">(</font>X<font color="#000080">, </font>Y <font color="#000080">: </font>word<font color="#000080">; </font>Color <font color="#000080">: </font>byte<font color="#000080">);
</font><font color="#FF0000"><b>begin
 if </b></font><font color="#000080">(</font>X<font color="#000080">&lt;</font><font color="#800000">320</font><font color="#000080">) </font><font color="#FF0000"><b>then if </b></font><font color="#000080">(</font>Y<font color="#000080">&lt;</font><font color="#800000">200</font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font>mem<font color="#000080">[</font><font color="#800000">$A000</font><font color="#000080">: </font>Y<font color="#000080">*</font><font color="#800000">320</font><font color="#000080">+</font>X<font color="#000080">] := </font>color<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>PROCEDURE </b></font>SetColor <font color="#000080">(</font>ColorNo<font color="#000080">, </font>Red<font color="#000080">, </font>Green<font color="#000080">, </font>Blue <font color="#000080">: </font>byte<font color="#000080">);
</font><font color="#FF0000"><b>begin
     </b></font>PORT<font color="#000080">[</font><font color="#800000">$3C8</font><font color="#000080">] := </font>ColorNo<font color="#000080">;
     </font>PORT<font color="#000080">[</font><font color="#800000">$3C9</font><font color="#000080">] := </font>Red<font color="#000080">;
     </font>PORT<font color="#000080">[</font><font color="#800000">$3C9</font><font color="#000080">] := </font>Green<font color="#000080">;
     </font>PORT<font color="#000080">[</font><font color="#800000">$3C9</font><font color="#000080">] := </font>Blue<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>var
 </b></font>LoopX <font color="#000080">: </font>word<font color="#000080">;
 </font>LoopY<font color="#000080">, </font>R<font color="#000080">, </font>G<font color="#000080">, </font>B<font color="#000080">, </font>i <font color="#000080">: </font>byte<font color="#000080">;
 </font>Ky <font color="#000080">: </font>char<font color="#000080">;

</font><font color="#FF0000"><b>Begin
 </b></font>Randomize<font color="#000080">;
 </font>InitVGA<font color="#000080">;
 </font><font color="#FF0000"><b>for </b></font>LoopY <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">199 </font><font color="#FF0000"><b>do
 begin
  for </b></font>LoopX <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">319 </font><font color="#FF0000"><b>do
   </b></font>PlotPixel1<font color="#000080">(</font>LoopX<font color="#000080">, </font>LoopY<font color="#000080">, </font>random<font color="#000080">(</font><font color="#800000">255</font><font color="#000080">)+</font><font color="#800000">1</font><font color="#000080">);
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font>B <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
 </font><font color="#FF0000"><b>repeat
  </b></font>G <font color="#000080">:= </font>random<font color="#000080">(</font><font color="#800000">63</font><font color="#000080">);
  </font><font color="#FF0000"><b>for </b></font>R <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">63 </font><font color="#FF0000"><b>do
  begin
   </b></font>Setcolor<font color="#000080">(</font>random<font color="#000080">(</font><font color="#800000">255</font><font color="#000080">)+</font><font color="#800000">1</font><font color="#000080">, </font>R<font color="#000080">, </font>G<font color="#000080">, </font>B<font color="#000080">);
   </font>inc<font color="#000080">(</font>G<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
   </font><font color="#FF0000"><b>if </b></font>G<font color="#000080">=</font><font color="#800000">64 </font><font color="#FF0000"><b>then </b></font>G <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>G <font color="#000080">:= </font><font color="#800000">63 </font><font color="#FF0000"><b>downto </b></font><font color="#800000">0 </font><font color="#FF0000"><b>do
  </b></font>R <font color="#000080">:= </font>random<font color="#000080">(</font><font color="#800000">63</font><font color="#000080">);
  </font><font color="#FF0000"><b>begin
   </b></font>Setcolor<font color="#000080">(</font>random<font color="#000080">(</font><font color="#800000">255</font><font color="#000080">)+</font><font color="#800000">1</font><font color="#000080">, </font>R<font color="#000080">, </font>G<font color="#000080">, </font>B<font color="#000080">);
   </font>dec<font color="#000080">(</font>R<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
   </font><font color="#FF0000"><b>if </b></font>R<font color="#000080">=</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>R <font color="#000080">:= </font><font color="#800000">63</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>inc<font color="#000080">(</font>B<font color="#000080">, </font>random<font color="#000080">(</font><font color="#800000">10</font><font color="#000080">)-</font><font color="#800000">5</font><font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>B<font color="#000080">&gt;</font><font color="#800000">63 </font><font color="#FF0000"><b>then </b></font>B <font color="#000080">:= </font>random<font color="#000080">(</font><font color="#800000">63</font><font color="#000080">);
 </font><font color="#FF0000"><b>until </b></font>keypressed<font color="#000080">;
 </font>Ky <font color="#000080">:= </font>readkey<font color="#000080">;
 </font>InitTEXT<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.


</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0130.PAS">Original</a><b>]</b></p></body>
</html>
