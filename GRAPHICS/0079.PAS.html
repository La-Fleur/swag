<html>
<head><title> "Making VGA Rain" by DON LABARRE</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0079.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
It's not often that I post anything but since I started getting into it I
figured I'd post something worth while. Heres some code I wrote to produce some
&quot;blood&quot; rain. It isn't much but it's cool to look at :)

{This code is release freely to anyone that wants it. I couldn't care less
 what you do with it. It is being used in my demo so if I see it in yours
 i will find you and kill you. Nemesis 1994}

</i></font><font color="#FF0000"><b>program </b></font>rain<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>p<font color="#000080">:</font>integer<font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>keypressed <font color="#000080">: </font>boolean<font color="#000080">; </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">; </font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">mov ah,0bh; int 21h; and al,0feh; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>RotatePal<font color="#000080">;
</font><font color="#FF0000"><b>Var </b></font>a<font color="#000080">:</font>Word<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>inc<font color="#000080">(</font>p<font color="#000080">);
  </font>port<font color="#000080">[</font><font color="#800000">968</font><font color="#000080">]:=</font><font color="#800000">35</font><font color="#000080">;
  </font>a<font color="#000080">:=</font><font color="#800000">100</font><font color="#000080">;

  </font><font color="#FF0000"><b>while </b></font>port<font color="#000080">[</font><font color="#800000">$3da</font><font color="#000080">] </font><font color="#FF0000"><b>and </b></font><font color="#800000">8 </font><font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>do</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>while </b></font>port<font color="#000080">[</font><font color="#800000">$3da</font><font color="#000080">] </font><font color="#FF0000"><b>and </b></font><font color="#800000">8 </font><font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>do</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>while </b></font>a<font color="#000080">&gt;</font><font color="#800000">1 </font><font color="#FF0000"><b>do
  begin
    </b></font>port<font color="#000080">[</font><font color="#800000">969</font><font color="#000080">]:=</font><font color="#800000">1</font><font color="#000080">-((</font>a<font color="#000080">+</font>p<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#800000">60</font><font color="#000080">);
    </font>port<font color="#000080">[</font><font color="#800000">969</font><font color="#000080">]:=</font><font color="#800000">0</font><font color="#000080">;
    </font><font color="#008000"><i>{If you want a better palette selection and more play then remove
     the above line and replace with the one below. It will allow you
     to get to the blues and greens and yellows but I made mine red so
     did not require those}
    {port[969]:=1-((a+p) and 60);}
    </i></font>port<font color="#000080">[</font><font color="#800000">969</font><font color="#000080">]:=</font><font color="#800000">1</font><font color="#000080">-((</font>a<font color="#000080">+</font>p<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#800000">65</font><font color="#000080">);
    </font>dec<font color="#000080">(</font>a<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>makerain<font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>x<font color="#000080">,</font>y<font color="#000080">,</font>c<font color="#000080">,</font>d<font color="#000080">:</font>word<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>d<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;
  </font>randomize<font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>x<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">320 </font><font color="#FF0000"><b>do
  Begin
    </b></font>c<font color="#000080">:=</font>random<font color="#000080">(</font><font color="#800000">65</font><font color="#000080">);
    </font><font color="#FF0000"><b>for </b></font>y<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">200 </font><font color="#FF0000"><b>do
    Begin
      if </b></font>c<font color="#000080">&gt;</font><font color="#800000">64 </font><font color="#FF0000"><b>then </b></font>c<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;
      </font>mem<font color="#000080">[</font><font color="#800000">$a000</font><font color="#000080">:</font>x<font color="#000080">+</font><font color="#800000">320</font><font color="#000080">*</font>y<font color="#000080">]:=</font>c<font color="#000080">+</font><font color="#800000">35</font><font color="#000080">;
      </font>inc<font color="#000080">(</font>c<font color="#000080">,</font>d<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>d<font color="#000080">:=</font>random<font color="#000080">(</font><font color="#800000">5</font><font color="#000080">)+</font><font color="#800000">1</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>begin
asm
  </b></font><font color="#FF00FF">mov ax,$0013
  int 10h
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font>makerain<font color="#000080">;
</font><font color="#FF0000"><b>repeat
</b></font>RotatePal<font color="#000080">;
</font><font color="#FF0000"><b>until </b></font>keypressed<font color="#000080">;
</font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">mov ax,$0002
  int 10h
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0079.PAS">Original</a><b>]</b></p></body>
</html>
