<html>
<head><title> "Vector coding" by BAS VAN GAALEN</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0080.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#008000"><i>{$g+}
</i></font><font color="#FF0000"><b>program </b></font>rotationalfield<font color="#000080">;
</font><font color="#008000"><i>{ Source by Bas van Gaalen, Holland, PD }
</i></font><font color="#FF0000"><b>uses </b></font>crt<font color="#000080">,</font>dos<font color="#000080">;
</font><font color="#FF0000"><b>const
  </b></font>gseg <font color="#000080">: </font>word <font color="#000080">= </font><font color="#800000">$a000</font><font color="#000080">;
  </font>dots <font color="#000080">= </font><font color="#800000">459</font><font color="#000080">;
  </font>dist <font color="#000080">: </font>word <font color="#000080">= </font><font color="#800000">250</font><font color="#000080">;
  </font>sintab <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>integer <font color="#000080">= (
    </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">6</font><font color="#000080">,</font><font color="#800000">9</font><font color="#000080">,</font><font color="#800000">13</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">19</font><font color="#000080">,</font><font color="#800000">22</font><font color="#000080">,</font><font color="#800000">25</font><font color="#000080">,</font><font color="#800000">28</font><font color="#000080">,</font><font color="#800000">31</font><font color="#000080">,</font><font color="#800000">34</font><font color="#000080">,</font><font color="#800000">37</font><font color="#000080">,</font><font color="#800000">40</font><font color="#000080">,</font><font color="#800000">43</font><font color="#000080">,</font><font color="#800000">46</font><font color="#000080">,</font><font color="#800000">49</font><font color="#000080">,</font><font color="#800000">52</font><font color="#000080">,</font><font color="#800000">55</font><font color="#000080">,</font><font color="#800000">58</font><font color="#000080">,</font><font color="#800000">60</font><font color="#000080">,</font><font color="#800000">63</font><font color="#000080">,</font><font color="#800000">66</font><font color="#000080">,</font><font color="#800000">68</font><font color="#000080">,
    </font><font color="#800000">71</font><font color="#000080">,</font><font color="#800000">74</font><font color="#000080">,</font><font color="#800000">76</font><font color="#000080">,</font><font color="#800000">79</font><font color="#000080">,</font><font color="#800000">81</font><font color="#000080">,</font><font color="#800000">84</font><font color="#000080">,</font><font color="#800000">86</font><font color="#000080">,</font><font color="#800000">88</font><font color="#000080">,</font><font color="#800000">91</font><font color="#000080">,</font><font color="#800000">93</font><font color="#000080">,</font><font color="#800000">95</font><font color="#000080">,</font><font color="#800000">97</font><font color="#000080">,</font><font color="#800000">99</font><font color="#000080">,</font><font color="#800000">101</font><font color="#000080">,</font><font color="#800000">103</font><font color="#000080">,</font><font color="#800000">105</font><font color="#000080">,</font><font color="#800000">106</font><font color="#000080">,</font><font color="#800000">108</font><font color="#000080">,</font><font color="#800000">110</font><font color="#000080">,</font><font color="#800000">111</font><font color="#000080">,
    </font><font color="#800000">113</font><font color="#000080">,</font><font color="#800000">114</font><font color="#000080">,</font><font color="#800000">116</font><font color="#000080">,</font><font color="#800000">117</font><font color="#000080">,</font><font color="#800000">118</font><font color="#000080">,</font><font color="#800000">119</font><font color="#000080">,</font><font color="#800000">121</font><font color="#000080">,</font><font color="#800000">122</font><font color="#000080">,</font><font color="#800000">122</font><font color="#000080">,</font><font color="#800000">123</font><font color="#000080">,</font><font color="#800000">124</font><font color="#000080">,</font><font color="#800000">125</font><font color="#000080">,</font><font color="#800000">126</font><font color="#000080">,</font><font color="#800000">126</font><font color="#000080">,</font><font color="#800000">127</font><font color="#000080">,</font><font color="#800000">127</font><font color="#000080">,</font><font color="#800000">127</font><font color="#000080">,
    </font><font color="#800000">128</font><font color="#000080">,</font><font color="#800000">128</font><font color="#000080">,</font><font color="#800000">128</font><font color="#000080">,</font><font color="#800000">128</font><font color="#000080">,</font><font color="#800000">128</font><font color="#000080">,</font><font color="#800000">128</font><font color="#000080">,</font><font color="#800000">128</font><font color="#000080">,</font><font color="#800000">127</font><font color="#000080">,</font><font color="#800000">127</font><font color="#000080">,</font><font color="#800000">127</font><font color="#000080">,</font><font color="#800000">126</font><font color="#000080">,</font><font color="#800000">126</font><font color="#000080">,</font><font color="#800000">125</font><font color="#000080">,</font><font color="#800000">124</font><font color="#000080">,</font><font color="#800000">123</font><font color="#000080">,</font><font color="#800000">122</font><font color="#000080">,</font><font color="#800000">122</font><font color="#000080">,
    </font><font color="#800000">121</font><font color="#000080">,</font><font color="#800000">119</font><font color="#000080">,</font><font color="#800000">118</font><font color="#000080">,</font><font color="#800000">117</font><font color="#000080">,</font><font color="#800000">116</font><font color="#000080">,</font><font color="#800000">114</font><font color="#000080">,</font><font color="#800000">113</font><font color="#000080">,</font><font color="#800000">111</font><font color="#000080">,</font><font color="#800000">110</font><font color="#000080">,</font><font color="#800000">108</font><font color="#000080">,</font><font color="#800000">106</font><font color="#000080">,</font><font color="#800000">105</font><font color="#000080">,</font><font color="#800000">103</font><font color="#000080">,</font><font color="#800000">101</font><font color="#000080">,</font><font color="#800000">99</font><font color="#000080">,</font><font color="#800000">97</font><font color="#000080">,</font><font color="#800000">95</font><font color="#000080">,</font><font color="#800000">93</font><font color="#000080">,
    </font><font color="#800000">91</font><font color="#000080">,</font><font color="#800000">88</font><font color="#000080">,</font><font color="#800000">86</font><font color="#000080">,</font><font color="#800000">84</font><font color="#000080">,</font><font color="#800000">81</font><font color="#000080">,</font><font color="#800000">79</font><font color="#000080">,</font><font color="#800000">76</font><font color="#000080">,</font><font color="#800000">74</font><font color="#000080">,</font><font color="#800000">71</font><font color="#000080">,</font><font color="#800000">68</font><font color="#000080">,</font><font color="#800000">66</font><font color="#000080">,</font><font color="#800000">63</font><font color="#000080">,</font><font color="#800000">60</font><font color="#000080">,</font><font color="#800000">58</font><font color="#000080">,</font><font color="#800000">55</font><font color="#000080">,</font><font color="#800000">52</font><font color="#000080">,</font><font color="#800000">49</font><font color="#000080">,</font><font color="#800000">46</font><font color="#000080">,</font><font color="#800000">43</font><font color="#000080">,</font><font color="#800000">40</font><font color="#000080">,</font><font color="#800000">37</font><font color="#000080">,</font><font color="#800000">34</font><font color="#000080">,</font><font color="#800000">31</font><font color="#000080">,
    </font><font color="#800000">28</font><font color="#000080">,</font><font color="#800000">25</font><font color="#000080">,</font><font color="#800000">22</font><font color="#000080">,</font><font color="#800000">19</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">13</font><font color="#000080">,</font><font color="#800000">9</font><font color="#000080">,</font><font color="#800000">6</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,-</font><font color="#800000">3</font><font color="#000080">,-</font><font color="#800000">6</font><font color="#000080">,-</font><font color="#800000">9</font><font color="#000080">,-</font><font color="#800000">13</font><font color="#000080">,-</font><font color="#800000">16</font><font color="#000080">,-</font><font color="#800000">19</font><font color="#000080">,-</font><font color="#800000">22</font><font color="#000080">,-</font><font color="#800000">25</font><font color="#000080">,-</font><font color="#800000">28</font><font color="#000080">,-</font><font color="#800000">31</font><font color="#000080">,-</font><font color="#800000">34</font><font color="#000080">,
    -</font><font color="#800000">37</font><font color="#000080">,-</font><font color="#800000">40</font><font color="#000080">,-</font><font color="#800000">43</font><font color="#000080">,-</font><font color="#800000">46</font><font color="#000080">,-</font><font color="#800000">49</font><font color="#000080">,-</font><font color="#800000">52</font><font color="#000080">,-</font><font color="#800000">55</font><font color="#000080">,-</font><font color="#800000">58</font><font color="#000080">,-</font><font color="#800000">60</font><font color="#000080">,-</font><font color="#800000">63</font><font color="#000080">,-</font><font color="#800000">66</font><font color="#000080">,-</font><font color="#800000">68</font><font color="#000080">,-</font><font color="#800000">71</font><font color="#000080">,-</font><font color="#800000">74</font><font color="#000080">,-</font><font color="#800000">76</font><font color="#000080">,-</font><font color="#800000">79</font><font color="#000080">,-</font><font color="#800000">81</font><font color="#000080">,
    -</font><font color="#800000">84</font><font color="#000080">,-</font><font color="#800000">86</font><font color="#000080">,-</font><font color="#800000">88</font><font color="#000080">,-</font><font color="#800000">91</font><font color="#000080">,-</font><font color="#800000">93</font><font color="#000080">,-</font><font color="#800000">95</font><font color="#000080">,-</font><font color="#800000">97</font><font color="#000080">,-</font><font color="#800000">99</font><font color="#000080">,-</font><font color="#800000">101</font><font color="#000080">,-</font><font color="#800000">103</font><font color="#000080">,-</font><font color="#800000">105</font><font color="#000080">,-</font><font color="#800000">106</font><font color="#000080">,-</font><font color="#800000">108</font><font color="#000080">,-</font><font color="#800000">110</font><font color="#000080">,-</font><font color="#800000">111</font><font color="#000080">,
    -</font><font color="#800000">113</font><font color="#000080">,-</font><font color="#800000">114</font><font color="#000080">,-</font><font color="#800000">116</font><font color="#000080">,-</font><font color="#800000">117</font><font color="#000080">,-</font><font color="#800000">118</font><font color="#000080">,-</font><font color="#800000">119</font><font color="#000080">,-</font><font color="#800000">121</font><font color="#000080">,-</font><font color="#800000">122</font><font color="#000080">,-</font><font color="#800000">122</font><font color="#000080">,-</font><font color="#800000">123</font><font color="#000080">,-</font><font color="#800000">124</font><font color="#000080">,-</font><font color="#800000">125</font><font color="#000080">,-</font><font color="#800000">126</font><font color="#000080">,
    -</font><font color="#800000">126</font><font color="#000080">,-</font><font color="#800000">127</font><font color="#000080">,-</font><font color="#800000">127</font><font color="#000080">,-</font><font color="#800000">127</font><font color="#000080">,-</font><font color="#800000">128</font><font color="#000080">,-</font><font color="#800000">128</font><font color="#000080">,-</font><font color="#800000">128</font><font color="#000080">,-</font><font color="#800000">128</font><font color="#000080">,-</font><font color="#800000">128</font><font color="#000080">,-</font><font color="#800000">128</font><font color="#000080">,-</font><font color="#800000">128</font><font color="#000080">,-</font><font color="#800000">127</font><font color="#000080">,-</font><font color="#800000">127</font><font color="#000080">,
    -</font><font color="#800000">127</font><font color="#000080">,-</font><font color="#800000">126</font><font color="#000080">,-</font><font color="#800000">126</font><font color="#000080">,-</font><font color="#800000">125</font><font color="#000080">,-</font><font color="#800000">124</font><font color="#000080">,-</font><font color="#800000">123</font><font color="#000080">,-</font><font color="#800000">122</font><font color="#000080">,-</font><font color="#800000">122</font><font color="#000080">,-</font><font color="#800000">121</font><font color="#000080">,-</font><font color="#800000">119</font><font color="#000080">,-</font><font color="#800000">118</font><font color="#000080">,-</font><font color="#800000">117</font><font color="#000080">,-</font><font color="#800000">116</font><font color="#000080">,
    -</font><font color="#800000">114</font><font color="#000080">,-</font><font color="#800000">113</font><font color="#000080">,-</font><font color="#800000">111</font><font color="#000080">,-</font><font color="#800000">110</font><font color="#000080">,-</font><font color="#800000">108</font><font color="#000080">,-</font><font color="#800000">106</font><font color="#000080">,-</font><font color="#800000">105</font><font color="#000080">,-</font><font color="#800000">103</font><font color="#000080">,-</font><font color="#800000">101</font><font color="#000080">,-</font><font color="#800000">99</font><font color="#000080">,-</font><font color="#800000">97</font><font color="#000080">,-</font><font color="#800000">95</font><font color="#000080">,-</font><font color="#800000">93</font><font color="#000080">,-</font><font color="#800000">91</font><font color="#000080">,
    -</font><font color="#800000">88</font><font color="#000080">,-</font><font color="#800000">86</font><font color="#000080">,-</font><font color="#800000">84</font><font color="#000080">,-</font><font color="#800000">81</font><font color="#000080">,-</font><font color="#800000">79</font><font color="#000080">,-</font><font color="#800000">76</font><font color="#000080">,-</font><font color="#800000">74</font><font color="#000080">,-</font><font color="#800000">71</font><font color="#000080">,-</font><font color="#800000">68</font><font color="#000080">,-</font><font color="#800000">66</font><font color="#000080">,-</font><font color="#800000">63</font><font color="#000080">,-</font><font color="#800000">60</font><font color="#000080">,-</font><font color="#800000">58</font><font color="#000080">,-</font><font color="#800000">55</font><font color="#000080">,-</font><font color="#800000">52</font><font color="#000080">,-</font><font color="#800000">49</font><font color="#000080">,
    -</font><font color="#800000">46</font><font color="#000080">,-</font><font color="#800000">43</font><font color="#000080">,-</font><font color="#800000">40</font><font color="#000080">,-</font><font color="#800000">37</font><font color="#000080">,-</font><font color="#800000">34</font><font color="#000080">,-</font><font color="#800000">31</font><font color="#000080">,-</font><font color="#800000">28</font><font color="#000080">,-</font><font color="#800000">25</font><font color="#000080">,-</font><font color="#800000">22</font><font color="#000080">,-</font><font color="#800000">19</font><font color="#000080">,-</font><font color="#800000">16</font><font color="#000080">,-</font><font color="#800000">13</font><font color="#000080">,-</font><font color="#800000">9</font><font color="#000080">,-</font><font color="#800000">6</font><font color="#000080">,-</font><font color="#800000">3</font><font color="#000080">);
</font><font color="#FF0000"><b>type
  </b></font>dotrec <font color="#000080">= </font><font color="#FF0000"><b>record </b></font>x<font color="#000080">,</font>y<font color="#000080">,</font>z <font color="#000080">: </font>integer<font color="#000080">; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>dotpos <font color="#000080">= </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font>dots<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>dotrec<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>dot <font color="#000080">: </font>dotpos<font color="#000080">;

</font><font color="#008000"><i>{----------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>procedure </b></font>setpal<font color="#000080">(</font>col<font color="#000080">,</font>r<font color="#000080">,</font>g<font color="#000080">,</font>b <font color="#000080">: </font>byte<font color="#000080">); </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">; </font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">mov dx,03c8h; mov al,col; out dx,al; inc dx; mov al,r
  out dx,al; mov al,g; out dx,al; mov al,b; out dx,al; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>setvideo<font color="#000080">(</font>mode <font color="#000080">: </font>word<font color="#000080">); </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">; </font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">mov ax,mode; int 10h </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>esc <font color="#000080">: </font>boolean<font color="#000080">; </font><font color="#FF0000"><b>begin
  </b></font>esc <font color="#000080">:= </font>port<font color="#000080">[</font><font color="#800000">$60</font><font color="#000080">] = </font><font color="#800000">1</font><font color="#000080">; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{----------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>procedure </b></font>init<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>i <font color="#000080">: </font>word<font color="#000080">; </font>x<font color="#000080">,</font>z <font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>i <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>z <font color="#000080">:= -</font><font color="#800000">100</font><font color="#000080">;
  </font><font color="#FF0000"><b>while </b></font>z <font color="#000080">&lt; </font><font color="#800000">100 </font><font color="#FF0000"><b>do begin
    </b></font>x <font color="#000080">:= -</font><font color="#800000">100</font><font color="#000080">;
    </font><font color="#FF0000"><b>while </b></font>x <font color="#000080">&lt; </font><font color="#800000">100 </font><font color="#FF0000"><b>do begin
      </b></font>dot<font color="#000080">[</font>i<font color="#000080">].</font>x <font color="#000080">:= </font>x<font color="#000080">;
      </font>dot<font color="#000080">[</font>i<font color="#000080">].</font>y <font color="#000080">:= -</font><font color="#800000">45</font><font color="#000080">;
      </font>dot<font color="#000080">[</font>i<font color="#000080">].</font>z <font color="#000080">:= </font>z<font color="#000080">;
      </font>inc<font color="#000080">(</font>i<font color="#000080">);
      </font>inc<font color="#000080">(</font>x<font color="#000080">,</font><font color="#800000">10</font><font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>inc<font color="#000080">(</font>z<font color="#000080">,</font><font color="#800000">9</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">63 </font><font color="#FF0000"><b>do </b></font>setpal<font color="#000080">(</font>i<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>i<font color="#000080">,</font>i<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{----------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>procedure </b></font>rotation<font color="#000080">;
</font><font color="#FF0000"><b>const </b></font>yst <font color="#000080">= </font><font color="#800000">1</font><font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>xp <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font>dots<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>word<font color="#000080">;
  </font>yp <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font>dots<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
  </font>x<font color="#000080">,</font>z <font color="#000080">: </font>integer<font color="#000080">; </font>n <font color="#000080">: </font>word<font color="#000080">; </font>phiy <font color="#000080">: </font>byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
  asm </b></font><font color="#FF00FF">mov phiy,0; mov es,gseg; cli; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>repeat
    asm
      </b></font><font color="#FF00FF">mov dx,03dah
     @l1:
      in al,dx
      test al,8
      jnz @l1
     @l2:
      in al,dx
      test al,8
      jz @l2
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>setpal<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">10</font><font color="#000080">);
    </font><font color="#FF0000"><b>for </b></font>n <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>dots <font color="#FF0000"><b>do begin
      asm
        </b></font><font color="#FF00FF">mov si,n
        mov al,byte ptr yp[si]
        cmp al,200
        jae @skip
        shl si,1
        mov bx,word ptr xp[si]
        cmp bx,320
        jae @skip
        shl ax,6
        mov di,ax
        shl ax,2
        add di,ax
        add di,bx
        xor al,al
        mov [es:di],al
       @skip:
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

      </font>x <font color="#000080">:= (</font>sintab<font color="#000080">[(</font>phiy<font color="#000080">+</font><font color="#800000">192</font><font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">] * </font>dot<font color="#000080">[</font>n<font color="#000080">].</font>x
     <font color="#008000"><i>{^^^^  ^^^^^^^^^^^^^^^^^^^^^^^^^^ ^ ^^^^^^^^
      9     1                          3 2 }

            </i></font><font color="#000080">- </font>sintab<font color="#000080">[</font>phiy<font color="#000080">] * </font>dot<font color="#000080">[</font>n<font color="#000080">].</font>z<font color="#000080">) </font><font color="#FF0000"><b>div </b></font><font color="#800000">128</font><font color="#000080">;
          </font><font color="#008000"><i>{ ^ ^^^^^^^^^^^^ ^ ^^^^^^^^  ^^^^^^^
            7 4            6 5         8 }

      (*
      asm
        xor ah,ah                      { 1 }
        mov al,phiy
        add al,192
        mov si,ax
        mov ax,word ptr sintab[si]
        mov si,n                       { 2 }
        mov dx,word ptr dot[si].x
        mul dx                         { 3 }
        mov cx,ax
        mov dx,word ptr dot[si].z      { 5 }
        mov al,phiy                    { 4 }
        mov si,ax
        mov ax,word ptr sintab[si]
        mul dx                         { 6 }
        sub cx,ax                      { 7 }
        shr cx,7                       { 8 }
        mov x,cx                       { 9 }
      end;
      *)

      </i></font>z <font color="#000080">:= (</font>sintab<font color="#000080">[(</font>phiy<font color="#000080">+</font><font color="#800000">192</font><font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">]*</font>dot<font color="#000080">[</font>n<font color="#000080">].</font>z<font color="#000080">+</font>sintab<font color="#000080">[</font>phiy<font color="#000080">]*</font>dot<font color="#000080">[</font>n<font color="#000080">].</font>x<font color="#000080">) </font><font color="#FF0000"><b>div </b></font><font color="#800000">128</font><font color="#000080">;
      </font>xp<font color="#000080">[</font>n<font color="#000080">] := </font><font color="#800000">160</font><font color="#000080">+(</font>x<font color="#000080">*</font>dist<font color="#000080">) </font><font color="#FF0000"><b>div </b></font><font color="#000080">(</font>z<font color="#000080">-</font>dist<font color="#000080">);
      </font>yp<font color="#000080">[</font>n<font color="#000080">] := </font><font color="#800000">100</font><font color="#000080">+(</font>dot<font color="#000080">[</font>n<font color="#000080">].</font>y<font color="#000080">*</font>dist<font color="#000080">) </font><font color="#FF0000"><b>div </b></font><font color="#000080">(</font>z<font color="#000080">-</font>dist<font color="#000080">);

      </font><font color="#008000"><i>{
      asm
        mov ax,x
        mov dx,dist
        mul dx
        mov dx,z
        sub dx,dist
        div dx
        add ax,160

        (* can't assign ax to xp[n] !? *)

      end;
      }

      </i></font><font color="#FF0000"><b>asm
        </b></font><font color="#FF00FF">mov si,n
        mov al,byte ptr yp[si]
        cmp al,200
        jae @skip
        shl si,1
        mov bx,word ptr xp[si]
        cmp bx,320
        jae @skip
        shl ax,6
        mov di,ax
        shl ax,2
        add di,ax
        add di,bx
        mov ax,z
        shr ax,3
        add ax,30
        mov [es:di],al
       @skip:
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">inc phiy </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>setpal<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
  </font><font color="#FF0000"><b>until </b></font>esc<font color="#000080">;
  </font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">sti </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{----------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>begin
  </b></font>setvideo<font color="#000080">(</font><font color="#800000">$13</font><font color="#000080">);
  </font>Init<font color="#000080">;
  </font>rotation<font color="#000080">;
  </font>textmode<font color="#000080">(</font>lastmode<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0080.PAS">Original</a><b>]</b></p></body>
</html>
