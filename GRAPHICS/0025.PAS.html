<html>
<head><title> "Graphic Spinning Disk" by WILLIAM SITCH</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0025.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
WILLIAM SITCH

&gt; Okay, I've just finally got my hands on the formulas for
&gt; doing good Graphics manipulations...well, I decided to start
&gt; With something simple.  A rotating square.  But it DOESN'T
&gt; WORK RIGHT.  I noticed the size seemed to shift in and out
&gt; and a little testing showed me that instead of following a
&gt; circular path (as they SHOULD), the corners (while spinning)
&gt; actually trace out an OCTAGON. Why????  I've checked and
&gt; rechecked the formula logic...It's just as I was given.  So
&gt; there's some quirk about the code that I don't know about.
&gt; Here's the rotating routine:

Ahhh... &quot;rounding errors&quot; is what my comp sci teacher explained to me, but
there isn't much you can do about it... I've included my (rather long)
spinning disc code to take a look at ... feel free to try to port it to your
application...

}

</i></font><font color="#FF0000"><b>Uses
  </b></font>Graph<font color="#000080">, </font>Crt<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>spin_disk<font color="#000080">;
</font><font color="#FF0000"><b>Type
  </b></font>pointdataType <font color="#000080">= </font><font color="#FF0000"><b>Array </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">4</font><font color="#000080">] </font><font color="#FF0000"><b>of Record </b></font>x<font color="#000080">,</font>y <font color="#000080">: </font>Integer<font color="#000080">; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Const
  </b></font>delVar <font color="#000080">= </font><font color="#800000">10</font><font color="#000080">;

</font><font color="#FF0000"><b>Var
  </b></font>ch       <font color="#000080">:  </font>Char<font color="#000080">;
  </font>p<font color="#000080">, </font>op    <font color="#000080">:  </font>pointdataType<font color="#000080">;
  </font>cx<font color="#000080">, </font>cy<font color="#000080">,
  </font>x<font color="#000080">, </font>y<font color="#000080">, </font>r  <font color="#000080">:  </font>Integer<font color="#000080">;
  </font>i        <font color="#000080">:  </font>Integer<font color="#000080">;
  </font>rot      <font color="#000080">:  </font>Integer<font color="#000080">;
  </font>tempx<font color="#000080">,
  </font>tempy    <font color="#000080">:  </font>Integer<font color="#000080">;
  </font>theta    <font color="#000080">:  </font>Real<font color="#000080">;
  </font>down     <font color="#000080">:  </font>Boolean<font color="#000080">;
  </font>del      <font color="#000080">:  </font>Real<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>cx <font color="#000080">:= </font>getmaxx <font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">;
  </font>cy <font color="#000080">:= </font>getmaxy <font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">;
  </font>r <font color="#000080">:= </font><font color="#800000">150</font><font color="#000080">;
  </font>circle<font color="#000080">(</font>cx<font color="#000080">,</font>cy<font color="#000080">,</font>r<font color="#000080">);

  </font>rot <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>p<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>x <font color="#000080">:= </font><font color="#800000">100</font><font color="#000080">;  </font>p<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>y <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>p<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">].</font>x <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;    </font>p<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">].</font>y <font color="#000080">:= -</font><font color="#800000">100</font><font color="#000080">;
  </font>p<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">].</font>x <font color="#000080">:= -</font><font color="#800000">100</font><font color="#000080">; </font>p<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">].</font>y <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>p<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">].</font>x <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;    </font>p<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">].</font>y <font color="#000080">:= </font><font color="#800000">100</font><font color="#000080">;
  </font>del <font color="#000080">:= </font><font color="#800000">50</font><font color="#000080">;
  </font>down <font color="#000080">:= </font>True<font color="#000080">;

  </font><font color="#FF0000"><b>Repeat
    </b></font>rot <font color="#000080">:= </font>rot <font color="#000080">+ </font><font color="#800000">2</font><font color="#000080">;
    </font>theta <font color="#000080">:= </font>rot <font color="#000080">* </font><font color="#800000">3.14 </font><font color="#000080">/ </font><font color="#800000">180</font><font color="#000080">;
    </font><font color="#FF0000"><b>For </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">4 </font><font color="#FF0000"><b>do
      begin
        </b></font>tempx <font color="#000080">:= </font>p<font color="#000080">[</font>i<font color="#000080">].</font>x<font color="#000080">;
        </font>tempy <font color="#000080">:= </font>p<font color="#000080">[</font>i<font color="#000080">].</font>y<font color="#000080">;
        </font>op<font color="#000080">[</font>i<font color="#000080">].</font>x <font color="#000080">:= </font>p<font color="#000080">[</font>i<font color="#000080">].</font>x<font color="#000080">;
        </font>op<font color="#000080">[</font>i<font color="#000080">].</font>y <font color="#000080">:= </font>p<font color="#000080">[</font>i<font color="#000080">].</font>y<font color="#000080">;
        </font>p<font color="#000080">[</font>i<font color="#000080">].</font>x <font color="#000080">:= </font>round<font color="#000080">(</font>cos<font color="#000080">(</font>theta<font color="#000080">) * </font>tempx <font color="#000080">- </font>sin<font color="#000080">(</font>theta<font color="#000080">) * </font>tempy<font color="#000080">);
        </font>p<font color="#000080">[</font>i<font color="#000080">].</font>y <font color="#000080">:= </font>round<font color="#000080">(</font>sin<font color="#000080">(</font>theta<font color="#000080">) * </font>tempx <font color="#000080">+ </font>cos<font color="#000080">(</font>theta<font color="#000080">) * </font>tempy<font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>setcolor<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
    </font>line<font color="#000080">(</font>op<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>x <font color="#000080">+ </font>cx<font color="#000080">,</font>cy <font color="#000080">- </font>op<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>y<font color="#000080">,</font>op<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">].</font>x <font color="#000080">+ </font>cx<font color="#000080">,</font>cy <font color="#000080">- </font>op<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">].</font>y<font color="#000080">);
    </font>line<font color="#000080">(</font>op<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">].</font>x <font color="#000080">+ </font>cx<font color="#000080">,</font>cy <font color="#000080">- </font>op<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">].</font>y<font color="#000080">,</font>op<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">].</font>x <font color="#000080">+ </font>cx<font color="#000080">,</font>cy <font color="#000080">- </font>op<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">].</font>y<font color="#000080">);
    </font>line<font color="#000080">(</font>op<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">].</font>x <font color="#000080">+ </font>cx<font color="#000080">,</font>cy <font color="#000080">- </font>op<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">].</font>y<font color="#000080">,</font>op<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">].</font>x <font color="#000080">+ </font>cx<font color="#000080">,</font>cy <font color="#000080">- </font>op<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">].</font>y<font color="#000080">);
    </font>line<font color="#000080">(</font>op<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">].</font>x <font color="#000080">+ </font>cx<font color="#000080">,</font>cy <font color="#000080">- </font>op<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">].</font>y<font color="#000080">,</font>op<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>x <font color="#000080">+ </font>cx<font color="#000080">,</font>cy <font color="#000080">- </font>op<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>y<font color="#000080">);
    </font><font color="#FF0000"><b>For </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">4 </font><font color="#FF0000"><b>do
      </b></font>line<font color="#000080">(</font>op<font color="#000080">[</font>i<font color="#000080">].</font>x <font color="#000080">+ </font>cx<font color="#000080">,</font>cy <font color="#000080">- </font>op<font color="#000080">[</font>i<font color="#000080">].</font>y<font color="#000080">,</font>cx<font color="#000080">,</font>cy<font color="#000080">);
    </font>setcolor<font color="#000080">(</font><font color="#800000">11</font><font color="#000080">);
    </font>line<font color="#000080">(</font>p<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>x <font color="#000080">+ </font>cx<font color="#000080">,</font>cy <font color="#000080">- </font>p<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>y<font color="#000080">,</font>p<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">].</font>x <font color="#000080">+ </font>cx<font color="#000080">,</font>cy <font color="#000080">- </font>p<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">].</font>y<font color="#000080">);
    </font>line<font color="#000080">(</font>p<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">].</font>x <font color="#000080">+ </font>cx<font color="#000080">,</font>cy <font color="#000080">- </font>p<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">].</font>y<font color="#000080">,</font>p<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">].</font>x <font color="#000080">+ </font>cx<font color="#000080">,</font>cy <font color="#000080">- </font>p<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">].</font>y<font color="#000080">);
    </font>line<font color="#000080">(</font>p<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">].</font>x <font color="#000080">+ </font>cx<font color="#000080">,</font>cy <font color="#000080">- </font>p<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">].</font>y<font color="#000080">,</font>p<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">].</font>x <font color="#000080">+ </font>cx<font color="#000080">,</font>cy <font color="#000080">- </font>p<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">].</font>y<font color="#000080">);
    </font>line<font color="#000080">(</font>p<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">].</font>x <font color="#000080">+ </font>cx<font color="#000080">,</font>cy <font color="#000080">- </font>p<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">].</font>y<font color="#000080">,</font>p<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>x <font color="#000080">+ </font>cx<font color="#000080">,</font>cy <font color="#000080">- </font>p<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>y<font color="#000080">);
    </font>setcolor<font color="#000080">(</font><font color="#800000">10</font><font color="#000080">);
    </font><font color="#FF0000"><b>For </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">4 </font><font color="#FF0000"><b>do
      </b></font>line<font color="#000080">(</font>p<font color="#000080">[</font>i<font color="#000080">].</font>x <font color="#000080">+ </font>cx<font color="#000080">,</font>cy <font color="#000080">- </font>p<font color="#000080">[</font>i<font color="#000080">].</font>y<font color="#000080">,</font>cx<font color="#000080">,</font>cy<font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>del <font color="#000080">&lt; </font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>then
      </b></font>down <font color="#000080">:= </font>False
    <font color="#FF0000"><b>else if </b></font><font color="#000080">(</font>del <font color="#000080">&gt; </font><font color="#800000">50</font><font color="#000080">) </font><font color="#FF0000"><b>then
      </b></font>down <font color="#000080">:= </font>True<font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>down<font color="#000080">) </font><font color="#FF0000"><b>then
      </b></font>del <font color="#000080">:= </font>del <font color="#000080">- </font>delVar
    <font color="#FF0000"><b>else
      </b></font>del <font color="#000080">:= </font>del <font color="#000080">+ </font>delVar<font color="#000080">;
    </font>Delay<font color="#000080">(</font>round<font color="#000080">(</font>del<font color="#000080">));
  </font><font color="#FF0000"><b>Until </b></font><font color="#000080">(</font>KeyPressed <font color="#000080">= </font>True<font color="#000080">);
  </font>ch <font color="#000080">:= </font>ReadKey<font color="#000080">;
  </font>NoSound<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Var
  </b></font>Gd<font color="#000080">, </font>Gm <font color="#000080">: </font>Integer<font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>Gd <font color="#000080">:= </font>Detect<font color="#000080">;
  </font>InitGraph<font color="#000080">(</font>Gd<font color="#000080">, </font>Gm<font color="#000080">, </font><font color="#800000">'d:\bp\bgi'</font><font color="#000080">);

  </font>Spin_disk<font color="#000080">;

</font><font color="#FF0000"><b>end</b></font><font color="#000080">.</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0025.PAS">Original</a><b>]</b></p></body>
</html>
