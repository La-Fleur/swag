<html>
<head><title> "Load 256 color pcx images" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0255.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>program </b></font>loadpcx<font color="#000080">;

</font><font color="#008000"><i>{ only 256 colors pcx-images }
{ Svga256.bgi driver necessary }

</i></font><font color="#FF0000"><b>uses </b></font>dos<font color="#000080">,</font>crt<font color="#000080">,</font>graph<font color="#000080">;

</font><font color="#FF0000"><b>const
  </b></font>BufferLengte <font color="#000080">= </font><font color="#800000">$FFFE</font><font color="#000080">;
  </font>Klaar    <font color="#000080">: </font>boolean <font color="#000080">= </font>false<font color="#000080">;

</font><font color="#FF0000"><b>type </b></font>PcxType <font color="#000080">= </font><font color="#FF0000"><b>Object
        </b></font>Kenmerk<font color="#000080">, </font>Versie<font color="#000080">: </font>byte<font color="#000080">;
        </font>Gecomprimeerd<font color="#000080">: </font>boolean<font color="#000080">;
        </font>BitsPerPixel<font color="#000080">: </font>byte<font color="#000080">;
        </font>Raam<font color="#000080">: </font><font color="#FF0000"><b>Record </b></font>Links<font color="#000080">, </font>Boven<font color="#000080">, </font>Rechts<font color="#000080">, </font>Onder<font color="#000080">: </font>word <font color="#FF0000"><b>End</b></font><font color="#000080">;
        </font>HorResolutie<font color="#000080">, </font>VerResolutie<font color="#000080">: </font>word<font color="#000080">;
        </font>Kleuren<font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">15</font><font color="#000080">] </font><font color="#FF0000"><b>of Record </b></font>Rood<font color="#000080">, </font>Groen<font color="#000080">, </font>Blauw<font color="#000080">: </font>byte <font color="#FF0000"><b>End</b></font><font color="#000080">;
        </font>Reserve<font color="#000080">: </font>byte<font color="#000080">;
        </font>AantalVlakken<font color="#000080">: </font>byte<font color="#000080">;
        </font>AantalBytesPerLijn<font color="#000080">: </font>word<font color="#000080">;
        </font>PaletInformatie<font color="#000080">: </font>word<font color="#000080">;
        </font>ReserveArray<font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">58</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
      </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
      </font>ArByte <font color="#000080">= </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">$FFFE</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;


      </font>RGBColor   <font color="#000080">= </font><font color="#FF0000"><b>record </b></font>R<font color="#000080">,</font>G<font color="#000080">,</font>B <font color="#000080">:</font>byte<font color="#000080">; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font>VGAPalette <font color="#000080">= </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>RGBColor<font color="#000080">;


</font><font color="#FF0000"><b>var
  </b></font>Herhaal<font color="#000080">,</font>Teller<font color="#000080">,</font>m<font color="#000080">,
  </font>xx<font color="#000080">,</font>yy<font color="#000080">,</font>MaxX<font color="#000080">,</font>MaxY       <font color="#000080">:</font>word<font color="#000080">;
  </font>PCX                   <font color="#000080">:</font>PCXType<font color="#000080">;
  </font>Buffer<font color="#000080">,</font>Lijnx          <font color="#000080">:^</font>ArByte<font color="#000080">;
  </font>PCX_Bestand           <font color="#000080">:</font><font color="#FF0000"><b>File</b></font><font color="#000080">;
  </font>BufSize               <font color="#000080">:</font>word<font color="#000080">;
  </font>Regs                  <font color="#000080">:</font>Registers<font color="#000080">;
  </font>Kleuren256            <font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">] </font><font color="#FF0000"><b>of Record </b></font>Rood<font color="#000080">,</font>Groen<font color="#000080">,</font>Blauw <font color="#000080">:</font>byte <font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font>PaletNr<font color="#000080">,</font>ID            <font color="#000080">:</font>byte<font color="#000080">;



</font><font color="#FF0000"><b>Procedure </b></font>LeesBuffer<font color="#000080">;

</font><font color="#FF0000"><b>Begin
  </b></font>Klaar <font color="#000080">:= </font>Klaar <font color="#FF0000"><b>or </b></font>EOF<font color="#000080">(</font>PCX_Bestand<font color="#000080">);
  </font>BlockRead<font color="#000080">(</font>PCX_Bestand<font color="#000080">, </font>Buffer<font color="#000080">^, </font>SizeOf<font color="#000080">(</font>Buffer<font color="#000080">^), </font>BufSize<font color="#000080">)
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Lees256Kleuren<font color="#000080">;

</font><font color="#FF0000"><b>Begin
  </b></font>Seek<font color="#000080">(</font>PCX_Bestand<font color="#000080">, </font>FileSize<font color="#000080">(</font>PCX_Bestand<font color="#000080">) - </font><font color="#800000">769</font><font color="#000080">);
  </font>ID <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>BlockRead<font color="#000080">(</font>PCX_Bestand<font color="#000080">, </font>ID<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
  </font><font color="#FF0000"><b>If </b></font>ID <font color="#000080">= </font><font color="#800000">12 </font><font color="#FF0000"><b>then With </b></font>Regs <font color="#FF0000"><b>do Begin
    </b></font>BlockRead<font color="#000080">(</font>PCX_Bestand<font color="#000080">, </font>Kleuren256<font color="#000080">, </font><font color="#800000">768</font><font color="#000080">);
    </font><font color="#FF0000"><b>For </b></font>PaletNr <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do With </b></font>Kleuren256<font color="#000080">[</font>PaletNr<font color="#000080">] </font><font color="#FF0000"><b>do Begin
      </b></font>Rood <font color="#000080">:= </font>Rood <font color="#FF0000"><b>shr </b></font><font color="#800000">2</font><font color="#000080">; </font>Groen <font color="#000080">:= </font>Groen <font color="#FF0000"><b>shr </b></font><font color="#800000">2</font><font color="#000080">; </font>Blauw <font color="#000080">:= </font>Blauw <font color="#FF0000"><b>shr </b></font><font color="#800000">2
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
    </font>AX <font color="#000080">:= </font><font color="#800000">$1012</font><font color="#000080">;
    </font>BX <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font>CX <font color="#000080">:= </font><font color="#800000">256</font><font color="#000080">;
    </font>ES <font color="#000080">:= </font>Seg<font color="#000080">(</font>Kleuren256<font color="#000080">);
    </font>DX <font color="#000080">:= </font>Ofs<font color="#000080">(</font>Kleuren256<font color="#000080">);
    </font>Intr<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">, </font>Regs<font color="#000080">)
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>seek<font color="#000080">(</font>PCX_Bestand<font color="#000080">, </font>SizeOf<font color="#000080">(</font>PCX<font color="#000080">))
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Increment<font color="#000080">;

</font><font color="#FF0000"><b>Begin
  If </b></font>Teller <font color="#000080">&lt; </font>BufferLengte <font color="#FF0000"><b>then </b></font>Inc<font color="#000080">(</font>Teller<font color="#000080">)
  </font><font color="#FF0000"><b>else Begin
    </b></font>Teller <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font>LeesBuffer<font color="#000080">;
  </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>load_pcx<font color="#000080">(</font>posx<font color="#000080">,</font>posy<font color="#000080">,</font>breedte<font color="#000080">,</font>hoogte <font color="#000080">:</font>word<font color="#000080">;</font>pcxnaam <font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">);

</font><font color="#FF0000"><b>begin
  </b></font>MaxX <font color="#000080">:=(</font>breedte<font color="#000080">+</font>posx<font color="#000080">)-</font><font color="#800000">1</font><font color="#000080">; </font>MaxY <font color="#000080">:=(</font>hoogte<font color="#000080">+</font>posy<font color="#000080">)-</font><font color="#800000">1</font><font color="#000080">;
  </font>Assign<font color="#000080">(</font>PCX_Bestand<font color="#000080">,</font>pcxnaam <font color="#000080">+</font><font color="#800000">'.pcx'</font><font color="#000080">);
  </font><font color="#008000"><i>{$I-} </i></font>Reset<font color="#000080">(</font>PCX_Bestand<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">); </font><font color="#008000"><i>{$I+}
  </i></font><font color="#FF0000"><b>if </b></font>ioresult <font color="#000080">=</font><font color="#800000">0 </font><font color="#FF0000"><b>then Begin
    </b></font>BlockRead<font color="#000080">(</font>PCX_Bestand<font color="#000080">, </font>PCX<font color="#000080">, </font>SizeOf<font color="#000080">(</font>PCX<font color="#000080">));
    </font>GetMem<font color="#000080">(</font>Buffer<font color="#000080">,</font>BufferLengte<font color="#000080">);
    </font>Lees256Kleuren<font color="#000080">;
    </font>xx <font color="#000080">:=</font>posx<font color="#000080">;</font>yy <font color="#000080">:=</font>posy<font color="#000080">;</font>Teller <font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
    </font>LeesBuffer<font color="#000080">;
    </font><font color="#FF0000"><b>While not </b></font>Klaar <font color="#FF0000"><b>do Begin
      If </b></font>Buffer<font color="#000080">^[</font>Teller<font color="#000080">] </font><font color="#FF0000"><b>and </b></font><font color="#800000">$C0 </font><font color="#000080">= </font><font color="#800000">$C0 </font><font color="#FF0000"><b>then Begin
        </b></font>Herhaal <font color="#000080">:= </font>Buffer<font color="#000080">^[</font>Teller<font color="#000080">] - </font><font color="#800000">$C0</font><font color="#000080">;
        </font>Increment<font color="#000080">;
      </font><font color="#FF0000"><b>End
      else </b></font>Herhaal <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
      </font><font color="#FF0000"><b>For </b></font>m <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>Herhaal <font color="#FF0000"><b>do Begin
        If </b></font>xx <font color="#000080">&lt;= </font>MaxX <font color="#FF0000"><b>then </b></font>PutPixel<font color="#000080">(</font>xx<font color="#000080">, </font>yy<font color="#000080">, </font>Buffer<font color="#000080">^[</font>Teller<font color="#000080">]);
        </font>Inc<font color="#000080">(</font>xx<font color="#000080">);
      </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>If </b></font>xx <font color="#000080">&gt;= </font>pcx<font color="#000080">.</font>AantalBytesPerLijn <font color="#000080">+</font>posx <font color="#FF0000"><b>then Begin
        </b></font>xx <font color="#000080">:= </font>posx<font color="#000080">; </font>Inc<font color="#000080">(</font>yy<font color="#000080">);
        </font><font color="#FF0000"><b>If </b></font>yy <font color="#000080">&gt; </font>MaxY <font color="#FF0000"><b>then </b></font>Klaar <font color="#000080">:= </font>true<font color="#000080">;
      </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
      </font>Increment<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>freemem<font color="#000080">(</font>buffer<font color="#000080">,</font>bufferlengte<font color="#000080">);
    </font>close<font color="#000080">(</font>pcx_bestand<font color="#000080">);
    </font>klaar <font color="#000080">:=</font>false<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>Setvideo<font color="#000080">(</font>scherm <font color="#000080">:</font>byte<font color="#000080">);

</font><font color="#FF0000"><b>var  </b></font>AutoDetect <font color="#000080">: </font>pointer<font color="#000080">;  </font>GrMd<font color="#000080">,</font>GrDr  <font color="#000080">: </font>integer<font color="#000080">;

</font><font color="#008000"><i>{$F+}
</i></font><font color="#FF0000"><b>function </b></font>DetectVGA0 <font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>begin </b></font>detectvga0 <font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function </b></font>DetectVGA1 <font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>begin </b></font>detectvga1 <font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function </b></font>DetectVGA2 <font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>begin </b></font>detectvga2 <font color="#000080">:=</font><font color="#800000">2</font><font color="#000080">;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function </b></font>DetectVGA3 <font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>begin </b></font>detectvga3 <font color="#000080">:=</font><font color="#800000">3</font><font color="#000080">;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function </b></font>DetectVGA4 <font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>begin </b></font>detectvga4 <font color="#000080">:=</font><font color="#800000">4</font><font color="#000080">;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{$F-}

</i></font><font color="#FF0000"><b>begin
  </b></font>AutoDetect <font color="#000080">:= @</font>DetectVGA2<font color="#000080">;
  </font><font color="#FF0000"><b>case </b></font>scherm <font color="#FF0000"><b>of
    </b></font><font color="#800000">0</font><font color="#000080">:</font>AutoDetect <font color="#000080">:= @</font>DetectVGA0<font color="#000080">;
    </font><font color="#800000">1</font><font color="#000080">:</font>AutoDetect <font color="#000080">:= @</font>DetectVGA1<font color="#000080">;
    </font><font color="#800000">2</font><font color="#000080">:</font>AutoDetect <font color="#000080">:= @</font>DetectVGA2<font color="#000080">;
    </font><font color="#800000">3</font><font color="#000080">:</font>AutoDetect <font color="#000080">:= @</font>DetectVGA3<font color="#000080">;
    </font><font color="#800000">4</font><font color="#000080">:</font>AutoDetect <font color="#000080">:= @</font>DetectVGA4<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>GrDr <font color="#000080">:= </font>InstallUserDriver<font color="#000080">(</font><font color="#800000">'SVGA256'</font><font color="#000080">,</font>AutoDetect<font color="#000080">);
  </font>GrDr <font color="#000080">:= </font>Detect<font color="#000080">;
  </font>InitGraph<font color="#000080">(</font>GrDr<font color="#000080">,</font>GrMd<font color="#000080">,</font><font color="#800000">''</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>begin
  </b></font>setvideo<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">);
  </font>setcolor<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">);
  </font>settextstyle<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">);
  </font>outtextxy<font color="#000080">(</font><font color="#800000">140</font><font color="#000080">,</font><font color="#800000">60</font><font color="#000080">,</font><font color="#800000">'GROETEN UIT DOETINCHEM'</font><font color="#000080">);
  </font>setcolor<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">);
  </font>outtextxy<font color="#000080">(</font><font color="#800000">141</font><font color="#000080">,</font><font color="#800000">61</font><font color="#000080">,</font><font color="#800000">'GROETEN UIT DOETINCHEM'</font><font color="#000080">);
  </font>load_pcx<font color="#000080">(</font><font color="#800000">120</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">192</font><font color="#000080">,</font><font color="#800000">128</font><font color="#000080">,</font><font color="#800000">'demo1'</font><font color="#000080">);  </font><font color="#008000"><i>{ 192 is width / 128 is height image }
  </i></font>load_pcx<font color="#000080">(</font><font color="#800000">320</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">192</font><font color="#000080">,</font><font color="#800000">128</font><font color="#000080">,</font><font color="#800000">'demo2'</font><font color="#000080">);
  </font>load_pcx<font color="#000080">(</font><font color="#800000">120</font><font color="#000080">,</font><font color="#800000">240</font><font color="#000080">,</font><font color="#800000">192</font><font color="#000080">,</font><font color="#800000">128</font><font color="#000080">,</font><font color="#800000">'demo3'</font><font color="#000080">);
  </font>load_pcx<font color="#000080">(</font><font color="#800000">320</font><font color="#000080">,</font><font color="#800000">240</font><font color="#000080">,</font><font color="#800000">192</font><font color="#000080">,</font><font color="#800000">128</font><font color="#000080">,</font><font color="#800000">'demo4'</font><font color="#000080">);
  </font>readln<font color="#000080">;
  </font>closegraph<font color="#000080">;
  </font>halt<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0255.PAS">Original</a><b>]</b></p></body>
</html>
