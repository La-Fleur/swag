<html>
<head><title> "Integer Graphics Scaler" by DREW SHAFER</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0224.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
I have a nifty all integer scale routine for vga 320x200 that I wouldn't
mind seeing in swag.  It is really a pretty simple scale, and demonstrates
the principle of an all-integer approach clearly.  I'll try to attach it to this
message.


this is a nifty little scale procedure I dreamed up while I was bored
one day.  It uses an all integer approach and I think it is roughly as
fast as gfx, although it doesn't support scaling backwards like gfx
does.  this is free for all to use.}

</i></font><font color="#FF0000"><b>var
  </b></font>scarr <font color="#000080">: </font><font color="#FF0000"><b>record
            </b></font>x<font color="#000080">,</font>y <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">320</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>word<font color="#000080">;
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>function </b></font>min<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">:</font>word<font color="#000080">):</font>word<font color="#000080">;
</font><font color="#FF0000"><b>begin
  if </b></font>x <font color="#000080">&lt; </font>y <font color="#FF0000"><b>then </b></font>min <font color="#000080">:= </font>x <font color="#FF0000"><b>else </b></font>min <font color="#000080">:= </font>y<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>scalepic<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">:</font>word<font color="#000080">; </font>sxsize<font color="#000080">,</font>sysize<font color="#000080">:</font>word<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>picdata<font color="#000080">);

</font><font color="#008000"><i>{
 (x1,y1)(x2,y2) top left and bottom right corners of DESTINATION rect.
 sxsize,sysize is the x and y sizes of the SOURCE image
 picdata is your SOURCE picture.}
</i></font><font color="#FF0000"><b>var
  </b></font>s1<font color="#000080">,</font>o1<font color="#000080">,</font>x<font color="#000080">,</font>y<font color="#000080">,</font>a<font color="#000080">,</font>b<font color="#000080">,</font>c<font color="#000080">,</font>d <font color="#000080">: </font>word<font color="#000080">;
  </font>ax<font color="#000080">,</font>ay <font color="#000080">: </font>boolean<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>s1 <font color="#000080">:= </font>seg<font color="#000080">(</font>picdata<font color="#000080">);
  </font>o1 <font color="#000080">:= </font>ofs<font color="#000080">(</font>picdata<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>x2 <font color="#000080">= </font>x1<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>y2 <font color="#000080">= </font>y1<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>exit<font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>x <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>x2 <font color="#000080">- </font>x1 <font color="#FF0000"><b>do
    </b></font>scarr<font color="#000080">.</font>x<font color="#000080">[</font>x<font color="#000080">] := </font>longint<font color="#000080">(</font>x<font color="#000080">)*</font>longint<font color="#000080">(</font>sxsize<font color="#000080">) </font><font color="#FF0000"><b>div </b></font><font color="#000080">(</font>x2<font color="#000080">-</font>x1<font color="#000080">);
  </font><font color="#008000"><i>{you can remove the typecasting ONLY if you know you won't be
    scaling to a DESTINATION of over 255 pixels.  otherwise, you'll get
    a buncha junk}
  
  </i></font><font color="#FF0000"><b>for </b></font>x <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>y2 <font color="#000080">- </font>y1 <font color="#FF0000"><b>do
    </b></font>scarr<font color="#000080">.</font>y<font color="#000080">[</font>x<font color="#000080">] := </font>x<font color="#000080">*</font>sysize <font color="#FF0000"><b>div </b></font><font color="#000080">(</font>y2<font color="#000080">-</font>y1<font color="#000080">);
  </font><font color="#FF0000"><b>for </b></font>x <font color="#000080">:= </font>x1 <font color="#FF0000"><b>to </b></font>min<font color="#000080">(</font>x2<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">317</font><font color="#000080">) </font><font color="#FF0000"><b>do
    for </b></font>y <font color="#000080">:= </font>y1 <font color="#FF0000"><b>to </b></font>min<font color="#000080">(</font>y2<font color="#000080">,</font><font color="#800000">199</font><font color="#000080">) </font><font color="#FF0000"><b>do
      </b></font><font color="#008000"><i>{vseg is a word denoting the segment of your virtual screen}
      </i></font>mem<font color="#000080">[</font>vseg<font color="#000080">:</font>y<font color="#000080">*</font><font color="#800000">320</font><font color="#000080">+</font>x<font color="#000080">] := </font>mem<font color="#000080">[</font>s1<font color="#000080">:</font>o1<font color="#000080">+</font>scarr<font color="#000080">.</font>y<font color="#000080">[</font>y<font color="#000080">-</font>y1<font color="#000080">]*</font>sxsize<font color="#000080">+</font>scarr<font color="#000080">.</font>x<font color="#000080">[</font>x<font color="#000080">-</font>x1<font color="#000080">]];
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0224.PAS">Original</a><b>]</b></p></body>
</html>
