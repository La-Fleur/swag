<html>
<head><title> "Virtual world plotting" by YUAN LIU</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0135.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
From: yliu@morgan.ucs.mun.ca (Yuan Liu)

: I have a question for drawing a graphic.  I have a set of data.
: I want to read these data and plot them in the XY axes.  Does anyone
: know how to caculate the data to fit the X axis.  I am using TP 7.0.

When converting from HP Pascal, which provides a nice subset of the
device-independent graphics kernal and allows plotting in the virtual world
(so the window and viewport can be set in the virtual world), I wrote
several procedures to simulate virtual world plotting.  The following is
part of a unit Plotbase I created.

The function you needed is set_window; the boolean pagefit controls
whether you just want your plot to fit in the whole window or there's a concern
about the isotropy of the plot.  I didn't bother to write a virtual
world set_viewport as I can live without it.

}
</i></font><font color="#FF0000"><b>UNIT </b></font>PLOTBASE<font color="#000080">; </font><font color="#008000"><i>{******************* Stored in 'PLOTBASE' ******************}
{*     Basic procedures for graphical manipulations.                      *}
{*     Created in 1983.  Updated 17/05/94 10:00 a.m.       By LIU Yuan    *}
{**************************************************************************}
</i></font><font color="#FF0000"><b>interface USES </b></font>Graph<font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>set_window<font color="#000080">(</font>left<font color="#000080">, </font>right<font color="#000080">, </font>up<font color="#000080">, </font>down<font color="#000080">: </font>extended<font color="#000080">; </font>pagefit<font color="#000080">: </font>boolean<font color="#000080">);
         </font><font color="#008000"><i>{Sets a mapping of virtual window on the current viewport;
           use isotropic scaling if not pagefit.}
</i></font><font color="#FF0000"><b>function </b></font>vToX<font color="#000080">(</font>x<font color="#000080">: </font>extended<font color="#000080">): </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>function </b></font>vToY<font color="#000080">(</font>y<font color="#000080">: </font>extended<font color="#000080">): </font>integer<font color="#000080">;
         </font><font color="#008000"><i>{Map x, y in the virtual world onto real world}
</i></font><font color="#FF0000"><b>function </b></font>XtoV<font color="#000080">(</font>X<font color="#000080">: </font>integer<font color="#000080">): </font>extended<font color="#000080">;
</font><font color="#FF0000"><b>function </b></font>YtoV<font color="#000080">(</font>Y<font color="#000080">: </font>integer<font color="#000080">): </font>extended<font color="#000080">;
         </font><font color="#008000"><i>{Maps X, Y in the real world onto virtual world}
           </i></font>use isotropic scaling <font color="#FF0000"><b>if not </b></font>pagefit<font color="#000080">.
</font><font color="#FF0000"><b>procedure </b></font>vMove<font color="#000080">(</font>x<font color="#000080">, </font>y<font color="#000080">: </font>extended<font color="#000080">);
          </font><font color="#008000"><i>{Moves the current position to (x,y) in the virtual world}
</i></font><font color="#FF0000"><b>procedure </b></font>vMoveRel<font color="#000080">(</font>Dx<font color="#000080">, </font>Dy<font color="#000080">: </font>extended<font color="#000080">);
</font><font color="#008000"><i>{Moves the current position a relative distance in the virtual world}
</i></font><font color="#FF0000"><b>procedure </b></font>vLine<font color="#000080">(</font>x1<font color="#000080">, </font>y1<font color="#000080">, </font>x2<font color="#000080">, </font>y2<font color="#000080">: </font>extended<font color="#000080">);
          </font><font color="#008000"><i>{Draws a line from (x1,y1) to (x2,y2) in the virtual world}
</i></font><font color="#FF0000"><b>procedure </b></font>vLineTo<font color="#000080">(</font>x<font color="#000080">, </font>y<font color="#000080">: </font>extended<font color="#000080">);
          </font><font color="#008000"><i>{Draws a line from current position to (x,y) in the virtual world}
</i></font><font color="#FF0000"><b>function </b></font>str_width<font color="#000080">(</font>str<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">): </font>extended<font color="#000080">; </font><font color="#008000"><i>{string width in the virtual world}
</i></font><font color="#FF0000"><b>function </b></font>str_height<font color="#000080">(</font>str<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">): </font>extended<font color="#000080">; </font><font color="#008000"><i>{string height in the virtual
world}
</i></font><font color="#FF0000"><b>implementation </b></font><font color="#008000"><i>{************************** PLOTBASE *************************}
        </i></font><font color="#FF0000"><b>var </b></font>Text<font color="#000080">:         </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">20</font><font color="#000080">];
            </font>xasp<font color="#000080">, </font>yasp<font color="#000080">, </font>xbase<font color="#000080">, </font>ybase<font color="#000080">: </font>extended<font color="#000080">;
            </font><font color="#008000"><i>{convert from virtual world to display}

</i></font><font color="#FF0000"><b>procedure </b></font>set_window<font color="#000080">(</font>left<font color="#000080">, </font>right<font color="#000080">, </font>up<font color="#000080">, </font>down<font color="#000080">: </font>extended<font color="#000080">; </font>pagefit<font color="#000080">: </font>boolean<font color="#000080">);
         </font><font color="#008000"><i>{Sets a mapping of virtual window on the current viewport;
           use isotropic scaling if not pagefit.
           Side effects: xasp, yasp, xbase, ybase.}
</i></font><font color="#FF0000"><b>var </b></font>view<font color="#000080">: </font>ViewPortType<font color="#000080">;
</font><font color="#FF0000"><b>begin </b></font>xbase<font color="#000080">:=</font>left<font color="#000080">; </font>ybase<font color="#000080">:=</font>down<font color="#000080">; </font>right<font color="#000080">:=</font>right<font color="#000080">-</font>left<font color="#000080">; </font>up<font color="#000080">:=</font>up<font color="#000080">-</font>down<font color="#000080">;
      </font>GetViewSettings<font color="#000080">(</font>view<font color="#000080">);
      </font>right<font color="#000080">:=(</font>view<font color="#000080">.</font>x2<font color="#000080">-</font>view<font color="#000080">.</font>x1<font color="#000080">)/</font>right<font color="#000080">;
      </font>up<font color="#000080">:=(</font>view<font color="#000080">.</font>y2<font color="#000080">-</font>view<font color="#000080">.</font>y1<font color="#000080">)/</font>up<font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font>pagefit <font color="#FF0000"><b>then begin </b></font>xasp<font color="#000080">:=</font>right<font color="#000080">; </font>yasp<font color="#000080">:=</font>up <font color="#FF0000"><b>end
      else if </b></font>right<font color="#000080">&lt;</font>up <font color="#FF0000"><b>then begin </b></font>yasp<font color="#000080">:=</font>right<font color="#000080">; </font>xasp<font color="#000080">:=</font>right<font color="#000080">; </font><font color="#FF0000"><b>end
                       else begin </b></font>xasp<font color="#000080">:=</font>up<font color="#000080">; </font>yasp<font color="#000080">:=</font>up <font color="#FF0000"><b>end
end</b></font><font color="#000080">; </font><font color="#008000"><i>{set_window}

</i></font><font color="#FF0000"><b>function </b></font>vToX<font color="#000080">(</font>x<font color="#000080">: </font>extended<font color="#000080">): </font>integer<font color="#000080">;</font><font color="#FF0000"><b>begin </b></font>vToX<font color="#000080">:=</font>round<font color="#000080">((</font>x<font color="#000080">-</font>xbase<font color="#000080">)*</font>xasp<font color="#000080">) </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
         </font><font color="#008000"><i>{Maps x in the virtual world onto real world}
</i></font><font color="#FF0000"><b>function </b></font>vToY<font color="#000080">(</font>y<font color="#000080">: </font>extended<font color="#000080">): </font>integer<font color="#000080">;</font><font color="#FF0000"><b>begin </b></font>vToY<font color="#000080">:=</font>round<font color="#000080">((</font>y<font color="#000080">-</font>ybase<font color="#000080">)*</font>yasp<font color="#000080">) </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
         </font><font color="#008000"><i>{Maps x in the virtual world onto real world}

</i></font><font color="#FF0000"><b>function </b></font>XtoV<font color="#000080">(</font>X<font color="#000080">: </font>integer<font color="#000080">): </font>extended<font color="#000080">; </font><font color="#FF0000"><b>begin </b></font>XtoV<font color="#000080">:=</font>X<font color="#000080">/</font>xasp<font color="#000080">+</font>xbase <font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{XtoV}
         {Maps X in the real world onto virtual world}
</i></font><font color="#FF0000"><b>function </b></font>YtoV<font color="#000080">(</font>Y<font color="#000080">: </font>integer<font color="#000080">): </font>extended<font color="#000080">; </font><font color="#FF0000"><b>begin </b></font>YtoV<font color="#000080">:=</font>Y<font color="#000080">/</font>yasp<font color="#000080">+</font>ybase <font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{YtoV}
         {Maps Y in the real world onto virtual world}

</i></font><font color="#FF0000"><b>procedure </b></font>vMove<font color="#000080">(</font>x<font color="#000080">, </font>y<font color="#000080">: </font>extended<font color="#000080">);
          </font><font color="#008000"><i>{Moves the current position to (x,y) in the virtual world}
</i></font><font color="#FF0000"><b>begin </b></font>MoveTo<font color="#000080">(</font>round<font color="#000080">((</font>x<font color="#000080">-</font>xbase<font color="#000080">)*</font>xasp<font color="#000080">),</font>round<font color="#000080">((</font>y<font color="#000080">-</font>ybase<font color="#000080">)*</font>yasp<font color="#000080">)) </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{vMove}
</i></font><font color="#FF0000"><b>procedure </b></font>vMoveRel<font color="#000080">(</font>Dx<font color="#000080">, </font>Dy<font color="#000080">: </font>extended<font color="#000080">);
</font><font color="#008000"><i>{Moves the current position a relative distance in the virtual world}
</i></font><font color="#FF0000"><b>begin </b></font>MoveRel<font color="#000080">(</font>round<font color="#000080">(</font>Dx<font color="#000080">*</font>xasp<font color="#000080">),</font>round<font color="#000080">(</font>Dy<font color="#000080">*</font>yasp<font color="#000080">)) </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{vMoveRel}

</i></font><font color="#FF0000"><b>procedure </b></font>vLine<font color="#000080">(</font>x1<font color="#000080">, </font>y1<font color="#000080">, </font>x2<font color="#000080">, </font>y2<font color="#000080">: </font>extended<font color="#000080">);
          </font><font color="#008000"><i>{Draws a line from (x1,y1) to (x2,y2) in the virtual world}
</i></font><font color="#FF0000"><b>begin </b></font>line<font color="#000080">(</font>round<font color="#000080">((</font>x1<font color="#000080">-</font>xbase<font color="#000080">)*</font>xasp<font color="#000080">),</font>round<font color="#000080">((</font>y1<font color="#000080">-</font>ybase<font color="#000080">)*</font>yasp<font color="#000080">),
           </font>round<font color="#000080">((</font>x2<font color="#000080">-</font>xbase<font color="#000080">)*</font>xasp<font color="#000080">),</font>round<font color="#000080">((</font>y2<font color="#000080">-</font>ybase<font color="#000080">)*</font>yasp<font color="#000080">)) </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{vLine}

</i></font><font color="#FF0000"><b>procedure </b></font>vLineTo<font color="#000080">(</font>x<font color="#000080">, </font>y<font color="#000080">: </font>extended<font color="#000080">);
          </font><font color="#008000"><i>{Draws a line from current position to (x,y) in the virtual world}
</i></font><font color="#FF0000"><b>begin </b></font>LineTo<font color="#000080">(</font>round<font color="#000080">((</font>x<font color="#000080">-</font>xbase<font color="#000080">)*</font>xasp<font color="#000080">),</font>round<font color="#000080">((</font>y<font color="#000080">-</font>ybase<font color="#000080">)*</font>yasp<font color="#000080">)) </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{vLineTo}

</i></font><font color="#FF0000"><b>function </b></font>str_width<font color="#000080">(</font>str<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">): </font>extended<font color="#000080">; </font><font color="#008000"><i>{string width in the virtual world}
</i></font><font color="#FF0000"><b>begin </b></font>str_width<font color="#000080">:=</font>TextWidth<font color="#000080">(</font>str<font color="#000080">)/</font>xasp <font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{str_width}

</i></font><font color="#FF0000"><b>function </b></font>str_height<font color="#000080">(</font>str<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">): </font>extended<font color="#000080">; </font><font color="#008000"><i>{string height in the virtual
world}
</i></font><font color="#FF0000"><b>begin </b></font>str_height<font color="#000080">:=</font>TextHeight<font color="#000080">(</font>str<font color="#000080">)/</font>yasp <font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{str_height}
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0135.PAS">Original</a><b>]</b></p></body>
</html>
