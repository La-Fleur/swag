<html>
<head><title> "Flood Filling" by SEAN PALMER</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0053.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt; Does anyone have any code to flood fill an area? I need the code to do
&gt; both, a fill to a certain border colour, or a fill to ANY
&gt; colour other then the one the fill started on.
}

</i></font><font color="#FF0000"><b>var </b></font>fillVal<font color="#000080">:</font>byte<font color="#000080">;
</font><font color="#008000"><i>{This routine only called by fill}
</i></font><font color="#FF0000"><b>function </b></font>lineFill<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>d<font color="#000080">,</font>prevXL<font color="#000080">,</font>prevXR<font color="#000080">:</font>integer<font color="#000080">):</font>integer<font color="#000080">;
 </font><font color="#FF0000"><b>var </b></font>xl<font color="#000080">,</font>xr<font color="#000080">,</font>i<font color="#000080">:</font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
 </b></font>xl<font color="#000080">:=</font>x<font color="#000080">;</font>xr<font color="#000080">:=</font>x<font color="#000080">;
 </font><font color="#FF0000"><b>repeat </b></font>dec<font color="#000080">(</font>xl<font color="#000080">); </font><font color="#FF0000"><b>until</b></font><font color="#000080">(</font>scrn<font color="#000080">(</font>xl<font color="#000080">,</font>y<font color="#000080">)&lt;&gt;</font>fillVal<font color="#000080">)</font><font color="#FF0000"><b>or</b></font><font color="#000080">(</font>xl<font color="#000080">&lt;</font><font color="#800000">0</font><font color="#000080">); </font>inc<font color="#000080">(</font>xl<font color="#000080">);
 </font><font color="#FF0000"><b>repeat </b></font>inc<font color="#000080">(</font>xr<font color="#000080">); </font><font color="#FF0000"><b>until</b></font><font color="#000080">(</font>scrn<font color="#000080">(</font>xr<font color="#000080">,</font>y<font color="#000080">)&lt;&gt;</font>fillVal<font color="#000080">)</font><font color="#FF0000"><b>or</b></font><font color="#000080">(</font>xr<font color="#000080">&gt;</font>xMax<font color="#000080">); </font>dec<font color="#000080">(</font>xr<font color="#000080">);
 </font>hLin<font color="#000080">(</font>xl<font color="#000080">,</font>xr<font color="#000080">,</font>y<font color="#000080">);
 </font>inc<font color="#000080">(</font>y<font color="#000080">,</font>d<font color="#000080">);
 </font><font color="#FF0000"><b>if </b></font>word<font color="#000080">(</font>y<font color="#000080">)&lt;=</font>yMax <font color="#FF0000"><b>then
  for </b></font>x<font color="#000080">:=</font>xl <font color="#FF0000"><b>to </b></font>xr <font color="#FF0000"><b>do
   if</b></font><font color="#000080">(</font>scrn<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">)=</font>fillVal<font color="#000080">)</font><font color="#FF0000"><b>then begin
    </b></font>x<font color="#000080">:=</font>lineFill<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>d<font color="#000080">,</font>xl<font color="#000080">,</font>xr<font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font>word<font color="#000080">(</font>x<font color="#000080">)&gt;</font>xr <font color="#FF0000"><b>then </b></font>break<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font>dec<font color="#000080">(</font>y<font color="#000080">,</font>d<font color="#000080">+</font>d<font color="#000080">); </font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">neg d;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>if </b></font>word<font color="#000080">(</font>y<font color="#000080">)&lt;=</font>yMax <font color="#FF0000"><b>then begin
  for </b></font>x<font color="#000080">:=</font>xl <font color="#FF0000"><b>to </b></font>prevXL <font color="#FF0000"><b>do
   if</b></font><font color="#000080">(</font>scrn<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">)=</font>fillVal<font color="#000080">)</font><font color="#FF0000"><b>then begin
    </b></font>i<font color="#000080">:=</font>lineFill<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>d<font color="#000080">,</font>xl<font color="#000080">,</font>xr<font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font>word<font color="#000080">(</font>x<font color="#000080">)&gt;</font>prevXL <font color="#FF0000"><b>then </b></font>break<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>x<font color="#000080">:=</font>prevXR <font color="#FF0000"><b>to </b></font>xr <font color="#FF0000"><b>do
   if</b></font><font color="#000080">(</font>scrn<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">)=</font>fillVal<font color="#000080">)</font><font color="#FF0000"><b>then begin
    </b></font>i<font color="#000080">:=</font>lineFill<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>d<font color="#000080">,</font>xl<font color="#000080">,</font>xr<font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font>word<font color="#000080">(</font>x<font color="#000080">)&gt;</font>xr <font color="#FF0000"><b>then </b></font>break<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font>lineFill<font color="#000080">:=</font>xr<font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>fill<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">:</font>integer<font color="#000080">);</font><font color="#FF0000"><b>begin
 </b></font>fillVal<font color="#000080">:=</font>scrn<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">);</font><font color="#FF0000"><b>if </b></font>fillVal<font color="#000080">&lt;&gt;</font>color <font color="#FF0000"><b>then </b></font>lineFill<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font>x<font color="#000080">,</font>x<font color="#000080">);
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{
This one's too recursive for anything really complicated (blows the stack). But
it works. You'll find that making it do a border fill instead isn't hard at
all. You'll need to provide your own hLin and scrn routines.

hLin draws a horizontal line from X,to X2,at Y scrn reads the pixel at X,Y and
returns its color color is a global byte variable in this incarnation. The fill
happens in this color.
}
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0053.PAS">Original</a><b>]</b></p></body>
</html>
