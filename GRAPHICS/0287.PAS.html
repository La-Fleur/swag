<html>
<head><title> "Very fast and usable graphics unit" by PAVEL STRATIL</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0287.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#000000">version <font color="#800000">2.02
</font>copile<font color="#000080">/</font>use this <font color="#FF0000"><b>in far </b></font>model
wait <font color="#FF0000"><b>for </b></font>the new <font color="#800000">3.00 </font>version <font color="#000080">- </font><font color="#800000">70</font>k large

<font color="#008000"><i>{$G+}
</i></font><font color="#FF0000"><b>type </b></font>VirtualArray <font color="#000080">= </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">64000</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
     </font>VPointer <font color="#000080">= ^</font>VirtualArray<font color="#000080">;
     </font>coor <font color="#000080">= </font><font color="#FF0000"><b>record
               </b></font>x<font color="#000080">,</font>y<font color="#000080">:</font>word<font color="#000080">;
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
     </font>coordtyp <font color="#000080">= </font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">12</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>integer<font color="#000080">;
     </font>fp <font color="#000080">= </font>longint<font color="#000080">;
</font><font color="#FF0000"><b>var  </b></font>coord <font color="#000080">: </font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">20</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>coor<font color="#000080">;

</font><font color="#008000"><i>{ ******************************* DOS ************************************ }

</i></font><font color="#FF0000"><b>function </b></font>DosMax <font color="#000080">: </font>longint<font color="#000080">;</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;</font><font color="#008000"><i>{vrati velikost volne dol. pam. v bytech}
</i></font><font color="#FF0000"><b>asm  </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">mov bx,0ffffh
  mov ah,48h
  int 21h
  mov ax,bx
  mov bx,16
  mul bx
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>GMem<font color="#000080">(</font>size<font color="#000080">:</font>longint<font color="#000080">) : </font>pointer<font color="#000080">;</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
</i></font><font color="#FF00FF">@@1:
  mov ax,word ptr [size]
  mov dx,word ptr [size+2]
  mov cx,16
  div cx
  inc ax
  mov bx,ax
  mov ah,48h
  int 21h
  jnc @@2
  xor ax,ax
@@2:
  mov dx,ax
  xor ax,ax
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>FMem<font color="#000080">(</font>p<font color="#000080">:</font>pointer<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">mov es,word ptr [p+2]
  mov ah,49h
  int 21h
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>ReAlloc<font color="#000080">(</font>p<font color="#000080">:</font>pointer<font color="#000080">; </font>newsize<font color="#000080">:</font>longint<font color="#000080">) : </font>pointer<font color="#000080">;</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">mov ax,word ptr [p+2]
  mov es,ax
  mov ax,word ptr [newsize]
  mov dx,word ptr [newsize+2]
  mov cx,16
  div cx
  inc ax
  mov bx,ax
  mov ah,4ah
  int 21h
  jnc @@</font><font color="#FF0000"><b>end
  xor </b></font>dx<font color="#000080">,</font>dx
  <font color="#FF0000"><b>xor </b></font>ax<font color="#000080">,</font>ax
<font color="#000080">@@</font><font color="#FF0000"><b>end</b></font><font color="#000080">:
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#008000"><i>{ ******************************* CRT ************************************ }

{ MOUSE }

</i></font><font color="#FF0000"><b>procedure </b></font>MouseInit<font color="#000080">(</font>no<font color="#000080">:</font>word<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">mov ax,no
  int 33h
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>GetMouse<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>x<font color="#000080">,</font>y<font color="#000080">,</font>b<font color="#000080">:</font>word<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">mov ax,3
  int 33h
  les di,dword ptr [bp+0eh]
  mov word ptr es:[di],bx
  les di,dword ptr [bp+0ah]
  mov word ptr es:[di],cx
  les di,dword ptr [bp+6]
  mov word ptr es:[di],dx
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>SetMWin<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">:</font>word<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">mov ax,7
  mov cx,[x]
  mov dx,[x2]
  int 33h
  inc ax
  mov cx,[y]
  mov dx,[y2]
  int 33h
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{OK}

</i></font><font color="#FF0000"><b>procedure </b></font>NewCur<font color="#000080">(</font>hotspotx<font color="#000080">,</font>hotspoty<font color="#000080">:</font>word<font color="#000080">;</font><font color="#FF0000"><b>var </b></font>newcursor<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm
</b></font><font color="#FF00FF">mov ax,word ptr newcursor+2
mov es,ax
mov dx,word ptr newcursor
mov ax,9h
mov bx,hotspotx
mov cx,hotspoty
int 33h
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ KEYBOARD }

</i></font><font color="#FF0000"><b>procedure </b></font>KeybOn<font color="#000080">;</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">in al,21h
  and al,11111101b
  out 21h,al
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>KeybOff<font color="#000080">;</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">in al,21h
  or al,00000010b
  out 21h,al
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>KeyPressed<font color="#000080">:</font>boolean<font color="#000080">;
</font><font color="#FF0000"><b>begin
  asm
    </b></font><font color="#FF00FF">mov</font>	<font color="#FF00FF">ah,1
    int</font>	<font color="#FF00FF">16h
    jnz</font>	<font color="#FF00FF">@true
    mov</font>	<font color="#FF00FF">[@result],false
    jmp</font>	<font color="#FF00FF">@</font><font color="#FF0000"><b>end
</b></font><font color="#000080">@</font>true<font color="#000080">:
    </font>mov	<font color="#000080">[@</font>result<font color="#000080">],</font>true
<font color="#000080">@</font><font color="#FF0000"><b>end</b></font><font color="#000080">:
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>ReadKey<font color="#000080">:</font>char<font color="#000080">;</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">mov ah,0h
  int 16h
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ PC SPEAKER }

</i></font><font color="#FF0000"><b>procedure </b></font>NoSound<font color="#000080">;</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">in al,61h
  and al,0fch
  out 61h,al
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>Sound<font color="#000080">(</font>hz<font color="#000080">:</font>word<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">mov bx,hz
  mov ax,34ddh
  mov dx,0012h
  cmp dx,bx
  jnc @2
  div bx
  mov bx,ax
  in al,61h
  test al,3
  jnz @1
  or al,3
  out 61h,al
  mov al,0b6h
  out 43h,al
@1:
  mov al,bl
  out 42h,al
  mov al,bh
  out 42h,al
@2:
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ MISCELANEOUS }

</i></font><font color="#FF0000"><b>procedure </b></font>XDelay<font color="#000080">(</font>ms<font color="#000080">:</font>word<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">mov ax,1000
  mul ms
  mov cx,dx
  mov dx,ax
  mov ah,86h
  int 15h
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ ******************************** GRAPH ********************************** }

{ BASIC }

</i></font><font color="#FF0000"><b>procedure </b></font>SetVga<font color="#000080">(</font>mode<font color="#000080">:</font>word<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">mov ax,[mode]
  int 10h
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>Cls<font color="#000080">(</font>target<font color="#000080">:</font>word<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">mov ax,[bp+offset target]
  mov es,ax
  xor di,di
  db 66h; xor ax,ax
  mov cx,16000
  db 0f3h,66h,0abh
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>CCls<font color="#000080">(</font>color<font color="#000080">:</font>byte<font color="#000080">;</font>target<font color="#000080">:</font>word<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">mov ax,[target]
  mov es,ax
  xor di,di
  mov cx,16000
  mov al,[color]
  mov ah,al          </font><font color="#008000"><i>{hi i low maji hodnotu barvy}
  </i></font><font color="#FF00FF">mov bx,ax
  db 66h; shl ax,16  </font><font color="#008000"><i>{ax*65535 -&gt; hi word eax}
  </i></font><font color="#FF00FF">mov ax, bx         </font><font color="#008000"><i>{dolni word eax - v kazdym bytu eax je hodnota barvy}
  </i></font><font color="#FF00FF">db 0f3h,66h,0abh   </font><font color="#008000"><i>{rep movsd}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>PPix<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">: </font>Integer<font color="#000080">;</font>color<font color="#000080">:</font>byte<font color="#000080">;</font>target<font color="#000080">:</font>word<font color="#000080">); </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">mov ax,target
  mov es,ax
  mov ax,y
  mov di,ax
  shl ax,6
  shl di,8
  add di,ax
  add di,x
  mov al,color
  mov es:[di],al
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>GPix<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">:</font>integer<font color="#000080">;</font>target<font color="#000080">:</font>word<font color="#000080">):</font>byte<font color="#000080">;</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>asm  </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">mov ax,target
  mov es,ax
   mov ax,y
   mov di,ax
   shl ax,6
   shl di,8
   add di,ax
   add di,x
   mov al,es:[di]
   mov [bp-1],al
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ 2D GRAPHIC }

</i></font><font color="#FF0000"><b>procedure </b></font>HLn<font color="#000080">(</font>x1<font color="#000080">,</font>x2<font color="#000080">,</font>y<font color="#000080">:</font>word<font color="#000080">;</font>col<font color="#000080">:</font>byte<font color="#000080">;</font>target<font color="#000080">:</font>word<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">mov ax,target
  mov es,ax
  mov ax,y
  mov di,ax
  shl ax,8
  shl di,6
  add di,ax
  add di,x1        </font><font color="#008000"><i>{pocatecni x1}
  </i></font><font color="#FF00FF">mov al,col
  mov ah,al
  mov cx,x2
  sub cx,x1        </font><font color="#008000"><i>{cx:=x2-x1}
  </i></font><font color="#FF00FF">inc cx
  shr cx,1         </font><font color="#008000"><i>{cx:=cx/2}
  </i></font><font color="#FF00FF">jnc @1           </font><font color="#008000"><i>{sklace na @1 a misto stosb jede 2* rychlejsi stosw}
  </i></font><font color="#FF00FF">mov es:[di],ah
  inc di
@1:
  rep stosw      </font><font color="#008000"><i>{mov es:[di],ah cx/2*2 krat}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>HLn32<font color="#000080">(</font>x1<font color="#000080">,</font>x2<font color="#000080">,</font>y<font color="#000080">:</font>word<font color="#000080">;</font>col<font color="#000080">:</font>byte<font color="#000080">;</font>target<font color="#000080">:</font>word<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">mov ax,target
  mov es,ax
  mov ax,y
  mov di,ax
  shl ax,8
  shl di,6
  add di,ax
  add di,x1        </font><font color="#008000"><i>{pocatecni x1}
  </i></font><font color="#FF00FF">mov al,col
  mov ah,al
  mov bx,ax
  db $66; shl ax,16
  mov ax,bx
  mov cx,x2
  sub cx,x1        </font><font color="#008000"><i>{cx:=x2-x1}
  </i></font><font color="#FF00FF">inc cx
  mov bx,cx
  and bx,3
  shr cx,2
  db 66h; rep stosw
@2:
  mov es:[di],al
  add di,1
  dec cx
jns @2
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>VLn<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>y2<font color="#000080">:</font>word<font color="#000080">;</font>c<font color="#000080">:</font>byte<font color="#000080">;</font>target<font color="#000080">:</font>word<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">mov ax,x1
  mov bx,y1
  mov dx,y2
@1:
  mov di,bx
  mov cx,di
  shl cx,8
  shl di,6
  add di,cx
  add di,ax
  mov cx,[target]
  mov es,cx
  mov cx,dx
  sub cx,bx
  inc cx
  mov al,c
@2:
  stosb
  add di,319
  loop @2
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>XLine<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">:</font>integer<font color="#000080">;</font>color<font color="#000080">:</font>byte<font color="#000080">;</font>target<font color="#000080">:</font>word<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>ax<font color="#000080">,</font>bx<font color="#000080">,</font>ay<font color="#000080">,</font>by<font color="#000080">,</font>f<font color="#000080">,</font>aa<font color="#000080">,</font>bb<font color="#000080">:</font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  if </b></font>x<font color="#000080">&lt;</font>x2 <font color="#FF0000"><b>then begin </b></font>ax<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;</font>bx<font color="#000080">:=</font>x2<font color="#000080">-</font>x<font color="#000080">; </font><font color="#FF0000"><b>end
          else begin </b></font>ax<font color="#000080">:=-</font><font color="#800000">1</font><font color="#000080">;</font>bx<font color="#000080">:=</font>x<font color="#000080">-</font>x2<font color="#000080">; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>y<font color="#000080">&lt;</font>y2 <font color="#FF0000"><b>then begin </b></font>ay<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;</font>by<font color="#000080">:=</font>y2<font color="#000080">-</font>y<font color="#000080">; </font><font color="#FF0000"><b>end
          else begin </b></font>ay<font color="#000080">:=-</font><font color="#800000">1</font><font color="#000080">;</font>by<font color="#000080">:=</font>y<font color="#000080">-</font>y2<font color="#000080">; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>bx<font color="#000080">&gt;</font>by <font color="#FF0000"><b>then begin
    </b></font>aa<font color="#000080">:=(</font>by<font color="#000080">-</font>bx<font color="#000080">)*</font><font color="#800000">2</font><font color="#000080">;
    </font>bb<font color="#000080">:=</font>by<font color="#000080">*</font><font color="#800000">2</font><font color="#000080">;
    </font>f<font color="#000080">:=</font>bb<font color="#000080">-</font>bx<font color="#000080">;
    </font><font color="#FF0000"><b>repeat
      if</b></font><font color="#000080">(</font>f<font color="#000080">&gt;=</font><font color="#800000">0</font><font color="#000080">)</font><font color="#FF0000"><b>then begin </b></font>inc<font color="#000080">(</font>y<font color="#000080">,</font>ay<font color="#000080">);</font>inc<font color="#000080">(</font>f<font color="#000080">,</font>aa<font color="#000080">);</font><font color="#FF0000"><b>end
              else </b></font>inc<font color="#000080">(</font>f<font color="#000080">,</font>bb<font color="#000080">);</font>inc<font color="#000080">(</font>x<font color="#000080">,</font>ax<font color="#000080">);
      </font>PPix<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>color<font color="#000080">,</font>target<font color="#000080">);
    </font><font color="#FF0000"><b>until</b></font><font color="#000080">(</font>x<font color="#000080">=</font>x2<font color="#000080">);
  </font><font color="#FF0000"><b>end
           else begin
    </b></font>aa<font color="#000080">:=(</font>bx<font color="#000080">-</font>by<font color="#000080">)*</font><font color="#800000">2</font><font color="#000080">;
    </font>bb<font color="#000080">:=</font>bx<font color="#000080">*</font><font color="#800000">2</font><font color="#000080">;
    </font>f<font color="#000080">:=</font>bb<font color="#000080">-</font>by<font color="#000080">;
    </font><font color="#FF0000"><b>repeat
      if</b></font><font color="#000080">(</font>f<font color="#000080">&gt;=</font><font color="#800000">0</font><font color="#000080">)</font><font color="#FF0000"><b>then begin </b></font>inc<font color="#000080">(</font>x<font color="#000080">,</font>ax<font color="#000080">);</font>inc<font color="#000080">(</font>f<font color="#000080">,</font>aa<font color="#000080">);</font><font color="#FF0000"><b>end
              else </b></font>inc<font color="#000080">(</font>f<font color="#000080">,</font>bb<font color="#000080">);</font>inc<font color="#000080">(</font>y<font color="#000080">,</font>ay<font color="#000080">);
      </font>PPix<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>color<font color="#000080">,</font>target<font color="#000080">);
    </font><font color="#FF0000"><b>until</b></font><font color="#000080">(</font>y<font color="#000080">=</font>y2<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>XCircle<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">:</font>integer<font color="#000080">;</font>radius<font color="#000080">,</font>ankle<font color="#000080">:</font>word<font color="#000080">;</font>color<font color="#000080">:</font>byte<font color="#000080">;
                  </font>presnost<font color="#000080">:</font>word<font color="#000080">;</font>posun<font color="#000080">:</font>integer<font color="#000080">;</font>target<font color="#000080">:</font>word<font color="#000080">); </font><font color="#008000"><i>{posun- 1/8 presnosti}
</i></font><font color="#FF0000"><b>var </b></font>g<font color="#000080">,</font>h<font color="#000080">,</font>e<font color="#000080">,</font>f<font color="#000080">,</font>c<font color="#000080">,</font>d<font color="#000080">,</font>a<font color="#000080">:</font>real<font color="#000080">;
</font>i<font color="#000080">,</font>rotX<font color="#000080">,</font>rotY<font color="#000080">:</font>integer<font color="#000080">;
</font>b<font color="#000080">:</font>word<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>a<font color="#000080">:=</font>presnost<font color="#000080">/</font>ankle<font color="#000080">;
  </font>b<font color="#000080">:=</font>round<font color="#000080">(</font>presnost<font color="#000080">*(</font>ankle<font color="#000080">/</font><font color="#800000">360</font><font color="#000080">));
  </font>c<font color="#000080">:=</font>a<font color="#000080">*</font>radius<font color="#000080">;
  </font>d<font color="#000080">:=(</font><font color="#800000">2</font><font color="#000080">*</font>Pi<font color="#000080">)/</font>presnost<font color="#000080">;
  </font>e<font color="#000080">:=</font><font color="#800000">5</font><font color="#000080">/</font><font color="#800000">6</font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font>posun <font color="#FF0000"><b>to </b></font>posun<font color="#000080">+</font>b <font color="#FF0000"><b>do begin
    </b></font>f<font color="#000080">:=</font>d<font color="#000080">*</font>i<font color="#000080">;
    </font>g<font color="#000080">:=</font>c<font color="#000080">*</font>sin<font color="#000080">(</font>f<font color="#000080">);
    </font>h<font color="#000080">:=</font>c<font color="#000080">*</font>cos<font color="#000080">(</font>f<font color="#000080">);
    </font>rotX<font color="#000080">:=</font>round<font color="#000080">((</font>g<font color="#000080">-</font>h<font color="#000080">)/</font>a<font color="#000080">);
    </font>rotY<font color="#000080">:=</font>round<font color="#000080">(((</font>g<font color="#000080">+</font>h<font color="#000080">)/</font>a<font color="#000080">)*</font>e<font color="#000080">);
    </font>ppix<font color="#000080">((</font>rotX<font color="#000080">+</font>x<font color="#000080">),(</font>rotY<font color="#000080">+</font>y<font color="#000080">),</font>color<font color="#000080">,</font>target<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>Ellipse<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>a<font color="#000080">,</font>b<font color="#000080">:</font>integer<font color="#000080">;</font>c<font color="#000080">:</font>byte<font color="#000080">;</font>target<font color="#000080">:</font>word<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>xa<font color="#000080">,</font>ya<font color="#000080">:</font>integer<font color="#000080">;
    </font>aa<font color="#000080">,</font>aa2<font color="#000080">,</font>bb<font color="#000080">,</font>bb2<font color="#000080">,</font>d<font color="#000080">,</font>dx<font color="#000080">,</font>dy<font color="#000080">:</font>longint<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>xa<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;</font>ya<font color="#000080">:=</font>b<font color="#000080">;
  </font>aa<font color="#000080">:=</font>longint<font color="#000080">(</font>a<font color="#000080">)*</font>a<font color="#000080">;</font>aa2<font color="#000080">:=</font><font color="#800000">2</font><font color="#000080">*</font>aa<font color="#000080">;
  </font>bb<font color="#000080">:=</font>longint<font color="#000080">(</font>b<font color="#000080">)*</font>b<font color="#000080">;</font>bb2<font color="#000080">:=</font><font color="#800000">2</font><font color="#000080">*</font>bb<font color="#000080">;
  </font>d<font color="#000080">:=</font>bb<font color="#000080">-</font>aa<font color="#000080">*</font>b<font color="#000080">+</font>aa <font color="#FF0000"><b>div </b></font><font color="#800000">4</font><font color="#000080">;
  </font>dx<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;</font>dy<font color="#000080">:=</font>aa2<font color="#000080">*</font>b<font color="#000080">;
  </font>ppix<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">-</font>ya<font color="#000080">,</font>c<font color="#000080">,</font>target<font color="#000080">);
  </font>ppix<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">+</font>ya<font color="#000080">,</font>c<font color="#000080">,</font>target<font color="#000080">);
  </font>ppix<font color="#000080">(</font>x<font color="#000080">-</font>a<font color="#000080">,</font>y<font color="#000080">,</font>c<font color="#000080">,</font>target<font color="#000080">);
  </font>ppix<font color="#000080">(</font>x<font color="#000080">+</font>a<font color="#000080">,</font>y<font color="#000080">,</font>c<font color="#000080">,</font>target<font color="#000080">);
  </font><font color="#FF0000"><b>while</b></font><font color="#000080">(</font>dx<font color="#000080">&lt;</font>dy<font color="#000080">)</font><font color="#FF0000"><b>do begin
      if</b></font><font color="#000080">(</font>d<font color="#000080">&gt;</font><font color="#800000">0</font><font color="#000080">)</font><font color="#FF0000"><b>then begin </b></font>dec<font color="#000080">(</font>ya<font color="#000080">);
      </font>dec<font color="#000080">(</font>dy<font color="#000080">,</font>aa2<font color="#000080">);
      </font>dec<font color="#000080">(</font>d<font color="#000080">,</font>dy<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>inc<font color="#000080">(</font>xa<font color="#000080">);
    </font>inc<font color="#000080">(</font>dx<font color="#000080">,</font>bb2<font color="#000080">);
    </font>inc<font color="#000080">(</font>d<font color="#000080">,</font>bb<font color="#000080">+</font>dx<font color="#000080">);
    </font>ppix<font color="#000080">(</font>x<font color="#000080">+</font>xa<font color="#000080">,</font>y<font color="#000080">+</font>ya<font color="#000080">,</font>c<font color="#000080">,</font>target<font color="#000080">);
    </font>ppix<font color="#000080">(</font>x<font color="#000080">-</font>xa<font color="#000080">,</font>y<font color="#000080">+</font>ya<font color="#000080">,</font>c<font color="#000080">,</font>target<font color="#000080">);
    </font>ppix<font color="#000080">(</font>x<font color="#000080">+</font>xa<font color="#000080">,</font>y<font color="#000080">-</font>ya<font color="#000080">,</font>c<font color="#000080">,</font>target<font color="#000080">);
    </font>ppix<font color="#000080">(</font>x<font color="#000080">-</font>xa<font color="#000080">,</font>y<font color="#000080">-</font>ya<font color="#000080">,</font>c<font color="#000080">,</font>target<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>inc<font color="#000080">(</font>d<font color="#000080">,(</font><font color="#800000">3</font><font color="#000080">*(</font>aa<font color="#000080">-</font>bb<font color="#000080">)</font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">-(</font>dx<font color="#000080">+</font>dy<font color="#000080">))</font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">);
  </font><font color="#FF0000"><b>while</b></font><font color="#000080">(</font>ya<font color="#000080">&gt;</font><font color="#800000">0</font><font color="#000080">)</font><font color="#FF0000"><b>do begin
      if</b></font><font color="#000080">(</font>d<font color="#000080">&lt;</font><font color="#800000">0</font><font color="#000080">)</font><font color="#FF0000"><b>then begin
      </b></font>inc<font color="#000080">(</font>xa<font color="#000080">);
      </font>inc<font color="#000080">(</font>dx<font color="#000080">,</font>bb2<font color="#000080">);
      </font>inc<font color="#000080">(</font>d<font color="#000080">,</font>bb<font color="#000080">+</font>dx<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>dec<font color="#000080">(</font>ya<font color="#000080">);
    </font>dec<font color="#000080">(</font>dy<font color="#000080">,</font>aa2<font color="#000080">);
    </font>inc<font color="#000080">(</font>d<font color="#000080">,</font>aa<font color="#000080">-</font>dy<font color="#000080">);
    </font>ppix<font color="#000080">(</font>x<font color="#000080">+</font>xa<font color="#000080">,</font>y<font color="#000080">+</font>ya<font color="#000080">,</font>c<font color="#000080">,</font>target<font color="#000080">);
    </font>ppix<font color="#000080">(</font>x<font color="#000080">-</font>xa<font color="#000080">,</font>y<font color="#000080">+</font>ya<font color="#000080">,</font>c<font color="#000080">,</font>target<font color="#000080">);
    </font>ppix<font color="#000080">(</font>x<font color="#000080">+</font>xa<font color="#000080">,</font>y<font color="#000080">-</font>ya<font color="#000080">,</font>c<font color="#000080">,</font>target<font color="#000080">);
    </font>ppix<font color="#000080">(</font>x<font color="#000080">-</font>xa<font color="#000080">,</font>y<font color="#000080">-</font>ya<font color="#000080">,</font>c<font color="#000080">,</font>target<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>FillEllipse<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>a<font color="#000080">,</font>b<font color="#000080">:</font>integer<font color="#000080">;</font>c<font color="#000080">:</font>byte<font color="#000080">;</font>target<font color="#000080">:</font>word<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>xa<font color="#000080">,</font>ya<font color="#000080">:</font>integer<font color="#000080">;
    </font>aa<font color="#000080">,</font>aa2<font color="#000080">,</font>bb<font color="#000080">,</font>bb2<font color="#000080">,</font>d<font color="#000080">,</font>dx<font color="#000080">,</font>dy<font color="#000080">:</font>longint<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>xa<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;</font>ya<font color="#000080">:=</font>b<font color="#000080">;
  </font>aa<font color="#000080">:=</font>longint<font color="#000080">(</font>a<font color="#000080">)*</font>a<font color="#000080">;
  </font>aa2<font color="#000080">:=</font><font color="#800000">2</font><font color="#000080">*</font>aa<font color="#000080">;
  </font>bb<font color="#000080">:=</font>longint<font color="#000080">(</font>b<font color="#000080">)*</font>b<font color="#000080">;
  </font>bb2<font color="#000080">:=</font><font color="#800000">2</font><font color="#000080">*</font>bb<font color="#000080">;
  </font>d<font color="#000080">:=</font>bb<font color="#000080">-</font>aa<font color="#000080">*</font>b<font color="#000080">+</font>aa <font color="#FF0000"><b>div </b></font><font color="#800000">4</font><font color="#000080">;
  </font>dx<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;</font>dy<font color="#000080">:=</font>aa2<font color="#000080">*</font>b<font color="#000080">;
  </font>vLn<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">-</font>ya<font color="#000080">,</font>y<font color="#000080">+</font>ya<font color="#000080">,</font>c<font color="#000080">,</font>target<font color="#000080">);
  </font><font color="#FF0000"><b>while</b></font><font color="#000080">(</font>dx<font color="#000080">&lt;</font>dy<font color="#000080">)</font><font color="#FF0000"><b>do begin
      if</b></font><font color="#000080">(</font>d<font color="#000080">&gt;</font><font color="#800000">0</font><font color="#000080">)</font><font color="#FF0000"><b>then begin </b></font>dec<font color="#000080">(</font>ya<font color="#000080">);
      </font>dec<font color="#000080">(</font>dy<font color="#000080">,</font>aa2<font color="#000080">);
      </font>dec<font color="#000080">(</font>d<font color="#000080">,</font>dy<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>inc<font color="#000080">(</font>xa<font color="#000080">);
    </font>inc<font color="#000080">(</font>dx<font color="#000080">,</font>bb2<font color="#000080">);
    </font>inc<font color="#000080">(</font>d<font color="#000080">,</font>bb<font color="#000080">+</font>dx<font color="#000080">);
    </font>vLn<font color="#000080">(</font>x<font color="#000080">-</font>xa<font color="#000080">,</font>y<font color="#000080">-</font>ya<font color="#000080">,</font>y<font color="#000080">+</font>ya<font color="#000080">,</font>c<font color="#000080">,</font>target<font color="#000080">);
    </font>vLn<font color="#000080">(</font>x<font color="#000080">+</font>xa<font color="#000080">,</font>y<font color="#000080">-</font>ya<font color="#000080">,</font>y<font color="#000080">+</font>ya<font color="#000080">,</font>c<font color="#000080">,</font>target<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>inc<font color="#000080">(</font>d<font color="#000080">,(</font><font color="#800000">3</font><font color="#000080">*(</font>aa<font color="#000080">-</font>bb<font color="#000080">)</font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">-(</font>dx<font color="#000080">+</font>dy<font color="#000080">))</font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">);
  </font><font color="#FF0000"><b>while</b></font><font color="#000080">(</font>ya<font color="#000080">&gt;=</font><font color="#800000">0</font><font color="#000080">)</font><font color="#FF0000"><b>do begin
      if</b></font><font color="#000080">(</font>d<font color="#000080">&lt;</font><font color="#800000">0</font><font color="#000080">)</font><font color="#FF0000"><b>then begin
      </b></font>inc<font color="#000080">(</font>xa<font color="#000080">);
      </font>inc<font color="#000080">(</font>dx<font color="#000080">,</font>bb2<font color="#000080">);
      </font>inc<font color="#000080">(</font>d<font color="#000080">,</font>bb<font color="#000080">+</font>dx<font color="#000080">);
      </font>vLn<font color="#000080">(</font>x<font color="#000080">-</font>xa<font color="#000080">,</font>y<font color="#000080">-</font>ya<font color="#000080">,</font>y<font color="#000080">+</font>ya<font color="#000080">,</font>c<font color="#000080">,</font>target<font color="#000080">);
      </font>vLn<font color="#000080">(</font>x<font color="#000080">+</font>xa<font color="#000080">,</font>y<font color="#000080">-</font>ya<font color="#000080">,</font>y<font color="#000080">+</font>ya<font color="#000080">,</font>c<font color="#000080">,</font>target<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>dec<font color="#000080">(</font>ya<font color="#000080">);
    </font>dec<font color="#000080">(</font>dy<font color="#000080">,</font>aa2<font color="#000080">);
    </font>inc<font color="#000080">(</font>d<font color="#000080">,</font>aa<font color="#000080">-</font>dy<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>Triangle<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">,</font>x3<font color="#000080">,</font>y3<font color="#000080">:</font>integer<font color="#000080">;</font>color<font color="#000080">:</font>byte<font color="#000080">;</font>target<font color="#000080">:</font>word<font color="#000080">);
</font><font color="#FF0000"><b>var
 </b></font>x<font color="#000080">,</font>minY<font color="#000080">,</font>maxY<font color="#000080">,</font>ax<font color="#000080">,</font>bx<font color="#000080">,</font>yy<font color="#000080">,</font>p1<font color="#000080">,</font>q1<font color="#000080">,</font>p2<font color="#000080">,</font>q2<font color="#000080">,</font>p3<font color="#000080">,</font>q3<font color="#000080">:</font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>minY<font color="#000080">:=</font>y1<font color="#000080">; </font>maxY<font color="#000080">:=</font>y1<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>y2<font color="#000080">&lt;</font>minY <font color="#FF0000"><b>then </b></font>minY<font color="#000080">:=</font>y2<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>y2<font color="#000080">&gt;</font>maxY <font color="#FF0000"><b>then </b></font>maxY<font color="#000080">:=</font>y2<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>y3<font color="#000080">&lt;</font>minY <font color="#FF0000"><b>then </b></font>minY<font color="#000080">:=</font>y3<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>y3<font color="#000080">&gt;</font>maxY <font color="#FF0000"><b>then </b></font>maxY<font color="#000080">:=</font>y3<font color="#000080">;
  </font>p1<font color="#000080">:=</font>x1<font color="#000080">-</font>x3<font color="#000080">; </font>q1<font color="#000080">:=</font>y1<font color="#000080">-</font>y3<font color="#000080">;
  </font>p2<font color="#000080">:=</font>x2<font color="#000080">-</font>x1<font color="#000080">; </font>q2<font color="#000080">:=</font>y2<font color="#000080">-</font>y1<font color="#000080">;
  </font>p3<font color="#000080">:=</font>x3<font color="#000080">-</font>x2<font color="#000080">; </font>q3<font color="#000080">:=</font>y3<font color="#000080">-</font>y2<font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>yy<font color="#000080">:=</font>minY <font color="#FF0000"><b>to </b></font>maxY <font color="#FF0000"><b>do
    begin
      </b></font>ax<font color="#000080">:=</font><font color="#800000">320</font><font color="#000080">;
      </font>bx<font color="#000080">:=-</font><font color="#800000">1</font><font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>y3<font color="#000080">&gt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>y1<font color="#000080">&gt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>then
        if </b></font><font color="#000080">(</font>y3<font color="#000080">&lt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>y1<font color="#000080">&lt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>then
          if not</b></font><font color="#000080">(</font>y3<font color="#000080">=</font>y1<font color="#000080">) </font><font color="#FF0000"><b>then begin
              </b></font>x<font color="#000080">:=(</font>yy<font color="#000080">-</font>y3<font color="#000080">)*</font>p1 <font color="#FF0000"><b>div </b></font>q1<font color="#000080">+</font>x3<font color="#000080">;
              </font><font color="#FF0000"><b>if </b></font>x<font color="#000080">&lt;</font>ax <font color="#FF0000"><b>then </b></font>ax<font color="#000080">:=</font>x<font color="#000080">;
              </font><font color="#FF0000"><b>if </b></font>x<font color="#000080">&gt;</font>bx <font color="#FF0000"><b>then </b></font>bx<font color="#000080">:=</font>x<font color="#000080">;
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>y1<font color="#000080">&gt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>y2<font color="#000080">&gt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>then
        if </b></font><font color="#000080">(</font>y1<font color="#000080">&lt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>y2<font color="#000080">&lt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>then
          if not</b></font><font color="#000080">(</font>y1<font color="#000080">=</font>y2<font color="#000080">) </font><font color="#FF0000"><b>then begin
              </b></font>x<font color="#000080">:=(</font>yy<font color="#000080">-</font>y1<font color="#000080">)*</font>p2 <font color="#FF0000"><b>div </b></font>q2<font color="#000080">+</font>x1<font color="#000080">;
              </font><font color="#FF0000"><b>if </b></font>x<font color="#000080">&lt;</font>ax <font color="#FF0000"><b>then </b></font>ax<font color="#000080">:=</font>x<font color="#000080">;
              </font><font color="#FF0000"><b>if </b></font>x<font color="#000080">&gt;</font>bx <font color="#FF0000"><b>then </b></font>bx<font color="#000080">:=</font>x<font color="#000080">;
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>y2<font color="#000080">&gt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>y3<font color="#000080">&gt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>then
        if </b></font><font color="#000080">(</font>y2<font color="#000080">&lt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>y3<font color="#000080">&lt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>then
          if not</b></font><font color="#000080">(</font>y2<font color="#000080">=</font>y3<font color="#000080">) </font><font color="#FF0000"><b>then begin
              </b></font>x<font color="#000080">:=(</font>yy<font color="#000080">-</font>y2<font color="#000080">)*</font>p3 <font color="#FF0000"><b>div </b></font>q3<font color="#000080">+</font>x2<font color="#000080">;
              </font><font color="#FF0000"><b>if </b></font>x<font color="#000080">&lt;</font>ax <font color="#FF0000"><b>then </b></font>ax<font color="#000080">:=</font>x<font color="#000080">;
              </font><font color="#FF0000"><b>if </b></font>x<font color="#000080">&gt;</font>bx <font color="#FF0000"><b>then </b></font>bx<font color="#000080">:=</font>x<font color="#000080">;
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font>ax<font color="#000080">&lt;=</font>bx <font color="#FF0000"><b>then </b></font>hln<font color="#000080">(</font>ax<font color="#000080">,</font>bx<font color="#000080">,</font>yy<font color="#000080">,</font>color<font color="#000080">,</font>target<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>XTriangle<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">,</font>x3<font color="#000080">,</font>y3<font color="#000080">:</font>integer<font color="#000080">;</font>color<font color="#000080">:</font>byte<font color="#000080">;</font>target<font color="#000080">:</font>word<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>tmp1<font color="#000080">,</font>tmp2<font color="#000080">,</font>neg1<font color="#000080">,</font>neg2<font color="#000080">,</font>ax1<font color="#000080">,</font>ax2<font color="#000080">,</font>ay1<font color="#000080">,</font>ay2<font color="#000080">:</font>integer<font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">cli                      </font><font color="#008000"><i>{y-trideni}
  </i></font><font color="#FF00FF">mov cx,2                 </font><font color="#008000"><i>{cx=2}
</i></font><font color="#FF00FF">@sort:
  mov ax,[y2]
  cmp ax,[y3]
  jbe @ok1                </font><font color="#008000"><i>{ if y2 &lt;= y3 then @ok1 }
  </i></font><font color="#FF00FF">xor ax,[y3]
  xor [y3],ax
  xor ax,[y3]
  mov [y2],ax
  mov ax,[x2]             </font><font color="#008000"><i>{ted neco jako xchg y2,y3}
  </i></font><font color="#FF00FF">xor ax,[x3]
  xor [x3],ax
  xor ax,[x3]
  mov [x2],ax             </font><font color="#008000"><i>{stejne pro x}
  </i></font><font color="#FF00FF">@ok1:
    mov ax,[y1]
    cmp ax,[y2]
    jbe @ok2              </font><font color="#008000"><i>{kdyz je y1 vetsi,jak y2 pak na @3}
    </i></font><font color="#FF00FF">xor ax,[y2]
    xor [y2],ax
    xor ax,[y2]
    mov [y1],ax           </font><font color="#008000"><i>{jinak xchg y1,y2}
    </i></font><font color="#FF00FF">mov ax,[x1]
    xor ax,[x2]
    xor [x2],ax
    xor ax,[x2]
    mov [x1],ax           </font><font color="#008000"><i>{xchg x1,x2}
  </i></font><font color="#FF00FF">@ok2:
    mov ax,[y1]
    cmp ax,[y3]
    jbe @ok3              </font><font color="#008000"><i>{y1&lt;=y3 pak ok}
    </i></font><font color="#FF00FF">xor ax,[y3]
    xor [y3],ax
    xor ax,[y3]
    mov [y1],ax           </font><font color="#008000"><i>{xchg y1,y3}
    </i></font><font color="#FF00FF">mov ax,[x1]
    xor ax,[x3]
    xor [x3],ax
    xor ax,[x3]           </font><font color="#008000"><i>{xchg x1,x3}
    </i></font><font color="#FF00FF">mov [x1],ax
  @ok3:
loop @sort
  mov dx,[y1]             </font><font color="#008000"><i>{vypocet offsetu}
  </i></font><font color="#FF00FF">shl dx,6
  mov bx,dx
  shl dx,2
  add dx,bx
  add dx,[x1]
  mov si,dx               </font><font color="#008000"><i>{si,dx:=320*y1+x1}
  </i></font><font color="#FF00FF">mov ax,[y3]             </font><font color="#008000"><i>{vypocet ay-nu}
  </i></font><font color="#FF00FF">sub ax,[y1]
  inc ax
  mov [ay1],ax            </font><font color="#008000"><i>{*ay1=y3-y1}
  </i></font><font color="#FF00FF">mov [tmp1],ax           </font><font color="#008000"><i>{*tmp1=y3-y1}
  </i></font><font color="#FF00FF">mov ax,[y2]
  sub ax,[y1]
  inc ax
  mov [ay2],ax            </font><font color="#008000"><i>{*ay2=y2-y1}
  </i></font><font color="#FF00FF">mov [tmp2],ax           </font><font color="#008000"><i>{*tmp2=y2-y1}
                          {vypocet ax-u}
  </i></font><font color="#FF00FF">mov [neg1],1            </font><font color="#008000"><i>{*if1=1}
  </i></font><font color="#FF00FF">mov ax,[x3]
  sub ax,[x1]             </font><font color="#008000"><i>{ax,sirka}
  </i></font><font color="#FF00FF">jnc @noneg1             </font><font color="#008000"><i>{kdyz&gt;=0 pak skip, jinak}
  </i></font><font color="#FF00FF">neg ax                  </font><font color="#008000"><i>{a dostanu abs(x3-x1)}
  </i></font><font color="#FF00FF">neg [neg1]              </font><font color="#008000"><i>{*neg1=65535}
</i></font><font color="#FF00FF">@noneg1:
  inc ax                  </font><font color="#008000"><i>{inc sirka}
  </i></font><font color="#FF00FF">mov [ax1],ax            </font><font color="#008000"><i>{*ax1=x3-x1}
  </i></font><font color="#FF00FF">mov [neg2],1            </font><font color="#008000"><i>{*neg2=1}
  </i></font><font color="#FF00FF">mov ax,[x2]
  sub ax,[x1]
  jnc @noneg2             </font><font color="#008000"><i>{x2-x1 jnc skok}
  </i></font><font color="#FF00FF">neg ax                  </font><font color="#008000"><i>{neg-abs}
  </i></font><font color="#FF00FF">neg [neg2]              </font><font color="#008000"><i>{*neg2=65535}
</i></font><font color="#FF00FF">@noneg2:
  inc ax
  mov [ax2],ax            </font><font color="#008000"><i>{*ax2=x2-x1}

  </i></font><font color="#FF00FF">mov ax,[target]
  mov es,ax
  mov al,[color]
  mov ah,al               </font><font color="#008000"><i>{ax,color}
  </i></font><font color="#FF00FF">mov cx,[ay2]            </font><font color="#008000"><i>{od y1 do y2}
</i></font><font color="#FF00FF">@draw1:
  push cx
  mov di,dx               </font><font color="#008000"><i>{hln}
  </i></font><font color="#FF00FF">mov cx,si
  cmp cx,di
  ja @noswap1
  xchg cx,di
@noswap1:
  sub cx,di
  inc cx
  shr cx,1
  jnc @1
  stosb
@1:
  rep stosw
                          </font><font color="#008000"><i>{zmena tmpu a ay}
  </i></font><font color="#FF00FF">mov bx,[tmp1]           </font><font color="#008000"><i>{bx=y3-y1}
  </i></font><font color="#FF00FF">sub bx,[ax1]            </font><font color="#008000"><i>{bx:=(y3-y1)-(x3-x1)}
  </i></font><font color="#FF00FF">cmp bx,0
  jg @no1                 </font><font color="#008000"><i>{=0 then skok, else..}
</i></font><font color="#FF00FF">@yes1:
  add bx,[ay1]            </font><font color="#008000"><i>{bx:=2*(y3-y1)-(x3-x1)}
  </i></font><font color="#FF00FF">add dx,[neg1]           </font><font color="#008000"><i>{add dx,1 nebo 65535}
  </i></font><font color="#FF00FF">cmp bx,0
  jle @yes1               </font><font color="#008000"><i>{loop}
</i></font><font color="#FF00FF">@no1:
  add dx,320              </font><font color="#008000"><i>{offset+320}
  </i></font><font color="#FF00FF">mov [tmp1],bx

  mov bx,[tmp2]           </font><font color="#008000"><i>{y2-y1}
  </i></font><font color="#FF00FF">sub bx,[ax2]            </font><font color="#008000"><i>{-(x2-x1)}
  </i></font><font color="#FF00FF">cmp bx,0
  jg @no2
@yes2:
  add bx,[ay2]
  add si,[neg2]
  cmp bx,0
  jle @yes2               </font><font color="#008000"><i>{dokud bx&gt;=0}
</i></font><font color="#FF00FF">@no2:
  add si,320              </font><font color="#008000"><i>{add ofs2,320}
  </i></font><font color="#FF00FF">mov [tmp2],bx
  pop  cx
loop @draw1

</font><font color="#008000"><i>{2. cast polyho}
  </i></font><font color="#FF00FF">push dx
  mov dx,[y3]
  sub dx,[y2]
  inc dx
  mov [ay2],dx
  mov [tmp2],dx
  mov [neg2],1
  mov dx,[x3]
  sub dx,[x2]
  jnc @x2pos
  neg dx
  neg [neg2]
@x2pos:
  inc dx
  mov [ax2],dx
  pop dx
  mov cx,[ay2]
@draw2:
  push cx
  mov di,dx
  mov cx,si
  cmp cx,di
  ja @noswap2
  xchg cx,di
@noswap2:
  sub cx,di
  inc cx
  shr cx,1
  jnc @2
  stosb
@2:
  rep stosw
  mov bx,[tmp1]
  sub bx,[ax1]
  cmp bx,0
  jg @no3
@yes3:
  add bx,[ay1]
  add dx,[neg1]
  cmp bx,0
  jle @yes3
@no3:
  add dx,320
  mov [tmp1],bx

  mov bx,[tmp2]
  sub bx,[ax2]
  cmp bx,0
  jg @no4
@yes4:
  add bx,[ay2]
  add si,[neg2]
  cmp bx,0
  jle @yes4
@no4:
  add si,320
  mov [tmp2],bx
  pop cx
  loop @draw2
@exit:
  sti
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>Poly4<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">,</font>x3<font color="#000080">,</font>y3<font color="#000080">,</font>x4<font color="#000080">,</font>y4<font color="#000080">:</font>integer<font color="#000080">;</font>color<font color="#000080">:</font>byte<font color="#000080">;</font>target<font color="#000080">:</font>word<font color="#000080">);
</font><font color="#FF0000"><b>var
 </b></font>x<font color="#000080">,</font>minY<font color="#000080">,</font>maxY<font color="#000080">,</font>ax<font color="#000080">,</font>bx<font color="#000080">,</font>yy<font color="#000080">,</font>p1<font color="#000080">,</font>q1<font color="#000080">,</font>p2<font color="#000080">,</font>q2<font color="#000080">,</font>p3<font color="#000080">,</font>q3<font color="#000080">,</font>p4<font color="#000080">,</font>q4<font color="#000080">:</font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>minY<font color="#000080">:=</font>y1<font color="#000080">; </font>maxY<font color="#000080">:=</font>y1<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>y2<font color="#000080">&lt;</font>minY <font color="#FF0000"><b>then </b></font>minY<font color="#000080">:=</font>y2<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>y2<font color="#000080">&gt;</font>maxY <font color="#FF0000"><b>then </b></font>maxY<font color="#000080">:=</font>y2<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>y3<font color="#000080">&lt;</font>minY <font color="#FF0000"><b>then </b></font>minY<font color="#000080">:=</font>y3<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>y3<font color="#000080">&gt;</font>maxY <font color="#FF0000"><b>then </b></font>maxY<font color="#000080">:=</font>y3<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>y4<font color="#000080">&lt;</font>minY <font color="#FF0000"><b>then </b></font>minY<font color="#000080">:=</font>y4<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>y4<font color="#000080">&gt;</font>maxY <font color="#FF0000"><b>then </b></font>maxY<font color="#000080">:=</font>y4<font color="#000080">;
</font><font color="#008000"><i>{y2-4 se porovnaji k y1, ziska se nejmensi a nejvetsi y}
  </i></font><font color="#FF0000"><b>if </b></font>minY<font color="#000080">&lt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>minY<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>maxY<font color="#000080">&gt;</font><font color="#800000">199 </font><font color="#FF0000"><b>then </b></font>maxY<font color="#000080">:=</font><font color="#800000">199</font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>minY<font color="#000080">&gt;</font><font color="#800000">199 </font><font color="#FF0000"><b>then </b></font>exit<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>maxY<font color="#000080">&lt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>exit<font color="#000080">;
</font><font color="#008000"><i>{nebude se prekreslovat zpatky}
  </i></font>p1<font color="#000080">:=</font>x1<font color="#000080">-</font>x4<font color="#000080">; </font>q1<font color="#000080">:=</font>y1<font color="#000080">-</font>y4<font color="#000080">;
  </font>p2<font color="#000080">:=</font>x2<font color="#000080">-</font>x1<font color="#000080">; </font>q2<font color="#000080">:=</font>y2<font color="#000080">-</font>y1<font color="#000080">;
  </font>p3<font color="#000080">:=</font>x3<font color="#000080">-</font>x2<font color="#000080">; </font>q3<font color="#000080">:=</font>y3<font color="#000080">-</font>y2<font color="#000080">;
  </font>p4<font color="#000080">:=</font>x4<font color="#000080">-</font>x3<font color="#000080">; </font>q4<font color="#000080">:=</font>y4<font color="#000080">-</font>y3<font color="#000080">;
</font><font color="#008000"><i>{vzdalenosti mezi vsemy x a mezi vsemy y}
{pro vysku polyho dela..}
  </i></font><font color="#FF0000"><b>for </b></font>yy<font color="#000080">:=</font>minY <font color="#FF0000"><b>to </b></font>maxY <font color="#FF0000"><b>do
    begin
      </b></font>ax<font color="#000080">:=</font><font color="#800000">320</font><font color="#000080">;
      </font>bx<font color="#000080">:=-</font><font color="#800000">1</font><font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>y4<font color="#000080">&gt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>y1<font color="#000080">&gt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>then
        if </b></font><font color="#000080">(</font>y4<font color="#000080">&lt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>y1<font color="#000080">&lt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>then   </b></font><font color="#008000"><i>{jestlize je yy mezi y1 a y4 pak.. }
          </i></font><font color="#FF0000"><b>if not</b></font><font color="#000080">(</font>y4<font color="#000080">=</font>y1<font color="#000080">) </font><font color="#FF0000"><b>then begin
              </b></font>x<font color="#000080">:=(</font>yy<font color="#000080">-</font>y4<font color="#000080">)*</font>p1 <font color="#FF0000"><b>div </b></font>q1<font color="#000080">+</font>x4<font color="#000080">;
              </font><font color="#FF0000"><b>if </b></font>x<font color="#000080">&lt;</font>ax <font color="#FF0000"><b>then </b></font>ax<font color="#000080">:=</font>x<font color="#000080">;
              </font><font color="#FF0000"><b>if </b></font>x<font color="#000080">&gt;</font>bx <font color="#FF0000"><b>then </b></font>bx<font color="#000080">:=</font>x<font color="#000080">;
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>y1<font color="#000080">&gt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>y2<font color="#000080">&gt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>then
        if </b></font><font color="#000080">(</font>y1<font color="#000080">&lt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>y2<font color="#000080">&lt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>then   </b></font><font color="#008000"><i>{jestlize je yy mezi y1 a y2 pak..}
          </i></font><font color="#FF0000"><b>if not</b></font><font color="#000080">(</font>y1<font color="#000080">=</font>y2<font color="#000080">) </font><font color="#FF0000"><b>then begin
              </b></font>x<font color="#000080">:=(</font>yy<font color="#000080">-</font>y1<font color="#000080">)*</font>p2 <font color="#FF0000"><b>div </b></font>q2<font color="#000080">+</font>x1<font color="#000080">;
              </font><font color="#FF0000"><b>if </b></font>x<font color="#000080">&lt;</font>ax <font color="#FF0000"><b>then </b></font>ax<font color="#000080">:=</font>x<font color="#000080">;
              </font><font color="#FF0000"><b>if </b></font>x<font color="#000080">&gt;</font>bx <font color="#FF0000"><b>then </b></font>bx<font color="#000080">:=</font>x<font color="#000080">;
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>y2<font color="#000080">&gt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>y3<font color="#000080">&gt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>then
        if </b></font><font color="#000080">(</font>y2<font color="#000080">&lt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>y3<font color="#000080">&lt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>then  </b></font><font color="#008000"><i>{jestlize je yy mezi y2 a y3 pak..}
          </i></font><font color="#FF0000"><b>if not</b></font><font color="#000080">(</font>y2<font color="#000080">=</font>y3<font color="#000080">) </font><font color="#FF0000"><b>then begin
              </b></font>x<font color="#000080">:=(</font>yy<font color="#000080">-</font>y2<font color="#000080">)*</font>p3 <font color="#FF0000"><b>div </b></font>q3<font color="#000080">+</font>x2<font color="#000080">;
              </font><font color="#FF0000"><b>if </b></font>x<font color="#000080">&lt;</font>ax <font color="#FF0000"><b>then </b></font>ax<font color="#000080">:=</font>x<font color="#000080">;
              </font><font color="#FF0000"><b>if </b></font>x<font color="#000080">&gt;</font>bx <font color="#FF0000"><b>then </b></font>bx<font color="#000080">:=</font>x<font color="#000080">;
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>y3<font color="#000080">&gt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>y4<font color="#000080">&gt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>then
        if </b></font><font color="#000080">(</font>y3<font color="#000080">&lt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>y4<font color="#000080">&lt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>then   </b></font><font color="#008000"><i>{jestlize je yy mezi y3 a y4 pak..}
          </i></font><font color="#FF0000"><b>if not</b></font><font color="#000080">(</font>y3<font color="#000080">=</font>y4<font color="#000080">) </font><font color="#FF0000"><b>then begin
              </b></font>x<font color="#000080">:=(</font>yy<font color="#000080">-</font>y3<font color="#000080">)*</font>p4 <font color="#FF0000"><b>div </b></font>q4<font color="#000080">+</font>x3<font color="#000080">;
              </font><font color="#FF0000"><b>if </b></font>x<font color="#000080">&lt;</font>ax <font color="#FF0000"><b>then </b></font>ax<font color="#000080">:=</font>x<font color="#000080">;
              </font><font color="#FF0000"><b>if </b></font>x<font color="#000080">&gt;</font>bx <font color="#FF0000"><b>then </b></font>bx<font color="#000080">:=</font>x<font color="#000080">;
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font>ax<font color="#000080">&lt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>ax<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font>bx<font color="#000080">&gt;</font><font color="#800000">319 </font><font color="#FF0000"><b>then </b></font>bx<font color="#000080">:=</font><font color="#800000">319</font><font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font>ax<font color="#000080">&lt;=</font>bx <font color="#FF0000"><b>then </b></font>hln<font color="#000080">(</font>ax<font color="#000080">,</font>bx<font color="#000080">,</font>yy<font color="#000080">,</font>color<font color="#000080">,</font>target<font color="#000080">);      </font><font color="#008000"><i>{horesli horiz. caru}
    </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>PolyInit<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>init<font color="#000080">:</font>coordtyp<font color="#000080">;</font>PocetBodu<font color="#000080">:</font>byte<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>i<font color="#000080">:</font>byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
for </b></font>i<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>PocetBodu <font color="#FF0000"><b>do
  begin
    </b></font>coord<font color="#000080">[</font>i<font color="#000080">].</font>x<font color="#000080">:=</font>init<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">,</font>i<font color="#000080">];
    </font>coord<font color="#000080">[</font>i<font color="#000080">].</font>y<font color="#000080">:=</font>init<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">,</font>i<font color="#000080">];
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>XPoly<font color="#000080">(</font>rohu<font color="#000080">:</font>byte<font color="#000080">;</font>color<font color="#000080">:</font>byte<font color="#000080">;</font>target<font color="#000080">:</font>word<font color="#000080">);
</font><font color="#FF0000"><b>type </b></font>int<font color="#000080">=</font><font color="#FF0000"><b>record
       </b></font>p<font color="#000080">,</font>q<font color="#000080">:</font>integer<font color="#000080">;
       </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>yy<font color="#000080">,</font>x<font color="#000080">,</font>ax<font color="#000080">,</font>bx<font color="#000080">,</font>i<font color="#000080">,</font>minY<font color="#000080">,</font>maxY<font color="#000080">:</font>integer<font color="#000080">;
</font>internal<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">20</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>int<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>minY<font color="#000080">:=</font>coord<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>y<font color="#000080">;
  </font>maxY<font color="#000080">:=</font>coord<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>y<font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">2 </font><font color="#FF0000"><b>to </b></font>rohu <font color="#FF0000"><b>do begin
    if </b></font>coord<font color="#000080">[</font>i<font color="#000080">].</font>y<font color="#000080">&lt;</font>minY <font color="#FF0000"><b>then </b></font>minY<font color="#000080">:=</font>coord<font color="#000080">[</font>i<font color="#000080">].</font>y<font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font>coord<font color="#000080">[</font>i<font color="#000080">].</font>y<font color="#000080">&gt;</font>maxY <font color="#FF0000"><b>then </b></font>maxY<font color="#000080">:=</font>coord<font color="#000080">[</font>i<font color="#000080">].</font>y<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>minY<font color="#000080">&lt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>minY<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>maxY<font color="#000080">&gt;</font><font color="#800000">199 </font><font color="#FF0000"><b>then </b></font>maxY<font color="#000080">:=</font><font color="#800000">199</font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>minY<font color="#000080">&gt;</font><font color="#800000">199 </font><font color="#FF0000"><b>then </b></font>exit<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>maxY<font color="#000080">&lt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>exit<font color="#000080">;
  </font>internal<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>p<font color="#000080">:=</font>coord<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>x<font color="#000080">-</font>coord<font color="#000080">[</font>rohu<font color="#000080">].</font>x<font color="#000080">;
  </font>internal<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>q<font color="#000080">:=</font>coord<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>y<font color="#000080">-</font>coord<font color="#000080">[</font>rohu<font color="#000080">].</font>y<font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>rohu<font color="#000080">-</font><font color="#800000">2 </font><font color="#FF0000"><b>do
    begin
      </b></font>internal<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">].</font>p<font color="#000080">:=</font>coord<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">].</font>x<font color="#000080">-</font>coord<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">].</font>x<font color="#000080">;
      </font>internal<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">].</font>q<font color="#000080">:=</font>coord<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">].</font>y<font color="#000080">-</font>coord<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">].</font>y<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>yy<font color="#000080">:=</font>minY <font color="#FF0000"><b>to </b></font>MaxY <font color="#FF0000"><b>do
    begin
      </b></font>ax<font color="#000080">:=</font><font color="#800000">320</font><font color="#000080">;
      </font>bx<font color="#000080">:=-</font><font color="#800000">1</font><font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>coord<font color="#000080">[</font>rohu<font color="#000080">].</font>y<font color="#000080">&gt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>coord<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>y<font color="#000080">&gt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>then
        if </b></font><font color="#000080">(</font>coord<font color="#000080">[</font>rohu<font color="#000080">].</font>y<font color="#000080">&lt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>coord<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>y<font color="#000080">&lt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>then
          if not</b></font><font color="#000080">(</font>coord<font color="#000080">[</font>rohu<font color="#000080">].</font>y<font color="#000080">=</font>coord<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>y<font color="#000080">) </font><font color="#FF0000"><b>then begin
              </b></font>x<font color="#000080">:=(</font>yy<font color="#000080">-</font>coord<font color="#000080">[</font>rohu<font color="#000080">].</font>y<font color="#000080">)*</font>internal<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>p <font color="#FF0000"><b>div </b></font>internal<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>q<font color="#000080">+</font>coord<font color="#000080">[</font>rohu<font color="#000080">].</font>x<font color="#000080">;
              </font><font color="#FF0000"><b>if </b></font>x<font color="#000080">&lt;</font>ax <font color="#FF0000"><b>then </b></font>ax<font color="#000080">:=</font>x<font color="#000080">;
              </font><font color="#FF0000"><b>if </b></font>x<font color="#000080">&gt;</font>bx <font color="#FF0000"><b>then </b></font>bx<font color="#000080">:=</font>x<font color="#000080">;
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
          </font><font color="#FF0000"><b>if </b></font>ax<font color="#000080">&lt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>ax<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
          </font><font color="#FF0000"><b>if </b></font>bx<font color="#000080">&gt;</font><font color="#800000">319 </font><font color="#FF0000"><b>then </b></font>bx<font color="#000080">:=</font><font color="#800000">319</font><font color="#000080">;
          </font><font color="#FF0000"><b>if </b></font>ax<font color="#000080">&lt;=</font>bx <font color="#FF0000"><b>then </b></font>hln<font color="#000080">(</font>ax<font color="#000080">,</font>bx<font color="#000080">,</font>yy<font color="#000080">,</font>color<font color="#000080">,</font>target<font color="#000080">);
       </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>rohu<font color="#000080">-</font><font color="#800000">2 </font><font color="#FF0000"><b>do begin
         if </b></font><font color="#000080">(</font>coord<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">].</font>y<font color="#000080">&gt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>coord<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">].</font>y<font color="#000080">&gt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>then
           if </b></font><font color="#000080">(</font>coord<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">].</font>y<font color="#000080">&lt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>coord<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">].</font>y<font color="#000080">&lt;=</font>yy<font color="#000080">) </font><font color="#FF0000"><b>then
             if not</b></font><font color="#000080">(</font>coord<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">].</font>y<font color="#000080">=</font>coord<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">].</font>y<font color="#000080">) </font><font color="#FF0000"><b>then begin
                 </b></font>x<font color="#000080">:=(</font>yy<font color="#000080">-</font>coord<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">].</font>y<font color="#000080">)*</font>internal<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">].</font>p <font color="#FF0000"><b>div </b></font>internal<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">].</font>q<font color="#000080">+</font>coord<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">].</font>x<font color="#000080">;
                 </font><font color="#FF0000"><b>if </b></font>x<font color="#000080">&lt;</font>ax <font color="#FF0000"><b>then </b></font>ax<font color="#000080">:=</font>x<font color="#000080">;
                 </font><font color="#FF0000"><b>if </b></font>x<font color="#000080">&gt;</font>bx <font color="#FF0000"><b>then </b></font>bx<font color="#000080">:=</font>x<font color="#000080">;
             </font><font color="#FF0000"><b>if </b></font>ax<font color="#000080">&lt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>ax<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
             </font><font color="#FF0000"><b>if </b></font>bx<font color="#000080">&gt;</font><font color="#800000">319 </font><font color="#FF0000"><b>then </b></font>bx<font color="#000080">:=</font><font color="#800000">319</font><font color="#000080">;
             </font><font color="#FF0000"><b>if </b></font>ax<font color="#000080">&lt;=</font>bx <font color="#FF0000"><b>then </b></font>hln<font color="#000080">(</font>ax<font color="#000080">,</font>bx<font color="#000080">,</font>yy<font color="#000080">,</font>color<font color="#000080">,</font>target<font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ PALETTE }

</i></font><font color="#FF0000"><b>procedure </b></font>SetRGB<font color="#000080">(</font>color<font color="#000080">,</font>r<font color="#000080">,</font>g<font color="#000080">,</font>b<font color="#000080">:</font>Byte<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">mov dx,3c8h
  mov al,[Color]
  out dx,al
  inc dx
  mov al,[r]
  out dx,al
  mov al,[g]
  out dx,al
  mov al,[b]
  out dx,al
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>GetRGB<font color="#000080">(</font>Color<font color="#000080">:</font>byte<font color="#000080">;</font><font color="#FF0000"><b>var </b></font>r<font color="#000080">,</font>g<font color="#000080">,</font>b<font color="#000080">:</font>byte<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">mov dx,3c7h
  mov al,[color]
  out dx,al
  inc dx
  inc dx
  in  al,dx
  les di,dword ptr [bp+14]
  mov byte ptr es:[di],al
  in al,dx
  les di,dword ptr [bp+10]
  mov byte ptr es:[di],al
  in al,dx
  les di,dword ptr [bp+6]
  mov byte ptr es:[di],al
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>RotPal<font color="#000080">(</font>r<font color="#000080">,</font>g<font color="#000080">,</font>b<font color="#000080">:</font>byte<font color="#000080">;</font>skipR<font color="#000080">,</font>skipG<font color="#000080">,</font>skipB<font color="#000080">:</font>boolean<font color="#000080">;</font>loops<font color="#000080">,</font>ms<font color="#000080">:</font>integer<font color="#000080">);
</font><font color="#FF0000"><b>type
  </b></font>tcount <font color="#000080">= </font><font color="#FF0000"><b>record
            </b></font>r<font color="#000080">,</font>g<font color="#000080">,</font>b<font color="#000080">:</font>real<font color="#000080">;
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>i<font color="#000080">,</font>c<font color="#000080">,</font>rr<font color="#000080">,</font>gg<font color="#000080">,</font>bb<font color="#000080">:</font>byte<font color="#000080">;
  </font>red<font color="#000080">,</font>blue<font color="#000080">,</font>green<font color="#000080">:</font>real<font color="#000080">;
  </font>current<font color="#000080">,</font>count<font color="#000080">:</font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>tcount<font color="#000080">;
</font><font color="#FF0000"><b>begin
  for </b></font>c<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do begin
    </b></font>getrgb<font color="#000080">(</font>c<font color="#000080">,</font>rr<font color="#000080">,</font>gg<font color="#000080">,</font>bb<font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font>skipr<font color="#000080">=</font>false <font color="#FF0000"><b>then </b></font>count<font color="#000080">[</font>c<font color="#000080">].</font>r<font color="#000080">:=(</font>r<font color="#000080">-</font>rr<font color="#000080">)/</font>loops<font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font>skipg<font color="#000080">=</font>false <font color="#FF0000"><b>then </b></font>count<font color="#000080">[</font>c<font color="#000080">].</font>g<font color="#000080">:=(</font>g<font color="#000080">-</font>gg<font color="#000080">)/</font>loops<font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font>skipb<font color="#000080">=</font>false <font color="#FF0000"><b>then </b></font>count<font color="#000080">[</font>c<font color="#000080">].</font>b<font color="#000080">:=(</font>b<font color="#000080">-</font>bb<font color="#000080">)/</font>loops<font color="#000080">;
    </font>current<font color="#000080">[</font>c<font color="#000080">].</font>r<font color="#000080">:=</font>rr<font color="#000080">;
    </font>current<font color="#000080">[</font>c<font color="#000080">].</font>g<font color="#000080">:=</font>gg<font color="#000080">;
    </font>current<font color="#000080">[</font>c<font color="#000080">].</font>b<font color="#000080">:=</font>bb<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>loops <font color="#FF0000"><b>do begin
    for </b></font>c<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do begin
      if </b></font>skipr<font color="#000080">=</font>false <font color="#FF0000"><b>then </b></font>current<font color="#000080">[</font>c<font color="#000080">].</font>r<font color="#000080">:=</font>count<font color="#000080">[</font>c<font color="#000080">].</font>r<font color="#000080">+</font>current<font color="#000080">[</font>c<font color="#000080">].</font>r<font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font>skipg<font color="#000080">=</font>false <font color="#FF0000"><b>then </b></font>current<font color="#000080">[</font>c<font color="#000080">].</font>g<font color="#000080">:=</font>count<font color="#000080">[</font>c<font color="#000080">].</font>g<font color="#000080">+</font>current<font color="#000080">[</font>c<font color="#000080">].</font>g<font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font>skipb<font color="#000080">=</font>false <font color="#FF0000"><b>then </b></font>current<font color="#000080">[</font>c<font color="#000080">].</font>b<font color="#000080">:=</font>count<font color="#000080">[</font>c<font color="#000080">].</font>b<font color="#000080">+</font>current<font color="#000080">[</font>c<font color="#000080">].</font>b<font color="#000080">;
      </font>setrgb<font color="#000080">(</font>c<font color="#000080">,</font>round<font color="#000080">(</font>current<font color="#000080">[</font>c<font color="#000080">].</font>r<font color="#000080">),</font>round<font color="#000080">(</font>current<font color="#000080">[</font>c<font color="#000080">].</font>g<font color="#000080">),</font>round<font color="#000080">(</font>current<font color="#000080">[</font>c<font color="#000080">].</font>b<font color="#000080">));
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>xdelay<font color="#000080">(</font>ms<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>FadeIn<font color="#000080">(</font>r<font color="#000080">,</font>g<font color="#000080">,</font>b<font color="#000080">:</font>byte<font color="#000080">;</font>loops<font color="#000080">,</font>ms<font color="#000080">:</font>integer<font color="#000080">);
</font><font color="#FF0000"><b>type
  </b></font>tcount <font color="#000080">= </font><font color="#FF0000"><b>record
            </b></font>r<font color="#000080">,</font>g<font color="#000080">,</font>b<font color="#000080">:</font>real<font color="#000080">;
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>i<font color="#000080">,</font>c<font color="#000080">,</font>rr<font color="#000080">,</font>gg<font color="#000080">,</font>bb<font color="#000080">:</font>byte<font color="#000080">;
  </font>red<font color="#000080">,</font>blue<font color="#000080">,</font>green<font color="#000080">:</font>real<font color="#000080">;
  </font>current<font color="#000080">,</font>count<font color="#000080">:</font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>tcount<font color="#000080">;
</font><font color="#FF0000"><b>begin
  for </b></font>c<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do begin
    </b></font>getrgb<font color="#000080">(</font>c<font color="#000080">,</font>rr<font color="#000080">,</font>gg<font color="#000080">,</font>bb<font color="#000080">);
    </font>count<font color="#000080">[</font>c<font color="#000080">].</font>r<font color="#000080">:=(</font>r<font color="#000080">-</font>rr<font color="#000080">)/</font>loops<font color="#000080">;
    </font>count<font color="#000080">[</font>c<font color="#000080">].</font>g<font color="#000080">:=(</font>g<font color="#000080">-</font>gg<font color="#000080">)/</font>loops<font color="#000080">;
    </font>count<font color="#000080">[</font>c<font color="#000080">].</font>b<font color="#000080">:=(</font>b<font color="#000080">-</font>bb<font color="#000080">)/</font>loops<font color="#000080">;
    </font>current<font color="#000080">[</font>c<font color="#000080">].</font>r<font color="#000080">:=</font>rr<font color="#000080">;
    </font>current<font color="#000080">[</font>c<font color="#000080">].</font>g<font color="#000080">:=</font>gg<font color="#000080">;
    </font>current<font color="#000080">[</font>c<font color="#000080">].</font>b<font color="#000080">:=</font>bb<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>loops <font color="#FF0000"><b>do begin
    for </b></font>c<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do begin
      </b></font>current<font color="#000080">[</font>c<font color="#000080">].</font>r<font color="#000080">:=</font>count<font color="#000080">[</font>c<font color="#000080">].</font>r<font color="#000080">+</font>current<font color="#000080">[</font>c<font color="#000080">].</font>r<font color="#000080">;
      </font>current<font color="#000080">[</font>c<font color="#000080">].</font>g<font color="#000080">:=</font>count<font color="#000080">[</font>c<font color="#000080">].</font>g<font color="#000080">+</font>current<font color="#000080">[</font>c<font color="#000080">].</font>g<font color="#000080">;
      </font>current<font color="#000080">[</font>c<font color="#000080">].</font>b<font color="#000080">:=</font>count<font color="#000080">[</font>c<font color="#000080">].</font>b<font color="#000080">+</font>current<font color="#000080">[</font>c<font color="#000080">].</font>b<font color="#000080">;
      </font>setrgb<font color="#000080">(</font>c<font color="#000080">,</font>round<font color="#000080">(</font>current<font color="#000080">[</font>c<font color="#000080">].</font>r<font color="#000080">),</font>round<font color="#000080">(</font>current<font color="#000080">[</font>c<font color="#000080">].</font>g<font color="#000080">),</font>round<font color="#000080">(</font>current<font color="#000080">[</font>c<font color="#000080">].</font>b<font color="#000080">));
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>xdelay<font color="#000080">(</font>ms<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ VIRTUAL SCREENS }

</i></font><font color="#FF0000"><b>function </b></font>VSetup<font color="#000080">(</font>VScreen<font color="#000080">:</font>VPointer<font color="#000080">):</font>word<font color="#000080">;
</font><font color="#FF0000"><b>begin </b></font><font color="#008000"><i>{OK}
  </i></font>new<font color="#000080">(</font>Vscreen<font color="#000080">);
  </font>VSetup<font color="#000080">:=</font>seg<font color="#000080">(</font>vscreen<font color="#000080">^);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>VDispose<font color="#000080">(</font>Va<font color="#000080">:</font>word<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>vscreen<font color="#000080">:</font>pointer <font color="#FF0000"><b>absolute </b></font>va<font color="#000080">;
</font><font color="#FF0000"><b>begin </b></font><font color="#008000"><i>{OK}
  </i></font>dispose<font color="#000080">(</font>Vscreen<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>Flip<font color="#000080">(</font>source<font color="#000080">,</font>target<font color="#000080">:</font>word<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">push ds </font><font color="#008000"><i>{kdyz se neulozi, pak je hodnota pointru nil a je to v prdeli}
  </i></font><font color="#FF00FF">mov ax,target
  mov es,ax         </font><font color="#008000"><i>{target:=es:[di]}
  </i></font><font color="#FF00FF">mov ax,Source
  mov ds,ax         </font><font color="#008000"><i>{sourcre:=ds:[si]}
  </i></font><font color="#FF00FF">xor si,si
  xor di,di
  mov cx,16000
  db $f3,66h,$a5    </font><font color="#008000"><i>{rep movsd}
  </i></font><font color="#FF00FF">pop ds
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>FImage<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">,</font>sx<font color="#000080">,</font>sy<font color="#000080">:</font>integer<font color="#000080">;</font>source<font color="#000080">,</font>target<font color="#000080">:</font>word<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm
</b></font><font color="#FF00FF">push ds
  mov ax,target
  mov es,ax         </font><font color="#008000"><i>{target:=es:[di]}
  </i></font><font color="#FF00FF">mov ax,Source
  mov ds,ax         </font><font color="#008000"><i>{sourcre:=ds:[si]}
  </i></font><font color="#FF00FF">mov si,y1
  mov ax,si
  shl si,6
  shl ax,8
  add si,ax
  add si,x1          </font><font color="#008000"><i>{source}
  </i></font><font color="#FF00FF">mov di,sy
  mov ax,di
  shl di,6
  shl ax,8
  add di,ax
  add di,sx           </font><font color="#008000"><i>{dest}
  </i></font><font color="#FF00FF">mov cx,y2
  sub cx,y1
  inc cx  </font><font color="#008000"><i>{h}
  </i></font><font color="#FF00FF">mov dx,x2
  sub dx,x1
  inc dx  </font><font color="#008000"><i>{w}
  </i></font><font color="#FF00FF">mov ax,dx
  and ax,3
@loop:
  mov bx,cx
  mov cx,dx
  shr cx,2
  db 66h; rep movsw
  mov cx,ax
  rep movsb
  add si,320
  add di,320
  sub si,dx
  sub di,dx
  mov cx,bx
  loop @loop
  pop ds
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ IMGAES &amp; BITMAPS }

</i></font><font color="#FF0000"><b>procedure </b></font>Bitmap<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>w<font color="#000080">,</font>h<font color="#000080">:</font>word<font color="#000080">;</font><font color="#FF0000"><b>var </b></font>bitmap<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">push ds
  mov ax,word ptr bitmap+2
  mov ds,ax
  mov ax,$0a000
  mov es,ax
  mov si,word ptr bitmap
  mov ax,[y]
  mov di,ax
  shl ax,8
  shl di,6
  add di,ax
  add di,[x]
  mov cx,[h]
@loop:
  mov bx,cx
  mov cx,[w]
  shr cx,1
  jnc @1
  movsb
@1:
  rep movsw
  add di,320
  sub di,[w]
  mov cx,bx
  loop @loop
  pop ds
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>RLEBitmap<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>w<font color="#000080">,</font>h<font color="#000080">:</font>word<font color="#000080">;</font><font color="#FF0000"><b>var </b></font>bitmap<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">push ds
  mov ax,word ptr bitmap+2
  mov ds,ax
  mov ax,$0a000
  mov es,ax
  xor si,si
  xor di,di
  mov si,word ptr bitmap
  mov ax,[y]
  mov di,ax
  shl ax,8
  shl di,6
  add di,ax
  add di,[x]
  mov cx,[h]
@loop:
  mov bx,cx
  mov cx,[w]
@1:
  mov al,ds:[si]
  cmp al,0
  je @2
  mov es:[di],al
  @2:
  inc di
  inc si
loop @1
  add di,320
  sub di,[w]
  mov cx,bx
  loop @loop
  pop ds
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>ScBitmap<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>w<font color="#000080">,</font>h<font color="#000080">,</font>tox<font color="#000080">,</font>toy<font color="#000080">:</font>word<font color="#000080">;</font><font color="#FF0000"><b>var </b></font>bitmap<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>tmp1<font color="#000080">,</font>rx<font color="#000080">,</font>repx<font color="#000080">,</font>restx<font color="#000080">,</font>ry<font color="#000080">,</font>repy<font color="#000080">,</font>resty<font color="#000080">:</font>word<font color="#000080">;
</font><font color="#008000"><i>{tmp1=add di,320 sub di,tox}
</i></font><font color="#FF0000"><b>begin
</b></font>repx<font color="#000080">:=</font>tox <font color="#FF0000"><b>div </b></font>w<font color="#000080">;
</font>restx<font color="#000080">:=</font>tox <font color="#FF0000"><b>mod </b></font>w<font color="#000080">;
</font>rx<font color="#000080">:=</font>restx<font color="#000080">;
</font>repy<font color="#000080">:=</font>toy <font color="#FF0000"><b>div </b></font>h<font color="#000080">;
</font>resty<font color="#000080">:=</font>toy <font color="#FF0000"><b>mod </b></font>h<font color="#000080">;
</font>ry<font color="#000080">:=</font>resty<font color="#000080">;
</font><font color="#FF0000"><b>asm
</b></font><font color="#FF00FF">mov ax,320
sub ax,tox
mov tmp1,ax

push ds
mov ax,word ptr bitmap+2
mov ds,ax
mov ax,0a000h
mov es,ax
mov si,word ptr bitmap
mov ax,[y]
mov di,ax
shl ax,8
shl di,6
add di,ax
add di,[x]

mov cx,[h]
@loop:
  mov dx,cx
  mov bx,repy
  @line:
     mov cx,[w]
     @pixel:
        mov ax,repx
        @rep:
          movsb
          dec si
          dec ax
        jnz @rep
        mov ax,restx
        cmp ax,0
        je @no_rest
          movsb
          dec restx
          dec si
        @no_rest:
        inc si
        dec cx
    jnz @pixel
  add di,tmp1
  mov ax,rx
  mov restx,ax
sub si,[w]
dec bx
jnz @line

mov bx,resty
cmp bx,0
je @no_ry
  mov cx,[w]
  @pixel2:
     mov ax,repx
     @rep2:
       movsb
       dec si
       dec ax
     jnz @rep2
     mov ax,restx
     cmp ax,0
     je @no_rest2
       movsb
       dec restx
       dec si
     @no_rest2:
     inc si
     dec cx
  jnz @pixel2
  add di,tmp1
  mov ax,rx
  mov restx,ax
sub si,[w]
dec bx
mov resty,bx
 @no_ry:
add si,[w]
mov cx,dx
dec cx
jnz @loop
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>GImage<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">:</font>word<font color="#000080">;</font>p<font color="#000080">:</font>pointer<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">push ds
  mov es,word ptr p+2
  mov di,word ptr p
  mov ax,0a000h
  mov ds,ax
  mov dx,[bp+offset x2]
  sub dx,[bp+offset x]
  inc dx
  mov ax,dx
  and ax,3
  mov es:[di],dx        </font><font color="#008000"><i>{sirka dx}
  </i></font><font color="#FF00FF">mov cx,[bp+offset y2]
  sub cx,[bp+offset y]
  inc cx
  mov es:[di+2],cx      </font><font color="#008000"><i>{vyska cx}
  </i></font><font color="#FF00FF">add di,4
  mov si,[bp+offset y]
  mov bx,si
  shl si,8
  shl bx,6
  add si,bx
  add si,[bp+offset x]
@loop:
  mov bx,cx
  mov cx,dx
  shr cx,2
  db 66h; rep movsw
  mov cx,ax
  rep movsb
  add si,320
  sub si,dx
  mov cx,bx
  loop @loop
  pop ds
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>PImage<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">:</font>word<font color="#000080">;</font>p<font color="#000080">:</font>pointer<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">push ds
  mov ds,word ptr p+2
  mov si,word ptr p
  mov ax,0a000h
  mov es,ax
  mov cx,word ptr ds:[si+2]   </font><font color="#008000"><i>{vyska}
  </i></font><font color="#FF00FF">mov ax,word ptr ds:[si]
  mov dx,ax                   </font><font color="#008000"><i>{sirka}
  </i></font><font color="#FF00FF">and ax,3   </font><font color="#008000"><i>{sub dx,(dx shr,2 ; dx shl,2)}
  </i></font><font color="#FF00FF">add si,4
  mov di,[bp+offset y]
  mov bx,di
  shl di,8
  shl bx,6
  add di,bx
  add di,[bp+offset x]
@loop:
  mov bx,cx
  mov cx,dx
  shr cx,2
  db 66h; rep movsw
  mov cx,ax
  rep movsb
  add di,320
  sub di,dx
  mov cx,bx
  loop @loop
  pop ds
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>Save2File<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">:</font>integer<font color="#000080">;</font>filename<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">);
</font><font color="#FF0000"><b>var
</b></font>f<font color="#000080">:</font><font color="#FF0000"><b>file</b></font><font color="#000080">;
</font>p<font color="#000080">:</font>pointer<font color="#000080">;
</font>size<font color="#000080">:</font>word<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>assign<font color="#000080">(</font>f<font color="#000080">,</font>filename<font color="#000080">);
  </font>size<font color="#000080">:=</font>abs<font color="#000080">(</font>x2<font color="#000080">-</font>x<font color="#000080">)*</font>abs<font color="#000080">(</font>y2<font color="#000080">-</font>y<font color="#000080">)+</font><font color="#800000">10</font><font color="#000080">;
  </font>rewrite<font color="#000080">(</font>f<font color="#000080">,</font>size<font color="#000080">);
  </font>GetMem<font color="#000080">(</font>p<font color="#000080">,</font>size<font color="#000080">);
  </font>GImage<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">,</font>p<font color="#000080">);
  </font>BlockWrite<font color="#000080">(</font>f<font color="#000080">,</font>p<font color="#000080">^, </font><font color="#800000">1</font><font color="#000080">);
  </font>freemem<font color="#000080">(</font>p<font color="#000080">,</font>size<font color="#000080">);
  </font>close<font color="#000080">(</font>f<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>LoadFFile<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>sx<font color="#000080">,</font>sy<font color="#000080">,</font>sx2<font color="#000080">,</font>sy2<font color="#000080">:</font>integer<font color="#000080">;</font>filename<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">);
</font><font color="#FF0000"><b>var
</b></font>f<font color="#000080">:</font><font color="#FF0000"><b>file</b></font><font color="#000080">;
</font>p<font color="#000080">:</font>pointer<font color="#000080">;
</font>size<font color="#000080">:</font>word<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>assign<font color="#000080">(</font>f<font color="#000080">,</font>filename<font color="#000080">);
  </font>size<font color="#000080">:=</font>abs<font color="#000080">(</font>sx2<font color="#000080">-</font>sx<font color="#000080">)*</font>abs<font color="#000080">(</font>sy2<font color="#000080">-</font>sy<font color="#000080">)+</font><font color="#800000">10</font><font color="#000080">;
  </font>reset<font color="#000080">(</font>f<font color="#000080">,</font>size<font color="#000080">);
  </font>GetMem<font color="#000080">(</font>p<font color="#000080">,</font>size<font color="#000080">);
  </font>BlockRead<font color="#000080">(</font>f<font color="#000080">,</font>p<font color="#000080">^, </font><font color="#800000">1</font><font color="#000080">);
  </font>PImage<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>p<font color="#000080">);
  </font>FreeMem<font color="#000080">(</font>p<font color="#000080">,</font>size<font color="#000080">);
  </font>close<font color="#000080">(</font>f<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ SCROLLING }

</i></font><font color="#FF0000"><b>procedure </b></font>ScrollDown<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">:</font>integer<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">push ds
  mov ax,$a000
  mov es,ax
  mov ds,ax
  mov si,[y1]
  mov cx,[y2]
  mov ax,cx
  mov bx,cx
  shl ax,8
  shl bx,6
  add ax,bx
  sub cx,si
  inc cx
  mov bx,[x1]
  mov dx,[x2]
  add ax,bx
  sub dx,bx
  inc dx
  cld
@1:
  mov bx,cx
  mov di,ax
  mov si,ax
  sub si,320
  mov cx,dx
  shr cx,2
  db $f3,$66,$a5  </font><font color="#008000"><i>{rep movsd}
  </i></font><font color="#FF00FF">mov cx,dx
  and cx,3
  rep movsb
@2:
  mov cx,bx
  sub ax,320
  loop @1
  pop ds
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>ScrollLeft<font color="#000080">(</font>X1<font color="#000080">,</font>Y1<font color="#000080">,</font>X2<font color="#000080">,</font>Y2<font color="#000080">:</font>integer<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">push ds
  mov ax,$a000
  mov es,ax
  mov ds,ax
  mov si,[y1]
  mov ax,si
  shl ax,6
  shl si,8
  add si,ax
  mov cx,[y2]
  sub cx,si
  inc cx
  mov dx,[x1]
  add ax,dx
  mov bx,[x2]
  sub bx,dx
  inc bx
  cld
@1:
  mov dx,cx
  mov di,ax
  dec di
  mov si,ax
  mov cx,bx
  shr cx,2
  db $f3,$66,$a5  </font><font color="#008000"><i>{rep movsd}
  </i></font><font color="#FF00FF">mov cx,bx
  and cx,3
  rep movsb
@2:
  mov cx,dx
  add ax,320
  loop @1
  pop ds
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>ScrollRight<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">:</font>integer<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">push ds
  mov ax,$a000
  mov es,ax
  mov ds,ax
  mov si,[y1]
  mov ax,si
  shl ax,6
  shl si,8
  add si,ax
  mov cx,[y2]
  sub cx,si
  inc cx
  mov dx,[x1]
  mov bx,[x2]
  add ax,bx
  sub bx,dx
  inc bx
  std
@1:
  mov dx,cx
  mov di,ax
  mov si,ax
  dec si
  mov cx,bx
  shr cx,2
  db $f3,$66,$a5  </font><font color="#008000"><i>{rep movsd}
  </i></font><font color="#FF00FF">mov cx,bx
  and cx,3
  rep movsb

@2:
  mov cx,dx
  add ax,320
  loop @1
  cld
  pop ds
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>ScrollUp<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">:</font>integer<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">push ds
  mov ax,$a000
  mov es,ax
  mov ds,ax
  mov si,[y1]
  mov cx,[y2]
  sub cx,si
  inc cx
  mov ax,si
  shl si,8
  shl ax,6
  add ax,si
  mov dx,[x1]
  add ax,dx
  mov bx,[x2]
  sub bx,dx
  inc bx
  cld
@1:
  mov dx,cx
  mov di,ax
  sub di,320
  mov si,ax
  mov cx,bx
  shr cx,2
  db $f3,$66,$a5  </font><font color="#008000"><i>{rep movsd}
  </i></font><font color="#FF00FF">mov cx,bx
  and cx,3
  rep movsb

@2:
  mov cx,dx
  add ax,320
  loop @1
  pop ds
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ MISCELANEOUS }

</i></font><font color="#FF0000"><b>procedure </b></font>WaitRet<font color="#000080">; </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">mov dx,3dah
  @1:
    in al,dx
    test al,08h
    jnz @1
  @2:
    in al,dx
    test al,08h
    jz @2
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ VESA }

</i></font><font color="#FF0000"><b>var  </b></font>VI <font color="#000080">: </font><font color="#FF0000"><b>record
             </b></font>MAtrib <font color="#000080">: </font>word<font color="#000080">;
             </font>WinA <font color="#000080">: </font>byte<font color="#000080">;
             </font>WinB <font color="#000080">: </font>byte<font color="#000080">;
             </font>WGran <font color="#000080">: </font>word<font color="#000080">;
             </font>WSize <font color="#000080">: </font>word<font color="#000080">;
             </font>WsegA <font color="#000080">: </font>word<font color="#000080">;
             </font>WsegB <font color="#000080">: </font>word<font color="#000080">;
             </font>SetBank <font color="#000080">: </font><font color="#FF0000"><b>procedure</b></font><font color="#000080">;
             </font>ScanLn <font color="#000080">: </font>word<font color="#000080">;
             </font>ScreenW <font color="#000080">: </font>word<font color="#000080">;
             </font>ScreenH <font color="#000080">: </font>word<font color="#000080">;
             </font>CharW <font color="#000080">: </font>byte<font color="#000080">;
             </font>CharH <font color="#000080">: </font>byte<font color="#000080">;
             </font>Planes <font color="#000080">: </font>byte<font color="#000080">;
             </font>BitsPixel <font color="#000080">: </font>byte<font color="#000080">;
             </font>Banks <font color="#000080">: </font>byte<font color="#000080">;
             </font>MemModel <font color="#000080">: </font>byte<font color="#000080">;
             </font>BnkSize <font color="#000080">: </font>byte<font color="#000080">;
             </font>ImgPages <font color="#000080">: </font>byte<font color="#000080">;
             </font>Res1 <font color="#000080">: </font>byte<font color="#000080">;
             </font>RMSize <font color="#000080">: </font>byte<font color="#000080">;
             </font>RFPos <font color="#000080">: </font>byte<font color="#000080">;
             </font>GMSize <font color="#000080">: </font>byte<font color="#000080">;
             </font>GFPos <font color="#000080">: </font>byte<font color="#000080">;
             </font>BMSize <font color="#000080">: </font>byte<font color="#000080">;
             </font>BFPos <font color="#000080">: </font>byte<font color="#000080">;
             </font>MSize <font color="#000080">: </font>byte<font color="#000080">;
             </font>MPos <font color="#000080">: </font>byte<font color="#000080">;
             </font>DCinfo <font color="#000080">: </font>byte<font color="#000080">;
             </font>Res2 <font color="#000080">: </font>byte<font color="#000080">;
             </font>trash <font color="#000080">: </font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">$2a</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font>cbank <font color="#000080">: </font>byte<font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>GetMode<font color="#000080">(</font>mode<font color="#000080">:</font>word<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">mov ax,ds       </font><font color="#008000"><i>{ protoze je to vlastne promenna }
  </i></font><font color="#FF00FF">mov es,ax
  mov ax,4f01h
  mov cx,mode
  mov di,offset VI
  int 10h
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>function </b></font>SetVesa<font color="#000080">(</font>mode<font color="#000080">:</font>word<font color="#000080">):</font>boolean<font color="#000080">;</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">mov ax,4f02h
  mov bx,mode
  int 10h
  sub ax,004fh
  mov [bp-1],al
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>GetVesa<font color="#000080">:</font>word<font color="#000080">;</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">mov ax,4f03h
  int 10h
  cmp ax,004fh
  je @ok
  mov ax,-1
  jmp @</font><font color="#FF0000"><b>end
</b></font><font color="#000080">@</font>ok<font color="#000080">:
  </font>mov ax<font color="#000080">,</font>bx
<font color="#000080">@</font><font color="#FF0000"><b>end</b></font><font color="#000080">:
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>GScanLn<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>BytesPerScanline<font color="#000080">,</font>PixsPerScanline<font color="#000080">,</font>NumOfScanlines<font color="#000080">:</font>word<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">mov ax,4f06h
  mov bl,01h
  int 10h
  les di,dword ptr [bp+0eh]
  mov word ptr es:[di],bx
  les di,dword ptr [bp+0ah]
  mov word ptr es:[di],cx
  les di,dword ptr [bp+6]
  mov word ptr es:[di],dx
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>SScanLn<font color="#000080">(</font>width<font color="#000080">:</font>word<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
</i></font><font color="#FF00FF">mov ax,4f06h
mov bl,00h
mov cx,word ptr width
int 10h
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>GDStart<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>x<font color="#000080">,</font>y<font color="#000080">:</font>integer<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">; </font><font color="#008000"><i>{ Get Display Start }
</i></font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">mov ax,4f07h
  mov bx,0001h
  int 10h
  les di,dword ptr [bp+0ah]
  mov word ptr es:[di],cx
  les di,dword ptr [bp+6]
  mov word ptr es:[di],dx
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>SDStart<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">:</font>integer<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">; </font><font color="#008000"><i>{ Set Display Start }
</i></font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">mov ax,4f07h
  sub bx,bx
  mov cx,word ptr x
  mov dx,word ptr y
  int 10h
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>procedure </b></font>PPix8<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">:</font>word<font color="#000080">;</font>c<font color="#000080">:</font>byte<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#008000"><i>{ vypocet efektivni adresy:
1024x768x256:
db 66h;mov di,y
db 66h;shl di,10
db 66h;add di,x      ;  y:=y*1024+x
db 66h;mov dx,di     ;  puvodni mul uklada to co se nevleze do r16,r/m16
db 66h;shr dx,16     ;  do dx:ax, s dx se ale dal pracuje a nepouziva se
edx proto nakonci ten shrdx,16}
</i></font><font color="#FF0000"><b>asm   </b></font><font color="#008000"><i>{OK}
  </i></font><font color="#FF00FF">mov ax,$0a000
  mov es,ax
  mov di,x
  mov ax,y
  mul vi.screenw
  add di,ax
  adc dx,0
  cmp dl,cbank
  je @skip
  mov cbank,dl
  mov ax,4f05h
  xor bx,bx
  adc dx,0
  int 10h
@skip:
  mov al,byte ptr c
  mov es:[di],al
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ ********************************* MATH ********************************** }
{ 8087x }

</i></font><font color="#FF0000"><b>procedure </b></font>Init8087<font color="#000080">;</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">finit
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>fmul<font color="#000080">(</font>s1<font color="#000080">,</font>s2<font color="#000080">:</font>single<font color="#000080">):</font>single<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>s<font color="#000080">:</font>single<font color="#000080">;
</font><font color="#FF0000"><b>begin
asm
  </b></font><font color="#FF00FF">fld s1
  fmul s2
  fstp s
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>fmul<font color="#000080">:=</font>s<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>fdiv<font color="#000080">(</font>s1<font color="#000080">,</font>s2<font color="#000080">:</font>single<font color="#000080">):</font>single<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>s<font color="#000080">:</font>single<font color="#000080">;
</font><font color="#FF0000"><b>begin
asm
  </b></font><font color="#FF00FF">fld s1
  fdiv s2
  fstp s
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>fdiv<font color="#000080">:=</font>s<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>fadd<font color="#000080">(</font>s1<font color="#000080">,</font>s2<font color="#000080">:</font>single<font color="#000080">):</font>single<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>s<font color="#000080">:</font>single<font color="#000080">;
</font><font color="#FF0000"><b>begin
asm
  </b></font><font color="#FF00FF">fld s1
  fadd s2
  fstp s
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>fadd<font color="#000080">:=</font>s<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>fsub<font color="#000080">(</font>s1<font color="#000080">,</font>s2<font color="#000080">:</font>single<font color="#000080">):</font>single<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>s<font color="#000080">:</font>single<font color="#000080">;
</font><font color="#FF0000"><b>begin
asm
  </b></font><font color="#FF00FF">fld s1
  fsub s2
  fstp s
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>fsub<font color="#000080">:=</font>s<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>fabs<font color="#000080">(</font>s1<font color="#000080">:</font>single<font color="#000080">):</font>single<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>s<font color="#000080">:</font>single<font color="#000080">;
</font><font color="#FF0000"><b>begin
asm
  </b></font><font color="#FF00FF">fld s1
  fabs
  fstp s
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>fabs<font color="#000080">:=</font>s<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>fneg<font color="#000080">(</font>s1<font color="#000080">:</font>single<font color="#000080">):</font>single<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>s<font color="#000080">:</font>single<font color="#000080">;
</font><font color="#FF0000"><b>begin
asm
  </b></font><font color="#FF00FF">fld s1
  fchs
  fstp s
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>fneg<font color="#000080">:=</font>s<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>fsqrt<font color="#000080">(</font>s1<font color="#000080">:</font>single<font color="#000080">):</font>single<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>s<font color="#000080">:</font>single<font color="#000080">;
</font><font color="#FF0000"><b>begin
asm
  </b></font><font color="#FF00FF">fld s1
  fsqrt
  fstp s
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>fsqrt<font color="#000080">:=</font>s<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>fround<font color="#000080">(</font>s1<font color="#000080">:</font>single<font color="#000080">):</font>single<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>s<font color="#000080">:</font>single<font color="#000080">;
</font><font color="#FF0000"><b>begin
asm
  </b></font><font color="#FF00FF">fld s1
  frndint
  fstp s
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>fround<font color="#000080">:=</font>s<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>fnop<font color="#000080">;</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm
</b></font><font color="#FF00FF">fnop
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>function </b></font>esc<font color="#000080">:</font>byte<font color="#000080">;</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm
</b></font><font color="#FF00FF">in al,60h
mov [bp-1],al
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ ----------------------------- CUT HERE ---------------------------------- }

</i></font><font color="#FF0000"><b>var </b></font>va1<font color="#000080">,</font>c<font color="#000080">,</font>color<font color="#000080">:</font>word<font color="#000080">;
</font>x<font color="#000080">,</font>y<font color="#000080">,</font>Gd<font color="#000080">,</font>Gm<font color="#000080">:</font>integer<font color="#000080">;
</font>vs1<font color="#000080">:</font>vpointer<font color="#000080">;
</font>p<font color="#000080">:</font>pointer<font color="#000080">;

</font><font color="#FF0000"><b>const </b></font>Cur<font color="#000080">: </font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">15</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>word<font color="#000080">=
                     ((</font><font color="#800000">$FFCF</font><font color="#000080">,                    </font><font color="#008000"><i>{ 1111111111001111 } { PenCursor}
                       </i></font><font color="#800000">$FF87</font><font color="#000080">,                    </font><font color="#008000"><i>{ 1111111110000111 }
                       </i></font><font color="#800000">$FF03</font><font color="#000080">,                    </font><font color="#008000"><i>{ 1111111100000011 }
                       </i></font><font color="#800000">$FE01</font><font color="#000080">,                    </font><font color="#008000"><i>{ 1111111000000001 }
                       </i></font><font color="#800000">$FC03</font><font color="#000080">,                    </font><font color="#008000"><i>{ 1111110000000011 }
                       </i></font><font color="#800000">$F807</font><font color="#000080">,                    </font><font color="#008000"><i>{ 1111100000000111 }
                       </i></font><font color="#800000">$F00F</font><font color="#000080">,                    </font><font color="#008000"><i>{ 1111000000001111 }
                       </i></font><font color="#800000">$E01F</font><font color="#000080">,                    </font><font color="#008000"><i>{ 1110000000011111 }
                       </i></font><font color="#800000">$C03F</font><font color="#000080">,                    </font><font color="#008000"><i>{ 1100000000111111 }
                       </i></font><font color="#800000">$807F</font><font color="#000080">,                    </font><font color="#008000"><i>{ 1000000001111111 }
                       </i></font><font color="#800000">$00FF</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0000000011111111 }
                       </i></font><font color="#800000">$01FF</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0000000111111111 }
                       </i></font><font color="#800000">$03FF</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0000001111111111 }
                       </i></font><font color="#800000">$07FF</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0000011111111111 }
                       </i></font><font color="#800000">$0FFF</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0000111111111111 }
                       </i></font><font color="#800000">$9FFF</font><font color="#000080">),                   </font><font color="#008000"><i>{ 1001111111111111 }
                      </i></font><font color="#000080">(</font><font color="#800000">$0000</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0000000000000000 }
                       </i></font><font color="#800000">$0030</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0000000000110000 }
                       </i></font><font color="#800000">$0078</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0000000001111000 }
                       </i></font><font color="#800000">$009C</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0000000010011100 }
                       </i></font><font color="#800000">$01E8</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0000000111101000 }
                       </i></font><font color="#800000">$03F0</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0000001111110000 }
                       </i></font><font color="#800000">$07E0</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0000011111100000 }
                       </i></font><font color="#800000">$0FC0</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0000111111000000 }
                       </i></font><font color="#800000">$1F80</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0001111110000000 }
                       </i></font><font color="#800000">$2700</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0010011100000000 }
                       </i></font><font color="#800000">$7A00</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0111101000000000 }
                       </i></font><font color="#800000">$5C00</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0101110000000000 }
                       </i></font><font color="#800000">$4800</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0100100000000000 }
                       </i></font><font color="#800000">$5000</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0101000000000000 }
                       </i></font><font color="#800000">$6000</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0110000000000000 }
                       </i></font><font color="#800000">$0000</font><font color="#000080">));                  </font><font color="#008000"><i>{ 0000000000000000 }

</i></font><font color="#FF0000"><b>const </b></font>Cur2<font color="#000080">: </font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">15</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>word<font color="#000080">=
                     ((</font><font color="#800000">$0000</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0000000000000000 }
                       </i></font><font color="#800000">$0000</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0000000000110000 }
                       </i></font><font color="#800000">$0000</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0000000001111000 }
                       </i></font><font color="#800000">$0000</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0000000010011100 }
                       </i></font><font color="#800000">$0000</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0000000111101000 }
                       </i></font><font color="#800000">$0000</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0000001111110000 }
                       </i></font><font color="#800000">$0000</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0000011111100000 }
                       </i></font><font color="#800000">$0000</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0000111111000000 }
                       </i></font><font color="#800000">$0000</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0001111110000000 }
                       </i></font><font color="#800000">$0000</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0010011100000000 }
                       </i></font><font color="#800000">$0000</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0111101000000000 }
                       </i></font><font color="#800000">$0000</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0101110000000000 }
                       </i></font><font color="#800000">$0000</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0100100000000000 }
                       </i></font><font color="#800000">$0000</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0101000000000000 }
                       </i></font><font color="#800000">$0000</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0110000000000000 }
                       </i></font><font color="#800000">$0000</font><font color="#000080">)
                       ,(</font><font color="#800000">$FFfF</font><font color="#000080">,                    </font><font color="#008000"><i>{ 1111111111001111 } { PenCursor}
                       </i></font><font color="#800000">$FFff</font><font color="#000080">,                    </font><font color="#008000"><i>{ 1111111110000111 }
                       </i></font><font color="#800000">$FFff</font><font color="#000080">,                    </font><font color="#008000"><i>{ 1111111100000011 }
                       </i></font><font color="#800000">$Ffff</font><font color="#000080">,                    </font><font color="#008000"><i>{ 1111111000000001 }
                       </i></font><font color="#800000">$Ffff</font><font color="#000080">,                    </font><font color="#008000"><i>{ 1111110000000011 }
                       </i></font><font color="#800000">$Ffff</font><font color="#000080">,                    </font><font color="#008000"><i>{ 1111100000000111 }
                       </i></font><font color="#800000">$FffF</font><font color="#000080">,                    </font><font color="#008000"><i>{ 1111000000001111 }
                       </i></font><font color="#800000">$fffF</font><font color="#000080">,                    </font><font color="#008000"><i>{ 1110000000011111 }
                       </i></font><font color="#800000">$fffF</font><font color="#000080">,                    </font><font color="#008000"><i>{ 1100000000111111 }
                       </i></font><font color="#800000">$ffff</font><font color="#000080">,                    </font><font color="#008000"><i>{ 1000000001111111 }
                       </i></font><font color="#800000">$ffFF</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0000000011111111 }
                       </i></font><font color="#800000">$fffF</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0000000111111111 }
                       </i></font><font color="#800000">$fFfF</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0000001111111111 }
                       </i></font><font color="#800000">$fFFf</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0000011111111111 }
                       </i></font><font color="#800000">$FfFF</font><font color="#000080">,                    </font><font color="#008000"><i>{ 0000111111111111 }
                       </i></font><font color="#800000">$FFfF</font><font color="#000080">));                  </font><font color="#008000"><i>{ 1001111111111111 }
                                        { 0000000000000000 }


</i></font><font color="#FF0000"><b>const </b></font>map<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">7</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">17</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">=(
(</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">),
(</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">),
(</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">),
(</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">),
(</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">),
(</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">),
(</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">));

</font><font color="#FF0000"><b>const </b></font>map2<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">7</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">17</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">=(
(</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">),
(</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">),
(</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">),
(</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">),
(</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">),
(</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">),
(</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">));

</font><font color="#FF0000"><b>const </b></font>bar1 <font color="#000080">: </font>coordtyp <font color="#000080">=((</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">),</font><font color="#008000"><i>{x}
                        </i></font><font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">));</font><font color="#008000"><i>{y}


</i></font><font color="#FF0000"><b>begin
</b></font>setvesa<font color="#000080">(</font><font color="#800000">$101</font><font color="#000080">);
</font>getmode<font color="#000080">(</font><font color="#800000">$101</font><font color="#000080">);
</font>ppix8<font color="#000080">(</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">156</font><font color="#000080">);
</font>ppix8<font color="#000080">(</font><font color="#800000">200</font><font color="#000080">,</font><font color="#800000">200</font><font color="#000080">,</font><font color="#800000">14</font><font color="#000080">);
</font>readln<font color="#000080">;
</font>setvga<font color="#000080">(</font><font color="#800000">$13</font><font color="#000080">);
</font>rlebitmap<font color="#000080">(</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">17</font><font color="#000080">,</font><font color="#800000">7</font><font color="#000080">,</font>map<font color="#000080">);
</font>readln<font color="#000080">;
</font>scbitmap<font color="#000080">(</font><font color="#800000">20</font><font color="#000080">,</font><font color="#800000">20</font><font color="#000080">,</font><font color="#800000">17</font><font color="#000080">,</font><font color="#800000">7</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">,</font>map2<font color="#000080">);
</font>readln<font color="#000080">;
</font>mouseinit<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
</font>mouseinit<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
</font>readln<font color="#000080">;
</font>newcur<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font>cur<font color="#000080">);
</font>readln<font color="#000080">;
</font>newcur<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font>cur2<font color="#000080">);
</font>readln<font color="#000080">;
</font>xtriangle<font color="#000080">(</font><font color="#800000">50</font><font color="#000080">,</font><font color="#800000">50</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">14</font><font color="#000080">,</font><font color="#800000">$0a000</font><font color="#000080">);
</font>xcircle<font color="#000080">(</font><font color="#800000">170</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">85</font><font color="#000080">,</font><font color="#800000">300</font><font color="#000080">,</font><font color="#800000">9</font><font color="#000080">,</font><font color="#800000">400</font><font color="#000080">,</font><font color="#800000">20</font><font color="#000080">,</font><font color="#800000">$0a000</font><font color="#000080">);
</font>ppix<font color="#000080">(</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">$0a000</font><font color="#000080">);
</font>c<font color="#000080">:=</font>gpix<font color="#000080">(</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">$0a000</font><font color="#000080">);
</font>ppix<font color="#000080">(</font><font color="#800000">101</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">,</font>c<font color="#000080">,</font><font color="#800000">$0a000</font><font color="#000080">);
</font><font color="#FF0000"><b>repeat
</b></font>SetRGB<font color="#000080">(</font><font color="#800000">16</font><font color="#000080">,</font>x<font color="#000080">,</font>y<font color="#000080">,</font><font color="#800000">63</font><font color="#000080">);
</font>xcircle<font color="#000080">(</font><font color="#800000">170</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">85</font><font color="#000080">,</font><font color="#800000">300</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">400</font><font color="#000080">,</font><font color="#800000">20</font><font color="#000080">,</font><font color="#800000">$0a000</font><font color="#000080">);
</font>x<font color="#000080">:=</font>succ<font color="#000080">(</font>x<font color="#000080">);
</font><font color="#FF0000"><b>if </b></font>x<font color="#000080">=</font><font color="#800000">63 </font><font color="#FF0000"><b>then begin </b></font>y<font color="#000080">:=</font>y<font color="#000080">+</font><font color="#800000">9</font><font color="#000080">; </font>x<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font>xdelay<font color="#000080">(</font><font color="#800000">5</font><font color="#000080">);
</font><font color="#FF0000"><b>until </b></font>y<font color="#000080">=</font><font color="#800000">63</font><font color="#000080">;
</font>p<font color="#000080">:=</font>gmem<font color="#000080">(</font><font color="#800000">150</font><font color="#000080">);
</font><font color="#008000"><i>{if realloc(p,10000)=nil then writeln('ee');}
{realloc(p,10050);}
</i></font>p<font color="#000080">:=</font>gmem<font color="#000080">(</font><font color="#800000">10050</font><font color="#000080">);
</font>gimage<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">,</font>p<font color="#000080">);
</font>ccls<font color="#000080">(</font><font color="#800000">14</font><font color="#000080">,</font><font color="#800000">$0a000</font><font color="#000080">);
</font>pimage<font color="#000080">(</font><font color="#800000">30</font><font color="#000080">,</font><font color="#800000">30</font><font color="#000080">,</font>p<font color="#000080">);
</font>waitret<font color="#000080">;

</font>readln<font color="#000080">;
</font>cls<font color="#000080">(</font><font color="#800000">$0a000</font><font color="#000080">);
</font>Xline<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">300</font><font color="#000080">,</font><font color="#800000">199</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">$0a000</font><font color="#000080">);
</font><font color="#008000"><i>{Poly(100,100,15,05,45,45,94,43,2,$0a000);}
</i></font>readln<font color="#000080">;
</font>va1<font color="#000080">:=</font>vsetup<font color="#000080">(</font>vs1<font color="#000080">);
</font>flip<font color="#000080">(</font><font color="#800000">$0a000</font><font color="#000080">,</font>va1<font color="#000080">);
</font>cls<font color="#000080">(</font><font color="#800000">$0a000</font><font color="#000080">);
</font>xline<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">319</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">$0a000</font><font color="#000080">);
</font>randomize<font color="#000080">;
</font>x<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
</font><font color="#FF0000"><b>repeat
</b></font>inc<font color="#000080">(</font>x<font color="#000080">);
</font>ppix<font color="#000080">(</font>random<font color="#000080">(</font><font color="#800000">320</font><font color="#000080">),</font>random<font color="#000080">(</font><font color="#800000">100</font><font color="#000080">),</font>random<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">),</font><font color="#800000">$0a000</font><font color="#000080">);
</font><font color="#FF0000"><b>until </b></font>x<font color="#000080">=</font><font color="#800000">200</font><font color="#000080">;

</font>readln<font color="#000080">;

</font>flip<font color="#000080">(</font>va1<font color="#000080">,</font><font color="#800000">$0a000</font><font color="#000080">);
</font>Vdispose<font color="#000080">(</font>va1<font color="#000080">);
</font>readln<font color="#000080">;
</font>cls<font color="#000080">(</font><font color="#800000">$0a000</font><font color="#000080">);
</font>x<font color="#000080">:=</font><font color="#800000">330</font><font color="#000080">;
</font><font color="#FF0000"><b>repeat
</b></font>inc<font color="#000080">(</font>x<font color="#000080">);

</font><font color="#FF0000"><b>until </b></font>x<font color="#000080">=</font><font color="#800000">3000</font><font color="#000080">;
</font>x<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
</font><font color="#FF0000"><b>repeat
</b></font>ppix<font color="#000080">(</font>random<font color="#000080">(</font><font color="#800000">320</font><font color="#000080">),</font>random<font color="#000080">(</font><font color="#800000">200</font><font color="#000080">),</font>random<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">),</font><font color="#800000">$0a000</font><font color="#000080">);
</font>inc<font color="#000080">(</font>x<font color="#000080">);
</font><font color="#FF0000"><b>until </b></font>x<font color="#000080">=</font><font color="#800000">3000</font><font color="#000080">;</font><font color="#008000"><i>{
polyinit(bar1,4);
xpoly(4,2,$0a000);
coord[1].x:=0;
coord[1].y:=0;
coord[2].x:=20;
coord[2].y:=5;
coord[3].x:=30;
coord[3].y:=30;
coord[4].x:=50;
coord[4].y:=40;
coord[5].x:=28;
coord[5].y:=100;
coord[6].x:=10;
coord[6].y:=60;
Xpoly(6,1,$0a000);
va1:=vsetup(vs1);
fimage(0,0,100,100,0,0,$0a000,va1);
readln;
fimage(0,0,100,100,219,100,va1,$0a000);
vdispose(va1);
readln;                                 }
</i></font>rotpal<font color="#000080">(</font><font color="#800000">63</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">,</font><font color="#800000">63</font><font color="#000080">,</font><font color="#800000">18</font><font color="#000080">);

</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0287.PAS">Original</a><b>]</b></p></body>
</html>
