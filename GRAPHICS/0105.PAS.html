<html>
<head><title> "Coordinate Systems" by JOHN HOWARD</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0105.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
 -=&gt; Quoting Sean Graham to All on 22 Jun 94 &lt;=-
 SG&gt; some  (efficient, I would hope) code in pascal that will allow me to
 SG&gt; move in a 2D or  3D 'universe' (or more correctly, grid-system). Let me

 SG&gt; Let's start out easy.  For example, how would I write code to draw a
 SG&gt; line on  a 50x80 (yes, ascii chars) screen from pos A(10,5) to pos
 SG&gt; B(47,56)?
 SG&gt; Now imagine that my screen has magically grown a third dimention.  So
 SG&gt; I now  want to draw a line from pos A(47,34,7) to pos B(21,11,33).  How
 SG&gt; would I write  code to do that?

 SG&gt; Now picture this, I no longer have a screen, but a grid that works
 SG&gt; along the same principles as the screen did, except the points range
 SG&gt; from -20 to +20 on (x,y,z).  (That gives me a total of 68,921 (41^3)
 SG&gt; possible co-ordinates.)
 SG&gt; Pretend that Is a universe in space.  I'm in a tiny escape pod and
 SG&gt; must get from co-ordinate (-10,+05,+12) to co-ordinate (+07,+02,-11)

If you want to create an actual space, try :
}

</i></font><font color="#FF0000"><b>UNIT </b></font>space<font color="#000080">;
</font><font color="#008000"><i>{ Author: John Howard }
{
Define a two-dimensional space representation which is used for Cartesian and
Polar coordinate systems.  A three-dimensional space is for Spherical and
Azimuth-Elevation coordinate systems.
}
{ A vector is a one-dimensional array of real numbers.  A matrix has two
  dimensions m by n with m rows and n columns.  Notice the row number always
  comes first in the dimensions and the indices.  Example square matrix A33 =
             [ a11  a12  a13 ]    or generally  A[i, j]; i=rows, j=columns.
             [ a21  a22  a23 ]
             [ a31  a32  a33 ]
  A matrix can be operated upon with appropriate column or row vectors.
}
</i></font><font color="#FF0000"><b>INTERFACE
</b></font><font color="#008000"><i>{.$DEFINE D2}                            {remove period to use 2D}
{$IFNDEF D2}
</i></font><font color="#FF0000"><b>const </b></font>N <font color="#000080">= </font><font color="#800000">3</font><font color="#000080">;                             </font><font color="#008000"><i>{ Cardinality for Three_Vector}
      </i></font>M <font color="#000080">= </font><font color="#800000">3</font><font color="#000080">;                             </font><font color="#008000"><i>{ Square matrix for invert routine}
{$ELSE}
</i></font><font color="#FF0000"><b>const </b></font>N <font color="#000080">= </font><font color="#800000">2</font><font color="#000080">;                             </font><font color="#008000"><i>{ Cardinality for Two_Vector}
      </i></font>M <font color="#000080">= </font><font color="#800000">2</font><font color="#000080">;                             </font><font color="#008000"><i>{ Square matrix for invert routine}
{$ENDIF}
   </i></font>Size <font color="#000080">= </font>M<font color="#000080">;
</font><font color="#FF0000"><b>type
   </b></font>Vector <font color="#000080">= </font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font>N<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>real<font color="#000080">;        </font><font color="#008000"><i>{ 3D vector is the most common! }
   </i></font>Matrix <font color="#000080">= </font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font>M<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">..</font>N<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>real<font color="#000080">;  </font><font color="#008000"><i>{ 3x3 matrix is the most common! }

{Store all the components into a vector}
{$IFNDEF D2}
   </i></font><font color="#FF0000"><b>procedure </b></font>Set_Value<font color="#000080">( </font><font color="#FF0000"><b>var </b></font>a<font color="#000080">: </font>Vector<font color="#000080">; </font>x_value<font color="#000080">, </font>y_value<font color="#000080">, </font>z_value<font color="#000080">: </font>real<font color="#000080">);
</font><font color="#008000"><i>{$ELSE}
   </i></font><font color="#FF0000"><b>procedure </b></font>Set_Value<font color="#000080">( </font><font color="#FF0000"><b>var </b></font>a<font color="#000080">: </font>Vector<font color="#000080">; </font>x_value<font color="#000080">, </font>y_value<font color="#000080">: </font>real<font color="#000080">);
</font><font color="#008000"><i>{$ENDIF}

{Retrieve the value of s from the ith element of a vector}
   </i></font><font color="#FF0000"><b>function </b></font>Element<font color="#000080">( </font><font color="#FF0000"><b>var </b></font>a<font color="#000080">: </font>Vector<font color="#000080">; </font>i<font color="#000080">: </font>integer<font color="#000080">): </font>real<font color="#000080">;

</font><font color="#008000"><i>{Retrieve the first element from a vector}
   </i></font><font color="#FF0000"><b>function  </b></font>X_Component<font color="#000080">( </font><font color="#FF0000"><b>var </b></font>a<font color="#000080">: </font>Vector<font color="#000080">): </font>real<font color="#000080">;

</font><font color="#008000"><i>{Retrieve the second element from a vector}
   </i></font><font color="#FF0000"><b>function  </b></font>Y_Component<font color="#000080">( </font><font color="#FF0000"><b>var </b></font>a<font color="#000080">: </font>Vector<font color="#000080">): </font>real<font color="#000080">;

</font><font color="#008000"><i>{Retrieve the third element from a vector}
{$IFNDEF D2}
   </i></font><font color="#FF0000"><b>function  </b></font>Z_Component<font color="#000080">( </font><font color="#FF0000"><b>var </b></font>a<font color="#000080">: </font>Vector<font color="#000080">): </font>real<font color="#000080">;
</font><font color="#008000"><i>{$ENDIF}

</i></font><font color="#FF0000"><b>IMPLEMENTATION

procedure </b></font>Set_Value<font color="#000080">;          </font><font color="#008000"><i>{ Note: parameter list intentionally left off}
</i></font><font color="#FF0000"><b>begin
      </b></font>a<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] := </font>x_value<font color="#000080">;
      </font>a<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">] := </font>y_value<font color="#000080">;
</font><font color="#008000"><i>{$IFNDEF D2}
      </i></font>a<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">] := </font>z_value<font color="#000080">;
</font><font color="#008000"><i>{$ENDIF}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>Element<font color="#000080">( </font><font color="#FF0000"><b>var </b></font>a<font color="#000080">: </font>Vector<font color="#000080">; </font>i<font color="#000080">: </font>integer<font color="#000080">): </font>real<font color="#000080">;
</font><font color="#FF0000"><b>begin
      </b></font>Element <font color="#000080">:= </font>a<font color="#000080">[</font>i<font color="#000080">];
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function  </b></font>X_Component<font color="#000080">( </font><font color="#FF0000"><b>var </b></font>a<font color="#000080">: </font>Vector<font color="#000080">): </font>real<font color="#000080">;
</font><font color="#FF0000"><b>begin
      </b></font>X_Component <font color="#000080">:= </font>a<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">];
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function  </b></font>Y_Component<font color="#000080">( </font><font color="#FF0000"><b>var </b></font>a<font color="#000080">: </font>Vector<font color="#000080">): </font>real<font color="#000080">;
</font><font color="#FF0000"><b>begin
      </b></font>Y_Component <font color="#000080">:= </font>a<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">];
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{$IFNDEF D2}
</i></font><font color="#FF0000"><b>function  </b></font>Z_Component<font color="#000080">( </font><font color="#FF0000"><b>var </b></font>a<font color="#000080">: </font>Vector<font color="#000080">): </font>real<font color="#000080">;
</font><font color="#FF0000"><b>begin
      </b></font>Z_Component <font color="#000080">:= </font>a<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">];
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{$ENDIF}
</i></font><font color="#FF0000"><b>BEGIN
END</b></font><font color="#000080">.

</font><font color="#008000"><i>(**********
If you do not want to create an actual 3d space, just convert coordinates :

You could use a two dimensional X_Component and Y_Component calculation to get
you to an approximate region based upon Z_Component.  Example:

From point A(x1,y1) to B(x2,y2) you travel a distance = sqrt(sqr(x2-x1) +
  sqr(y2-y1)) at a slope of (y2-y1)/(x2-x1).  That slope is called the Tangent
of the angle of inclination of the line AB.

Now that you know where you are heading and how far away it is you can divide
the total distance into sections say of unit length.  That means a distance of
10 would have ten units.  Every time your spaceship moves one unit in the known
direction you can reverse the calculation to find out where you are at.  When
you reach the final distance, you'd take approximations using the third
component.  This idea is simple but not very accurate in the interum space.

You can use the same idea but implement it with a proper coordinate conversion.
**********)

</i></font><font color="#FF0000"><b>UNIT </b></font>coord<font color="#000080">;
</font><font color="#008000"><i>{ Author: John Howard }
{ Original source: Jack Crenshaw, 1992 Embedded Systems Programming }
{ Space Conversion -- Angles are capitalized }
{ All axes are perpendicular to each other }
</i></font><font color="#FF0000"><b>INTERFACE
const
      </b></font>Zero <font color="#000080">= </font><font color="#800000">0.0</font><font color="#000080">;
      </font>One  <font color="#000080">= </font><font color="#800000">1.0</font><font color="#000080">;
      </font>TwoPi               <font color="#000080">= </font>Two <font color="#000080">* </font>SYSTEM<font color="#000080">.</font>Pi<font color="#000080">;
      </font>Pi_Over_Two         <font color="#000080">= </font>SYSTEM<font color="#000080">.</font>Pi<font color="#000080">/</font>Two<font color="#000080">;

</font><font color="#008000"><i>{ 1 binary angular measure = 1 pirad = Pi radians = 180 degrees }
      </i></font>Degrees_Per_Radian  <font color="#000080">= </font><font color="#800000">180.0</font><font color="#000080">/</font>SYSTEM<font color="#000080">.</font>Pi<font color="#000080">;
      </font>Radians_Per_Degree  <font color="#000080">= </font>SYSTEM<font color="#000080">.</font>Pi<font color="#000080">/</font><font color="#800000">180.0</font><font color="#000080">;

</font><font color="#008000"><i>{ X-axis points east, y-axis north, and angle Theta is the heading measured
  north of due east.  If Theta is zero that corresponds to a line running
  along the x-axis a radial distance of r.
}
</i></font><font color="#FF0000"><b>Procedure </b></font>To_Polar <font color="#000080">( </font>x<font color="#000080">, </font>y<font color="#000080">: </font>real<font color="#000080">; </font><font color="#FF0000"><b>Var </b></font>r<font color="#000080">, </font>Theta<font color="#000080">: </font>real<font color="#000080">);
</font><font color="#FF0000"><b>Procedure </b></font>From_Polar <font color="#000080">( </font>r<font color="#000080">, </font>Theta<font color="#000080">: </font>real<font color="#000080">; </font><font color="#FF0000"><b>Var </b></font>x<font color="#000080">, </font>y<font color="#000080">: </font>real<font color="#000080">);

</font><font color="#008000"><i>{ X-axis points toward you, y-axis right, z-axis upward, angle Phi measures
  directions in the horizontal (x-y plane) from the x-axis, and angle Theta
  measures the direction in the vertical from the z-axis downward.  If Theta
  is zero that corresponds to a line pointed up the z-axis.
}
</i></font><font color="#FF0000"><b>Procedure </b></font>To_Spherical <font color="#000080">( </font>x<font color="#000080">, </font>y<font color="#000080">, </font>z<font color="#000080">: </font>real<font color="#000080">; </font><font color="#FF0000"><b>Var </b></font>r<font color="#000080">, </font>Phi<font color="#000080">, </font>Theta<font color="#000080">: </font>real<font color="#000080">);
</font><font color="#FF0000"><b>Procedure </b></font>From_Spherical <font color="#000080">( </font>r<font color="#000080">, </font>Phi<font color="#000080">, </font>Theta<font color="#000080">: </font>real<font color="#000080">; </font><font color="#FF0000"><b>Var </b></font>x<font color="#000080">, </font>y<font color="#000080">, </font>z<font color="#000080">: </font>real<font color="#000080">);

</font><font color="#008000"><i>{ X-axis points east, y-axis north, z-axis upward, angle Phi corresponds to an
  azimuth measured clockwise from due north, and angle Theta is the elevation
  measured upwards from the horizon (x-y plane).
}
</i></font><font color="#FF0000"><b>Procedure </b></font>To_Azimuth_Elevation <font color="#000080">( </font>x<font color="#000080">, </font>y<font color="#000080">, </font>z<font color="#000080">: </font>real<font color="#000080">; </font><font color="#FF0000"><b>Var </b></font>r<font color="#000080">, </font>Phi<font color="#000080">, </font>Theta<font color="#000080">: </font>real<font color="#000080">);
</font><font color="#FF0000"><b>Procedure </b></font>From_Azimuth_Elevation <font color="#000080">( </font>r<font color="#000080">, </font>Phi<font color="#000080">, </font>Theta<font color="#000080">: </font>real<font color="#000080">; </font><font color="#FF0000"><b>Var </b></font>x<font color="#000080">, </font>y<font color="#000080">, </font>z<font color="#000080">: </font>real<font color="#000080">);

</font><font color="#FF0000"><b>Function </b></font>Sign <font color="#000080">( </font>x<font color="#000080">, </font>y<font color="#000080">: </font>real<font color="#000080">): </font>real<font color="#000080">;
</font><font color="#FF0000"><b>Function </b></font>Degrees <font color="#000080">( </font>A<font color="#000080">: </font>real<font color="#000080">): </font>real<font color="#000080">;
</font><font color="#FF0000"><b>Function </b></font>Radians <font color="#000080">( </font>A<font color="#000080">: </font>real<font color="#000080">): </font>real<font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Atan <font color="#000080">( </font>x<font color="#000080">: </font>real<font color="#000080">): </font>real<font color="#000080">;           </font><font color="#008000"><i>{ArcTangent}
</i></font><font color="#FF0000"><b>Function </b></font>Atan2 <font color="#000080">( </font>s<font color="#000080">, </font>c<font color="#000080">: </font>real<font color="#000080">): </font>real<font color="#000080">;

</font><font color="#FF0000"><b>IMPLEMENTATION

</b></font><font color="#008000"><i>{ Convert from Cartesian to polar coordinates }
</i></font><font color="#FF0000"><b>Procedure </b></font>To_Polar <font color="#000080">( </font>x<font color="#000080">, </font>y<font color="#000080">: </font>real<font color="#000080">; </font><font color="#FF0000"><b>Var </b></font>r<font color="#000080">, </font>Theta<font color="#000080">: </font>real<font color="#000080">);
</font><font color="#FF0000"><b>Begin
  </b></font>r <font color="#000080">:= </font>Sqrt<font color="#000080">(</font>Sqr<font color="#000080">(</font>x<font color="#000080">) + </font>Sqr<font color="#000080">(</font>y<font color="#000080">));
  </font>Theta <font color="#000080">:= </font>Atan2<font color="#000080">(</font>y<font color="#000080">, </font>x<font color="#000080">);
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#008000"><i>{ Convert from polar to Cartesian coordinates }
</i></font><font color="#FF0000"><b>Procedure </b></font>From_Polar <font color="#000080">( </font>r<font color="#000080">, </font>Theta<font color="#000080">: </font>real<font color="#000080">; </font><font color="#FF0000"><b>Var </b></font>x<font color="#000080">, </font>y<font color="#000080">: </font>real<font color="#000080">);
</font><font color="#FF0000"><b>Begin
  </b></font>x <font color="#000080">:= </font>r <font color="#000080">* </font>Cos<font color="#000080">(</font>Theta<font color="#000080">);
  </font>y <font color="#000080">:= </font>r <font color="#000080">* </font>Sin<font color="#000080">(</font>Theta<font color="#000080">);
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#008000"><i>{ Convert from Cartesian to spherical polar coordinates }
</i></font><font color="#FF0000"><b>Procedure </b></font>To_Spherical <font color="#000080">( </font>x<font color="#000080">, </font>y<font color="#000080">, </font>z<font color="#000080">: </font>real<font color="#000080">; </font><font color="#FF0000"><b>Var </b></font>r<font color="#000080">, </font>Phi<font color="#000080">, </font>Theta<font color="#000080">: </font>real<font color="#000080">);
</font><font color="#FF0000"><b>var  </b></font>temp<font color="#000080">: </font>real<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>To_Polar<font color="#000080">(</font>x<font color="#000080">, </font>y<font color="#000080">, </font>temp<font color="#000080">, </font>Phi<font color="#000080">);
  </font>To_Polar<font color="#000080">(</font>z<font color="#000080">, </font>temp<font color="#000080">, </font>r<font color="#000080">, </font>Theta<font color="#000080">);
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#008000"><i>{ Convert from spherical polar to Cartesian coordinates }
</i></font><font color="#FF0000"><b>Procedure </b></font>From_Spherical <font color="#000080">( </font>r<font color="#000080">, </font>Phi<font color="#000080">, </font>Theta<font color="#000080">: </font>real<font color="#000080">; </font><font color="#FF0000"><b>Var </b></font>x<font color="#000080">, </font>y<font color="#000080">, </font>z<font color="#000080">: </font>real<font color="#000080">);
</font><font color="#FF0000"><b>var  </b></font>temp<font color="#000080">: </font>real<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>From_Polar<font color="#000080">(</font>r<font color="#000080">, </font>Theta<font color="#000080">, </font>z<font color="#000080">, </font>temp<font color="#000080">);
  </font>From_Polar<font color="#000080">(</font>temp<font color="#000080">, </font>Phi<font color="#000080">, </font>x<font color="#000080">, </font>y<font color="#000080">);
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#008000"><i>{ Convert from Cartesian to Az-El coordinates }
</i></font><font color="#FF0000"><b>Procedure </b></font>To_Azimuth_Elevation <font color="#000080">( </font>x<font color="#000080">, </font>y<font color="#000080">, </font>z<font color="#000080">: </font>real<font color="#000080">; </font><font color="#FF0000"><b>Var </b></font>r<font color="#000080">, </font>Phi<font color="#000080">, </font>Theta<font color="#000080">: </font>real<font color="#000080">);
</font><font color="#FF0000"><b>var  </b></font>temp<font color="#000080">: </font>real<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>To_Polar<font color="#000080">(</font>y<font color="#000080">, </font>x<font color="#000080">, </font>temp<font color="#000080">, </font>Phi<font color="#000080">);
  </font>To_Polar<font color="#000080">(</font>temp<font color="#000080">, </font>z<font color="#000080">, </font>r<font color="#000080">, </font>Theta<font color="#000080">);
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#008000"><i>{ Convert from Az-El to Cartesian coordinates }
</i></font><font color="#FF0000"><b>Procedure </b></font>From_Azimuth_Elevation <font color="#000080">( </font>r<font color="#000080">, </font>Phi<font color="#000080">, </font>Theta<font color="#000080">: </font>real<font color="#000080">; </font><font color="#FF0000"><b>Var </b></font>x<font color="#000080">, </font>y<font color="#000080">, </font>z<font color="#000080">: </font>real<font color="#000080">);
</font><font color="#FF0000"><b>var  </b></font>temp<font color="#000080">: </font>real<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>From_Polar<font color="#000080">(</font>r<font color="#000080">, </font>Theta<font color="#000080">, </font>temp<font color="#000080">, </font>z<font color="#000080">);
  </font>From_Polar<font color="#000080">(</font>temp<font color="#000080">, </font>Phi<font color="#000080">, </font>y<font color="#000080">, </font>x<font color="#000080">);
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#008000"><i>{ Returns Absolute value of x with Sign of y }
</i></font><font color="#FF0000"><b>Function </b></font>Sign <font color="#000080">( </font>x<font color="#000080">, </font>y<font color="#000080">: </font>real<font color="#000080">): </font>real<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  if </b></font>y <font color="#000080">&gt;= </font>Zero <font color="#FF0000"><b>then
     </b></font>Sign <font color="#000080">:= </font>Abs<font color="#000080">(</font>x<font color="#000080">)
  </font><font color="#FF0000"><b>else
     </b></font>Sign <font color="#000080">:= -</font>Abs<font color="#000080">(</font>x<font color="#000080">);
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#008000"><i>{ Convert angle from radians to degrees }
</i></font><font color="#FF0000"><b>Function </b></font>Degrees <font color="#000080">( </font>A<font color="#000080">: </font>real<font color="#000080">): </font>real<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>Degrees <font color="#000080">:= </font>Degrees_Per_Radian <font color="#000080">* </font>A<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#008000"><i>{ Convert angle from degrees to radians }
</i></font><font color="#FF0000"><b>Function </b></font>Radians <font color="#000080">( </font>A<font color="#000080">: </font>real<font color="#000080">): </font>real<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>Radians <font color="#000080">:= </font>Radians_Per_Degree <font color="#000080">* </font>A<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#008000"><i>{ Inverse Trigonometric Tangent Function }
</i></font><font color="#FF0000"><b>Function </b></font>Atan <font color="#000080">( </font>x<font color="#000080">: </font>real<font color="#000080">): </font>real<font color="#000080">;
</font><font color="#008000"><i>{  Arctangent algorithm uses fifth-order rational fraction with optimized
   coefficients
}
   </i></font><font color="#FF0000"><b>function </b></font>_Atan <font color="#000080">( </font>x<font color="#000080">: </font>real<font color="#000080">): </font>real<font color="#000080">;
   </font><font color="#FF0000"><b>const
     </b></font>a <font color="#000080">= </font><font color="#800000">0.999999447</font><font color="#000080">;
     </font>b <font color="#000080">= </font><font color="#800000">0.259455937</font><font color="#000080">;
     </font>c <font color="#000080">= </font><font color="#800000">0.592716128</font><font color="#000080">;

   </font><font color="#FF0000"><b>var  </b></font>y<font color="#000080">: </font>real<font color="#000080">;
   </font><font color="#FF0000"><b>begin
      </b></font>y <font color="#000080">:= </font>x<font color="#000080">*</font>x<font color="#000080">;
      </font>_Atan <font color="#000080">:= </font>a<font color="#000080">*</font>x<font color="#000080">*( </font>One <font color="#000080">+ </font>b<font color="#000080">*</font>y<font color="#000080">) / ( </font>One <font color="#000080">+ </font>c<font color="#000080">*</font>y<font color="#000080">);
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>var  </b></font>a<font color="#000080">, </font>y<font color="#000080">: </font>real<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>y <font color="#000080">:= </font>Abs<font color="#000080">(</font>x<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>y <font color="#000080">&lt;= </font>One <font color="#FF0000"><b>then
    </b></font>a <font color="#000080">:= </font>_Atan<font color="#000080">(</font>y<font color="#000080">)
  </font><font color="#FF0000"><b>else
    </b></font>a <font color="#000080">:= </font>Pi_Over_Two <font color="#000080">- </font>_Atan<font color="#000080">( </font>One <font color="#000080">/ </font>y<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>x <font color="#000080">&lt;= </font>Zero <font color="#FF0000"><b>then
    </b></font>a <font color="#000080">:= -</font>a<font color="#000080">;
  </font>Atan <font color="#000080">:= </font>a<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#008000"><i>{ Four-Quadrant Inverse Trigonometric Tangent Function }
</i></font><font color="#FF0000"><b>Function </b></font>Atan2 <font color="#000080">( </font>s<font color="#000080">, </font>c<font color="#000080">: </font>real<font color="#000080">): </font>real<font color="#000080">;
</font><font color="#FF0000"><b>var  </b></font>s1<font color="#000080">, </font>c1<font color="#000080">, </font>Theta<font color="#000080">: </font>real<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>s1 <font color="#000080">:= </font>Abs<font color="#000080">(</font>s<font color="#000080">);
  </font>c1 <font color="#000080">:= </font>Abs<font color="#000080">(</font>c<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>c1 <font color="#000080">+ </font>s1 <font color="#000080">= </font>Zero <font color="#FF0000"><b>then
    </b></font>Theta <font color="#000080">:= </font>Zero
  <font color="#FF0000"><b>else if </b></font>s1 <font color="#000080">&lt;= </font>c1 <font color="#FF0000"><b>then
         </b></font>Theta <font color="#000080">:= </font>ArcTan<font color="#000080">(</font>s1 <font color="#000080">/ </font>c1<font color="#000080">)
       </font><font color="#FF0000"><b>else
         </b></font>Theta <font color="#000080">:= </font>Pi_Over_Two <font color="#000080">- </font>ArcTan<font color="#000080">(</font>c1 <font color="#000080">/ </font>s1<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>c <font color="#000080">&lt; </font>Zero <font color="#FF0000"><b>then
    </b></font>Theta <font color="#000080">:= </font>Pi <font color="#000080">- </font>Theta<font color="#000080">;
  </font>Atan2 <font color="#000080">:= </font>Sign<font color="#000080">(</font>Theta<font color="#000080">, </font>s<font color="#000080">);
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
END</b></font><font color="#000080">.
</font><font color="#008000"><i>(*****END*****)
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0105.PAS">Original</a><b>]</b></p></body>
</html>
