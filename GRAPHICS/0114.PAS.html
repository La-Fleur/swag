<html>
<head><title> "MODE-X Routines" by GARTH KRUMINS</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0114.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
 JW&gt; What is mode-x or ($13) or whatever in graphics.  I like to write
     Mode-x is just your 320x200x256 VGA graphics mode.

It's pretty similar to using pascal's graph unit, except you don't!  You have
to get all the procedures and functions set-up yourself.
}

</i></font><font color="#FF0000"><b>PROCEDURE </b></font>InitVGA<font color="#000080">; </font><font color="#FF0000"><b>ASSEMBLER</b></font><font color="#000080">;  </font><font color="#008000"><i>{Puts you in 320x200x256 VGA}
</i></font><font color="#FF0000"><b>asm 
   </b></font><font color="#FF00FF">mov  ax, 13h 
   int  10h 
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; 
 
</font><font color="#FF0000"><b>PROCEDURE </b></font>InitTEXT<font color="#000080">; </font><font color="#FF0000"><b>ASSEMBLER</b></font><font color="#000080">; </font><font color="#008000"><i>{Puts you back in 80x25 text mode} 
</i></font><font color="#FF0000"><b>asm 
   </b></font><font color="#FF00FF">mov  ax, 03h 
   int  10h 
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; 

</font><font color="#FF0000"><b>PROCEDURE </b></font>SetColor <font color="#000080">(</font>ColorNo<font color="#000080">, </font>Red<font color="#000080">, </font>Green<font color="#000080">, </font>Blue <font color="#000080">: </font>byte<font color="#000080">); 
</font><font color="#FF0000"><b>begin     </b></font><font color="#008000"><i>{Changes the pallete data for a particular colour} 
     </i></font>PORT<font color="#000080">[</font><font color="#800000">$3C8</font><font color="#000080">] := </font>ColorNo<font color="#000080">; 
     </font>PORT<font color="#000080">[</font><font color="#800000">$3C9</font><font color="#000080">] := </font>Red<font color="#000080">; 
     </font>PORT<font color="#000080">[</font><font color="#800000">$3C9</font><font color="#000080">] := </font>Green<font color="#000080">; 
     </font>PORT<font color="#000080">[</font><font color="#800000">$3C9</font><font color="#000080">] := </font>Blue<font color="#000080">; 
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; 
 
</font><font color="#FF0000"><b>PROCEDURE </b></font>MovCursor <font color="#000080">(</font>X<font color="#000080">,</font>Y <font color="#000080">: </font>byte<font color="#000080">);  </font><font color="#008000"><i>{Moves the cursor to (X,Y)} 
</i></font><font color="#FF0000"><b>begin 
  asm 
  </b></font><font color="#FF00FF">MOV   ah, 02h 
  XOR   bx, bx 
  MOV   dh, Y 
  MOV   dl, X 
  INT   10h 
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">; 
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; 
 
</font><font color="#FF0000"><b>FUNCTION </b></font>ReadCursorX<font color="#000080">: </font>byte<font color="#000080">; </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;  </font><font color="#008000"><i>{Get X position of cursor}
</i></font><font color="#FF0000"><b>asm 
  </b></font><font color="#FF00FF">MOV   ah, 03h 
  XOR   bx, bx 
  INT   10h 
  MOV   al, dl 
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; 
 
</font><font color="#FF0000"><b>FUNCTION </b></font>ReadCursorY<font color="#000080">: </font>byte<font color="#000080">; </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;  </font><font color="#008000"><i>{Get Y position of cursor} 
</i></font><font color="#FF0000"><b>asm 
  </b></font><font color="#FF00FF">MOV   ah, 03h 
  XOR   bx, bx 
  INT   10h 
  MOV   al, dh 
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; 
 
</font><font color="#FF0000"><b>PROCEDURE </b></font>PutText <font color="#000080">(</font>TextData <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">; </font>Color <font color="#000080">: </font>byte<font color="#000080">);  </font><font color="#008000"><i>{Write a string} 
</i></font><font color="#FF0000"><b>var      </b></font><font color="#008000"><i>{It's not the fastest way to do it, but it does the job} 
 </i></font>z<font color="#000080">, </font>ASCdata<font color="#000080">, </font>CursorX<font color="#000080">, </font>CursorY <font color="#000080">: </font>byte<font color="#000080">; 
</font><font color="#FF0000"><b>begin 
 </b></font>CursorX <font color="#000080">:= </font>ReadCursorX<font color="#000080">;
 </font>CursorY <font color="#000080">:= </font>ReadCursorY<font color="#000080">; 
 </font><font color="#FF0000"><b>for </b></font>z <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>Length<font color="#000080">(</font>TextData<font color="#000080">) </font><font color="#FF0000"><b>do 
 begin 
  </b></font>ASCdata <font color="#000080">:= </font>Ord<font color="#000080">(</font>TextData<font color="#000080">[</font>z<font color="#000080">]); 
  </font><font color="#FF0000"><b>asm 
  </b></font><font color="#FF00FF">MOV   ah, 0Ah 
  MOV   al, ASCdata 
  XOR   bx, bx 
  MOV   bl, Color 
  MOV   cx, 1 
  INT   10h 
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">; 
  </font>inc<font color="#000080">(</font>CursorX<font color="#000080">); 
  </font><font color="#FF0000"><b>if </b></font>CursorX<font color="#000080">=</font><font color="#800000">40 </font><font color="#FF0000"><b>then begin </b></font>CursorX<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">; </font>inc<font color="#000080">(</font>CursorY<font color="#000080">); </font><font color="#FF0000"><b>end</b></font><font color="#000080">; 
  </font>MovCursor<font color="#000080">(</font>CursorX<font color="#000080">,</font>CursorY<font color="#000080">); 
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">; 
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; 
 
</font><font color="#FF0000"><b>PROCEDURE </b></font>PlotPixel<font color="#000080">(</font>X<font color="#000080">, </font>Y<font color="#000080">: </font>Word<font color="#000080">; </font>Color<font color="#000080">: </font>Byte<font color="#000080">); </font><font color="#FF0000"><b>ASSEMBLER</b></font><font color="#000080">; </font><font color="#008000"><i>{Plots a pixel} 
</i></font><font color="#FF0000"><b>asm
   </b></font><font color="#FF00FF">push es 
   push di 
   mov  ax, Y 
   mov  bx, ax 
   shl  ax, 8 
   shl  bx, 6 
   add  ax, bx 
   add  ax, X 
   mov  di, ax 
   mov  ax, $A000 
   mov  es, ax 
   mov  al, Color 
   mov  es:[di], al 
   pop  di
   pop  es
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0114.PAS">Original</a><b>]</b></p></body>
</html>
