<html>
<head><title> "CheckerBoard" by DAVID DAHL</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0082.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#FF0000"><b>Program </b></font>CheckerBoard<font color="#000080">;

</font><font color="#008000"><i>{=============================================

             CheckerBoard Example
           Programmed by David Dahl
                  01/06/94
   This program and source are PUBLIC DOMAIN

 ---------------------------------------------

   This program is an example of how to make
   a moving 3D checkerboard pattern on the
   screen like many demos do.

   This program requires VGA.

 =============================================}

</i></font><font color="#FF0000"><b>Uses </b></font>CRT<font color="#000080">;

</font><font color="#FF0000"><b>Const </b></font>TileMaxX <font color="#000080">= </font><font color="#800000">10</font><font color="#000080">;  </font><font color="#008000"><i>{ Horiz Size Of Tile }
      </i></font>TileMaxY <font color="#000080">= </font><font color="#800000">10</font><font color="#000080">;  </font><font color="#008000"><i>{ Vert Size Of Tile }

      </i></font>ViewerDist <font color="#000080">= </font><font color="#800000">400</font><font color="#000080">;  </font><font color="#008000"><i>{ Distance Of Viewer From Screen }

</i></font><font color="#FF0000"><b>Type </b></font>TileArray <font color="#000080">= </font><font color="#FF0000"><b>Array </b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font>TileMaxX<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">..</font>TileMaxY<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte<font color="#000080">;

     </font>PaletteRec  <font color="#000080">= </font><font color="#FF0000"><b>Record
                         </b></font>Red<font color="#000080">,
                         </font>Green<font color="#000080">,
                         </font>Blue  <font color="#000080">: </font>Byte<font color="#000080">;
                   </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
     </font>PaletteType <font color="#000080">= </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>PaletteRec<font color="#000080">;


</font><font color="#FF0000"><b>Var </b></font>Tile    <font color="#000080">: </font>TileArray<font color="#000080">;
    </font>TilePal <font color="#000080">: </font>PaletteType<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>GoMode13<font color="#000080">; </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>ASM
   </b></font><font color="#FF00FF">MOV AX, $0013
   INT $10
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#008000"><i>{-[ Set Value Of All DAC Registers ]--------------------------------------}
</i></font><font color="#FF0000"><b>Procedure </b></font>SetPalette <font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>PalBuf <font color="#000080">: </font>PaletteType<font color="#000080">); </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm
    </b></font><font color="#FF00FF">PUSH DS

    XOR AX, AX
    MOV CX, 0300h / 2
    LDS SI, PalBuf

    MOV DX, 03C8h
    OUT DX, AL

    INC DX
    MOV BX, DX
    CLD

    MOV DX, 03DAh
    @VSYNC0:
      IN   AL, DX
      TEST AL, 8
    JZ @VSYNC0

    MOV DX, BX
    rep
       OUTSB

    MOV BX, DX
    MOV CX, 0300h / 2


    MOV DX, 03DAh
    @VSYNC1:
      IN   AL, DX
      TEST AL, 8
    JZ @VSYNC1

    MOV DX, BX
    REP
       OUTSB

    POP DS
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#008000"><i>{-[ Get Value Of All DAC Registers ]--------------------------------------}
</i></font><font color="#FF0000"><b>Procedure </b></font>GetPalette <font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>PalBuf <font color="#000080">: </font>PaletteType<font color="#000080">); </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm
    </b></font><font color="#FF00FF">PUSH DS

    XOR AX, AX
    MOV CX, 0300h
    LES DI, PalBuf

    MOV DX, 03C7h
    OUT DX, AL
    INC DX

    REP
       INSB

    POP DS
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#008000"><i>{-[ Only Set DAC Regs 1 Through (TileMaxX * TileMaxY) ]-------------------}
</i></font><font color="#FF0000"><b>Procedure </b></font>SetTileColors <font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>PalBuf <font color="#000080">: </font>PaletteType<font color="#000080">); </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>ASM
   </b></font><font color="#FF00FF">PUSH DS

   MOV CX, TileMaxX * TileMaxY * 3
   MOV AX, 1
   LDS SI, PalBuf
   INC SI
   INC SI
   INC SI
   MOV DX, 03C8h
   OUT DX, AL
   INC DX
   MOV BX, DX

   MOV DX, 03DAh
   @VSYNC0:
     IN   AL, DX
     TEST AL, 8
   JZ @VSYNC0

   MOV DX, BX
   REP
      OUTSB

   POP DS
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#008000"><i>{-[ Define The Bitmap Of The Tile ]---------------------------------------}
</i></font><font color="#FF0000"><b>Procedure </b></font>DefineTile<font color="#000080">;
</font><font color="#FF0000"><b>Var </b></font>CounterX<font color="#000080">,
    </font>CounterY  <font color="#000080">: </font>Word<font color="#000080">;
</font><font color="#FF0000"><b>Begin
     For </b></font>CounterY <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>TileMaxY<font color="#000080">-</font><font color="#800000">1 </font><font color="#FF0000"><b>do
         For </b></font>CounterX <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>TileMaxX<font color="#000080">-</font><font color="#800000">1 </font><font color="#FF0000"><b>do
             </b></font>Tile<font color="#000080">[</font>CounterX<font color="#000080">, </font>CounterY<font color="#000080">] := </font><font color="#800000">1 </font><font color="#000080">+ </font>CounterX <font color="#000080">+
                                         (</font>CounterY <font color="#000080">* </font>TileMaxX<font color="#000080">);
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#008000"><i>{-[ Define The Colors Of The Tile ]---------------------------------------}
</i></font><font color="#FF0000"><b>Procedure </b></font>DefinePalette<font color="#000080">;
</font><font color="#FF0000"><b>Var </b></font>PalXCounter <font color="#000080">: </font>Byte<font color="#000080">;
    </font>PalYCounter <font color="#000080">: </font>Byte<font color="#000080">;
    </font>PalSize     <font color="#000080">: </font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>Begin
     </b></font>GetPalette <font color="#000080">(</font>TilePal<font color="#000080">);

     </font>PalSize <font color="#000080">:= (</font>TileMaxX <font color="#000080">* </font>TileMaxY<font color="#000080">);

     </font><font color="#FF0000"><b>For </b></font>PalYCounter <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>PalSize <font color="#FF0000"><b>do
     With </b></font>TilePal<font color="#000080">[</font>PalYCounter<font color="#000080">] </font><font color="#FF0000"><b>do
     Begin
          </b></font>Red   <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
          </font>Green <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
          </font>Blue  <font color="#000080">:= </font><font color="#800000">63</font><font color="#000080">;
     </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

     </font><font color="#FF0000"><b>For </b></font>PalYCounter <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#000080">((</font>TileMaxY <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>DIV </b></font><font color="#800000">2</font><font color="#000080">) </font><font color="#FF0000"><b>do
         For </b></font>PalXCounter <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#000080">((</font>TileMaxX <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>DIV </b></font><font color="#800000">2</font><font color="#000080">) </font><font color="#FF0000"><b>do
         Begin
              With </b></font>TilePal<font color="#000080">[</font><font color="#800000">1 </font><font color="#000080">+ </font>PalXCounter <font color="#000080">+ (</font>PalYCounter<font color="#000080">*</font>TileMaxX<font color="#000080">)] </font><font color="#FF0000"><b>do
              Begin
                   </b></font>Red   <font color="#000080">:= </font><font color="#800000">63</font><font color="#000080">;
                   </font>Green <font color="#000080">:= </font><font color="#800000">63</font><font color="#000080">;
                   </font>Blue  <font color="#000080">:= </font><font color="#800000">63</font><font color="#000080">;
              </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

              </font><font color="#FF0000"><b>With </b></font>TilePal<font color="#000080">[</font><font color="#800000">1 </font><font color="#000080">+ (</font>TileMaxX <font color="#FF0000"><b>DIV </b></font><font color="#800000">2</font><font color="#000080">) +
                               </font>PalXCounter <font color="#000080">+
                               ((</font>TileMaxY <font color="#FF0000"><b>DIV </b></font><font color="#800000">2</font><font color="#000080">) * </font>TileMaxX<font color="#000080">) +
                               (</font>PalYCounter<font color="#000080">*</font>TileMaxX<font color="#000080">)] </font><font color="#FF0000"><b>do
              Begin
                   </b></font>Red   <font color="#000080">:= </font><font color="#800000">63</font><font color="#000080">;
                   </font>Green <font color="#000080">:= </font><font color="#800000">63</font><font color="#000080">;
                   </font>Blue  <font color="#000080">:= </font><font color="#800000">63</font><font color="#000080">;
              </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
         </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#008000"><i>{-[ Display Tiles On Screen ]---------------------------------------------}
</i></font><font color="#FF0000"><b>Procedure </b></font>DisplayCheckerBoard<font color="#000080">;
</font><font color="#FF0000"><b>Var </b></font>CounterX<font color="#000080">,
    </font>CounterY  <font color="#000080">: </font>Integer<font color="#000080">;

    </font>X<font color="#000080">,
    </font>Y<font color="#000080">,
    </font>Z         <font color="#000080">: </font>LongInt<font color="#000080">;
</font><font color="#FF0000"><b>Begin
     For </b></font>CounterY <font color="#000080">:= </font><font color="#800000">110 </font><font color="#FF0000"><b>to </b></font><font color="#800000">199 </font><font color="#FF0000"><b>do
     Begin
          </b></font>Z <font color="#000080">:= -</font><font color="#800000">1600 </font><font color="#000080">+ (</font>CounterY <font color="#000080">* </font><font color="#800000">16</font><font color="#000080">) + </font>ViewerDist<font color="#000080">;

          </font><font color="#FF0000"><b>If </b></font>Z <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>THEN </b></font>Z <font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;

          </font><font color="#FF0000"><b>For </b></font>CounterX <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">319 </font><font color="#FF0000"><b>do
          Begin

               </b></font>X <font color="#000080">:= </font><font color="#800000">159 </font><font color="#000080">+ (</font>longInt<font color="#000080">(</font>CounterX <font color="#000080">- </font><font color="#800000">159 </font><font color="#000080">) * </font>ViewerDist<font color="#000080">) </font><font color="#FF0000"><b>DIV </b></font>Z<font color="#000080">;

               </font>Y <font color="#000080">:= (</font>LongInt<font color="#000080">(</font>CounterY <font color="#000080">+ </font><font color="#800000">100</font><font color="#000080">) * </font>ViewerDist<font color="#000080">) </font><font color="#FF0000"><b>DIV </b></font>Z<font color="#000080">;

               </font>MEM<font color="#000080">[</font><font color="#800000">$A000</font><font color="#000080">:</font>CounterX <font color="#000080">+ (</font>CounterY <font color="#000080">* </font><font color="#800000">320</font><font color="#000080">)] :=
                   </font>Tile<font color="#000080">[</font>X <font color="#FF0000"><b>MOD </b></font>TileMaxX<font color="#000080">, </font>Y <font color="#FF0000"><b>MOD </b></font>TileMaxY<font color="#000080">]
          </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
     </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#008000"><i>{-[ Rotate The Palette Of The Board To Give Illusion Of Movement Over It ]-}
</i></font><font color="#FF0000"><b>Procedure </b></font>MoveForwardOverBoard<font color="#000080">;
</font><font color="#FF0000"><b>Type  </b></font>TempPalType <font color="#000080">= </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font>TileMaxX<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>PaletteRec<font color="#000080">;
</font><font color="#FF0000"><b>Var   </b></font>TempPal     <font color="#000080">: </font>TempPalType<font color="#000080">;
      </font>CounterX<font color="#000080">,
      </font>CounterY    <font color="#000080">: </font>Word<font color="#000080">;
</font><font color="#FF0000"><b>Begin
     For </b></font>CounterX <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>TileMaxX <font color="#FF0000"><b>do
         </b></font>TempPal<font color="#000080">[</font>CounterX<font color="#000080">] := </font>TilePal<font color="#000080">[</font>CounterX<font color="#000080">];

     </font><font color="#FF0000"><b>For </b></font>CounterY <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#000080">(</font>TileMaxY<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>do
         For </b></font>CounterX <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#000080">(</font>TileMaxX<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>do
             </b></font>TilePal<font color="#000080">[</font><font color="#800000">1 </font><font color="#000080">+ </font>CounterX <font color="#000080">+ (</font>CounterY <font color="#000080">* </font>TileMaxX<font color="#000080">)] :=
                    </font>TilePal<font color="#000080">[</font><font color="#800000">1 </font><font color="#000080">+ </font>CounterX <font color="#000080">+ ((</font>CounterY<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">) * </font>TileMaxX<font color="#000080">)];

     </font><font color="#FF0000"><b>For </b></font>CounterX <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>TileMaxX <font color="#FF0000"><b>do
         </b></font>TilePal<font color="#000080">[</font>CounterX <font color="#000080">+ ((</font>TileMaxY<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">) * </font>TileMaxX<font color="#000080">)] :=
                </font>TempPal<font color="#000080">[</font>CounterX<font color="#000080">];
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#008000"><i>{-[ Flush the Keyboard Buffer ]--------------------------------------------}
</i></font><font color="#FF0000"><b>Procedure </b></font>FlushKeyboard<font color="#000080">;
</font><font color="#FF0000"><b>Var </b></font>Key <font color="#000080">: </font>Char<font color="#000080">;
</font><font color="#FF0000"><b>Begin
     While </b></font>KeyPressed <font color="#FF0000"><b>do
           </b></font>Key <font color="#000080">:= </font>ReadKey<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#008000"><i>{=[ Main Program ]=========================================================}
</i></font><font color="#FF0000"><b>Begin

     </b></font>GoMode13<font color="#000080">;
     </font>DefineTile<font color="#000080">;
     </font>DefinePalette<font color="#000080">;

     </font>SetPalette<font color="#000080">(</font>TilePal<font color="#000080">);

     </font>DisplayCheckerboard<font color="#000080">;

     </font>FlushKeyboard<font color="#000080">;

     </font><font color="#FF0000"><b>Repeat
           </b></font>MoveForwardOverBoard<font color="#000080">;
           </font>SetTileColors<font color="#000080">(</font>TilePal<font color="#000080">);
     </font><font color="#FF0000"><b>Until </b></font>KeyPressed<font color="#000080">;

     </font>FlushKeyboard<font color="#000080">;

     </font>TextMode<font color="#000080">(</font>C80<font color="#000080">);
</font><font color="#FF0000"><b>End</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0082.PAS">Original</a><b>]</b></p></body>
</html>
