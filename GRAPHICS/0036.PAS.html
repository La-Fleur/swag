<html>
<head><title> "Scalable HEX Screen" by VINCE LAURENT</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0036.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
VINCE LAURENT

I wrote some code to draw a scalable hex field on the screen. Can
anyone give me a hand in optimizing it? There is a lot of redundant
line drawing and positioning... I would also like to be able to have
a fexible amount of hexigons showing.  For example, if the scale is,
say 40, show 19 hexs, if it is smaller, show more (like as many that
could have fit in the area occupied by 19).

BTW, this code can be freely used and distributed or completely ignored :-) }

</i></font><font color="#FF0000"><b>Program </b></font>HexzOnScreen<font color="#000080">;
</font><font color="#FF0000"><b>Uses
  </b></font>Graph<font color="#000080">, </font>Crt<font color="#000080">;
</font><font color="#FF0000"><b>Type
  </b></font>PtArray <font color="#000080">= </font><font color="#FF0000"><b>Array </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">6</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">2</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Real<font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>s1<font color="#000080">, </font>s2<font color="#000080">,
  </font>side<font color="#000080">,
  </font>i<font color="#000080">, </font>j<font color="#000080">,
  </font>Gd<font color="#000080">, </font>Gm  <font color="#000080">: </font>Integer<font color="#000080">;
  </font>Pts     <font color="#000080">: </font>PtArray<font color="#000080">;
  </font>ErrCode <font color="#000080">: </font>Integer<font color="#000080">;
  </font>Sqrt3<font color="#000080">,
  </font>sts     <font color="#000080">: </font>Real<font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>Sqrt3 <font color="#000080">:= </font>Sqrt<font color="#000080">(</font><font color="#800000">3</font><font color="#000080">);
  </font>Side  <font color="#000080">:= </font><font color="#800000">40</font><font color="#000080">;             </font><font color="#008000"><i>{ initial hex side length ( min = 8 ) }
  </i></font>sts   <font color="#000080">:= </font>Side <font color="#000080">* </font>Sqrt3<font color="#000080">;
  </font>s1    <font color="#000080">:= </font><font color="#800000">200</font><font color="#000080">;
  </font>s2    <font color="#000080">:= </font><font color="#800000">60</font><font color="#000080">;     </font><font color="#008000"><i>{ starting point For hex field }
  </i></font>InitGraph<font color="#000080">(</font>Gd<font color="#000080">, </font>Gm<font color="#000080">, </font><font color="#800000">'e:\bp\bgi\'</font><font color="#000080">);
  </font>ErrCode <font color="#000080">:= </font>GraphResult<font color="#000080">;
  </font><font color="#FF0000"><b>if not </b></font>ErrCode <font color="#000080">= </font>grOk <font color="#FF0000"><b>then
  begin
    </b></font>Writeln<font color="#000080">(</font><font color="#800000">'Error: '</font><font color="#000080">, </font>GraphErrorMsg<font color="#000080">(</font>ErrCode<font color="#000080">));
    </font>Halt<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>SetColor<font color="#000080">(</font>LightGray<font color="#000080">);
  </font>Delay<font color="#000080">(</font><font color="#800000">10</font><font color="#000080">);   </font><font color="#008000"><i>{ give the screen a chance to toggle to Graph mode }
  </i></font><font color="#FF0000"><b>For </b></font>j <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">17 </font><font color="#FF0000"><b>DO
  begin
    </b></font>Pts<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">] := </font>s1<font color="#000080">;
    </font>Pts<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">] := </font>s2<font color="#000080">;
    </font>Pts<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">] := </font>Pts<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">] - </font>side<font color="#000080">;
    </font>Pts<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">] := </font>Pts<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">];
    </font>Pts<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">] := </font>Pts<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">] - </font>side <font color="#000080">- (</font>side <font color="#000080">/ </font><font color="#800000">2</font><font color="#000080">);
    </font>Pts<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">] := </font>Pts<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">] + (</font>sts <font color="#000080">/ </font><font color="#800000">2</font><font color="#000080">);
    </font>Pts<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">] := </font>Pts<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">] - </font>side<font color="#000080">;
    </font>Pts<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">] := </font>Pts<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">] + </font>sts <font color="#000080">;
    </font>Pts<font color="#000080">[</font><font color="#800000">5</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">] := </font>Pts<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">];
    </font>Pts<font color="#000080">[</font><font color="#800000">5</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">] := </font>Pts<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">];
    </font>Pts<font color="#000080">[</font><font color="#800000">6</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">] := </font>Pts<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">] + (</font>side <font color="#000080">/ </font><font color="#800000">2</font><font color="#000080">);
    </font>Pts<font color="#000080">[</font><font color="#800000">6</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">] := </font>Pts<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">] + (</font>sts  <font color="#000080">/ </font><font color="#800000">2</font><font color="#000080">);
    </font><font color="#FF0000"><b>For </b></font>I <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">6 </font><font color="#FF0000"><b>DO
    begin
      if </b></font>i <font color="#000080">&lt;&gt; </font><font color="#800000">6 </font><font color="#FF0000"><b>then
        </b></font>Line<font color="#000080">(</font>Round<font color="#000080">(</font>Pts<font color="#000080">[</font>i<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">]),  </font>Round<font color="#000080">(</font>Pts<font color="#000080">[</font>i<font color="#000080">, </font><font color="#800000">2</font><font color="#000080">]),
             </font>Round<font color="#000080">(</font>Pts<font color="#000080">[</font>i <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">]), </font>Round<font color="#000080">(</font>Pts<font color="#000080">[</font>i <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">]))
      </font><font color="#FF0000"><b>else
        </b></font>Line<font color="#000080">(</font>Round<font color="#000080">(</font>Pts<font color="#000080">[</font>i<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">]), </font>Round<font color="#000080">(</font>Pts<font color="#000080">[</font>i<font color="#000080">, </font><font color="#800000">2</font><font color="#000080">]),
             </font>Round<font color="#000080">(</font>Pts<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">]), </font>Round<font color="#000080">(</font>Pts<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">]));
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>Case </b></font>j <font color="#FF0000"><b>OF
      </b></font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">2 </font><font color="#000080">:
      </font><font color="#FF0000"><b>begin
        </b></font>s1 <font color="#000080">:= </font>Round<font color="#000080">(</font>Pts<font color="#000080">[</font><font color="#800000">6</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">] + </font>side<font color="#000080">);
        </font>s2 <font color="#000080">:= </font>Round<font color="#000080">(</font>Pts<font color="#000080">[</font><font color="#800000">6</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">]);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#800000">3</font><font color="#000080">..</font><font color="#800000">4 </font><font color="#000080">:
      </font><font color="#FF0000"><b>begin
        </b></font>s1 <font color="#000080">:= </font>Round<font color="#000080">(</font>Pts<font color="#000080">[</font><font color="#800000">5</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">]);
        </font>s2 <font color="#000080">:= </font>Round<font color="#000080">(</font>Pts<font color="#000080">[</font><font color="#800000">5</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">]);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#800000">5</font><font color="#000080">..</font><font color="#800000">6 </font><font color="#000080">:
      </font><font color="#FF0000"><b>begin
        </b></font>s1 <font color="#000080">:= </font>Round<font color="#000080">(</font>Pts<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">]);
        </font>s2 <font color="#000080">:= </font>Round<font color="#000080">(</font>Pts<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">]);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#800000">7</font><font color="#000080">..</font><font color="#800000">8 </font><font color="#000080">:
      </font><font color="#FF0000"><b>begin
        </b></font>s1 <font color="#000080">:= </font>Round<font color="#000080">(</font>Pts<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">]);
        </font>s2 <font color="#000080">:= </font>Round<font color="#000080">(</font>Pts<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">] - </font>sts<font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#800000">9</font><font color="#000080">..</font><font color="#800000">10 </font><font color="#000080">:
      </font><font color="#FF0000"><b>begin
        </b></font>s1 <font color="#000080">:= </font>Round<font color="#000080">(</font>Pts<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">]);
        </font>s2 <font color="#000080">:= </font>Round<font color="#000080">(</font>Pts<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">] - </font>sts<font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#800000">11 </font><font color="#000080">:
      </font><font color="#FF0000"><b>begin
        </b></font>s1 <font color="#000080">:= </font>Round<font color="#000080">(</font>Pts<font color="#000080">[</font><font color="#800000">6</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">] + </font>side<font color="#000080">);
        </font>s2 <font color="#000080">:= </font>Round<font color="#000080">(</font>Pts<font color="#000080">[</font><font color="#800000">6</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">] - </font>sts<font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#800000">12</font><font color="#000080">..</font><font color="#800000">13 </font><font color="#000080">:
      </font><font color="#FF0000"><b>begin
        </b></font>s1 <font color="#000080">:= </font>Round<font color="#000080">(</font>Pts<font color="#000080">[</font><font color="#800000">6</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">] + </font>side<font color="#000080">);
        </font>s2 <font color="#000080">:= </font>Round<font color="#000080">(</font>Pts<font color="#000080">[</font><font color="#800000">6</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">]);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#800000">14 </font><font color="#000080">:
      </font><font color="#FF0000"><b>begin
        </b></font>s1 <font color="#000080">:= </font>Round<font color="#000080">(</font>Pts<font color="#000080">[</font><font color="#800000">5</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">]);
        </font>s2 <font color="#000080">:= </font>Round<font color="#000080">(</font>Pts<font color="#000080">[</font><font color="#800000">5</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">]);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#800000">15 </font><font color="#000080">:
      </font><font color="#FF0000"><b>begin
        </b></font>s1 <font color="#000080">:= </font>Round<font color="#000080">(</font>Pts<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">]);
        </font>s2 <font color="#000080">:= </font>Round<font color="#000080">(</font>Pts<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">]);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#800000">16 </font><font color="#000080">:
      </font><font color="#FF0000"><b>begin
        </b></font>s1 <font color="#000080">:= </font>Round<font color="#000080">(</font>Pts<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">]);
        </font>s2 <font color="#000080">:= </font>Round<font color="#000080">(</font>Pts<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">] - </font>sts<font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>Line<font color="#000080">(</font>s1<font color="#000080">, </font>s2<font color="#000080">, </font>Round<font color="#000080">(</font>s1 <font color="#000080">+ (</font>side <font color="#000080">/ </font><font color="#800000">2</font><font color="#000080">)), </font>Round<font color="#000080">(</font>s2 <font color="#000080">- </font>sts <font color="#000080">/ </font><font color="#800000">2</font><font color="#000080">));
  </font>Readln<font color="#000080">;
  </font>CloseGraph<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0036.PAS">Original</a><b>]</b></p></body>
</html>
