<html>
<head><title> "Voxels" by ALEX CHALFIN</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0170.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#000000"> <font color="#008000"><i>{
 Voxel's in a litteral sence are &quot;Volume Pixels&quot; so to do it 100% correctly
 you would have to draw a 3d rectangular box at each coord.

 Fortunitely there is an easy way to make it MUCH faster with out loosing
 much detail.

 Here is a re-work of the voxel code posted earlier. I have renamed
 everything so it would be easier to follow. I have also added color
 interpolation when drawing it. I haven't played with it in a while (cause
 I like to write all my own code), but I'm sure everything is in working
 order.
}
</i></font><font color="#FF0000"><b>Program </b></font>VoxelLand<font color="#000080">; </font><font color="#008000"><i>{$G+}
{ Alex Chalfin }
{ Yet another modified source of Voxels (I forget who posted it first) }
{ Added: Gouraud interpolation of the colors for a smoother look }
{        It might be a little faster.                            }
{ Internet: achalfin@uceng.uc.edu }
{ Fidonet: 1:108/180              }

</i></font><font color="#FF0000"><b>Uses </b></font>Crt<font color="#000080">;
</font><font color="#FF0000"><b>Type </b></font>MapArray <font color="#000080">= </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">65534</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte<font color="#000080">; </font>ScreenArray<font color="#000080">=</font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">63999</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte<font color="#000080">;
  </font>PMapArray <font color="#000080">= ^</font>MapArray<font color="#000080">; </font>PScreenArray <font color="#000080">= ^</font>ScreenArray<font color="#000080">;

</font><font color="#FF0000"><b>Var </b></font>Map <font color="#000080">: </font>PMapArray<font color="#000080">; </font>VScreen <font color="#000080">: </font>PScreenArray<font color="#000080">; </font>Screen <font color="#000080">: </font>PScreenArray<font color="#000080">;
  </font>Range <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">319</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte<font color="#000080">;
  </font>Sine<font color="#000080">, </font>Cosine <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">511</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Integer<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>InitGraph<font color="#000080">;
</font><font color="#FF0000"><b>Begin </b></font>Screen <font color="#000080">:= </font>Ptr<font color="#000080">(</font><font color="#800000">$A000</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">); </font>New<font color="#000080">(</font>VScreen<font color="#000080">);
</font><font color="#FF0000"><b>Asm</b></font><font color="#FF00FF">; Mov  ax,13h; Int  10h; </font><font color="#FF0000"><b>End</b></font><font color="#000080">; </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>CloseGraph<font color="#000080">;
</font><font color="#FF0000"><b>Begin Asm</b></font><font color="#FF00FF">; Mov ax,3h; Int 10h; </font><font color="#FF0000"><b>End</b></font><font color="#000080">; </font>Dispose<font color="#000080">(</font>VScreen<font color="#000080">); </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>ClearScreen<font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>S<font color="#000080">); </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm</b></font><font color="#FF00FF">; Les di,S; db 66h; Xor ax,ax; Mov cx,16000; db 66h; Rep Stosw; </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>CopyScreen<font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>S<font color="#000080">, </font>D<font color="#000080">); </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm</b></font><font color="#FF00FF">; Push ds;Les di,D;Lds si,S;Mov cx,16000;db 66h;Rep Movsw;Pop  ds; </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>SetColor<font color="#000080">(</font>Color<font color="#000080">, </font>R<font color="#000080">, </font>G<font color="#000080">, </font>B <font color="#000080">: </font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Begin </b></font>Port<font color="#000080">[</font><font color="#800000">$3c8</font><font color="#000080">]:=</font>Color<font color="#000080">;</font>Port<font color="#000080">[</font><font color="#800000">$3c9</font><font color="#000080">]:=</font>R<font color="#000080">;</font>Port<font color="#000080">[</font><font color="#800000">$3c9</font><font color="#000080">]:=</font>G<font color="#000080">;</font>Port<font color="#000080">[</font><font color="#800000">$3c9</font><font color="#000080">]:=</font>B<font color="#000080">;</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>InitPalette<font color="#000080">;
</font><font color="#FF0000"><b>Var </b></font>Count <font color="#000080">: </font>Word<font color="#000080">;
</font><font color="#FF0000"><b>Begin For </b></font>Count <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">25 </font><font color="#FF0000"><b>do </b></font>SetColor<font color="#000080">(</font>Count<font color="#000080">, </font>Count<font color="#000080">*</font><font color="#800000">2</font><font color="#000080">, </font>Count<font color="#000080">*</font><font color="#800000">2</font><font color="#000080">, </font><font color="#800000">63</font><font color="#000080">);
</font><font color="#FF0000"><b>For </b></font>Count <font color="#000080">:= </font><font color="#800000">25 </font><font color="#FF0000"><b>to </b></font><font color="#800000">127 </font><font color="#FF0000"><b>do </b></font>SetColor<font color="#000080">(</font>Count<font color="#000080">, </font>Count <font color="#FF0000"><b>Div </b></font><font color="#800000">3</font><font color="#000080">, </font>Count <font color="#FF0000"><b>Div </b></font><font color="#800000">2</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">); </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>NewColor<font color="#000080">(</font>Mc<font color="#000080">, </font>N<font color="#000080">, </font>Dvd <font color="#000080">: </font>integer<font color="#000080">) : </font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>Var </b></font>Loc <font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>Begin </b></font>Loc <font color="#000080">:= (</font>Mc <font color="#000080">+ </font>N <font color="#000080">- </font>Random<font color="#000080">(</font>N <font color="#FF0000"><b>Shl </b></font><font color="#800000">1</font><font color="#000080">)) </font><font color="#FF0000"><b>Div </b></font>Dvd <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
 </font><font color="#FF0000"><b>If </b></font>Loc <font color="#000080">&gt; </font><font color="#800000">250 </font><font color="#FF0000"><b>Then </b></font>Loc <font color="#000080">:= </font><font color="#800000">250</font><font color="#000080">;
 </font><font color="#FF0000"><b>If </b></font>Loc <font color="#000080">&lt; </font><font color="#800000">5 </font><font color="#FF0000"><b>Then </b></font>Loc<font color="#000080">:=</font><font color="#800000">5</font><font color="#000080">; </font>NewColor <font color="#000080">:= </font>Lo<font color="#000080">(</font>Loc<font color="#000080">); </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>MakeFractalMap<font color="#000080">(</font>X1<font color="#000080">, </font>Y1<font color="#000080">, </font>X2<font color="#000080">, </font>Y2 <font color="#000080">: </font>Word<font color="#000080">);
</font><font color="#FF0000"><b>Var </b></font>Xn<font color="#000080">, </font>Yn<font color="#000080">, </font>Dxy<font color="#000080">, </font>P1<font color="#000080">, </font>P2<font color="#000080">, </font>P3<font color="#000080">, </font>P4 <font color="#000080">: </font>Word<font color="#000080">;
</font><font color="#FF0000"><b>Begin If </b></font><font color="#000080">((</font>x2<font color="#000080">-</font>x1<font color="#000080">&lt;</font><font color="#800000">2</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>y2<font color="#000080">-</font>y1<font color="#000080">&lt;</font><font color="#800000">2</font><font color="#000080">)) </font><font color="#FF0000"><b>Then </b></font>Exit<font color="#000080">;
 </font>P1<font color="#000080">:=</font>Map<font color="#000080">^[(</font>Y1 <font color="#FF0000"><b>Shl </b></font><font color="#800000">8</font><font color="#000080">)+</font>X1<font color="#000080">]; </font>P2<font color="#000080">:=</font>Map<font color="#000080">^[(</font>Y2 <font color="#FF0000"><b>Shl </b></font><font color="#800000">8</font><font color="#000080">)+</font>X1<font color="#000080">]; </font>P3<font color="#000080">:=</font>Map<font color="#000080">^[(</font>Y1 <font color="#FF0000"><b>Shl </b></font><font color="#800000">8</font><font color="#000080">)+</font>X2<font color="#000080">];
 </font>P4<font color="#000080">:=</font>Map<font color="#000080">^[(</font>Y2 <font color="#FF0000"><b>Shl </b></font><font color="#800000">8</font><font color="#000080">)+</font>X2<font color="#000080">]; </font>Xn<font color="#000080">:=(</font>X2<font color="#000080">+</font>X1<font color="#000080">) </font><font color="#FF0000"><b>Shr </b></font><font color="#800000">1</font><font color="#000080">; </font>Yn<font color="#000080">:=(</font>Y2<font color="#000080">+</font>Y1<font color="#000080">) </font><font color="#FF0000"><b>Shr </b></font><font color="#800000">1</font><font color="#000080">;
 </font>Dxy<font color="#000080">:=</font><font color="#800000">5 </font><font color="#000080">* (</font>X2 <font color="#000080">- </font>X1 <font color="#000080">+ </font>Y2 <font color="#000080">- </font>Y1<font color="#000080">) </font><font color="#FF0000"><b>Div </b></font><font color="#800000">3</font><font color="#000080">;
 </font><font color="#FF0000"><b>If </b></font>Map<font color="#000080">^[(</font>Y1 <font color="#FF0000"><b>Shl </b></font><font color="#800000">8</font><font color="#000080">)+</font>Xn<font color="#000080">]=</font><font color="#800000">0 </font><font color="#FF0000"><b>Then </b></font>Map<font color="#000080">^[(</font>Y1 <font color="#FF0000"><b>Shl </b></font><font color="#800000">8</font><font color="#000080">)+</font>Xn<font color="#000080">]:=</font>NewColor<font color="#000080">(</font>P1<font color="#000080">+</font>P3<font color="#000080">,</font>Dxy<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">);
 </font><font color="#FF0000"><b>If </b></font>Map<font color="#000080">^[(</font>Yn <font color="#FF0000"><b>Shl </b></font><font color="#800000">8</font><font color="#000080">)+</font>X1<font color="#000080">]=</font><font color="#800000">0 </font><font color="#FF0000"><b>Then </b></font>Map<font color="#000080">^[(</font>Yn <font color="#FF0000"><b>Shl </b></font><font color="#800000">8</font><font color="#000080">)+</font>X1<font color="#000080">]:=</font>NewColor<font color="#000080">(</font>P1<font color="#000080">+</font>P2<font color="#000080">,</font>Dxy<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">);
 </font><font color="#FF0000"><b>If </b></font>Map<font color="#000080">^[(</font>Yn <font color="#FF0000"><b>Shl </b></font><font color="#800000">8</font><font color="#000080">)+</font>X2<font color="#000080">]=</font><font color="#800000">0 </font><font color="#FF0000"><b>Then </b></font>Map<font color="#000080">^[(</font>Yn <font color="#FF0000"><b>Shl </b></font><font color="#800000">8</font><font color="#000080">)+</font>X2<font color="#000080">]:=</font>NewColor<font color="#000080">(</font>P3<font color="#000080">+</font>P4<font color="#000080">,</font>Dxy<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">);
 </font><font color="#FF0000"><b>If </b></font>Map<font color="#000080">^[(</font>Y2 <font color="#FF0000"><b>Shl </b></font><font color="#800000">8</font><font color="#000080">)+</font>Xn<font color="#000080">]=</font><font color="#800000">0 </font><font color="#FF0000"><b>Then </b></font>Map<font color="#000080">^[(</font>Y2 <font color="#FF0000"><b>Shl </b></font><font color="#800000">8</font><font color="#000080">)+</font>Xn<font color="#000080">]:=</font>NewColor<font color="#000080">(</font>P1<font color="#000080">+</font>P2<font color="#000080">,</font>Dxy<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">);
 </font>Map<font color="#000080">^[(</font>Yn <font color="#FF0000"><b>Shl </b></font><font color="#800000">8</font><font color="#000080">)+</font>Xn<font color="#000080">] := </font>NewColor<font color="#000080">(</font>P1 <font color="#000080">+ </font>P2 <font color="#000080">+ </font>P3 <font color="#000080">+ </font>P4<font color="#000080">, </font>Dxy<font color="#000080">, </font><font color="#800000">4</font><font color="#000080">);
 </font>MakeFractalMap<font color="#000080">(</font>X1<font color="#000080">, </font>Y1<font color="#000080">, </font>Xn<font color="#000080">, </font>Yn<font color="#000080">); </font>MakeFractalMap<font color="#000080">(</font>Xn<font color="#000080">, </font>Y1<font color="#000080">, </font>X2<font color="#000080">, </font>Yn<font color="#000080">);
 </font>MakeFractalMap<font color="#000080">(</font>X1<font color="#000080">, </font>Yn<font color="#000080">, </font>Xn<font color="#000080">, </font>Y2<font color="#000080">); </font>MakeFractalMap<font color="#000080">(</font>Xn<font color="#000080">, </font>Yn<font color="#000080">, </font>X2<font color="#000080">, </font>Y2<font color="#000080">); </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>CreateMap<font color="#000080">;
</font><font color="#FF0000"><b>Begin </b></font>Randomize<font color="#000080">; </font>New<font color="#000080">(</font>Map<font color="#000080">); </font>FillChar<font color="#000080">(</font>Map<font color="#000080">^[</font><font color="#800000">0</font><font color="#000080">], (</font><font color="#800000">256</font><font color="#000080">*</font><font color="#800000">256</font><font color="#000080">)-</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">);
  </font>Map<font color="#000080">^[</font><font color="#800000">0</font><font color="#000080">]:=</font><font color="#800000">128</font><font color="#000080">; </font>Writeln<font color="#000080">(</font><font color="#800000">'Generating map.'</font><font color="#000080">); </font>MakeFractalMap<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">256</font><font color="#000080">,</font><font color="#800000">256</font><font color="#000080">); </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>MakeSinus<font color="#000080">;
</font><font color="#FF0000"><b>Var </b></font>Count <font color="#000080">: </font>Word<font color="#000080">;
</font><font color="#FF0000"><b>Begin For </b></font>Count <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">511 </font><font color="#FF0000"><b>do Begin
</b></font>Sine<font color="#000080">[</font>Count<font color="#000080">] := </font>Round<font color="#000080">(</font>Sin<font color="#000080">(</font>Count<font color="#000080">*((</font><font color="#800000">2</font><font color="#000080">*</font>Pi<font color="#000080">)/</font><font color="#800000">512</font><font color="#000080">)) * </font><font color="#800000">256</font><font color="#000080">);
</font>Cosine<font color="#000080">[</font>Count<font color="#000080">] := </font>Round<font color="#000080">(</font>Cos<font color="#000080">(</font>Count<font color="#000080">*((</font><font color="#800000">2</font><font color="#000080">*</font>Pi<font color="#000080">)/</font><font color="#800000">512</font><font color="#000080">)) * </font><font color="#800000">256</font><font color="#000080">); </font><font color="#FF0000"><b>End</b></font><font color="#000080">;</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>InterPollColor<font color="#000080">(</font>Y<font color="#000080">, </font>Y2<font color="#000080">, </font>X<font color="#000080">, </font>MapColor<font color="#000080">: </font>Integer<font color="#000080">); </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm</b></font><font color="#FF00FF">; Les  di,VScreen; Mov  ax,Y2;Cmp  ax,199;Jl @GouraudColor;@FlatColor:
  Mov bx,320;IMul bx;Add ax,X;Add di,ax;  Mov  cx,Y2;Sub  cx,Y;Mov  ax,MapColor
 @FlatLooper:;Mov  es:[di],al;Sub  di,320;Dec  cx;Jnz @FlatLooper;Jmp @Exit
 @GouraudColor:;Mov  cx,ax;  Sub  cx,Y;Mov  bx,320;IMul bx;Add  ax,X
  Add di,ax;Mov  ax,MapColor;Xor  bx,bx;Mov  bl,Byte Ptr es:[di+320]
  Push bx;Sub  ax,bx;Shl  ax,8;Cwd;Idiv cx;Mov  bx,ax;Pop  ax;Shl  ax,8
  Shr cx,1;Jnc @Gouraud4Looper;Mov  es:[di],ah;Add  ax,bx;Sub  di,320
  Jcxz @Exit;@Gouraud4Looper:;Mov  es:[di],ah;Add  ax,bx;Sub  di,320
  Mov es:[di],ah;Add ax,bx;Sub di,320;Dec cx;Jnz @Gouraud4Looper;@Exit: </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>DisplayLandScape<font color="#000080">(</font>XPos<font color="#000080">, </font>YPos<font color="#000080">, </font>Dir <font color="#000080">: </font>Integer<font color="#000080">);
</font><font color="#FF0000"><b>Const </b></font>ScreenWidth <font color="#000080">= </font><font color="#800000">320</font><font color="#000080">;
</font><font color="#FF0000"><b>Var </b></font>ViewerZ<font color="#000080">, </font>YDepth<font color="#000080">, </font>ColWidth<font color="#000080">,</font>XCount<font color="#000080">, </font>YCount<font color="#000080">, </font>NewX<font color="#000080">, </font>NewY <font color="#000080">: </font>Integer<font color="#000080">;
  </font>ProjX<font color="#000080">, </font>ProjY<font color="#000080">, </font>ZPos<font color="#000080">, </font>MapColor<font color="#000080">,</font>BarCount<font color="#000080">, </font>CrossCount <font color="#000080">: </font>Integer<font color="#000080">;
  </font>LeftLine<font color="#000080">, </font>RightLine<font color="#000080">,</font>YSin<font color="#000080">, </font>YCos <font color="#000080">: </font>Integer<font color="#000080">;

</font><font color="#FF0000"><b>Begin
  </b></font>FillChar<font color="#000080">(</font>Range<font color="#000080">, </font><font color="#800000">320</font><font color="#000080">, </font><font color="#800000">199</font><font color="#000080">); </font>ViewerZ <font color="#000080">:= </font>Map<font color="#000080">^[(</font>YPos <font color="#FF0000"><b>Shl </b></font><font color="#800000">8</font><font color="#000080">)+</font>XPos<font color="#000080">] + </font><font color="#800000">100</font><font color="#000080">;
  </font><font color="#FF0000"><b>For </b></font>YCount <font color="#000080">:= </font>YPos <font color="#FF0000"><b>to </b></font><font color="#000080">(</font>YPos <font color="#000080">+ </font><font color="#800000">50</font><font color="#000080">) </font><font color="#FF0000"><b>do
    Begin </b></font>YDepth <font color="#000080">:= ((</font>YCount<font color="#000080">-</font>YPos<font color="#000080">) </font><font color="#FF0000"><b>Shl </b></font><font color="#800000">1</font><font color="#000080">)+</font><font color="#800000">1</font><font color="#000080">; </font>ColWidth<font color="#000080">:=(</font><font color="#800000">300 </font><font color="#FF0000"><b>Div </b></font>YDepth<font color="#000080">)+</font><font color="#800000">4</font><font color="#000080">;
      </font>LeftLine<font color="#000080">:=(</font>XPos<font color="#000080">+(</font>YPos<font color="#000080">-</font>YCount<font color="#000080">));</font>RightLine<font color="#000080">:=(</font>XPos <font color="#000080">+ (-</font>YPos <font color="#000080">+ </font>YCount<font color="#000080">));
      </font>YSin <font color="#000080">:= (</font>YCount<font color="#000080">-</font>YPos<font color="#000080">) * </font>Sine<font color="#000080">[</font>Dir<font color="#000080">];</font>YCos <font color="#000080">:= (</font>YCount<font color="#000080">-</font>YPos<font color="#000080">) * </font>CoSine<font color="#000080">[</font>Dir<font color="#000080">];
      </font><font color="#FF0000"><b>For </b></font>XCount <font color="#000080">:= </font>LeftLine <font color="#FF0000"><b>to </b></font>RightLine <font color="#FF0000"><b>do
        Begin
          </b></font>NewX <font color="#000080">:= ((</font>XCount<font color="#000080">-</font>XPos<font color="#000080">)*</font>CoSine<font color="#000080">[</font>Dir<font color="#000080">]+</font>YSin<font color="#000080">) </font><font color="#FF0000"><b>Shr </b></font><font color="#800000">8 </font><font color="#000080">+ </font>XPos<font color="#000080">;
          </font>NewY <font color="#000080">:= (</font>YCos<font color="#000080">-(</font>XCount<font color="#000080">-</font>XPos<font color="#000080">)*</font>Sine<font color="#000080">[</font>Dir<font color="#000080">]) </font><font color="#FF0000"><b>Shr </b></font><font color="#800000">8 </font><font color="#000080">+ </font>YPos<font color="#000080">;
          </font>ProjX <font color="#000080">:= ((</font>XCount<font color="#000080">-</font>XPos<font color="#000080">) * </font>ScreenWidth<font color="#000080">) </font><font color="#FF0000"><b>Div </b></font>YDepth <font color="#000080">+ </font><font color="#800000">160</font><font color="#000080">;
          </font><font color="#FF0000"><b>If </b></font><font color="#000080">(</font>ProjX <font color="#000080">&gt;= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>And </b></font><font color="#000080">((</font>ProjX <font color="#000080">+ </font>ColWidth<font color="#000080">) &lt;= </font><font color="#800000">319</font><font color="#000080">)
            </font><font color="#FF0000"><b>Then Begin
              </b></font>ZPos <font color="#000080">:= </font>Map<font color="#000080">^[(</font>NewY <font color="#FF0000"><b>Shl </b></font><font color="#800000">8</font><font color="#000080">) + </font>NewX<font color="#000080">]; </font>MapColor <font color="#000080">:= </font>ZPos <font color="#FF0000"><b>Shr </b></font><font color="#800000">1</font><font color="#000080">;
              </font><font color="#FF0000"><b>If </b></font>ZPos <font color="#000080">&lt;= </font><font color="#800000">50 </font><font color="#FF0000"><b>Then </b></font>ZPos <font color="#000080">:= </font><font color="#800000">50</font><font color="#000080">;
              </font>ProjY <font color="#000080">:= ((</font>ViewerZ <font color="#000080">- </font>ZPos<font color="#000080">) </font><font color="#FF0000"><b>Shl </b></font><font color="#800000">5</font><font color="#000080">) </font><font color="#FF0000"><b>Div </b></font>YDepth <font color="#000080">+ </font><font color="#800000">100</font><font color="#000080">;
              </font><font color="#FF0000"><b>If </b></font><font color="#000080">(</font>ProjY <font color="#000080">&gt;= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>And </b></font><font color="#000080">(</font>ProjY <font color="#000080">&lt;= </font><font color="#800000">199</font><font color="#000080">)
                </font><font color="#FF0000"><b>Then Begin For </b></font>BarCount <font color="#000080">:= </font>ProjX <font color="#FF0000"><b>to </b></font><font color="#000080">(</font>ProjX <font color="#000080">+ </font>ColWidth<font color="#000080">) </font><font color="#FF0000"><b>do
                    Begin If </b></font>ProjY <font color="#000080">&lt; </font>Range<font color="#000080">[</font>BarCount<font color="#000080">] </font><font color="#FF0000"><b>Then Begin
             </b></font>InterPollColor<font color="#000080">(</font>ProjY<font color="#000080">, </font>Range<font color="#000080">[</font>BarCount<font color="#000080">], </font>BarCount<font color="#000080">, </font>MapColor<font color="#000080">);
 </font>Range<font color="#000080">[</font>BarCount<font color="#000080">] := </font>ProjY<font color="#000080">; </font><font color="#FF0000"><b>End</b></font><font color="#000080">;</font><font color="#FF0000"><b>End</b></font><font color="#000080">;</font><font color="#FF0000"><b>End</b></font><font color="#000080">;</font><font color="#FF0000"><b>End</b></font><font color="#000080">;</font><font color="#FF0000"><b>End</b></font><font color="#000080">;</font><font color="#FF0000"><b>End</b></font><font color="#000080">;</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Voxelize <font color="#000080">: </font>Real<font color="#000080">;

</font><font color="#FF0000"><b>Var </b></font>Time <font color="#000080">: </font>Longint <font color="#FF0000"><b>Absolute </b></font><font color="#800000">$0000</font><font color="#000080">:</font><font color="#800000">$046c</font><font color="#000080">; </font>StartTime<font color="#000080">, </font>EndTime<font color="#000080">, </font>Frame <font color="#000080">: </font>Longint<font color="#000080">;
  </font>XPos<font color="#000080">, </font>YPos<font color="#000080">, </font>Dir <font color="#000080">: </font>Integer<font color="#000080">; </font>Quit <font color="#000080">: </font>Boolean<font color="#000080">;

</font><font color="#FF0000"><b>Begin
  </b></font>InitGraph<font color="#000080">; </font>InitPalette<font color="#000080">;</font>Quit<font color="#000080">:=</font>False<font color="#000080">;</font>XPos<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;</font>YPos<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;</font>Dir<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;</font>StartTime<font color="#000080">:=</font>Time<font color="#000080">;
  </font>Frame <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>Repeat
    </b></font>Dir <font color="#000080">:= </font>Dir <font color="#FF0000"><b>And </b></font><font color="#800000">511</font><font color="#000080">; </font>Frame <font color="#000080">:= </font>Frame <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
    </font>ClearScreen<font color="#000080">(</font>VScreen<font color="#000080">^); </font>DisplayLandscape<font color="#000080">(</font>XPos <font color="#FF0000"><b>Shr </b></font><font color="#800000">8</font><font color="#000080">, </font>YPos <font color="#FF0000"><b>Shr </b></font><font color="#800000">8</font><font color="#000080">, </font>Dir<font color="#000080">);
    </font>CopyScreen<font color="#000080">(</font>VScreen<font color="#000080">^, </font>Screen<font color="#000080">^);
    </font><font color="#FF0000"><b>If </b></font>KeyPressed <font color="#FF0000"><b>Then Begin
        Case </b></font>ReadKey <font color="#FF0000"><b>of </b></font><font color="#800000">#0 </font><font color="#000080">: </font><font color="#FF0000"><b>Case </b></font>ReadKey <font color="#FF0000"><b>of
             </b></font><font color="#800000">#75 </font><font color="#000080">: </font>Dir <font color="#000080">:= </font>Dir <font color="#000080">- </font><font color="#800000">10</font><font color="#000080">; </font><font color="#800000">#77 </font><font color="#000080">: </font>Dir <font color="#000080">:= </font>Dir <font color="#000080">+ </font><font color="#800000">10</font><font color="#000080">;   </font><font color="#008000"><i>{ Right Key }
             </i></font><font color="#800000">#72 </font><font color="#000080">: </font><font color="#FF0000"><b>Begin </b></font>XPos<font color="#000080">:=(</font>XPos<font color="#000080">+</font>Sine<font color="#000080">[</font>Dir<font color="#000080">] </font><font color="#FF0000"><b>Shl </b></font><font color="#800000">2</font><font color="#000080">);
                   </font>YPos <font color="#000080">:= (</font>YPos <font color="#000080">+ </font>CoSine<font color="#000080">[</font>Dir<font color="#000080">] </font><font color="#FF0000"><b>Shl </b></font><font color="#800000">2</font><font color="#000080">); </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
             </font><font color="#800000">#80 </font><font color="#000080">: </font><font color="#FF0000"><b>Begin </b></font>XPos <font color="#000080">:= (</font>XPos <font color="#000080">- </font>Sine<font color="#000080">[</font>Dir<font color="#000080">] </font><font color="#FF0000"><b>Shl </b></font><font color="#800000">2</font><font color="#000080">);
                     </font>YPos <font color="#000080">:= (</font>YPos <font color="#000080">- </font>CoSine<font color="#000080">[</font>Dir<font color="#000080">] </font><font color="#FF0000"><b>Shl </b></font><font color="#800000">2</font><font color="#000080">); </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
           </font><font color="#FF0000"><b>End</b></font><font color="#000080">; </font><font color="#800000">#27 </font><font color="#000080">: </font>Quit <font color="#000080">:= </font>True<font color="#000080">; </font><font color="#FF0000"><b>End</b></font><font color="#000080">; </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>Until </b></font>Quit<font color="#000080">; </font>EndTime <font color="#000080">:= </font>Time<font color="#000080">; </font>CloseGraph<font color="#000080">; </font>Dispose<font color="#000080">(</font>Map<font color="#000080">);
  </font>Voxelize <font color="#000080">:=  (</font>Frame<font color="#000080">*</font><font color="#800000">18.2</font><font color="#000080">)/(</font>EndTime<font color="#000080">-</font>StartTime<font color="#000080">); </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Begin
  </b></font>MakeSinus<font color="#000080">; </font>CreateMap<font color="#000080">; </font>Writeln<font color="#000080">(</font>Voxelize<font color="#000080">:</font><font color="#800000">5</font><font color="#000080">:</font><font color="#800000">2</font><font color="#000080">, </font><font color="#800000">' Frames per second'</font><font color="#000080">);
</font><font color="#FF0000"><b>End</b></font><font color="#000080">.




</font>This one <font color="#FF0000"><b>is </b></font>a little longer <font color="#000080">(</font>ok<font color="#000080">, </font>alot<font color="#000080">), </font>but it looks cool<font color="#000080">!

     </font>Alex

<font color="#000080">... </font>I haven<font color="#800000">'t lost my mind; it'</font>s backed up <font color="#FF0000"><b>on </b></font>tape somewhere<font color="#000080">!
</font>___ Blue Wave<font color="#000080">/</font>QWK v2<font color="#000080">.</font><font color="#800000">12

</font><font color="#000080">--- </font>WILDMAIL<font color="#000080">!/</font>WC v4<font color="#000080">.</font><font color="#800000">11 
 </font><font color="#000080">* </font>Origin<font color="#000080">: </font>Cormac mac Airt BBS <font color="#000080">- </font>Cincinnati<font color="#000080">, </font>OH <font color="#000080">(</font><font color="#800000">513</font><font color="#000080">) </font><font color="#800000">731</font><font color="#000080">-</font><font color="#800000">4493  </font><font color="#000080">(</font><font color="#800000">1</font><font color="#000080">:</font><font color="#800000">108</font><font color="#000080">/</font><font color="#800000">180.0</font><font color="#000080">)
</font>SEEN<font color="#000080">-</font>BY<font color="#000080">: </font><font color="#800000">108</font><font color="#000080">/</font><font color="#800000">50 155 180 220 325 396</font><font color="#000080">/</font><font color="#800000">1 3615</font><font color="#000080">/</font><font color="#800000">50 51
</font>PATH<font color="#000080">: </font><font color="#800000">108</font><font color="#000080">/</font><font color="#800000">180 220 3615</font><font color="#000080">/</font><font color="#800000">50
</font>                                                                          
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0170.PAS">Original</a><b>]</b></p></body>
</html>
