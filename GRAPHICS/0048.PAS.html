<html>
<head><title> "Gif Source 1" by LIOR BAR-ON</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0048.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt; Can you post the gif source and any other graphic source for doing this

Here is gif format (it doesn't get to full 768&uacute;1024&uacute;256)
or even less, but it is ok.
}

{$R-}{$S-}{$B-}
</i></font><font color="#FF0000"><b>program </b></font>GIF4TP<font color="#000080">;

</font><font color="#FF0000"><b>uses
  </b></font>crt<font color="#000080">, </font>GRAPH<font color="#000080">;

</font><font color="#FF0000"><b>const
  </b></font>ProgramName <font color="#000080">= </font><font color="#800000">'TP4GIF'</font><font color="#000080">;
  </font>ProgramRevision <font color="#000080">= </font><font color="#800000">'2'</font><font color="#000080">;

</font><font color="#FF0000"><b>type
  </b></font>BufferArray <font color="#000080">= </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">63999</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
  </font>BufferPointer <font color="#000080">= ^</font>BufferArray<font color="#000080">;

</font><font color="#FF0000"><b>var
  </b></font>GifFile <font color="#000080">: </font><font color="#FF0000"><b>file of </b></font>BufferArray<font color="#000080">;
  </font>InputFileName <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
  </font>RawBytes <font color="#000080">: </font>BufferPointer<font color="#000080">;   </font><font color="#008000"><i>{ The heap array to hold it, raw    }
  </i></font>Buffer <font color="#000080">: </font>BufferPointer<font color="#000080">;     </font><font color="#008000"><i>{ The Buffer data stream, unblocked }
  </i></font>Buffer2 <font color="#000080">: </font>BufferPointer<font color="#000080">;    </font><font color="#008000"><i>{ More Buffer data stream if needed }
  </i></font>Byteoffset<font color="#000080">,                 </font><font color="#008000"><i>{ Computed byte position in Buffer array }
  </i></font>BitIndex                    <font color="#008000"><i>{ Bit offset of next code in Buffer array }
   </i></font><font color="#000080">: </font>longint<font color="#000080">;

  </font>Width<font color="#000080">,      </font><font color="#008000"><i>{Read from GIF header, image width}
  </i></font>Height<font color="#000080">,     </font><font color="#008000"><i>{ ditto, image height}
  </i></font>LeftOfs<font color="#000080">,    </font><font color="#008000"><i>{ ditto, image offset from left}
  </i></font>TopOfs<font color="#000080">,     </font><font color="#008000"><i>{ ditto, image offset from top}
  </i></font>RWidth<font color="#000080">,     </font><font color="#008000"><i>{ ditto, Buffer width}
  </i></font>RHeight<font color="#000080">,    </font><font color="#008000"><i>{ ditto, Buffer height}
  </i></font>ClearCode<font color="#000080">,  </font><font color="#008000"><i>{GIF clear code}
  </i></font>EOFCode<font color="#000080">,    </font><font color="#008000"><i>{GIF end-of-information code}
  </i></font>OutCount<font color="#000080">,   </font><font color="#008000"><i>{Decompressor output 'stack count'}
  </i></font>MaxCode<font color="#000080">,    </font><font color="#008000"><i>{Decompressor limiting value for current code size}
  </i></font>CurCode<font color="#000080">,    </font><font color="#008000"><i>{Decompressor variable}
  </i></font>OldCode<font color="#000080">,    </font><font color="#008000"><i>{Decompressor variable}
  </i></font>InCode<font color="#000080">,     </font><font color="#008000"><i>{Decompressor variable}
  </i></font>FirstFree<font color="#000080">,  </font><font color="#008000"><i>{First free code, generated per GIF spec}
  </i></font>FreeCode<font color="#000080">,   </font><font color="#008000"><i>{Decompressor, next free slot in hash table}
  </i></font>RawIndex<font color="#000080">,     </font><font color="#008000"><i>{Array pointers used during file read}
  </i></font>BufferPtr<font color="#000080">,
  </font>XC<font color="#000080">,</font>YC<font color="#000080">,      </font><font color="#008000"><i>{Screen X and Y coords of current pixel}
  </i></font>ReadMask<font color="#000080">,   </font><font color="#008000"><i>{Code AND mask for current code size}
  </i></font>I           <font color="#008000"><i>{Loop counter, what else?}
  </i></font><font color="#000080">:</font>word<font color="#000080">;

  </font>Interlace<font color="#000080">,  </font><font color="#008000"><i>{true if interlaced image}
  </i></font>AnotherBuffer<font color="#000080">, </font><font color="#008000"><i>{true if file &gt; 64000 bytes}
  </i></font>ColorMap    <font color="#008000"><i>{true if colormap present}
  </i></font><font color="#000080">: </font>boolean<font color="#000080">;

  </font>ch <font color="#000080">: </font>char<font color="#000080">;
  </font>a<font color="#000080">,              </font><font color="#008000"><i>{Utility}
  </i></font>Resolution<font color="#000080">,     </font><font color="#008000"><i>{Resolution, read from GIF header}
  </i></font>BitsPerPixel<font color="#000080">,   </font><font color="#008000"><i>{Bits per pixel, read from GIF header}
  </i></font>Background<font color="#000080">,     </font><font color="#008000"><i>{Background color, read from GIF header}
  </i></font>ColorMapSize<font color="#000080">,   </font><font color="#008000"><i>{Length of color map, from GIF header}
  </i></font>CodeSize<font color="#000080">,       </font><font color="#008000"><i>{Code size, read from GIF header}
  </i></font>InitCodeSize<font color="#000080">,   </font><font color="#008000"><i>{Starting code size, used during Clear}
  </i></font>FinChar<font color="#000080">,        </font><font color="#008000"><i>{Decompressor variable}
  </i></font>Pass<font color="#000080">,           </font><font color="#008000"><i>{Used by video output if interlaced pic}
  </i></font>BitMask<font color="#000080">,        </font><font color="#008000"><i>{AND mask for data size}
  </i></font>R<font color="#000080">,</font>G<font color="#000080">,</font>B
  <font color="#000080">:</font>byte<font color="#000080">;

    </font><font color="#008000"><i>{The hash table used by the decompressor}
  </i></font>Prefix<font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">4095</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>word<font color="#000080">;
  </font>Suffix<font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">4095</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;

    </font><font color="#008000"><i>{An output array used by the decompressor}
  </i></font>PixelValue <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">1024</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;

    </font><font color="#008000"><i>{The color map, read from the GIF header}
  </i></font>Red<font color="#000080">,</font>Green<font color="#000080">,</font>Blue<font color="#000080">: </font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
  </font>MyPalette <font color="#000080">: </font>PaletteType<font color="#000080">;

  </font>TempString <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Const
 </b></font>MaxCodes<font color="#000080">: </font><font color="#FF0000"><b>Array </b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">9</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Word <font color="#000080">= (</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">8</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">$20</font><font color="#000080">,</font><font color="#800000">$40</font><font color="#000080">,</font><font color="#800000">$80</font><font color="#000080">,</font><font color="#800000">$100</font><font color="#000080">,</font><font color="#800000">$200</font><font color="#000080">,</font><font color="#800000">$400</font><font color="#000080">,</font><font color="#800000">$800</font><font color="#000080">);
 </font>CodeMask<font color="#000080">:</font><font color="#FF0000"><b>Array </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">4</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">= (</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">7</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">);
 </font>PowersOf2<font color="#000080">: </font><font color="#FF0000"><b>Array </b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">8</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>word<font color="#000080">=(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">8</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">32</font><font color="#000080">,</font><font color="#800000">64</font><font color="#000080">,</font><font color="#800000">128</font><font color="#000080">,</font><font color="#800000">256</font><font color="#000080">);
 </font>Masks<font color="#000080">: </font><font color="#FF0000"><b>Array </b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">9</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>integer <font color="#000080">= (</font><font color="#800000">7</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">$1f</font><font color="#000080">,</font><font color="#800000">$3f</font><font color="#000080">,</font><font color="#800000">$7f</font><font color="#000080">,</font><font color="#800000">$ff</font><font color="#000080">,</font><font color="#800000">$1ff</font><font color="#000080">,</font><font color="#800000">$3ff</font><font color="#000080">,</font><font color="#800000">$7ff</font><font color="#000080">,</font><font color="#800000">$fff</font><font color="#000080">);
 </font>BufferSize <font color="#000080">: </font>Word <font color="#000080">= </font><font color="#800000">64000</font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>NewExtension<font color="#000080">(</font>FileName<font color="#000080">,</font>Extension <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">) : </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
</font><font color="#008000"><i>{
Places a new extension on to the file name.
}
</i></font><font color="#FF0000"><b>var
  </b></font>I <font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  if </b></font><font color="#000080">(</font>Extension<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] = </font><font color="#800000">'.'</font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font>delete<font color="#000080">(</font>Extension<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
  </font>delete<font color="#000080">(</font>Extension<font color="#000080">,</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">251</font><font color="#000080">);
  </font>I <font color="#000080">:= </font>pos<font color="#000080">(</font><font color="#800000">'.'</font><font color="#000080">,</font>FileName<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>I <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
  begin
    while </b></font><font color="#000080">(</font>length<font color="#000080">(</font>FileName<font color="#000080">) &gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>FileName<font color="#000080">[</font>length<font color="#000080">(</font>FileName<font color="#000080">)] = </font><font color="#800000">' '</font><font color="#000080">)
      </font><font color="#FF0000"><b>do </b></font>delete<font color="#000080">(</font>FileName<font color="#000080">,</font>length<font color="#000080">(</font>FileName<font color="#000080">),</font><font color="#800000">1</font><font color="#000080">);
    </font>NewExtension <font color="#000080">:= </font>FileName <font color="#000080">+ </font><font color="#800000">'.' </font><font color="#000080">+ </font>Extension<font color="#000080">;
  </font><font color="#FF0000"><b>end else begin
    </b></font>delete<font color="#000080">(</font>FileName<font color="#000080">,</font>I <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">254 </font><font color="#000080">- </font>I<font color="#000080">);
    </font>NewExtension <font color="#000080">:= </font>FileName <font color="#000080">+ </font>Extension<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ NewExtension }

</i></font><font color="#FF0000"><b>function </b></font>Min<font color="#000080">(</font>I<font color="#000080">,</font>J <font color="#000080">: </font>longint<font color="#000080">) : </font>longint<font color="#000080">;
</font><font color="#FF0000"><b>begin
  if </b></font><font color="#000080">(</font>I <font color="#000080">&lt; </font>J<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>Min <font color="#000080">:= </font>I <font color="#FF0000"><b>else </b></font>Min <font color="#000080">:= </font>J<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ Min }

</i></font><font color="#FF0000"><b>procedure </b></font>AllocMem<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>P <font color="#000080">: </font>BufferPointer<font color="#000080">);
</font><font color="#FF0000"><b>var
  </b></font>ASize <font color="#000080">: </font>longint<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>ASize <font color="#000080">:= </font>MaxAvail<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>ASize <font color="#000080">&lt; </font>BufferSize<font color="#000080">) </font><font color="#FF0000"><b>then begin
    </b></font>Textmode<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">);
    </font>writeln<font color="#000080">(</font><font color="#800000">'Insufficient memory available!'</font><font color="#000080">);
    </font>halt<font color="#000080">;
  </font><font color="#FF0000"><b>end else </b></font>getmem<font color="#000080">(</font>P<font color="#000080">,</font>BufferSize<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ AllocMem }

</i></font><font color="#FF0000"><b>function </b></font>Getbyte <font color="#000080">: </font>byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
  if </b></font><font color="#000080">(</font>RawIndex <font color="#000080">&gt;= </font>BufferSize<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>exit<font color="#000080">;
  </font>Getbyte <font color="#000080">:= </font>RawBytes<font color="#000080">^[</font>RawIndex<font color="#000080">];
  </font>inc<font color="#000080">(</font>RawIndex<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>Getword <font color="#000080">: </font>word<font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>W <font color="#000080">: </font>word<font color="#000080">;
</font><font color="#FF0000"><b>begin
  if </b></font><font color="#000080">(</font>succ<font color="#000080">(</font>RawIndex<font color="#000080">) &gt;= </font>BufferSize<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>exit<font color="#000080">;
  </font>move<font color="#000080">(</font>RawBytes<font color="#000080">^[</font>RawIndex<font color="#000080">],</font>W<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">);
  </font>inc<font color="#000080">(</font>RawIndex<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">);
  </font>Getword <font color="#000080">:= </font>W<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ GetWord }

</i></font><font color="#FF0000"><b>procedure </b></font>ReadBuffer<font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>BlockLength <font color="#000080">: </font>byte<font color="#000080">;
  </font>I<font color="#000080">,</font>IOR <font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>BufferPtr <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>Repeat
    </b></font>BlockLength <font color="#000080">:= </font>Getbyte<font color="#000080">;
    </font><font color="#FF0000"><b>For </b></font>I <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>Blocklength<font color="#000080">-</font><font color="#800000">1 </font><font color="#FF0000"><b>do
    begin
      if </b></font>RawIndex <font color="#000080">= </font>BufferSize <font color="#FF0000"><b>then
      begin
        </b></font><font color="#008000"><i>{$I-}
        </i></font>Read <font color="#000080">(</font>GIFFile<font color="#000080">,</font>RawBytes<font color="#000080">^);
        </font><font color="#008000"><i>{$I+}
        </i></font>IOR <font color="#000080">:= </font>IOResult<font color="#000080">;
        </font>RawIndex <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>if not </b></font>AnotherBuffer
        <font color="#FF0000"><b>then </b></font>Buffer<font color="#000080">^[</font>BufferPtr<font color="#000080">] := </font>Getbyte
        <font color="#FF0000"><b>else </b></font>Buffer2<font color="#000080">^[</font>BufferPtr<font color="#000080">] := </font>Getbyte<font color="#000080">;
      </font>BufferPtr <font color="#000080">:= </font>Succ <font color="#000080">(</font>BufferPtr<font color="#000080">);
      </font><font color="#FF0000"><b>if </b></font>BufferPtr<font color="#000080">=</font>BufferSize <font color="#FF0000"><b>then begin
        </b></font>AnotherBuffer <font color="#000080">:= </font>true<font color="#000080">;
        </font>BufferPtr <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
        </font>AllocMem <font color="#000080">(</font>Buffer2<font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>Until </b></font>Blocklength<font color="#000080">=</font><font color="#800000">0</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ ReadBuffer }

</i></font><font color="#FF0000"><b>procedure </b></font>InitEGA<font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>Driver<font color="#000080">,</font>Mode <font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>DetectGraph<font color="#000080">(</font>Driver<font color="#000080">,</font>Mode<font color="#000080">);
  </font>InitGraph<font color="#000080">(</font>Driver<font color="#000080">,</font>Mode<font color="#000080">,</font><font color="#800000">'e:\bp\bgi'</font><font color="#000080">);
  </font>SetAllPalette<font color="#000080">(</font>MyPalette<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>Background <font color="#000080">&lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then begin
    </b></font>SetFillStyle<font color="#000080">(</font>SolidFill<font color="#000080">,</font>Background<font color="#000080">);
    </font>bar<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>Width<font color="#000080">,</font>Height<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ InitEGA }

</i></font><font color="#FF0000"><b>procedure </b></font>DetColor<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>PValue <font color="#000080">: </font>byte<font color="#000080">; </font>MapValue <font color="#000080">: </font>Byte<font color="#000080">);
</font><font color="#008000"><i>{
Determine the palette value corresponding to the GIF colormap intensity
value.
}
</i></font><font color="#FF0000"><b>var
  </b></font>Local <font color="#000080">: </font>byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>PValue <font color="#000080">:= </font>MapValue <font color="#FF0000"><b>div </b></font><font color="#800000">64</font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>PValue <font color="#000080">= </font><font color="#800000">1</font><font color="#000080">)
    </font><font color="#FF0000"><b>then </b></font>PValue <font color="#000080">:= </font><font color="#800000">2
    </font><font color="#FF0000"><b>else if </b></font><font color="#000080">(</font>PValue <font color="#000080">= </font><font color="#800000">2</font><font color="#000080">)
      </font><font color="#FF0000"><b>then </b></font>PValue <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ DetColor }

</i></font><font color="#FF0000"><b>procedure </b></font>Init<font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>I <font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>XC <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;          </font><font color="#008000"><i>{X and Y screen coords back to home}
  </i></font>YC <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>Pass <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;        </font><font color="#008000"><i>{Interlace pass counter back to 0}
  </i></font>BitIndex <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;   </font><font color="#008000"><i>{Point to the start of the Buffer data stream}
  </i></font>RawIndex <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;      </font><font color="#008000"><i>{Mock file read pointer back to 0}
  </i></font>AnotherBuffer <font color="#000080">:= </font>false<font color="#000080">;    </font><font color="#008000"><i>{Over 64000 flag off}
  </i></font>AllocMem<font color="#000080">(</font>Buffer<font color="#000080">);
  </font>AllocMem<font color="#000080">(</font>RawBytes<font color="#000080">);
  </font>InputFileName <font color="#000080">:= </font>NewExtension<font color="#000080">(</font>InputFileName<font color="#000080">,</font><font color="#800000">'GIF'</font><font color="#000080">);
  </font><font color="#008000"><i>{$I-}
  </i></font>Assign<font color="#000080">(</font>giffile<font color="#000080">,</font>InputFileName<font color="#000080">);
  </font>Reset<font color="#000080">(</font>giffile<font color="#000080">);
  </font>I <font color="#000080">:= </font>IOResult<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>I <font color="#000080">&lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then begin
    </b></font>textmode<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">);
    </font>writeln<font color="#000080">(</font><font color="#800000">'Error opening file '</font><font color="#000080">,</font>InputFileName<font color="#000080">,</font><font color="#800000">'. Press any key '</font><font color="#000080">);
    </font>readln<font color="#000080">;
    </font>halt<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>read<font color="#000080">(</font>GIFFile<font color="#000080">,</font>RawBytes<font color="#000080">^);
  </font>I <font color="#000080">:= </font>IOResult<font color="#000080">;
</font><font color="#008000"><i>{$I+}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ Init }

</i></font><font color="#FF0000"><b>procedure </b></font>ReadGifHeader<font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>I <font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>TempString <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>I <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">6 </font><font color="#FF0000"><b>do </b></font>TempString <font color="#000080">:= </font>TempString <font color="#000080">+ </font>chr<font color="#000080">(</font>Getbyte<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>TempString <font color="#000080">&lt;&gt; </font><font color="#800000">'GIF87a'</font><font color="#000080">) </font><font color="#FF0000"><b>then begin
    </b></font>textmode<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">);
    </font>writeln<font color="#000080">(</font><font color="#800000">'Not a GIF file, or header read error. Press enter.'</font><font color="#000080">);
    </font>readln<font color="#000080">;
    </font>halt<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{
Get variables from the GIF screen descriptor
}
  </i></font>RWidth <font color="#000080">:= </font>Getword<font color="#000080">;         </font><font color="#008000"><i>{The Buffer width and height}
  </i></font>RHeight <font color="#000080">:= </font>Getword<font color="#000080">;
</font><font color="#008000"><i>{
Get the packed byte immediately following and decode it
}
  </i></font>B <font color="#000080">:= </font>Getbyte<font color="#000080">;
  </font>Colormap <font color="#000080">:= (</font>B <font color="#FF0000"><b>and </b></font><font color="#800000">$80 </font><font color="#000080">= </font><font color="#800000">$80</font><font color="#000080">);
  </font>Resolution <font color="#000080">:= </font>B <font color="#FF0000"><b>and </b></font><font color="#800000">$70 </font><font color="#FF0000"><b>shr </b></font><font color="#800000">5 </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
  </font>BitsPerPixel <font color="#000080">:= </font>B <font color="#FF0000"><b>and </b></font><font color="#800000">7 </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
  </font>ColorMapSize <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>shl </b></font>BitsPerPixel<font color="#000080">;
  </font>BitMask <font color="#000080">:= </font>CodeMask<font color="#000080">[</font>BitsPerPixel<font color="#000080">];
  </font>Background <font color="#000080">:= </font>Getbyte<font color="#000080">;
  </font>B <font color="#000080">:= </font>Getbyte<font color="#000080">;         </font><font color="#008000"><i>{Skip byte of 0's}
{
Compute size of colormap, and read in the global one if there. Compute
values to be used when we set up the EGA palette
}
  </i></font>MyPalette<font color="#000080">.</font>Size <font color="#000080">:= </font>Min<font color="#000080">(</font>ColorMapSize<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>Colormap <font color="#FF0000"><b>then begin
    for </b></font>I <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>pred<font color="#000080">(</font>ColorMapSize<font color="#000080">) </font><font color="#FF0000"><b>do begin
      </b></font>Red<font color="#000080">[</font>I<font color="#000080">] := </font>Getbyte<font color="#000080">;
      </font>Green<font color="#000080">[</font>I<font color="#000080">] := </font>Getbyte<font color="#000080">;
      </font>Blue<font color="#000080">[</font>I<font color="#000080">] := </font>Getbyte<font color="#000080">;
      </font>DetColor<font color="#000080">(</font>R<font color="#000080">,</font>Red<font color="#000080">[</font>I<font color="#000080">]);
      </font>DetColor<font color="#000080">(</font>G<font color="#000080">,</font>Green <font color="#000080">[</font>I<font color="#000080">]);
      </font>DetColor<font color="#000080">(</font>B<font color="#000080">,</font>Blue <font color="#000080">[</font>I<font color="#000080">]);
      </font>MyPalette<font color="#000080">.</font>Colors<font color="#000080">[</font>I<font color="#000080">] := </font>B <font color="#FF0000"><b>and </b></font><font color="#800000">1 </font><font color="#000080">+
                    ( </font><font color="#800000">2 </font><font color="#000080">* (</font>G <font color="#FF0000"><b>and </b></font><font color="#800000">1</font><font color="#000080">)) + ( </font><font color="#800000">4 </font><font color="#000080">* (</font>R <font color="#FF0000"><b>and </b></font><font color="#800000">1</font><font color="#000080">)) + (</font><font color="#800000">8 </font><font color="#000080">* (</font>B <font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">)) +
                    (</font><font color="#800000">16 </font><font color="#000080">* (</font>G <font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">)) + (</font><font color="#800000">32 </font><font color="#000080">* (</font>R <font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">));
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{
Now read in values from the image descriptor
}
  </i></font>B <font color="#000080">:= </font>Getbyte<font color="#000080">;  </font><font color="#008000"><i>{skip image seperator}
  </i></font>Leftofs <font color="#000080">:= </font>Getword<font color="#000080">;
  </font>Topofs <font color="#000080">:= </font>Getword<font color="#000080">;
  </font>Width <font color="#000080">:= </font>Getword<font color="#000080">;
  </font>Height <font color="#000080">:= </font>Getword<font color="#000080">;
  </font>A <font color="#000080">:= </font>Getbyte<font color="#000080">;
  </font>Interlace <font color="#000080">:= (</font>A <font color="#FF0000"><b>and </b></font><font color="#800000">$40 </font><font color="#000080">= </font><font color="#800000">$40</font><font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>Interlace <font color="#FF0000"><b>then begin
    </b></font>textmode<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">);
    </font>writeln<font color="#000080">(</font>ProgramName<font color="#000080">,</font><font color="#800000">' is unable to display interlaced GIF pictures.'</font><font color="#000080">);
    </font>halt<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ ReadGifHeader }

</i></font><font color="#FF0000"><b>procedure </b></font>PrepDecompressor<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Codesize <font color="#000080">:= </font>Getbyte<font color="#000080">;
  </font>ClearCode <font color="#000080">:= </font>PowersOf2<font color="#000080">[</font>Codesize<font color="#000080">];
  </font>EOFCode <font color="#000080">:= </font>ClearCode <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
  </font>FirstFree <font color="#000080">:= </font>ClearCode <font color="#000080">+ </font><font color="#800000">2</font><font color="#000080">;
  </font>FreeCode <font color="#000080">:= </font>FirstFree<font color="#000080">;
  </font>inc<font color="#000080">(</font>Codesize<font color="#000080">); </font><font color="#008000"><i>{ since zero means one... }
  </i></font>InitCodeSize <font color="#000080">:= </font>Codesize<font color="#000080">;
  </font>Maxcode <font color="#000080">:= </font>Maxcodes<font color="#000080">[</font>Codesize <font color="#000080">- </font><font color="#800000">2</font><font color="#000080">];
  </font>ReadMask <font color="#000080">:= </font>Masks<font color="#000080">[</font>Codesize <font color="#000080">- </font><font color="#800000">3</font><font color="#000080">];
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ PrepDecompressor }

</i></font><font color="#FF0000"><b>procedure </b></font>DisplayGIF<font color="#000080">;
</font><font color="#008000"><i>{
Decompress and display the GIF data.
}
</i></font><font color="#FF0000"><b>var
  </b></font>Code <font color="#000080">: </font>word<font color="#000080">;

  </font><font color="#FF0000"><b>procedure </b></font>DoClear<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>CodeSize <font color="#000080">:= </font>InitCodeSize<font color="#000080">;
    </font>MaxCode <font color="#000080">:= </font>MaxCodes<font color="#000080">[</font>CodeSize<font color="#000080">-</font><font color="#800000">2</font><font color="#000080">];
    </font>FreeCode <font color="#000080">:= </font>FirstFree<font color="#000080">;
    </font>ReadMask <font color="#000080">:= </font>Masks<font color="#000080">[</font>CodeSize<font color="#000080">-</font><font color="#800000">3</font><font color="#000080">];
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ DoClear }

  </i></font><font color="#FF0000"><b>procedure </b></font>ReadCode<font color="#000080">;
  </font><font color="#FF0000"><b>var
    </b></font>Raw <font color="#000080">: </font>longint<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    if </b></font><font color="#000080">(</font>CodeSize <font color="#000080">&gt;= </font><font color="#800000">8</font><font color="#000080">) </font><font color="#FF0000"><b>then begin
      </b></font>move<font color="#000080">(</font>Buffer<font color="#000080">^[</font>BitIndex <font color="#FF0000"><b>shr </b></font><font color="#800000">3</font><font color="#000080">],</font>Raw<font color="#000080">,</font><font color="#800000">3</font><font color="#000080">);
      </font>Code <font color="#000080">:= (</font>Raw <font color="#FF0000"><b>shr </b></font><font color="#000080">(</font>BitIndex <font color="#FF0000"><b>mod </b></font><font color="#800000">8</font><font color="#000080">)) </font><font color="#FF0000"><b>and </b></font>ReadMask<font color="#000080">;
    </font><font color="#FF0000"><b>end else begin
      </b></font>move<font color="#000080">(</font>Buffer<font color="#000080">^[</font>BitIndex <font color="#FF0000"><b>shr </b></font><font color="#800000">3</font><font color="#000080">],</font>Code<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">);
      </font>Code <font color="#000080">:= (</font>Code <font color="#FF0000"><b>shr </b></font><font color="#000080">(</font>BitIndex <font color="#FF0000"><b>mod </b></font><font color="#800000">8</font><font color="#000080">)) </font><font color="#FF0000"><b>and </b></font>ReadMask<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font>AnotherBuffer <font color="#FF0000"><b>then begin
      </b></font>ByteOffset <font color="#000080">:= </font>BitIndex <font color="#FF0000"><b>shr </b></font><font color="#800000">3</font><font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>ByteOffset <font color="#000080">&gt;= </font><font color="#800000">63000</font><font color="#000080">) </font><font color="#FF0000"><b>then begin
        </b></font>move<font color="#000080">(</font>Buffer<font color="#000080">^[</font>Byteoffset<font color="#000080">],</font>Buffer<font color="#000080">^[</font><font color="#800000">0</font><font color="#000080">],</font>BufferSize<font color="#000080">-</font>Byteoffset<font color="#000080">);
        </font>move<font color="#000080">(</font>Buffer2<font color="#000080">^[</font><font color="#800000">0</font><font color="#000080">],</font>Buffer<font color="#000080">^[</font>BufferSize<font color="#000080">-</font>Byteoffset<font color="#000080">],</font><font color="#800000">63000</font><font color="#000080">);
        </font>BitIndex <font color="#000080">:= </font>BitIndex <font color="#FF0000"><b>mod </b></font><font color="#800000">8</font><font color="#000080">;
        </font>FreeMem<font color="#000080">(</font>Buffer2<font color="#000080">,</font>BufferSize<font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>BitIndex <font color="#000080">:= </font>BitIndex <font color="#000080">+ </font>CodeSize<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ ReadCode }

  </i></font><font color="#FF0000"><b>procedure </b></font>OutputPixel<font color="#000080">(</font>Color <font color="#000080">: </font>byte<font color="#000080">);
  </font><font color="#FF0000"><b>begin
    </b></font>putpixel<font color="#000080">(</font>XC<font color="#000080">,</font>YC<font color="#000080">,</font>Color<font color="#000080">); </font><font color="#008000"><i>{ about 3x faster than using the DOS interrupt! }
    </i></font>inc<font color="#000080">(</font>XC<font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>XC <font color="#000080">= </font>Width<font color="#000080">) </font><font color="#FF0000"><b>then begin
      </b></font>XC <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font>inc<font color="#000080">(</font>YC<font color="#000080">);
      </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>YC <font color="#FF0000"><b>mod </b></font><font color="#800000">10 </font><font color="#000080">= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font>keypressed <font color="#FF0000"><b>and </b></font><font color="#000080">(</font>readkey <font color="#000080">= </font><font color="#800000">#27</font><font color="#000080">) </font><font color="#FF0000"><b>then begin
        </b></font>textmode<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">);  </font><font color="#008000"><i>{ let the user bail out }
        </i></font>halt<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ OutputPixel }



</i></font><font color="#FF0000"><b>begin </b></font><font color="#008000"><i>{ DisplayGIF }
  </i></font>CurCode <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">; </font><font color="#008000"><i>{ not initted anywhere else... don't know why }
  </i></font>OldCode <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">; </font><font color="#008000"><i>{ not initted anywhere else... don't know why }
  </i></font>FinChar <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">; </font><font color="#008000"><i>{ not initted anywhere else... don't know why }
  </i></font>OutCount <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>DoClear<font color="#000080">;      </font><font color="#008000"><i>{ not initted anywhere else... don't know why }
  </i></font><font color="#FF0000"><b>repeat
    </b></font>ReadCode<font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>Code <font color="#000080">&lt;&gt; </font>EOFCode<font color="#000080">) </font><font color="#FF0000"><b>then begin
      if </b></font><font color="#000080">(</font>Code <font color="#000080">= </font>ClearCode<font color="#000080">) </font><font color="#FF0000"><b>then begin </b></font><font color="#008000"><i>{ restart decompressor }
        </i></font>DoClear<font color="#000080">;
        </font>ReadCode<font color="#000080">;
        </font>CurCode <font color="#000080">:= </font>Code<font color="#000080">;
        </font>OldCode <font color="#000080">:= </font>Code<font color="#000080">;
        </font>FinChar <font color="#000080">:= </font>Code <font color="#FF0000"><b>and </b></font>BitMask<font color="#000080">;
        </font>OutputPixel<font color="#000080">(</font>FinChar<font color="#000080">);
      </font><font color="#FF0000"><b>end else begin        </b></font><font color="#008000"><i>{ must be data: save same as CurCode and InCode }
        </i></font>CurCode <font color="#000080">:= </font>Code<font color="#000080">;
        </font>InCode <font color="#000080">:= </font>Code<font color="#000080">;
</font><font color="#008000"><i>{ if &gt;= FreeCode, not in hash table yet; repeat the last character decoded }
        </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>Code <font color="#000080">&gt;= </font>FreeCode<font color="#000080">) </font><font color="#FF0000"><b>then begin
          </b></font>CurCode <font color="#000080">:= </font>OldCode<font color="#000080">;
          </font>PixelValue<font color="#000080">[</font>OutCount<font color="#000080">] := </font>FinChar<font color="#000080">;
          </font>inc<font color="#000080">(</font>OutCount<font color="#000080">);
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{
Unless this code is raw data, pursue the chain pointed to by CurCode
through the hash table to its end; each code in the chain puts its
associated output code on the output queue.
}
        </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>CurCode <font color="#000080">&gt; </font>BitMask<font color="#000080">) </font><font color="#FF0000"><b>then repeat
          </b></font>PixelValue<font color="#000080">[</font>OutCount<font color="#000080">] := </font>Suffix<font color="#000080">[</font>CurCode<font color="#000080">];
          </font>inc<font color="#000080">(</font>OutCount<font color="#000080">);
          </font>CurCode <font color="#000080">:= </font>Prefix<font color="#000080">[</font>CurCode<font color="#000080">];
        </font><font color="#FF0000"><b>until </b></font><font color="#000080">(</font>CurCode <font color="#000080">&lt;= </font>BitMask<font color="#000080">);
</font><font color="#008000"><i>{
The last code in the chain is raw data.
}
        </i></font>FinChar <font color="#000080">:= </font>CurCode <font color="#FF0000"><b>and </b></font>BitMask<font color="#000080">;
        </font>PixelValue<font color="#000080">[</font>OutCount<font color="#000080">] := </font>FinChar<font color="#000080">;
        </font>inc<font color="#000080">(</font>OutCount<font color="#000080">);
</font><font color="#008000"><i>{
Output the pixels. They're stacked Last In First Out.
}
        </i></font><font color="#FF0000"><b>for </b></font>I <font color="#000080">:= </font>pred<font color="#000080">(</font>OutCount<font color="#000080">) </font><font color="#FF0000"><b>downto </b></font><font color="#800000">0 </font><font color="#FF0000"><b>do </b></font>OutputPixel<font color="#000080">(</font>PixelValue<font color="#000080">[</font>I<font color="#000080">]);
        </font>OutCount <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
</font><font color="#008000"><i>{
Build the hash table on-the-fly.
}
        </i></font>Prefix<font color="#000080">[</font>FreeCode<font color="#000080">] := </font>OldCode<font color="#000080">;
        </font>Suffix<font color="#000080">[</font>FreeCode<font color="#000080">] := </font>FinChar<font color="#000080">;
        </font>OldCode <font color="#000080">:= </font>InCode<font color="#000080">;
</font><font color="#008000"><i>{
Point to the next slot in the table. If we exceed the current MaxCode
value, increment the code size unless it's already 12. if it is, do
nothing: the next code decompressed better be CLEAR
}
        </i></font>inc<font color="#000080">(</font>FreeCode<font color="#000080">);
        </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>FreeCode <font color="#000080">&gt;= </font>MaxCode<font color="#000080">) </font><font color="#FF0000"><b>then begin
          if </b></font><font color="#000080">(</font>CodeSize <font color="#000080">&lt; </font><font color="#800000">12</font><font color="#000080">) </font><font color="#FF0000"><b>then begin
            </b></font>inc<font color="#000080">(</font>CodeSize<font color="#000080">);
            </font>MaxCode <font color="#000080">:= </font>MaxCode <font color="#000080">* </font><font color="#800000">2</font><font color="#000080">;
            </font>ReadMask <font color="#000080">:= </font>Masks<font color="#000080">[</font>CodeSize <font color="#000080">- </font><font color="#800000">3</font><font color="#000080">];
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{not Clear}
    </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{not EOFCode}
  </i></font><font color="#FF0000"><b>until </b></font><font color="#000080">(</font>Code <font color="#000080">= </font>EOFCode<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ DisplayGIF }

</i></font><font color="#FF0000"><b>begin </b></font><font color="#008000"><i>{ TP4GIF }
  </i></font>writeln<font color="#000080">(</font>ProgramName<font color="#000080">,</font><font color="#800000">' Rev '</font><font color="#000080">,</font>ProgramRevision<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>paramcount <font color="#000080">&gt; </font><font color="#800000">0</font><font color="#000080">)
    </font><font color="#FF0000"><b>then </b></font>TempString <font color="#000080">:= </font>paramstr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">)
  </font><font color="#FF0000"><b>else begin
    </b></font>write<font color="#000080">(</font><font color="#800000">' &gt; '</font><font color="#000080">);
    </font>readln<font color="#000080">(</font>TempString<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>InputFileName <font color="#000080">:= </font>TempString<font color="#000080">;
  </font>Init<font color="#000080">;
  </font>ReadGifHeader<font color="#000080">;
  </font>PrepDecompressor<font color="#000080">;
  </font>ReadBuffer<font color="#000080">;
  </font>FreeMem<font color="#000080">(</font>RawBytes<font color="#000080">,</font>BufferSize<font color="#000080">);
  </font>InitEGA<font color="#000080">;
  </font>DisplayGIF<font color="#000080">;
  </font>SetAllPalette<font color="#000080">(</font>MyPalette<font color="#000080">);
  </font>close<font color="#000080">(</font>GifFile<font color="#000080">);
  </font>Ch <font color="#000080">:= </font>readkey<font color="#000080">;
  </font>textmode<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">);
  </font>freemem<font color="#000080">(</font>Buffer<font color="#000080">,</font>BufferSize<font color="#000080">);        </font><font color="#008000"><i>{ totally pointless, but it's good form }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0048.PAS">Original</a><b>]</b></p></body>
</html>
