<html>
<head><title> "A Color Star Field" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0005.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{-------------------------- SCHNIPP -----------------------------}

{STARSCROLL.PAS geaenderte Fassung  }

{$A+,B-,D-,E-,F+,I+,L-,N-,O-,R-,S-,V-}
{$M 64000,0,655360}

</i></font><font color="#FF0000"><b>USES </b></font>crt<font color="#000080">,</font>graph<font color="#000080">,</font>BGIDriv<font color="#000080">;                 </font><font color="#008000"><i>{ich binde die Treiber ein}

</i></font><font color="#FF0000"><b>CONST </b></font>MaxStars<font color="#000080">=</font><font color="#800000">500</font><font color="#000080">;                     </font><font color="#008000"><i>{auf meinem 386-25er muss ich in
                                        der geaenderten Fassung schon 500
                                        Sterne eintragen, damit es nur noch
                                        ein wenig schneller ist als die alte
                                        Fassung mit 100 Sternen ;-)}

</i></font><font color="#FF0000"><b>TYPE </b></font>Punkt<font color="#000080">=</font><font color="#FF0000"><b>ARRAY</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">3</font><font color="#000080">] </font><font color="#FF0000"><b>OF </b></font>INTEGER<font color="#000080">;     </font><font color="#008000"><i>{Siehe ganz unten Move()}

</i></font><font color="#FF0000"><b>VAR
   </b></font>gd<font color="#000080">,</font>gm<font color="#000080">,</font>mpx<font color="#000080">,</font>mpy<font color="#000080">,</font>scal<font color="#000080">,</font>a<font color="#000080">,</font>b<font color="#000080">,</font>e<font color="#000080">:</font>integer<font color="#000080">;
   </font>Stars1<font color="#000080">,</font>Stars<font color="#000080">:</font><font color="#FF0000"><b>ARRAY</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font>MaxStars<font color="#000080">] </font><font color="#FF0000"><b>OF </b></font>Punkt<font color="#000080">;

   </font>mx<font color="#000080">,</font>my<font color="#000080">,</font>m2x<font color="#000080">,</font>m2y<font color="#000080">,</font>sop<font color="#000080">,                   </font><font color="#008000"><i>{siehe Init}
   </i></font>act<font color="#000080">:</font>INTEGER<font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>dpunkt<font color="#000080">( </font>x<font color="#000080">,</font>y<font color="#000080">,</font>z<font color="#000080">, </font>Col<font color="#000080">:</font>integer<font color="#000080">);
</font><font color="#FF0000"><b>VAR </b></font>n<font color="#000080">:</font>INTEGER<font color="#000080">;
  </font><font color="#FF0000"><b>BEGIN
   </b></font>n<font color="#000080">:=</font>z<font color="#000080">+</font>e<font color="#000080">;

   </font><font color="#008000"><i>{n=Nenner, nur einmal berechnen, geht schneller}

   </i></font>PutPixel<font color="#000080">(</font>mpx<font color="#000080">+ (</font>scal<font color="#000080">*</font>x <font color="#FF0000"><b>div </b></font>n<font color="#000080">),</font>mpy<font color="#000080">+ (</font>scal<font color="#000080">*</font>y <font color="#FF0000"><b>div </b></font>n<font color="#000080">),</font>col<font color="#000080">);

                 </font><font color="#008000"><i>{hier nur integer-operationen}
  </i></font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>dline<font color="#000080">( </font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>z1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">,</font>z2<font color="#000080">:</font>integer<font color="#000080">);
</font><font color="#FF0000"><b>VAR </b></font>n1<font color="#000080">,</font>n2<font color="#000080">:</font>INTEGER<font color="#000080">;
  </font><font color="#FF0000"><b>BEGIN
   </b></font>n1<font color="#000080">:=</font>z1<font color="#000080">+</font>e<font color="#000080">;</font>n2<font color="#000080">:=</font>z2<font color="#000080">+</font>e<font color="#000080">;  </font><font color="#008000"><i>{n1=Nenner fuer 1.Punkt, n2=Nenner fuer 2.Punkt}

   </i></font>Line<font color="#000080">(</font>mpx<font color="#000080">+(</font>scal<font color="#000080">*(</font>x1 <font color="#FF0000"><b>div </b></font>n1<font color="#000080">)),</font>mpy<font color="#000080">+(</font>scal<font color="#000080">*(</font>y1 <font color="#FF0000"><b>div </b></font>n1<font color="#000080">)),
        </font>mpx<font color="#000080">+(</font>scal<font color="#000080">*(</font>x2 <font color="#FF0000"><b>div </b></font>n2<font color="#000080">)),</font>mpy<font color="#000080">+(</font>scal<font color="#000080">*(</font>y2 <font color="#FF0000"><b>div </b></font>n2<font color="#000080">)));

      </font><font color="#008000"><i>{Nix mit Round(xxx / nX), dauert zu lange: Integer -&gt;Real -&gt;Integer}
  </i></font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>Init<font color="#000080">;
</font><font color="#FF0000"><b>begin
 </b></font>act<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;
 </font>e<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;
 </font>scal <font color="#000080">:= </font><font color="#800000">2</font><font color="#000080">;

 </font>mx<font color="#000080">:=</font>getmaxx<font color="#000080">;     </font><font color="#008000"><i>{damit man es auch in EgaLo oder anderen GModes}
 </i></font>m2x<font color="#000080">:=</font>mx <font color="#FF0000"><b>shr </b></font><font color="#800000">1</font><font color="#000080">;   </font><font color="#008000"><i>{betreiben kann, alle Werte abhaengig von MaximalX und}
 </i></font>my<font color="#000080">:=</font>getmaxy<font color="#000080">;     </font><font color="#008000"><i>{MaximalY}
 </i></font>m2y<font color="#000080">:=</font>my <font color="#FF0000"><b>shr </b></font><font color="#800000">1</font><font color="#000080">;
 </font>mpx<font color="#000080">:=</font>m2x<font color="#000080">;
 </font>mpy<font color="#000080">:=</font>m2y<font color="#000080">-(</font>mpy <font color="#FF0000"><b>shr </b></font><font color="#800000">1</font><font color="#000080">);

 </font>sop<font color="#000080">:=</font>sizeof<font color="#000080">(</font>punkt<font color="#000080">);  </font><font color="#008000"><i>{Schreibt sich leichter :-) }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>BEGIN
  </b></font>Randomize<font color="#000080">;
  </font>gd<font color="#000080">:=</font>ega<font color="#000080">;
  </font>gm<font color="#000080">:=</font>egahi<font color="#000080">;

  </font><font color="#FF0000"><b>if </b></font>RegisterBGIdriver<font color="#000080">(@</font>EgaVgaDriverProc<font color="#000080">) &lt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>halt<font color="#000080">(</font><font color="#800000">255</font><font color="#000080">);

  </font>InitGraph<font color="#000080">(</font>gd<font color="#000080">,</font>gm<font color="#000080">,</font><font color="#800000">''</font><font color="#000080">);  </font><font color="#008000"><i>{oder InitGraph(gd,gm,'PathToDriver');}
  </i></font>Init<font color="#000080">;
  </font><font color="#FF0000"><b>FOR </b></font>a<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>TO </b></font><font color="#800000">15 </font><font color="#FF0000"><b>DO  </b></font>SetRGBPalette<font color="#000080">(</font>a<font color="#000080">,</font>a<font color="#000080">*</font><font color="#800000">3</font><font color="#000080">,</font>a<font color="#000080">*</font><font color="#800000">3</font><font color="#000080">,</font>a<font color="#000080">*</font><font color="#800000">3</font><font color="#000080">);
  </font><font color="#FF0000"><b>FOR </b></font>a<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>TO </b></font>MaxStars <font color="#FF0000"><b>DO
    BEGIN
      </b></font>Stars<font color="#000080">[</font>a<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">]:=</font>Random<font color="#000080">(</font>mx<font color="#000080">)-</font>m2x<font color="#000080">;
      </font>Stars<font color="#000080">[</font>a<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">]:=</font>Random<font color="#000080">(</font>my<font color="#000080">)-</font>m2y<font color="#000080">;
      </font>Stars<font color="#000080">[</font>a<font color="#000080">,</font><font color="#800000">3</font><font color="#000080">]:=</font>Random<font color="#000080">(</font><font color="#800000">30</font><font color="#000080">)+</font><font color="#800000">1</font><font color="#000080">;
    </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font>Move<font color="#000080">(</font>Stars<font color="#000080">,</font>Stars1<font color="#000080">,</font>SoP<font color="#000080">*</font>MaxStars<font color="#000080">);      </font><font color="#008000"><i>{man sollte Stars1 initialisieren}
                                        {wenn man es benutzt}
  </i></font>SetColor<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">);
  </font>SetVisualPage<font color="#000080">(</font>act<font color="#000080">);

  </font><font color="#008000"><i>{AB hier kommt es auf Geschwindigkeit an}

  </i></font><font color="#FF0000"><b>REPEAT
            </b></font><font color="#008000"><i>{IF act=0 THEN act:=1 ELSE act:=0; dauert zu lange, deshalb:}
            {wenn (act)=1 -&gt; act:=1-(1) = 0  wenn (act)=0 -&gt; act:=1-(0)=1}
    </i></font>act<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">-</font>act<font color="#000080">;

    </font>SetActivePage<font color="#000080">(</font>act<font color="#000080">);
    </font><font color="#FF0000"><b>FOR </b></font>a<font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>TO </b></font>MaxStars <font color="#FF0000"><b>DO
    BEGIN
      </b></font>Stars<font color="#000080">[</font>a<font color="#000080">,</font><font color="#800000">3</font><font color="#000080">]:=</font>Stars<font color="#000080">[</font>a<font color="#000080">,</font><font color="#800000">3</font><font color="#000080">]-</font><font color="#800000">1</font><font color="#000080">;
      </font><font color="#FF0000"><b>IF </b></font>stars<font color="#000080">[</font>a<font color="#000080">,</font><font color="#800000">3</font><font color="#000080">]= </font><font color="#800000">0 </font><font color="#FF0000"><b>THEN
      BEGIN
        </b></font>Stars<font color="#000080">[</font>a<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">]:=</font>Random<font color="#000080">(</font>mx<font color="#000080">)-</font>m2x<font color="#000080">;
        </font>Stars<font color="#000080">[</font>a<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">]:=</font>Random<font color="#000080">(</font>my<font color="#000080">)-</font>m2y<font color="#000080">;
        </font>Stars<font color="#000080">[</font>a<font color="#000080">,</font><font color="#800000">3</font><font color="#000080">]:=</font><font color="#800000">30</font><font color="#000080">;
      </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
      </font>dpunkt<font color="#000080">(</font>Stars<font color="#000080">[</font>a<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">],</font>Stars<font color="#000080">[</font>a<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">],</font>Stars<font color="#000080">[</font>a<font color="#000080">,</font><font color="#800000">3</font><font color="#000080">],</font><font color="#800000">15</font><font color="#000080">-(</font>stars<font color="#000080">[</font>a<font color="#000080">,</font><font color="#800000">3</font><font color="#000080">] </font><font color="#FF0000"><b>shr </b></font><font color="#800000">1</font><font color="#000080">));

                        </font><font color="#008000"><i>{round(xxx/2) dauert zu lange {shr 1 = div 2 }
    </i></font><font color="#FF0000"><b>END</b></font><font color="#000080">;
    </font>SetVisualPage<font color="#000080">(</font>act<font color="#000080">);

    </font>act<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">-</font>act<font color="#000080">;   </font><font color="#008000"><i>{s.o.}

    </i></font>SetActivePage<font color="#000080">(</font>act<font color="#000080">);
    </font><font color="#FF0000"><b>FOR </b></font>a<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>TO </b></font>MaxStars <font color="#FF0000"><b>DO
    BEGIN
      </b></font>dpunkt<font color="#000080">(</font>Stars1<font color="#000080">[</font>a<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">],</font>Stars1<font color="#000080">[</font>a<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">],</font>Stars1<font color="#000080">[</font>a<font color="#000080">,</font><font color="#800000">3</font><font color="#000080">],</font><font color="#800000">0</font><font color="#000080">);

      </font><font color="#008000"><i>{Wenn man Stars1 nicht initialisierst kommt es schon mal vor, dass
       man einen Division by Zero Error beim ersten beim 1. Aufruf erhaelt}

      </i></font>move<font color="#000080">(</font>stars<font color="#000080">[</font>a<font color="#000080">],</font>stars1<font color="#000080">[</font>a<font color="#000080">],</font>sop<font color="#000080">);

      </font><font color="#008000"><i>{nicht einzeln uebertragen, Move ist schneller, deshalb auch Type Punkt}

    </i></font><font color="#FF0000"><b>END</b></font><font color="#000080">;

    </font>act<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">-</font>act<font color="#000080">; </font><font color="#008000"><i>{s.o.}

  </i></font><font color="#FF0000"><b>UNTIL </b></font>KeyPressed<font color="#000080">;

  </font>closegraph<font color="#000080">;          </font><font color="#008000"><i>{Nicht vergessen !!!! ;-) }
</i></font><font color="#FF0000"><b>END</b></font><font color="#000080">.

</font><font color="#008000"><i>{------------------------- SCHNAPP --------------------------------------}

</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0005.PAS">Original</a><b>]</b></p></body>
</html>
