<html>
<head><title> "Line & Circle routines" by ALLYN CROSS</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0166.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
You asked for =F=A=S=T This line procedure is quite fast considering it
is done in Pascal and not assembler.
The Rectangle works well also.
Sorry my Circle routine is rather Slow and Does not make a perfect (or
fairly perfect) circle so I will not enclose it. &lt;G&gt;

Where is a word segment to a screen address.
You can define the VGAScreen's address like this.
Const  VGASCREEN = $a000;
}

</i></font><font color="#FF0000"><b>Procedure </b></font>line<font color="#000080">(</font>a<font color="#000080">,</font>b<font color="#000080">,</font>c<font color="#000080">,</font>d<font color="#000080">,</font>col<font color="#000080">:</font>integer<font color="#000080">;</font>Where<font color="#000080">:</font>Word<font color="#000080">);
  </font><font color="#008000"><i>{ This draws a line from a,b to c,d of color col. }
</i></font><font color="#FF0000"><b>Function </b></font>sgn<font color="#000080">(</font>a<font color="#000080">:</font>real<font color="#000080">):</font>integer<font color="#000080">;
   </font><font color="#FF0000"><b>BEGIN
        if </b></font>a<font color="#000080">&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>sgn<font color="#000080">:=+</font><font color="#800000">1</font><font color="#000080">;
        </font><font color="#FF0000"><b>if </b></font>a<font color="#000080">&lt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>sgn<font color="#000080">:=-</font><font color="#800000">1</font><font color="#000080">;
        </font><font color="#FF0000"><b>if </b></font>a<font color="#000080">=</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>sgn<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
   </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>u<font color="#000080">,</font>s<font color="#000080">,</font>v<font color="#000080">,</font>d1x<font color="#000080">,</font>d1y<font color="#000080">,</font>d2x<font color="#000080">,</font>d2y<font color="#000080">,</font>m<font color="#000080">,</font>n<font color="#000080">:</font>real<font color="#000080">;
    </font>i<font color="#000080">:</font>integer<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
     </b></font>u<font color="#000080">:= </font>c <font color="#000080">- </font>a<font color="#000080">;
     </font>v<font color="#000080">:= </font>d <font color="#000080">- </font>b<font color="#000080">;
     </font>d1x<font color="#000080">:= </font>SGN<font color="#000080">(</font>u<font color="#000080">);
     </font>d1y<font color="#000080">:= </font>SGN<font color="#000080">(</font>v<font color="#000080">);
     </font>d2x<font color="#000080">:= </font>SGN<font color="#000080">(</font>u<font color="#000080">);
     </font>d2y<font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
     </font>m<font color="#000080">:= </font>ABS<font color="#000080">(</font>u<font color="#000080">);
     </font>n <font color="#000080">:= </font>ABS<font color="#000080">(</font>v<font color="#000080">);
     </font><font color="#FF0000"><b>IF NOT </b></font><font color="#000080">(</font>M<font color="#000080">&gt;</font>N<font color="#000080">) </font><font color="#FF0000"><b>then
     BEGIN
          </b></font>d2x <font color="#000080">:= </font><font color="#800000">0 </font><font color="#000080">;
          </font>d2y <font color="#000080">:= </font>SGN<font color="#000080">(</font>v<font color="#000080">);
          </font>m <font color="#000080">:= </font>ABS<font color="#000080">(</font>v<font color="#000080">);
          </font>n <font color="#000080">:= </font>ABS<font color="#000080">(</font>u<font color="#000080">);
     </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
     </font>s <font color="#000080">:= </font>INT<font color="#000080">(</font>m <font color="#000080">/ </font><font color="#800000">2</font><font color="#000080">);
     </font><font color="#FF0000"><b>FOR </b></font>i <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>TO </b></font>round<font color="#000080">(</font>m<font color="#000080">) </font><font color="#FF0000"><b>DO
     BEGIN
          </b></font>putpixel<font color="#000080">(</font>a<font color="#000080">,</font>b<font color="#000080">,</font>col<font color="#000080">,</font>where<font color="#000080">);
          </font>s <font color="#000080">:= </font>s <font color="#000080">+ </font>n<font color="#000080">;
          </font><font color="#FF0000"><b>IF not </b></font><font color="#000080">(</font>s<font color="#000080">&lt;</font>m<font color="#000080">) </font><font color="#FF0000"><b>THEN
          BEGIN
               </b></font>s <font color="#000080">:= </font>s <font color="#000080">- </font>m<font color="#000080">;
               </font>a<font color="#000080">:= </font>a <font color="#000080">+</font>round<font color="#000080">(</font>d1x<font color="#000080">);
               </font>b <font color="#000080">:= </font>b <font color="#000080">+ </font>round<font color="#000080">(</font>d1y<font color="#000080">);
          </font><font color="#FF0000"><b>END
          ELSE
          BEGIN
               </b></font>a <font color="#000080">:= </font>a <font color="#000080">+ </font>round<font color="#000080">(</font>d2x<font color="#000080">);
               </font>b <font color="#000080">:= </font>b <font color="#000080">+ </font>round<font color="#000080">(</font>d2y<font color="#000080">);
          </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
     </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Rect<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">,</font>Color <font color="#000080">: </font>integer<font color="#000080">;</font>Where<font color="#000080">:</font>word<font color="#000080">);
</font><font color="#FF0000"><b>begin
     </b></font>Line<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y1<font color="#000080">,</font>color<font color="#000080">,</font>Where<font color="#000080">);
     </font>Line<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x1<font color="#000080">,</font>y2<font color="#000080">,</font>color<font color="#000080">,</font>where<font color="#000080">);
     </font>Line<font color="#000080">(</font>x2<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">,</font>color<font color="#000080">,</font>where<font color="#000080">);
     </font>Line<font color="#000080">(</font>x1<font color="#000080">,</font>y2<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">,</font>color<font color="#000080">,</font>where<font color="#000080">);
 
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0166.PAS">Original</a><b>]</b></p></body>
</html>
