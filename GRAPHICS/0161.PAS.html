<html>
<head><title> "Just a little GFX TPU..." by CHRIS AUSTIN</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0161.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#000000"> <font color="#FF0000"><b>Unit </b></font>Graphic<font color="#000080">;
 </font><font color="#FF0000"><b>Interface
 Var </b></font>ScrBase <font color="#000080">: </font>Word<font color="#000080">;
   </font><font color="#FF0000"><b>Procedure </b></font>VideoMode <font color="#000080">( </font>Mode <font color="#000080">: </font>Byte <font color="#000080">);
   </font><font color="#FF0000"><b>Procedure </b></font>SetColor <font color="#000080">( </font>Color<font color="#000080">, </font>Red<font color="#000080">, </font>Green<font color="#000080">, </font>Blue <font color="#000080">: </font>Byte <font color="#000080">);
   </font><font color="#FF0000"><b>Procedure </b></font>Pset<font color="#000080">(</font>X<font color="#000080">,</font>Y<font color="#000080">,</font>C <font color="#000080">: </font>Word<font color="#000080">);
   </font><font color="#FF0000"><b>Procedure </b></font>SetRGBDAC<font color="#000080">(</font>Color<font color="#000080">,</font>R<font color="#000080">,</font>G<font color="#000080">,</font>B <font color="#000080">: </font>Byte<font color="#000080">);
   </font><font color="#FF0000"><b>Procedure </b></font>WaitRetrace<font color="#000080">;
   </font><font color="#FF0000"><b>Function </b></font>Rad <font color="#000080">(</font>theta <font color="#000080">: </font>real<font color="#000080">) : </font>real<font color="#000080">;
   </font><font color="#FF0000"><b>Procedure </b></font>PutPix<font color="#000080">(</font>x<font color="#000080">, </font>y <font color="#000080">: </font>Word<font color="#000080">; </font>Color <font color="#000080">: </font>Byte<font color="#000080">);
   </font><font color="#FF0000"><b>Procedure </b></font>ScrPan<font color="#000080">(</font>ScrOfs <font color="#000080">: </font>Word<font color="#000080">);
   </font><font color="#FF0000"><b>Procedure </b></font>SetModeX<font color="#000080">;
 </font><font color="#FF0000"><b>implementation
     Procedure </b></font>WaitRetrace<font color="#000080">; </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
       </font><font color="#FF0000"><b>Asm
         </b></font><font color="#FF00FF">mov     dx,3dah
 @L1:
         in      al,dx
         test    al,08h
         jne     @L1
 @L2:
         in      al,dx
         test    al,08h
         je      @L2
       </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

     </font><font color="#FF0000"><b>Procedure </b></font>SetModeX<font color="#000080">; </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
       </font><font color="#FF0000"><b>Asm
         </b></font><font color="#FF00FF">mov     ax,0012h
         int     10h
         mov     ax,0013h
         int     10h
         mov     dx,3c4h
         mov     ax,0604h
         out     dx,ax
         mov     dx,3d4h
         mov     ax,0014h
         out     dx,ax
         mov     ax,0e317h
         out     dx,ax
       </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

         </font><font color="#FF0000"><b>Procedure </b></font>ScrPan<font color="#000080">(</font>ScrOfs <font color="#000080">: </font>Word<font color="#000080">); </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
         </font><font color="#FF0000"><b>Asm
         </b></font><font color="#FF00FF">mov     bx,ScrOfs
         mov     dx,3d4h
         mov     ah,bh
         mov     al,0ch
         out     dx,ax
         mov     ah,bl
         inc     al
         out     dx,ax
       </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

     </font><font color="#FF0000"><b>Procedure </b></font>PutPix<font color="#000080">(</font>x<font color="#000080">, </font>y <font color="#000080">: </font>Word<font color="#000080">; </font>Color <font color="#000080">: </font>Byte<font color="#000080">); </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
       </font><font color="#FF0000"><b>Asm
         </b></font><font color="#FF00FF">mov     ax,0a000h
         mov     es,ax
         mov     bx,x
         mov     dx,3c4h
         mov     ax,0102h
         mov     cl,bl
         and     cl,3
         shl     ah,cl
         out     dx,ax
         mov     ax,y
         shl     ax,4
         mov     di,ax
         shl     ax,2
         add     di,ax
         shr     bx,2
         add     di,bx
         add     di,ScrBase
         mov     al,Color
         mov     es:[di],al
       </font><font color="#FF0000"><b>End</b></font><font color="#000080">;



   </font><font color="#FF0000"><b>Procedure </b></font>VideoMode <font color="#000080">( </font>Mode <font color="#000080">: </font>Byte <font color="#000080">);

     </font><font color="#FF0000"><b>Begin </b></font><font color="#008000"><i>{ VideoMode }
       </i></font><font color="#FF0000"><b>Asm
         </b></font><font color="#FF00FF">Mov  AH,00
         Mov  AL,Mode
         Int  10h
       </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
     </font><font color="#FF0000"><b>End</b></font><font color="#000080">;  </font><font color="#008000"><i>{ VideoMode }

 </i></font><font color="#FF0000"><b>Procedure </b></font>SetRGBDAC<font color="#000080">(</font>Color<font color="#000080">,</font>R<font color="#000080">,</font>G<font color="#000080">,</font>B <font color="#000080">: </font>Byte<font color="#000080">);
 </font><font color="#FF0000"><b>Begin
 Asm
 </b></font><font color="#FF00FF">Mov AH,$10;
 Mov AL,$10;
 mov BL,Color;
 Mov CH,G;
 Mov CL,B;
 Mov DH,R;
 Int $10;
 </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>End</b></font><font color="#000080">;


   </font><font color="#FF0000"><b>Procedure </b></font>SetColor <font color="#000080">( </font>Color<font color="#000080">, </font>Red<font color="#000080">, </font>Green<font color="#000080">, </font>Blue <font color="#000080">: </font>Byte <font color="#000080">);
     </font><font color="#FF0000"><b>Begin </b></font><font color="#008000"><i>{ SetColor }
       </i></font>Port<font color="#000080">[</font><font color="#800000">$3C8</font><font color="#000080">] := </font>Color<font color="#000080">;
       </font>Port<font color="#000080">[</font><font color="#800000">$3C9</font><font color="#000080">] := </font>Red<font color="#000080">;
       </font>Port<font color="#000080">[</font><font color="#800000">$3C9</font><font color="#000080">] := </font>Green<font color="#000080">;
       </font>Port<font color="#000080">[</font><font color="#800000">$3C9</font><font color="#000080">] := </font>Blue<font color="#000080">;
     </font><font color="#FF0000"><b>End</b></font><font color="#000080">;  </font><font color="#008000"><i>{ SetColor }

 </i></font><font color="#FF0000"><b>procedure </b></font>Pset<font color="#000080">(</font>X<font color="#000080">,</font>Y<font color="#000080">,</font>C <font color="#000080">: </font>Word<font color="#000080">);
 </font><font color="#FF0000"><b>begin
 </b></font>Mem<font color="#000080">[</font><font color="#800000">$0A000</font><font color="#000080">:</font>Y<font color="#000080">*</font><font color="#800000">320</font><font color="#000080">+</font>X<font color="#000080">] := </font>C<font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>Function </b></font>rad <font color="#000080">(</font>theta <font color="#000080">: </font>real<font color="#000080">) : </font>real<font color="#000080">;
   </font><font color="#008000"><i>{  This calculates the degrees of an angle }
 </i></font><font color="#FF0000"><b>BEGIN
   </b></font>rad <font color="#000080">:= </font>theta <font color="#000080">* </font>pi <font color="#000080">/ </font><font color="#800000">180
 </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

 </font><font color="#FF0000"><b>End</b></font><font color="#000080">.

</font><font color="#FF0000"><b>Try </b></font>that I<font color="#800000">'m sure you can figure it out ..:) .. B4 you use SCRPAN you
</font>have <font color="#FF0000"><b>to do </b></font>SETMODEX <font color="#000080">... </font>I think PutPix <font color="#FF0000"><b>is </b></font>faster <font color="#FF0000"><b>then </b></font>PSET <font color="#FF0000"><b>not </b></font>srue <font color="#000080">..
</font>you could benchmark it <font color="#000080">... </font>VIDEOMODE<font color="#000080">(</font><font color="#800000">$13</font><font color="#000080">); </font>gets you into <font color="#800000">320</font>x200x256 grf
mode <font color="#000080">... </font>Tell me what ya think <font color="#000080">.. </font>this <font color="#FF0000"><b>is </b></font>COMPLETELY free but you might
want <font color="#FF0000"><b>to </b></font>tell me what ya think<font color="#000080">?
</font>Thanks<font color="#000080">!
</font>Cya<font color="#000080">!
&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;
&Ucirc;     </font>Chris Austin <font color="#000080">- </font>CEO IdeaSoft     <font color="#000080">&Ucirc;&plusmn;
&Ucirc;           </font>SysOp IdeaSoft<font color="#000080">/</font><font color="#800000">2          </font><font color="#000080">&Ucirc;&plusmn;
&Ucirc;            (</font><font color="#800000">609</font><font color="#000080">) </font><font color="#800000">884</font><font color="#000080">-</font><font color="#800000">2717           </font><font color="#000080">&Ucirc;&plusmn;
&Ucirc; </font>FidoNet <font color="#800000">1</font><font color="#000080">:</font><font color="#800000">2623</font><font color="#000080">/</font><font color="#800000">56 </font><font color="#000080">: </font>CD<font color="#000080">-</font>ROM <font color="#000080">: </font>Doors<font color="#000080">! &Ucirc;&plusmn;
&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&plusmn;
 &plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0161.PAS">Original</a><b>]</b></p></body>
</html>
