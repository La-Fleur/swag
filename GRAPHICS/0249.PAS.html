<html>
<head><title> "Fast graphics - PutPixel and Circle" by RYAN JONES</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0249.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
Hello,
	I just recently downloaded the entire SWAG library; and, as I was
looking through the graphics library for things to learn, I noticed that
people were/are looking for a fast Circle command, but all the Circle
commands I saw were written in High-Level language. Not only that, but
they used REAL arithmetic(slow). So I thought I'd send you a much faster
Circle command, and the fastest PutPixel command possible. The Circle
command could use a bit of optimization, but I'm sure it's faster that
any of the one's you already have. Sorry for the run-on sentences.
		Thank You
		-Ryan Jones
}

</i></font><font color="#FF0000"><b>Program </b></font>FastCircle<font color="#000080">;

</font><font color="#008000"><i>{
   Here's a small demo of a fast Putpixel statement
   and a very fast Circle statement.

   I believe the PutPixel command is the fastest possible.

   The Circle command is very fast, but could use some of
   optimization. (It should be fast enough for anyone's uses)

   Programmed by Ryan Jones
}

</i></font><font color="#FF0000"><b>Uses
</b></font>	CRT<font color="#000080">;

</font><font color="#FF0000"><b>Const
</b></font>	_Hollow <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">;</font>	_Filled <font color="#000080">= </font><font color="#800000">1</font><font color="#000080">;

</font><font color="#FF0000"><b>Var
</b></font>	Segment <font color="#000080">: </font>Word<font color="#000080">;
   </font>Ch <font color="#000080">: </font>Char<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>SetVideoMode<font color="#000080">(</font>n <font color="#000080">: </font>Byte<font color="#000080">); </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>Asm
      </b></font><font color="#FF00FF">MOV AH, 0
      MOV AL, n
      INT $10
   </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>_PutPixel<font color="#000080">(</font>X<font color="#000080">, </font>Y<font color="#000080">, </font>C <font color="#000080">: </font>Word<font color="#000080">); </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>Asm
</b></font>		<font color="#FF00FF">MOV AX, Segment
</font>	   <font color="#FF00FF">MOV ES, AX

      MOV AX, Y
      MOV BX, X
      XCHG AH, AL
      ADD BX, AX
      SHR AX, 1
      SHR AX, 1
      ADD BX, AX

</font>	   <font color="#FF00FF">MOV AX, C
</font>	   <font color="#FF00FF">MOV ES:[BX], AL
   </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Circle<font color="#000080">(</font>Control<font color="#000080">, </font>X<font color="#000080">, </font>Y<font color="#000080">, </font>Radius<font color="#000080">, </font>Color <font color="#000080">: </font>Word<font color="#000080">); </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font>	<font color="#FF0000"><b>Asm
</b></font>   	<font color="#FF00FF">MOV AX, Segment
      MOV ES, AX
      MOV SI, Radius</font>     	<font color="#008000"><i>{ XI := R }
      </i></font><font color="#FF00FF">MOV DI, 0      </font><font color="#008000"><i>{ YI := 0 }
      </i></font><font color="#FF00FF">MOV CX, Radius
      SHR CX, 1      </font><font color="#008000"><i>{ N := XI Div 2 }
      </i></font><font color="#FF00FF">MOV AX, Control
      CMP AX, 1
      JE @Filled

@Hollow:

      @Loope:
</font>			<font color="#008000"><i>{putpix}
</i></font>		   <font color="#FF00FF">MOV BX, 320
</font>		   <font color="#FF00FF">MOV AX, Y
         SUB AX, DI
</font>		   <font color="#FF00FF">MUL BX
</font>		   <font color="#FF00FF">MOV BX, AX
</font>		   <font color="#FF00FF">ADD BX, X
         SUB BX, SI
         MOV DX, Color
         MOV ES:[BX], DL
</font>		   <font color="#FF00FF">MOV BX, 320
</font>		   <font color="#FF00FF">MOV AX, Y
         SUB AX, SI
</font>		   <font color="#FF00FF">MUL BX
</font>		   <font color="#FF00FF">MOV BX, AX
</font>		   <font color="#FF00FF">ADD BX, X
         SUB BX, DI
         MOV DX, Color
         MOV ES:[BX], DL
</font>		   <font color="#FF00FF">MOV BX, 320
</font>		   <font color="#FF00FF">MOV AX, Y
         SUB AX, DI
</font>		   <font color="#FF00FF">MUL BX
</font>		   <font color="#FF00FF">MOV BX, AX
</font>		   <font color="#FF00FF">ADD BX, X
         ADD BX, SI
         MOV DX, Color
         MOV ES:[BX], DL
</font>		   <font color="#FF00FF">MOV BX, 320
</font>		   <font color="#FF00FF">MOV AX, Y
         SUB AX, SI
</font>		   <font color="#FF00FF">MUL BX
</font>		   <font color="#FF00FF">MOV BX, AX
</font>		   <font color="#FF00FF">ADD BX, X
         ADD BX, DI
         MOV DX, Color
         MOV ES:[BX], DL
</font>		   <font color="#FF00FF">MOV BX, 320
</font>		   <font color="#FF00FF">MOV AX, Y
         ADD AX, DI
</font>		   <font color="#FF00FF">MUL BX
</font>		   <font color="#FF00FF">MOV BX, AX
</font>		   <font color="#FF00FF">ADD BX, X
         SUB BX, SI
         MOV DX, Color
         MOV ES:[BX], DL
</font>		   <font color="#FF00FF">MOV BX, 320
</font>		   <font color="#FF00FF">MOV AX, Y
         ADD AX, SI
</font>		   <font color="#FF00FF">MUL BX
</font>		   <font color="#FF00FF">MOV BX, AX
</font>		   <font color="#FF00FF">ADD BX, X
         SUB BX, DI
         MOV DX, Color
         MOV ES:[BX], DL
</font>		   <font color="#FF00FF">MOV BX, 320
</font>		   <font color="#FF00FF">MOV AX, Y
         ADD AX, DI
</font>		   <font color="#FF00FF">MUL BX
</font>		   <font color="#FF00FF">MOV BX, AX
</font>		   <font color="#FF00FF">ADD BX, X
         ADD BX, SI
         MOV DX, Color
         MOV ES:[BX], DL
</font>		   <font color="#FF00FF">MOV BX, 320
</font>		   <font color="#FF00FF">MOV AX, Y
         ADD AX, SI
</font>		   <font color="#FF00FF">MUL BX
</font>		   <font color="#FF00FF">MOV BX, AX
</font>		   <font color="#FF00FF">ADD BX, X
         ADD BX, DI
         MOV DX, Color
         MOV ES:[BX], DL
</font>			<font color="#008000"><i>{putpix}
         </i></font><font color="#FF00FF">ADD CX, DI  </font><font color="#008000"><i>{ N := N + YI }
         </i></font><font color="#FF00FF">CMP CX, SI  </font><font color="#008000"><i>{ If N &gt; XI Then }
         </i></font><font color="#FF00FF">JNG @Skip   </font><font color="#008000"><i>{ Do This }
           </i></font><font color="#FF00FF">DEC SI</font>    	<font color="#008000"><i>{ XI := XI - 1 }
           </i></font><font color="#FF00FF">SUB CX, SI</font>	<font color="#008000"><i>{ N := N - XI }
         </i></font><font color="#FF00FF">@Skip:
         INC DI      </font><font color="#008000"><i>{ YI := YI + 1 }
      </i></font><font color="#FF00FF">CMP DI, SI
      JNG @Loope
      JMP @</font><font color="#FF0000"><b>End

</b></font><font color="#000080">@</font>Filled<font color="#000080">:

      @</font>Loopeb<font color="#000080">:
</font>			<font color="#008000"><i>{putpix}
</i></font>		   MOV BX<font color="#000080">, </font><font color="#800000">320
</font>		   MOV AX<font color="#000080">, </font>Y
         SUB AX<font color="#000080">, </font>DI
		   MUL BX
		   MOV BX<font color="#000080">, </font>AX
		   ADD BX<font color="#000080">, </font>X
         SUB BX<font color="#000080">, </font>SI
         MOV DX<font color="#000080">, </font>CX           <font color="#008000"><i>{ Part 2 }
         </i></font>XCHG BX<font color="#000080">, </font>DI
         MOV AX<font color="#000080">, </font>Color
         MOV CX<font color="#000080">, </font>SI
			<font color="#FF0000"><b>SHL </b></font>CX<font color="#000080">, </font><font color="#800000">1
         </font>inc cx
			REP STOSB
         MOV DI<font color="#000080">, </font>BX
         MOV CX<font color="#000080">, </font>DX

		   MOV BX<font color="#000080">, </font><font color="#800000">320
</font>		   MOV AX<font color="#000080">, </font>Y
         ADD AX<font color="#000080">, </font>DI
		   MUL BX
		   MOV BX<font color="#000080">, </font>AX
		   ADD BX<font color="#000080">, </font>X
         SUB BX<font color="#000080">, </font>SI
         MOV DX<font color="#000080">, </font>CX           <font color="#008000"><i>{ Part 3 }
         </i></font>XCHG BX<font color="#000080">, </font>DI
         MOV AX<font color="#000080">, </font>Color
         MOV CX<font color="#000080">, </font>SI
			<font color="#FF0000"><b>SHL </b></font>CX<font color="#000080">, </font><font color="#800000">1
         </font>inc cx
			REP STOSB
         MOV DI<font color="#000080">, </font>BX
         MOV CX<font color="#000080">, </font>DX
			<font color="#008000"><i>{putpix}
         </i></font>ADD CX<font color="#000080">, </font>DI  <font color="#008000"><i>{ N := N + YI }
         </i></font>CMP CX<font color="#000080">, </font>SI  <font color="#008000"><i>{ If N &gt; XI Then }
         </i></font>JNG <font color="#000080">@</font>Skipb   <font color="#008000"><i>{ Do This }
           </i></font>DEC SI    	<font color="#008000"><i>{ XI := XI - 1 }
           </i></font>SUB CX<font color="#000080">, </font>SI	<font color="#008000"><i>{ N := N - XI }
</i></font>				<font color="#008000"><i>{putpix}
</i></font>			   MOV BX<font color="#000080">, </font><font color="#800000">320
</font>			   MOV AX<font color="#000080">, </font>Y
	         SUB AX<font color="#000080">, </font>SI
            dec ax
			   MUL BX
			   MOV BX<font color="#000080">, </font>AX
			   ADD BX<font color="#000080">, </font>X
   	      SUB BX<font color="#000080">, </font>DI
	         MOV DX<font color="#000080">, </font>CX        <font color="#008000"><i>{ Part 1 }
</i></font>	         MOV AX<font color="#000080">, </font>Color
	         MOV CX<font color="#000080">, </font>DI
				<font color="#FF0000"><b>SHL </b></font>CX<font color="#000080">, </font><font color="#800000">1
            </font>inc cx
	         XCHG BX<font color="#000080">, </font>DI
				REP STOSB
	         MOV DI<font color="#000080">, </font>BX
	         MOV CX<font color="#000080">, </font>DX

			   MOV BX<font color="#000080">, </font><font color="#800000">320
</font>			   MOV AX<font color="#000080">, </font>Y
	         ADD AX<font color="#000080">, </font>SI
            inc ax
			   MUL BX
			   MOV BX<font color="#000080">, </font>AX
			   ADD BX<font color="#000080">, </font>X
   	      SUB BX<font color="#000080">, </font>DI
	         MOV DX<font color="#000080">, </font>CX
	         MOV AX<font color="#000080">, </font>Color         <font color="#008000"><i>{ Part 4 }
</i></font>	         MOV CX<font color="#000080">, </font>DI
				<font color="#FF0000"><b>SHL </b></font>CX<font color="#000080">, </font><font color="#800000">1
            </font>inc cx
	         XCHG BX<font color="#000080">, </font>DI
				REP STOSB
	         MOV DI<font color="#000080">, </font>BX
	         MOV CX<font color="#000080">, </font>DX
				<font color="#008000"><i>{putpix}
         </i></font><font color="#000080">@</font>Skipb<font color="#000080">:
         </font>INC DI      <font color="#008000"><i>{ YI := YI + 1 }
      </i></font>CMP DI<font color="#000080">, </font>SI
      JNG <font color="#000080">@</font>Loopeb

      <font color="#000080">@</font><font color="#FF0000"><b>End</b></font><font color="#000080">:
   </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Begin
</b></font>	Randomize<font color="#000080">;
</font>	SetVideoMode<font color="#000080">(</font><font color="#800000">$13</font><font color="#000080">);
   </font>Segment <font color="#000080">:= </font><font color="#800000">$A000</font><font color="#000080">;
   </font>Ch <font color="#000080">:= </font><font color="#800000">#0</font><font color="#000080">;
   </font><font color="#FF0000"><b>Repeat
</b></font>   	<font color="#FF0000"><b>If </b></font>Ch <font color="#000080">&lt;&gt; </font><font color="#800000">#0 </font><font color="#FF0000"><b>Then </b></font>Ch <font color="#000080">:= </font>ReadKey<font color="#000080">;
</font>   	_PutPixel<font color="#000080">(</font>Random<font color="#000080">(</font><font color="#800000">320</font><font color="#000080">), </font>Random<font color="#000080">(</font><font color="#800000">200</font><font color="#000080">), </font>Random<font color="#000080">(</font><font color="#800000">256</font><font color="#000080">));
</font>   	<font color="#FF0000"><b>If </b></font>KeyPressed <font color="#FF0000"><b>Then </b></font>Ch <font color="#000080">:= </font>ReadKey <font color="#FF0000"><b>Else </b></font>Ch <font color="#000080">:= </font><font color="#800000">#0</font><font color="#000080">;
   </font><font color="#FF0000"><b>Until </b></font>Ch <font color="#000080">= </font><font color="#800000">#27</font><font color="#000080">;
   </font>Ch <font color="#000080">:= </font><font color="#800000">#0</font><font color="#000080">;
   </font><font color="#FF0000"><b>Repeat
</b></font>   	<font color="#FF0000"><b>If </b></font>Ch <font color="#000080">&lt;&gt; </font><font color="#800000">#0 </font><font color="#FF0000"><b>Then </b></font>Ch <font color="#000080">:= </font>ReadKey<font color="#000080">;
</font>   	Circle<font color="#000080">(</font>_Hollow<font color="#000080">, </font>Random<font color="#000080">(</font><font color="#800000">280</font><font color="#000080">)+</font><font color="#800000">20</font><font color="#000080">, </font>Random<font color="#000080">(</font><font color="#800000">160</font><font color="#000080">)+</font><font color="#800000">20</font><font color="#000080">, </font>Random<font color="#000080">(</font><font color="#800000">20</font><font color="#000080">), </font>Random<font color="#000080">(</font><font color="#800000">256</font><font color="#000080">));
</font>   	<font color="#FF0000"><b>If </b></font>KeyPressed <font color="#FF0000"><b>Then </b></font>Ch <font color="#000080">:= </font>ReadKey <font color="#FF0000"><b>Else </b></font>Ch <font color="#000080">:= </font><font color="#800000">#0</font><font color="#000080">;
   </font><font color="#FF0000"><b>Until </b></font>Ch <font color="#000080">= </font><font color="#800000">#27</font><font color="#000080">;
   </font>Ch <font color="#000080">:= </font><font color="#800000">#0</font><font color="#000080">;
   </font><font color="#FF0000"><b>Repeat
</b></font>   	<font color="#FF0000"><b>If </b></font>Ch <font color="#000080">&lt;&gt; </font><font color="#800000">#0 </font><font color="#FF0000"><b>Then </b></font>Ch <font color="#000080">:= </font>ReadKey<font color="#000080">;
</font>   	Circle<font color="#000080">(</font>_Filled<font color="#000080">, </font>Random<font color="#000080">(</font><font color="#800000">280</font><font color="#000080">)+</font><font color="#800000">20</font><font color="#000080">, </font>Random<font color="#000080">(</font><font color="#800000">160</font><font color="#000080">)+</font><font color="#800000">20</font><font color="#000080">, </font>Random<font color="#000080">(</font><font color="#800000">20</font><font color="#000080">), </font>Random<font color="#000080">(</font><font color="#800000">256</font><font color="#000080">));
</font>   	<font color="#FF0000"><b>If </b></font>KeyPressed <font color="#FF0000"><b>Then </b></font>Ch <font color="#000080">:= </font>ReadKey <font color="#FF0000"><b>Else </b></font>Ch <font color="#000080">:= </font><font color="#800000">#0</font><font color="#000080">;
   </font><font color="#FF0000"><b>Until </b></font>Ch <font color="#000080">= </font><font color="#800000">#27</font><font color="#000080">;
   </font>SetVideoMode<font color="#000080">(</font><font color="#800000">$03</font><font color="#000080">);
   </font>WriteLn<font color="#000080">(</font><font color="#800000">'Programmed by Ryan Jones'</font><font color="#000080">);
</font><font color="#FF0000"><b>End</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0249.PAS">Original</a><b>]</b></p></body>
</html>
