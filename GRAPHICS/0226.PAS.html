<html>
<head><title> "Yet Another Plasma Drawing Example" by RON NOSSAMAN</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0226.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{another plasma. Uses John Bridges' 360x480x256 non standard vga mode,
 somebody elses plasma routine, yet another person's palette cycle
 routine, and my color mutator. }

</i></font><font color="#FF0000"><b>uses </b></font>crt<font color="#000080">,</font>printer<font color="#000080">;
</font><font color="#FF0000"><b>Const
  </b></font>granularity<font color="#000080">=</font><font color="#800000">0.5</font><font color="#000080">;
  </font>EndProgram<font color="#000080">:</font>Boolean<font color="#000080">=</font>False<font color="#000080">;
  </font>DelayFactor<font color="#000080">:</font>Byte<font color="#000080">=</font><font color="#800000">20</font><font color="#000080">;
  </font>skyr<font color="#000080">=</font><font color="#800000">0</font><font color="#000080">;
  </font>skyg<font color="#000080">=</font><font color="#800000">0</font><font color="#000080">;
  </font>skyb<font color="#000080">=</font><font color="#800000">55</font><font color="#000080">;

</font><font color="#FF0000"><b>var
  </b></font>pal<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">773</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
  </font>r<font color="#000080">,</font>g<font color="#000080">,</font>b<font color="#000080">,</font>dir<font color="#000080">,</font>which<font color="#000080">:</font>byte<font color="#000080">;
  </font>i<font color="#000080">,</font>j<font color="#000080">,</font>counter<font color="#000080">:</font>integer<font color="#000080">;
  </font>ch<font color="#000080">:</font>char<font color="#000080">;


</font><font color="#008000"><i>{$F+}
</i></font><font color="#FF0000"><b>procedure </b></font>set360x480<font color="#000080">;
</font><font color="#008000"><i>{courtesy of John Bridges}
</i></font><font color="#FF0000"><b>begin
   asm
      </b></font><font color="#FF00FF">push si
      push di
      mov ax,12h     </font><font color="#008000"><i>{clear video memory with bios}
      </i></font><font color="#FF00FF">int 10h        </font><font color="#008000"><i>{and set 640x480x16 mode}
      </i></font><font color="#FF00FF">mov ax,13h     </font><font color="#008000"><i>{set 320x200x256 mode with bios}
      </i></font><font color="#FF00FF">int 10h
      mov dx,3c4h    </font><font color="#008000"><i>{alter sequencer registers}
      </i></font><font color="#FF00FF">mov ax,0604h   </font><font color="#008000"><i>{disable chain 4}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax,0100h   </font><font color="#008000"><i>{syncronus reset}
      </i></font><font color="#FF00FF">out dx,ax
      mov dx,3c2h
      mov al,0e7h
      out dx,al
      mov dx,3c4h
      mov ax,0300h
      out dx,ax
      mov dx,3d4h
      mov al,11h
      out dx,al
      inc dx
      in al,dx
      and al,7fh
      out dx,al
      dec dx
      mov ax,06b00h  </font><font color="#008000"><i>{horiz total}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax,05901h  </font><font color="#008000"><i>{horiz displayed}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax,05a02h  </font><font color="#008000"><i>{start horiz blanking}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax,08e03h  </font><font color="#008000"><i>{end horiz blanking}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax, 05e04h  </font><font color="#008000"><i>{start h sync}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax, 08a05h  </font><font color="#008000"><i>{end h sync}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax, 00d06h  </font><font color="#008000"><i>{vertical total}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax, 03e07h  </font><font color="#008000"><i>{overflow}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax, 04009h  </font><font color="#008000"><i>{cell height}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax, 0ea10h  </font><font color="#008000"><i>{v sync start}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax, 0ac11h  </font><font color="#008000"><i>{v sync end and protect cr0-cr7}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax, 0df12h  </font><font color="#008000"><i>{vertical displayed}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax, 02d13h  </font><font color="#008000"><i>{offset}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax, 00014h  </font><font color="#008000"><i>{turn off dword mode}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax, 0e715h  </font><font color="#008000"><i>{v blank start}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax, 00616h  </font><font color="#008000"><i>{v blank end}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax, 0e317h  </font><font color="#008000"><i>{turn on byte mode}
      </i></font><font color="#FF00FF">out dx,ax
     pop di
     pop si
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>dot360x480<font color="#000080">(</font>drawx<font color="#000080">,</font>drawy<font color="#000080">,</font>color<font color="#000080">:</font>word<font color="#000080">);
</font><font color="#FF0000"><b>begin
   asm
       </b></font><font color="#FF00FF">mov ax,0a000h                </font><font color="#008000"><i>{VGA_SEGMENT}
       </i></font><font color="#FF00FF">mov es,ax
       mov ax,90                    </font><font color="#008000"><i>{SCREEN_WIDTH/4}
       </i></font><font color="#FF00FF">mul DrawY
       mov di,DrawX
       shr di,1
       shr di,1
       add di,ax
       mov cl,byte ptr DrawX
       and cl,3
       mov ah,1
       shl ah,cl
       mov al,2                    </font><font color="#008000"><i>{MAP_MASK}
       </i></font><font color="#FF00FF">mov dx,03c4h                </font><font color="#008000"><i>{SC_INDEX}
       </i></font><font color="#FF00FF">out dx,ax
       mov al,byte ptr Color
       stosb                       </font><font color="#008000"><i>{draw pixel}
    </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Read360x480<font color="#000080">(</font>Readx<font color="#000080">,</font>Ready<font color="#000080">:</font>word<font color="#000080">):</font>word<font color="#000080">;
</font><font color="#008000"><i>{Read360x480 PROC FAR ReadX:WORD, ReadY:WORD RETURNS result:WORD}
</i></font><font color="#FF0000"><b>begin
   asm
       </b></font><font color="#FF00FF">mov ax,0a000h                </font><font color="#008000"><i>{VGA_SEGMENT}
       </i></font><font color="#FF00FF">mov es,ax
       mov ax,90                    </font><font color="#008000"><i>{SCREEN_WIDTH/4}
       </i></font><font color="#FF00FF">mul ReadY
       mov si,ReadX
       shr si,1
       shr si,1
       add si,ax
       mov ah,byte ptr ReadX
       and ah,3
       mov al,4                    </font><font color="#008000"><i>{READ_MAP}
       </i></font><font color="#FF00FF">mov dx,3ceh                 </font><font color="#008000"><i>{GC_INDEX}
       </i></font><font color="#FF00FF">out dx,ax
       SEGES mov al,[si]
       sub ah,ah
       mov @result,ax
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{$F-}


</i></font><font color="#FF0000"><b>procedure </b></font>bump<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>r<font color="#000080">:</font>byte<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>g<font color="#000080">:</font>byte<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>b<font color="#000080">:</font>byte<font color="#000080">);
</font><font color="#008000"><i>{this one's mine. Inc/dec one r, g, or b value to make returned
 color one bit off from delivered one.
 Ron Nossaman       nossaman@southwind.net }
</i></font><font color="#FF0000"><b>begin
   </b></font>dec<font color="#000080">(</font>counter<font color="#000080">);
   </font><font color="#FF0000"><b>if </b></font>counter<font color="#000080">&lt;=</font><font color="#800000">0 </font><font color="#FF0000"><b>then
   begin
      </b></font>counter<font color="#000080">:=</font>random<font color="#000080">(</font><font color="#800000">10</font><font color="#000080">)+</font><font color="#800000">1</font><font color="#000080">;
      </font>dir<font color="#000080">:=</font>random<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">);
      </font>which<font color="#000080">:=</font>random<font color="#000080">(</font><font color="#800000">3</font><font color="#000080">);
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font>dec<font color="#000080">(</font>counter<font color="#000080">);
   </font><font color="#FF0000"><b>case </b></font>dir <font color="#FF0000"><b>of
     </b></font><font color="#800000">0</font><font color="#000080">: </font><font color="#FF0000"><b>case </b></font>which <font color="#FF0000"><b>of
         </b></font><font color="#800000">0</font><font color="#000080">:</font><font color="#FF0000"><b>if </b></font>r<font color="#000080">&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>dec<font color="#000080">(</font>r<font color="#000080">) </font><font color="#FF0000"><b>else </b></font>counter<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
         </font><font color="#800000">1</font><font color="#000080">:</font><font color="#FF0000"><b>if </b></font>g<font color="#000080">&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>dec<font color="#000080">(</font>g<font color="#000080">) </font><font color="#FF0000"><b>else </b></font>counter<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
         </font><font color="#800000">2</font><font color="#000080">:</font><font color="#FF0000"><b>if </b></font>b<font color="#000080">&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>dec<font color="#000080">(</font>b<font color="#000080">) </font><font color="#FF0000"><b>else </b></font>counter<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
     </font><font color="#800000">1</font><font color="#000080">: </font><font color="#FF0000"><b>case </b></font>which <font color="#FF0000"><b>of
         </b></font><font color="#800000">0</font><font color="#000080">:</font><font color="#FF0000"><b>if </b></font>r<font color="#000080">&lt;</font><font color="#800000">63 </font><font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>r<font color="#000080">) </font><font color="#FF0000"><b>else </b></font>counter<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
         </font><font color="#800000">1</font><font color="#000080">:</font><font color="#FF0000"><b>if </b></font>g<font color="#000080">&lt;</font><font color="#800000">63 </font><font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>g<font color="#000080">) </font><font color="#FF0000"><b>else </b></font>counter<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
         </font><font color="#800000">2</font><font color="#000080">:</font><font color="#FF0000"><b>if </b></font>b<font color="#000080">&lt;</font><font color="#800000">63 </font><font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>b<font color="#000080">) </font><font color="#FF0000"><b>else </b></font>counter<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;



</font><font color="#FF0000"><b>Procedure </b></font>CyclePalette<font color="#000080">(</font>s<font color="#000080">,</font>e<font color="#000080">:</font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>r<font color="#000080">,</font>g<font color="#000080">,</font>b<font color="#000080">:</font>byte<font color="#000080">;
    </font>p<font color="#000080">,</font>j<font color="#000080">:</font>word<font color="#000080">;
</font><font color="#FF0000"><b>Begin
   </b></font>r<font color="#000080">:=</font>pal<font color="#000080">[</font>s<font color="#000080">*</font><font color="#800000">3</font><font color="#000080">];
   </font>g<font color="#000080">:=</font>pal<font color="#000080">[</font>s<font color="#000080">*</font><font color="#800000">3</font><font color="#000080">+</font><font color="#800000">1</font><font color="#000080">];
   </font>b<font color="#000080">:=</font>pal<font color="#000080">[</font>s<font color="#000080">*</font><font color="#800000">3</font><font color="#000080">+</font><font color="#800000">2</font><font color="#000080">];
   </font>bump<font color="#000080">(</font>r<font color="#000080">,</font>g<font color="#000080">,</font>b<font color="#000080">);
   </font>move<font color="#000080">(</font>pal<font color="#000080">[</font>s<font color="#000080">*</font><font color="#800000">3</font><font color="#000080">],</font>pal<font color="#000080">[</font>s<font color="#000080">*</font><font color="#800000">3</font><font color="#000080">+</font><font color="#800000">3</font><font color="#000080">],(</font>e<font color="#000080">-(</font>s<font color="#000080">))*</font><font color="#800000">3</font><font color="#000080">);
   </font>pal<font color="#000080">[</font>s<font color="#000080">*</font><font color="#800000">3</font><font color="#000080">]:=</font>r<font color="#000080">;
   </font>pal<font color="#000080">[</font>s<font color="#000080">*</font><font color="#800000">3</font><font color="#000080">+</font><font color="#800000">1</font><font color="#000080">]:=</font>g<font color="#000080">;
   </font>pal<font color="#000080">[</font>s<font color="#000080">*</font><font color="#800000">3</font><font color="#000080">+</font><font color="#800000">2</font><font color="#000080">]:=</font>b<font color="#000080">;
 </font><font color="#008000"><i>{install palette}
   </i></font><font color="#FF0000"><b>for </b></font>p<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do
   begin
      </b></font>j<font color="#000080">:=</font>p<font color="#000080">*</font><font color="#800000">3</font><font color="#000080">;
      </font><font color="#FF0000"><b>ASM
        </b></font><font color="#FF00FF">CLI
      </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
      </font>Port<font color="#000080">[</font><font color="#800000">$3C8</font><font color="#000080">]:=</font>p<font color="#000080">;
      </font>Port<font color="#000080">[</font><font color="#800000">$3C9</font><font color="#000080">]:=</font>pal<font color="#000080">[</font>j<font color="#000080">];
      </font>Port<font color="#000080">[</font><font color="#800000">$3C9</font><font color="#000080">]:=</font>pal<font color="#000080">[</font>j<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">];
      </font>Port<font color="#000080">[</font><font color="#800000">$3C9</font><font color="#000080">]:=</font>pal<font color="#000080">[</font>j<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">];
      </font><font color="#FF0000"><b>ASM
        </b></font><font color="#FF00FF">STI
      </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;



</font><font color="#FF0000"><b>procedure </b></font>setpixel<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>hue<font color="#000080">:</font>integer<font color="#000080">);
</font><font color="#008000"><i>{with brute force (dip stick) clipping}
</i></font><font color="#FF0000"><b>begin
   if </b></font>x<font color="#000080">&lt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>exit<font color="#000080">;
   </font><font color="#FF0000"><b>if </b></font>y<font color="#000080">&lt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>exit<font color="#000080">;
   </font><font color="#FF0000"><b>if </b></font>x<font color="#000080">&gt;</font><font color="#800000">359 </font><font color="#FF0000"><b>then </b></font>exit<font color="#000080">;
   </font><font color="#FF0000"><b>if </b></font>y<font color="#000080">&gt;</font><font color="#800000">479 </font><font color="#FF0000"><b>then </b></font>exit<font color="#000080">;
   </font>dot360x480<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>hue<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;



</font><font color="#FF0000"><b>Procedure </b></font>dopal<font color="#000080">;        </font><font color="#008000"><i>{define palette}
</i></font><font color="#FF0000"><b>var </b></font>iback<font color="#000080">,</font>i3<font color="#000080">,</font>i<font color="#000080">,</font>j<font color="#000080">:</font>integer<font color="#000080">;
    </font>dir<font color="#000080">,</font>which<font color="#000080">:</font>byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
   </b></font>pal<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]:=</font><font color="#800000">0</font><font color="#000080">;
   </font>pal<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]:=</font><font color="#800000">0</font><font color="#000080">;
   </font>pal<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">]:=</font><font color="#800000">0</font><font color="#000080">;
   </font>pal<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">]:=</font>random<font color="#000080">(</font><font color="#800000">10</font><font color="#000080">)+</font><font color="#800000">26</font><font color="#000080">;
   </font>pal<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">]:=</font>random<font color="#000080">(</font><font color="#800000">10</font><font color="#000080">)+</font><font color="#800000">26</font><font color="#000080">;
   </font>pal<font color="#000080">[</font><font color="#800000">5</font><font color="#000080">]:=</font>random<font color="#000080">(</font><font color="#800000">10</font><font color="#000080">)+</font><font color="#800000">26</font><font color="#000080">;
   </font>counter<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
   </font>r<font color="#000080">:=</font>pal<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">];
   </font>g<font color="#000080">:=</font>pal<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">];
   </font>b<font color="#000080">:=</font>pal<font color="#000080">[</font><font color="#800000">5</font><font color="#000080">];
   </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do
   begin
      </b></font>bump<font color="#000080">(</font>r<font color="#000080">,</font>g<font color="#000080">,</font>b<font color="#000080">);
      </font>pal<font color="#000080">[</font>i<font color="#000080">*</font><font color="#800000">3</font><font color="#000080">]:=</font>r<font color="#000080">;
      </font>pal<font color="#000080">[</font>i<font color="#000080">*</font><font color="#800000">3</font><font color="#000080">+</font><font color="#800000">1</font><font color="#000080">]:=</font>g<font color="#000080">;
      </font>pal<font color="#000080">[</font>i<font color="#000080">*</font><font color="#800000">3</font><font color="#000080">+</font><font color="#800000">2</font><font color="#000080">]:=</font>b<font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;



</font><font color="#FF0000"><b>procedure </b></font>installpal<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>pseg<font color="#000080">,</font>pofs<font color="#000080">:</font>word<font color="#000080">;
</font><font color="#FF0000"><b>begin
    </b></font>pseg<font color="#000080">:=</font>seg<font color="#000080">(</font>pal<font color="#000080">);
    </font>pofs<font color="#000080">:=</font>ofs<font color="#000080">(</font>pal<font color="#000080">);
    </font>set360x480<font color="#000080">;
    </font><font color="#FF0000"><b>asm
      </b></font><font color="#FF00FF">mov ah,$10;
      mov al,$12;
      mov bx,0;
      mov cx,256;
      mov dx,pofs;
      mov es,pseg;
      int $10;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>adjust<font color="#000080">(</font>xa<font color="#000080">,</font>ya<font color="#000080">,</font>x<font color="#000080">,</font>y<font color="#000080">,</font>xb<font color="#000080">,</font>yb<font color="#000080">:</font>Integer<font color="#000080">);
</font><font color="#FF0000"><b>Var
  </b></font>d<font color="#000080">,</font>v<font color="#000080">:</font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  if </b></font>read360x480<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">)&lt;&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then
    </b></font>Exit<font color="#000080">;
  </font>d<font color="#000080">:=</font>abs<font color="#000080">(</font>xa<font color="#000080">-</font>xb<font color="#000080">)+</font>abs<font color="#000080">(</font>ya<font color="#000080">-</font>yb<font color="#000080">);
  </font>v<font color="#000080">:=</font>trunc<font color="#000080">((</font>read360x480<font color="#000080">(</font>xa<font color="#000080">,</font>ya<font color="#000080">)+</font>read360x480<font color="#000080">(</font>xb<font color="#000080">,</font>yb<font color="#000080">))/</font><font color="#800000">2</font><font color="#000080">+
      (</font>random<font color="#000080">-</font><font color="#800000">0.5</font><font color="#000080">)*</font>d<font color="#000080">*</font>granularity<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>v<font color="#000080">&lt;</font><font color="#800000">1 </font><font color="#FF0000"><b>then
    </b></font>v<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>v<font color="#000080">&gt;=</font><font color="#800000">255 </font><font color="#FF0000"><b>then
    </b></font>v<font color="#000080">:=</font><font color="#800000">255</font><font color="#000080">;
  </font>setpixel<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>v<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>subDivide<font color="#000080">(</font>x1<font color="#000080">, </font>y1<font color="#000080">, </font>x2<font color="#000080">, </font>y2<font color="#000080">:</font>Integer<font color="#000080">);
</font><font color="#FF0000"><b>Var
  </b></font>x<font color="#000080">, </font>y<font color="#000080">:</font>Integer<font color="#000080">;
  </font>v<font color="#000080">:</font>Real<font color="#000080">;
</font><font color="#FF0000"><b>begin
  if </b></font>KeyPressed <font color="#FF0000"><b>then
    </b></font>Exit<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>x2<font color="#000080">-</font>x1 <font color="#000080">&lt;</font><font color="#800000">2</font><font color="#000080">)</font><font color="#FF0000"><b>and</b></font><font color="#000080">(</font>y2<font color="#000080">-</font>y1 <font color="#000080">&lt;</font><font color="#800000">2</font><font color="#000080">) </font><font color="#FF0000"><b>then
    </b></font>Exit<font color="#000080">;
  </font>x<font color="#000080">:=(</font>x1<font color="#000080">+</font>x2<font color="#000080">) </font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">;
  </font>y<font color="#000080">:=(</font>y1<font color="#000080">+</font>y2<font color="#000080">) </font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">;
  </font>adjust<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y1<font color="#000080">);
  </font>adjust<font color="#000080">(</font>x2<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">);
  </font>adjust<font color="#000080">(</font>x1<font color="#000080">,</font>y2<font color="#000080">,</font>x<font color="#000080">,</font>y2<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">);
  </font>adjust<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x1<font color="#000080">,</font>y<font color="#000080">,</font>x1<font color="#000080">,</font>y2<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>read360x480<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">)=</font><font color="#800000">0 </font><font color="#FF0000"><b>then
  begin
    </b></font>v<font color="#000080">:=(</font>read360x480<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">)+</font>read360x480<font color="#000080">(</font>x2<font color="#000080">,</font>y1<font color="#000080">)+</font>read360x480<font color="#000080">(</font>x2<font color="#000080">,</font>y2<font color="#000080">)+
          </font>read360x480<font color="#000080">(</font>x1<font color="#000080">,</font>y2<font color="#000080">))/</font><font color="#800000">4</font><font color="#000080">;
    </font>setpixel<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>Trunc<font color="#000080">(</font>v<font color="#000080">));
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>SubDivide<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x<font color="#000080">,</font>y<font color="#000080">);
  </font>subDivide<font color="#000080">(</font>x<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y<font color="#000080">);
  </font>subDivide<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">);
  </font>subDivide<font color="#000080">(</font>x1<font color="#000080">,</font>y<font color="#000080">,</font>x<font color="#000080">,</font>y2<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;



</font><font color="#FF0000"><b>begin
   </b></font>randomize<font color="#000080">;
   </font>dopal<font color="#000080">;
   </font>installpal<font color="#000080">;
   </font>Randomize<font color="#000080">;
   </font>setpixel<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">+</font>random<font color="#000080">(</font><font color="#800000">255</font><font color="#000080">));
   </font>setpixel<font color="#000080">(</font><font color="#800000">359</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">+</font>random<font color="#000080">(</font><font color="#800000">255</font><font color="#000080">));
   </font>setpixel<font color="#000080">(</font><font color="#800000">359</font><font color="#000080">,</font><font color="#800000">479</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">+</font>random<font color="#000080">(</font><font color="#800000">255</font><font color="#000080">));
   </font>setpixel<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">479</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">+</font>random<font color="#000080">(</font><font color="#800000">255</font><font color="#000080">));
   </font>SubDivide<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">359</font><font color="#000080">,</font><font color="#800000">479</font><font color="#000080">);
   </font><font color="#FF0000"><b>Repeat
      </b></font>cyclepalette<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">255</font><font color="#000080">);
      </font>Delay<font color="#000080">(</font>DelayFactor<font color="#000080">);
      </font><font color="#FF0000"><b>If </b></font>KeyPressed <font color="#FF0000"><b>then
      Case </b></font>ReadKey <font color="#FF0000"><b>of
        </b></font><font color="#800000">#0</font><font color="#000080">:</font><font color="#FF0000"><b>Case </b></font>ReadKey <font color="#FF0000"><b>of
               </b></font><font color="#800000">#80</font><font color="#000080">,</font><font color="#800000">#75</font><font color="#000080">:</font><font color="#FF0000"><b>If </b></font>DelayFactor<font color="#000080">&lt;</font><font color="#800000">255 </font><font color="#FF0000"><b>then </b></font>Inc<font color="#000080">(</font>DelayFactor<font color="#000080">);</font><font color="#008000"><i>{down,left}
               </i></font><font color="#800000">#72</font><font color="#000080">,</font><font color="#800000">#77</font><font color="#000080">:</font><font color="#FF0000"><b>If </b></font>DelayFactor<font color="#000080">&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>Dec<font color="#000080">(</font>DelayFactor<font color="#000080">);</font><font color="#008000"><i>{up,right}
             </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
        </font><font color="#800000">#113</font><font color="#000080">,</font><font color="#800000">#81</font><font color="#000080">,</font><font color="#800000">#27 </font><font color="#008000"><i>{Q,q}</i></font><font color="#000080">:</font>EndProgram<font color="#000080">:=</font>True<font color="#000080">;
        </font><font color="#800000">'p'</font><font color="#000080">:</font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">86 </font><font color="#FF0000"><b>do
           begin
            </b></font>write<font color="#000080">(</font>lst<font color="#000080">,</font>i<font color="#000080">*</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">': '</font><font color="#000080">,</font>pal<font color="#000080">[</font>i<font color="#000080">*</font><font color="#800000">9</font><font color="#000080">],</font><font color="#800000">','</font><font color="#000080">,</font>pal<font color="#000080">[</font>i<font color="#000080">*</font><font color="#800000">9</font><font color="#000080">+</font><font color="#800000">1</font><font color="#000080">],</font><font color="#800000">','</font><font color="#000080">,</font>pal<font color="#000080">[</font>i<font color="#000080">*</font><font color="#800000">9</font><font color="#000080">+</font><font color="#800000">2</font><font color="#000080">],</font><font color="#800000">'   '</font><font color="#000080">);
            </font>write<font color="#000080">(</font>lst<font color="#000080">,</font>pal<font color="#000080">[</font>i<font color="#000080">*</font><font color="#800000">9</font><font color="#000080">+</font><font color="#800000">3</font><font color="#000080">],</font><font color="#800000">','</font><font color="#000080">,</font>pal<font color="#000080">[</font>i<font color="#000080">*</font><font color="#800000">9</font><font color="#000080">+</font><font color="#800000">4</font><font color="#000080">],</font><font color="#800000">','</font><font color="#000080">,</font>pal<font color="#000080">[</font>i<font color="#000080">*</font><font color="#800000">9</font><font color="#000080">+</font><font color="#800000">5</font><font color="#000080">],</font><font color="#800000">'   '</font><font color="#000080">);
            </font>writeln<font color="#000080">(</font>lst<font color="#000080">,</font>pal<font color="#000080">[</font>i<font color="#000080">*</font><font color="#800000">9</font><font color="#000080">+</font><font color="#800000">6</font><font color="#000080">],</font><font color="#800000">','</font><font color="#000080">,</font>pal<font color="#000080">[</font>i<font color="#000080">*</font><font color="#800000">9</font><font color="#000080">+</font><font color="#800000">7</font><font color="#000080">],</font><font color="#800000">','</font><font color="#000080">,</font>pal<font color="#000080">[</font>i<font color="#000080">*</font><font color="#800000">9</font><font color="#000080">+</font><font color="#800000">8</font><font color="#000080">]);
           </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>Until </b></font>EndProgram<font color="#000080">;

  </font>TextMode<font color="#000080">(</font>lastmode<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0226.PAS">Original</a><b>]</b></p></body>
</html>
