<html>
<head><title> "DOS Flush function" by FRANK DIACHEYSN</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to DOS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0058.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
  Coded By Frank Diacheysn Of Gemini Software

  FUNCTION DOSFLUSH

  Input......: F = Variable File (Text Or File) To &quot;Flush&quot;
             :
             :
             :
             :

  Output.....: Logical
             :        TRUE  = Successfully Flushed Buffers
             :        FALSE = Flush Failed
             :
             :

  Example....: IF DOSFLUSH( TextFile ) THEN
             :   WriteLn('DOS Buffers For TEMP.TXT Flushed To Disk.')
             : ELSE
             :   WriteLn('DOS Error While Trying To Flush Buffers For TEMP.TXT');
             :

  Description: Flushes DOS Buffers For A File
             :
             :
             :
             :

}
</i></font><font color="#FF0000"><b>FUNCTION </b></font>DOSFLUSH<font color="#000080">( </font><font color="#FF0000"><b>VAR </b></font>F <font color="#000080">):</font>BOOLEAN<font color="#000080">; </font><font color="#FF0000"><b>ASSEMBLER</b></font><font color="#000080">;
</font><font color="#FF0000"><b>ASM
  </b></font><font color="#FF00FF">MOV AX, 3000H
  INT 21H
  CMP AL, 3
  JL @Old
  CMP AH, 1EH
  LES DI, F
  MOV BX, ES:[DI]
  MOV AH, 68H
  INT 21H
  JC @BadEnd
  JMP @GoodEnd

  @Old:
  LES DI, F
  MOV BX, ES:[DI]
  MOV AH, 45H
  INT 21H
  JC @BadEnd
  @Ok:
  MOV BX, AX
  MOV AH, 3EH
  INT 21H
  JC @BadEnd
  @GoodEnd:
  MOV AX, 0
  @BadEnd:
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to DOS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0058.PAS">Original</a><b>]</b></p></body>
</html>
