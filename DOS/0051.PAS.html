<html>
<head><title> "IOResult Codes" by DAVID ADAMSON</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to DOS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0051.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#000080">&yuml;
</font><font color="#FF0000"><b>unit </b></font>CustExit<font color="#000080">;
</font><font color="#008000"><i>(*--------------------------------------------------------------------------
     Original source code by David Drzyzga, FidoNet 1:2619/209, SysOp of
         =&gt;&gt; CUTTER JOHN'S &lt;&lt;= (516) 234-1737 [HST/DS/v32bis/v32ter]
                  Offered to the public domain 04-04-1994
---------------------------------------------------------------------------*)
</i></font><font color="#FF0000"><b>interface
implementation
uses
  </b></font>Crt<font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>ExitAddress <font color="#000080">: </font>pointer<font color="#000080">;
</font><font color="#008000"><i>{$F+}
</i></font><font color="#FF0000"><b>procedure </b></font>ErrorExit<font color="#000080">;
</font><font color="#008000"><i>{$F-}
</i></font><font color="#FF0000"><b>begin
  if </b></font>ErrorAddr <font color="#000080">&lt;&gt; </font><font color="#FF0000"><b>Nil then begin
    </b></font>NormVideo<font color="#000080">;
    </font>ClrScr<font color="#000080">;
    </font>Writeln<font color="#000080">(</font><font color="#800000">'Program terminated with error number '</font><font color="#000080">, </font>ExitCode<font color="#000080">:</font><font color="#800000">3</font><font color="#000080">, </font><font color="#800000">'.'</font><font color="#000080">);
      </font><font color="#FF0000"><b>case </b></font>ExitCode <font color="#FF0000"><b>of
        </b></font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">18     </font><font color="#000080">: </font>write<font color="#000080">( ^</font>G <font color="#000080">+ </font><font color="#800000">'DOS ERROR: '</font><font color="#000080">);
        </font><font color="#800000">100</font><font color="#000080">..</font><font color="#800000">106  </font><font color="#000080">: </font>write<font color="#000080">( ^</font>G <font color="#000080">+ </font><font color="#800000">'I/O ERROR: '</font><font color="#000080">);
        </font><font color="#800000">150</font><font color="#000080">..</font><font color="#800000">162</font><font color="#000080">,
        </font><font color="#800000">200</font><font color="#000080">..</font><font color="#800000">216  </font><font color="#000080">: </font>write<font color="#000080">( ^</font>G <font color="#000080">+ </font><font color="#800000">'CRITICAL ERROR: '</font><font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>Case </b></font>ExitCode <font color="#FF0000"><b>of
          </b></font><font color="#800000">1 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Invalid function number.'</font><font color="#000080">);
          </font><font color="#800000">2 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'File not found.'</font><font color="#000080">);
          </font><font color="#800000">3 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Path not found.'</font><font color="#000080">);
          </font><font color="#800000">4 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Too many open files.'</font><font color="#000080">);
          </font><font color="#800000">5 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'File access denied.'</font><font color="#000080">);
          </font><font color="#800000">6 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Invalid file handle.'</font><font color="#000080">);
         </font><font color="#800000">12 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Invalid file access code.'</font><font color="#000080">);
         </font><font color="#800000">15 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Invalid drive number.'</font><font color="#000080">);
         </font><font color="#800000">16 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Cannot remove current directory.'</font><font color="#000080">);
         </font><font color="#800000">17 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Cannot rename across drives.'</font><font color="#000080">);
         </font><font color="#800000">18 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'No More Files.'</font><font color="#000080">);
        </font><font color="#800000">100 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Disk read error.'</font><font color="#000080">);
        </font><font color="#800000">101 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Disk write error.'</font><font color="#000080">);
        </font><font color="#800000">102 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'File not assigned.'</font><font color="#000080">);
        </font><font color="#800000">103 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'File not open.'</font><font color="#000080">);
        </font><font color="#800000">104 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'File not open for input.'</font><font color="#000080">);
        </font><font color="#800000">105 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'File not open for output.'</font><font color="#000080">);
        </font><font color="#800000">106 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Invalid numeric format.'</font><font color="#000080">);
        </font><font color="#800000">150 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Disk is write-protected.'</font><font color="#000080">);
        </font><font color="#800000">151 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Unknown unit.'</font><font color="#000080">);
        </font><font color="#800000">152 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Drive not ready.'</font><font color="#000080">);
        </font><font color="#800000">153 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Unknown command.'</font><font color="#000080">);
        </font><font color="#800000">154 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'CRC error in data.'</font><font color="#000080">);
        </font><font color="#800000">155 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Bad drive request structure length.'</font><font color="#000080">);
        </font><font color="#800000">156 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Disk seek error.'</font><font color="#000080">);
        </font><font color="#800000">157 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Unknown media type.'</font><font color="#000080">);
        </font><font color="#800000">158 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Sector not found.'</font><font color="#000080">);
        </font><font color="#800000">159 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Printer out of paper.'</font><font color="#000080">);
        </font><font color="#800000">160 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Device write fault.'</font><font color="#000080">);
        </font><font color="#800000">161 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Device read fault.'</font><font color="#000080">);
        </font><font color="#800000">162 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Hardware failure.'</font><font color="#000080">);
        </font><font color="#800000">200 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Division by zero.'</font><font color="#000080">);
        </font><font color="#800000">201 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Range check error.'</font><font color="#000080">);
        </font><font color="#800000">202 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Stack overflow error.'</font><font color="#000080">);
        </font><font color="#800000">203 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Heap overflow error.'</font><font color="#000080">);
        </font><font color="#800000">204 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Invalid pointer operation.'</font><font color="#000080">);
        </font><font color="#800000">205 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Floating point overflow.'</font><font color="#000080">);
        </font><font color="#800000">206 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Floating point underflow.'</font><font color="#000080">);
        </font><font color="#800000">207 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Invalid floating point operation.'</font><font color="#000080">);
        </font><font color="#800000">208 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Overlay manager not installed.'</font><font color="#000080">);
        </font><font color="#800000">209 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Overlay file read error.'</font><font color="#000080">);
        </font><font color="#800000">210 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Object not initialized.'</font><font color="#000080">);
        </font><font color="#800000">211 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Call to abstract method.'</font><font color="#000080">);
        </font><font color="#800000">212 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Stream registration error.'</font><font color="#000080">);
        </font><font color="#800000">213 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Collection index out of range.'</font><font color="#000080">);
        </font><font color="#800000">214 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Collection overflow error.'</font><font color="#000080">);
        </font><font color="#800000">215 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'Arithmetic overflow error.'</font><font color="#000080">);
        </font><font color="#800000">216 </font><font color="#000080">: </font>Writeln<font color="#000080">(</font><font color="#800000">'General Protection fault.'</font><font color="#000080">);
      </font><font color="#FF0000"><b>else
        </b></font>Writeln<font color="#000080">( ^</font>G <font color="#000080">+ </font><font color="#800000">'Unknown Error.'</font><font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ Case }
    </i></font>ErrorAddr <font color="#000080">:= </font><font color="#FF0000"><b>Nil</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>Exitproc <font color="#000080">:= </font>ExitAddress<font color="#000080">;   </font><font color="#008000"><i>{ Restore original exit address }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ ErrorExit }
</i></font><font color="#FF0000"><b>begin
  </b></font>ExitAddress <font color="#000080">:= </font>ExitProc<font color="#000080">;   </font><font color="#008000"><i>{ Save original exit address    }
  </i></font>ExitProc    <font color="#000080">:= @</font>ErrorExit<font color="#000080">; </font><font color="#008000"><i>{ Install custom exit procedure }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">. </font><font color="#008000"><i>{ Unit CustExit }
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to DOS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0051.PAS">Original</a><b>]</b></p></body>
</html>
