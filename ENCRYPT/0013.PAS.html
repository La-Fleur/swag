<html>
<head><title> "SOUNDEX.PAS" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to ENCRYPT SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0013.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
REYNIR STEFANSSON

Somebody was saying something about Soundex hashing. Here is my
Implementation of that:
}

</i></font><font color="#FF0000"><b>Unit </b></font>Soundex<font color="#000080">;

</font><font color="#FF0000"><b>Interface

Type
  </b></font>Sdx4 <font color="#000080">= </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">4</font><font color="#000080">];

</font><font color="#FF0000"><b>Function </b></font>SoundexOf<font color="#000080">(</font>WorkStr <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">) : </font>Sdx4<font color="#000080">;

</font><font color="#FF0000"><b>Implementation

Var
  </b></font>Group <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">6</font><font color="#000080">] </font><font color="#FF0000"><b>of String</b></font><font color="#000080">[</font><font color="#800000">8</font><font color="#000080">];

</font><font color="#FF0000"><b>Function </b></font>ValidityOf<font color="#000080">(</font>Letter <font color="#000080">: </font>Char<font color="#000080">) : </font>Char<font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>Valu<font color="#000080">, </font>j <font color="#000080">: </font>Integer<font color="#000080">;
  </font>Chs     <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">8</font><font color="#000080">];
</font><font color="#FF0000"><b>begin
  For </b></font>Valu <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">6 </font><font color="#FF0000"><b>DO
  begin
    </b></font>Chs <font color="#000080">:= </font>Group<font color="#000080">[</font>Valu<font color="#000080">];
    </font><font color="#FF0000"><b>For </b></font>j <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>Length<font color="#000080">(</font>Chs<font color="#000080">) </font><font color="#FF0000"><b>DO
    begin
      if </b></font>UpCase<font color="#000080">(</font>Letter<font color="#000080">) = </font>Chs<font color="#000080">[</font>j<font color="#000080">] </font><font color="#FF0000"><b>then
        </b></font>ValidityOf <font color="#000080">:= </font>Chr<font color="#000080">(</font><font color="#800000">48</font><font color="#000080">+</font>Valu<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>SoundexOf<font color="#000080">(</font>WorkStr <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">) : </font>Sdx4<font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>Sndex <font color="#000080">: </font>Sdx4<font color="#000080">;
  </font>Oval<font color="#000080">,
  </font>Valu  <font color="#000080">: </font>Char<font color="#000080">;
  </font>i     <font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Sndex <font color="#000080">:= </font>Copy<font color="#000080">(</font>WorkStr<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
  </font>Oval  <font color="#000080">:= </font>ValidityOf<font color="#000080">(</font>WorkStr<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]);
  </font><font color="#FF0000"><b>For </b></font>i <font color="#000080">:= </font><font color="#800000">2 </font><font color="#FF0000"><b>to </b></font>Length<font color="#000080">(</font>WorkStr<font color="#000080">) </font><font color="#FF0000"><b>DO
  begin
    </b></font>Valu <font color="#000080">:= </font>ValidityOf<font color="#000080">(</font>WorkStr<font color="#000080">[</font>i<font color="#000080">]);
    </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>Valu <font color="#000080">&lt;&gt; </font><font color="#800000">'0'</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>Valu <font color="#000080">&lt;&gt; </font>Oval<font color="#000080">) </font><font color="#FF0000"><b>then
      </b></font>Sndex <font color="#000080">:= </font>Sndex <font color="#000080">+ </font>Valu<font color="#000080">;
    </font>Oval <font color="#000080">:= </font>Valu<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>Sndex <font color="#000080">:= </font>Sndex <font color="#000080">+ </font><font color="#800000">'000'</font><font color="#000080">;
  </font>SoundexOf <font color="#000080">:= </font>Sndex<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>Group<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">] := </font><font color="#800000">'AEHIOUWY'</font><font color="#000080">;
  </font>Group<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] := </font><font color="#800000">'BFPV'</font><font color="#000080">;
  </font>Group<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">] := </font><font color="#800000">'CGJKQSXZ'</font><font color="#000080">;
  </font>Group<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">] := </font><font color="#800000">'DT'</font><font color="#000080">;
  </font>Group<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">] := </font><font color="#800000">'L'</font><font color="#000080">;
  </font>Group<font color="#000080">[</font><font color="#800000">5</font><font color="#000080">] := </font><font color="#800000">'MN'</font><font color="#000080">;
  </font>Group<font color="#000080">[</font><font color="#800000">6</font><font color="#000080">] := </font><font color="#800000">'R'</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font><font color="#008000"><i>{
A Soundex-String looks like: `G032', one letter and three numbers.
Donald Knuth wrote about Soundexing in his _Art of Computer Programming_
series. I got my information out of Personal ComputerWorld (PCW), which in
turn got it from Knuth.
}
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to ENCRYPT SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0013.PAS">Original</a><b>]</b></p></body>
</html>
