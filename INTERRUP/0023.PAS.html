<html>
<head><title> "Create your own interrupt" by SALVATORE MESCHINI</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to INTERRUP SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0023.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#FF0000"><b>Program </b></font>How_To_Create_YOUR_OWN_Interrupt<font color="#000080">;

</font><font color="#008000"><i>(* Author: Salvatore Meschini - E-Mail: smeschini@ermes.it -
 WWW: http://www.ermes.it/pws/mesk - Please report bugs and suggestions -
 Get File Formats Encyclopedia at http://www.gdsoft.com/swag/ffe101.zip OR
 http://www.simtel.net/pub/simtelnet/msdos/pgmutl/ffe101.zip *)

</i></font><font color="#FF0000"><b>uses
  </b></font>crt<font color="#000080">, </font>DOS<font color="#000080">;

</font><font color="#FF0000"><b>var </b></font>dummy<font color="#000080">:</font>byte<font color="#000080">;

</font><font color="#008000"><i>(*----------------------------------------------------------------------------*)
</i></font><font color="#FF0000"><b>procedure </b></font>Main<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>clrscr<font color="#000080">;
    </font>textcolor<font color="#000080">(</font><font color="#800000">10</font><font color="#000080">);
    </font>writeln<font color="#000080">(</font><font color="#800000">'YOUR PROGRAM IS RUNNING!!! (Press any key)'</font><font color="#000080">);
    </font>readkey<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>(*----------------------------------------------------------------------------*)
</i></font><font color="#FF0000"><b>procedure </b></font>Buzzer<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>textcolor<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">);
    </font>writeln<font color="#000080">(</font><font color="#800000">'LONG BEEP...'</font><font color="#000080">);
    </font>sound<font color="#000080">(</font><font color="#800000">1000</font><font color="#000080">);
    </font>delay<font color="#000080">(</font><font color="#800000">1000</font><font color="#000080">);
    </font>nosound<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>(*----------------------------------------------------------------------------*)

</i></font><font color="#FF0000"><b>Procedure </b></font>PrintResult<font color="#000080">;
   </font><font color="#FF0000"><b>begin
     </b></font>textcolor<font color="#000080">(</font><font color="#800000">12</font><font color="#000080">);
     </font>writeln<font color="#000080">(</font><font color="#800000">'AL=03 * CL=1 = '</font><font color="#000080">,</font>dummy<font color="#000080">);
     </font>delay<font color="#000080">(</font><font color="#800000">1000</font><font color="#000080">);
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>(*----------------------------------------------------------------------------*)
</i></font><font color="#FF0000"><b>procedure </b></font>MyInt<font color="#000080">(</font>Flags<font color="#000080">, </font>CS<font color="#000080">, </font>IP<font color="#000080">, </font>AX<font color="#000080">, </font>BX<font color="#000080">, </font>CX<font color="#000080">, </font>DX<font color="#000080">, </font>SI<font color="#000080">, </font>DI<font color="#000080">, </font>DS<font color="#000080">, </font>ES<font color="#000080">, </font>BP<font color="#000080">: </font>Word<font color="#000080">);
                </font>interrupt<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    asm </b></font><font color="#FF00FF">cli </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>case </b></font>ax <font color="#FF0000"><b>of
      </b></font><font color="#800000">0001</font><font color="#000080">: </font>Main<font color="#000080">;
      </font><font color="#800000">0002</font><font color="#000080">: </font>Buzzer<font color="#000080">;
      </font><font color="#800000">0003</font><font color="#000080">: </font><font color="#FF0000"><b>asm
            </b></font><font color="#FF00FF">mul cl </font><font color="#008000"><i>{Do a silly mul (result -&gt; in AL)}
            </i></font><font color="#FF00FF">mov dummy,al
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#800000">0004</font><font color="#000080">: </font>PrintResult<font color="#000080">;
      </font><font color="#008000"><i>{...you can define your own routines...}
    </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">sti </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>(*----------------------------------------------------------------------------*)
</i></font><font color="#FF0000"><b>begin
  </b></font>setintvec<font color="#000080">(</font><font color="#800000">$FF</font><font color="#000080">, @</font>myint<font color="#000080">); </font><font color="#008000"><i>(* You can freely use interrupts from F1h (241) to
FFh (255)*)
  </i></font><font color="#FF0000"><b>asm
   </b></font><font color="#FF00FF">mov ax,0001
   int 0FFh    </font><font color="#008000"><i>{Run a whole PROGRAM with INT instruction!
                    Hint: Hard to trace 4hackers...}

   </i></font><font color="#FF00FF">mov ax,0002
   int 0FFh    </font><font color="#008000"><i>{Beep}

   </i></font><font color="#FF00FF">mov ax,0003
   mov cl,1
   int 0FFh     </font><font color="#008000"><i>{Multiply with result in AL}

   </i></font><font color="#FF00FF">mov ax,0004
   int 0FFh     </font><font color="#008000"><i>{Now call PrintResult}
  </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to INTERRUP SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0023.PAS">Original</a><b>]</b></p></body>
</html>
