<html>
<head><title> "Writing an ISR" by JON JASIUNAS</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to INTERRUP SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0013.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
JON JASIUNAS

Write you're own ISR, and perform whatever action you want whenever the
user presses the desired key(s).
}

</i></font><font color="#FF0000"><b>Var
  </b></font>OldInt9 <font color="#000080">: </font>Pointer<font color="#000080">;  </font><font color="#008000"><i>{- To save original int $09 address }
  </i></font>OldExit <font color="#000080">: </font>Pointer<font color="#000080">;  </font><font color="#008000"><i>{- To save original Exit proc }

</i></font><font color="#FF0000"><b>Procedure </b></font>TempInt9<font color="#000080">;  </font>INTERRUPT<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font><font color="#008000"><i>{ Check For keypress }
  { if pressed process and Exit }
  { else call original int $09 to process keystroke }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ TempInt9 }

</i></font><font color="#FF0000"><b>Procedure </b></font>CustomExit<font color="#000080">;  </font><font color="#FF0000"><b>Far</b></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
</b></font><font color="#008000"><i>{-Restore original Exit proc }
  </i></font>ExitProc <font color="#000080">:= </font>OldExit<font color="#000080">;

</font><font color="#008000"><i>{-Restore original int $09 }
  </i></font>SetIntVec<font color="#000080">(</font><font color="#800000">$09</font><font color="#000080">, </font>OldInt9<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;    </font><font color="#008000"><i>{ CustomExit }

</i></font><font color="#FF0000"><b>begin
</b></font><font color="#008000"><i>{-Save original Exit proc and install yours }
  </i></font>OldExit  <font color="#000080">:= </font>ExitProc<font color="#000080">;
  </font>ExitProc <font color="#000080">:= @</font>CustomExit<font color="#000080">;

</font><font color="#008000"><i>{-Save original int $09 and install yours }
  </i></font>GetIntVec<font color="#000080">(</font><font color="#800000">$09</font><font color="#000080">, </font>OldInt9<font color="#000080">);
  </font>SetIntVec<font color="#000080">(</font><font color="#800000">$09</font><font color="#000080">, @</font>TempInt9<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to INTERRUP SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0013.PAS">Original</a><b>]</b></p></body>
</html>
