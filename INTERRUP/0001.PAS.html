<html>
<head><title> "BITSTUFF.PAS" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to INTERRUP SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0001.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
 Well Percy (or is it Kerry?), I see that the regular crowd here have
 shown you how bit-level thingys work.  So, I'll give you a working
 example, including a Procedure to display the binary notation of any
 Integer, so you can play With the inFormation they've given you. The
 following Program reads &amp; displays info from the equipment list Word
 (Note: I've made [lazy] use of global Variables, do not emulate)...
}
(*******************************************************************)
</i></font><font color="#FF0000"><b>Program </b></font>BitsNBytes<font color="#000080">;                 </font><font color="#008000"><i>{ ...or Digital Road Kill       }
</i></font><font color="#FF0000"><b>Uses
  </b></font>Dos<font color="#000080">;                              </font><font color="#008000"><i>{ import Intr() and Registers   }
</i></font><font color="#FF0000"><b>Var
  </b></font>NumberFDD<font color="#000080">,                        </font><font color="#008000"><i>{ number of floppy drives       }
  </i></font>InitVMode<font color="#000080">,                        </font><font color="#008000"><i>{ intial video mode             }
  </i></font>COMcount<font color="#000080">,                         </font><font color="#008000"><i>{ number of serial ports        }
  </i></font>LPTcount    <font color="#000080">: </font>Byte<font color="#000080">;               </font><font color="#008000"><i>{ number of Printer ports       }
  </i></font>Is8087<font color="#000080">,                           </font><font color="#008000"><i>{ math copro installed?         }
  </i></font>IsMouse<font color="#000080">,                          </font><font color="#008000"><i>{ pointing device installed?    }
  </i></font>IsDMA<font color="#000080">,                            </font><font color="#008000"><i>{ DMA support installed?        }
  </i></font>IsGame<font color="#000080">,                           </font><font color="#008000"><i>{ game port installed?          }
  </i></font>IsModem     <font color="#000080">: </font>Boolean<font color="#000080">;            </font><font color="#008000"><i>{ internal modem installed?     }
  </i></font>EqWord      <font color="#000080">: </font>Word<font color="#000080">;               </font><font color="#008000"><i>{ the equipment list Word       }
  </i></font>Reg         <font color="#000080">: </font>Registers<font color="#000080">;          </font><font color="#008000"><i>{ to access CPU Registers       }
{-------------------------------------------------------------------}
</i></font><font color="#FF0000"><b>Function </b></font>BitSet<font color="#000080">(</font>AnyWord <font color="#000080">: </font>Word<font color="#000080">; </font>BitNum <font color="#000080">: </font>Byte<font color="#000080">) : </font>Boolean<font color="#000080">;
 </font><font color="#008000"><i>{ return True if bit BitNum of AnyWord is 1, else False if it's 0  }
</i></font><font color="#FF0000"><b>begin
  </b></font>BitSet <font color="#000080">:= (</font>BitNum <font color="#FF0000"><b>in </b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">15</font><font color="#000080">]) </font><font color="#FF0000"><b>and </b></font>ODD<font color="#000080">(</font>AnyWord <font color="#FF0000"><b>SHR </b></font>BitNum<font color="#000080">);
</font><font color="#FF0000"><b>end </b></font><font color="#008000"><i>{BitSet}</i></font><font color="#000080">;
</font><font color="#008000"><i>{-------------------------------------------------------------------}
</i></font><font color="#FF0000"><b>Procedure </b></font>WriteBitWord<font color="#000080">( </font>AnyWord <font color="#000080">: </font>Word <font color="#000080">);   </font><font color="#008000"><i>{ show Word as binary   }
</i></font><font color="#FF0000"><b>Var
  </b></font>BinString <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">16</font><font color="#000080">];                   </font><font color="#008000"><i>{ represent binary bits }
  </i></font>MaxBit<font color="#000080">,                                   </font><font color="#008000"><i>{ max number of bits    }
  </i></font>BitNum    <font color="#000080">: </font>Byte<font color="#000080">;                         </font><font color="#008000"><i>{ bits 0..15            }
</i></font><font color="#FF0000"><b>begin
  </b></font>BinString <font color="#000080">:= </font><font color="#800000">'0000000000000000'</font><font color="#000080">;          </font><font color="#008000"><i>{ default to 0          }
  </i></font>MaxBit <font color="#000080">:= </font>Length<font color="#000080">(</font>BinString<font color="#000080">);              </font><font color="#008000"><i>{ total bit count (16)  }
  </i></font><font color="#FF0000"><b>For </b></font>BitNum <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>PRED<font color="#000080">(</font>MaxBit<font color="#000080">) </font><font color="#FF0000"><b>do        </b></font><font color="#008000"><i>{ process bits (0..15)  }
    </i></font><font color="#FF0000"><b>if </b></font>BitSet<font color="#000080">(</font>AnyWord<font color="#000080">, </font>BitNum<font color="#000080">) </font><font color="#FF0000"><b>then
      </b></font>INC<font color="#000080">(</font>BinString<font color="#000080">[</font>MaxBit <font color="#000080">- </font>BitNum<font color="#000080">]);
  </font>Write<font color="#000080">( </font>BinString <font color="#000080">);                       </font><font color="#008000"><i>{ Write the binary Form }
</i></font><font color="#FF0000"><b>end </b></font><font color="#008000"><i>{WriteBitWord}</i></font><font color="#000080">;
</font><font color="#008000"><i>{-------------------------------------------------------------------}
</i></font><font color="#FF0000"><b>Procedure </b></font>ProcessEquipList<font color="#000080">;     </font><font color="#008000"><i>{ parse equipment list Word EqWord  }
</i></font><font color="#FF0000"><b>Var
  </b></font>BitNum  <font color="#000080">: </font>Byte<font color="#000080">;               </font><font color="#008000"><i>{ to check each bit                 }
  </i></font>EBitSet <font color="#000080">: </font>Boolean<font color="#000080">;            </font><font color="#008000"><i>{ True if a BitNum is 1, else False }
</i></font><font color="#FF0000"><b>begin
  For </b></font>BitNum <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">15 </font><font color="#FF0000"><b>do
  begin                                     </b></font><font color="#008000"><i>{ EqWord has 16 bits    }
    </i></font>EBitSet <font color="#000080">:= </font>BitSet<font color="#000080">(</font>EqWord<font color="#000080">,</font>BitNum<font color="#000080">);       </font><font color="#008000"><i>{ is this bit set?      }
    </i></font><font color="#FF0000"><b>Case </b></font>BitNum <font color="#FF0000"><b>of                          </b></font><font color="#008000"><i>{ each bit has meaning  }
      </i></font><font color="#800000">0       </font><font color="#000080">: </font><font color="#FF0000"><b>if </b></font>EBitSet <font color="#FF0000"><b>then             </b></font><font color="#008000"><i>{ if EqWord.0 is set    }
                  </i></font>NumberFDD <font color="#000080">:= (</font>EqWord <font color="#FF0000"><b>SHR </b></font><font color="#800000">6</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#800000">$3 </font><font color="#000080">+ </font><font color="#800000">1
                </font><font color="#FF0000"><b>else
                  </b></font>NumberFDD <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font><font color="#800000">1       </font><font color="#000080">: </font>Is8087    <font color="#000080">:= </font>EBitSet<font color="#000080">; </font><font color="#008000"><i>{ if math co-pro found  }
      </i></font><font color="#800000">2       </font><font color="#000080">: </font>IsMouse   <font color="#000080">:= </font>EBitSet<font color="#000080">; </font><font color="#008000"><i>{ if pointing device    }
      </i></font><font color="#800000">3       </font><font color="#000080">: ; </font><font color="#008000"><i>{reserved, do nothing}
      </i></font><font color="#800000">4       </font><font color="#000080">: </font>InitVMode <font color="#000080">:= (</font>EqWord <font color="#FF0000"><b>SHR </b></font>BitNum<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#800000">$3</font><font color="#000080">;
      </font><font color="#800000">5</font><font color="#000080">..</font><font color="#800000">7    </font><font color="#000080">: ; </font><font color="#008000"><i>{ignore}
      </i></font><font color="#800000">8       </font><font color="#000080">: </font>IsDMA     <font color="#000080">:= </font>EBitSet<font color="#000080">;
      </font><font color="#800000">9       </font><font color="#000080">: </font>COMcount  <font color="#000080">:= (</font>EqWord <font color="#FF0000"><b>SHR </b></font>BitNum<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#800000">$7</font><font color="#000080">;
      </font><font color="#800000">10</font><font color="#000080">,</font><font color="#800000">11   </font><font color="#000080">: ; </font><font color="#008000"><i>{ignore}
      </i></font><font color="#800000">12      </font><font color="#000080">: </font>IsGame    <font color="#000080">:= </font>EBitSet<font color="#000080">;
      </font><font color="#800000">13      </font><font color="#000080">: </font>IsModem   <font color="#000080">:= </font>EBitSet<font color="#000080">;
      </font><font color="#800000">14      </font><font color="#000080">: </font>LPTcount  <font color="#000080">:= (</font>EqWord <font color="#FF0000"><b>SHR </b></font>BitNum<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#800000">$7</font><font color="#000080">;
      </font><font color="#800000">15      </font><font color="#000080">: ; </font><font color="#008000"><i>{ignore}
    </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{Case BitNum}
  </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{For BitNum}
</i></font><font color="#FF0000"><b>end </b></font><font color="#008000"><i>{ProcessEquipList}</i></font><font color="#000080">;
</font><font color="#008000"><i>{-------------------------------------------------------------------}
</i></font><font color="#FF0000"><b>Function </b></font>Maybe<font color="#000080">(</font>Truth <font color="#000080">: </font>Boolean<font color="#000080">) : </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
  if not </b></font>Truth <font color="#FF0000"><b>then
    </b></font>Maybe <font color="#000080">:= </font><font color="#800000">' not '
  </font><font color="#FF0000"><b>else
    </b></font>Maybe <font color="#000080">:= </font><font color="#800000">' IS '</font><font color="#000080">;
</font><font color="#FF0000"><b>end </b></font><font color="#008000"><i>{Maybe}</i></font><font color="#000080">;
</font><font color="#008000"><i>{-------------------------------------------------------------------}
</i></font><font color="#FF0000"><b>begin
  </b></font>Intr<font color="#000080">( </font><font color="#800000">$11</font><font color="#000080">, </font>Reg <font color="#000080">);
  </font>EqWord <font color="#000080">:= </font>Reg<font color="#000080">.</font>AX<font color="#000080">;
  </font>WriteLn<font color="#000080">;
  </font>Write<font color="#000080">(</font><font color="#800000">'Equipment list Word: '</font><font color="#000080">,</font>EqWord<font color="#000080">,</font><font color="#800000">' decimal = '</font><font color="#000080">);
  </font>WriteBitWord<font color="#000080">( </font>EqWord <font color="#000080">);
  </font>WriteLn<font color="#000080">(</font><font color="#800000">' binary'</font><font color="#000080">);
  </font>WriteLn<font color="#000080">;
  </font>ProcessEquipList<font color="#000080">;
  </font>WriteLn<font color="#000080">(</font><font color="#800000">'Number of floppies installed: '</font><font color="#000080">, </font>NumberFDD <font color="#000080">);
  </font>WriteLn<font color="#000080">(</font><font color="#800000">'Math-coprocessor'</font><font color="#000080">,</font>Maybe<font color="#000080">(</font>Is8087<font color="#000080">),</font><font color="#800000">'installed' </font><font color="#000080">);
  </font>WriteLn<font color="#000080">(</font><font color="#800000">'PS/2 Mouse'</font><font color="#000080">,</font>Maybe<font color="#000080">(</font>IsMouse<font color="#000080">),</font><font color="#800000">'installed' </font><font color="#000080">);
  </font>Write<font color="#000080">(</font><font color="#800000">'Initial video mode: '</font><font color="#000080">,</font>InitVMode<font color="#000080">,</font><font color="#800000">' (' </font><font color="#000080">);
  </font><font color="#FF0000"><b>Case </b></font>InitVMode <font color="#FF0000"><b>of
    </b></font><font color="#800000">0 </font><font color="#000080">: </font>WriteLn<font color="#000080">(</font><font color="#800000">'EGA, VGA, PGA)'</font><font color="#000080">);
    </font><font color="#800000">1 </font><font color="#000080">: </font>WriteLn<font color="#000080">(</font><font color="#800000">'40x25 colour)'</font><font color="#000080">);
    </font><font color="#800000">2 </font><font color="#000080">: </font>WriteLn<font color="#000080">(</font><font color="#800000">'80x25 colour)'</font><font color="#000080">);
    </font><font color="#800000">3 </font><font color="#000080">: </font>WriteLn<font color="#000080">(</font><font color="#800000">'80x25 monochrome)'</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>WriteLn<font color="#000080">(</font><font color="#800000">'DMA support'</font><font color="#000080">,</font>Maybe<font color="#000080">(</font>IsDMA<font color="#000080">),</font><font color="#800000">'installed' </font><font color="#000080">);
  </font>WriteLn<font color="#000080">(</font><font color="#800000">'Number of COMs installed: '</font><font color="#000080">,</font>COMcount <font color="#000080">);
  </font>WriteLn<font color="#000080">(</font><font color="#800000">'Game port'</font><font color="#000080">,</font>Maybe<font color="#000080">(</font>IsGame<font color="#000080">),</font><font color="#800000">'installed' </font><font color="#000080">);
  </font>WriteLn<font color="#000080">(</font><font color="#800000">'IBM Luggable modem'</font><font color="#000080">,</font>Maybe<font color="#000080">(</font>IsModem<font color="#000080">),</font><font color="#800000">'installed'</font><font color="#000080">);
  </font>WriteLn<font color="#000080">(</font><font color="#800000">'Number of Printer ports: '</font><font color="#000080">,</font>LPTcount <font color="#000080">);
</font><font color="#FF0000"><b>end </b></font><font color="#008000"><i>{BitsNBytes}</i></font><font color="#000080">.
</font><font color="#008000"><i>(*******************************************************************)

</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to INTERRUP SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0001.PAS">Original</a><b>]</b></p></body>
</html>
