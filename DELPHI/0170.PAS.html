<html>
<head><title> "UnixTimeDate Conversion (Delphi)" by ANDREW JAKOBS</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to DELPHI SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0170.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{

Here's another Unit from me, This time it's a 
 Unix to DelphiTimeDate and ViceVersa Conversion Routines...

Andre Jakobs
  MicroBrain Technologies Inc.
    The Netherlands

unit U_DateTime;
{
 written by Andre Jakobs  from  MicroBrain Technologies Inc.


This Unit Converts UNIX timestamps and Delphi timestamps

Unix stores the TimeDate in a four byte long-integer(DoubleWord), As
the number of seconds since 1-januari-1970 0:0:0 .....

Delphi stores the TimeDate in TDateTime (a Float), where the integer
part of TDateTime type is the Number of days since 1-januari-0001 0:0:0
and the floating-point part the fractional Part of the day}

</i></font><font color="#FF0000"><b>interface

const
    </b></font>UnixStartDate <font color="#000080">: </font>tdatetime <font color="#000080">= </font><font color="#800000">719163.0</font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>DelphiDateTimeToUnix<font color="#000080">(</font>ConvDate<font color="#000080">:</font>TdateTime<font color="#000080">):</font>longint<font color="#000080">;
</font><font color="#FF0000"><b>function </b></font>UnixToDelphiDateTime<font color="#000080">(</font>USec<font color="#000080">:</font>longint<font color="#000080">):</font>TDateTime<font color="#000080">;

</font><font color="#FF0000"><b>implementation

</b></font><font color="#008000"><i>(*-----------------------------------------------------------*)
(*         D e l p h i D a t e T i m e T o U N I X           *)
(*-----------------------------------------------------------*)
</i></font><font color="#FF0000"><b>function </b></font>DelphiDateTimeToUnix<font color="#000080">(</font>ConvDate<font color="#000080">:</font>TdateTime<font color="#000080">):</font>longint<font color="#000080">;
</font><font color="#008000"><i>{Converts Delphi TDateTime to Unix seconds,
   ConvDate = the Date and Time that you want to convert
   example:   UnixSeconds:=DelphiDateTimeToUnix(Now);}
</i></font><font color="#FF0000"><b>begin
  </b></font>Result<font color="#000080">:=</font>round<font color="#000080">((</font>ConvDate<font color="#000080">-</font>UnixStartDate<font color="#000080">)*</font><font color="#800000">86400</font><font color="#000080">);
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>(*-----------------------------------------------------------*)
(*         U N I X T o D e l p h i D a t e T i m e           *)
(*-----------------------------------------------------------*)
</i></font><font color="#FF0000"><b>function </b></font>UnixToDelphiDateTime<font color="#000080">(</font>USec<font color="#000080">:</font>longint<font color="#000080">):</font>TDateTime<font color="#000080">;
</font><font color="#008000"><i>{Converts Unix seconds to Delphi TDateTime,
   USec = the Unix Date Time that you want to convert
   example:  DelphiTimeDate:=UnixToDelphiTimeDate(693596);}
</i></font><font color="#FF0000"><b>begin
  </b></font>Result<font color="#000080">:=(</font>Usec<font color="#000080">/</font><font color="#800000">86400</font><font color="#000080">)+</font>UnixStartDate<font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to DELPHI SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0170.PAS">Original</a><b>]</b></p></body>
</html>
