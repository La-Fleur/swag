<html>
<head><title> "TPanel w/colored bevels" by EDDIE SHIPMAN</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to DELPHI SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0376.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#000000">I kinda noticed that even when I changed my TPanel
color<font color="#000080">, </font>the bevels stayed clBtnShadow <font color="#FF0000"><b>and </b></font>clBtnHighlight<font color="#000080">.
</font>Well<font color="#000080">, </font>here <font color="#FF0000"><b>is </b></font>the modified version that allows you <font color="#FF0000"><b>to
</b></font>change the bevel colors <font color="#FF0000"><b>as </b></font>well<font color="#000080">:

</font><font color="#008000"><i>(*
TNewPanel - Eddie Shipman

 TPanel which allows colored bevels.

 Added two properties:
****************************************************************************
***
 Property: - BevelShadowColor-

    This is the color of the Bevel's Shadow if the Panel Bevel is Raised
    or Lowered Default clBtnShadow. Change this color to change the 
    color of the Bevel's Shadow.

****************************************************************************
***
 Property:  BevelHighlightColor-

    This is the color of the Bevel's Highlight if the Panel Bevel is Raised
    or Lowered Default clBtnHighlight. Change this color to change the 
    color of the Bevel's Highlight.

****************************************************************************
***
*)
</i></font><font color="#FF0000"><b>unit </b></font>NewPanel<font color="#000080">;

</font><font color="#FF0000"><b>interface

uses
  </b></font>Windows<font color="#000080">, </font>Messages<font color="#000080">, </font>SysUtils<font color="#000080">, </font>Classes<font color="#000080">, </font>Graphics<font color="#000080">, </font>Controls<font color="#000080">, </font>Forms<font color="#000080">, </font>Dialogs<font color="#000080">,
  </font>ExtCtrls<font color="#000080">;

</font><font color="#FF0000"><b>type
  </b></font>TNewPanel <font color="#000080">= </font><font color="#FF0000"><b>class</b></font><font color="#000080">(</font>TPanel<font color="#000080">)
  </font><font color="#FF0000"><b>private
    </b></font><font color="#008000"><i>{ Private declarations }
    </i></font>FBevelLowColor<font color="#000080">: </font>TColor<font color="#000080">;
    </font>FBevelHiColor<font color="#000080">: </font>TColor<font color="#000080">;
    </font><font color="#FF0000"><b>procedure </b></font>SetBvlLowColor<font color="#000080">(</font>Value<font color="#000080">: </font>TColor<font color="#000080">);
    </font><font color="#FF0000"><b>procedure </b></font>SetBvlHiColor<font color="#000080">(</font>Value<font color="#000080">: </font>TColor<font color="#000080">);
  </font><font color="#FF0000"><b>protected
    </b></font><font color="#008000"><i>{ Protected declarations }
    </i></font><font color="#FF0000"><b>procedure </b></font>Paint<font color="#000080">; </font><font color="#FF0000"><b>override</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>public
    </b></font><font color="#008000"><i>{ Public declarations }
    </i></font><font color="#FF0000"><b>constructor </b></font>Create<font color="#000080">(</font>AOwner<font color="#000080">: </font>TComponent<font color="#000080">); </font><font color="#FF0000"><b>override</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>published
    </b></font><font color="#008000"><i>{ Published declarations }
    </i></font><font color="#FF0000"><b>property </b></font>BevelShadowColor<font color="#000080">:</font>TColor  <font color="#FF0000"><b>read </b></font>FBevelLowColor
                                                       <font color="#FF0000"><b>write </b></font>SetBvlLowColor<font color="#000080">;
    </font><font color="#FF0000"><b>property </b></font>BevelHighlightColor<font color="#000080">:</font>TColor <font color="#FF0000"><b>read </b></font>FBevelHiColor
                                                       <font color="#FF0000"><b>write </b></font>SetBvlHiColor<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure Register</b></font><font color="#000080">;

</font><font color="#FF0000"><b>implementation

procedure Register</b></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>RegisterComponents<font color="#000080">(</font><font color="#800000">'Standard'</font><font color="#000080">, [</font>TNewPanel<font color="#000080">]);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>constructor </b></font>TNewPanel<font color="#000080">.</font>Create<font color="#000080">(</font>AOwner<font color="#000080">: </font>TComponent<font color="#000080">);
</font><font color="#FF0000"><b>begin
  inherited </b></font>Create<font color="#000080">(</font>AOwner<font color="#000080">);
  </font>ControlStyle <font color="#000080">:= [</font>csAcceptsControls<font color="#000080">, </font>csCaptureMouse<font color="#000080">, </font>csClickEvents<font color="#000080">,
    </font>csSetCaption<font color="#000080">, </font>csOpaque<font color="#000080">, </font>csDoubleClicks<font color="#000080">, </font>csReplicatable<font color="#000080">];
  </font>Width <font color="#000080">:= </font><font color="#800000">185</font><font color="#000080">;
  </font>Height <font color="#000080">:= </font><font color="#800000">41</font><font color="#000080">;
  </font>BevelOuter <font color="#000080">:= </font>bvRaised<font color="#000080">;
  </font>BevelWidth <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
  </font>Color <font color="#000080">:= </font>clBtnFace<font color="#000080">;
  </font>FBevelLowColor <font color="#000080">:= </font>clBtnShadow<font color="#000080">;
  </font>FBevelHiColor <font color="#000080">:= </font>clBtnHighlight<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>TNewPanel<font color="#000080">.</font>Paint<font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>Rect<font color="#000080">: </font>TRect<font color="#000080">;
  </font>TopColor<font color="#000080">, </font>BottomColor<font color="#000080">: </font>TColor<font color="#000080">;
  </font>FontHeight<font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>const
  </b></font>Alignments<font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font>TAlignment<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Word <font color="#000080">= (</font>DT_LEFT<font color="#000080">, </font>DT_RIGHT<font color="#000080">, </font>DT_CENTER<font color="#000080">);

  </font><font color="#FF0000"><b>procedure </b></font>AdjustColors<font color="#000080">(</font>Bevel<font color="#000080">: </font>TPanelBevel<font color="#000080">);
  </font><font color="#FF0000"><b>begin
    </b></font>TopColor <font color="#000080">:= </font>FBevelHiColor<font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font>Bevel <font color="#000080">= </font>bvLowered <font color="#FF0000"><b>then </b></font>TopColor <font color="#000080">:= </font>FBevelLowColor<font color="#000080">;
    </font>BottomColor <font color="#000080">:= </font>FBevelLowColor<font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font>Bevel <font color="#000080">= </font>bvLowered <font color="#FF0000"><b>then </b></font>BottomColor <font color="#000080">:= </font>FBevelHiColor<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>Rect <font color="#000080">:= </font>GetClientRect<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>BevelOuter <font color="#000080">&lt;&gt; </font>bvNone <font color="#FF0000"><b>then
  begin
    </b></font>AdjustColors<font color="#000080">(</font>BevelOuter<font color="#000080">);
    </font>Frame3D<font color="#000080">(</font>Canvas<font color="#000080">, </font>Rect<font color="#000080">, </font>TopColor<font color="#000080">, </font>BottomColor<font color="#000080">, </font>BevelWidth<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>Frame3D<font color="#000080">(</font>Canvas<font color="#000080">, </font>Rect<font color="#000080">, </font>Color<font color="#000080">, </font>Color<font color="#000080">, </font>BorderWidth<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>BevelInner <font color="#000080">&lt;&gt; </font>bvNone <font color="#FF0000"><b>then
  begin
    </b></font>AdjustColors<font color="#000080">(</font>BevelInner<font color="#000080">);
    </font>Frame3D<font color="#000080">(</font>Canvas<font color="#000080">, </font>Rect<font color="#000080">, </font>TopColor<font color="#000080">, </font>BottomColor<font color="#000080">, </font>BevelWidth<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>with </b></font>Canvas <font color="#FF0000"><b>do
  begin
    </b></font>Brush<font color="#000080">.</font>Color <font color="#000080">:= </font>Color<font color="#000080">;
    </font>FillRect<font color="#000080">(</font>Rect<font color="#000080">);
    </font>Brush<font color="#000080">.</font>Style <font color="#000080">:= </font>bsClear<font color="#000080">;
    </font>Font <font color="#000080">:= </font>Self<font color="#000080">.</font>Font<font color="#000080">;
    </font>FontHeight <font color="#000080">:= </font>TextHeight<font color="#000080">(</font><font color="#800000">'W'</font><font color="#000080">);
    </font><font color="#FF0000"><b>with </b></font>Rect <font color="#FF0000"><b>do
    begin
      </b></font>Top <font color="#000080">:= ((</font>Bottom <font color="#000080">+ </font>Top<font color="#000080">) - </font>FontHeight<font color="#000080">) </font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">;
      </font>Bottom <font color="#000080">:= </font>Top <font color="#000080">+ </font>FontHeight<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>DrawText<font color="#000080">(</font>Handle<font color="#000080">, </font>PChar<font color="#000080">(</font>Caption<font color="#000080">), -</font><font color="#800000">1</font><font color="#000080">, </font>Rect<font color="#000080">, (</font>DT_EXPANDTABS <font color="#FF0000"><b>or
      </b></font>DT_VCENTER<font color="#000080">) </font><font color="#FF0000"><b>or </b></font>Alignments<font color="#000080">[</font>Alignment<font color="#000080">]);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>TNewPanel<font color="#000080">.</font>SetBvlLowColor<font color="#000080">(</font>Value<font color="#000080">: </font>TColor<font color="#000080">);
</font><font color="#FF0000"><b>begin
  if </b></font>FBevelLowColor <font color="#000080">&lt;&gt; </font>Value <font color="#FF0000"><b>then
    </b></font>FBevelLowColor <font color="#000080">:= </font>Value<font color="#000080">;
  </font>Invalidate<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>TNewPanel<font color="#000080">.</font>SetBvlHiColor<font color="#000080">(</font>Value<font color="#000080">: </font>TColor<font color="#000080">);
</font><font color="#FF0000"><b>begin
  if </b></font>FBevelHiColor <font color="#000080">&lt;&gt; </font>Value <font color="#FF0000"><b>then
    </b></font>FBevelHiColor <font color="#000080">:= </font>Value<font color="#000080">;
  </font>Invalidate<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to DELPHI SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0376.PAS">Original</a><b>]</b></p></body>
</html>
