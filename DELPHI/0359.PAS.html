<html>
<head><title> "Interface to MS crtdll.dll 'c' runtime l" by MASSIMO MARIA GHISALBERTI</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to DELPHI SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0359.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{--------------------------------------------------------------
Copyright (c) 1996-97 Massimo Maria Ghisalberti
CopyRight (c) 1996-97 MAx!
CopyRight (c) 1996-97 Objects Built for you! (O.B.you!)
Internet EMail: roentgen@mbox.vol.it

MODULO:    CrtDll.pas
           Interface fo the crtdll.dll Microsoft c runtime library

VERSIONe:  1.0 Freeware.
         
Data iniziale : 11/8/97

NOTE: If you use this code, please mention O.B.you!
      somewhere in your program
--------------------------------------------------------------}

</i></font><font color="#FF0000"><b>unit </b></font>CrtDll<font color="#000080">;



</font><font color="#FF0000"><b>interface

uses </b></font>SysUtils<font color="#000080">,</font>Windows<font color="#000080">;

</font><font color="#FF0000"><b>const </b></font>MSCrtDll <font color="#000080">= </font><font color="#800000">'crtdll.dll'</font><font color="#000080">;

</font><font color="#FF0000"><b>const </b></font>_MAX_PATH   <font color="#000080">=</font><font color="#800000">260</font><font color="#000080">;
</font><font color="#FF0000"><b>const </b></font>_MAX_DRIVE  <font color="#000080">=</font><font color="#800000">3</font><font color="#000080">;
</font><font color="#FF0000"><b>const </b></font>_MAX_DIR    <font color="#000080">=</font><font color="#800000">256</font><font color="#000080">;
</font><font color="#FF0000"><b>const </b></font>_MAX_FNAME  <font color="#000080">=</font><font color="#800000">256</font><font color="#000080">;
</font><font color="#FF0000"><b>const </b></font>_MAX_EXT    <font color="#000080">=</font><font color="#800000">256</font><font color="#000080">;

</font><font color="#FF0000"><b>const </b></font>CLK_TCK     <font color="#000080">=</font><font color="#800000">1000.0

</font><font color="#FF0000"><b>type </b></font>size_t <font color="#000080">= </font>cardinal<font color="#000080">;
</font><font color="#FF0000"><b>type </b></font>TbsearchFunc <font color="#000080">= </font><font color="#FF0000"><b>function </b></font><font color="#000080">(</font>arg1<font color="#000080">,</font>arg2 <font color="#000080">:</font>Pointer<font color="#000080">):</font>integer<font color="#000080">;
</font><font color="#FF0000"><b>type </b></font>TqsortFunc <font color="#000080">= </font><font color="#FF0000"><b>function </b></font><font color="#000080">(</font>arg1<font color="#000080">,</font>arg2 <font color="#000080">:</font>Pointer<font color="#000080">):</font>integer<font color="#000080">;
</font><font color="#FF0000"><b>type </b></font>TcMemHeap <font color="#000080">= </font>Pointer<font color="#000080">;
</font><font color="#FF0000"><b>type </b></font>TClock_t <font color="#000080">= </font>cardinal<font color="#000080">;

</font><font color="#FF0000"><b>type </b></font>Div_t <font color="#000080">= </font><font color="#FF0000"><b>record
  </b></font>quot <font color="#000080">:</font>integer<font color="#000080">;
  </font>rem  <font color="#000080">:</font>integer<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>type </b></font>lDiv_t <font color="#000080">= </font>Div_t<font color="#000080">;


</font><font color="#FF0000"><b>type </b></font>TDFree <font color="#000080">= </font><font color="#FF0000"><b>record
  </b></font>total_clusters <font color="#000080">:</font>cardinal<font color="#000080">;
  </font>avail_clusters <font color="#000080">:</font>cardinal<font color="#000080">;
  </font>sectors_per_cluster <font color="#000080">:</font>cardinal<font color="#000080">;
  </font>bytes_per_sector <font color="#000080">:</font>cardinal<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>type </b></font>PDFree <font color="#000080">= ^</font>TDFree<font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>abort<font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>abs<font color="#000080">(</font>value <font color="#000080">:</font>integer<font color="#000080">):</font>integer<font color="#000080">;</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>atexit<font color="#000080">(</font>ExitFunc <font color="#000080">:</font>Pointer<font color="#000080">):</font>integer<font color="#000080">;</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>atof<font color="#000080">(</font>value <font color="#000080">:</font>PChar<font color="#000080">):</font>double<font color="#000080">;</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>atoi<font color="#000080">(</font>value <font color="#000080">:</font>PChar<font color="#000080">):</font>integer<font color="#000080">;</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>atol<font color="#000080">(</font>value <font color="#000080">:</font>PChar<font color="#000080">):</font>integer<font color="#000080">;</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>itoa<font color="#000080">(</font>value <font color="#000080">:</font>integer<font color="#000080">;</font>text <font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">;</font>radix <font color="#000080">:</font>integer<font color="#000080">):</font>PChar<font color="#000080">;</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>bsearch<font color="#000080">(</font>_key<font color="#000080">,</font>_base <font color="#000080">:</font>Pointer<font color="#000080">;</font>_nmemb<font color="#000080">,</font>_size <font color="#000080">:</font>size_t<font color="#000080">;</font>SFunc <font color="#000080">:</font>TbsearchFunc<font color="#000080">):</font>Pointer<font color="#000080">;</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>calloc <font color="#000080">(</font>nitems<font color="#000080">, </font>size <font color="#000080">:</font>size_t<font color="#000080">):</font>TcMemHeap<font color="#000080">;</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>cdiv<font color="#000080">(</font>_numer<font color="#000080">,</font>_denom <font color="#000080">:</font>integer<font color="#000080">):</font>Div_t<font color="#000080">;</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>cldiv<font color="#000080">(</font>_numer<font color="#000080">,</font>_denom <font color="#000080">:</font>integer<font color="#000080">):</font>lDiv_t<font color="#000080">;</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>cexit<font color="#000080">(</font>status <font color="#000080">:</font>integer<font color="#000080">);</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>cfree<font color="#000080">(</font>heap <font color="#000080">:</font>Pointer<font color="#000080">);</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>getenv<font color="#000080">(</font>env <font color="#000080">:</font>PChar<font color="#000080">):</font>PChar<font color="#000080">;</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>labs<font color="#000080">(</font>int <font color="#000080">:</font>integer<font color="#000080">):</font>integer<font color="#000080">;</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>malloc<font color="#000080">(</font>size <font color="#000080">:</font>size_t<font color="#000080">):</font>TcMemHeap<font color="#000080">;</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>lrot<font color="#000080">(</font>val <font color="#000080">:</font>cardinal<font color="#000080">;</font>count <font color="#000080">:</font>integer<font color="#000080">):</font>cardinal<font color="#000080">;</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>rotl<font color="#000080">(</font>val <font color="#000080">,</font>count <font color="#000080">:</font>word<font color="#000080">):</font>word<font color="#000080">;</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>qsort<font color="#000080">(</font>base <font color="#000080">:</font>Pointer<font color="#000080">; </font>nmemb<font color="#000080">,</font>size <font color="#000080">:</font>size_t<font color="#000080">; </font>qsortFunc <font color="#000080">:</font>TqsortFunc<font color="#000080">);</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>rand<font color="#000080">:</font>integer<font color="#000080">;</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>realloc<font color="#000080">(</font>block <font color="#000080">:</font>TcMemHeap<font color="#000080">;</font>size <font color="#000080">:</font>size_t<font color="#000080">):</font>TcMemHeap<font color="#000080">;</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>srand<font color="#000080">(</font>arg <font color="#000080">:</font>cardinal<font color="#000080">);</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>system<font color="#000080">(</font>command <font color="#000080">:</font>PChar<font color="#000080">):</font>integer<font color="#000080">;</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>putenv<font color="#000080">(</font>env <font color="#000080">:</font>PChar<font color="#000080">):</font>integer<font color="#000080">;</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#008000"><i>//function  setenv(str,value :PChar;overwrite :integer):integer;cdecl;
</i></font><font color="#FF0000"><b>procedure </b></font>splitpath<font color="#000080">(</font>path<font color="#000080">,</font>drive<font color="#000080">,</font>dir<font color="#000080">,</font>name<font color="#000080">,</font>ext <font color="#000080">:</font>PChar<font color="#000080">);</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>fnsplit<font color="#000080">(</font>path<font color="#000080">,</font>drive<font color="#000080">,</font>dir<font color="#000080">,</font>name<font color="#000080">,</font>ext <font color="#000080">:</font>PChar<font color="#000080">);</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>strrev<font color="#000080">(</font>Prima<font color="#000080">:</font>PChar<font color="#000080">):</font>PChar<font color="#000080">;</font><font color="#FF0000"><b>cdecl</b></font>	<font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>cstrlen<font color="#000080">(</font>STringa <font color="#000080">:</font>PChar<font color="#000080">):</font>integer<font color="#000080">;</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>strtok <font color="#000080">(</font>str1 <font color="#000080">:</font>PChar<font color="#000080">;</font><font color="#FF0000"><b>const </b></font>str2 <font color="#000080">:</font>PChar<font color="#000080">):</font>PChar<font color="#000080">;</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>searchenv<font color="#000080">(</font><font color="#FF0000"><b>const </b></font>FileName<font color="#000080">, </font>VarName<font color="#000080">, </font>Buff <font color="#000080">:</font>PChar<font color="#000080">):</font>PChar<font color="#000080">;</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>clock<font color="#000080">:</font>TClock_t<font color="#000080">;</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>dup<font color="#000080">(</font>Handle <font color="#000080">:</font>THFile<font color="#000080">):</font>THFile<font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>dup2<font color="#000080">(</font>NewHandle<font color="#000080">, </font>OldHandle <font color="#000080">:</font>THFile<font color="#000080">):</font>THFile<font color="#000080">;</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>fullpath<font color="#000080">(</font>Buff <font color="#000080">,</font><font color="#FF0000"><b>const </b></font>Path <font color="#000080">:</font>PChar<font color="#000080">; </font>BuffLn <font color="#000080">:</font>integer<font color="#000080">);</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>getdrive<font color="#000080">:</font>integer<font color="#000080">;</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>getdrives<font color="#000080">:</font>cardinal<font color="#000080">;</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>getdiskfree<font color="#000080">(</font>DriveNum <font color="#000080">:</font>cardinal<font color="#000080">, </font>dtable <font color="#000080">:</font>PDFree<font color="#000080">);</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>getpid<font color="#000080">;</font><font color="#FF0000"><b>cdecl</b></font><font color="#000080">;

</font><font color="#FF0000"><b>var </b></font>HMsCrtDll <font color="#000080">:</font>THandle<font color="#000080">;

</font><font color="#FF0000"><b>implementation

procedure </b></font>abort<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'abort'</font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>abs<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'abs'</font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>atexit<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'atexit'</font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>atof<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'atof'</font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>atoi<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'atoi'</font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>atol<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'atol'</font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>itoa<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'itoa'</font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>bsearch<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'bsearch'</font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>calloc<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'calloc'</font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>cdiv<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'div'</font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>cldiv<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'ldiv'</font><font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>cexit<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'exit'</font><font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>cfree<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'free'</font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>getenv<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'getenv'</font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>labs<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'labs'</font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>malloc<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'malloc'</font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>lrot<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'_lrot'</font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>rotl<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'_rotl'</font><font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>qsort<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'qsort'</font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>rand<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'rand'</font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>realloc<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'realloc'</font><font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>srand<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'srand'</font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>system<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'system'</font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>putenv<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'_putenv'</font><font color="#000080">;
</font><font color="#008000"><i>//function  setenv;external MSCrtDll name 'setenv';
</i></font><font color="#FF0000"><b>procedure </b></font>splitpath<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'_splitpath'</font><font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>fnsplit<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'_splitpath'</font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>strrev<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'_strrev'</font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>cstrlen<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'strlen'</font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>strtok<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'strtok'</font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>searchenv<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'_searchenv'</font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>clock<font color="#000080">:</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'clock'</font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>dup<font color="#000080">:</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'dup'</font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>dup2<font color="#000080">:</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'dup2'</font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>fullpath<font color="#000080">:</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'_fullpath'</font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>getdrive<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'_getdrive'</font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>getdrives<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'_getdrives'</font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>getdiskfree<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'_getdiskfree'</font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>getpid<font color="#000080">;</font><font color="#FF0000"><b>external </b></font>MSCrtDll name <font color="#800000">'_getpid'</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to DELPHI SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0359.PAS">Original</a><b>]</b></p></body>
</html>
