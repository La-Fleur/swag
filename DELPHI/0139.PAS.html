<html>
<head><title> "Component simulates a Luffing Switch" by UDO JUERSS</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to DELPHI SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0139.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
  Programm : SWITCH.PAS
  Sprache  : Delphi
  Zweck    : Schalter-Komponente
  Datum    : 15, 16. Feb. 1996
  Autor    : U.Jnr-

  This component simulates a luffing switch as used in many electic devices.
  No Bitmaps are used, so it's fully scaleable.

  Sorry for comments are in german.

  Contact: Udo Juerss, 57078 Siegen, Germany, CompuServe [101364,526]

  Greetings from germany - enjoy...
}

</i></font><font color="#FF0000"><b>unit
  </b></font>Switch<font color="#000080">;

</font><font color="#FF0000"><b>interface

uses
  </b></font>WinTypes<font color="#000080">, </font>WinProcs<font color="#000080">, </font>Messages<font color="#000080">, </font>Classes<font color="#000080">, </font>Controls<font color="#000080">, </font>Graphics<font color="#000080">;
</font><font color="#008000"><i>{------------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>type
  </b></font>RectArray <font color="#000080">= </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">3</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>TPoint<font color="#000080">;               </font><font color="#008000"><i>{Vektorarraytyp fnr Rechteck}
  </i></font>TriArray <font color="#000080">= </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">2</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>TPoint<font color="#000080">;                 </font><font color="#008000"><i>{Vektorarraytyp fnr Dreieck}

  </i></font>TSwitch <font color="#000080">= </font><font color="#FF0000"><b>class</b></font><font color="#000080">(</font>TCustomControl<font color="#000080">)
  </font><font color="#FF0000"><b>private
    </b></font>TopShape<font color="#000080">: </font>TriArray<font color="#000080">;                 </font><font color="#008000"><i>{Dreieck Vektoren von Schalteroberseite}
    </i></font>OnShape<font color="#000080">: </font>RectArray<font color="#000080">;               </font><font color="#008000"><i>{Rechteck Vektoren von Schalterfront &quot;ON&quot;}
    </i></font>OffShape<font color="#000080">: </font>RectArray<font color="#000080">;             </font><font color="#008000"><i>{Rechteck Vektoren von Schalterfront &quot;OFF&quot;}
    </i></font>SideShape<font color="#000080">: </font>RectArray<font color="#000080">;                  </font><font color="#008000"><i>{Rechteck Vektoren von Schalterseite}

    </i></font>FOnChanged<font color="#000080">: </font>TNotifyEvent<font color="#000080">;                        </font><font color="#008000"><i>{Verbindung zur Aussenwelt}
    </i></font>FOnChecked<font color="#000080">: </font>TNotifyEvent<font color="#000080">;                        </font><font color="#008000"><i>{Verbindung zur Aussenwelt}
    </i></font>FOnUnChecked<font color="#000080">: </font>TNotifyEvent<font color="#000080">;                      </font><font color="#008000"><i>{Verbindung zur Aussenwelt}

    </i></font>FCaptionOn<font color="#000080">: </font>TCaption<font color="#000080">;                   </font><font color="#008000"><i>{Beschriftung Schalterstellung &quot;ON&quot;}
    </i></font>FCaptionOff<font color="#000080">: </font>TCaption<font color="#000080">;                 </font><font color="#008000"><i>{Beschriftung Schalterstellung &quot;OFF&quot;}
    </i></font>FChecked<font color="#000080">: </font>Boolean<font color="#000080">;                               </font><font color="#008000"><i>{Flag von Schalterstellung}
    </i></font>FCheckedLeft<font color="#000080">: </font>Boolean<font color="#000080">;     </font><font color="#008000"><i>{Flag ob &quot;ON&quot; links oder rechts dargestellt wird}
    </i></font>FSlope<font color="#000080">: </font>Byte<font color="#000080">;                            </font><font color="#008000"><i>{Neigung (3D Effekt) des Schalters}
    </i></font>FSideLength<font color="#000080">: </font>Byte<font color="#000080">;          </font><font color="#008000"><i>{Seitenabstand fnr hervorstehendes Schalterteil}
    </i></font>FOnColor<font color="#000080">: </font>TColor<font color="#000080">;                               </font><font color="#008000"><i>{Farbe fnr Frontfl_che &quot;ON&quot;}
    </i></font>FOffColor<font color="#000080">: </font>TColor<font color="#000080">;                             </font><font color="#008000"><i>{Farbe fnr Frontfl_che &quot;OFF&quot;}
    </i></font>FTopColor<font color="#000080">: </font>TColor<font color="#000080">;                             </font><font color="#008000"><i>{Farbe fnr Schalteroberseite}
    </i></font>FSideColor<font color="#000080">: </font>TColor<font color="#000080">;                                 </font><font color="#008000"><i>{Farbe fnr Seitenfl_che}
    </i></font>ALeft<font color="#000080">: </font>Integer<font color="#000080">;                        </font><font color="#008000"><i>{Linke Anfangsposition des Schalters}
    </i></font>ATop<font color="#000080">: </font>Integer<font color="#000080">;                         </font><font color="#008000"><i>{Obere Anfangsposition des Schalters}
    </i></font>AHeight<font color="#000080">: </font>Integer<font color="#000080">;                                       </font><font color="#008000"><i>{Hwhe des Schalters}
    </i></font>AWidth<font color="#000080">: </font>Integer<font color="#000080">;                                      </font><font color="#008000"><i>{Breite des Schalters}
    </i></font>LabelLen<font color="#000080">: </font>Integer<font color="#000080">;                                </font><font color="#008000"><i>{Halbbreite des Schalters}
    </i></font>LabelOfs<font color="#000080">: </font>Integer<font color="#000080">;                       </font><font color="#008000"><i>{Halbbreite fnr Spiegeldarstellung}
    </i></font>Side<font color="#000080">: </font>Integer<font color="#000080">;                                 </font><font color="#008000"><i>{Tempor_r in Setup verwendet}

    </i></font><font color="#FF0000"><b>procedure </b></font>WMSetFocus<font color="#000080">(</font><font color="#FF0000"><b>var Message</b></font><font color="#000080">: </font>TWMSetFocus<font color="#000080">); </font><font color="#FF0000"><b>message </b></font>WM_SETFOCUS<font color="#000080">;
    </font><font color="#FF0000"><b>procedure </b></font>WMKillFocus<font color="#000080">(</font><font color="#FF0000"><b>var Message</b></font><font color="#000080">: </font>TWMKillFocus<font color="#000080">); </font><font color="#FF0000"><b>message </b></font>WM_KILLFOCUS<font color="#000080">;
    </font><font color="#FF0000"><b>procedure </b></font>CallNotifyEvent<font color="#000080">;
    </font><font color="#FF0000"><b>procedure </b></font>Setup<font color="#000080">;
    </font><font color="#FF0000"><b>procedure </b></font>Draw<font color="#000080">;
    </font><font color="#FF0000"><b>procedure </b></font>SetCaptionOn<font color="#000080">(</font>Value<font color="#000080">: </font>TCaption<font color="#000080">);
    </font><font color="#FF0000"><b>procedure </b></font>SetCaptionOff<font color="#000080">(</font>Value<font color="#000080">: </font>TCaption<font color="#000080">);
    </font><font color="#FF0000"><b>procedure </b></font>SetChecked<font color="#000080">(</font>Value<font color="#000080">: </font>Boolean<font color="#000080">);
    </font><font color="#FF0000"><b>procedure </b></font>SetCheckedLeft<font color="#000080">(</font>Value<font color="#000080">: </font>Boolean<font color="#000080">);
    </font><font color="#FF0000"><b>procedure </b></font>SetSlope<font color="#000080">(</font>Value<font color="#000080">: </font>Byte<font color="#000080">);
    </font><font color="#FF0000"><b>procedure </b></font>SetSideLength<font color="#000080">(</font>Value<font color="#000080">: </font>Byte<font color="#000080">);
    </font><font color="#FF0000"><b>procedure </b></font>SetOnColor<font color="#000080">(</font>Value<font color="#000080">: </font>TColor<font color="#000080">);
    </font><font color="#FF0000"><b>procedure </b></font>SetOffColor<font color="#000080">(</font>Value<font color="#000080">: </font>TColor<font color="#000080">);
    </font><font color="#FF0000"><b>procedure </b></font>SetTopColor<font color="#000080">(</font>Value<font color="#000080">: </font>TColor<font color="#000080">);
    </font><font color="#FF0000"><b>procedure </b></font>SetSideColor<font color="#000080">(</font>Value<font color="#000080">: </font>TColor<font color="#000080">);
  </font><font color="#FF0000"><b>public
    constructor </b></font>Create<font color="#000080">(</font>AOwner<font color="#000080">: </font>TComponent<font color="#000080">); </font><font color="#FF0000"><b>override</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>procedure </b></font>Paint<font color="#000080">; </font><font color="#FF0000"><b>override</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>procedure </b></font>MouseDown<font color="#000080">(</font>Button<font color="#000080">: </font>TMouseButton<font color="#000080">; </font>Shift<font color="#000080">: </font>TShiftState<font color="#000080">; </font>X<font color="#000080">, </font>Y<font color="#000080">: </font>Integer<font color="#000080">); </font><font color="#FF0000"><b>override</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>procedure </b></font>KeyDown<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>Key<font color="#000080">: </font>Word<font color="#000080">; </font>Shift<font color="#000080">: </font>TShiftState<font color="#000080">); </font><font color="#FF0000"><b>override</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>published
    property </b></font>CaptionOn<font color="#000080">: </font>TCaption <font color="#FF0000"><b>read </b></font>FCaptionOn <font color="#FF0000"><b>write </b></font>SetCaptionOn<font color="#000080">;
    </font><font color="#FF0000"><b>property </b></font>CaptionOff<font color="#000080">: </font>TCaption <font color="#FF0000"><b>read </b></font>FCaptionOff <font color="#FF0000"><b>write </b></font>SetCaptionOff<font color="#000080">;
    </font><font color="#FF0000"><b>property </b></font>Checked<font color="#000080">: </font>Boolean <font color="#FF0000"><b>read </b></font>FChecked <font color="#FF0000"><b>write </b></font>SetChecked <font color="#FF0000"><b>default </b></font>False<font color="#000080">;
    </font><font color="#FF0000"><b>property </b></font>CheckedLeft<font color="#000080">: </font>Boolean <font color="#FF0000"><b>read </b></font>FCheckedLeft <font color="#FF0000"><b>write </b></font>SetCheckedLeft <font color="#FF0000"><b>default </b></font>True<font color="#000080">;
    </font><font color="#FF0000"><b>property </b></font>Slope<font color="#000080">: </font>Byte <font color="#FF0000"><b>read </b></font>FSlope <font color="#FF0000"><b>write </b></font>SetSlope <font color="#FF0000"><b>default </b></font><font color="#800000">6</font><font color="#000080">;
    </font><font color="#FF0000"><b>property </b></font>SideLength<font color="#000080">: </font>Byte <font color="#FF0000"><b>read </b></font>FSideLength <font color="#FF0000"><b>write </b></font>SetSideLength <font color="#FF0000"><b>default </b></font><font color="#800000">6</font><font color="#000080">;
    </font><font color="#FF0000"><b>property </b></font>OnColor<font color="#000080">: </font>TColor <font color="#FF0000"><b>read </b></font>FOnColor <font color="#FF0000"><b>write </b></font>SetOnColor <font color="#FF0000"><b>default </b></font>clRed<font color="#000080">;
    </font><font color="#FF0000"><b>property </b></font>OffColor<font color="#000080">: </font>TColor <font color="#FF0000"><b>read </b></font>FOffColor <font color="#FF0000"><b>write </b></font>SetOffColor <font color="#FF0000"><b>default </b></font>clMaroon<font color="#000080">;
    </font><font color="#FF0000"><b>property </b></font>TopColor<font color="#000080">: </font>TColor <font color="#FF0000"><b>read </b></font>FTopColor <font color="#FF0000"><b>write </b></font>SetTopColor <font color="#FF0000"><b>default </b></font>clSilver<font color="#000080">;
    </font><font color="#FF0000"><b>property </b></font>SideColor<font color="#000080">: </font>TColor <font color="#FF0000"><b>read </b></font>FSideColor <font color="#FF0000"><b>write </b></font>SetSideColor <font color="#FF0000"><b>default </b></font>clSilver<font color="#000080">;
    </font><font color="#FF0000"><b>property </b></font>Font<font color="#000080">;
    </font><font color="#FF0000"><b>property </b></font>TabStop<font color="#000080">;
    </font><font color="#FF0000"><b>property </b></font>TabOrder<font color="#000080">;
    </font><font color="#FF0000"><b>property </b></font>ShowHint<font color="#000080">;

    </font><font color="#FF0000"><b>property </b></font>OnClick<font color="#000080">;
    </font><font color="#FF0000"><b>property </b></font>OnMouseDown<font color="#000080">;
    </font><font color="#FF0000"><b>property </b></font>OnChanged<font color="#000080">: </font>TNotifyEvent <font color="#FF0000"><b>read </b></font>FOnChanged <font color="#FF0000"><b>write </b></font>FOnChanged<font color="#000080">;
    </font><font color="#FF0000"><b>property </b></font>OnChecked<font color="#000080">: </font>TNotifyEvent <font color="#FF0000"><b>read </b></font>FOnChecked <font color="#FF0000"><b>write </b></font>FOnChecked<font color="#000080">;
    </font><font color="#FF0000"><b>property </b></font>OnUnChecked<font color="#000080">: </font>TNotifyEvent <font color="#FF0000"><b>read </b></font>FOnUnChecked <font color="#FF0000"><b>write </b></font>FOnUnChecked<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{------------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>procedure Register</b></font><font color="#000080">;

</font><font color="#FF0000"><b>implementation
</b></font><font color="#008000"><i>{------------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>constructor </b></font>TSwitch<font color="#000080">.</font>Create<font color="#000080">(</font>AOwner<font color="#000080">: </font>TComponent<font color="#000080">);
</font><font color="#FF0000"><b>begin
  inherited </b></font>Create<font color="#000080">(</font>AOwner<font color="#000080">);
  </font>Caption<font color="#000080">:=</font><font color="#800000">''</font><font color="#000080">;
  </font>FCaptionOn<font color="#000080">:=</font><font color="#800000">'EIN'</font><font color="#000080">;
  </font>FCaptionOff<font color="#000080">:=</font><font color="#800000">'AUS'</font><font color="#000080">;
  </font>FSlope<font color="#000080">:=</font><font color="#800000">6</font><font color="#000080">;
  </font>FSideLength<font color="#000080">:=</font><font color="#800000">6</font><font color="#000080">;
  </font>FChecked<font color="#000080">:=</font>False<font color="#000080">;
  </font>FCheckedLeft<font color="#000080">:=</font>True<font color="#000080">;
  </font>FOnColor<font color="#000080">:=</font>clRed<font color="#000080">;
  </font>FOffColor<font color="#000080">:=</font>clMaroon<font color="#000080">;
  </font>FTopColor<font color="#000080">:=</font>clSilver<font color="#000080">;
  </font>FSideColor<font color="#000080">:=</font>clSilver<font color="#000080">;
  </font>FOnChecked<font color="#000080">:=</font><font color="#FF0000"><b>nil</b></font><font color="#000080">;
  </font>FOnUnChecked<font color="#000080">:=</font><font color="#FF0000"><b>nil</b></font><font color="#000080">;
  </font>SetBounds<font color="#000080">(</font>Left<font color="#000080">,</font>Top<font color="#000080">,</font><font color="#800000">83</font><font color="#000080">,</font><font color="#800000">18 </font><font color="#000080">+ </font>FSlope<font color="#000080">);
  </font>Font<font color="#000080">.</font>Name<font color="#000080">:=</font><font color="#800000">'small fonts'</font><font color="#000080">;
  </font>Font<font color="#000080">.</font>Size<font color="#000080">:=</font><font color="#800000">7</font><font color="#000080">;
  </font>Font<font color="#000080">.</font>Color<font color="#000080">:=</font>clWhite<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{------------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>procedure </b></font>TSwitch<font color="#000080">.</font>Paint<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Draw<font color="#000080">;            </font><font color="#008000"><i>{Keine geerbte Methode aufrufen und sofort Schalter zeichnen}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{------------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>procedure </b></font>TSwitch<font color="#000080">.</font>MouseDown<font color="#000080">(</font>Button<font color="#000080">: </font>TMouseButton<font color="#000080">; </font>Shift<font color="#000080">: </font>TShiftState<font color="#000080">; </font>X<font color="#000080">, </font>Y<font color="#000080">: </font>Integer<font color="#000080">);
</font><font color="#FF0000"><b>begin
  inherited </b></font>MouseDown<font color="#000080">(</font>Button<font color="#000080">,</font>Shift<font color="#000080">,</font>X<font color="#000080">,</font>Y<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>Button <font color="#000080">= </font>mbLeft<font color="#000080">) </font><font color="#FF0000"><b>then
  begin
    </b></font>SetFocus<font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font><font color="#000080">((</font>LabelLen <font color="#000080">&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>X <font color="#000080">&gt; </font>LabelLen<font color="#000080">)) </font><font color="#FF0000"><b>or
       </b></font><font color="#000080">((</font>LabelLen <font color="#000080">&lt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>X <font color="#000080">&lt; </font>Abs<font color="#000080">(</font>LabelLen<font color="#000080">))) </font><font color="#FF0000"><b>then
    begin    </b></font><font color="#008000"><i>{Nur wenn Mausklick innerhalb des hervorgehobenen Schalterteil ist}
      </i></font>FChecked<font color="#000080">:=</font><font color="#FF0000"><b>not </b></font>FChecked<font color="#000080">;
      </font>CallNotifyEvent<font color="#000080">;
      </font>Invalidate<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{------------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>procedure </b></font>TSwitch<font color="#000080">.</font>WMSetFocus<font color="#000080">(</font><font color="#FF0000"><b>var Message</b></font><font color="#000080">: </font>TWMSetFocus<font color="#000080">);
</font><font color="#FF0000"><b>begin
  </b></font>Invalidate<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{------------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>procedure </b></font>TSwitch<font color="#000080">.</font>WMKillFocus<font color="#000080">(</font><font color="#FF0000"><b>var Message</b></font><font color="#000080">: </font>TWMKillFocus<font color="#000080">);
</font><font color="#FF0000"><b>begin
  </b></font>Invalidate<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{------------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>procedure </b></font>TSwitch<font color="#000080">.</font>KeyDown<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>Key<font color="#000080">: </font>Word<font color="#000080">; </font>Shift<font color="#000080">: </font>TShiftState<font color="#000080">);
</font><font color="#FF0000"><b>begin
  if </b></font>Focused <font color="#FF0000"><b>and </b></font><font color="#000080">((</font>Key <font color="#000080">= </font>VK_Space<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>Key <font color="#000080">= </font>VK_Return<font color="#000080">)) </font><font color="#FF0000"><b>then
  begin
    </b></font>FChecked<font color="#000080">:=</font><font color="#FF0000"><b>not </b></font>FChecked<font color="#000080">;
    </font>CallNotifyEvent<font color="#000080">;
    </font>Invalidate<font color="#000080">;
    </font>Click<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{------------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>procedure </b></font>TSwitch<font color="#000080">.</font>CallNotifyEvent<font color="#000080">;                       </font><font color="#008000"><i>{Au-enwelt informieren}
</i></font><font color="#FF0000"><b>begin
  if </b></font>Assigned<font color="#000080">(</font>FOnChanged<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>FOnChanged<font color="#000080">(</font>Self<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>FChecked <font color="#FF0000"><b>and </b></font>Assigned<font color="#000080">(</font>FOnChecked<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>FOnChecked<font color="#000080">(</font>Self<font color="#000080">) </font><font color="#FF0000"><b>else
  if not </b></font>FChecked <font color="#FF0000"><b>and </b></font>Assigned<font color="#000080">(</font>FOnUnChecked<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>FOnUnChecked<font color="#000080">(</font>Self<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{------------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>procedure </b></font>TSwitch<font color="#000080">.</font>Draw<font color="#000080">;                                      </font><font color="#008000"><i>{Schalter zeichnen}
</i></font><font color="#FF0000"><b>var
  </b></font>TW<font color="#000080">: </font>Integer<font color="#000080">;
  </font>TH<font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Setup<font color="#000080">;                                  </font><font color="#008000"><i>{Vektoren fnr Schalterteile berechnen}
  </i></font><font color="#FF0000"><b>if </b></font>Focused <font color="#FF0000"><b>then </b></font>Canvas<font color="#000080">.</font>Rectangle<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>Width<font color="#000080">,</font>AHeight <font color="#000080">+ </font><font color="#800000">1 </font><font color="#000080">+ </font><font color="#800000">2 </font><font color="#000080">* </font>ATop<font color="#000080">);
  </font>Canvas<font color="#000080">.</font>Pen<font color="#000080">.</font>Color<font color="#000080">:=</font>clWhite<font color="#000080">;                   </font><font color="#008000"><i>{Umrandung von Schalter zeichnen}
  </i></font>Canvas<font color="#000080">.</font>MoveTo<font color="#000080">(</font>ALeft <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">,</font>ATop <font color="#000080">+ </font>AHeight <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">);
  </font>Canvas<font color="#000080">.</font>LineTo<font color="#000080">(</font>ALeft <font color="#000080">+ </font>AWidth<font color="#000080">,</font>ATop <font color="#000080">+ </font>AHeight <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">);      </font><font color="#008000"><i>{Untere Linie in weiss}
  </i></font>Canvas<font color="#000080">.</font>LineTo<font color="#000080">(</font>ALeft <font color="#000080">+ </font>AWidth<font color="#000080">,</font>ATop <font color="#000080">- </font><font color="#800000">2</font><font color="#000080">);                </font><font color="#008000"><i>{Rechte Linie in weiss}

  </i></font>Canvas<font color="#000080">.</font>Pen<font color="#000080">.</font>Color<font color="#000080">:=</font>clGray<font color="#000080">;
  </font>Canvas<font color="#000080">.</font>MoveTo<font color="#000080">(</font>ALeft <font color="#000080">+ </font>AWidth<font color="#000080">,</font>ATop <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">);
  </font>Canvas<font color="#000080">.</font>LineTo<font color="#000080">(</font>ALeft <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">,</font>ATop <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">);                 </font><font color="#008000"><i>{Obere Linie in dunkelgrau}
  </i></font>Canvas<font color="#000080">.</font>LineTo<font color="#000080">(</font>ALeft <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">,</font>ATop <font color="#000080">+ </font>AHeight <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">);       </font><font color="#008000"><i>{Linke Linie in dunkelgrau}

  </i></font>Canvas<font color="#000080">.</font>Pen<font color="#000080">.</font>Color<font color="#000080">:=</font>clBlack<font color="#000080">;                      </font><font color="#008000"><i>{Polygonumrandung ist schwarz}
  </i></font>Canvas<font color="#000080">.</font>Brush<font color="#000080">.</font>Style<font color="#000080">:=</font>bsSolid<font color="#000080">;                      </font><font color="#008000"><i>{Fnllfl_che ist geschlossen}
  </i></font>Setup<font color="#000080">;
  </font>Canvas<font color="#000080">.</font>Brush<font color="#000080">.</font>Color<font color="#000080">:=</font>FTopColor<font color="#000080">;
  </font>Canvas<font color="#000080">.</font>Polygon<font color="#000080">(</font>TopShape<font color="#000080">);                         </font><font color="#008000"><i>{Top des Schalters zeichnen}
  </i></font>Canvas<font color="#000080">.</font>Brush<font color="#000080">.</font>Color<font color="#000080">:=</font>FSideColor<font color="#000080">;
  </font>Canvas<font color="#000080">.</font>Polygon<font color="#000080">(</font>SideShape<font color="#000080">);                      </font><font color="#008000"><i>{Seite des Schalters zeichnen}
  </i></font><font color="#FF0000"><b>if </b></font>FChecked <font color="#FF0000"><b>then </b></font>Canvas<font color="#000080">.</font>Brush<font color="#000080">.</font>Color<font color="#000080">:=</font>FOnColor
  <font color="#FF0000"><b>else </b></font>Canvas<font color="#000080">.</font>Brush<font color="#000080">.</font>Color<font color="#000080">:=</font>FOffColor<font color="#000080">;
  </font>Canvas<font color="#000080">.</font>Polygon<font color="#000080">(</font>OnShape<font color="#000080">);                     </font><font color="#008000"><i>{On Seite des Schalters zeichnen}
  </i></font>Canvas<font color="#000080">.</font>Brush<font color="#000080">.</font>Color<font color="#000080">:=</font>FOffColor<font color="#000080">;
  </font>Canvas<font color="#000080">.</font>Polygon<font color="#000080">(</font>OffShape<font color="#000080">);                   </font><font color="#008000"><i>{Off Seite des Schalters zeichnen}

  </i></font>Canvas<font color="#000080">.</font>Font<font color="#000080">:=</font>Font<font color="#000080">;                                  </font><font color="#008000"><i>{Gew_hlten Font nbergeben}
  </i></font>Canvas<font color="#000080">.</font>Brush<font color="#000080">.</font>Style<font color="#000080">:=</font>bsClear<font color="#000080">;                        </font><font color="#008000"><i>{Transparente Textausgabe}

  </i></font><font color="#FF0000"><b>if </b></font>FChecked <font color="#FF0000"><b>then </b></font>Caption<font color="#000080">:=</font>FCaptionOn <font color="#FF0000"><b>else </b></font>Caption<font color="#000080">:=</font>FCaptionOff<font color="#000080">;

  </font><font color="#FF0000"><b>if </b></font>LabelLen <font color="#000080">&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>TW<font color="#000080">:=</font>ALeft <font color="#000080">+ ((</font>Abs<font color="#000080">(</font>LabelLen<font color="#000080">) - </font>Canvas<font color="#000080">.</font>TextWidth<font color="#000080">(</font>Caption<font color="#000080">)) </font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">)
  </font><font color="#FF0000"><b>else </b></font>TW<font color="#000080">:=</font>LabelOfs <font color="#000080">+ ((</font>Abs<font color="#000080">(</font>LabelLen<font color="#000080">) - </font>Canvas<font color="#000080">.</font>TextWidth<font color="#000080">(</font>Caption<font color="#000080">)) </font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">);
  </font>TH<font color="#000080">:=</font>ATop <font color="#000080">+ ((</font>AHeight <font color="#000080">- </font>Canvas<font color="#000080">.</font>TextHeight<font color="#000080">(</font>Caption<font color="#000080">)) </font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">);

  </font>Canvas<font color="#000080">.</font>TextOut<font color="#000080">(</font>TW<font color="#000080">,</font>TH<font color="#000080">,</font>Caption<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{------------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>procedure </b></font>TSwitch<font color="#000080">.</font>Setup<font color="#000080">;                  </font><font color="#008000"><i>{Vektoren fnr Schalterteile berechnen}
</i></font><font color="#FF0000"><b>begin
  </b></font>ALeft<font color="#000080">:=</font><font color="#800000">2</font><font color="#000080">;                </font><font color="#008000"><i>{2 Pixel linker Abstand fnr Rahmen und Focusrechteck}
  </i></font>ATop<font color="#000080">:=</font><font color="#800000">2</font><font color="#000080">;                 </font><font color="#008000"><i>{2 Pixel oberer Abstand fnr Rahmen und Focusrechteck}
  </i></font>AHeight<font color="#000080">:=</font>Height <font color="#000080">- </font>FSlope <font color="#000080">- </font><font color="#800000">2 </font><font color="#000080">* </font>ATop<font color="#000080">;   </font><font color="#008000"><i>{Schalterhwhe = Height - Ofs - Neigung}
  </i></font>AWidth<font color="#000080">:=</font>Width <font color="#000080">- </font><font color="#800000">2 </font><font color="#000080">* </font>ALeft<font color="#000080">;                  </font><font color="#008000"><i>{Schalterbreite = Width - 2 * Ofs}
  </i></font>LabelLen<font color="#000080">:=</font>AWidth <font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">;
  </font>LabelOfs<font color="#000080">:=</font>LabelLen <font color="#000080">+ </font>ALeft<font color="#000080">;
  </font>Side<font color="#000080">:=</font>FSideLength<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font><font color="#FF0000"><b>not </b></font>FChecked <font color="#FF0000"><b>and </b></font>FCheckedLeft<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font><font color="#FF0000"><b>not </b></font>FCheckedLeft <font color="#FF0000"><b>and </b></font>FChecked<font color="#000080">) </font><font color="#FF0000"><b>then
  begin
    </b></font>LabelLen<font color="#000080">:=-</font>LabelLen<font color="#000080">;
    </font>Side<font color="#000080">:=-</font>FSideLength<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>TopShape<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">].</font>X<font color="#000080">:=</font>LabelOfs<font color="#000080">;          </font><font color="#008000"><i>{Vektoren von obere Dreieckfl_che berechnen}
  </i></font>TopShape<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">].</font>Y<font color="#000080">:=</font>ATop<font color="#000080">;
  </font>TopShape<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>X<font color="#000080">:=</font>LabelOfs <font color="#000080">+ </font>LabelLen <font color="#000080">- </font>Side<font color="#000080">;
  </font>TopShape<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>Y<font color="#000080">:=</font>ATop <font color="#000080">+ </font>FSlope<font color="#000080">;
  </font>TopShape<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">].</font>X<font color="#000080">:=</font>LabelOfs <font color="#000080">+ </font>LabelLen<font color="#000080">;
  </font>TopShape<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">].</font>Y<font color="#000080">:=</font>ATop<font color="#000080">;

  </font>OnShape<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">].</font>X<font color="#000080">:=</font>LabelOfs <font color="#000080">- </font>LabelLen<font color="#000080">;   </font><font color="#008000"><i>{Vektoren der &quot;EIN&quot; Frontseite berechnen}
  </i></font>OnShape<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">].</font>Y<font color="#000080">:=</font>ATop<font color="#000080">;
  </font>OnShape<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]:=</font>TopShape<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">];
  </font>OnShape<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">]:=</font>OffShape<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">];
  </font>OnShape<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">].</font>X<font color="#000080">:=</font>OnShape<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">].</font>X<font color="#000080">;
  </font>OnShape<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">].</font>Y<font color="#000080">:=</font>ATop <font color="#000080">+ </font>AHeight<font color="#000080">;

  </font>OffShape<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]:=</font>TopShape<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">];            </font><font color="#008000"><i>{Vektoren der &quot;AUS&quot; Frontseite berechnen}
  </i></font>OffShape<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]:=</font>TopShape<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">];
  </font>OffShape<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">].</font>X<font color="#000080">:=</font>OffShape<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>X<font color="#000080">;
  </font>OffShape<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">].</font>Y<font color="#000080">:=</font>OffShape<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>Y <font color="#000080">+ </font>AHeight<font color="#000080">;
  </font>OffShape<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">].</font>X<font color="#000080">:=</font>OffShape<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">].</font>X<font color="#000080">;
  </font>OffShape<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">].</font>Y<font color="#000080">:=</font>ATop <font color="#000080">+ </font>AHeight<font color="#000080">;

  </font>SideShape<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]:=</font>OffShape<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">];               </font><font color="#008000"><i>{Vektoren der Seitenfl_che berechnen}
  </i></font>SideShape<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]:=</font>TopShape<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">];
  </font>SideShape<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">].</font>X<font color="#000080">:=</font>SideShape<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>X<font color="#000080">;
  </font>SideShape<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">].</font>Y<font color="#000080">:=</font>ATop <font color="#000080">+ </font>AHeight<font color="#000080">;
  </font>SideShape<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">]:=</font>OffShape<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">];
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{------------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>procedure </b></font>TSwitch<font color="#000080">.</font>SetCaptionOn<font color="#000080">(</font>Value<font color="#000080">: </font>TCaption<font color="#000080">);   </font><font color="#008000"><i>{Beschriftung &quot;ON&quot; nbergeben}
</i></font><font color="#FF0000"><b>begin
  if </b></font>FCaptionOn <font color="#000080">&lt;&gt; </font>Value <font color="#FF0000"><b>then
  begin
    </b></font>FCaptionOn<font color="#000080">:=</font>Value<font color="#000080">;
    </font>Invalidate<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{------------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>procedure </b></font>TSwitch<font color="#000080">.</font>SetCaptionOff<font color="#000080">(</font>Value<font color="#000080">: </font>TCaption<font color="#000080">); </font><font color="#008000"><i>{Beschriftung &quot;OFF&quot; nbergeben}
</i></font><font color="#FF0000"><b>begin
  if </b></font>FCaptionOff <font color="#000080">&lt;&gt; </font>Value <font color="#FF0000"><b>then
  begin
    </b></font>FCaptionOff<font color="#000080">:=</font>Value<font color="#000080">;
    </font>Invalidate<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{------------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>procedure </b></font>TSwitch<font color="#000080">.</font>SetChecked<font color="#000080">(</font>Value<font color="#000080">: </font>Boolean<font color="#000080">);
</font><font color="#FF0000"><b>begin
  if </b></font>FChecked <font color="#000080">&lt;&gt; </font>Value <font color="#FF0000"><b>then
  begin
    </b></font>FChecked<font color="#000080">:=</font>Value<font color="#000080">;
    </font>CallNotifyEvent<font color="#000080">;
    </font>Invalidate<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{------------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>procedure </b></font>TSwitch<font color="#000080">.</font>SetCheckedLeft<font color="#000080">(</font>Value<font color="#000080">: </font>Boolean<font color="#000080">);
</font><font color="#FF0000"><b>begin
  if </b></font>FCheckedLeft <font color="#000080">&lt;&gt; </font>Value <font color="#FF0000"><b>then
  begin
    </b></font>FCheckedLeft<font color="#000080">:=</font>Value<font color="#000080">;
    </font>Invalidate<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{------------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>procedure </b></font>TSwitch<font color="#000080">.</font>SetSlope<font color="#000080">(</font>Value<font color="#000080">: </font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>begin
  if </b></font>FSlope <font color="#000080">&lt;&gt; </font>Value <font color="#FF0000"><b>then
  begin
    </b></font>FSlope<font color="#000080">:=</font>Value<font color="#000080">;
    </font>Invalidate<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{------------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>procedure </b></font>TSwitch<font color="#000080">.</font>SetSideLength<font color="#000080">(</font>Value<font color="#000080">: </font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>begin
  if </b></font><font color="#000080">(</font>FSideLength <font color="#000080">&lt;&gt; </font>Value<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>Value <font color="#000080">&lt; </font>Width <font color="#000080">- </font><font color="#800000">4</font><font color="#000080">) </font><font color="#FF0000"><b>then
  begin
    </b></font>FSideLength<font color="#000080">:=</font>Value<font color="#000080">;
    </font>Invalidate<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{------------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>procedure </b></font>TSwitch<font color="#000080">.</font>SetOnColor<font color="#000080">(</font>Value<font color="#000080">: </font>TColor<font color="#000080">);
</font><font color="#FF0000"><b>begin
  if </b></font>FOnColor <font color="#000080">&lt;&gt; </font>Value <font color="#FF0000"><b>then
  begin
    </b></font>FOnColor<font color="#000080">:=</font>Value<font color="#000080">;
    </font>Invalidate<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{------------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>procedure </b></font>TSwitch<font color="#000080">.</font>SetOffColor<font color="#000080">(</font>Value<font color="#000080">: </font>TColor<font color="#000080">);
</font><font color="#FF0000"><b>begin
  if </b></font>FOffColor <font color="#000080">&lt;&gt; </font>Value <font color="#FF0000"><b>then
  begin
    </b></font>FOffColor<font color="#000080">:=</font>Value<font color="#000080">;
    </font>Invalidate<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{------------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>procedure </b></font>TSwitch<font color="#000080">.</font>SetTopColor<font color="#000080">(</font>Value<font color="#000080">: </font>TColor<font color="#000080">);
</font><font color="#FF0000"><b>begin
  if </b></font>FTopColor <font color="#000080">&lt;&gt; </font>Value <font color="#FF0000"><b>then
  begin
    </b></font>FTopColor<font color="#000080">:=</font>Value<font color="#000080">;
    </font>Invalidate<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{------------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>procedure </b></font>TSwitch<font color="#000080">.</font>SetSideColor<font color="#000080">(</font>Value<font color="#000080">: </font>TColor<font color="#000080">);
</font><font color="#FF0000"><b>begin
  if </b></font>FSideColor <font color="#000080">&lt;&gt; </font>Value <font color="#FF0000"><b>then
  begin
    </b></font>FSideColor<font color="#000080">:=</font>Value<font color="#000080">;
    </font>Invalidate<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{------------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>procedure Register</b></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>RegisterComponents<font color="#000080">(</font><font color="#800000">'Udo|s'</font><font color="#000080">,[</font>TSwitch<font color="#000080">]);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{------------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>initialization
end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to DELPHI SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0139.PAS">Original</a><b>]</b></p></body>
</html>
