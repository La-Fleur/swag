<html>
<head><title> "Hash Table algorithm for Delphi" by KKTOS@SIRIUS.FR</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to DELPHI SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0311.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
	THashTable unit - Delphi 1 version
     by kktos, May 1997.
     This code is FREEWARE.
     *** Please, if you enhance it, mail me at kktos@sirius.fr ***
}
</i></font><font color="#FF0000"><b>unit </b></font>HashTabl<font color="#000080">;

</font><font color="#FF0000"><b>interface

uses </b></font>Classes<font color="#000080">;

</font><font color="#FF0000"><b>type
</b></font>	TDeleteType<font color="#000080">= (</font>dtDelete<font color="#000080">, </font>dtDetach<font color="#000080">);

</font><font color="#008000"><i>{ Class THashList, from Delphi 2 TList source
	used internally, but you can use it for any purpose
}

</i></font>	THashItem<font color="#000080">= </font><font color="#FF0000"><b>record
</b></font>		key<font color="#000080">:</font>	longint<font color="#000080">;
</font>	     obj<font color="#000080">:</font>	TObject<font color="#000080">;
</font>	<font color="#FF0000"><b>end</b></font><font color="#000080">;

</font>	PHashItemList <font color="#000080">= ^</font>THashItemList<font color="#000080">;
     </font>THashItemList <font color="#000080">= </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">0</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>THashItem<font color="#000080">;

     </font>THashList <font color="#000080">= </font><font color="#FF0000"><b>class</b></font><font color="#000080">(</font>TObject<font color="#000080">)
     </font><font color="#FF0000"><b>private
</b></font>        	Flist<font color="#000080">:</font>		PHashItemList<font color="#000080">;
</font>        	Fcount<font color="#000080">:</font> 		integer<font color="#000080">;
</font>		Fcapacity<font color="#000080">:</font>	integer<font color="#000080">;
          </font>memSize<font color="#000080">:</font>		longint<font color="#000080">;
          </font>FdeleteType<font color="#000080">:</font>	TDeleteType<font color="#000080">;

     </font><font color="#FF0000"><b>protected
</b></font>        	<font color="#FF0000"><b>procedure </b></font>Error<font color="#000080">;
</font>        	<font color="#FF0000"><b>function </b></font>Get<font color="#000080">(</font>Index<font color="#000080">: </font>Integer<font color="#000080">): </font>THashItem<font color="#000080">;
</font>        	<font color="#FF0000"><b>procedure </b></font>Grow<font color="#000080">;
</font>        	<font color="#FF0000"><b>procedure </b></font>Put<font color="#000080">(</font>Index<font color="#000080">: </font>Integer<font color="#000080">; </font><font color="#FF0000"><b>const </b></font>Item<font color="#000080">: </font>THashItem<font color="#000080">);
</font>        	<font color="#FF0000"><b>procedure </b></font>SetCapacity<font color="#000080">(</font>NewCapacity<font color="#000080">: </font>Integer<font color="#000080">);
</font>       	<font color="#FF0000"><b>procedure </b></font>SetCount<font color="#000080">(</font>NewCount<font color="#000080">: </font>Integer<font color="#000080">);

     </font><font color="#FF0000"><b>public
</b></font>  		<font color="#FF0000"><b>constructor </b></font>Create<font color="#000080">;
</font>        	<font color="#FF0000"><b>destructor </b></font>Destroy<font color="#000080">; </font><font color="#FF0000"><b>override</b></font><font color="#000080">;

</font>        	<font color="#FF0000"><b>function </b></font>Add<font color="#000080">(</font><font color="#FF0000"><b>const </b></font>Item<font color="#000080">: </font>THashItem<font color="#000080">): </font>Integer<font color="#000080">;
</font>        	<font color="#FF0000"><b>procedure </b></font>Clear<font color="#000080">(</font>dt<font color="#000080">: </font>TDeleteType<font color="#000080">);
</font>        	<font color="#FF0000"><b>procedure </b></font>Detach<font color="#000080">(</font>Index<font color="#000080">: </font>Integer<font color="#000080">);
</font>        	<font color="#FF0000"><b>procedure </b></font>Delete<font color="#000080">(</font>Index<font color="#000080">: </font>Integer<font color="#000080">);
</font>        	<font color="#FF0000"><b>function </b></font>Expand<font color="#000080">: </font>THashList<font color="#000080">;
</font>        	<font color="#FF0000"><b>function </b></font>IndexOf<font color="#000080">(</font>key<font color="#000080">: </font>longint<font color="#000080">): </font>Integer<font color="#000080">;
</font>        	<font color="#FF0000"><b>procedure </b></font>Pack<font color="#000080">;

</font>        	<font color="#FF0000"><b>property </b></font>DeleteType<font color="#000080">: </font>TDeleteType			<font color="#FF0000"><b>read </b></font>FdeleteType	<font color="#FF0000"><b>write </b></font>FdeleteType<font color="#000080">;
</font>        	<font color="#FF0000"><b>property </b></font>Capacity<font color="#000080">: </font>Integer				<font color="#FF0000"><b>read </b></font>FCapacity		<font color="#FF0000"><b>write </b></font>SetCapacity<font color="#000080">;
</font>        	<font color="#FF0000"><b>property </b></font>Count<font color="#000080">: </font>Integer					<font color="#FF0000"><b>read </b></font>FCount		<font color="#FF0000"><b>write </b></font>SetCount<font color="#000080">;
</font>		<font color="#FF0000"><b>property </b></font>Items<font color="#000080">[</font><font color="#FF0000"><b>Index</b></font><font color="#000080">: </font>Integer<font color="#000080">]: </font>THashItem	<font color="#FF0000"><b>read </b></font>Get			<font color="#FF0000"><b>write </b></font>Put<font color="#000080">;</font> 	<font color="#FF0000"><b>default</b></font><font color="#000080">;
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ Class THashTable
	the real hashtable.
}

  </i></font>THashTable<font color="#000080">= </font><font color="#FF0000"><b>class</b></font><font color="#000080">(</font>TObject<font color="#000080">)
  </font><font color="#FF0000"><b>private
</b></font>		Ftable<font color="#000080">:</font>	THashList<font color="#000080">;

</font>		<font color="#FF0000"><b>procedure </b></font>Error<font color="#000080">;

</font>		<font color="#FF0000"><b>function </b></font>getCount<font color="#000080">: </font>integer<font color="#000080">;
          </font><font color="#FF0000"><b>procedure </b></font>setCount<font color="#000080">(</font>count<font color="#000080">: </font>integer<font color="#000080">);
</font>		<font color="#FF0000"><b>function </b></font>getCapacity<font color="#000080">: </font>integer<font color="#000080">;
          </font><font color="#FF0000"><b>procedure </b></font>setCapacity<font color="#000080">(</font>capacity<font color="#000080">: </font>integer<font color="#000080">);
</font>		<font color="#FF0000"><b>function </b></font>getItem<font color="#000080">(</font>index<font color="#000080">: </font>integer<font color="#000080">): </font>TObject<font color="#000080">;
          </font><font color="#FF0000"><b>procedure </b></font>setItem<font color="#000080">(</font>index<font color="#000080">: </font>integer<font color="#000080">; </font>obj<font color="#000080">: </font>TObject<font color="#000080">);
</font>		<font color="#FF0000"><b>function </b></font>getDeleteType<font color="#000080">: </font>TDeleteType<font color="#000080">;
          </font><font color="#FF0000"><b>procedure </b></font>setDeleteType<font color="#000080">(</font>dt<font color="#000080">: </font>TDeleteType<font color="#000080">);

  </font><font color="#FF0000"><b>public
</b></font>  		<font color="#FF0000"><b>constructor </b></font>Create<font color="#000080">;
</font>  		<font color="#FF0000"><b>destructor </b></font>Destroy<font color="#000080">; </font><font color="#FF0000"><b>override</b></font><font color="#000080">;

</font>		<font color="#FF0000"><b>procedure </b></font>Add<font color="#000080">(</font><font color="#FF0000"><b>const </b></font>key<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">; </font>value<font color="#000080">: </font>TObject<font color="#000080">);
</font>     	<font color="#FF0000"><b>function </b></font>Get<font color="#000080">(</font><font color="#FF0000"><b>const </b></font>key<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">): </font>TObject<font color="#000080">;
</font>     	<font color="#FF0000"><b>procedure </b></font>Detach<font color="#000080">(</font><font color="#FF0000"><b>const </b></font>key<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">);
</font>     	<font color="#FF0000"><b>procedure </b></font>Delete<font color="#000080">(</font><font color="#FF0000"><b>const </b></font>key<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">);
</font>        	<font color="#FF0000"><b>procedure </b></font>Clear<font color="#000080">(</font>dt<font color="#000080">: </font>TDeleteType<font color="#000080">);
</font>    		<font color="#FF0000"><b>procedure </b></font>Pack<font color="#000080">;

</font>        	<font color="#FF0000"><b>property </b></font>DeleteType<font color="#000080">: </font>TDeleteType			<font color="#FF0000"><b>read </b></font>getDeleteType	<font color="#FF0000"><b>write </b></font>setDeleteType<font color="#000080">;
</font>	   	<font color="#FF0000"><b>property </b></font>Count<font color="#000080">: </font>integer 					<font color="#FF0000"><b>read </b></font>getCount		<font color="#FF0000"><b>write </b></font>setCount<font color="#000080">;
</font>        	<font color="#FF0000"><b>property </b></font>Capacity<font color="#000080">: </font>Integer				<font color="#FF0000"><b>read </b></font>getCapacity	<font color="#FF0000"><b>write </b></font>setCapacity<font color="#000080">;
</font>        	<font color="#FF0000"><b>property </b></font>Items<font color="#000080">[</font><font color="#FF0000"><b>index</b></font><font color="#000080">: </font>Integer<font color="#000080">]: </font>TObject		<font color="#FF0000"><b>read </b></font>getItem		<font color="#FF0000"><b>write </b></font>setItem<font color="#000080">;
          </font><font color="#FF0000"><b>property </b></font>Table<font color="#000080">: </font>THashList				<font color="#FF0000"><b>read </b></font>Ftable<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>hash<font color="#000080">(</font>key<font color="#000080">: </font>Pointer<font color="#000080">; </font>length<font color="#000080">: </font>longint<font color="#000080">; </font>level<font color="#000080">: </font>longint<font color="#000080">): </font>longint<font color="#000080">; 

</font><font color="#FF0000"><b>implementation

uses </b></font>SysUtils<font color="#000080">, </font>Consts<font color="#000080">;

</font><font color="#FF0000"><b>type
</b></font>	longArray<font color="#000080">=</font>	<font color="#FF0000"><b>packed array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">3</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
</font>	longArrayPtr<font color="#000080">=</font>	<font color="#000080">^</font>longArray<font color="#000080">;

</font>	array12<font color="#000080">=</font>		<font color="#FF0000"><b>packed array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">11</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
</font>	array12Ptr<font color="#000080">=</font>	<font color="#000080">^</font>array12<font color="#000080">;

     </font>longPtr<font color="#000080">=</font>		<font color="#000080">^</font>longint<font color="#000080">;


</font><font color="#008000"><i>{ --- Class THashList ---
	brute copy of TList D2 source, with some minors changes
     no comment, see TList
}

{-----------------------------------------------------------------------------}
</i></font><font color="#FF0000"><b>constructor </b></font>THashList<font color="#000080">.</font>Create<font color="#000080">;
</font><font color="#FF0000"><b>begin
</b></font>	FdeleteType<font color="#000080">:= </font>dtDelete<font color="#000080">;
</font>	FCapacity<font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
     </font>FCount<font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
     </font>memSize<font color="#000080">:= </font><font color="#800000">4</font><font color="#000080">;
     </font>Flist<font color="#000080">:= </font>AllocMem<font color="#000080">(</font>memSize<font color="#000080">);
     </font>SetCapacity<font color="#000080">(</font><font color="#800000">100</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{-----------------------------------------------------------------------------}
</i></font><font color="#FF0000"><b>destructor </b></font>THashList<font color="#000080">.</font>Destroy<font color="#000080">;
</font><font color="#FF0000"><b>begin
</b></font>	Clear<font color="#000080">(</font>FdeleteType<font color="#000080">);
     </font>FreeMem<font color="#000080">(</font>FList<font color="#000080">, </font>memSize<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{-----------------------------------------------------------------------------}
</i></font><font color="#FF0000"><b>function </b></font>THashList<font color="#000080">.</font>Add<font color="#000080">(</font><font color="#FF0000"><b>const </b></font>Item<font color="#000080">: </font>THashItem<font color="#000080">): </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
</b></font>	Result <font color="#000080">:= </font>FCount<font color="#000080">;
</font>	<font color="#FF0000"><b>if</b></font><font color="#000080">(</font>Result <font color="#000080">= </font>FCapacity<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>Grow<font color="#000080">;
</font>	FList<font color="#000080">^[</font>Result<font color="#000080">].</font>key<font color="#000080">:= </font>Item<font color="#000080">.</font>key<font color="#000080">;
</font>	FList<font color="#000080">^[</font>Result<font color="#000080">].</font>obj<font color="#000080">:= </font>Item<font color="#000080">.</font>obj<font color="#000080">;
</font>	Inc<font color="#000080">(</font>FCount<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{-----------------------------------------------------------------------------}
</i></font><font color="#FF0000"><b>procedure </b></font>THashList<font color="#000080">.</font>Clear<font color="#000080">(</font>dt<font color="#000080">: </font>TDeleteType<font color="#000080">);
</font><font color="#FF0000"><b>var
</b></font>	i<font color="#000080">:</font>	integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
</b></font>	<font color="#FF0000"><b>if</b></font><font color="#000080">(</font>dt<font color="#000080">=</font>dtDelete<font color="#000080">) </font><font color="#FF0000"><b>then
</b></font>		<font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font>FCount <font color="#000080">- </font><font color="#800000">1 </font><font color="#FF0000"><b>downto </b></font><font color="#800000">0 </font><font color="#FF0000"><b>do
</b></font>		  	<font color="#FF0000"><b>if</b></font><font color="#000080">(</font>Items<font color="#000080">[</font>i<font color="#000080">].</font>obj <font color="#000080">&lt;&gt; </font><font color="#FF0000"><b>nil</b></font><font color="#000080">) </font><font color="#FF0000"><b>then
</b></font>     			Items<font color="#000080">[</font>i<font color="#000080">].</font>obj<font color="#000080">.</font>Free<font color="#000080">;
     </font><font color="#008000"><i>{FreeMem(FList, memSize);
     memSize:= 4;
     Flist:= AllocMem(memSize);}
</i></font>	FCapacity<font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
     </font>FCount<font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{-----------------------------------------------------------------------------}
{ know BC++ ? remember TArray::Detach?
	if not, Detach remove the item from the list without disposing the object
}
</i></font><font color="#FF0000"><b>procedure </b></font>THashList<font color="#000080">.</font>Detach<font color="#000080">(</font>Index<font color="#000080">: </font>Integer<font color="#000080">);
</font><font color="#FF0000"><b>begin
</b></font>	<font color="#FF0000"><b>if</b></font><font color="#000080">((</font>Index <font color="#000080">&lt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>Index <font color="#000080">&gt;= </font>FCount<font color="#000080">)) </font><font color="#FF0000"><b>then </b></font>Error<font color="#000080">;
</font>	Dec<font color="#000080">(</font>FCount<font color="#000080">);
</font>	<font color="#FF0000"><b>if</b></font><font color="#000080">(</font>Index <font color="#000080">&lt; </font>FCount<font color="#000080">) </font><font color="#FF0000"><b>then
</b></font>		System<font color="#000080">.</font>Move<font color="#000080">(</font>FList<font color="#000080">^[</font>Index <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">], </font>FList<font color="#000080">^[</font>Index<font color="#000080">], (</font>FCount <font color="#000080">- </font>Index<font color="#000080">) * </font>SizeOf<font color="#000080">(</font>THashItem<font color="#000080">));
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{-----------------------------------------------------------------------------}
{ know BC++ ? remember TArray::Destroy ? renames delete 'cause destroy...
	if not, Delete remove the item from the list AND dispose the object
}
</i></font><font color="#FF0000"><b>procedure </b></font>THashList<font color="#000080">.</font>Delete<font color="#000080">(</font>Index<font color="#000080">: </font>Integer<font color="#000080">);
</font><font color="#FF0000"><b>begin
</b></font>	<font color="#FF0000"><b>if</b></font><font color="#000080">((</font>Index <font color="#000080">&lt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>Index <font color="#000080">&gt;= </font>FCount<font color="#000080">)) </font><font color="#FF0000"><b>then </b></font>Error<font color="#000080">;
</font>	Dec<font color="#000080">(</font>FCount<font color="#000080">);
</font>	<font color="#FF0000"><b>if</b></font><font color="#000080">(</font>Index <font color="#000080">&lt; </font>FCount<font color="#000080">) </font><font color="#FF0000"><b>then begin
</b></font>		FList<font color="#000080">^[</font>Index<font color="#000080">].</font>obj<font color="#000080">.</font>Free<font color="#000080">;
</font>		System<font color="#000080">.</font>Move<font color="#000080">(</font>FList<font color="#000080">^[</font>Index <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">], </font>FList<font color="#000080">^[</font>Index<font color="#000080">], (</font>FCount <font color="#000080">- </font>Index<font color="#000080">) * </font>SizeOf<font color="#000080">(</font>THashItem<font color="#000080">));
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{-----------------------------------------------------------------------------}
</i></font><font color="#FF0000"><b>procedure </b></font>THashList<font color="#000080">.</font>Error<font color="#000080">;
</font><font color="#FF0000"><b>begin
</b></font>	<font color="#FF0000"><b>raise </b></font>EListError<font color="#000080">.</font>CreateRes<font color="#000080">(</font>SListIndexError<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{-----------------------------------------------------------------------------}
</i></font><font color="#FF0000"><b>function </b></font>THashList<font color="#000080">.</font>Expand<font color="#000080">: </font>THashList<font color="#000080">;
</font><font color="#FF0000"><b>begin
</b></font>	<font color="#FF0000"><b>if</b></font><font color="#000080">(</font>FCount <font color="#000080">= </font>FCapacity<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>Grow<font color="#000080">;
</font>	Result<font color="#000080">:= </font>Self<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{-----------------------------------------------------------------------------}
</i></font><font color="#FF0000"><b>function </b></font>THashList<font color="#000080">.</font>Get<font color="#000080">(</font>Index<font color="#000080">: </font>Integer<font color="#000080">): </font>THashItem<font color="#000080">;
</font><font color="#FF0000"><b>begin
</b></font>	<font color="#FF0000"><b>if</b></font><font color="#000080">((</font>Index <font color="#000080">&lt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>Index <font color="#000080">&gt;= </font>FCount<font color="#000080">)) </font><font color="#FF0000"><b>then </b></font>Error<font color="#000080">;
</font>	Result<font color="#000080">.</font>key<font color="#000080">:= </font>FList<font color="#000080">^[</font>Index<font color="#000080">].</font>key<font color="#000080">;
</font>	Result<font color="#000080">.</font>obj<font color="#000080">:= </font>FList<font color="#000080">^[</font>Index<font color="#000080">].</font>obj<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{-----------------------------------------------------------------------------}
</i></font><font color="#FF0000"><b>procedure </b></font>THashList<font color="#000080">.</font>Grow<font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>Delta<font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
</b></font>	<font color="#FF0000"><b>if </b></font>FCapacity <font color="#000080">&gt; </font><font color="#800000">8 </font><font color="#FF0000"><b>then </b></font>Delta <font color="#000080">:= </font><font color="#800000">16
     </font><font color="#FF0000"><b>else</b></font>	<font color="#FF0000"><b>if </b></font>FCapacity <font color="#000080">&gt; </font><font color="#800000">4 </font><font color="#FF0000"><b>then </b></font>Delta <font color="#000080">:= </font><font color="#800000">8
     </font><font color="#FF0000"><b>else</b></font>	Delta <font color="#000080">:= </font><font color="#800000">4</font><font color="#000080">;
</font>	SetCapacity<font color="#000080">(</font>FCapacity <font color="#000080">+ </font>Delta<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{-----------------------------------------------------------------------------}
</i></font><font color="#FF0000"><b>function </b></font>THashList<font color="#000080">.</font>IndexOf<font color="#000080">(</font>key<font color="#000080">: </font>longint<font color="#000080">): </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
</b></font>	Result <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
</font>	<font color="#FF0000"><b>while </b></font><font color="#000080">(</font>Result <font color="#000080">&lt; </font>FCount<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>FList<font color="#000080">^[</font>Result<font color="#000080">].</font>key <font color="#000080">&lt;&gt; </font>key<font color="#000080">) </font><font color="#FF0000"><b>do </b></font>Inc<font color="#000080">(</font>Result<font color="#000080">);
</font>	<font color="#FF0000"><b>if </b></font>Result <font color="#000080">= </font>FCount <font color="#FF0000"><b>then </b></font>Result<font color="#000080">:= -</font><font color="#800000">1</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{-----------------------------------------------------------------------------}
</i></font><font color="#FF0000"><b>procedure </b></font>THashList<font color="#000080">.</font>Put<font color="#000080">(</font>Index<font color="#000080">: </font>Integer<font color="#000080">; </font><font color="#FF0000"><b>const </b></font>Item<font color="#000080">: </font>THashItem<font color="#000080">);
</font><font color="#FF0000"><b>begin
</b></font>	<font color="#FF0000"><b>if </b></font><font color="#000080">(</font>Index <font color="#000080">&lt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>Index <font color="#000080">&gt;= </font>FCount<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>Error<font color="#000080">;
</font>	FList<font color="#000080">^[</font>Index<font color="#000080">].</font>key<font color="#000080">:= </font>Item<font color="#000080">.</font>key<font color="#000080">;
</font>	FList<font color="#000080">^[</font>Index<font color="#000080">].</font>obj<font color="#000080">:= </font>Item<font color="#000080">.</font>obj<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{-----------------------------------------------------------------------------}
</i></font><font color="#FF0000"><b>procedure </b></font>THashList<font color="#000080">.</font>Pack<font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>i<font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
</b></font>	<font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font>FCount <font color="#000080">- </font><font color="#800000">1 </font><font color="#FF0000"><b>downto </b></font><font color="#800000">0 </font><font color="#FF0000"><b>do
</b></font>	  	<font color="#FF0000"><b>if </b></font>Items<font color="#000080">[</font>i<font color="#000080">].</font>obj <font color="#000080">= </font><font color="#FF0000"><b>nil then </b></font>Delete<font color="#000080">(</font>i<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{-----------------------------------------------------------------------------}
</i></font><font color="#FF0000"><b>procedure </b></font>THashList<font color="#000080">.</font>SetCapacity<font color="#000080">(</font>NewCapacity<font color="#000080">: </font>Integer<font color="#000080">);
</font><font color="#FF0000"><b>begin
</b></font>	<font color="#FF0000"><b>if</b></font><font color="#000080">((</font>NewCapacity <font color="#000080">&lt; </font>FCount<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>NewCapacity <font color="#000080">&gt; </font>MaxListSize<font color="#000080">)) </font><font color="#FF0000"><b>then </b></font>Error<font color="#000080">;
</font>	<font color="#FF0000"><b>if</b></font><font color="#000080">(</font>NewCapacity <font color="#000080">&lt;&gt; </font>FCapacity<font color="#000080">) </font><font color="#FF0000"><b>then begin
</b></font>		FList<font color="#000080">:= </font>ReallocMem<font color="#000080">(</font>FList<font color="#000080">, </font>memSize<font color="#000080">, </font>NewCapacity <font color="#000080">* </font>SizeOf<font color="#000080">(</font>THashItem<font color="#000080">));
</font>     	memSize<font color="#000080">:= </font>NewCapacity <font color="#000080">* </font>SizeOf<font color="#000080">(</font>THashItem<font color="#000080">);
</font>		FCapacity<font color="#000080">:= </font>NewCapacity<font color="#000080">;
</font>	<font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{-----------------------------------------------------------------------------}
</i></font><font color="#FF0000"><b>procedure </b></font>THashList<font color="#000080">.</font>SetCount<font color="#000080">(</font>NewCount<font color="#000080">: </font>Integer<font color="#000080">);
</font><font color="#FF0000"><b>begin
</b></font>	<font color="#FF0000"><b>if</b></font><font color="#000080">((</font>NewCount <font color="#000080">&lt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>NewCount <font color="#000080">&gt; </font>MaxListSize<font color="#000080">)) </font><font color="#FF0000"><b>then </b></font>Error<font color="#000080">;
</font>	<font color="#FF0000"><b>if</b></font><font color="#000080">(</font>NewCount <font color="#000080">&gt; </font>FCapacity<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>SetCapacity<font color="#000080">(</font>NewCount<font color="#000080">);
</font>	<font color="#FF0000"><b>if</b></font><font color="#000080">(</font>NewCount <font color="#000080">&gt; </font>FCount<font color="#000080">) </font><font color="#FF0000"><b>then
</b></font>		FillChar<font color="#000080">(</font>FList<font color="#000080">^[</font>FCount<font color="#000080">], (</font>NewCount <font color="#000080">- </font>FCount<font color="#000080">) * </font>SizeOf<font color="#000080">(</font>THashItem<font color="#000080">), </font><font color="#800000">0</font><font color="#000080">);
</font>	FCount<font color="#000080">:= </font>NewCount<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;



</font><font color="#008000"><i>{ --- Class THashTable ---
	it's just a list of THashItems.
     you provide a key (string) and an object;
     a unique numeric key (longint) is compute (see hash);
     when you get an object, you provide string key, and as fast as possible
     the object is here.
     Really fast;
     Really smart, because of string keys.
}


{-----------------------------------------------------------------------------}
</i></font><font color="#FF0000"><b>constructor </b></font>THashTable<font color="#000080">.</font>Create<font color="#000080">;
</font><font color="#FF0000"><b>begin
</b></font>	<font color="#FF0000"><b>inherited </b></font>Create<font color="#000080">;
     </font>Ftable<font color="#000080">:= </font>THashList<font color="#000080">.</font>Create<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{-----------------------------------------------------------------------------}
</i></font><font color="#FF0000"><b>destructor </b></font>THashTable<font color="#000080">.</font>Destroy<font color="#000080">;
</font><font color="#FF0000"><b>begin
</b></font>	Ftable<font color="#000080">.</font>Free<font color="#000080">;
</font>	<font color="#FF0000"><b>inherited </b></font>Destroy<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{-----------------------------------------------------------------------------}
</i></font><font color="#FF0000"><b>procedure </b></font>THashTable<font color="#000080">.</font>Error<font color="#000080">;
</font><font color="#FF0000"><b>begin
</b></font>	<font color="#FF0000"><b>raise </b></font>EListError<font color="#000080">.</font>CreateRes<font color="#000080">(</font>SListIndexError<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{-----------------------------------------------------------------------------}
{
	Add 'value' object with key 'key'
}
</i></font><font color="#FF0000"><b>procedure </b></font>THashTable<font color="#000080">.</font>Add<font color="#000080">(</font><font color="#FF0000"><b>const </b></font>key<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">; </font>value<font color="#000080">: </font>TObject<font color="#000080">);
</font><font color="#FF0000"><b>var
</b></font>	item<font color="#000080">:</font>	THashItem<font color="#000080">;
</font><font color="#FF0000"><b>begin
</b></font>	item<font color="#000080">.</font>key<font color="#000080">:= </font>hash<font color="#000080">(</font>pointer<font color="#000080">(</font>longint<font color="#000080">(@</font>key<font color="#000080">)+</font><font color="#800000">1</font><font color="#000080">),</font>length<font color="#000080">(</font>key<font color="#000080">),</font><font color="#800000">0</font><font color="#000080">);
     </font>item<font color="#000080">.</font>obj<font color="#000080">:= </font>value<font color="#000080">;
</font>	Ftable<font color="#000080">.</font>Add<font color="#000080">(</font>item<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{-----------------------------------------------------------------------------}
{
	Get object with key 'key'
}
</i></font><font color="#FF0000"><b>function </b></font>THashTable<font color="#000080">.</font>Get<font color="#000080">(</font><font color="#FF0000"><b>const </b></font>key<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">): </font>TObject<font color="#000080">;
</font><font color="#FF0000"><b>var
</b></font>	index<font color="#000080">:</font>	integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
</b></font>	index<font color="#000080">:= </font>Ftable<font color="#000080">.</font>IndexOf<font color="#000080">(</font>hash<font color="#000080">(</font>pointer<font color="#000080">(</font>longint<font color="#000080">(@</font>key<font color="#000080">)+</font><font color="#800000">1</font><font color="#000080">),</font>length<font color="#000080">(</font>key<font color="#000080">),</font><font color="#800000">0</font><font color="#000080">));
</font>	<font color="#FF0000"><b>if</b></font><font color="#000080">(</font>index<font color="#000080">&lt;</font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font>Error<font color="#000080">;
     </font>result<font color="#000080">:= </font>Ftable<font color="#000080">[</font>index<font color="#000080">].</font>obj<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{-----------------------------------------------------------------------------}
{
	Detach (remove item, do not dispose object) object with key 'key'
}
</i></font><font color="#FF0000"><b>procedure </b></font>THashTable<font color="#000080">.</font>Detach<font color="#000080">(</font><font color="#FF0000"><b>const </b></font>key<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">);
</font><font color="#FF0000"><b>var
</b></font>	index<font color="#000080">:</font>	integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
</b></font>	index<font color="#000080">:= </font>Ftable<font color="#000080">.</font>IndexOf<font color="#000080">(</font>hash<font color="#000080">(</font>pointer<font color="#000080">(</font>longint<font color="#000080">(@</font>key<font color="#000080">)+</font><font color="#800000">1</font><font color="#000080">),</font>length<font color="#000080">(</font>key<font color="#000080">),</font><font color="#800000">0</font><font color="#000080">));
     </font><font color="#FF0000"><b>if</b></font><font color="#000080">(</font>index<font color="#000080">&gt;=</font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
</b></font>     	Ftable<font color="#000080">.</font>Detach<font color="#000080">(</font>index<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{-----------------------------------------------------------------------------}
{
	Delete (remove item, dispose object) object with key 'key'
}
</i></font><font color="#FF0000"><b>procedure </b></font>THashTable<font color="#000080">.</font>Delete<font color="#000080">(</font><font color="#FF0000"><b>const </b></font>key<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">);
</font><font color="#FF0000"><b>var
</b></font>	index<font color="#000080">:</font>	integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
</b></font>	index<font color="#000080">:= </font>Ftable<font color="#000080">.</font>IndexOf<font color="#000080">(</font>hash<font color="#000080">(</font>pointer<font color="#000080">(</font>longint<font color="#000080">(@</font>key<font color="#000080">)+</font><font color="#800000">1</font><font color="#000080">),</font>length<font color="#000080">(</font>key<font color="#000080">),</font><font color="#800000">0</font><font color="#000080">));
     </font><font color="#FF0000"><b>if</b></font><font color="#000080">(</font>index<font color="#000080">&gt;=</font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
</b></font>     	Ftable<font color="#000080">.</font>Delete<font color="#000080">(</font>index<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{-----------------------------------------------------------------------------}
{
	Clear the list; i.e: remove all the items (detach or delete depending of 'dt')
}
</i></font><font color="#FF0000"><b>procedure </b></font>THashTable<font color="#000080">.</font>Clear<font color="#000080">(</font>dt<font color="#000080">: </font>TDeleteType<font color="#000080">);
</font><font color="#FF0000"><b>begin
</b></font>	Ftable<font color="#000080">.</font>Clear<font color="#000080">(</font>dt<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{-----------------------------------------------------------------------------}
</i></font><font color="#FF0000"><b>procedure </b></font>THashTable<font color="#000080">.</font>Pack<font color="#000080">;
</font><font color="#FF0000"><b>begin
</b></font>	Ftable<font color="#000080">.</font>Pack<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{-----------------------------------------------------------------------------}
</i></font><font color="#FF0000"><b>function  </b></font>THashTable<font color="#000080">.</font>getCount<font color="#000080">: </font>integer<font color="#000080">;</font>				<font color="#FF0000"><b>begin </b></font>result<font color="#000080">:= </font>Ftable<font color="#000080">.</font>Count<font color="#000080">; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>THashTable<font color="#000080">.</font>setCount<font color="#000080">(</font>count<font color="#000080">: </font>integer<font color="#000080">);</font>		<font color="#FF0000"><b>begin </b></font>Ftable<font color="#000080">.</font>Count<font color="#000080">:= </font>count<font color="#000080">; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>THashTable<font color="#000080">.</font>getCapacity<font color="#000080">: </font>integer<font color="#000080">;</font>			<font color="#FF0000"><b>begin </b></font>result<font color="#000080">:= </font>Ftable<font color="#000080">.</font>Capacity<font color="#000080">; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>THashTable<font color="#000080">.</font>setCapacity<font color="#000080">(</font>capacity<font color="#000080">: </font>integer<font color="#000080">);</font>	<font color="#FF0000"><b>begin </b></font>Ftable<font color="#000080">.</font>Capacity<font color="#000080">:= </font>capacity<font color="#000080">; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>THashTable<font color="#000080">.</font>getDeleteType<font color="#000080">: </font>TDeleteType<font color="#000080">;</font>		<font color="#FF0000"><b>begin </b></font>result<font color="#000080">:= </font>Ftable<font color="#000080">.</font>DeleteType<font color="#000080">; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>THashTable<font color="#000080">.</font>setDeleteType<font color="#000080">(</font>dt<font color="#000080">: </font>TDeleteType<font color="#000080">);</font>	<font color="#FF0000"><b>begin </b></font>Ftable<font color="#000080">.</font>DeleteType<font color="#000080">:= </font>dt<font color="#000080">; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function  </b></font>THashTable<font color="#000080">.</font>getItem<font color="#000080">(</font>index<font color="#000080">: </font>integer<font color="#000080">): </font>TObject<font color="#000080">;</font>	<font color="#FF0000"><b>begin </b></font>result<font color="#000080">:= </font>Ftable<font color="#000080">[</font>index<font color="#000080">].</font>obj<font color="#000080">; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{-----------------------------------------------------------------------------}
</i></font><font color="#FF0000"><b>procedure </b></font>THashTable<font color="#000080">.</font>setItem<font color="#000080">(</font>index<font color="#000080">: </font>integer<font color="#000080">; </font>obj<font color="#000080">: </font>TObject<font color="#000080">);
</font><font color="#FF0000"><b>var
</b></font>	item<font color="#000080">:</font>	THashItem<font color="#000080">;
</font><font color="#FF0000"><b>begin
</b></font>	item<font color="#000080">.</font>key<font color="#000080">:= </font>Ftable<font color="#000080">[</font>index<font color="#000080">].</font>key<font color="#000080">;
     </font>item<font color="#000080">.</font>obj<font color="#000080">:= </font>obj<font color="#000080">;
</font>	Ftable<font color="#000080">[</font>index<font color="#000080">]:= </font>item<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{-----------------------------------------------------------------------------}
{ original code from lookup2.c, by Bob Jenkins, December 1996
	http://ourworld.compuserve.com/homepages/bob_jenkins/
     PLEASE, let me know if there is problem with it, or if you have a better one. THANKS.
}
</i></font><font color="#FF0000"><b>function </b></font>hash<font color="#000080">(</font>key<font color="#000080">: </font>Pointer<font color="#000080">; </font>length<font color="#000080">: </font>longint<font color="#000080">; </font>level<font color="#000080">: </font>longint<font color="#000080">): </font>longint<font color="#000080">;
</font><font color="#FF0000"><b>var
</b></font>	a<font color="#000080">,</font>b<font color="#000080">,</font>c<font color="#000080">:</font>		longint<font color="#000080">;
     </font>len<font color="#000080">:</font>			longint<font color="#000080">;
     </font>k<font color="#000080">:</font> 			array12Ptr<font color="#000080">;
     </font>lp<font color="#000080">:</font>			longPtr<font color="#000080">;

</font><font color="#FF0000"><b>begin
</b></font>	k<font color="#000080">:= </font>array12Ptr<font color="#000080">(</font>key<font color="#000080">);
</font>	len<font color="#000080">:= </font>length<font color="#000080">;
     </font>a<font color="#000080">:= </font><font color="#800000">$9E3779B9</font><font color="#000080">;
     </font>b<font color="#000080">:= </font>a<font color="#000080">;
     </font>c<font color="#000080">:= </font>level<font color="#000080">;

     </font><font color="#FF0000"><b>if</b></font><font color="#000080">((</font>longint<font color="#000080">(</font>key<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#800000">3</font><font color="#000080">) &lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then begin
</b></font>	     <font color="#FF0000"><b>while</b></font><font color="#000080">(</font>len<font color="#000080">&gt;=</font><font color="#800000">12</font><font color="#000080">) </font><font color="#FF0000"><b>do begin</b></font>	<font color="#008000"><i>{unaligned}
</i></font>			inc<font color="#000080">(</font>a<font color="#000080">, (</font>longint<font color="#000080">(</font>k<font color="#000080">^[</font><font color="#800000">00</font><font color="#000080">]) +(</font>longint<font color="#000080">(</font>k<font color="#000080">^[</font><font color="#800000">01</font><font color="#000080">]) </font><font color="#FF0000"><b>shl </b></font><font color="#800000">8</font><font color="#000080">) + (</font>longint<font color="#000080">(</font>k<font color="#000080">^[</font><font color="#800000">02</font><font color="#000080">]) </font><font color="#FF0000"><b>shl </b></font><font color="#800000">16</font><font color="#000080">) + (</font>longint<font color="#000080">(</font>k<font color="#000080">^[</font><font color="#800000">03</font><font color="#000080">]) </font><font color="#FF0000"><b>shl </b></font><font color="#800000">24</font><font color="#000080">)));
               </font>inc<font color="#000080">(</font>b<font color="#000080">, (</font>longint<font color="#000080">(</font>k<font color="#000080">^[</font><font color="#800000">04</font><font color="#000080">]) +(</font>longint<font color="#000080">(</font>k<font color="#000080">^[</font><font color="#800000">05</font><font color="#000080">]) </font><font color="#FF0000"><b>shl </b></font><font color="#800000">8</font><font color="#000080">) + (</font>longint<font color="#000080">(</font>k<font color="#000080">^[</font><font color="#800000">06</font><font color="#000080">]) </font><font color="#FF0000"><b>shl </b></font><font color="#800000">16</font><font color="#000080">) + (</font>longint<font color="#000080">(</font>k<font color="#000080">^[</font><font color="#800000">07</font><font color="#000080">]) </font><font color="#FF0000"><b>shl </b></font><font color="#800000">24</font><font color="#000080">)));
               </font>inc<font color="#000080">(</font>c<font color="#000080">, (</font>longint<font color="#000080">(</font>k<font color="#000080">^[</font><font color="#800000">08</font><font color="#000080">]) +(</font>longint<font color="#000080">(</font>k<font color="#000080">^[</font><font color="#800000">09</font><font color="#000080">]) </font><font color="#FF0000"><b>shl </b></font><font color="#800000">8</font><font color="#000080">) + (</font>longint<font color="#000080">(</font>k<font color="#000080">^[</font><font color="#800000">10</font><font color="#000080">]) </font><font color="#FF0000"><b>shl </b></font><font color="#800000">16</font><font color="#000080">) + (</font>longint<font color="#000080">(</font>k<font color="#000080">^[</font><font color="#800000">11</font><font color="#000080">]) </font><font color="#FF0000"><b>shl </b></font><font color="#800000">24</font><font color="#000080">)));

               </font><font color="#008000"><i>{mix(a,b,c);}
</i></font>			inc<font color="#000080">(</font>a <font color="#000080">, </font>b <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>inc<font color="#000080">(</font>a <font color="#000080">, </font>c <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>a<font color="#000080">:= </font>a <font color="#FF0000"><b>xor </b></font><font color="#000080">(</font>c <font color="#FF0000"><b>shr </b></font><font color="#800000">13</font><font color="#000080">);
</font>			inc<font color="#000080">(</font>b <font color="#000080">, </font>c <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>inc<font color="#000080">(</font>b <font color="#000080">, </font>a <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>b<font color="#000080">:= </font>b <font color="#FF0000"><b>xor </b></font><font color="#000080">(</font>a <font color="#FF0000"><b>shl </b></font><font color="#800000">8</font><font color="#000080">);
</font>			inc<font color="#000080">(</font>c <font color="#000080">, </font>a <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>inc<font color="#000080">(</font>c <font color="#000080">, </font>b <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>c<font color="#000080">:= </font>c <font color="#FF0000"><b>xor </b></font><font color="#000080">(</font>b <font color="#FF0000"><b>shr </b></font><font color="#800000">13</font><font color="#000080">);
</font>			inc<font color="#000080">(</font>a <font color="#000080">, </font>b <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>inc<font color="#000080">(</font>a <font color="#000080">, </font>c <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>a<font color="#000080">:= </font>a <font color="#FF0000"><b>xor </b></font><font color="#000080">(</font>c <font color="#FF0000"><b>shr </b></font><font color="#800000">12</font><font color="#000080">);
</font>			inc<font color="#000080">(</font>b <font color="#000080">, </font>c <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>inc<font color="#000080">(</font>b <font color="#000080">, </font>a <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>b<font color="#000080">:= </font>b <font color="#FF0000"><b>xor </b></font><font color="#000080">(</font>a <font color="#FF0000"><b>shl </b></font><font color="#800000">16</font><font color="#000080">);
</font>			inc<font color="#000080">(</font>c <font color="#000080">, </font>a <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>inc<font color="#000080">(</font>c <font color="#000080">, </font>b <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>c<font color="#000080">:= </font>c <font color="#FF0000"><b>xor </b></font><font color="#000080">(</font>b <font color="#FF0000"><b>shr </b></font><font color="#800000">5</font><font color="#000080">);
</font>			inc<font color="#000080">(</font>a <font color="#000080">, </font>b <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>inc<font color="#000080">(</font>a <font color="#000080">, </font>c <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>a<font color="#000080">:= </font>a <font color="#FF0000"><b>xor </b></font><font color="#000080">(</font>c <font color="#FF0000"><b>shr </b></font><font color="#800000">3</font><font color="#000080">);
</font>		     inc<font color="#000080">(</font>b <font color="#000080">, </font>c <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>inc<font color="#000080">(</font>b <font color="#000080">, </font>a <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>b<font color="#000080">:= </font>b <font color="#FF0000"><b>xor </b></font><font color="#000080">(</font>a <font color="#FF0000"><b>shl </b></font><font color="#800000">10</font><font color="#000080">);
</font>			inc<font color="#000080">(</font>c <font color="#000080">, </font>a <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>inc<font color="#000080">(</font>c <font color="#000080">, </font>b <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>c<font color="#000080">:= </font>c <font color="#FF0000"><b>xor </b></font><font color="#000080">(</font>b <font color="#FF0000"><b>shr </b></font><font color="#800000">15</font><font color="#000080">);

               </font>inc<font color="#000080">(</font>longint<font color="#000080">(</font>k<font color="#000080">),</font><font color="#800000">12</font><font color="#000080">);
               </font>dec<font color="#000080">(</font>len<font color="#000080">,</font><font color="#800000">12</font><font color="#000080">);
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
     </font><font color="#FF0000"><b>end

     else begin
</b></font>	     <font color="#FF0000"><b>while</b></font><font color="#000080">(</font>len<font color="#000080">&gt;=</font><font color="#800000">12</font><font color="#000080">) </font><font color="#FF0000"><b>do begin</b></font>	<font color="#008000"><i>{aligned}
</i></font>          	lp<font color="#000080">:= </font>longPtr<font color="#000080">(</font>k<font color="#000080">);
</font>			inc<font color="#000080">(</font>a<font color="#000080">, </font>lp<font color="#000080">^); </font>inc<font color="#000080">(</font>lp<font color="#000080">,</font><font color="#800000">4</font><font color="#000080">);
</font>			inc<font color="#000080">(</font>b<font color="#000080">, </font>lp<font color="#000080">^); </font>inc<font color="#000080">(</font>lp<font color="#000080">,</font><font color="#800000">4</font><font color="#000080">);
               </font>inc<font color="#000080">(</font>c<font color="#000080">, </font>lp<font color="#000080">^);

               </font><font color="#008000"><i>{mix(a,b,c);}
</i></font>			inc<font color="#000080">(</font>a <font color="#000080">, </font>b <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>inc<font color="#000080">(</font>a <font color="#000080">, </font>c <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>a<font color="#000080">:= </font>a <font color="#FF0000"><b>xor </b></font><font color="#000080">(</font>c <font color="#FF0000"><b>shr </b></font><font color="#800000">13</font><font color="#000080">);
</font>			inc<font color="#000080">(</font>b <font color="#000080">, </font>c <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>inc<font color="#000080">(</font>b <font color="#000080">, </font>a <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>b<font color="#000080">:= </font>b <font color="#FF0000"><b>xor </b></font><font color="#000080">(</font>a <font color="#FF0000"><b>shl </b></font><font color="#800000">8</font><font color="#000080">);
</font>			inc<font color="#000080">(</font>c <font color="#000080">, </font>a <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>inc<font color="#000080">(</font>c <font color="#000080">, </font>b <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>c<font color="#000080">:= </font>c <font color="#FF0000"><b>xor </b></font><font color="#000080">(</font>b <font color="#FF0000"><b>shr </b></font><font color="#800000">13</font><font color="#000080">);
</font>			inc<font color="#000080">(</font>a <font color="#000080">, </font>b <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>inc<font color="#000080">(</font>a <font color="#000080">, </font>c <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>a<font color="#000080">:= </font>a <font color="#FF0000"><b>xor </b></font><font color="#000080">(</font>c <font color="#FF0000"><b>shr </b></font><font color="#800000">12</font><font color="#000080">);
</font>			inc<font color="#000080">(</font>b <font color="#000080">, </font>c <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>inc<font color="#000080">(</font>b <font color="#000080">, </font>a <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>b<font color="#000080">:= </font>b <font color="#FF0000"><b>xor </b></font><font color="#000080">(</font>a <font color="#FF0000"><b>shl </b></font><font color="#800000">16</font><font color="#000080">);
</font>			inc<font color="#000080">(</font>c <font color="#000080">, </font>a <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>inc<font color="#000080">(</font>c <font color="#000080">, </font>b <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>c<font color="#000080">:= </font>c <font color="#FF0000"><b>xor </b></font><font color="#000080">(</font>b <font color="#FF0000"><b>shr </b></font><font color="#800000">5</font><font color="#000080">);
</font>			inc<font color="#000080">(</font>a <font color="#000080">, </font>b <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>inc<font color="#000080">(</font>a <font color="#000080">, </font>c <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>a<font color="#000080">:= </font>a <font color="#FF0000"><b>xor </b></font><font color="#000080">(</font>c <font color="#FF0000"><b>shr </b></font><font color="#800000">3</font><font color="#000080">);
</font>		     inc<font color="#000080">(</font>b <font color="#000080">, </font>c <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>inc<font color="#000080">(</font>b <font color="#000080">, </font>a <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>b<font color="#000080">:= </font>b <font color="#FF0000"><b>xor </b></font><font color="#000080">(</font>a <font color="#FF0000"><b>shl </b></font><font color="#800000">10</font><font color="#000080">);
</font>			inc<font color="#000080">(</font>c <font color="#000080">, </font>a <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>inc<font color="#000080">(</font>c <font color="#000080">, </font>b <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>c<font color="#000080">:= </font>c <font color="#FF0000"><b>xor </b></font><font color="#000080">(</font>b <font color="#FF0000"><b>shr </b></font><font color="#800000">15</font><font color="#000080">);

               </font>inc<font color="#000080">(</font>longint<font color="#000080">(</font>k<font color="#000080">),</font><font color="#800000">12</font><font color="#000080">);
               </font>dec<font color="#000080">(</font>len<font color="#000080">,</font><font color="#800000">12</font><font color="#000080">);
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

     </font>inc<font color="#000080">(</font>c<font color="#000080">,</font>length<font color="#000080">);

</font>	<font color="#FF0000"><b>if</b></font><font color="#000080">(</font>len<font color="#000080">&gt;=</font><font color="#800000">11</font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>c<font color="#000080">, (</font>longint<font color="#000080">(</font>k<font color="#000080">^[</font><font color="#800000">10</font><font color="#000080">]) </font><font color="#FF0000"><b>shl </b></font><font color="#800000">24</font><font color="#000080">));
</font>	<font color="#FF0000"><b>if</b></font><font color="#000080">(</font>len<font color="#000080">&gt;=</font><font color="#800000">10</font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>c<font color="#000080">, (</font>longint<font color="#000080">(</font>k<font color="#000080">^[</font><font color="#800000">9</font><font color="#000080">]) </font><font color="#FF0000"><b>shl </b></font><font color="#800000">16</font><font color="#000080">));
</font>	<font color="#FF0000"><b>if</b></font><font color="#000080">(</font>len<font color="#000080">&gt;=</font><font color="#800000">9</font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>c<font color="#000080">, (</font>longint<font color="#000080">(</font>k<font color="#000080">^[</font><font color="#800000">8</font><font color="#000080">]) </font><font color="#FF0000"><b>shl </b></font><font color="#800000">8</font><font color="#000080">));
</font>	<font color="#FF0000"><b>if</b></font><font color="#000080">(</font>len<font color="#000080">&gt;=</font><font color="#800000">8</font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>b<font color="#000080">, (</font>longint<font color="#000080">(</font>k<font color="#000080">^[</font><font color="#800000">7</font><font color="#000080">]) </font><font color="#FF0000"><b>shl </b></font><font color="#800000">24</font><font color="#000080">));
</font>	<font color="#FF0000"><b>if</b></font><font color="#000080">(</font>len<font color="#000080">&gt;=</font><font color="#800000">7</font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>b<font color="#000080">, (</font>longint<font color="#000080">(</font>k<font color="#000080">^[</font><font color="#800000">6</font><font color="#000080">]) </font><font color="#FF0000"><b>shl </b></font><font color="#800000">16</font><font color="#000080">));
</font>	<font color="#FF0000"><b>if</b></font><font color="#000080">(</font>len<font color="#000080">&gt;=</font><font color="#800000">6</font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>b<font color="#000080">, (</font>longint<font color="#000080">(</font>k<font color="#000080">^[</font><font color="#800000">5</font><font color="#000080">]) </font><font color="#FF0000"><b>shl </b></font><font color="#800000">8</font><font color="#000080">));
</font>	<font color="#FF0000"><b>if</b></font><font color="#000080">(</font>len<font color="#000080">&gt;=</font><font color="#800000">5</font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>b<font color="#000080">, </font>longint<font color="#000080">(</font>k<font color="#000080">^[</font><font color="#800000">4</font><font color="#000080">]));
</font>	<font color="#FF0000"><b>if</b></font><font color="#000080">(</font>len<font color="#000080">&gt;=</font><font color="#800000">4</font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>a<font color="#000080">, (</font>longint<font color="#000080">(</font>k<font color="#000080">^[</font><font color="#800000">3</font><font color="#000080">]) </font><font color="#FF0000"><b>shl </b></font><font color="#800000">24</font><font color="#000080">));
</font>	<font color="#FF0000"><b>if</b></font><font color="#000080">(</font>len<font color="#000080">&gt;=</font><font color="#800000">3</font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>a<font color="#000080">, (</font>longint<font color="#000080">(</font>k<font color="#000080">^[</font><font color="#800000">2</font><font color="#000080">]) </font><font color="#FF0000"><b>shl </b></font><font color="#800000">16</font><font color="#000080">));
</font>	<font color="#FF0000"><b>if</b></font><font color="#000080">(</font>len<font color="#000080">&gt;=</font><font color="#800000">2</font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>a<font color="#000080">, (</font>longint<font color="#000080">(</font>k<font color="#000080">^[</font><font color="#800000">1</font><font color="#000080">]) </font><font color="#FF0000"><b>shl </b></font><font color="#800000">8</font><font color="#000080">));
</font>	<font color="#FF0000"><b>if</b></font><font color="#000080">(</font>len<font color="#000080">&gt;=</font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>a<font color="#000080">, </font>longint<font color="#000080">(</font>k<font color="#000080">^[</font><font color="#800000">0</font><font color="#000080">]));

     </font><font color="#008000"><i>{mix(a,b,c);}
</i></font>	inc<font color="#000080">(</font>a <font color="#000080">, </font>b <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>inc<font color="#000080">(</font>a <font color="#000080">, </font>c <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>a<font color="#000080">:= </font>a <font color="#FF0000"><b>xor </b></font><font color="#000080">(</font>c <font color="#FF0000"><b>shr </b></font><font color="#800000">13</font><font color="#000080">);
</font>	inc<font color="#000080">(</font>b <font color="#000080">, </font>c <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>inc<font color="#000080">(</font>b <font color="#000080">, </font>a <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>b<font color="#000080">:= </font>b <font color="#FF0000"><b>xor </b></font><font color="#000080">(</font>a <font color="#FF0000"><b>shl </b></font><font color="#800000">8</font><font color="#000080">);
</font>	inc<font color="#000080">(</font>c <font color="#000080">, </font>a <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>inc<font color="#000080">(</font>c <font color="#000080">, </font>b <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>c<font color="#000080">:= </font>c <font color="#FF0000"><b>xor </b></font><font color="#000080">(</font>b <font color="#FF0000"><b>shr </b></font><font color="#800000">13</font><font color="#000080">);
</font>	inc<font color="#000080">(</font>a <font color="#000080">, </font>b <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>inc<font color="#000080">(</font>a <font color="#000080">, </font>c <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>a<font color="#000080">:= </font>a <font color="#FF0000"><b>xor </b></font><font color="#000080">(</font>c <font color="#FF0000"><b>shr </b></font><font color="#800000">12</font><font color="#000080">);
</font>	inc<font color="#000080">(</font>b <font color="#000080">, </font>c <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>inc<font color="#000080">(</font>b <font color="#000080">, </font>a <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>b<font color="#000080">:= </font>b <font color="#FF0000"><b>xor </b></font><font color="#000080">(</font>a <font color="#FF0000"><b>shl </b></font><font color="#800000">16</font><font color="#000080">);
</font>	inc<font color="#000080">(</font>c <font color="#000080">, </font>a <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>inc<font color="#000080">(</font>c <font color="#000080">, </font>b <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>c<font color="#000080">:= </font>c <font color="#FF0000"><b>xor </b></font><font color="#000080">(</font>b <font color="#FF0000"><b>shr </b></font><font color="#800000">5</font><font color="#000080">);
</font>	inc<font color="#000080">(</font>a <font color="#000080">, </font>b <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>inc<font color="#000080">(</font>a <font color="#000080">, </font>c <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>a<font color="#000080">:= </font>a <font color="#FF0000"><b>xor </b></font><font color="#000080">(</font>c <font color="#FF0000"><b>shr </b></font><font color="#800000">3</font><font color="#000080">);
     </font>inc<font color="#000080">(</font>b <font color="#000080">, </font>c <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>inc<font color="#000080">(</font>b <font color="#000080">, </font>a <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>b<font color="#000080">:= </font>b <font color="#FF0000"><b>xor </b></font><font color="#000080">(</font>a <font color="#FF0000"><b>shl </b></font><font color="#800000">10</font><font color="#000080">);
</font>	inc<font color="#000080">(</font>c <font color="#000080">, </font>a <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>inc<font color="#000080">(</font>c <font color="#000080">, </font>b <font color="#FF0000"><b>xor </b></font><font color="#800000">$FFFFFFFF </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">); </font>c<font color="#000080">:= </font>c <font color="#FF0000"><b>xor </b></font><font color="#000080">(</font>b <font color="#FF0000"><b>shr </b></font><font color="#800000">15</font><font color="#000080">);

     </font>result<font color="#000080">:= </font>longint<font color="#000080">(</font>c<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to DELPHI SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0311.PAS">Original</a><b>]</b></p></body>
</html>
