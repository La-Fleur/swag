<html>
<head><title> "Class to handle CGI POST Query" by DAVE WEDWICK</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to DELPHI SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0408.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>unit </b></font>PostCont<font color="#000080">;

</font><font color="#008000"><i>{ Class to parse the data from a web server's QUERY_STRING variables and the
  stdin data during a POST.  The .Create method used determines how this
  loads the data.

  by Dave Wedwick
}  

</i></font><font color="#FF0000"><b>interface

uses </b></font>SysUtils<font color="#000080">, </font>Classes<font color="#000080">;

</font><font color="#FF0000"><b>type
  </b></font>EPostContentError <font color="#000080">= </font><font color="#FF0000"><b>class</b></font><font color="#000080">(</font>Exception<font color="#000080">);

  </font>TPostContent <font color="#000080">= </font><font color="#FF0000"><b>class
    private
      </b></font>FList<font color="#000080">: </font>TList<font color="#000080">;
      </font><font color="#FF0000"><b>function </b></font>GetValue<font color="#000080">(</font>Index<font color="#000080">: </font>Integer<font color="#000080">): </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>function </b></font>GetKey<font color="#000080">(</font>Index<font color="#000080">: </font>Integer<font color="#000080">): </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>function </b></font>GetCount<font color="#000080">: </font>Word<font color="#000080">;
      </font><font color="#FF0000"><b>procedure </b></font>ParseStream<font color="#000080">(</font>MemStr<font color="#000080">: </font>TMemoryStream<font color="#000080">);
      </font><font color="#FF0000"><b>procedure </b></font>FreeItems<font color="#000080">;
    </font><font color="#FF0000"><b>public
      constructor </b></font>Create<font color="#000080">(</font>ContentLen<font color="#000080">: </font>Integer<font color="#000080">);
      </font><font color="#FF0000"><b>constructor </b></font>CreateFromString<font color="#000080">(</font>Str<font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">);
      </font><font color="#FF0000"><b>destructor  </b></font>Destroy<font color="#000080">; </font><font color="#FF0000"><b>override</b></font><font color="#000080">;

      </font><font color="#FF0000"><b>property </b></font>Value<font color="#000080">[</font><font color="#FF0000"><b>Index</b></font><font color="#000080">: </font>Integer<font color="#000080">]: </font><font color="#FF0000"><b>String read </b></font>GetValue<font color="#000080">;
      </font><font color="#FF0000"><b>property </b></font>Key<font color="#000080">[</font><font color="#FF0000"><b>Index</b></font><font color="#000080">: </font>Integer<font color="#000080">]: </font><font color="#FF0000"><b>String read </b></font>GetKey<font color="#000080">;
      </font><font color="#FF0000"><b>property </b></font>Count<font color="#000080">: </font>Word <font color="#FF0000"><b>read </b></font>GetCount<font color="#000080">;

      </font><font color="#FF0000"><b>function </b></font>ValueForKey<font color="#000080">(</font>Key<font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">; </font>Occurance<font color="#000080">: </font>Word<font color="#000080">): </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>implementation

type
  </b></font>PValueRec <font color="#000080">= ^</font>ValueRec<font color="#000080">;

  </font>ValueRec <font color="#000080">= </font><font color="#FF0000"><b>record
    </b></font>Name<font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">100</font><font color="#000080">];
    </font>Value<font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">200</font><font color="#000080">];
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ Support functions }
</i></font><font color="#FF0000"><b>function </b></font>StrToHex<font color="#000080">(</font><font color="#FF0000"><b>const </b></font>HexVal<font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">): </font>Char<font color="#000080">;
</font><font color="#FF0000"><b>const
  </b></font>StartingLetter <font color="#000080">= </font>ord<font color="#000080">(</font><font color="#800000">'A'</font><font color="#000080">);
  </font>StartingNumber <font color="#000080">= </font>ord<font color="#000080">(</font><font color="#800000">'0'</font><font color="#000080">);

</font><font color="#FF0000"><b>var
  </b></font>Val<font color="#000080">, </font>Counter<font color="#000080">: </font>Byte<font color="#000080">;

</font><font color="#FF0000"><b>begin

  </b></font><font color="#008000"><i>{ Find the hex value of the passed two byte string }
  </i></font>Val <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>Counter <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">2 </font><font color="#FF0000"><b>do begin
    if </b></font>Counter <font color="#000080">= </font><font color="#800000">2 </font><font color="#FF0000"><b>then
      </b></font>Val <font color="#000080">:= </font>Val <font color="#FF0000"><b>shl </b></font><font color="#800000">4</font><font color="#000080">;

    </font><font color="#FF0000"><b>case </b></font>HexVal<font color="#000080">[</font>Counter<font color="#000080">] </font><font color="#FF0000"><b>of
      </b></font><font color="#800000">'0'</font><font color="#000080">..</font><font color="#800000">'9'</font><font color="#000080">:  </font>Val <font color="#000080">:= </font>Val <font color="#000080">+ (</font>ord<font color="#000080">(</font>HexVal<font color="#000080">[</font>Counter<font color="#000080">]) - </font>StartingNumber<font color="#000080">);
      </font><font color="#800000">'A'</font><font color="#000080">..</font><font color="#800000">'F'</font><font color="#000080">:  </font>Val <font color="#000080">:= </font>Val <font color="#000080">+ (</font>ord<font color="#000080">(</font>HexVal<font color="#000080">[</font>Counter<font color="#000080">]) - </font>StartingLetter <font color="#000080">+ </font><font color="#800000">10</font><font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>Result <font color="#000080">:= </font>Char<font color="#000080">(</font>Val<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ Class methods }
</i></font><font color="#FF0000"><b>constructor </b></font>TPostContent<font color="#000080">.</font>Create<font color="#000080">(</font>ContentLen<font color="#000080">: </font>Integer<font color="#000080">);
</font><font color="#FF0000"><b>var
  </b></font>MemStr<font color="#000080">: </font>TMemoryStream<font color="#000080">;
  </font>Counter<font color="#000080">: </font>Word<font color="#000080">;
  </font>NextChar<font color="#000080">: </font>Char<font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>FList <font color="#000080">:= </font>TList<font color="#000080">.</font>Create<font color="#000080">;
  </font>MemStr <font color="#000080">:= </font>TMemoryStream<font color="#000080">.</font>Create<font color="#000080">;

  </font>Counter <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
  </font><font color="#FF0000"><b>while </b></font>Counter <font color="#000080">&lt;= </font>ContentLen <font color="#FF0000"><b>do begin
    </b></font>Read<font color="#000080">(</font>NextChar<font color="#000080">);
    </font>MemStr<font color="#000080">.</font>Write<font color="#000080">(</font>NextChar<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);

    </font><font color="#008000"><i>{ Add one to the count }
    </i></font>Inc<font color="#000080">(</font>Counter<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>ParseStream<font color="#000080">(</font>MemStr<font color="#000080">);

  </font>MemStr<font color="#000080">.</font>Free<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>constructor </b></font>TPostContent<font color="#000080">.</font>CreateFromString<font color="#000080">(</font>Str<font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">);
</font><font color="#008000"><i>{ This creates the value pairs by parsing out a string, rather than
  reading from stdin.  Used with the QUERY_STRING. }
</i></font><font color="#FF0000"><b>var
  </b></font>MemStr<font color="#000080">: </font>TMemoryStream<font color="#000080">;
  </font>StartPos<font color="#000080">: </font>Word<font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>FList <font color="#000080">:= </font>TList<font color="#000080">.</font>Create<font color="#000080">;
  </font>MemStr <font color="#000080">:= </font>TMemoryStream<font color="#000080">.</font>Create<font color="#000080">;

  </font><font color="#008000"><i>{ The query data starts after the ? in the query.  If none is found, start
    at position 1.  Convenient, since Pos returns 0 if not found. }
  </i></font>StartPos <font color="#000080">:= </font>Pos<font color="#000080">(</font><font color="#800000">'?'</font><font color="#000080">, </font>Str<font color="#000080">) + </font><font color="#800000">1</font><font color="#000080">;

  </font>MemStr<font color="#000080">.</font>Write<font color="#000080">(</font>Str<font color="#000080">[</font>StartPos<font color="#000080">], </font>Length<font color="#000080">(</font>Str<font color="#000080">)-</font>StartPos<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">);

  </font>ParseStream<font color="#000080">(</font>MemStr<font color="#000080">);

  </font>MemStr<font color="#000080">.</font>Free<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>destructor </b></font>TPostContent<font color="#000080">.</font>Destroy<font color="#000080">;
</font><font color="#FF0000"><b>begin

  </b></font>FreeItems<font color="#000080">;   </font><font color="#008000"><i>{ See below }
  </i></font>FList<font color="#000080">.</font>Free<font color="#000080">;

  </font><font color="#FF0000"><b>inherited</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>TPostContent<font color="#000080">.</font>ParseStream<font color="#000080">(</font>MemStr<font color="#000080">: </font>TMemoryStream<font color="#000080">);
</font><font color="#FF0000"><b>type
  </b></font>InType <font color="#000080">= (</font>itName<font color="#000080">, </font>itValue<font color="#000080">);

</font><font color="#FF0000"><b>var
  </b></font>VRecPtr<font color="#000080">: </font>PValueRec<font color="#000080">;
  </font>NextChar<font color="#000080">: </font>Char<font color="#000080">;
  </font>Counter<font color="#000080">: </font>Word<font color="#000080">;
  </font>CurrType<font color="#000080">: </font>InType<font color="#000080">;
  </font>VRec<font color="#000080">: </font>ValueRec<font color="#000080">;
  </font>HexVal<font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">2</font><font color="#000080">];

</font><font color="#FF0000"><b>begin
  </b></font>Counter  <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
  </font>CurrType <font color="#000080">:= </font>itName<font color="#000080">;

  </font><font color="#008000"><i>{ Clear the structure to where the value are going to go }
  </i></font>VRec<font color="#000080">.</font>Name <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
  </font>VRec<font color="#000080">.</font>Value <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;

  </font>MemStr<font color="#000080">.</font>Seek<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">, </font>soFromBeginning<font color="#000080">);</font>	
  <font color="#FF0000"><b>while </b></font>Counter <font color="#000080">&lt;= </font>MemStr<font color="#000080">.</font>Size <font color="#FF0000"><b>do begin
    </b></font><font color="#008000"><i>{ Get the next character from the stream }
    </i></font>MemStr<font color="#000080">.</font>Read<font color="#000080">(</font>NextChar<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);

    </font><font color="#008000"><i>{ Plus signs are spaces }
    </i></font><font color="#FF0000"><b>if </b></font>NextChar <font color="#000080">= </font><font color="#800000">'+' </font><font color="#FF0000"><b>then
      </b></font>NextChar <font color="#000080">:= </font><font color="#800000">' '</font><font color="#000080">;

    </font><font color="#FF0000"><b>case </b></font>NextChar <font color="#FF0000"><b>of
      </b></font><font color="#800000">'='</font><font color="#000080">: </font>CurrType <font color="#000080">:= </font>itValue<font color="#000080">;

      </font><font color="#800000">'%'</font><font color="#000080">:
        </font><font color="#FF0000"><b>begin
          </b></font><font color="#008000"><i>{ The next two bytes are a hex value for an ASCII character.  Decode
            the character, add it to the appropriate place, and increment
            the counter by three}

          </i></font>HexVal <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
          </font>MemStr<font color="#000080">.</font>Read<font color="#000080">(</font>NextChar<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);   </font>HexVal <font color="#000080">:= </font>HexVal <font color="#000080">+ </font>NextChar<font color="#000080">;
          </font>MemStr<font color="#000080">.</font>Read<font color="#000080">(</font>NextChar<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);   </font>HexVal <font color="#000080">:= </font>HexVal <font color="#000080">+ </font>NextChar<font color="#000080">;

          </font>NextChar <font color="#000080">:= </font>StrToHex<font color="#000080">(</font>HexVal<font color="#000080">);

          </font><font color="#FF0000"><b>if </b></font>CurrType <font color="#000080">= </font>itName <font color="#FF0000"><b>then
            </b></font>VRec<font color="#000080">.</font>Name <font color="#000080">:= </font>VRec<font color="#000080">.</font>Name <font color="#000080">+ </font>NextChar
          <font color="#FF0000"><b>else
            </b></font>VRec<font color="#000080">.</font>Value <font color="#000080">:= </font>VRec<font color="#000080">.</font>Value <font color="#000080">+ </font>NextChar<font color="#000080">;

          </font><font color="#008000"><i>{ Add two to the counter here -- there is one more added below
            at the bottom of the loop, making a total of three added }
          </i></font>Inc<font color="#000080">(</font>Counter<font color="#000080">, </font><font color="#800000">2</font><font color="#000080">);
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

      </font><font color="#800000">'&amp;'</font><font color="#000080">:
        </font><font color="#FF0000"><b>begin
          </b></font><font color="#008000"><i>{ Finished with this variable name/value pair.  Allocate memory
            and add it to the list }
          </i></font>New<font color="#000080">(</font>VRecPtr<font color="#000080">);
          </font>VRecPtr<font color="#000080">^ := </font>VRec<font color="#000080">;
          </font>FList<font color="#000080">.</font>Add<font color="#000080">(</font>VRecPtr<font color="#000080">);

          </font><font color="#008000"><i>{ Get ready for the next values }
          </i></font>CurrType <font color="#000080">:= </font>itName<font color="#000080">;
          </font>VRec<font color="#000080">.</font>Name <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
          </font>VRec<font color="#000080">.</font>Value <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

    </font><font color="#FF0000"><b>else
      with </b></font>VRec <font color="#FF0000"><b>do begin
        if </b></font>CurrType <font color="#000080">= </font>itName <font color="#FF0000"><b>then
          </b></font>Name <font color="#000080">:= </font>Name <font color="#000080">+ </font>NextChar
        <font color="#FF0000"><b>else
          </b></font>Value <font color="#000080">:= </font>Value <font color="#000080">+ </font>NextChar<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

    </font><font color="#008000"><i>{ Add one to the count }
    </i></font>Inc<font color="#000080">(</font>Counter<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ Add the last one }
  </i></font><font color="#FF0000"><b>if </b></font>MemStr<font color="#000080">.</font>Size <font color="#000080">&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then begin
    </b></font>New<font color="#000080">(</font>VRecPtr<font color="#000080">);
    </font>VRecPtr<font color="#000080">^ := </font>VRec<font color="#000080">;
    </font>FList<font color="#000080">.</font>Add<font color="#000080">(</font>VRecPtr<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>TPostContent<font color="#000080">.</font>FreeItems<font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>Counter<font color="#000080">: </font>Word<font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font><font color="#008000"><i>{ Free all items in the list }
  </i></font><font color="#FF0000"><b>for </b></font>Counter <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>FList<font color="#000080">.</font>Count <font color="#FF0000"><b>do
    </b></font>Dispose<font color="#000080">(</font>PValueRec<font color="#000080">(</font>FList<font color="#000080">[</font>Counter<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">]));

</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>TPostContent<font color="#000080">.</font>GetValue<font color="#000080">(</font>Index<font color="#000080">: </font>Integer<font color="#000080">): </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
  if </b></font>Index <font color="#000080">&lt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
    raise </b></font>EPostContentError<font color="#000080">.</font>Create<font color="#000080">(</font><font color="#800000">'Can''t have negative numbers'</font><font color="#000080">);

  </font><font color="#FF0000"><b>if </b></font>Index <font color="#000080">&gt; </font>FList<font color="#000080">.</font>Count<font color="#000080">-</font><font color="#800000">1 </font><font color="#FF0000"><b>then
    raise </b></font>EPostContentError<font color="#000080">.</font>Create<font color="#000080">(</font><font color="#800000">'Index value too high'</font><font color="#000080">);

  </font>Result <font color="#000080">:= </font>PValueRec<font color="#000080">(</font>FList<font color="#000080">[</font>Index<font color="#000080">])^.</font>Value<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>TPostContent<font color="#000080">.</font>GetKey<font color="#000080">(</font>Index<font color="#000080">: </font>Integer<font color="#000080">): </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
  if </b></font>Index <font color="#000080">&lt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
    raise </b></font>EPostContentError<font color="#000080">.</font>Create<font color="#000080">(</font><font color="#800000">'Can''t have negative numbers'</font><font color="#000080">);

  </font><font color="#FF0000"><b>if </b></font>Index <font color="#000080">&gt; </font>FList<font color="#000080">.</font>Count<font color="#000080">-</font><font color="#800000">1 </font><font color="#FF0000"><b>then
    raise </b></font>EPostContentError<font color="#000080">.</font>Create<font color="#000080">(</font><font color="#800000">'Index value too high'</font><font color="#000080">);

  </font>Result <font color="#000080">:= </font>PValueRec<font color="#000080">(</font>FList<font color="#000080">[</font>Index<font color="#000080">])^.</font>Name<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>TPostContent<font color="#000080">.</font>GetCount<font color="#000080">: </font>Word<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Result <font color="#000080">:= </font>FList<font color="#000080">.</font>Count<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>TPostContent<font color="#000080">.</font>ValueForKey<font color="#000080">(</font>Key<font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">; </font>Occurance<font color="#000080">: </font>Word<font color="#000080">): </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>Counter<font color="#000080">, </font>HitCount<font color="#000080">: </font>Word<font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font><font color="#008000"><i>{ Find the Occurance of Key in the list }
  </i></font><font color="#FF0000"><b>if </b></font>Occurance <font color="#000080">&lt; </font><font color="#800000">1 </font><font color="#FF0000"><b>then
    raise </b></font>EPostContentError<font color="#000080">.</font>Create<font color="#000080">(</font><font color="#800000">'Occurance value must be &gt; 0'</font><font color="#000080">);

  </font>Result <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;

  </font>HitCount <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>Counter <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>FList<font color="#000080">.</font>Count <font color="#FF0000"><b>do begin
    with </b></font>PValueRec<font color="#000080">(</font>FList<font color="#000080">[</font>Counter<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">])^ </font><font color="#FF0000"><b>do begin
      </b></font><font color="#008000"><i>{ If the key passed matches the name of the value, and the occurance
        is found, return the value } 
      </i></font><font color="#FF0000"><b>if </b></font>UpperCase<font color="#000080">(</font>Key<font color="#000080">) = </font>UpperCase<font color="#000080">(</font>Name<font color="#000080">) </font><font color="#FF0000"><b>then begin
        </b></font>Inc<font color="#000080">(</font>HitCount<font color="#000080">);

        </font><font color="#FF0000"><b>if </b></font>HitCount <font color="#000080">= </font>Occurance <font color="#FF0000"><b>then begin
          </b></font>Result <font color="#000080">:= </font>Value<font color="#000080">;
          </font>Exit<font color="#000080">;
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ If we're here, then we didn't find the value for the key -- raise
    an exception }
  </i></font><font color="#FF0000"><b>raise </b></font>EPostContentError<font color="#000080">.</font>Create<font color="#000080">(</font><font color="#800000">'Key not found'</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to DELPHI SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0408.PAS">Original</a><b>]</b></p></body>
</html>
