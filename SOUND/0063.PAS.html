<html>
<head><title> "Turn Keyboard into Synthesizer!" by CHRISTOPHER CHANDRA</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to SOUND SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0063.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
You need to reprogram the Keyboard Interrupt. Here is an example that I made.
It is a multiple keys - beep synthetizer, so you can do musical chords on
your keyboard. Try hitting several keys at once, btw..

Q = C 2 = C# W=D, etc.. just try it, you'll get the idea.
and I hope you can learn something from the code.

Multiple keys - Beep Synthetizer
by Christopher J. Chandra - PUBLIC DOMAIN CODE

}

</i></font><font color="#FF0000"><b>uses </b></font>dos<font color="#000080">,</font>crt<font color="#000080">;

</font><font color="#FF0000"><b>const </b></font>do0<font color="#000080">=</font><font color="#800000">131</font><font color="#000080">; </font>do1<font color="#000080">=</font><font color="#800000">262</font><font color="#000080">; </font>do2<font color="#000080">=</font><font color="#800000">522</font><font color="#000080">; </font>do3<font color="#000080">=</font><font color="#800000">1047</font><font color="#000080">; </font>do4<font color="#000080">=</font><font color="#800000">2093</font><font color="#000080">; </font>do5<font color="#000080">=</font><font color="#800000">4186</font><font color="#000080">;
      </font>dk0<font color="#000080">=</font><font color="#800000">139</font><font color="#000080">; </font>dk1<font color="#000080">=</font><font color="#800000">277</font><font color="#000080">; </font>dk2<font color="#000080">=</font><font color="#800000">554</font><font color="#000080">; </font>dk3<font color="#000080">=</font><font color="#800000">1109</font><font color="#000080">; </font>dk4<font color="#000080">=</font><font color="#800000">2217</font><font color="#000080">; </font>dk5<font color="#000080">=</font>dk4<font color="#000080">*</font><font color="#800000">2</font><font color="#000080">;
      </font>re0<font color="#000080">=</font><font color="#800000">147</font><font color="#000080">; </font>re1<font color="#000080">=</font><font color="#800000">293</font><font color="#000080">; </font>re2<font color="#000080">=</font><font color="#800000">587</font><font color="#000080">; </font>re3<font color="#000080">=</font><font color="#800000">1175</font><font color="#000080">; </font>re4<font color="#000080">=</font><font color="#800000">2349</font><font color="#000080">; </font>re5<font color="#000080">=</font>re4<font color="#000080">*</font><font color="#800000">2</font><font color="#000080">;
      </font>rk0<font color="#000080">=</font><font color="#800000">156</font><font color="#000080">; </font>rk1<font color="#000080">=</font><font color="#800000">311</font><font color="#000080">; </font>rk2<font color="#000080">=</font><font color="#800000">622</font><font color="#000080">; </font>rk3<font color="#000080">=</font><font color="#800000">1245</font><font color="#000080">; </font>rk4<font color="#000080">=</font><font color="#800000">2489</font><font color="#000080">; </font>rk5<font color="#000080">=</font>rk4<font color="#000080">*</font><font color="#800000">2</font><font color="#000080">;
      </font>mi0<font color="#000080">=</font><font color="#800000">165</font><font color="#000080">; </font>mi1<font color="#000080">=</font><font color="#800000">329</font><font color="#000080">; </font>mi2<font color="#000080">=</font><font color="#800000">659</font><font color="#000080">; </font>mi3<font color="#000080">=</font><font color="#800000">1319</font><font color="#000080">; </font>mi4<font color="#000080">=</font><font color="#800000">2637</font><font color="#000080">; </font>mi5<font color="#000080">=</font>mi4<font color="#000080">*</font><font color="#800000">2</font><font color="#000080">;
      </font>fa0<font color="#000080">=</font><font color="#800000">174</font><font color="#000080">; </font>fa1<font color="#000080">=</font><font color="#800000">349</font><font color="#000080">; </font>fa2<font color="#000080">=</font><font color="#800000">698</font><font color="#000080">; </font>fa3<font color="#000080">=</font><font color="#800000">1397</font><font color="#000080">; </font>fa4<font color="#000080">=</font><font color="#800000">2794</font><font color="#000080">;
      </font>fk0<font color="#000080">=</font><font color="#800000">185</font><font color="#000080">; </font>fk1<font color="#000080">=</font><font color="#800000">370</font><font color="#000080">; </font>fk2<font color="#000080">=</font><font color="#800000">740</font><font color="#000080">; </font>fk3<font color="#000080">=</font><font color="#800000">1480</font><font color="#000080">; </font>fk4<font color="#000080">=</font><font color="#800000">2960</font><font color="#000080">;
      </font>so0<font color="#000080">=</font><font color="#800000">196</font><font color="#000080">; </font>so1<font color="#000080">=</font><font color="#800000">392</font><font color="#000080">; </font>so2<font color="#000080">=</font><font color="#800000">784</font><font color="#000080">; </font>so3<font color="#000080">=</font><font color="#800000">1568</font><font color="#000080">; </font>so4<font color="#000080">=</font><font color="#800000">3136</font><font color="#000080">;
      </font>sk0<font color="#000080">=</font><font color="#800000">208</font><font color="#000080">; </font>sk1<font color="#000080">=</font><font color="#800000">415</font><font color="#000080">; </font>sk2<font color="#000080">=</font><font color="#800000">831</font><font color="#000080">; </font>sk3<font color="#000080">=</font><font color="#800000">1661</font><font color="#000080">; </font>sk4<font color="#000080">=</font><font color="#800000">3322</font><font color="#000080">;
      </font>la0<font color="#000080">=</font><font color="#800000">220</font><font color="#000080">; </font>la1<font color="#000080">=</font><font color="#800000">440</font><font color="#000080">; </font>la2<font color="#000080">=</font><font color="#800000">880</font><font color="#000080">; </font>la3<font color="#000080">=</font><font color="#800000">1760</font><font color="#000080">; </font>la4<font color="#000080">=</font><font color="#800000">3520</font><font color="#000080">;
      </font>lk0<font color="#000080">=</font><font color="#800000">233</font><font color="#000080">; </font>lk1<font color="#000080">=</font><font color="#800000">466</font><font color="#000080">; </font>lk2<font color="#000080">=</font><font color="#800000">932</font><font color="#000080">; </font>lk3<font color="#000080">=</font><font color="#800000">1865</font><font color="#000080">; </font>lk4<font color="#000080">=</font><font color="#800000">3729</font><font color="#000080">;
      </font>ti0<font color="#000080">=</font><font color="#800000">247</font><font color="#000080">; </font>ti1<font color="#000080">=</font><font color="#800000">494</font><font color="#000080">; </font>ti2<font color="#000080">=</font><font color="#800000">988</font><font color="#000080">; </font>ti3<font color="#000080">=</font><font color="#800000">1976</font><font color="#000080">; </font>ti4<font color="#000080">=</font><font color="#800000">3951</font><font color="#000080">;
      </font>sil<font color="#000080">=</font><font color="#800000">32767</font><font color="#000080">;           </font><font color="#008000"><i>{silence}

      </i></font>scale1 <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">11</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>integer <font color="#000080">=
(</font>do1<font color="#000080">,</font>re1<font color="#000080">,</font>mi1<font color="#000080">,</font>fa1<font color="#000080">,</font>so1<font color="#000080">,</font>la1<font color="#000080">,</font>ti1<font color="#000080">,</font>do2<font color="#000080">,</font>re2<font color="#000080">,</font>mi2<font color="#000080">,</font>fa2<font color="#000080">,</font>so2<font color="#000080">);
      </font>scales1<font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">11</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>integer <font color="#000080">=
(</font>sil<font color="#000080">,</font>dk1<font color="#000080">,</font>rk1<font color="#000080">,</font>sil<font color="#000080">,</font>fk1<font color="#000080">,</font>sk1<font color="#000080">,</font>lk1<font color="#000080">,</font>sil<font color="#000080">,</font>dk2<font color="#000080">,</font>rk2<font color="#000080">,</font>sil<font color="#000080">,</font>fk2<font color="#000080">);
      </font>scale2 <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">11</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>integer <font color="#000080">=
(</font>do2<font color="#000080">,</font>re2<font color="#000080">,</font>mi2<font color="#000080">,</font>fa2<font color="#000080">,</font>so2<font color="#000080">,</font>la2<font color="#000080">,</font>ti2<font color="#000080">,</font>do3<font color="#000080">,</font>re3<font color="#000080">,</font>mi3<font color="#000080">,</font>fa3<font color="#000080">,</font>so3<font color="#000080">);
      </font>scales2<font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">11</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>integer <font color="#000080">=
(</font>sil<font color="#000080">,</font>dk2<font color="#000080">,</font>rk2<font color="#000080">,</font>sil<font color="#000080">,</font>fk2<font color="#000080">,</font>sk2<font color="#000080">,</font>lk2<font color="#000080">,</font>sil<font color="#000080">,</font>dk3<font color="#000080">,</font>rk3<font color="#000080">,</font>sil<font color="#000080">,</font>fk3<font color="#000080">);
      </font>scale3 <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">11</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>integer <font color="#000080">=
(</font>do3<font color="#000080">,</font>re3<font color="#000080">,</font>mi3<font color="#000080">,</font>fa3<font color="#000080">,</font>so3<font color="#000080">,</font>la3<font color="#000080">,</font>ti3<font color="#000080">,</font>do4<font color="#000080">,</font>re4<font color="#000080">,</font>mi4<font color="#000080">,</font>fa4<font color="#000080">,</font>so4<font color="#000080">);
      </font>scales3<font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">11</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>integer <font color="#000080">=
(</font>sil<font color="#000080">,</font>dk3<font color="#000080">,</font>rk3<font color="#000080">,</font>sil<font color="#000080">,</font>fk3<font color="#000080">,</font>sk3<font color="#000080">,</font>lk3<font color="#000080">,</font>sil<font color="#000080">,</font>dk4<font color="#000080">,</font>rk4<font color="#000080">,</font>sil<font color="#000080">,</font>sil<font color="#000080">);
      </font>scale4 <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">11</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>integer <font color="#000080">=
(</font>do4<font color="#000080">,</font>re4<font color="#000080">,</font>mi4<font color="#000080">,</font>fa4<font color="#000080">,</font>so4<font color="#000080">,</font>la4<font color="#000080">,</font>ti4<font color="#000080">,</font>do5<font color="#000080">,</font>re5<font color="#000080">,</font>mi5<font color="#000080">,</font>sil<font color="#000080">,</font>sil<font color="#000080">);
      </font>scales4<font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">11</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>integer <font color="#000080">=
(</font>sil<font color="#000080">,</font>dk4<font color="#000080">,</font>rk4<font color="#000080">,</font>sil<font color="#000080">,</font>fk4<font color="#000080">,</font>sk4<font color="#000080">,</font>lk4<font color="#000080">,</font>sil<font color="#000080">,</font>dk5<font color="#000080">,</font>rk5<font color="#000080">,</font>sil<font color="#000080">,</font>sil<font color="#000080">);

</font><font color="#FF0000"><b>var </b></font>keys<font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">127</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>boolean<font color="#000080">;
    </font>oldkey<font color="#000080">:</font><font color="#FF0000"><b>procedure</b></font><font color="#000080">;
    </font>cnt<font color="#000080">,</font>del<font color="#000080">:</font>byte<font color="#000080">;

</font><font color="#008000"><i>{$F+}
</i></font><font color="#FF0000"><b>procedure </b></font>newkey<font color="#000080">; </font>interrupt<font color="#000080">;   </font><font color="#008000"><i>{ new keyboard handler }
</i></font><font color="#FF0000"><b>begin
  </b></font>keys<font color="#000080">[</font>port<font color="#000080">[</font><font color="#800000">$60</font><font color="#000080">] </font><font color="#FF0000"><b>and </b></font><font color="#800000">$7f</font><font color="#000080">] :=        </font><font color="#008000"><i>{ key is down if high bit of 60h is }
      </i></font><font color="#000080">(</font>port<font color="#000080">[</font><font color="#800000">$60</font><font color="#000080">] </font><font color="#FF0000"><b>and </b></font><font color="#800000">$80</font><font color="#000080">) = </font><font color="#800000">$00</font><font color="#000080">;    </font><font color="#008000"><i>{   &quot;off&quot; -- record current status }
  </i></font>port<font color="#000080">[</font><font color="#800000">$20</font><font color="#000080">] := </font><font color="#800000">$20</font><font color="#000080">;               </font><font color="#008000"><i>{ End-of-Interrupt instruction }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{$F-}

</i></font><font color="#FF0000"><b>begin
 </b></font>clrscr<font color="#000080">;
 </font>getintvec<font color="#000080">(</font><font color="#800000">$09</font><font color="#000080">,@</font>oldkey<font color="#000080">);
 </font>setintvec<font color="#000080">(</font><font color="#800000">$09</font><font color="#000080">,@</font>newkey<font color="#000080">);
 </font><font color="#FF0000"><b>for </b></font>cnt<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">127 </font><font color="#FF0000"><b>do </b></font>keys<font color="#000080">[</font>cnt<font color="#000080">]:=</font>false<font color="#000080">;
 </font><font color="#FF0000"><b>repeat
  </b></font>del<font color="#000080">:=</font><font color="#800000">30</font><font color="#000080">;
 </font><font color="#008000"><i>{for cnt:=0 to 15 do
  begin
   gotoxy(1,1+cnt);writeln(cnt+00:3,' ',keys[cnt+00]:5,' ',
                           cnt+16:3,' ',keys[cnt+16]:5,' ',
                           cnt+32:3,' ',keys[cnt+32]:5,' ',
                           cnt+48:3,' ',keys[cnt+48]:5,' ',
                           cnt+64:3,' ',keys[cnt+64]:5,' ',
                           cnt+80:3,' ',keys[cnt+80]:5,' ',
                           cnt+96:3,' ',keys[cnt+96]:5,' ',
                           cnt+112:3,' ',keys[cnt+112]:5,' ');
  end;}

  </i></font><font color="#FF0000"><b>for </b></font>cnt<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">11 </font><font color="#FF0000"><b>do
  begin
   if </b></font>keys<font color="#000080">[</font><font color="#800000">16</font><font color="#000080">+</font>cnt<font color="#000080">] </font><font color="#FF0000"><b>then
   begin
    if </b></font>keys<font color="#000080">[</font><font color="#800000">42</font><font color="#000080">] </font><font color="#FF0000"><b>then </b></font>sound<font color="#000080">(</font>scale1<font color="#000080">[</font>cnt<font color="#000080">]) </font><font color="#FF0000"><b>else </b></font>sound<font color="#000080">(</font>scale2<font color="#000080">[</font>cnt<font color="#000080">]);
    </font>delay<font color="#000080">(</font>del<font color="#000080">);
    </font>nosound
   <font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>if </b></font>keys<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">+</font>cnt<font color="#000080">] </font><font color="#FF0000"><b>then
   begin
    if </b></font>keys<font color="#000080">[</font><font color="#800000">42</font><font color="#000080">] </font><font color="#FF0000"><b>then </b></font>sound<font color="#000080">(</font>scales1<font color="#000080">[</font>cnt<font color="#000080">]) </font><font color="#FF0000"><b>else </b></font>sound<font color="#000080">(</font>scales2<font color="#000080">[</font>cnt<font color="#000080">]);
    </font>delay<font color="#000080">(</font>del<font color="#000080">);
    </font>nosound
   <font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>if </b></font>keys<font color="#000080">[</font><font color="#800000">44</font><font color="#000080">+</font>cnt<font color="#000080">] </font><font color="#FF0000"><b>then
   begin
    if </b></font>keys<font color="#000080">[</font><font color="#800000">42</font><font color="#000080">] </font><font color="#FF0000"><b>then </b></font>sound<font color="#000080">(</font>scale4<font color="#000080">[</font>cnt<font color="#000080">]) </font><font color="#FF0000"><b>else </b></font>sound<font color="#000080">(</font>scale3<font color="#000080">[</font>cnt<font color="#000080">]);
    </font>delay<font color="#000080">(</font>del<font color="#000080">);
    </font>nosound
   <font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>if </b></font>keys<font color="#000080">[</font><font color="#800000">30</font><font color="#000080">+</font>cnt<font color="#000080">] </font><font color="#FF0000"><b>then
   begin
    if </b></font>keys<font color="#000080">[</font><font color="#800000">42</font><font color="#000080">] </font><font color="#FF0000"><b>then </b></font>sound<font color="#000080">(</font>scales4<font color="#000080">[</font>cnt<font color="#000080">]) </font><font color="#FF0000"><b>else </b></font>sound<font color="#000080">(</font>scales3<font color="#000080">[</font>cnt<font color="#000080">]);
    </font>delay<font color="#000080">(</font>del<font color="#000080">);
    </font>nosound
   <font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

 </font><font color="#FF0000"><b>until </b></font>keys<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">];
 </font>setintvec<font color="#000080">(</font><font color="#800000">$09</font><font color="#000080">,@</font>oldkey<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to SOUND SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0063.PAS">Original</a><b>]</b></p></body>
</html>
