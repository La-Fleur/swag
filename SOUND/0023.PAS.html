<html>
<head><title> "Control Speaker" by STEVE WIERENGA</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to SOUND SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0023.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#000080">===========================================================================
 </font>BBS<font color="#000080">: </font>Canada Remote Systems
Date<font color="#000080">: </font><font color="#800000">07</font><font color="#000080">-</font><font color="#800000">11</font><font color="#000080">-</font><font color="#800000">93 </font><font color="#000080">(</font><font color="#800000">13</font><font color="#000080">:</font><font color="#800000">22</font><font color="#000080">)             </font>Number<font color="#000080">: </font><font color="#800000">30113
</font>From<font color="#000080">: </font>STEVE WIERENGA               Refer<font color="#800000">#</font><font color="#000080">: </font>NONE
  <font color="#FF0000"><b>To</b></font><font color="#000080">: </font>TRAVIS GRIGGS                 Recvd<font color="#000080">: </font>NO  
Subj<font color="#000080">: </font>SPEAKER<font color="#000080">(</font>OFF<font color="#000080">)                   </font>Conf<font color="#000080">: (</font><font color="#800000">1221</font><font color="#000080">) </font>F<font color="#000080">-</font><font color="#FF0000"><b>PASCAL
</b></font><font color="#000080">---------------------------------------------------------------------------
</font>Hello Travis<font color="#000080">:

 &gt;&gt; </font><font color="#008000"><i>{ untested, but should work }
 </i></font><font color="#000080">&gt;&gt; </font><font color="#008000"><i>{$M 1024,0,0}
 </i></font><font color="#000080">&gt;&gt; </font><font color="#008000"><i>{$F+}
 </i></font><font color="#000080">&gt;&gt; </font><font color="#FF0000"><b>uses </b></font>DOS<font color="#000080">;
 &gt;&gt; </font><font color="#FF0000"><b>Var
 </b></font><font color="#000080">&gt;&gt;   </font>Old1C <font color="#000080">: </font><font color="#FF0000"><b>Procedure</b></font><font color="#000080">;
 </font>TG<font color="#000080">&gt;
 &gt;&gt; </font><font color="#FF0000"><b>Procedure </b></font>SpeakerOff<font color="#000080">; </font>Interrupt<font color="#000080">;
 &gt;&gt; </font><font color="#FF0000"><b>Begin
 </b></font><font color="#000080">&gt;&gt;     </font><font color="#FF0000"><b>ASM </b></font><font color="#008000"><i>{ no sound proc, removes need to use CRT unit in a TSR }
 </i></font><font color="#FF00FF">&gt;&gt;       mov dx,061h
 &gt;&gt;       in al,dx
 &gt;&gt;       and al,11111100b
 &gt;&gt;       out dx,al
 &gt;&gt;       pushf
 &gt;&gt;     </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
 &gt;&gt;     </font>Old1C<font color="#000080">;
 &gt;&gt; </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
 </font>TG<font color="#000080">&gt;
 &gt;&gt; </font><font color="#FF0000"><b>Begin
 </b></font><font color="#000080">&gt;&gt;   </font>GetIntVec <font color="#000080">(</font><font color="#800000">$1C</font><font color="#000080">,@</font>Old1C<font color="#000080">);
 &gt;&gt;   </font>SetIntVec <font color="#000080">(</font><font color="#800000">$1C</font><font color="#000080">,@</font>SpeakerOff<font color="#000080">);
 &gt;&gt;   </font>Keep<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
 &gt;&gt; </font><font color="#FF0000"><b>End</b></font><font color="#000080">.
 </font>TG<font color="#000080">&gt;
 </font>TG<font color="#000080">&gt; </font>I<font color="#800000">'m trying to learn to write a TSR.  Could you explain every step and
 </font>TG<font color="#000080">&gt; </font>why it<font color="#800000">'s there?  Thanks...

</font>I didn<font color="#800000">'t write that code, actually.  I have never written a TSR and don'</font>t plan
<font color="#FF0000"><b>to in </b></font>the <font color="#FF0000"><b>near </b></font>future<font color="#000080">, </font>so I suggest you ask one <font color="#FF0000"><b>of </b></font>the gurus here<font color="#000080">.

 &gt;&gt; --- </font>FMail <font color="#800000">0.90
 </font>TG<font color="#000080">&gt;
 </font>TG<font color="#000080">&gt; </font>Fmail <font color="#800000">0.94 </font><font color="#FF0000"><b>is out</b></font><font color="#000080">.  </font>You should get it<font color="#000080">.  </font>It<font color="#800000">'s much better...

</font>I<font color="#800000">'m still with .90 because I can'</font>t afford <font color="#FF0000"><b>to register </b></font><font color="#000080">.</font><font color="#800000">94 </font><font color="#000080">(.</font><font color="#800000">90 </font>doesn<font color="#800000">'t have a
</font>registration<font color="#000080">) :-(.
</font>Take Care<font color="#000080">, </font>Steve
Shockwave Software Systems

<font color="#000080">--- </font>FMail <font color="#800000">0.90
 </font><font color="#000080">* </font>Origin<font color="#000080">: </font>The Programmer<font color="#800000">'s Armpit... Home of Monsoon*Qomm! (1:2613/228.2)
</font><font color="#000080">===========================================================================
 </font>BBS<font color="#000080">: </font>Canada Remote Systems
Date<font color="#000080">: </font><font color="#800000">07</font><font color="#000080">-</font><font color="#800000">10</font><font color="#000080">-</font><font color="#800000">93 </font><font color="#000080">(</font><font color="#800000">11</font><font color="#000080">:</font><font color="#800000">08</font><font color="#000080">)             </font>Number<font color="#000080">: </font><font color="#800000">30157
</font>From<font color="#000080">: </font>STEVEN TALLENT               Refer<font color="#800000">#</font><font color="#000080">: </font>NONE
  <font color="#FF0000"><b>To</b></font><font color="#000080">: </font>NIELS LANGKILDE               Recvd<font color="#000080">: </font>NO  
Subj<font color="#000080">: </font>RE<font color="#000080">: </font>SPEAKER<font color="#000080">(</font>OFF<font color="#000080">)               </font>Conf<font color="#000080">: (</font><font color="#800000">1221</font><font color="#000080">) </font>F<font color="#000080">-</font><font color="#FF0000"><b>PASCAL
</b></font><font color="#000080">---------------------------------------------------------------------------
 -=&gt; </font>Quoting Niels Langkilde <font color="#FF0000"><b>to </b></font>Everyone <font color="#000080">&lt;=-

 </font>NL<font color="#000080">&gt; </font><font color="#FF0000"><b>Is </b></font>it possible <font color="#FF0000"><b>to </b></font>diable<font color="#000080">/</font>enable the speaker output <font color="#000080">(</font>alternatvly
 NL<font color="#000080">&gt; </font>redirect it<font color="#000080">) ?? </font><font color="#FF0000"><b>If </b></font>so<font color="#000080">, </font>please help <font color="#000080">!

</font>The only thing that can be done <font color="#FF0000"><b>is </b></font>disabling the speaker many times
a second <font color="#FF0000"><b>to do </b></font>it<font color="#000080">.  </font>Here<font color="#800000">'s some code that disables it 18 times a second,
</font>but notably does <font color="#FF0000"><b>NOT </b></font>work <font color="#FF0000"><b>with </b></font>programs that shut down interrupts
during playback<font color="#000080">.

</font><font color="#008000"><i>{$M 1024,0,0}
{$N-,S-,G+} { Use g- for 8088 systems, g+ for V20 and above }
</i></font><font color="#FF0000"><b>PROGRAM </b></font>NoSpeak<font color="#000080">;
</font><font color="#FF0000"><b>USES </b></font>Dos<font color="#000080">;
</font><font color="#FF0000"><b>VAR </b></font>OLDINT1C <font color="#000080">: </font><font color="#FF0000"><b>Procedure</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>ShutOff<font color="#000080">; </font>INTERRUPT<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>Port <font color="#000080">[</font><font color="#800000">97</font><font color="#000080">] := </font>Port<font color="#000080">[</font><font color="#800000">97</font><font color="#000080">] </font><font color="#FF0000"><b>and </b></font><font color="#800000">253</font><font color="#000080">; </font><font color="#008000"><i>{Turn off speaker}
  </i></font>OldInt1C<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>BEGIN
  </b></font>GetIntVec<font color="#000080">(</font><font color="#800000">$1C</font><font color="#000080">, @</font>OldInt1C<font color="#000080">);
  </font>SetIntVec<font color="#000080">(</font><font color="#800000">$1C</font><font color="#000080">, @</font>ShutOff<font color="#000080">);
  </font>Keep<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>Note this <font color="#FF0000"><b>is </b></font>a TSR<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>I can<font color="#800000">'t guarantee that it'</font>ll work right <font color="#FF0000"><b>on
</b></font>anyone<font color="#800000">'s computer.

</font>___ Blue Wave<font color="#000080">/</font>QWK v2<font color="#000080">.</font><font color="#800000">12
</font><font color="#000080">--- </font>Renegade v06<font color="#000080">-</font><font color="#800000">25 </font>Beta
 <font color="#000080">* </font>Origin<font color="#000080">: </font>Pink<font color="#800000">'s Place  (409)883-8344 735-3712 (1:3811/210)
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to SOUND SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0023.PAS">Original</a><b>]</b></p></body>
</html>
