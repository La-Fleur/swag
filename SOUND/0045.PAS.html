<html>
<head><title> "Fm-voices" by JASON DYER</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to SOUND SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0045.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
Could somebody tell me how to program the FM-voices of my sound-blaster ?

Here's a .sbi player for you...
}
</i></font><font color="#FF0000"><b>program </b></font>SBIread<font color="#000080">;
</font><font color="#FF0000"><b>uses </b></font>Crt<font color="#000080">;
</font><font color="#FF0000"><b>const </b></font>SBIREG <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">11</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Word <font color="#000080">=
  (</font><font color="#800000">$20</font><font color="#000080">,</font><font color="#800000">$23</font><font color="#000080">,</font><font color="#800000">$40</font><font color="#000080">,</font><font color="#800000">$43</font><font color="#000080">,</font><font color="#800000">$60</font><font color="#000080">,</font><font color="#800000">$63</font><font color="#000080">,</font><font color="#800000">$80</font><font color="#000080">,</font><font color="#800000">$83</font><font color="#000080">,</font><font color="#800000">$E0</font><font color="#000080">,</font><font color="#800000">$E3</font><font color="#000080">,</font><font color="#800000">$C0</font><font color="#000080">);
</font><font color="#FF0000"><b>var
  </b></font>FromF<font color="#000080">: </font><font color="#FF0000"><b>file</b></font><font color="#000080">;
  </font>I<font color="#000080">: </font>integer<font color="#000080">;
  </font>FN<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
  </font>NumRead<font color="#000080">, </font>NumWritten<font color="#000080">: </font>Word<font color="#000080">;
  </font>buf<font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">2048</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Char<font color="#000080">;
  </font>ch<font color="#000080">: </font>char<font color="#000080">;
  </font>IsSBI<font color="#000080">: </font>boolean<font color="#000080">;
  </font>SBIName<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>Bit<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Delay<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">); </font><font color="#008000"><i>{something fancier was suggested, but this works fine}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;                                                                           

</font><font color="#FF0000"><b>function </b></font>CheckSoundCard<font color="#000080">: </font>boolean<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>Temp<font color="#000080">, </font>Temp2<font color="#000080">: </font>byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>port<font color="#000080">[</font><font color="#800000">$388</font><font color="#000080">]:=</font><font color="#800000">$4</font><font color="#000080">; </font><font color="#FF0000"><b>repeat until </b></font>Port<font color="#000080">[</font><font color="#800000">$22E</font><font color="#000080">] &gt; </font><font color="#800000">127</font><font color="#000080">;
  </font>port<font color="#000080">[</font><font color="#800000">$389</font><font color="#000080">]:=</font><font color="#800000">$60</font><font color="#000080">; </font><font color="#FF0000"><b>repeat until </b></font>Port<font color="#000080">[</font><font color="#800000">$22E</font><font color="#000080">] &gt; </font><font color="#800000">127</font><font color="#000080">;
  </font>port<font color="#000080">[</font><font color="#800000">$389</font><font color="#000080">]:=</font><font color="#800000">$80</font><font color="#000080">; </font><font color="#FF0000"><b>repeat until </b></font>Port<font color="#000080">[</font><font color="#800000">$22E</font><font color="#000080">] &gt; </font><font color="#800000">127</font><font color="#000080">;
  </font>Temp<font color="#000080">:=</font>port<font color="#000080">[</font><font color="#800000">$388</font><font color="#000080">];
  </font>port<font color="#000080">[</font><font color="#800000">$388</font><font color="#000080">]:=</font><font color="#800000">$2</font><font color="#000080">; </font><font color="#FF0000"><b>repeat until </b></font>Port<font color="#000080">[</font><font color="#800000">$22E</font><font color="#000080">] &gt; </font><font color="#800000">127</font><font color="#000080">;
  </font>port<font color="#000080">[</font><font color="#800000">$389</font><font color="#000080">]:=</font><font color="#800000">$FF</font><font color="#000080">; </font><font color="#FF0000"><b>repeat until </b></font>Port<font color="#000080">[</font><font color="#800000">$22E</font><font color="#000080">] &gt; </font><font color="#800000">127</font><font color="#000080">;
  </font>port<font color="#000080">[</font><font color="#800000">$388</font><font color="#000080">]:=</font><font color="#800000">$4</font><font color="#000080">; </font><font color="#FF0000"><b>repeat until </b></font>Port<font color="#000080">[</font><font color="#800000">$22E</font><font color="#000080">] &gt; </font><font color="#800000">127</font><font color="#000080">;
  </font>port<font color="#000080">[</font><font color="#800000">$389</font><font color="#000080">]:=</font><font color="#800000">$21</font><font color="#000080">; </font><font color="#FF0000"><b>repeat until </b></font>Port<font color="#000080">[</font><font color="#800000">$22E</font><font color="#000080">] &gt; </font><font color="#800000">127</font><font color="#000080">;
  </font>Delay<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
  </font>Temp2<font color="#000080">:=</font>port<font color="#000080">[</font><font color="#800000">$388</font><font color="#000080">];
  </font>port<font color="#000080">[</font><font color="#800000">$388</font><font color="#000080">]:=</font><font color="#800000">$4</font><font color="#000080">; </font><font color="#FF0000"><b>repeat until </b></font>Port<font color="#000080">[</font><font color="#800000">$22E</font><font color="#000080">] &gt; </font><font color="#800000">127</font><font color="#000080">;
  </font>port<font color="#000080">[</font><font color="#800000">$389</font><font color="#000080">]:=</font><font color="#800000">$60</font><font color="#000080">; </font><font color="#FF0000"><b>repeat until </b></font>Port<font color="#000080">[</font><font color="#800000">$22E</font><font color="#000080">] &gt; </font><font color="#800000">127</font><font color="#000080">;
  </font>port<font color="#000080">[</font><font color="#800000">$389</font><font color="#000080">]:=</font><font color="#800000">$80</font><font color="#000080">; </font><font color="#FF0000"><b>repeat until </b></font>Port<font color="#000080">[</font><font color="#800000">$22E</font><font color="#000080">] &gt; </font><font color="#800000">127</font><font color="#000080">;
  </font><font color="#FF0000"><b>If </b></font><font color="#000080">((</font>temp <font color="#FF0000"><b>and </b></font><font color="#800000">$E0</font><font color="#000080">)=</font><font color="#800000">$00</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">((</font>temp2 <font color="#FF0000"><b>and </b></font><font color="#800000">$E0</font><font color="#000080">)=</font><font color="#800000">$c0</font><font color="#000080">) </font><font color="#FF0000"><b>then
    </b></font>CheckSoundCard<font color="#000080">:=</font>True <font color="#FF0000"><b>else </b></font>CheckSoundCard<font color="#000080">:=</font>False<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>ClearCard<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>CP<font color="#000080">: </font>byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
  For </b></font>CP<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do begin
    </b></font>port<font color="#000080">[</font><font color="#800000">$388</font><font color="#000080">]:=</font>CP<font color="#000080">;
    </font>port<font color="#000080">[</font><font color="#800000">$389</font><font color="#000080">]:=</font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>Sounder<font color="#000080">(</font>A<font color="#000080">,</font>B<font color="#000080">: </font>byte<font color="#000080">);
</font><font color="#FF0000"><b>begin
  </b></font>port<font color="#000080">[</font><font color="#800000">$388</font><font color="#000080">]:=</font>A<font color="#000080">; </font>Bit<font color="#000080">;
  </font>port<font color="#000080">[</font><font color="#800000">$389</font><font color="#000080">]:=</font>B<font color="#000080">; </font>Bit<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Writeln<font color="#000080">(</font><font color="#800000">'SBI file player'</font><font color="#000080">);
  </font><font color="#FF0000"><b>if not </b></font>CheckSoundCard <font color="#FF0000"><b>then begin
    </b></font>writeln<font color="#000080">(</font><font color="#800000">'Soundcard not detected!'</font><font color="#000080">);
    </font>halt<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>FN<font color="#000080">:=</font>ParamStr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
  </font><font color="#FF0000"><b>If </b></font>Pos<font color="#000080">(</font><font color="#800000">'.'</font><font color="#000080">,</font>FN<font color="#000080">)=</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>FN<font color="#000080">:=</font>FN<font color="#000080">+</font><font color="#800000">'.SBI'</font><font color="#000080">;
  </font>Assign<font color="#000080">(</font>FromF<font color="#000080">, </font>FN<font color="#000080">);
  </font>Reset<font color="#000080">(</font>FromF<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
  </font>BlockRead<font color="#000080">(</font>FromF<font color="#000080">,</font>buf<font color="#000080">,</font>SizeOf<font color="#000080">(</font>buf<font color="#000080">),</font>NumRead<font color="#000080">);
  </font>Close<font color="#000080">(</font>FromF<font color="#000080">);
  </font><font color="#FF0000"><b>If </b></font><font color="#000080">(</font>buf<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]=</font><font color="#800000">'S'</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>buf<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">]=</font><font color="#800000">'B'</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>buf<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">]=</font><font color="#800000">'I'</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>ord<font color="#000080">(</font>buf<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">])=</font><font color="#800000">26</font><font color="#000080">)
    </font><font color="#FF0000"><b>then </b></font>IsSBI<font color="#000080">:=</font>True <font color="#FF0000"><b>else </b></font>IsSBI<font color="#000080">:=</font>False<font color="#000080">;
  </font><font color="#FF0000"><b>If </b></font>IsSBI<font color="#000080">=</font>False <font color="#FF0000"><b>then </b></font>Writeln<font color="#000080">(</font><font color="#800000">'Not a SBI file!'</font><font color="#000080">) </font><font color="#FF0000"><b>else begin
    </b></font>SBIName<font color="#000080">:=</font><font color="#800000">''</font><font color="#000080">;
    </font>I<font color="#000080">:=</font><font color="#800000">4</font><font color="#000080">;
    </font><font color="#FF0000"><b>repeat
      </b></font>i<font color="#000080">:=</font>i<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>ord<font color="#000080">(</font>buf<font color="#000080">[</font>i<font color="#000080">])&lt;&gt;</font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font>SBIName<font color="#000080">:=</font>SBIName<font color="#000080">+</font>buf<font color="#000080">[</font>i<font color="#000080">];
    </font><font color="#FF0000"><b>until </b></font>ord<font color="#000080">(</font>buf<font color="#000080">[</font>i<font color="#000080">])=</font><font color="#800000">0</font><font color="#000080">;
    </font>Writeln<font color="#000080">(</font><font color="#800000">'Name of file      : '</font><font color="#000080">,</font>FN<font color="#000080">);
    </font>Writeln<font color="#000080">(</font><font color="#800000">'Name of instrument: '</font><font color="#000080">,</font>SBIName<font color="#000080">);
    </font>ClearCard<font color="#000080">;
    </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">11 </font><font color="#FF0000"><b>do </b></font>Sounder<font color="#000080">(</font>SBIreg<font color="#000080">[</font>i<font color="#000080">],</font>ord<font color="#000080">(</font>buf<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">36</font><font color="#000080">]));
    </font>Sounder<font color="#000080">(</font><font color="#800000">$A0</font><font color="#000080">,</font><font color="#800000">$58</font><font color="#000080">);
    </font>Sounder<font color="#000080">(</font><font color="#800000">$B0</font><font color="#000080">,</font><font color="#800000">$31</font><font color="#000080">);
    </font>Delay<font color="#000080">(</font><font color="#800000">900</font><font color="#000080">);
    </font>ClearCard<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to SOUND SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0045.PAS">Original</a><b>]</b></p></body>
</html>
