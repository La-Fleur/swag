<html>
<head><title> "MultiTracker Module (MTM) File Format" by CHRISS MALO</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to SOUND SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0069.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
The following is a summary of the MultiTracker Module (MTM) fromat.  It is
intended for programmers who wish to support the format in any manner.  Note
that all effects are defined as the current Protracker effects standard. A
short summary of this standard is provided in the documentation file for the
Multitracker Module Editor.

&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Acirc;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Acirc;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;
Position&sup3;Length&sup3;Description
&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Aring;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Aring;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;
0       &sup3;3     &sup3;&quot;MTM&quot; file marker
3       &sup3;BYTE  &sup3;version number - upper nybble is major version #, lower is
        &sup3;      &sup3;                 minor version number
4       &sup3;20    &sup3;ASCIIZ songname
24      &sup3;WORD  &sup3;number of tracks saved
26      &sup3;BYTE  &sup3;last pattern number saved
27      &sup3;BYTE  &sup3;last order number to play (songlength-1)
28      &sup3;WORD  &sup3;length of extra comment field
30      &sup3;BYTE  &sup3;number of samples saved (NOS)
31      &sup3;BYTE  &sup3;attribute byte (currently defined as 0)
32      &sup3;BYTE  &sup3;beats per track
33      &sup3;BYTE  &sup3;number of tracks to be played back
34      &sup3;32    &sup3;voice pan positions
&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Aring;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Aring;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;
66      &sup3;NOS*37&sup3;Instrument data:
&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Aring;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Aring;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;
        &sup3;22    &sup3;sample name
        &sup3;DWORD &sup3;sample length in bytes
        &sup3;DWORD &sup3;offset of beginning of sample loop in bytes
        &sup3;DWORD &sup3;offset of end of sample loop in bytes
        &sup3;BYTE  &sup3;finetune value
        &sup3;BYTE  &sup3;standard volume of sample
        &sup3;BYTE  &sup3;attribute byte: bit meaning
        &sup3;      &sup3;                0   0=8 bit sample 1=16 bit sample
        &sup3;      &sup3;                1-7 undefined (set to zero)
&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Aring;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Aring;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;
66+     &sup3;128   &sup3;Pattern order data
(NOS*37)&sup3;      &sup3;
&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Aring;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Aring;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;
194+    &sup3;trks* &sup3;Track data:
(NOS*37)&sup3;192   &sup3;Each track is saved independently and takes exactly 192 bytes.
        &sup3;      &sup3;The tracks are arranged as 64 consecutive 3-byte notes.  These
        &sup3;      &sup3;notes have the following format:
        &sup3;      &sup3;
        &sup3;      &sup3;
        &sup3;      &sup3;  BYTE 0   BYTE 1   BYTE 2
        &sup3;      &sup3; ppppppii iiiieeee aaaaaaaa
        &sup3;      &sup3;
        &sup3;      &sup3; p = pitch value (0=no pitch stated)
        &sup3;      &sup3; i = instrument number (0=no instrument number)
        &sup3;      &sup3; e = effect number
        &sup3;      &sup3; a = effect argument
        &sup3;      &sup3;
&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Aring;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Aring;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;
194+    &sup3;      &sup3;Track sequencing data
NOS*37+ &sup3;      &Agrave;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&iquest;
trks*192&sup3;(last pattern saved + 1)*32 WORDS&sup3;
&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Aring;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Acirc;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Ugrave;
        &sup3;      &sup3;The track sequencing data is really just a listing of which
        &sup3;      &sup3;track is used as which voice in each saved pattern.  This is
        &sup3;      &sup3;necessary since one track may be a part of many different
        &sup3;      &sup3;patterns. (not orders)  Doing this saves much of the memory
        &sup3;      &sup3;wasted in a normal MOD by repetition of certain tracks over
        &sup3;      &sup3;and over again throughout the file.
        &sup3;      &sup3;
        &sup3;      &sup3;Note that track zero is never saved, but always considered as
        &sup3;      &sup3;an empty track.  Therefore, track numbering for the saved
        &sup3;      &sup3;tracks really starts at one.
        &sup3;      &sup3;
        &sup3;      &sup3;The data is organized in sets of 32 voices.  First comes a
        &sup3;      &sup3;WORD representing which track is in pattern 0, voice 0.  The
        &sup3;      &sup3;next WORD is pattern 0, voice 1, etc.  This is repeated for
        &sup3;      &sup3;each pattern saved, giving a total track sequencing size of
        &sup3;      &sup3;32 WORDS per pattern saved.
        &sup3;      &sup3;
        &sup3;      &sup3;If your code uses MOD-style memory organization, you can still
        &sup3;      &sup3;play MTM's.  You merely jump to the track sequencing data, and
        &sup3;      &sup3;then load each pattern separately by jumping back and forth
        &sup3;      &sup3;between the track sequences and the actual track data.
&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Aring;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Aring;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;
194+    &sup3;Header&sup3;Extra comment field
NOS*37+ &sup3;says. &sup3;(Length specified in the header)
trks*192&Agrave;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Aacute;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&iquest;
+(last pattern saved + 1)*32*2      &sup3;
&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Acirc;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Acirc;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Aacute;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;
194+    &sup3;sample&sup3;Raw sample data
NOS*37+ &sup3;length&sup3;(unsigned)
trks*192&Agrave;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Aacute;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&iquest;
+(last pattern saved + 1)*32*2+     &sup3;
length of extra comment field       &sup3;
&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Ugrave;

}</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to SOUND SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0069.PAS">Original</a><b>]</b></p></body>
</html>
