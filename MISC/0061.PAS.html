<html>
<head><title> "Pick Unit; Select Choice" by SWAG SUPPORT GROUP</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to MISC SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0061.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>(********************************************************)
(******************** PICK.PAS **************************)
(******* the pick unit; to select menu choice *******)

</i></font><font color="#FF0000"><b>Unit </b></font>Pick<font color="#000080">;

</font><font color="#FF0000"><b>interface

</b></font><font color="#008000"><i>{1} </i></font><font color="#FF0000"><b>Function </b></font>ScreenChar <font color="#000080">: </font>Char<font color="#000080">; </font><font color="#008000"><i>{return the char at the cursor}
{2} </i></font><font color="#FF0000"><b>Procedure </b></font>BlockCursor<font color="#000080">; </font><font color="#008000"><i>{give us a block cursor; TP6 &amp; 7 only}
{3} </i></font><font color="#FF0000"><b>Procedure </b></font>NormalCursor<font color="#000080">; </font><font color="#008000"><i>{restore cursor to normal; TP6 &amp; 7 only}

{4} </i></font><font color="#FF0000"><b>Function </b></font>PickByte<font color="#000080">(</font>Left<font color="#000080">, </font>Top<font color="#000080">, </font>Bottom <font color="#000080">: </font>Byte<font color="#000080">) : </font>Byte<font color="#000080">;
    </font><font color="#008000"><i>{return the number of the item chosen as a byte, or
    return ZERO if ESCape is pressed}

{5} </i></font><font color="#FF0000"><b>Function </b></font>PickChar<font color="#000080">(</font>Left<font color="#000080">, </font>Top<font color="#000080">, </font>Bottom <font color="#000080">: </font>Byte<font color="#000080">) : </font>Char<font color="#000080">;
    </font><font color="#008000"><i>{return the character at the cursor when ENTER is pressed}


{
Notes: for &quot;Pick&quot; functions
  One returns a Byte and the other returns a Char - use one
  or the other;

  Parameters:
  Left   = the left side of the menu list (left side of window+1)
  Top    = the top of the menu list       (top of window+1)
  Bottom = the bottom of the menu list;   (bottom of window-1)
}

</i></font><font color="#FF0000"><b>implementation

uses
</b></font>dos<font color="#000080">,
</font>crt<font color="#000080">,
</font>keyb<font color="#000080">;

</font><font color="#008000"><i>{-----------------------------------------------------}
</i></font><font color="#FF0000"><b>Function </b></font>PickByte<font color="#000080">(</font>Left<font color="#000080">,</font>Top<font color="#000080">,</font>Bottom <font color="#000080">: </font>byte<font color="#000080">) : </font>Byte<font color="#000080">;
</font><font color="#008000"><i>{return the number of the item chosen as a byte, or
return ZERO if ESCape is pressed}

</i></font><font color="#FF0000"><b>Var
</b></font>x<font color="#000080">,</font>y<font color="#000080">,</font>x1<font color="#000080">,</font>y1 <font color="#000080">: </font>byte<font color="#000080">;
</font>ch        <font color="#000080">: </font>char<font color="#000080">;
</font>int<font color="#000080">,</font>total <font color="#000080">: </font>byte<font color="#000080">;

</font><font color="#FF0000"><b>begin
    </b></font>PickByte <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;              </font><font color="#008000"><i>{default to ZERO}
    </i></font>total <font color="#000080">:= (</font>Bottom <font color="#000080">- </font>Top<font color="#000080">)+</font><font color="#800000">1</font><font color="#000080">;  </font><font color="#008000"><i>{total number of items in list}
    </i></font>x1 <font color="#000080">:= </font>WhereX<font color="#000080">; </font>y1 <font color="#000080">:= </font>WhereY<font color="#000080">; </font><font color="#008000"><i>{save the original location}

    </i></font>x <font color="#000080">:= </font>Left<font color="#000080">; </font>y <font color="#000080">:= </font>Top<font color="#000080">;
    </font>BlockCursor<font color="#000080">;         </font><font color="#008000"><i>{give us a block cursor}

    </i></font>GotoXy<font color="#000080">(</font>x<font color="#000080">, </font>y<font color="#000080">);

    </font>int <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;

    </font><font color="#FF0000"><b>Repeat
       </b></font>Ch <font color="#000080">:= </font>GetKey<font color="#000080">;

       </font><font color="#FF0000"><b>Case </b></font>Ch <font color="#FF0000"><b>of
          </b></font>LeftArrow<font color="#000080">, </font>UpArrow <font color="#000080">: </font><font color="#008000"><i>{move up}
          </i></font><font color="#FF0000"><b>begin
             If </b></font>y <font color="#000080">= </font>Top <font color="#FF0000"><b>then
             begin
               </b></font>y <font color="#000080">:= </font>Bottom<font color="#000080">;
               </font>int <font color="#000080">:= </font>total<font color="#000080">;
             </font><font color="#FF0000"><b>end
             else
             begin
               </b></font>Dec<font color="#000080">(</font>y<font color="#000080">);
               </font>dec<font color="#000080">(</font>int<font color="#000080">);
             </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

           </font>GotoXy<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">);
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{leftarrow}

          </i></font>RightArrow<font color="#000080">, </font>DownArrow <font color="#000080">:   </font><font color="#008000"><i>{move down}
          </i></font><font color="#FF0000"><b>begin
             If </b></font>y <font color="#000080">= </font>Bottom <font color="#FF0000"><b>then
             begin
                </b></font>y <font color="#000080">:= </font>Top<font color="#000080">;
                </font>int <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
             </font><font color="#FF0000"><b>end
             else
             begin
                </b></font>Inc<font color="#000080">(</font>y<font color="#000080">);
                </font>inc<font color="#000080">(</font>int<font color="#000080">);
             </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
             </font>GotoXy<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">);
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{rightarrow}

        </i></font>PgUp<font color="#000080">, </font>Home <font color="#000080">: </font><font color="#008000"><i>{go to top of list}
        </i></font><font color="#FF0000"><b>begin
            </b></font>y <font color="#000080">:= </font>Top<font color="#000080">;
            </font>int <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
            </font>GotoXy<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">);
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

        </font>PgDn<font color="#000080">, </font>EndKey <font color="#000080">:  </font><font color="#008000"><i>{go to bottom of list}
        </i></font><font color="#FF0000"><b>begin
            </b></font>y <font color="#000080">:= </font>Bottom<font color="#000080">;
            </font>int <font color="#000080">:= </font>total<font color="#000080">;
            </font>GotoXy<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">);
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

       </font><font color="#800000">#13 </font><font color="#000080">: </font>PickByte <font color="#000080">:= </font>int<font color="#000080">; </font><font color="#008000"><i>{return position of choice in the array}
     </i></font><font color="#FF0000"><b>End</b></font><font color="#000080">; </font><font color="#008000"><i>{Case Ch}

    </i></font><font color="#FF0000"><b>Until </b></font><font color="#000080">(</font>ch <font color="#000080">= </font><font color="#800000">#27</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>ch <font color="#000080">= </font><font color="#800000">#13</font><font color="#000080">); </font><font color="#008000"><i>{loop until ESCape or ENTER}

    </i></font>GotoXY<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">);  </font><font color="#008000"><i>{return to original location}
    </i></font>NormalCursor<font color="#000080">;   </font><font color="#008000"><i>{Restore the cursor}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{---------------------------------------------}

</i></font><font color="#FF0000"><b>Function </b></font>PickChar<font color="#000080">(</font>Left<font color="#000080">, </font>Top<font color="#000080">,</font>Bottom <font color="#000080">: </font>byte<font color="#000080">) : </font>Char<font color="#000080">;
</font><font color="#008000"><i>{return the character at the cursor when ENTER is pressed}

</i></font><font color="#FF0000"><b>Var
</b></font>x<font color="#000080">,</font>y<font color="#000080">,</font>x1<font color="#000080">,</font>y1 <font color="#000080">: </font>byte<font color="#000080">;
</font>ch    <font color="#000080">: </font>char<font color="#000080">;

</font><font color="#FF0000"><b>begin
    </b></font>PickChar <font color="#000080">:= </font><font color="#800000">#27</font><font color="#000080">;
    </font>x1 <font color="#000080">:= </font>WhereX<font color="#000080">; </font>y1 <font color="#000080">:= </font>WhereY<font color="#000080">;
    </font>x <font color="#000080">:= </font>Left<font color="#000080">; </font>y <font color="#000080">:= </font>Top<font color="#000080">;

    </font>BlockCursor<font color="#000080">;         </font><font color="#008000"><i>{give us a block cursor}
    </i></font>GotoXy<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">);

    </font><font color="#FF0000"><b>Repeat
       </b></font>Ch <font color="#000080">:= </font>GetKey<font color="#000080">;
       </font><font color="#FF0000"><b>Case </b></font>Ch <font color="#FF0000"><b>of
          </b></font>LeftArrow<font color="#000080">, </font>UpArrow <font color="#000080">:
          </font><font color="#FF0000"><b>begin
             If </b></font>y <font color="#000080">= </font>Top <font color="#FF0000"><b>then </b></font>y <font color="#000080">:= </font>Bottom <font color="#FF0000"><b>else </b></font>Dec<font color="#000080">(</font>y<font color="#000080">);
             </font>GotoXy<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">);
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{leftarrow}

          </i></font>RightArrow<font color="#000080">, </font>DownArrow <font color="#000080">:
          </font><font color="#FF0000"><b>begin
             If </b></font>y <font color="#000080">= </font>Bottom <font color="#FF0000"><b>then </b></font>y <font color="#000080">:= </font>Top <font color="#FF0000"><b>else </b></font>Inc<font color="#000080">(</font>y<font color="#000080">);
             </font>GotoXy<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">);
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{leftarrow}

        </i></font>PgUp<font color="#000080">, </font>Home <font color="#000080">:
        </font><font color="#FF0000"><b>begin
            </b></font>y <font color="#000080">:= </font>Top<font color="#000080">;
            </font>GotoXy<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">);
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

        </font>PgDn<font color="#000080">, </font>EndKey <font color="#000080">:
        </font><font color="#FF0000"><b>begin
            </b></font>y <font color="#000080">:= </font>Bottom<font color="#000080">;
            </font>GotoXy<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">);
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

       </font><font color="#800000">#13 </font><font color="#000080">: </font>PickChar <font color="#000080">:= </font>ScreenChar<font color="#000080">; </font><font color="#008000"><i>{return the char under the cursor}
     </i></font><font color="#FF0000"><b>End</b></font><font color="#000080">; </font><font color="#008000"><i>{Case Ch}

    </i></font><font color="#FF0000"><b>Until </b></font><font color="#000080">(</font>ch <font color="#000080">= </font><font color="#800000">#27</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>ch <font color="#000080">= </font><font color="#800000">#13</font><font color="#000080">);
    </font>GotoXY<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">);
    </font>NormalCursor<font color="#000080">;         </font><font color="#008000"><i>{give us a block cursor}

</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{-----------------------------------------------}

{----------------------------------------}
</i></font><font color="#FF0000"><b>Function </b></font>ScreenChar <font color="#000080">: </font>Char<font color="#000080">; </font><font color="#008000"><i>{return the character at the cursor}
</i></font><font color="#FF0000"><b>Var
</b></font>R <font color="#000080">: </font>Registers<font color="#000080">;
</font><font color="#FF0000"><b>begin
   </b></font>Fillchar<font color="#000080">(</font>R<font color="#000080">, </font>SizeOf<font color="#000080">(</font>R<font color="#000080">), </font><font color="#800000">0</font><font color="#000080">);
   </font>R<font color="#000080">.</font>AH <font color="#000080">:= </font><font color="#800000">8</font><font color="#000080">;
   </font>R<font color="#000080">.</font>BH <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
   </font>Intr<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">, </font>R<font color="#000080">);
   </font>ScreenChar <font color="#000080">:= </font>Chr<font color="#000080">(</font>R<font color="#000080">.</font>AL<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{--------------------------------------------------}


{---------------------------------}
</i></font><font color="#FF0000"><b>Procedure </b></font>NormalCursor<font color="#000080">; </font><font color="#008000"><i>{restore cursor to normal; TP6 &amp; 7 only}
</i></font><font color="#FF0000"><b>BEGIN
 asm
  </b></font><font color="#FF00FF">mov ah,1
  mov ch,5   </font><font color="#008000"><i>{ / You will want to fool around with these two}
  </i></font><font color="#FF00FF">mov cl,6   </font><font color="#008000"><i>{ \ numbers to get the cursor you want}
  </i></font><font color="#FF00FF">int $10
 </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#008000"><i>{--------------------------------}
</i></font><font color="#FF0000"><b>Procedure </b></font>BlockCursor<font color="#000080">; </font><font color="#008000"><i>{give us a block cursor; TP6 &amp; 7 only}
</i></font><font color="#FF0000"><b>BEGIN
 asm
  </b></font><font color="#FF00FF">mov ah,1
  mov ch,5    </font><font color="#008000"><i>{ / You will want to fool around with these two}
  </i></font><font color="#FF00FF">mov cl,8    </font><font color="#008000"><i>{ \ numbers to get the cursor you want; (1=big)}
  </i></font><font color="#FF00FF">int $10
 </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;
</font><font color="#008000"><i>{-------------------------------------}

</i></font><font color="#FF0000"><b>End</b></font><font color="#000080">.

</font><font color="#008000"><i>{----------------- end of PICK.PAS --------------------}




(********************************************************)
(******************** KEYB.PAS **************************)
(******* the keyboard unit; for GetKey() function *******)

</i></font><font color="#FF0000"><b>Unit </b></font>Keyb<font color="#000080">;

</font><font color="#FF0000"><b>Interface

Uses </b></font>Crt<font color="#000080">;

</font><font color="#FF0000"><b>Const
        </b></font>F1  <font color="#000080">= </font><font color="#800000">#187</font><font color="#000080">;
        </font>F2  <font color="#000080">= </font><font color="#800000">#188</font><font color="#000080">;
        </font>F3  <font color="#000080">= </font><font color="#800000">#189</font><font color="#000080">;
        </font>F4  <font color="#000080">= </font><font color="#800000">#190</font><font color="#000080">;
        </font>F5  <font color="#000080">= </font><font color="#800000">#191</font><font color="#000080">;
        </font>F6  <font color="#000080">= </font><font color="#800000">#192</font><font color="#000080">;
        </font>F7  <font color="#000080">= </font><font color="#800000">#193</font><font color="#000080">;
        </font>F8  <font color="#000080">= </font><font color="#800000">#194</font><font color="#000080">;
        </font>F9  <font color="#000080">= </font><font color="#800000">#195</font><font color="#000080">;
        </font>F10 <font color="#000080">= </font><font color="#800000">#196</font><font color="#000080">;

        </font>ALTF1  <font color="#000080">= </font><font color="#800000">#232</font><font color="#000080">;
        </font>ALTF2  <font color="#000080">= </font><font color="#800000">#233</font><font color="#000080">;
        </font>ALTF3  <font color="#000080">= </font><font color="#800000">#234</font><font color="#000080">;
        </font>ALTF4  <font color="#000080">= </font><font color="#800000">#235</font><font color="#000080">;
        </font>ALTF5  <font color="#000080">= </font><font color="#800000">#236</font><font color="#000080">;
        </font>ALTF6  <font color="#000080">= </font><font color="#800000">#237</font><font color="#000080">;
        </font>ALTF7  <font color="#000080">= </font><font color="#800000">#238</font><font color="#000080">;
        </font>ALTF8  <font color="#000080">= </font><font color="#800000">#239</font><font color="#000080">;
        </font>ALTF9  <font color="#000080">= </font><font color="#800000">#240</font><font color="#000080">;
        </font>ALTF10 <font color="#000080">= </font><font color="#800000">#241</font><font color="#000080">;

        </font>CTRLF1        <font color="#000080">= </font><font color="#800000">#222</font><font color="#000080">;
        </font>CTRLF2        <font color="#000080">= </font><font color="#800000">#223</font><font color="#000080">;
        </font>CTRLF3        <font color="#000080">= </font><font color="#800000">#224</font><font color="#000080">;
        </font>CTRLF4        <font color="#000080">= </font><font color="#800000">#225</font><font color="#000080">;
        </font>CTRLF5        <font color="#000080">= </font><font color="#800000">#226</font><font color="#000080">;
        </font>CTRLF6        <font color="#000080">= </font><font color="#800000">#227</font><font color="#000080">;
        </font>CTRLF7        <font color="#000080">= </font><font color="#800000">#228</font><font color="#000080">;
        </font>CTRLF8        <font color="#000080">= </font><font color="#800000">#229</font><font color="#000080">;
        </font>CTRLF9        <font color="#000080">= </font><font color="#800000">#230</font><font color="#000080">;
        </font>CTRLF10 <font color="#000080">= </font><font color="#800000">#231</font><font color="#000080">;

        </font>SHFTF1        <font color="#000080">= </font><font color="#800000">#212</font><font color="#000080">;
        </font>SHFTF2        <font color="#000080">= </font><font color="#800000">#213</font><font color="#000080">;
        </font>SHFTF3        <font color="#000080">= </font><font color="#800000">#214</font><font color="#000080">;
        </font>SHFTF4        <font color="#000080">= </font><font color="#800000">#215</font><font color="#000080">;
        </font>SHFTF5        <font color="#000080">= </font><font color="#800000">#216</font><font color="#000080">;
        </font>SHFTF6        <font color="#000080">= </font><font color="#800000">#217</font><font color="#000080">;
        </font>SHFTF7        <font color="#000080">= </font><font color="#800000">#218</font><font color="#000080">;
        </font>SHFTF8        <font color="#000080">= </font><font color="#800000">#219</font><font color="#000080">;
        </font>SHFTF9        <font color="#000080">= </font><font color="#800000">#220</font><font color="#000080">;
        </font>SHFTF10 <font color="#000080">= </font><font color="#800000">#221</font><font color="#000080">;

        </font>UPARROW    <font color="#000080">= </font><font color="#800000">#200</font><font color="#000080">;
        </font>RIGHTARROW <font color="#000080">= </font><font color="#800000">#205</font><font color="#000080">;
        </font>LEFTARROW  <font color="#000080">= </font><font color="#800000">#203</font><font color="#000080">;
        </font>DOWNARROW  <font color="#000080">= </font><font color="#800000">#208</font><font color="#000080">;

        </font>HOME           <font color="#000080">= </font><font color="#800000">#199</font><font color="#000080">;
        </font>PGUP           <font color="#000080">= </font><font color="#800000">#201</font><font color="#000080">;
        </font>ENDKEY           <font color="#000080">= </font><font color="#800000">#207</font><font color="#000080">;
        </font>PGDN           <font color="#000080">= </font><font color="#800000">#209</font><font color="#000080">;
        </font>INS                      <font color="#000080">= </font><font color="#800000">#210</font><font color="#000080">;
        </font>DEL                      <font color="#000080">= </font><font color="#800000">#211</font><font color="#000080">;
        </font>TAB                      <font color="#000080">= </font><font color="#800000">#9</font><font color="#000080">;
        </font>ESC                      <font color="#000080">= </font><font color="#800000">#27</font><font color="#000080">;
        </font>ENTER           <font color="#000080">= </font><font color="#800000">#13</font><font color="#000080">;
        </font>SYSREQ           <font color="#000080">= </font><font color="#800000">#183</font><font color="#000080">;
        </font>CTRLMINUS  <font color="#000080">= </font><font color="#800000">#31</font><font color="#000080">;
        </font>SPACE           <font color="#000080">= </font><font color="#800000">#32</font><font color="#000080">;
        </font>CTRL2           <font color="#000080">= </font><font color="#800000">#129</font><font color="#000080">;
        </font>CTRL6           <font color="#000080">= </font><font color="#800000">#30</font><font color="#000080">;
        </font>BACKSPACE  <font color="#000080">= </font><font color="#800000">#8</font><font color="#000080">;
        </font>BS                      <font color="#000080">= </font><font color="#800000">#8</font><font color="#000080">; </font><font color="#008000"><i>{2 NAMES FOR BACKSPACE}

        </i></font>CTRLBACKSLASH         <font color="#000080">= </font><font color="#800000">#28</font><font color="#000080">;
        </font>CTRLLEFTBRACKET  <font color="#000080">= </font><font color="#800000">#27</font><font color="#000080">;
        </font>CTRLRIGHTBRACKET <font color="#000080">= </font><font color="#800000">#29</font><font color="#000080">;
        </font>CTRLBACKSPACE         <font color="#000080">= </font><font color="#800000">#127</font><font color="#000080">;
        </font>CTRLBS                          <font color="#000080">= </font><font color="#800000">#127</font><font color="#000080">;

        </font>ALTA <font color="#000080">= </font><font color="#800000">#158</font><font color="#000080">;
        </font>ALTB <font color="#000080">= </font><font color="#800000">#176</font><font color="#000080">;
        </font>ALTC <font color="#000080">= </font><font color="#800000">#174</font><font color="#000080">;
        </font>ALTD <font color="#000080">= </font><font color="#800000">#160</font><font color="#000080">;
        </font>ALTE <font color="#000080">= </font><font color="#800000">#146</font><font color="#000080">;
        </font>ALTF <font color="#000080">= </font><font color="#800000">#161</font><font color="#000080">;
        </font>ALTG <font color="#000080">= </font><font color="#800000">#162</font><font color="#000080">;
        </font>ALTH <font color="#000080">= </font><font color="#800000">#163</font><font color="#000080">;
        </font>ALTI <font color="#000080">= </font><font color="#800000">#151</font><font color="#000080">;
        </font>ALTJ <font color="#000080">= </font><font color="#800000">#164</font><font color="#000080">;
        </font>ALTK <font color="#000080">= </font><font color="#800000">#165</font><font color="#000080">;
        </font>ALTL <font color="#000080">= </font><font color="#800000">#166</font><font color="#000080">;
        </font>ALTM <font color="#000080">= </font><font color="#800000">#178</font><font color="#000080">;
        </font>ALTN <font color="#000080">= </font><font color="#800000">#177</font><font color="#000080">;
        </font>ALTO <font color="#000080">= </font><font color="#800000">#152</font><font color="#000080">;
        </font>ALTP <font color="#000080">= </font><font color="#800000">#153</font><font color="#000080">;
        </font>ALTQ <font color="#000080">= </font><font color="#800000">#144</font><font color="#000080">;
        </font>ALTR <font color="#000080">= </font><font color="#800000">#147</font><font color="#000080">;
        </font>ALTS <font color="#000080">= </font><font color="#800000">#159</font><font color="#000080">;
        </font>ALTT <font color="#000080">= </font><font color="#800000">#148</font><font color="#000080">;
        </font>ALTU <font color="#000080">= </font><font color="#800000">#150</font><font color="#000080">;
        </font>ALTV <font color="#000080">= </font><font color="#800000">#175</font><font color="#000080">;
        </font>ALTW <font color="#000080">= </font><font color="#800000">#145</font><font color="#000080">;
        </font>ALTX <font color="#000080">= </font><font color="#800000">#173</font><font color="#000080">;
        </font>ALTY <font color="#000080">= </font><font color="#800000">#149</font><font color="#000080">;
        </font>ALTZ <font color="#000080">= </font><font color="#800000">#172</font><font color="#000080">;

        </font>CTRLA <font color="#000080">= </font><font color="#800000">#1</font><font color="#000080">;
        </font>CTRLB <font color="#000080">= </font><font color="#800000">#2</font><font color="#000080">;
        </font>CTRLC <font color="#000080">= </font><font color="#800000">#3</font><font color="#000080">;
        </font>CTRLD <font color="#000080">= </font><font color="#800000">#4</font><font color="#000080">;
        </font>CTRLE <font color="#000080">= </font><font color="#800000">#5</font><font color="#000080">;
        </font>CTRLF <font color="#000080">= </font><font color="#800000">#6</font><font color="#000080">;
        </font>CTRLG <font color="#000080">= </font><font color="#800000">#7</font><font color="#000080">;
        </font>CTRLH <font color="#000080">= </font><font color="#800000">#8</font><font color="#000080">;
        </font>CTRLI <font color="#000080">= </font><font color="#800000">#9</font><font color="#000080">;
        </font>CTRLJ <font color="#000080">= </font><font color="#800000">#10</font><font color="#000080">;
        </font>CTRLK <font color="#000080">= </font><font color="#800000">#11</font><font color="#000080">;
        </font>CTRLL <font color="#000080">= </font><font color="#800000">#12</font><font color="#000080">;
        </font>CTRLM <font color="#000080">= </font><font color="#800000">#13</font><font color="#000080">;
        </font>CTRLN <font color="#000080">= </font><font color="#800000">#14</font><font color="#000080">;
        </font>CTRLO <font color="#000080">= </font><font color="#800000">#15</font><font color="#000080">;
        </font>CTRLP <font color="#000080">= </font><font color="#800000">#16</font><font color="#000080">;
        </font>CTRLQ <font color="#000080">= </font><font color="#800000">#17</font><font color="#000080">;
        </font>CTRLR <font color="#000080">= </font><font color="#800000">#18</font><font color="#000080">;
        </font>CTRLS <font color="#000080">= </font><font color="#800000">#19</font><font color="#000080">;
        </font>CTRLT <font color="#000080">= </font><font color="#800000">#20</font><font color="#000080">;
        </font>CTRLU <font color="#000080">= </font><font color="#800000">#21</font><font color="#000080">;
        </font>CTRLV <font color="#000080">= </font><font color="#800000">#22</font><font color="#000080">;
        </font>CTRLW <font color="#000080">= </font><font color="#800000">#23</font><font color="#000080">;
        </font>CTRLX <font color="#000080">= </font><font color="#800000">#24</font><font color="#000080">;
        </font>CTRLY <font color="#000080">= </font><font color="#800000">#25</font><font color="#000080">;
        </font>CTRLZ <font color="#000080">= </font><font color="#800000">#26</font><font color="#000080">;

        </font>ALT1 <font color="#000080">= </font><font color="#800000">#248</font><font color="#000080">;
        </font>ALT2 <font color="#000080">= </font><font color="#800000">#249</font><font color="#000080">;
        </font>ALT3 <font color="#000080">= </font><font color="#800000">#250</font><font color="#000080">;
        </font>ALT4 <font color="#000080">= </font><font color="#800000">#251</font><font color="#000080">;
        </font>ALT5 <font color="#000080">= </font><font color="#800000">#252</font><font color="#000080">;
        </font>ALT6 <font color="#000080">= </font><font color="#800000">#253</font><font color="#000080">;
        </font>ALT7 <font color="#000080">= </font><font color="#800000">#254</font><font color="#000080">;
        </font>ALT8 <font color="#000080">= </font><font color="#800000">#255</font><font color="#000080">;
        </font>ALT9 <font color="#000080">= </font><font color="#800000">#167</font><font color="#000080">;
        </font>ALT0 <font color="#000080">= </font><font color="#800000">#168</font><font color="#000080">;

        </font>ALTMINUS <font color="#000080">= </font><font color="#800000">#169</font><font color="#000080">;
        </font>ALTEQ         <font color="#000080">= </font><font color="#800000">#170</font><font color="#000080">;
        </font>SHIFTTAB <font color="#000080">= </font><font color="#800000">#143</font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>GetKey <font color="#000080">: </font>Char<font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>unGetKey<font color="#000080">(</font>C <font color="#000080">: </font>char<font color="#000080">);
</font><font color="#FF0000"><b>procedure </b></font>FlushKbd<font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>flushBuffer<font color="#000080">;

</font><font color="#FF0000"><b>const
    </b></font>hasPushedChar   <font color="#000080">: </font>boolean <font color="#000080">= </font>false<font color="#000080">;

</font><font color="#FF0000"><b>implementation
var
    </b></font>pushedChar            <font color="#000080">: </font>char<font color="#000080">;


</font><font color="#008000"><i>(******************************************************************************
*                                  FlushKbd                                  *
******************************************************************************)
</i></font><font color="#FF0000"><b>procedure </b></font>FlushKbd<font color="#000080">;
</font><font color="#FF0000"><b>var
    </b></font>C        <font color="#000080">: </font>char<font color="#000080">;
</font><font color="#FF0000"><b>begin
    </b></font>hasPushedChar <font color="#000080">:= </font>False<font color="#000080">;
    </font><font color="#FF0000"><b>while </b></font><font color="#000080">(</font>KeyPressed<font color="#000080">) </font><font color="#FF0000"><b>do
         </b></font>C <font color="#000080">:= </font>GetKey<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{flushKbd}

(******************************************************************************
*                                 flushBuffer                                 *
* Same as above, but if key was pushed by eventMgr, know about it !!          *
******************************************************************************)
</i></font><font color="#FF0000"><b>procedure </b></font>flushBuffer<font color="#000080">;
</font><font color="#FF0000"><b>var
   </b></font>b <font color="#000080">: </font>boolean<font color="#000080">;
</font><font color="#FF0000"><b>begin
   </b></font>b <font color="#000080">:= </font>hasPushedChar<font color="#000080">;
   </font>flushKbd<font color="#000080">;
   </font>hasPushedChar <font color="#000080">:= </font>b<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{flushBuffer}


(******************************************************************************
*                                  unGetKey                                   *
* UnGetKey will put one character back in the input buffer. Push-back buffer  *
* can contain only one character.                                                                  *
* To avoid problems DO NOT CALL UNGETKEY WITHOUT FIRST CALLING GETKEY. If two *
* characters are pushed, the first is discarded.                                          *
******************************************************************************)
</i></font><font color="#FF0000"><b>procedure </b></font>unGetKey<font color="#000080">;
</font><font color="#FF0000"><b>begin
    </b></font>hasPushedChar <font color="#000080">:= </font>True<font color="#000080">;
    </font>pushedChar          <font color="#000080">:= </font>c<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{unGetKey}

(******************************************************************************
*                                   GetKey                                   *
******************************************************************************)
</i></font><font color="#FF0000"><b>function </b></font>GetKey <font color="#000080">: </font>Char<font color="#000080">;
</font><font color="#FF0000"><b>var
        </b></font>c <font color="#000080">: </font>Char<font color="#000080">;
</font><font color="#FF0000"><b>Begin
    if </b></font><font color="#000080">(</font>hasPushedChar<font color="#000080">) </font><font color="#FF0000"><b>then begin
                </b></font>GetKey              <font color="#000080">:= </font>pushedChar<font color="#000080">;
                </font>hasPushedChar <font color="#000080">:= </font>False<font color="#000080">;
                </font>exit<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>c <font color="#000080">:= </font>ReadKey<font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>Ord<font color="#000080">(</font>c<font color="#000080">) = </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then Begin
                </b></font>c <font color="#000080">:= </font>ReadKey<font color="#000080">;
                </font><font color="#FF0000"><b>if </b></font>c <font color="#FF0000"><b>in </b></font><font color="#000080">[</font><font color="#800000">#128</font><font color="#000080">,</font><font color="#800000">#129</font><font color="#000080">,</font><font color="#800000">#130</font><font color="#000080">,</font><font color="#800000">#131</font><font color="#000080">]
                    </font><font color="#FF0000"><b>then </b></font>c <font color="#000080">:= </font>chr<font color="#000080">(</font>ord<font color="#000080">(</font>c<font color="#000080">) + </font><font color="#800000">39</font><font color="#000080">)
                </font><font color="#FF0000"><b>else </b></font>c <font color="#000080">:= </font>chr<font color="#000080">(</font>ord<font color="#000080">(</font>c<font color="#000080">) + </font><font color="#800000">128</font><font color="#000080">); </font><font color="#008000"><i>{map to suit keyboard constants}
    </i></font><font color="#FF0000"><b>End</b></font><font color="#000080">;
    </font>GetKey <font color="#000080">:= </font>c<font color="#000080">; </font><font color="#008000"><i>{return keyboard (my..) code }
</i></font><font color="#FF0000"><b>End</b></font><font color="#000080">; </font><font color="#008000"><i>{getKey}

</i></font><font color="#FF0000"><b>End</b></font><font color="#000080">.
</font><font color="#008000"><i>{--------------- End of KEYB.PAS ---------------}


(********************************************************)
(************************** TEST.PAS ********************)
(*************** to test the PICK unit ******************)
(*************** quit by pressing ESCape ****************)

</i></font><font color="#FF0000"><b>Program </b></font>Test<font color="#000080">;

</font><font color="#FF0000"><b>uses </b></font>crt<font color="#000080">,</font>pick<font color="#000080">;

</font><font color="#008000"><i>{--------------- test program -----------------}
</i></font><font color="#FF0000"><b>const
</b></font>max <font color="#000080">= </font><font color="#800000">6</font><font color="#000080">;
</font>s <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font>max<font color="#000080">] </font><font color="#FF0000"><b>of string</b></font><font color="#000080">[</font><font color="#800000">18</font><font color="#000080">] =
(
</font><font color="#800000">'1. Number One '</font><font color="#000080">,
</font><font color="#800000">'2. Number Two '</font><font color="#000080">,
</font><font color="#800000">'3. Number Three '</font><font color="#000080">,
</font><font color="#800000">'4. Number Four '</font><font color="#000080">,
</font><font color="#800000">'5. Number Five '</font><font color="#000080">,
</font><font color="#800000">'6. Number Six '</font><font color="#000080">);

</font><font color="#FF0000"><b>var
</b></font>i  <font color="#000080">: </font>byte<font color="#000080">;
</font>x  <font color="#000080">: </font>byte<font color="#000080">;
</font>ch <font color="#000080">: </font>char<font color="#000080">;
</font>j  <font color="#000080">: </font>byte<font color="#000080">;

</font><font color="#FF0000"><b>begin
    </b></font>clrscr<font color="#000080">;
    </font>x <font color="#000080">:= </font><font color="#800000">10</font><font color="#000080">; </font><font color="#008000"><i>{left side of the list}


   {------------------------- test using PickByte() ----------------}
    </i></font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>max <font color="#FF0000"><b>do
    begin            </b></font><font color="#008000"><i>{display the list of menu items}
      </i></font>j <font color="#000080">:= </font>i<font color="#000080">+</font><font color="#800000">5</font><font color="#000080">;      </font><font color="#008000"><i>{start from row 6}
      </i></font>gotoxy<font color="#000080">(</font>x<font color="#000080">,</font>j<font color="#000080">);
      </font>writeln<font color="#000080">(</font>s<font color="#000080">[</font>i<font color="#000080">]);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

    </font>i <font color="#000080">:= </font>j<font color="#000080">;
    </font><font color="#FF0000"><b>repeat
      </b></font><font color="#008000"><i>{ch := choice(x,1,i);}
      </i></font>j <font color="#000080">:= </font>pickbyte<font color="#000080">(</font>x<font color="#000080">,</font><font color="#800000">6</font><font color="#000080">,</font>i<font color="#000080">);

      </font>gotoxy<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">22</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font><font color="#800000">'You chose '</font><font color="#000080">,</font>j<font color="#000080">);
    </font><font color="#FF0000"><b>until </b></font>j <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">; </font><font color="#008000"><i>{until Escape}

   {------------------------- test using PickChar() ----------------}
    </i></font>ClrScr<font color="#000080">;

    </font>ch <font color="#000080">:= </font><font color="#800000">'A'</font><font color="#000080">;
    </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>max <font color="#FF0000"><b>do
    begin
       </b></font>s<font color="#000080">[</font>i<font color="#000080">][</font><font color="#800000">1</font><font color="#000080">] := </font>Ch<font color="#000080">; </font><font color="#008000"><i>{change numbers to letters in menu list}
       </i></font>Inc<font color="#000080">(</font>Ch<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

    </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>max <font color="#FF0000"><b>do
    begin            </b></font><font color="#008000"><i>{display the list of menu items}
      </i></font>gotoxy<font color="#000080">(</font>x<font color="#000080">,</font>i<font color="#000080">);   </font><font color="#008000"><i>{start from row 1}
      </i></font>writeln<font color="#000080">(</font>s<font color="#000080">[</font>i<font color="#000080">]);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

    </font><font color="#FF0000"><b>repeat
      </b></font>ch <font color="#000080">:= </font>PickChar<font color="#000080">(</font>x<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font>i<font color="#000080">);
      </font>gotoxy<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">22</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font><font color="#800000">'You chose '</font><font color="#000080">,</font>ch<font color="#000080">);
    </font><font color="#FF0000"><b>until </b></font>ch <font color="#000080">= </font><font color="#800000">#27</font><font color="#000080">;  </font><font color="#008000"><i>{until Escape}

</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font><font color="#008000"><i>{------------------------ end of TEST.PAS ---------------------------}
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to MISC SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0061.PAS">Original</a><b>]</b></p></body>
</html>
