<html>
<head><title> "Debugger Trap" by KARL HEINZ KREMER</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to MISC SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0170.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
RH&gt;I am looking for source to catch someone who is debugging my program.

What do you think about this ...

I don't write it and sorry for the German, but it works OK.
Just include it into your included units, when someone tries to debug your
program, it reboots.
}

</i></font><font color="#FF0000"><b>UNIT </b></font>NoDebug<font color="#000080">;

</font><font color="#008000"><i>{ ************************* }
{ Aus c't 2/90 Seite 186    }
{ (c) by Karl Heinz Kremer  }
{ ************************* }

</i></font><font color="#FF0000"><b>INTERFACE

</b></font><font color="#008000"><i>{ Hier gibt's nichts zu exportieren }

</i></font><font color="#FF0000"><b>IMPLEMENTATION

USES </b></font>DOS<font color="#000080">,</font>CRT<font color="#000080">;

</font><font color="#FF0000"><b>VAR
  </b></font>OldInt1<font color="#000080">, </font>OldInt3<font color="#000080">,        </font><font color="#008000"><i>{ Die alten Interruptvektoren }
  </i></font>ExitSave <font color="#000080">: </font>POINTER<font color="#000080">;      </font><font color="#008000"><i>{ Speicher fÅr die alte Exit-Prozedur }


</i></font><font color="#FF0000"><b>PROCEDURE </b></font>REBOOT<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  Inline</b></font><font color="#000080">(</font><font color="#800000">$b8</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/</font><font color="#800000">$f0</font><font color="#000080">/
         </font><font color="#800000">$50</font><font color="#000080">/
         </font><font color="#800000">$b8</font><font color="#000080">/</font><font color="#800000">$5b</font><font color="#000080">/</font><font color="#800000">$e0</font><font color="#000080">/
         </font><font color="#800000">$50</font><font color="#000080">/
         </font><font color="#800000">$b8</font><font color="#000080">/</font><font color="#800000">$40</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/
         </font><font color="#800000">$8e</font><font color="#000080">/</font><font color="#800000">$d8</font><font color="#000080">/
         </font><font color="#800000">$c7</font><font color="#000080">/</font><font color="#800000">$06</font><font color="#000080">/</font><font color="#800000">$72</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/</font><font color="#800000">$34</font><font color="#000080">/</font><font color="#800000">$12</font><font color="#000080">/</font><font color="#800000">$cb</font><font color="#000080">);
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>DoNotDebug<font color="#000080">; </font>INTERRUPT<font color="#000080">;       </font><font color="#008000"><i>{ neue Int1 und Int3 Prozedur }
</i></font><font color="#FF0000"><b>BEGIN
  </b></font>reboot<font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#008000"><i>{$F+}
</i></font><font color="#FF0000"><b>PROCEDURE </b></font>ResetNoDebug<font color="#000080">;
</font><font color="#008000"><i>{$F-}
</i></font><font color="#FF0000"><b>BEGIN                           </b></font><font color="#008000"><i>{ Neue Exit-Prozedur }
  </i></font>SetIntVec<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font>OldInt1<font color="#000080">);         </font><font color="#008000"><i>{ Interruptvektoren zurÅcksetzen }
  </i></font>SetIntVec<font color="#000080">(</font><font color="#800000">3</font><font color="#000080">,</font>OldInt3<font color="#000080">);
  </font>ExitProc<font color="#000080">:=</font>ExitSave<font color="#000080">;           </font><font color="#008000"><i>{ Zeiger auf alte Exit-Prozedur }
</i></font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>BEGIN
  </b></font>ExitSave<font color="#000080">:=</font>ExitProc<font color="#000080">;           </font><font color="#008000"><i>{ alte Exit Prozedur speichern }
  </i></font>ExitProc<font color="#000080">:=@</font>ResetNoDebug<font color="#000080">;      </font><font color="#008000"><i>{ neue Exit Prozedur setzen }
  </i></font>GetIntVec<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font>OldInt1<font color="#000080">);         </font><font color="#008000"><i>{ Int-Vektoren speichern }
  </i></font>GetIntVec<font color="#000080">(</font><font color="#800000">3</font><font color="#000080">,</font>OldInt3<font color="#000080">);
  </font>SetIntVec<font color="#000080">(</font><font color="#800000">3</font><font color="#000080">,@</font>DoNotdebug<font color="#000080">);     </font><font color="#008000"><i>{ Int-Vektoren neu setzen }
  </i></font>SetIntVec<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,@</font>DoNotdebug<font color="#000080">);
</font><font color="#FF0000"><b>END</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to MISC SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0170.PAS">Original</a><b>]</b></p></body>
</html>
