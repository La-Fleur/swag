<html>
<head><title> "Earth Invaders Game" by SCOTT TUNSTALL</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to MISC SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0182.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
========================================================

       EARTH INVADERS (Original LCD game by CGL 1982..)
       (I feel a copyright wangle coming on - NOT!)

--------------------------------------------------------

PC CONVERSION EXCLUSIVELY FOR SWAG, BY SCOTT TUNSTALL 1996
   (But why? ;) )

Reqs: Turbo Pascal 5.5 +
      CGA
      Good technique in chatting up women


==========

DISCLAIMER

----------

I (Scott Tunstall) am not responsible if this program causes any
damage to ANY hardware or software part of the computer system it
runs on or detriment to mental health caused (finding any bugs I
may have missed) OK?.

You can alter/delete or even ADD (if you're sad enough) new bits
to the program just as long as I am credited with the ORIGINAL
version. You are not permitted to distribute the original or
changed code for monetary gain however.



========

FORENOTE

--------

I was playing a hand held LCD game one saturday and it was actually
simple to play, yet quite addictive. Unusual for a hand held.

Anyway, being the sad idiot that I am, I decided to convert it to
Pascal, and give y' all a taste of the game. Hope you enjoy playing
it, I certainly almost did ! (in between debugging)



========

THE GAME

--------

Aliens appear on the screen, you must dig holes for them to fall in.
If an alien falls in you must bury it in the hole, but beware! If
an alien touches an alien in a hole it is helped out and will jump
at the human!!!

Maybe, I will write a two player version of this game. After the Bsc,
perhaps?.



Keys are (until I write a define key routine)

CTRL = Dig hole
ALT  = Fill hole in (to kill an alien you do this)

CURSOR UP    = Move up
CURSOR DOWN  = Move down
CURSOR LEFT  = Move left
CURSOR RIGHT = Move right


Err... your guy is represented by a 'x' and the aliens are all 's (until
I actually draw up some GFX! (Knowing me - NEVER!).

Hell, what do you want from me, SVGA? ;^)



=============

FOR YOU TO DO

-------------

Add a title screen
Better sound (even samples)
Check if all aliens are dead
2/3/4 player mode
A lager drinking section.... (please! I've always wanted to see a game
                              with this in it!)




=====

NOTES

-----

NewKbdInt (The Multiple key reader) is appended to the bottom of
this source so it can be compiled. I didn't write it - Lou Duchez
did. Credits to him....

}




</i></font><font color="#FF0000"><b>uses </b></font>crt<font color="#000080">, </font>nwkbdint<font color="#000080">;     </font><font color="#008000"><i>{ Present in the SWAG }




{

All objects are mapped directly to the map,
no external data types are used to contain Aliens X,Y coordinates



0 = Empty
1 = Wall
2 = Human
3 = Quarter Dug Hole 1
4 = Half Dug Hole 2
5 = Three Quarter Dug Hole 3
6 = Fully Dug Hole

20..40 = Alien (In various stages of falling.. 40 = Not inhole)
}




</i></font><font color="#FF0000"><b>const </b></font>Empty               <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">;
      </font>Wall                <font color="#000080">= </font><font color="#800000">1</font><font color="#000080">;
      </font>Human               <font color="#000080">= </font><font color="#800000">2</font><font color="#000080">;
      </font>QuarterDugHole      <font color="#000080">= </font><font color="#800000">3</font><font color="#000080">;
      </font>HalfDugHole         <font color="#000080">= </font><font color="#800000">4</font><font color="#000080">;
      </font>ThreeQuarterDugHole <font color="#000080">= </font><font color="#800000">5</font><font color="#000080">;
      </font>FullyDugHole        <font color="#000080">= </font><font color="#800000">6</font><font color="#000080">;

      </font>AlienFilledIn         <font color="#000080">= </font><font color="#800000">19</font><font color="#000080">;
      </font>AlienCompletelyBuried <font color="#000080">= </font><font color="#800000">30</font><font color="#000080">;
      </font>AlienBeginsClimbOut   <font color="#000080">= </font><font color="#800000">36</font><font color="#000080">;
      </font>AlienAlmostBuried     <font color="#000080">= </font><font color="#800000">40</font><font color="#000080">;
      </font>AlienHalfBuried       <font color="#000080">= </font><font color="#800000">50</font><font color="#000080">;
      </font>NormalAlien           <font color="#000080">= </font><font color="#800000">70</font><font color="#000080">;
      </font>AlienTripped          <font color="#000080">= </font>NormalAlien<font color="#000080">-</font><font color="#800000">5</font><font color="#000080">;

      </font>Amateur             <font color="#000080">= </font><font color="#800000">1</font><font color="#000080">;
      </font>Pro                 <font color="#000080">= </font><font color="#800000">2</font><font color="#000080">;
      </font>Kamikaze            <font color="#000080">= </font><font color="#800000">3</font><font color="#000080">;  </font><font color="#008000"><i>{ Not implemented, Pro is hard enough! }

      </i></font>UpKey               <font color="#000080">= </font><font color="#800000">72</font><font color="#000080">;
      </font>DownKey             <font color="#000080">= </font><font color="#800000">80</font><font color="#000080">;
      </font>LeftKey             <font color="#000080">= </font><font color="#800000">75</font><font color="#000080">;
      </font>RightKey            <font color="#000080">= </font><font color="#800000">77</font><font color="#000080">;
      </font>DigKey              <font color="#000080">= </font><font color="#800000">29</font><font color="#000080">;
      </font>FillKey             <font color="#000080">= </font><font color="#800000">56</font><font color="#000080">;





</font><font color="#FF0000"><b>var </b></font>map         <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">7</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">5</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;    </font><font color="#008000"><i>{ Playfield }
    </i></font>killedplayer  <font color="#000080">: </font>boolean<font color="#000080">;
    </font>SkillLevel  <font color="#000080">: </font>byte<font color="#000080">;
    </font>GameLevel   <font color="#000080">: </font>byte<font color="#000080">;
    </font>GameSpeed   <font color="#000080">: </font>byte<font color="#000080">;
    </font>AlienPause  <font color="#000080">: </font>byte<font color="#000080">;


    </font>HumanX<font color="#000080">, </font>HumanY <font color="#000080">: </font>byte<font color="#000080">;
    </font>Currx<font color="#000080">,</font>Curry <font color="#000080">: </font>byte<font color="#000080">;





</font><font color="#FF0000"><b>type </b></font>AlienInfo      <font color="#000080">= </font><font color="#FF0000"><b>record
     </b></font>AlienState     <font color="#000080">: </font>byte<font color="#000080">;
     </font>AlienX<font color="#000080">, </font>AlienY <font color="#000080">: </font>byte<font color="#000080">;
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;




</font><font color="#008000"><i>{
The following values are written to the map, the values contained
may be:

0 = Empty
1 = Wall
2 = Human
3 = Quarter Dug Hole 1
4 = Half Dug Hole 2
5 = Three Quarter Dug Hole 3
6 = Fully Dug Hole

20 + = Reserved for aliens, see constants above


Therefore, if map[1,1] was 3 then that means a Quarter Dug hole
is at the top left of the map.

}










</i></font><font color="#FF0000"><b>procedure </b></font>initmap<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>x<font color="#000080">:</font>byte<font color="#000080">;
    </font>y<font color="#000080">:</font>byte<font color="#000080">;

</font><font color="#FF0000"><b>begin
     </b></font><font color="#008000"><i>{
     Erase all of map. If you're sad enough, like me, then you
     could design small maps, or even extend 'em to fill the
     entire screen.
     }


     </i></font><font color="#FF0000"><b>for </b></font>y<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">5 </font><font color="#FF0000"><b>do
         for </b></font>x<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">7 </font><font color="#FF0000"><b>do
         </b></font>map<font color="#000080">[</font>x<font color="#000080">,</font>y<font color="#000080">]:=</font>empty<font color="#000080">;

     </font><font color="#008000"><i>{
     Set Walls
     }


     </i></font><font color="#FF0000"><b>for </b></font>x<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">3 </font><font color="#FF0000"><b>do
         begin
         </b></font>map<font color="#000080">[</font>x <font color="#000080">*</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">]:=</font>Wall<font color="#000080">;
         </font>map<font color="#000080">[</font>x <font color="#000080">*</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">4</font><font color="#000080">]:=</font>Wall<font color="#000080">;
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

     </font><font color="#008000"><i>{
     Determine game speed
     }

     </i></font><font color="#FF0000"><b>case </b></font>SkillLevel <font color="#FF0000"><b>of
     </b></font>Amateur  <font color="#000080">: </font>GameSpeed<font color="#000080">:=</font><font color="#800000">6</font><font color="#000080">;
     </font>Pro      <font color="#000080">: </font>GameSpeed<font color="#000080">:=</font><font color="#800000">2</font><font color="#000080">;    </font><font color="#008000"><i>{ Life expectancy - 3 seconds }
     </i></font>Kamikaze <font color="#000080">: </font>GameSpeed<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;    </font><font color="#008000"><i>{ Life expectancy - NIL! }
     </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

     </font>AlienPause<font color="#000080">:=</font>GameSpeed<font color="#000080">;


     </font><font color="#008000"><i>{
     Now place aliens
     }



     </i></font><font color="#FF0000"><b>for </b></font>x<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">3 </font><font color="#FF0000"><b>do
         </b></font>map<font color="#000080">[</font>x<font color="#000080">*</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">]:=</font>NormalAlien<font color="#000080">;

     </font><font color="#FF0000"><b>if </b></font>gamelevel <font color="#000080">&gt; </font><font color="#800000">1 </font><font color="#FF0000"><b>then
        begin
        </b></font>map<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">]:=</font>NormalAlien<font color="#000080">;
        </font>map<font color="#000080">[</font><font color="#800000">6</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">]:=</font>NormalAlien<font color="#000080">;
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;


     </font><font color="#FF0000"><b>if </b></font>gamelevel <font color="#000080">&gt; </font><font color="#800000">2 </font><font color="#FF0000"><b>then
        </b></font>map<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">]:=</font>NormalAlien<font color="#000080">;


     </font><font color="#008000"><i>{
     Place human
     }

     </i></font>HumanX<font color="#000080">:=</font><font color="#800000">4</font><font color="#000080">;
     </font>HumanY<font color="#000080">:=</font><font color="#800000">5</font><font color="#000080">;

     </font>map<font color="#000080">[</font>HumanX<font color="#000080">,</font>HumanY<font color="#000080">]:=</font>Human<font color="#000080">;

</font><font color="#FF0000"><b>end</b></font><font color="#000080">;





</font><font color="#008000"><i>{ The following 2 procedures are NOT mine; they were written by
  Robert E. Swart and cut and pasted to this routine

  I modified these routines for my own use!
}



</i></font><font color="#FF0000"><b>procedure </b></font>Lines200<font color="#000080">;
    </font><font color="#008000"><i>{ Set 200 scanlines on VGA display }
    </i></font><font color="#FF0000"><b>InLine</b></font><font color="#000080">(
      </font><font color="#800000">$B8</font><font color="#000080">/</font><font color="#800000">$01</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/  </font><font color="#008000"><i>{  mov   AX,$0001  }
      </i></font><font color="#800000">$CD</font><font color="#000080">/</font><font color="#800000">$10</font><font color="#000080">/      </font><font color="#008000"><i>{  int   $10       }
      </i></font><font color="#800000">$B8</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/</font><font color="#800000">$12</font><font color="#000080">/  </font><font color="#008000"><i>{  mov   AX,$1200  }
      </i></font><font color="#800000">$B3</font><font color="#000080">/</font><font color="#800000">$30</font><font color="#000080">/      </font><font color="#008000"><i>{  mov   BL,$30    }
      </i></font><font color="#800000">$CD</font><font color="#000080">/</font><font color="#800000">$10</font><font color="#000080">);     </font><font color="#008000"><i>{  int   $10       }


    </i></font><font color="#FF0000"><b>procedure </b></font>Font8x16<font color="#000080">;
    </font><font color="#008000"><i>{ Set 8x16 VGA-font on VGA display }
    </i></font><font color="#FF0000"><b>InLine</b></font><font color="#000080">(
      </font><font color="#800000">$B8</font><font color="#000080">/</font><font color="#800000">$01</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/  </font><font color="#008000"><i>{  mov   AX,$0001  }
      </i></font><font color="#800000">$CD</font><font color="#000080">/</font><font color="#800000">$10</font><font color="#000080">/      </font><font color="#008000"><i>{  int   $10       }
      </i></font><font color="#800000">$B8</font><font color="#000080">/</font><font color="#800000">$14</font><font color="#000080">/</font><font color="#800000">$11</font><font color="#000080">/  </font><font color="#008000"><i>{  mov   AX,$1114  }
      </i></font><font color="#800000">$B3</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/      </font><font color="#008000"><i>{  mov   BL,0      }
      </i></font><font color="#800000">$CD</font><font color="#000080">/</font><font color="#800000">$10</font><font color="#000080">);     </font><font color="#008000"><i>{  int   $10       }







</i></font><font color="#FF0000"><b>procedure </b></font>SetCurPos<font color="#000080">(</font>newx<font color="#000080">, </font>newy<font color="#000080">: </font>byte<font color="#000080">);
</font><font color="#FF0000"><b>begin
     </b></font>currx<font color="#000080">:=</font>newx<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">;             </font><font color="#008000"><i>{ Conv phys to log }
     </i></font>curry<font color="#000080">:=</font>newy<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;



</font><font color="#008000"><i>{ Faster than using the write command for only one char }

</i></font><font color="#FF0000"><b>procedure </b></font>text<font color="#000080">(</font>TheChar<font color="#000080">: </font>char<font color="#000080">; </font>TheColour<font color="#000080">: </font>byte<font color="#000080">);
</font><font color="#FF0000"><b>begin
     </b></font>memw<font color="#000080">[</font><font color="#800000">$b800</font><font color="#000080">: (</font>curry <font color="#000080">* </font><font color="#800000">80</font><font color="#000080">) + (</font>currx <font color="#FF0000"><b>SHL </b></font><font color="#800000">1</font><font color="#000080">)]:=</font>word <font color="#000080">(</font>ord<font color="#000080">(</font>TheChar<font color="#000080">)+(</font>TheColour <font color="#FF0000"><b>SHL </b></font><font color="#800000">8</font><font color="#000080">));
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;








</font><font color="#008000"><i>{
====================================================================

Draw the game screen.

Note: All of the aliens actually exist on map, they are not simply
sprites overlaid on the map during draw time, so in theory you could
fill the entire map with aliens.... Have fun!

--------------------------------------------------------------------
}



</i></font><font color="#FF0000"><b>procedure </b></font>DrawMap<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>x<font color="#000080">, </font>y <font color="#000080">: </font>byte<font color="#000080">;

</font><font color="#FF0000"><b>begin
     for </b></font>y<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">5 </font><font color="#FF0000"><b>do
         for </b></font>x<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">7 </font><font color="#FF0000"><b>do
         begin
         </b></font>SetCurPos<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">);

         </font><font color="#FF0000"><b>case </b></font>map<font color="#000080">[</font>x<font color="#000080">,</font>y<font color="#000080">] </font><font color="#FF0000"><b>of
         </b></font>Empty               <font color="#000080">: </font>text<font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">, </font>BLACK<font color="#000080">);
         </font>Wall                <font color="#000080">: </font>text<font color="#000080">(</font><font color="#800000">'#'</font><font color="#000080">, </font>BLUE<font color="#000080">);
         </font>Human               <font color="#000080">: </font>text<font color="#000080">(</font><font color="#800000">'x'</font><font color="#000080">, </font>RED<font color="#000080">);
</font>AlienCompletelyBuried<font color="#000080">..
(</font>AlienBeginsClimbOut<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">)      : </font>text<font color="#000080">(</font><font color="#800000">#1</font><font color="#000080">, </font>random<font color="#000080">(</font><font color="#800000">7</font><font color="#000080">) </font><font color="#FF0000"><b>OR </b></font><font color="#800000">1</font><font color="#000080">);

</font>AlienBeginsClimbout<font color="#000080">..
(</font>NormalAlien<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">)              : </font>text<font color="#000080">(</font><font color="#800000">#1</font><font color="#000080">, </font>GREEN<font color="#000080">);

         </font>NormalAlien         <font color="#000080">: </font>text<font color="#000080">(</font><font color="#800000">#2</font><font color="#000080">, </font>GREEN<font color="#000080">);
         </font>QuarterDugHole      <font color="#000080">: </font>text<font color="#000080">(</font><font color="#800000">'.'</font><font color="#000080">,</font>LIGHTGRAY<font color="#000080">);

         </font>HalfDugHole<font color="#000080">,
         </font>ThreeQuarterDugHole <font color="#000080">: </font>text<font color="#000080">(</font><font color="#800000">'o'</font><font color="#000080">, </font>LIGHTGRAY<font color="#000080">);
         </font>FullyDugHole        <font color="#000080">: </font>text<font color="#000080">(</font><font color="#800000">'O'</font><font color="#000080">,</font>LIGHTGRAY<font color="#000080">);
         </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;







</font><font color="#008000"><i>{
==============================================================

Free an alien that may be trapped at maybex, maybey on the map


--------------------------------------------------------------
}



</i></font><font color="#FF0000"><b>Procedure </b></font>ReleaseAlien<font color="#000080">(</font>maybex<font color="#000080">, </font>maybey<font color="#000080">: </font>byte<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>TheObject<font color="#000080">: </font>byte<font color="#000080">;

</font><font color="#FF0000"><b>begin
     if </b></font><font color="#000080">(</font>maybex <font color="#000080">&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>maybex <font color="#000080">&lt; </font><font color="#800000">8</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>maybey <font color="#000080">&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>maybey <font color="#000080">&lt; </font><font color="#800000">6</font><font color="#000080">) </font><font color="#FF0000"><b>then
        begin
        </b></font>theObject<font color="#000080">:=</font>map<font color="#000080">[</font>maybex<font color="#000080">, </font>maybey<font color="#000080">];
        </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>theObject<font color="#000080">&gt; </font>AlienFilledIn<font color="#000080">) </font><font color="#FF0000"><b>And
           </b></font><font color="#000080">(</font>theobject <font color="#000080">&lt; </font>NormalAlien<font color="#000080">) </font><font color="#FF0000"><b>Then
           </b></font>map<font color="#000080">[</font>maybex<font color="#000080">, </font>maybey<font color="#000080">]:=</font>NormalAlien<font color="#000080">;
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;










</font><font color="#FF0000"><b>procedure </b></font>MoveAliens<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>AlienArray        <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">10</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>AlienInfo<font color="#000080">;
    </font>x<font color="#000080">, </font>y<font color="#000080">, </font>TheObject   <font color="#000080">: </font>byte<font color="#000080">;
    </font>index             <font color="#000080">: </font>byte<font color="#000080">;
    </font>noblank           <font color="#000080">: </font>boolean<font color="#000080">;
    </font>NewDir<font color="#000080">,
    </font>NewXp<font color="#000080">,
    </font>NewYp<font color="#000080">,
    </font>ObjectHit         <font color="#000080">: </font>byte<font color="#000080">;


</font><font color="#FF0000"><b>begin
     </b></font>dec<font color="#000080">(</font>AlienPause<font color="#000080">);
     </font><font color="#FF0000"><b>if </b></font>AlienPause <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>Then

     </b></font><font color="#008000"><i>{ Find all aliens on the map, and remember where they
       are so they can be moved later.
     }


         </i></font><font color="#FF0000"><b>Begin
         </b></font>AlienPause<font color="#000080">:=</font>GameSpeed<font color="#000080">;

         </font>index<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;
         </font><font color="#FF0000"><b>For </b></font>y<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">5 </font><font color="#FF0000"><b>do
             For </b></font>x<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">7 </font><font color="#FF0000"><b>do
                 begin
                 </b></font>TheObject<font color="#000080">:=</font>map<font color="#000080">[</font>x<font color="#000080">,</font>y<font color="#000080">];
                 </font><font color="#FF0000"><b>If </b></font><font color="#000080">(</font>TheObject <font color="#000080">&gt;=</font>AlienCompletelyBuried<font color="#000080">) </font><font color="#FF0000"><b>And
                    </b></font><font color="#000080">(</font>TheObject <font color="#000080">&lt;=</font>NormalAlien<font color="#000080">) </font><font color="#FF0000"><b>Then
                    With </b></font>AlienArray<font color="#000080">[</font>index<font color="#000080">] </font><font color="#FF0000"><b>do
                    Begin
                    </b></font>AlienState <font color="#000080">:=</font>TheObject<font color="#000080">;
                    </font>AlienX     <font color="#000080">:=</font>x<font color="#000080">;
                    </font>AlienY     <font color="#000080">:=</font>y<font color="#000080">;
                    </font>Inc<font color="#000080">(</font>index<font color="#000080">);
                    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

             </font><font color="#FF0000"><b>end</b></font><font color="#000080">;


         </font><font color="#008000"><i>{ Now that an array of aliens has been built up,
           move em out! Also note x is being re-used. }

         </i></font><font color="#FF0000"><b>for </b></font>x<font color="#000080">:=(</font>index<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>downto </b></font><font color="#800000">1 </font><font color="#FF0000"><b>do
         With </b></font>AlienArray<font color="#000080">[</font>x<font color="#000080">] </font><font color="#FF0000"><b>do
             begin
             if </b></font>AlienState <font color="#000080">= </font>NormalAlien <font color="#FF0000"><b>Then
                Begin

                </b></font><font color="#008000"><i>{ An alien can free it's trapped brother }

                </i></font>releasealien<font color="#000080">(</font>AlienX<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">,</font>AlienY<font color="#000080">);
                </font>releasealien<font color="#000080">(</font>AlienX<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,</font>AlienY<font color="#000080">);
                </font>releasealien<font color="#000080">(</font>AlienX<font color="#000080">,</font>AlienY<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">);
                </font>releasealien<font color="#000080">(</font>AlienX<font color="#000080">,</font>AlienY<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">);

                </font><font color="#008000"><i>{
                =============================

                Move alien in a direction

                -----------------------------
                }


                </i></font>NewDir <font color="#000080">:=</font>random<font color="#000080">(</font><font color="#800000">5</font><font color="#000080">)+</font><font color="#800000">1</font><font color="#000080">;
                </font>NewXp  <font color="#000080">:=</font>AlienX<font color="#000080">;
                </font>NewYp  <font color="#000080">:=</font>AlienY<font color="#000080">;

                </font><font color="#FF0000"><b>case </b></font>NewDir <font color="#FF0000"><b>of
                </b></font><font color="#800000">1</font><font color="#000080">: </font><font color="#FF0000"><b>if </b></font>newxp <font color="#000080">&lt;&gt; </font><font color="#800000">1 </font><font color="#FF0000"><b>then </b></font>dec<font color="#000080">(</font>newxp<font color="#000080">);
                </font><font color="#800000">2</font><font color="#000080">: </font><font color="#FF0000"><b>if </b></font>newxp <font color="#000080">&lt;&gt; </font><font color="#800000">7 </font><font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>newxp<font color="#000080">);
                </font><font color="#800000">3</font><font color="#000080">: </font><font color="#FF0000"><b>if </b></font>newyp <font color="#000080">&lt;&gt; </font><font color="#800000">1 </font><font color="#FF0000"><b>then </b></font>dec<font color="#000080">(</font>newyp<font color="#000080">);
                </font><font color="#800000">4</font><font color="#000080">: </font><font color="#FF0000"><b>if </b></font>newyp <font color="#000080">&lt;&gt; </font><font color="#800000">5 </font><font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>newyp<font color="#000080">);
                </font><font color="#800000">5</font><font color="#000080">..</font><font color="#800000">6</font><font color="#000080">: </font><font color="#FF0000"><b>if </b></font>newyp <font color="#000080">&lt; </font>humany <font color="#FF0000"><b>then         </b></font><font color="#008000"><i>{ A wee bit of AI :) }
                      </i></font>inc<font color="#000080">(</font>newyp<font color="#000080">)
                   </font><font color="#FF0000"><b>else
                       if </b></font>newyp <font color="#000080">&gt; </font>humany <font color="#FF0000"><b>then
                          </b></font>dec<font color="#000080">(</font>newyp<font color="#000080">);

                </font><font color="#FF0000"><b>end</b></font><font color="#000080">;


                </font><font color="#008000"><i>{
                }


                </i></font>noblank<font color="#000080">:=</font>false<font color="#000080">;
                </font>objecthit<font color="#000080">:=</font>map<font color="#000080">[</font>newxp<font color="#000080">,</font>newyp<font color="#000080">];

                </font><font color="#FF0000"><b>case </b></font>objecthit <font color="#FF0000"><b>of
                </b></font>empty               <font color="#000080">: </font>map<font color="#000080">[</font>newxp<font color="#000080">, </font>newyp<font color="#000080">]:=</font>NormalAlien<font color="#000080">;
                </font>human               <font color="#000080">: </font>killedplayer<font color="#000080">:=</font>true<font color="#000080">;
                </font>QuarterDugHole      <font color="#000080">: </font>map<font color="#000080">[</font>newxp<font color="#000080">, </font>newyp<font color="#000080">]:=</font>AlienTripped<font color="#000080">;
                </font>HalfDugHole         <font color="#000080">: </font>map<font color="#000080">[</font>newxp<font color="#000080">, </font>newyp<font color="#000080">]:=</font>AlienHalfBuried<font color="#000080">;
                </font>ThreeQuarterDugHole <font color="#000080">: </font>map<font color="#000080">[</font>newxp<font color="#000080">, </font>newyp<font color="#000080">]:=</font>AlienAlmostBuried<font color="#000080">;
                </font>FullyDugHole        <font color="#000080">: </font>map<font color="#000080">[</font>newxp<font color="#000080">, </font>newyp<font color="#000080">]:=</font>AlienCompletelyBuried<font color="#000080">;
                </font><font color="#FF0000"><b>else
                    </b></font>noblank<font color="#000080">:=</font>true<font color="#000080">;
                </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

                </font><font color="#008000"><i>{
                Noblank, when set FALSE means the alien has moved
                and the area where the alien was on the map shall be
                set empty.
                }


                </i></font><font color="#FF0000"><b>if not </b></font>noblank <font color="#FF0000"><b>then
                   </b></font>map<font color="#000080">[</font>AlienX<font color="#000080">, </font>AlienY<font color="#000080">]:=</font>Empty<font color="#000080">;

                </font><font color="#008000"><i>{ I used this for debugging. I thought it was cos
                  the SWAG keyboard handler was dodgy, but it wasn't
                  - my code was !!! }

                { gotoxy(1,24); write (chr (random(128)+32)); }

                </i></font><font color="#FF0000"><b>end
             else
                 If </b></font>AlienState <font color="#000080">&lt; </font>NormalAlien <font color="#FF0000"><b>Then
                    Begin
                    </b></font>TheObject<font color="#000080">:=</font>Map<font color="#000080">[</font>AlienX<font color="#000080">, </font>AlienY<font color="#000080">];
                    </font>Inc<font color="#000080">(</font>TheObject<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
                    </font><font color="#FF0000"><b>If </b></font>TheObject <font color="#000080">&gt; </font>NormalAlien <font color="#FF0000"><b>Then
                       </b></font>TheObject<font color="#000080">:=</font>NormalAlien<font color="#000080">;

                    </font>Map<font color="#000080">[</font>AlienX<font color="#000080">,</font>AlienY<font color="#000080">]:=</font>TheObject<font color="#000080">;
                    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
             </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
         </font><font color="#FF0000"><b>end</b></font><font color="#000080">;



</font><font color="#FF0000"><b>end</b></font><font color="#000080">;







</font><font color="#008000"><i>{
======================

Guess what this does ?

----------------------
}




</i></font><font color="#FF0000"><b>Procedure </b></font>DigHole<font color="#000080">(</font>holex<font color="#000080">, </font>holey<font color="#000080">: </font>byte<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>TheObject<font color="#000080">: </font>byte<font color="#000080">;

</font><font color="#FF0000"><b>Begin


     </b></font>TheObject<font color="#000080">:=</font>Map<font color="#000080">[</font>holex<font color="#000080">, </font>holey<font color="#000080">];
     </font><font color="#FF0000"><b>If </b></font>TheObject <font color="#000080">= </font>Empty <font color="#FF0000"><b>Then
        </b></font>Map<font color="#000080">[</font>HoleX<font color="#000080">,</font>Holey<font color="#000080">]:=</font>QuarterDugHole
     <font color="#FF0000"><b>Else
         If </b></font><font color="#000080">(</font>TheObject <font color="#000080">&gt;= </font>QuarterDugHole<font color="#000080">)
         </font><font color="#FF0000"><b>And </b></font><font color="#000080">(</font>TheObject <font color="#000080">&lt; </font>FullyDugHole<font color="#000080">) </font><font color="#FF0000"><b>Then
             Begin
             </b></font>Sound<font color="#000080">(</font><font color="#800000">50</font><font color="#000080">);
             </font>Delay<font color="#000080">(</font><font color="#800000">100</font><font color="#000080">);
             </font>NoSound<font color="#000080">;
             </font>Inc<font color="#000080">(</font>Map<font color="#000080">[</font>HoleX<font color="#000080">,</font>HoleY<font color="#000080">]);
             </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;





</font><font color="#008000"><i>{
==============================

FILL IN A HOLE / BURY AN ALIEN

------------------------------
}




</i></font><font color="#FF0000"><b>Procedure </b></font>FillHole<font color="#000080">(</font>holex<font color="#000080">, </font>holey<font color="#000080">:</font>byte<font color="#000080">);
</font><font color="#FF0000"><b>Var </b></font>TheObject<font color="#000080">: </font>byte<font color="#000080">;

</font><font color="#FF0000"><b>Begin


     </b></font>TheObject<font color="#000080">:=</font>Map<font color="#000080">[</font>Holex<font color="#000080">, </font>Holey<font color="#000080">];
     </font><font color="#FF0000"><b>If </b></font><font color="#000080">(</font>TheObject <font color="#000080">&gt;= </font>QuarterDugHole<font color="#000080">) </font><font color="#FF0000"><b>And </b></font><font color="#000080">(</font>TheObject <font color="#000080">&lt;= </font>FullyDugHole<font color="#000080">) </font><font color="#FF0000"><b>Then
        Begin
        </b></font>Sound<font color="#000080">(</font><font color="#800000">20</font><font color="#000080">);
        </font>Delay<font color="#000080">(</font><font color="#800000">100</font><font color="#000080">);
        </font>NoSound<font color="#000080">;
        </font>Dec<font color="#000080">(</font>Map<font color="#000080">[</font>HoleX<font color="#000080">, </font>HoleY<font color="#000080">]);
        </font><font color="#FF0000"><b>If </b></font>Map<font color="#000080">[</font>HoleX<font color="#000080">, </font>HoleY<font color="#000080">] &lt; </font>QuarterDugHole <font color="#FF0000"><b>Then
           </b></font>Map<font color="#000080">[</font>HoleX<font color="#000080">, </font>HoleY<font color="#000080">]:=</font>Empty<font color="#000080">;
        </font><font color="#FF0000"><b>End
     Else
         If </b></font><font color="#000080">(</font>TheObject <font color="#000080">&gt;=</font>AlienFilledIn<font color="#000080">) </font><font color="#FF0000"><b>And
         </b></font><font color="#000080">(</font>TheObject <font color="#000080">&lt;= </font>AlienBeginsClimbOut<font color="#000080">) </font><font color="#FF0000"><b>Then
            Begin
            </b></font>Sound<font color="#000080">(</font><font color="#800000">90</font><font color="#000080">);
            </font>Delay<font color="#000080">(</font><font color="#800000">40</font><font color="#000080">);
            </font>NoSound<font color="#000080">;
            </font>Dec<font color="#000080">(</font>Map<font color="#000080">[</font>HoleX<font color="#000080">,</font>HoleY<font color="#000080">],</font><font color="#800000">1</font><font color="#000080">);
            </font><font color="#FF0000"><b>If </b></font>Map<font color="#000080">[</font>HoleX<font color="#000080">,</font>HoleY<font color="#000080">] &lt;= </font>AlienFilledIn <font color="#FF0000"><b>Then
               </b></font>Map<font color="#000080">[</font>HoleX<font color="#000080">,</font>HoleY<font color="#000080">]:=</font>Empty<font color="#000080">;
            </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;








</font><font color="#008000"><i>{
=======================================

Try and move the human to a new square.

If he walks into an alien though....

---------------------------------------
}



</i></font><font color="#FF0000"><b>Procedure </b></font>TryMove<font color="#000080">(</font>newx<font color="#000080">, </font>newy<font color="#000080">: </font>byte<font color="#000080">);
</font><font color="#FF0000"><b>Var </b></font>TheObject<font color="#000080">: </font>byte<font color="#000080">;

</font><font color="#FF0000"><b>Begin
     </b></font>TheObject<font color="#000080">:=</font>Map<font color="#000080">[</font>NewX<font color="#000080">, </font>NewY<font color="#000080">];
     </font><font color="#FF0000"><b>If </b></font>TheObject <font color="#000080">= </font>Empty <font color="#FF0000"><b>Then
        Begin
        </b></font>Map<font color="#000080">[</font>HumanX<font color="#000080">, </font>HumanY<font color="#000080">]:=</font>Empty<font color="#000080">;
        </font>Map<font color="#000080">[</font>NewX<font color="#000080">, </font>NewY<font color="#000080">]:=</font>Human<font color="#000080">;
        </font>HumanX<font color="#000080">:=</font>newx<font color="#000080">;
        </font>HumanY<font color="#000080">:=</font>newy<font color="#000080">;
        </font><font color="#FF0000"><b>End
     Else
         If </b></font>TheObject <font color="#000080">= </font>NormalAlien <font color="#FF0000"><b>Then
            </b></font>killedplayer<font color="#000080">:=</font>true<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;









</font><font color="#008000"><i>{
=====================

MOVE THE HUMAN AROUND

---------------------
}





</i></font><font color="#FF0000"><b>Procedure </b></font>MovePlayers<font color="#000080">;

</font><font color="#FF0000"><b>var </b></font>currpx<font color="#000080">, </font>currpy     <font color="#000080">: </font>byte<font color="#000080">;
    </font>digging<font color="#000080">, </font>burying <font color="#000080">: </font>boolean<font color="#000080">;

</font><font color="#FF0000"><b>Begin
     </b></font>currpx<font color="#000080">:=</font>humanx<font color="#000080">;
     </font>currpy<font color="#000080">:=</font>humany<font color="#000080">;

     </font>digging<font color="#000080">:=</font>false<font color="#000080">;
     </font>burying<font color="#000080">:=</font>false<font color="#000080">;

     </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>keydown<font color="#000080">[</font>DigKey<font color="#000080">]) </font><font color="#FF0000"><b>then
        </b></font>digging<font color="#000080">:=</font>true
     <font color="#FF0000"><b>else
         if </b></font><font color="#000080">(</font>keydown<font color="#000080">[</font>FillKey<font color="#000080">]) </font><font color="#FF0000"><b>then
            </b></font>burying<font color="#000080">:=</font>true<font color="#000080">;


     </font><font color="#FF0000"><b>if </b></font>keydown<font color="#000080">[</font>UpKey<font color="#000080">] </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>currpy <font color="#000080">&lt;&gt;</font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>then
        begin
        if </b></font>digging <font color="#FF0000"><b>or </b></font>burying <font color="#FF0000"><b>then
           begin
           if </b></font>digging <font color="#FF0000"><b>then
              </b></font>dighole<font color="#000080">(</font>currpx<font color="#000080">, </font>currpy<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">)
           </font><font color="#FF0000"><b>else
               </b></font>fillhole<font color="#000080">(</font>currpx<font color="#000080">, </font>currpy<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">);
           </font><font color="#FF0000"><b>end
        else
            </b></font>trymove<font color="#000080">(</font>currpx<font color="#000080">,</font>currpy<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">);
        </font><font color="#FF0000"><b>end
     else
         if </b></font>keydown<font color="#000080">[</font>DownKey<font color="#000080">] </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>currpy <font color="#000080">&lt;&gt;</font><font color="#800000">5</font><font color="#000080">) </font><font color="#FF0000"><b>then
            begin
            if </b></font>digging <font color="#FF0000"><b>or </b></font>burying <font color="#FF0000"><b>then
               begin
               if </b></font>digging <font color="#FF0000"><b>then
                  </b></font>dighole<font color="#000080">(</font>currpx<font color="#000080">, </font>currpy<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">)
               </font><font color="#FF0000"><b>else
                   </b></font>fillhole<font color="#000080">(</font>currpx<font color="#000080">, </font>currpy<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">);
               </font><font color="#FF0000"><b>end
            else
                </b></font>trymove<font color="#000080">(</font>currpx<font color="#000080">,</font>currpy<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">);
            </font><font color="#FF0000"><b>end
         else
             if </b></font>keydown<font color="#000080">[</font>LeftKey<font color="#000080">] </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>currpx <font color="#000080">&lt;&gt;</font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>then
                begin
                if </b></font>digging <font color="#FF0000"><b>or </b></font>burying <font color="#FF0000"><b>then
                   begin
                   if </b></font>digging <font color="#FF0000"><b>then
                      </b></font>dighole<font color="#000080">(</font>currpx<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">, </font>currpy<font color="#000080">)
                   </font><font color="#FF0000"><b>else
                       </b></font>fillhole<font color="#000080">(</font>currpx<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">, </font>currpy<font color="#000080">);
                   </font><font color="#FF0000"><b>end
                else
                    </b></font>trymove<font color="#000080">(</font>currpx<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">,</font>currpy<font color="#000080">);
                </font><font color="#FF0000"><b>end
             else
                 if </b></font>keydown<font color="#000080">[</font>RightKey<font color="#000080">] </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>currpx <font color="#000080">&lt;&gt;</font><font color="#800000">7</font><font color="#000080">) </font><font color="#FF0000"><b>then
                    begin
                    if </b></font>digging <font color="#FF0000"><b>or </b></font>burying <font color="#FF0000"><b>then
                       begin
                       if </b></font>digging <font color="#FF0000"><b>then
                          </b></font>dighole<font color="#000080">(</font>currpx<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">, </font>currpy<font color="#000080">)
                       </font><font color="#FF0000"><b>else
                           </b></font>fillhole<font color="#000080">(</font>currpx<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">, </font>currpy<font color="#000080">);
                       </font><font color="#FF0000"><b>end
                    else
                        </b></font>trymove<font color="#000080">(</font>currpx<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,</font>currpy<font color="#000080">);
                    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
















</font><font color="#FF0000"><b>begin
     </b></font>randomize<font color="#000080">;
     </font>skilllevel<font color="#000080">:=</font>amateur<font color="#000080">;
     </font>gamelevel<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;

     </font>initmap<font color="#000080">;                   </font><font color="#008000"><i>{ Set map up }

     </i></font>Lines200<font color="#000080">;
     </font>Font8x16<font color="#000080">;

     </font>hookkeyboardint<font color="#000080">;

     </font><font color="#FF0000"><b>repeat
           </b></font>drawmap<font color="#000080">;

           </font>movealiens<font color="#000080">;
           </font>moveplayers<font color="#000080">;
           </font>delay<font color="#000080">(</font><font color="#800000">125</font><font color="#000080">);


     </font><font color="#FF0000"><b>until </b></font>keydown<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] </font><font color="#FF0000"><b>or </b></font>killedplayer <font color="#000080">;
     </font>textmode<font color="#000080">(</font>CO80<font color="#000080">);

     </font>unhookkeyboardint<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.




</font><font color="#008000"><i>{
If you actually play this game in it's unaltered state.. my commiserations! 
Contact address: CG93SAT@IBMRISC.DCT.AC.UK

What I'd like to see more of in the SWAG are humour games... the Amiga
has loads (cos it's a joke machine - just kidding, I own one too)

Remember to write that lager drinking sim now ;)  !!!
}

</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to MISC SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0182.PAS">Original</a><b>]</b></p></body>
</html>
