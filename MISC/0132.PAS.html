<html>
<head><title> "Array in BASM" by DUNCAN MURDOCH</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to MISC SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0132.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#008000"><i>{ Updated MISC.SWG on May 26, 1995 }

{
From: dmurdoch@mast.queensu.ca (Duncan Murdoch)

&gt;How can I access double-dimentional arrays in Pascal using asm?  My array
&gt;is declared like this: var myarray:array[0..5] of array[0..5] of byte.

You need to do the addressing yourself.  For example, to load myarray[i,j]
into AH, do the following:
}
  </i></font>mov ax<font color="#000080">, </font>i
  mov bx<font color="#000080">, </font><font color="#800000">6     </font><font color="#008000"><i>{ The size of a row of your array }
  </i></font>mul bx        <font color="#008000"><i>{ Now ax holds the offset to element myarray[i,0] }
  </i></font>add ax<font color="#000080">,</font>j      <font color="#008000"><i>{ now it holds the offset to element myarray[i,j] }
  </i></font>mov bx<font color="#000080">,</font>ax     <font color="#008000"><i>{ Put the offset in BX. }
  </i></font>mov ah<font color="#000080">,</font>myarray<font color="#000080">[</font>bx<font color="#000080">]  </font><font color="#008000"><i>{ Load the byte at the calculated offset }
{
This is untested, but it looks okay to me...
}
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to MISC SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0132.PAS">Original</a><b>]</b></p></body>
</html>
