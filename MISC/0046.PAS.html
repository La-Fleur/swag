<html>
<head><title> "Trapping Runtime Errors" by JON JASIUNAS</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to MISC SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0046.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
JON JASIUNAS

I never use them. if a Program bombs because a disk is full, I just
&gt; catch the run-time error in an Exit proc and report so (I/O-checking
&gt; must be set on, of course).

&gt;I am curious, How do you go about Catching the Run-Time Error. Doesn't it
&gt;just say Runtime Error 103 ?????:?????

You can catch the run-time errors by linking into the Exit chain.
Here's a small example:
}

</i></font><font color="#FF0000"><b>Unit </b></font>ErrTrap<font color="#000080">;

</font><font color="#FF0000"><b>Interface

Implementation

Var
  </b></font>OldExit <font color="#000080">: </font>Pointer<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>NewExit<font color="#000080">; </font><font color="#FF0000"><b>Far</b></font><font color="#000080">;  </font><font color="#008000"><i>{ MUST be far! }
</i></font><font color="#FF0000"><b>begin
  if </b></font>ErrorAddr <font color="#000080">&lt;&gt; </font><font color="#FF0000"><b>nil then
  begin
    </b></font><font color="#008000"><i>{-Display custom run-time error message }
    </i></font>WriteLn<font color="#000080">(</font><font color="#800000">'Fatal error #'</font><font color="#000080">, </font>ExitCode<font color="#000080">);
    </font>WriteLn<font color="#000080">(</font><font color="#800000">'Address = '</font><font color="#000080">, </font>Seg<font color="#000080">(</font>ErrorAddr<font color="#000080">^), </font><font color="#800000">':'</font><font color="#000080">, </font>Ofs<font color="#000080">(</font>ErrorAddr<font color="#000080">^));
    </font><font color="#008000"><i>{-Cancel run-time error so you don't get the default message, too }
    </i></font>ErrorAddr <font color="#000080">:= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">;
    </font><font color="#008000"><i>{-Zero the errorlevel }
    </i></font>ExitCode  <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>ExitProc <font color="#000080">:= </font>OldExit<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>OldExit  <font color="#000080">:= </font>ExitProc<font color="#000080">;
  </font>ExitProc <font color="#000080">:= @</font>NewExit<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.


</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to MISC SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0046.PAS">Original</a><b>]</b></p></body>
</html>
