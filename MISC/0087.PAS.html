<html>
<head><title> "Fuzzy logic unit (German)" by WIM VAN DER VEGT</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to MISC SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0087.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
---------------------------------------------------------------------------
KW&gt;WV&gt;Got some german pascal code on this subject. It seems to implement a
  &gt;  &gt;.... (Bit large to send if nobody's interested).

KW&gt;Can you extract the specifically fuzzy logic parts?
  &gt;---
No (didnt know where to look, how doesfuzzy pascal look :-) ) so here's
the complete program taken from a german magazine
}

</i></font><font color="#FF0000"><b>UNIT </b></font>Fuzzy<font color="#000080">;
</font><font color="#FF0000"><b>INTERFACE

Uses </b></font>Graph<font color="#000080">,</font>Crt<font color="#000080">,</font>Dos<font color="#000080">;

</font><font color="#FF0000"><b>CONST
  </b></font>Infinity  <font color="#000080">= </font><font color="#800000">1.7e38</font><font color="#000080">;
  </font>NoRules   <font color="#000080">= </font><font color="#FF0000"><b>NIL</b></font><font color="#000080">;
  </font>ValueCol  <font color="#000080">= </font>LightMagenta<font color="#000080">;

</font><font color="#FF0000"><b>TYPE
  </b></font>NameStr       <font color="#000080">= </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">20</font><font color="#000080">];
  </font><font color="#008000"><i>(* verschiedene Operatortypen *)
  </i></font>Inference     <font color="#000080">= </font><font color="#FF0000"><b>FUNCTION</b></font><font color="#000080">(</font>Set1<font color="#000080">,</font>Set2<font color="#000080">,</font>Set3<font color="#000080">:</font>Real<font color="#000080">):</font>real<font color="#000080">;

  </font>FuzzySetList  <font color="#000080">= ^</font>FuzzySet<font color="#000080">;
  </font>FuzzyVarList  <font color="#000080">= ^</font>FuzzyVar<font color="#000080">;
  </font>FuzzyRuleList <font color="#000080">= ^</font>FuzzyRule<font color="#000080">;

  </font>FuzzySet      <font color="#000080">= </font><font color="#FF0000"><b>Object
                    </b></font>SetName <font color="#000080">: </font>NameStr<font color="#000080">;       </font><font color="#008000"><i>(* Mengenbenzeichner    *)
                    </i></font>StartAt<font color="#000080">,                 </font><font color="#008000"><i>(* Startwert            *)
                    </i></font>HighAt<font color="#000080">,                  </font><font color="#008000"><i>(* Maximum bei ...      *)
                    </i></font>EndAt   <font color="#000080">: </font>Real<font color="#000080">;          </font><font color="#008000"><i>(* Endwert              *)
                    </i></font>Next    <font color="#000080">: </font>FuzzySetList<font color="#000080">;
                    </font>Color   <font color="#000080">: </font>Byte<font color="#000080">;
                    </font>MemberShip <font color="#000080">: </font>Real<font color="#000080">;       </font><font color="#008000"><i>(* aktueller Wert der   *)
                                             (* Zugehîrigkeit        *)
                    </i></font>Rules   <font color="#000080">: </font>FuzzyRuleList<font color="#000080">; </font><font color="#008000"><i>(* Regelliste fÅr diese *)
                                             (* unscharfe Menge      *)
                    </i></font><font color="#FF0000"><b>Constructor </b></font>Init<font color="#000080">( </font>InitName <font color="#000080">: </font>NameStr<font color="#000080">;
                                      </font>InitStart<font color="#000080">, </font>InitHigh<font color="#000080">,
                                      </font>InitEnd  <font color="#000080">: </font>Real<font color="#000080">;
                                      </font>InitColor<font color="#000080">: </font>Byte<font color="#000080">);
                    </font><font color="#FF0000"><b>PROCEDURE </b></font>Append<font color="#000080">( </font>InitName <font color="#000080">: </font>NameStr<font color="#000080">;
                                      </font>InitStart<font color="#000080">, </font>InitHigh<font color="#000080">,
                                      </font>InitEnd  <font color="#000080">: </font>Real<font color="#000080">;
                                      </font>InitColor<font color="#000080">: </font>Byte<font color="#000080">);
                    </font><font color="#FF0000"><b>FUNCTION  </b></font>GetMemberShip<font color="#000080">(</font>LingVal <font color="#000080">: </font>Real<font color="#000080">):</font>Real<font color="#000080">;
                    </font><font color="#FF0000"><b>PROCEDURE </b></font>DefineRule<font color="#000080">( </font>InfType <font color="#000080">: </font>Inference<font color="#000080">;
                                          </font>Var1    <font color="#000080">: </font>FuzzyVarList<font color="#000080">;
                                          </font>SetName1<font color="#000080">: </font>NameStr<font color="#000080">;
                                          </font>Var2    <font color="#000080">: </font>FuzzyVarList<font color="#000080">;
                                          </font>SetName2<font color="#000080">: </font>NameStr<font color="#000080">);
                  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font>FuzzyVar        <font color="#000080">= </font><font color="#FF0000"><b>Object
                    </b></font>VarName   <font color="#000080">: </font>NameStr<font color="#000080">;       </font><font color="#008000"><i>(* Variablenname        *)
                    </i></font>PosX<font color="#000080">,</font>PosY <font color="#000080">: </font>WORD<font color="#000080">;          </font><font color="#008000"><i>(* Bildschirmkoordinaten*)
                    </i></font>StartValue<font color="#000080">,                </font><font color="#008000"><i>(* Anfang und Ende des  *)
                    </i></font>EndValue<font color="#000080">,                  </font><font color="#008000"><i>(* Koordinatensystems   *)
                    </i></font>Scale     <font color="#000080">: </font>Real<font color="#000080">;          </font><font color="#008000"><i>(* Ma&aacute;stabsfaktor       *)
                    </i></font>UnitStr   <font color="#000080">: </font>NameStr<font color="#000080">;       </font><font color="#008000"><i>(* Einheit, z.B. &oslash;C     *)
                    </i></font>CurrentVal<font color="#000080">: </font>Real<font color="#000080">;          </font><font color="#008000"><i>(* aktueller Wert       *)
                    </i></font>FuzzySets <font color="#000080">: </font>FuzzySetList<font color="#000080">;  </font><font color="#008000"><i>(* Liste der unscharfen *)
                                               (* Mengen               *)
                    </i></font>Result<font color="#000080">,</font>BackGround <font color="#000080">:
                       </font><font color="#FF0000"><b>ARRAY</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">5</font><font color="#000080">] </font><font color="#FF0000"><b>OF </b></font>PointType<font color="#000080">;
                    </font><font color="#FF0000"><b>Constructor </b></font>Init<font color="#000080">( </font>InitName    <font color="#000080">: </font>NameStr<font color="#000080">;
                                      </font>InitX<font color="#000080">,</font>InitY <font color="#000080">: </font>WORD<font color="#000080">;
                                      </font>Sections    <font color="#000080">: </font>Byte<font color="#000080">;
                                      </font>InitStart<font color="#000080">,</font>InitEnd<font color="#000080">,
                                      </font>InitValue   <font color="#000080">: </font>Real<font color="#000080">;
                                      </font>InitUnit    <font color="#000080">: </font>NameStr<font color="#000080">);
                    </font><font color="#FF0000"><b>PROCEDURE  </b></font>CoordSystem<font color="#000080">(</font>Sections <font color="#000080">: </font>Byte<font color="#000080">);
                    </font><font color="#FF0000"><b>FUNCTION   </b></font>RealToCoord<font color="#000080">(</font>r<font color="#000080">:</font>Real<font color="#000080">):</font>WORD<font color="#000080">;
                    </font><font color="#FF0000"><b>PROCEDURE  </b></font>DisplaySets<font color="#000080">;
                    </font><font color="#FF0000"><b>PROCEDURE  </b></font>DisplayValue<font color="#000080">(</font>TextColor<font color="#000080">:</font>WORD<font color="#000080">);
                    </font><font color="#FF0000"><b>PROCEDURE  </b></font>DisplayResultSets<font color="#000080">;
                    </font><font color="#FF0000"><b>PROCEDURE  </b></font>Change<font color="#000080">(</font>Diff <font color="#000080">: </font>Real<font color="#000080">);
                    </font><font color="#FF0000"><b>FUNCTION   </b></font>GetMemberShipOf<font color="#000080">(</font>Name <font color="#000080">: </font>NameStr<font color="#000080">):</font>Real<font color="#000080">;
                    </font><font color="#FF0000"><b>PROCEDURE  </b></font>Infer<font color="#000080">;
                    </font><font color="#FF0000"><b>PROCEDURE  </b></font>DeFuzzy<font color="#000080">;
                    </font><font color="#FF0000"><b>PROCEDURE  </b></font>DefineSet<font color="#000080">( </font>InitName <font color="#000080">: </font>NameStr<font color="#000080">;
                                          </font>InitStart<font color="#000080">, </font>InitHigh<font color="#000080">,
                                          </font>InitEnd  <font color="#000080">: </font>Real<font color="#000080">;
                                          </font>InitColor<font color="#000080">: </font>Byte<font color="#000080">);
                    </font><font color="#FF0000"><b>PROCEDURE  </b></font>DefineRule<font color="#000080">(</font>SetName  <font color="#000080">: </font>NameStr<font color="#000080">;
                                          </font>InfType  <font color="#000080">: </font>Inference<font color="#000080">;
                                          </font>Var1     <font color="#000080">: </font>FuzzyVarList<font color="#000080">;
                                          </font>SetName1 <font color="#000080">: </font>NameStr<font color="#000080">;
                                          </font>Var2     <font color="#000080">: </font>FuzzyVarList<font color="#000080">;
                                          </font>SetName2 <font color="#000080">: </font>NameStr<font color="#000080">);
                  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font>FuzzyRule       <font color="#000080">= </font><font color="#FF0000"><b>Object
                    </b></font>Inf_Type   <font color="#000080">: </font>Inference<font color="#000080">;       </font><font color="#008000"><i>(* Operatortyp       *)
                    </i></font>Var1<font color="#000080">, </font>Var2 <font color="#000080">: </font>FuzzyVarList<font color="#000080">;    </font><font color="#008000"><i>(* Eingangsvariablen *)
                    </i></font>SetName1<font color="#000080">, </font>SetName2 <font color="#000080">: </font>NameStr<font color="#000080">; </font><font color="#008000"><i>(* Eingangsmengen    *)
                    </i></font>Next       <font color="#000080">: </font>FuzzyRuleList<font color="#000080">;
                    </font><font color="#FF0000"><b>Constructor </b></font>Init<font color="#000080">( </font>InitInf    <font color="#000080">: </font>Inference<font color="#000080">;
                                      </font>InitVar1   <font color="#000080">: </font>FuzzyVarList<font color="#000080">;
                                      </font>InitName1  <font color="#000080">: </font>NameStr<font color="#000080">;
                                      </font>InitVar2   <font color="#000080">: </font>FuzzyVarList<font color="#000080">;
                                      </font>InitName2  <font color="#000080">: </font>NameStr<font color="#000080">);
                    </font><font color="#FF0000"><b>PROCEDURE </b></font>Append<font color="#000080">( </font>InitInf    <font color="#000080">: </font>Inference<font color="#000080">;
                                      </font>InitVar1   <font color="#000080">: </font>FuzzyVarList<font color="#000080">;
                                      </font>InitName1  <font color="#000080">: </font>NameStr<font color="#000080">;
                                      </font>InitVar2   <font color="#000080">: </font>FuzzyVarList<font color="#000080">;
                                      </font>InitName2  <font color="#000080">: </font>NameStr<font color="#000080">);
                    </font><font color="#FF0000"><b>FUNCTION </b></font>Infer<font color="#000080">(</font>HomeSetValue<font color="#000080">:</font>Real<font color="#000080">):</font>Real<font color="#000080">;
                  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Buzz<font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>error<font color="#000080">(</font><font color="#FF0000"><b>message </b></font><font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">);

</font><font color="#FF0000"><b>function </b></font>Max<font color="#000080">( </font>A<font color="#000080">, </font>B<font color="#000080">: </font>Real <font color="#000080">): </font>Real<font color="#000080">;
</font><font color="#FF0000"><b>function </b></font>Min<font color="#000080">( </font>A<font color="#000080">, </font>B<font color="#000080">: </font>Real <font color="#000080">): </font>Real<font color="#000080">;

</font><font color="#FF0000"><b>FUNCTION </b></font>AND_MaxMin<font color="#000080">(</font>Set1<font color="#000080">,</font>Set2<font color="#000080">,</font>Set3<font color="#000080">:</font>Real<font color="#000080">):</font>Real<font color="#000080">;
</font><font color="#FF0000"><b>FUNCTION </b></font>OR_MaxMax<font color="#000080">(</font>Set1<font color="#000080">,</font>Set2<font color="#000080">,</font>Set3<font color="#000080">:</font>Real<font color="#000080">):</font>Real<font color="#000080">;

</font><font color="#FF0000"><b>VAR
  </b></font>DisplayOn <font color="#000080">: </font>BOOLEAN<font color="#000080">; </font><font color="#008000"><i>(* Anzeige der unscharfen Mengen ein/aus *)
  </i></font>Regs <font color="#000080">: </font>Registers<font color="#000080">;
  </font>ResultCol <font color="#000080">: </font>WORD<font color="#000080">;

</font><font color="#FF0000"><b>Implementation

CONST </b></font>OffSet <font color="#000080">= </font><font color="#800000">20</font><font color="#000080">;

</font><font color="#FF0000"><b>VAR   </b></font>Buffer <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>Buzz<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN </b></font>sound<font color="#000080">(</font><font color="#800000">30</font><font color="#000080">); </font>Delay<font color="#000080">(</font><font color="#800000">100</font><font color="#000080">); </font>NoSound<font color="#000080">; </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>error<font color="#000080">(</font><font color="#FF0000"><b>message </b></font><font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">);
</font><font color="#FF0000"><b>begin
  </b></font>CloseGraph<font color="#000080">; </font>writeln<font color="#000080">(</font><font color="#FF0000"><b>message</b></font><font color="#000080">); </font>halt
<font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>Max<font color="#000080">( </font>A<font color="#000080">, </font>B<font color="#000080">: </font>Real <font color="#000080">): </font>Real<font color="#000080">;
</font><font color="#FF0000"><b>begin
  if </b></font>A <font color="#000080">&lt; </font>B <font color="#FF0000"><b>then </b></font>Max <font color="#000080">:= </font>B <font color="#FF0000"><b>else </b></font>Max <font color="#000080">:= </font>A<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>Min<font color="#000080">( </font>A<font color="#000080">, </font>B<font color="#000080">: </font>Real <font color="#000080">): </font>Real<font color="#000080">;
</font><font color="#FF0000"><b>begin
  if </b></font>A <font color="#000080">&gt; </font>B <font color="#FF0000"><b>then </b></font>Min <font color="#000080">:= </font>B <font color="#FF0000"><b>else </b></font>Min <font color="#000080">:= </font>A<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>(* MaxMin-Operator fÅr UND *)
</i></font><font color="#FF0000"><b>FUNCTION </b></font>AND_MaxMin<font color="#000080">(</font>Set1<font color="#000080">,</font>Set2<font color="#000080">,</font>Set3<font color="#000080">:</font>Real<font color="#000080">):</font>Real<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>AND_MaxMin<font color="#000080">:=</font>Max<font color="#000080">(</font>Set1<font color="#000080">,</font>Min<font color="#000080">(</font>Set2<font color="#000080">,</font>Set3<font color="#000080">))
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#008000"><i>(* MaxMax-Operator fÅr ODER *)
</i></font><font color="#FF0000"><b>FUNCTION </b></font>OR_MaxMax<font color="#000080">(</font>Set1<font color="#000080">,</font>Set2<font color="#000080">,</font>Set3<font color="#000080">:</font>Real<font color="#000080">):</font>Real<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>OR_MaxMax<font color="#000080">:=</font>Max<font color="#000080">(</font>Set1<font color="#000080">,</font>Max<font color="#000080">(</font>Set2<font color="#000080">,</font>Set3<font color="#000080">))
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>CONSTRUCTOR </b></font>FuzzySet<font color="#000080">.</font>Init<font color="#000080">;

</font><font color="#FF0000"><b>BEGIN
  </b></font>SetName <font color="#000080">:= </font>InitName<font color="#000080">;
  </font>StartAt <font color="#000080">:= </font>InitStart<font color="#000080">;
  </font>HighAt  <font color="#000080">:= </font>InitHigh<font color="#000080">;
  </font>EndAt   <font color="#000080">:= </font>InitEnd<font color="#000080">;
  </font>Color   <font color="#000080">:= </font>InitColor<font color="#000080">;
  </font>Next    <font color="#000080">:= </font><font color="#FF0000"><b>NIL</b></font><font color="#000080">;
  </font>Rules<font color="#000080">:= </font>NoRules<font color="#000080">;
  </font>MemberShip <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>FuzzySet<font color="#000080">.</font>Append<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  IF </b></font>Next<font color="#000080">=</font><font color="#FF0000"><b>NIL
  THEN </b></font>New<font color="#000080">(</font>Next<font color="#000080">,</font>Init<font color="#000080">(</font>InitName<font color="#000080">,</font>InitStart<font color="#000080">,</font>InitHigh<font color="#000080">,</font>InitEnd<font color="#000080">,</font>InitColor<font color="#000080">))
  </font><font color="#FF0000"><b>ELSE </b></font>Next<font color="#000080">^.</font>Append<font color="#000080">(</font>InitName<font color="#000080">,</font>InitStart<font color="#000080">,</font>InitHigh<font color="#000080">,</font>InitEnd<font color="#000080">,</font>InitColor<font color="#000080">)
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>FUNCTION </b></font>FuzzySet<font color="#000080">.</font>GetMemberShip<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  IF </b></font><font color="#000080">(</font>LingVal<font color="#000080">&lt;=</font>StartAt<font color="#000080">) </font><font color="#FF0000"><b>THEN </b></font>GetMemberShip<font color="#000080">:=</font><font color="#800000">0
  </font><font color="#FF0000"><b>ELSE IF </b></font><font color="#000080">(</font>LingVal<font color="#000080">&gt;=</font>EndAt<font color="#000080">) </font><font color="#FF0000"><b>THEN </b></font>GetMemberShip<font color="#000080">:=</font><font color="#800000">0
  </font><font color="#FF0000"><b>ELSE
  BEGIN
    IF </b></font><font color="#000080">((</font>StartAt<font color="#000080">=-</font>Infinity<font color="#000080">) </font><font color="#FF0000"><b>AND </b></font><font color="#000080">(</font>LingVal<font color="#000080">&lt;=</font>HighAt<font color="#000080">))
    </font><font color="#FF0000"><b>OR </b></font><font color="#000080">((</font>EndAt<font color="#000080">=</font>Infinity<font color="#000080">) </font><font color="#FF0000"><b>AND </b></font><font color="#000080">(</font>LingVal<font color="#000080">&gt;=</font>HighAt<font color="#000080">)) </font><font color="#FF0000"><b>THEN </b></font>GetMemberShip<font color="#000080">:=</font><font color="#800000">1
    </font><font color="#FF0000"><b>ELSE IF </b></font><font color="#000080">(</font>LingVal<font color="#000080">&lt;=</font>HighAt<font color="#000080">)
         </font><font color="#FF0000"><b>THEN </b></font>GetMemberShip<font color="#000080">:=(</font>LingVal<font color="#000080">-</font>StartAt<font color="#000080">)/(</font>HighAt<font color="#000080">-</font>StartAt<font color="#000080">)
    </font><font color="#FF0000"><b>ELSE </b></font>GetMemberShip<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">-(</font>LingVal<font color="#000080">-</font>HighAt<font color="#000080">)/(</font>EndAt<font color="#000080">-</font>HighAt<font color="#000080">)
  </font><font color="#FF0000"><b>END
END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>FuzzySet<font color="#000080">.</font>DefineRule<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  IF </b></font>Rules<font color="#000080">=</font>NoRules <font color="#FF0000"><b>THEN
     </b></font>Rules<font color="#000080">:= </font>new<font color="#000080">(</font>FuzzyRuleList<font color="#000080">,
             </font>Init<font color="#000080">(</font>InfType<font color="#000080">,</font>Var1<font color="#000080">,</font>SetName1<font color="#000080">,</font>Var2<font color="#000080">,</font>SetName2<font color="#000080">))
  </font><font color="#FF0000"><b>ELSE </b></font>Rules<font color="#000080">^.</font>Append<font color="#000080">(</font>InfType<font color="#000080">,</font>Var1<font color="#000080">,</font>SetName1<font color="#000080">,</font>Var2<font color="#000080">,</font>SetName2<font color="#000080">)
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>CONSTRUCTOR </b></font>FuzzyVar<font color="#000080">.</font>Init<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>VarName<font color="#000080">:=</font>InitName<font color="#000080">;
  </font>PosX<font color="#000080">:=</font>InitX<font color="#000080">;
  </font>PosY<font color="#000080">:=</font>InitY<font color="#000080">;
  </font>StartValue<font color="#000080">:=</font>InitStart<font color="#000080">;
  </font>EndValue  <font color="#000080">:=</font>InitEnd<font color="#000080">;
  </font>Scale     <font color="#000080">:=</font><font color="#800000">210</font><font color="#000080">/(</font>EndValue<font color="#000080">-</font>StartValue<font color="#000080">);
  </font>UnitStr   <font color="#000080">:=</font>InitUnit<font color="#000080">;
  </font>CurrentVal<font color="#000080">:=</font>InitValue<font color="#000080">;
  </font>CoordSystem<font color="#000080">(</font>Sections<font color="#000080">);
  </font>FuzzySets      <font color="#000080">:=</font><font color="#FF0000"><b>NIL</b></font><font color="#000080">;
  </font>BackGround<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>x<font color="#000080">:=</font>PosX<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">;   </font>BackGround<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>y<font color="#000080">:=</font>PosY<font color="#000080">+</font><font color="#800000">100</font><font color="#000080">;
  </font>BackGround<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">].</font>x<font color="#000080">:=</font>PosX<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">;   </font>BackGround<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">].</font>y<font color="#000080">:=</font>PosY<font color="#000080">+</font><font color="#800000">20</font><font color="#000080">;
  </font>BackGround<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">].</font>x<font color="#000080">:=</font>PosX<font color="#000080">+</font><font color="#800000">250</font><font color="#000080">; </font>BackGround<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">].</font>y<font color="#000080">:=</font>PosY<font color="#000080">+</font><font color="#800000">20</font><font color="#000080">;
  </font>BackGround<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">].</font>x<font color="#000080">:=</font>PosX<font color="#000080">+</font><font color="#800000">250</font><font color="#000080">; </font>BackGround<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">].</font>y<font color="#000080">:=</font>PosY<font color="#000080">+</font><font color="#800000">100</font><font color="#000080">;
  </font>BackGround<font color="#000080">[</font><font color="#800000">5</font><font color="#000080">]:=</font>BackGround<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">];
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>FUNCTION </b></font>FuzzyVar<font color="#000080">.</font>RealToCoord<font color="#000080">(</font>r<font color="#000080">:</font>Real<font color="#000080">):</font>WORD<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>RealToCoord<font color="#000080">:=</font>PosX<font color="#000080">+</font>OffSet<font color="#000080">+</font>Round<font color="#000080">((</font>r<font color="#000080">-</font>StartValue<font color="#000080">)*</font>Scale<font color="#000080">);
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>FuzzyVar<font color="#000080">.</font>CoordSystem<font color="#000080">(</font>Sections<font color="#000080">: </font>BYTE<font color="#000080">);
</font><font color="#008000"><i>(* zeichnet ein Koordinatensystem            *)
(* PosX, PosY bestimmen die linke obere Ecke *)
</i></font><font color="#FF0000"><b>VAR </b></font>N         <font color="#000080">: </font>Byte<font color="#000080">;
    </font>MarkerX   <font color="#000080">: </font>WORD<font color="#000080">;
    </font>Increment <font color="#000080">: </font>Real<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>SetColor<font color="#000080">(</font>White<font color="#000080">);
  </font>SetTextJustify<font color="#000080">(</font>CenterText<font color="#000080">,</font>CenterText<font color="#000080">);
  </font>Line<font color="#000080">( </font>PosX<font color="#000080">, </font>PosY<font color="#000080">, </font>PosX<font color="#000080">, </font>PosY<font color="#000080">+</font><font color="#800000">103 </font><font color="#000080">);
  </font>Line<font color="#000080">( </font>PosX<font color="#000080">-</font><font color="#800000">3</font><font color="#000080">, </font>PosY<font color="#000080">+</font><font color="#800000">100</font><font color="#000080">, </font>PosX<font color="#000080">+</font><font color="#800000">250</font><font color="#000080">, </font>PosY<font color="#000080">+</font><font color="#800000">100 </font><font color="#000080">);
  </font>Line<font color="#000080">( </font>PosX<font color="#000080">, </font>PosY<font color="#000080">+</font><font color="#800000">20</font><font color="#000080">, </font>PosX<font color="#000080">-</font><font color="#800000">3</font><font color="#000080">, </font>PosY<font color="#000080">+</font><font color="#800000">20 </font><font color="#000080">);
  </font>OutTextXY<font color="#000080">( </font>PosX<font color="#000080">-</font><font color="#800000">15</font><font color="#000080">, </font>PosY<font color="#000080">+</font><font color="#800000">20</font><font color="#000080">,  </font><font color="#800000">'1' </font><font color="#000080">);
  </font>OutTextXY<font color="#000080">( </font>PosX<font color="#000080">-</font><font color="#800000">15</font><font color="#000080">, </font>PosY<font color="#000080">+</font><font color="#800000">100</font><font color="#000080">, </font><font color="#800000">'0' </font><font color="#000080">);
  </font>Increment <font color="#000080">:=(</font>EndValue<font color="#000080">-</font>StartValue<font color="#000080">)/(</font>Sections<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">);
  </font><font color="#FF0000"><b>for </b></font>N <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>Sections<font color="#000080">-</font><font color="#800000">1 </font><font color="#FF0000"><b>do
  begin
    </b></font>MarkerX<font color="#000080">:=</font>RealToCoord<font color="#000080">(</font>StartValue<font color="#000080">+</font>N<font color="#000080">*</font>Increment<font color="#000080">);
    </font>Line<font color="#000080">(</font>MarkerX<font color="#000080">,</font>PosY<font color="#000080">+</font><font color="#800000">101</font><font color="#000080">,</font>MarkerX<font color="#000080">,</font>PosY<font color="#000080">+</font><font color="#800000">103</font><font color="#000080">);
    </font>Str<font color="#000080">(</font>Round<font color="#000080">(</font>StartValue <font color="#000080">+ </font>N <font color="#000080">* </font>Increment<font color="#000080">), </font>Buffer <font color="#000080">);
    </font>OutTextXY<font color="#000080">(</font>MarkerX<font color="#000080">, </font>PosY<font color="#000080">+</font><font color="#800000">113</font><font color="#000080">, </font>Buffer <font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>OutTextXY<font color="#000080">( </font>PosX <font color="#000080">+ </font><font color="#800000">270</font><font color="#000080">, </font>PosY <font color="#000080">+ </font><font color="#800000">113</font><font color="#000080">, </font><font color="#800000">'['</font><font color="#000080">+</font>UnitStr<font color="#000080">+</font><font color="#800000">']'</font><font color="#000080">);
  </font>SetColor<font color="#000080">(</font>Red<font color="#000080">);
  </font>SetTextJustify<font color="#000080">(</font>LeftText<font color="#000080">,</font>CenterText<font color="#000080">);
  </font>OutTextXY<font color="#000080">( </font>PosX <font color="#000080">+ </font><font color="#800000">20</font><font color="#000080">, </font>PosY <font color="#000080">+ </font><font color="#800000">140</font><font color="#000080">,</font>VarName<font color="#000080">+</font><font color="#800000">' = '</font><font color="#000080">);
  </font>OutTextXY<font color="#000080">( </font>PosX <font color="#000080">+ </font><font color="#800000">200</font><font color="#000080">,</font>PosY <font color="#000080">+ </font><font color="#800000">140</font><font color="#000080">,</font>UnitStr<font color="#000080">);
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>FuzzyVar<font color="#000080">.</font>DisplayValue<font color="#000080">;

</font><font color="#FF0000"><b>BEGIN
  </b></font>SetWriteMode<font color="#000080">(</font>XORPut<font color="#000080">);
  </font>SetColor<font color="#000080">(</font>ValueCol<font color="#000080">);
  </font><font color="#FF0000"><b>IF </b></font><font color="#000080">(</font>CurrentVal<font color="#000080">&gt;=</font>StartValue<font color="#000080">) </font><font color="#FF0000"><b>AND </b></font><font color="#000080">(</font>CurrentVal<font color="#000080">&lt;=</font>EndValue<font color="#000080">)
  </font><font color="#FF0000"><b>THEN </b></font>Line<font color="#000080">(</font>RealToCoord<font color="#000080">(</font>CurrentVal<font color="#000080">),</font>PosY<font color="#000080">+</font><font color="#800000">20</font><font color="#000080">,
       </font>RealToCoord<font color="#000080">(</font>CurrentVal<font color="#000080">),</font>PosY<font color="#000080">+</font><font color="#800000">100</font><font color="#000080">);
  </font>SetColor<font color="#000080">(</font>TextColor<font color="#000080">);
  </font>SetTextJustify<font color="#000080">(</font>RightText<font color="#000080">,</font>CenterText<font color="#000080">);
  </font>Str<font color="#000080">(</font>CurrentVal <font color="#000080">: </font><font color="#800000">7 </font><font color="#000080">: </font><font color="#800000">2</font><font color="#000080">, </font>Buffer <font color="#000080">);
  </font>OutTextXY<font color="#000080">( </font>PosX<font color="#000080">+</font><font color="#800000">190</font><font color="#000080">, </font>PosY <font color="#000080">+ </font><font color="#800000">140 </font><font color="#000080">, </font>Buffer <font color="#000080">);
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>FuzzyVar<font color="#000080">.</font>Change<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  IF </b></font><font color="#000080">(</font>CurrentVal<font color="#000080">+</font>Diff<font color="#000080">&gt;=</font>StartValue<font color="#000080">) </font><font color="#FF0000"><b>AND </b></font><font color="#000080">(</font>CurrentVal<font color="#000080">+</font>Diff<font color="#000080">&lt;=</font>EndValue<font color="#000080">)
  </font><font color="#FF0000"><b>THEN
  BEGIN
    </b></font>DisplayValue<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
    </font>CurrentVal<font color="#000080">:=</font>CurrentVal<font color="#000080">+</font>Diff<font color="#000080">;
    </font>DisplayValue<font color="#000080">(</font>ValueCol<font color="#000080">);
  </font><font color="#FF0000"><b>END
  ELSE </b></font><font color="#008000"><i>(* Bereichsgrenzen Åberschritten *)
  </i></font>Buzz<font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>FuzzyVar<font color="#000080">.</font>DisplaySets<font color="#000080">;
</font><font color="#008000"><i>(* zeigt die unscharfen Mengen einer Variablen an *)
</i></font><font color="#FF0000"><b>VAR </b></font>SetPtr <font color="#000080">: </font>FuzzySetList<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>SetPtr<font color="#000080">:=</font>FuzzySets<font color="#000080">;
  </font><font color="#FF0000"><b>WHILE </b></font>SetPtr<font color="#000080">&lt;&gt;</font><font color="#FF0000"><b>NIL DO WITH </b></font>SetPtr<font color="#000080">^ </font><font color="#FF0000"><b>DO
  BEGIN
    </b></font>SetColor<font color="#000080">(</font>Color<font color="#000080">);
    </font><font color="#FF0000"><b>IF </b></font>StartAt<font color="#000080">=-</font>Infinity <font color="#FF0000"><b>THEN </b></font>SetTextJustify<font color="#000080">(</font>RightText<font color="#000080">,</font>CenterText<font color="#000080">)
    </font><font color="#FF0000"><b>ELSE IF </b></font>EndAt<font color="#000080">=</font>Infinity <font color="#FF0000"><b>THEN </b></font>SetTextJustify<font color="#000080">(</font>LeftText<font color="#000080">,</font>CenterText<font color="#000080">)
    </font><font color="#FF0000"><b>ELSE </b></font>SetTextJustify<font color="#000080">(</font>CenterText<font color="#000080">,</font>CenterText<font color="#000080">);
    </font>OutTextXY<font color="#000080">(</font>RealToCoord<font color="#000080">(</font>HighAt<font color="#000080">),</font>PosY<font color="#000080">+</font><font color="#800000">10</font><font color="#000080">,</font>SetName<font color="#000080">);
    </font><font color="#FF0000"><b>IF </b></font>StartAt<font color="#000080">=-</font>Infinity
    <font color="#FF0000"><b>THEN </b></font>Line<font color="#000080">(</font>PosX<font color="#000080">,</font>PosY<font color="#000080">+</font><font color="#800000">20</font><font color="#000080">,</font>RealToCoord<font color="#000080">(</font>HighAt<font color="#000080">),</font>PosY<font color="#000080">+</font><font color="#800000">20</font><font color="#000080">)
    </font><font color="#FF0000"><b>ELSE </b></font>Line<font color="#000080">( </font>RealToCoord<font color="#000080">(</font>StartAt<font color="#000080">),</font>PosY<font color="#000080">+</font><font color="#800000">100</font><font color="#000080">,
               </font>RealToCoord<font color="#000080">(</font>HighAt<font color="#000080">),</font>PosY<font color="#000080">+</font><font color="#800000">20</font><font color="#000080">);
    </font><font color="#FF0000"><b>IF </b></font>EndAt<font color="#000080">=</font>Infinity
    <font color="#FF0000"><b>THEN </b></font>Line<font color="#000080">(</font>RealToCoord<font color="#000080">(</font>HighAt<font color="#000080">),</font>PosY<font color="#000080">+</font><font color="#800000">20</font><font color="#000080">,</font>PosX<font color="#000080">+</font><font color="#800000">250</font><font color="#000080">,</font>PosY<font color="#000080">+</font><font color="#800000">20</font><font color="#000080">)
    </font><font color="#FF0000"><b>ELSE </b></font>Line<font color="#000080">(</font>RealToCoord<font color="#000080">(</font>HighAt<font color="#000080">),</font>PosY<font color="#000080">+</font><font color="#800000">20</font><font color="#000080">,</font>RealToCoord<font color="#000080">(</font>EndAt<font color="#000080">),</font>PosY<font color="#000080">+</font><font color="#800000">100</font><font color="#000080">);
    </font>SetPtr<font color="#000080">:=</font>Next
  <font color="#FF0000"><b>END
END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>FUNCTION </b></font>FuzzyVar<font color="#000080">.</font>GetMemberShipOf<font color="#000080">;
</font><font color="#FF0000"><b>VAR </b></font>SetPtr <font color="#000080">: </font>FuzzySetList<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>SetPtr<font color="#000080">:=</font>FuzzySets<font color="#000080">;
  </font><font color="#FF0000"><b>WHILE </b></font><font color="#000080">(</font>SetPtr<font color="#000080">&lt;&gt;</font><font color="#FF0000"><b>NIL</b></font><font color="#000080">) </font><font color="#FF0000"><b>AND </b></font><font color="#000080">(</font>SetPtr<font color="#000080">^.</font>SetName<font color="#000080">&lt;&gt;</font>Name<font color="#000080">) </font><font color="#FF0000"><b>DO </b></font>SetPtr<font color="#000080">:=</font>SetPtr<font color="#000080">^.</font>Next<font color="#000080">;
  </font><font color="#FF0000"><b>IF </b></font>SetPtr<font color="#000080">=</font><font color="#FF0000"><b>NIL THEN </b></font>error<font color="#000080">( </font><font color="#800000">'Menge '</font><font color="#000080">+</font>Name<font color="#000080">+</font><font color="#800000">' ist in der Ling. Variablen '
                            </font><font color="#000080">+</font>VarName<font color="#000080">+</font><font color="#800000">' nicht definiert!'</font><font color="#000080">)
  </font><font color="#FF0000"><b>ELSE </b></font>GetMemberShipOf<font color="#000080">:=</font>SetPtr<font color="#000080">^.</font>GetMemberShip<font color="#000080">(</font>CurrentVal<font color="#000080">)
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE  </b></font>FuzzyVar<font color="#000080">.</font>DisplayResultSets<font color="#000080">;
</font><font color="#FF0000"><b>VAR </b></font>SetPtr <font color="#000080">: </font>FuzzySetList<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>SetWriteMode<font color="#000080">(</font>CopyPut<font color="#000080">);
  </font>SetColor<font color="#000080">(</font>ResultCol<font color="#000080">);
  </font>SetPtr<font color="#000080">:=</font>FuzzySets<font color="#000080">;
  </font><font color="#FF0000"><b>WHILE </b></font>SetPtr<font color="#000080">&lt;&gt;</font><font color="#FF0000"><b>NIL DO WITH </b></font>SetPtr<font color="#000080">^ </font><font color="#FF0000"><b>DO
  BEGIN
    IF </b></font>MemberShip<font color="#000080">&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>THEN
    BEGIN
      IF </b></font>StartAt<font color="#000080">&lt;=</font>StartValue <font color="#FF0000"><b>THEN </b></font>Result<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>x <font color="#000080">:= </font>RealToCoord<font color="#000080">(</font>StartValue<font color="#000080">)
      </font><font color="#FF0000"><b>ELSE </b></font>Result<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>x <font color="#000080">:= </font>RealToCoord<font color="#000080">(</font>StartAt<font color="#000080">);
      </font>Result<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>y <font color="#000080">:= </font>PosY<font color="#000080">+</font><font color="#800000">99</font><font color="#000080">;
      </font>Result<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">].</font>x <font color="#000080">:= </font>RealToCoord<font color="#000080">(</font>HighAt<font color="#000080">);
      </font>Result<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">].</font>y <font color="#000080">:= </font>PosY<font color="#000080">+</font><font color="#800000">99 </font><font color="#000080">- </font>Round<font color="#000080">(</font>MemberShip<font color="#000080">*</font><font color="#800000">79</font><font color="#000080">);
      </font><font color="#FF0000"><b>IF </b></font>EndAt<font color="#000080">&gt;=</font>EndValue <font color="#FF0000"><b>THEN </b></font>Result<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">].</font>x <font color="#000080">:= </font>RealToCoord<font color="#000080">(</font>EndValue<font color="#000080">)
      </font><font color="#FF0000"><b>ELSE </b></font>Result<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">].</font>x<font color="#000080">:= </font>RealToCoord<font color="#000080">(</font>EndAt<font color="#000080">);
      </font>Result<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">].</font>y <font color="#000080">:= </font>PosY<font color="#000080">+</font><font color="#800000">99</font><font color="#000080">;
      </font>Result<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">]   := </font>Result<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">];
      </font>FillPoly<font color="#000080">( </font><font color="#800000">4</font><font color="#000080">, </font>Result <font color="#000080">)
    </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
    </font>SetPtr<font color="#000080">:=</font>next
  <font color="#FF0000"><b>END
END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>FuzzyVar<font color="#000080">.</font>Infer<font color="#000080">; </font><font color="#008000"><i>(* alle Regeln antriggern *)
</i></font><font color="#FF0000"><b>VAR
  </b></font>SetPtr <font color="#000080">: </font>FuzzySetList<font color="#000080">;
  </font>RulePtr<font color="#000080">: </font>FuzzyRuleList<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>SetPtr<font color="#000080">:=</font>FuzzySets<font color="#000080">;
  </font><font color="#FF0000"><b>WHILE </b></font>SetPtr<font color="#000080">&lt;&gt;</font><font color="#FF0000"><b>NIL DO WITH </b></font>SetPtr<font color="#000080">^ </font><font color="#FF0000"><b>DO
  BEGIN
    </b></font>RulePtr<font color="#000080">:=</font>Rules<font color="#000080">;
    </font>MemberShip<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
    </font><font color="#FF0000"><b>WHILE </b></font>RulePtr<font color="#000080">&lt;&gt;</font><font color="#FF0000"><b>NIL DO
    BEGIN
      </b></font>MemberShip<font color="#000080">:=</font>RulePtr<font color="#000080">^.</font>Infer<font color="#000080">(</font>MemberShip<font color="#000080">);
      </font>RulePtr<font color="#000080">:=</font>RulePtr<font color="#000080">^.</font>Next
    <font color="#FF0000"><b>END</b></font><font color="#000080">;
    </font>SetPtr<font color="#000080">:=</font>Next
  <font color="#FF0000"><b>END
END</b></font><font color="#000080">; </font><font color="#008000"><i>(* FuzzyVar.Infer *)

</i></font><font color="#FF0000"><b>PROCEDURE </b></font>FuzzyVar<font color="#000080">.</font>Defuzzy<font color="#000080">;
</font><font color="#008000"><i>(* Bestimmung des FlÑchenschwerpunktes der unscharfen *)
(* Ergebnismenge durch AuszÑhlen der Pixel            *)

(* Raster der Rechnergeschwindigkeit anpassen *)
(* grî&aacute;te Rechengenauigkeit bei Raster=1      *)
</i></font><font color="#FF0000"><b>CONST </b></font>Raster <font color="#000080">= </font><font color="#800000">16</font><font color="#000080">;
</font><font color="#FF0000"><b>VAR
  </b></font>X<font color="#000080">,</font>Y<font color="#000080">,</font>XOffSet <font color="#000080">: </font>WORD<font color="#000080">;
  </font>Zaehler<font color="#000080">, </font>Nenner<font color="#000080">: </font>Real<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>DisplayValue<font color="#000080">(</font>Black<font color="#000080">);
  </font>SetFillStyle<font color="#000080">(</font>SolidFill<font color="#000080">, </font>Black<font color="#000080">);
  </font>SetColor<font color="#000080">(</font>Black<font color="#000080">);
  </font>FillPoly<font color="#000080">(</font><font color="#800000">5</font><font color="#000080">, </font>BackGround<font color="#000080">);
  </font>SetFillStyle<font color="#000080">(</font>SolidFill<font color="#000080">, </font>ResultCol<font color="#000080">);
  </font><font color="#FF0000"><b>IF </b></font>DisplayOn
  <font color="#FF0000"><b>THEN </b></font>DisplaySets<font color="#000080">; </font><font color="#008000"><i>(* verzerrt das Ergebnis auf Hercules *)
  </i></font>DisplayResultSets<font color="#000080">;
  </font>Zaehler <font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font>Nenner <font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font>XOffset <font color="#000080">:=</font>PosX<font color="#000080">+</font><font color="#800000">20</font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>X <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>TO </b></font><font color="#800000">210 </font><font color="#FF0000"><b>DIV </b></font>Raster <font color="#FF0000"><b>DO </b></font><font color="#008000"><i>(* FlÑchenschwerpunkt bestimmen *)
   </i></font><font color="#FF0000"><b>for </b></font>Y <font color="#000080">:= </font>PosY <font color="#000080">+ </font><font color="#800000">20 </font><font color="#FF0000"><b>to </b></font>PosY <font color="#000080">+ </font><font color="#800000">100 </font><font color="#FF0000"><b>do
   if </b></font>GetPixel<font color="#000080">(</font>Raster<font color="#000080">*</font>X<font color="#000080">+</font>XOffSet<font color="#000080">,</font>Y<font color="#000080">) = </font>ResultCol <font color="#FF0000"><b>then
   begin
     </b></font>Nenner<font color="#000080">:=</font>Nenner<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">;
     </font>Zaehler<font color="#000080">:=</font>Zaehler<font color="#000080">+</font>Raster<font color="#000080">*</font>X<font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>IF </b></font>Nenner<font color="#000080">=</font><font color="#800000">0 </font><font color="#FF0000"><b>THEN </b></font>CurrentVal<font color="#000080">:=</font><font color="#800000">0
  </font><font color="#FF0000"><b>ELSE </b></font>CurrentVal <font color="#000080">:=</font>Zaehler<font color="#000080">/</font>Nenner<font color="#000080">/</font>Scale<font color="#000080">+</font>StartValue<font color="#000080">;
  </font>DisplayValue<font color="#000080">(</font>ResultCol<font color="#000080">)
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>FuzzyVar<font color="#000080">.</font>DefineRule<font color="#000080">;
</font><font color="#FF0000"><b>VAR </b></font>SetPtr <font color="#000080">: </font>FuzzySetList<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>SetPtr<font color="#000080">:=</font>FuzzySets<font color="#000080">;
  </font><font color="#FF0000"><b>WHILE </b></font><font color="#000080">(</font>SetPtr<font color="#000080">&lt;&gt;</font><font color="#FF0000"><b>NIL</b></font><font color="#000080">) </font><font color="#FF0000"><b>AND </b></font><font color="#000080">(</font>SetPtr<font color="#000080">^.</font>SetName<font color="#000080">&lt;&gt;</font>SetName<font color="#000080">)
  </font><font color="#FF0000"><b>DO </b></font>SetPtr<font color="#000080">:=</font>SetPtr<font color="#000080">^.</font>Next<font color="#000080">;
  </font><font color="#FF0000"><b>IF </b></font>SetPtr<font color="#000080">=</font><font color="#FF0000"><b>NIL THEN </b></font>error<font color="#000080">( </font><font color="#800000">'Menge '</font><font color="#000080">+</font>SetName<font color="#000080">+</font><font color="#800000">' ist in der Ling. '</font><font color="#000080">+
                            </font><font color="#800000">'Variablen '</font><font color="#000080">+</font>VarName<font color="#000080">+</font><font color="#800000">' nicht definiert!'</font><font color="#000080">)
  </font><font color="#FF0000"><b>ELSE </b></font>SetPtr<font color="#000080">^.</font>DefineRule<font color="#000080">(</font>InfType<font color="#000080">,</font>Var1<font color="#000080">,</font>SetName1<font color="#000080">,</font>Var2<font color="#000080">,</font>SetName2<font color="#000080">)
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>FuzzyVar<font color="#000080">.</font>DefineSet<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  IF </b></font>FuzzySets <font color="#000080">= </font><font color="#FF0000"><b>NIL
  THEN </b></font>FuzzySets<font color="#000080">:= </font>new<font color="#000080">(</font>FuzzySetList<font color="#000080">,
                   </font>Init<font color="#000080">(</font>InitName<font color="#000080">,</font>InitStart<font color="#000080">,</font>InitHigh<font color="#000080">,</font>InitEnd<font color="#000080">,</font>InitColor<font color="#000080">))
  </font><font color="#FF0000"><b>ELSE </b></font>FuzzySets<font color="#000080">^.</font>Append<font color="#000080">(</font>InitName<font color="#000080">,</font>InitStart<font color="#000080">,</font>InitHigh<font color="#000080">,</font>InitEnd<font color="#000080">,</font>InitColor<font color="#000080">)
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>CONSTRUCTOR </b></font>FuzzyRule<font color="#000080">.</font>Init<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>Inf_Type <font color="#000080">:=</font>InitInf<font color="#000080">;
  </font>Var1     <font color="#000080">:=</font>InitVar1<font color="#000080">;
  </font>Var2     <font color="#000080">:=</font>InitVar2<font color="#000080">;
  </font>SetName1 <font color="#000080">:=</font>InitName1<font color="#000080">;
  </font>SetName2 <font color="#000080">:=</font>InitName2<font color="#000080">;
  </font>Next     <font color="#000080">:=</font><font color="#FF0000"><b>NIL
END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>FuzzyRule<font color="#000080">.</font>Append<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  IF </b></font>Next<font color="#000080">=</font><font color="#FF0000"><b>NIL
  THEN </b></font>New<font color="#000080">(</font>Next<font color="#000080">,</font>Init<font color="#000080">(</font>InitInf<font color="#000080">,</font>InitVar1<font color="#000080">,</font>InitName1<font color="#000080">,</font>InitVar1<font color="#000080">,</font>InitName2<font color="#000080">))
  </font><font color="#FF0000"><b>ELSE </b></font>Next<font color="#000080">^.</font>Append<font color="#000080">(</font>InitInf<font color="#000080">,</font>InitVar1<font color="#000080">,</font>InitName1<font color="#000080">,</font>InitVar2<font color="#000080">,</font>InitName2<font color="#000080">)
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>FUNCTION </b></font>FuzzyRule<font color="#000080">.</font>Infer<font color="#000080">; </font><font color="#008000"><i>(* einzelne Regel abarbeiten *)
</i></font><font color="#FF0000"><b>BEGIN
  </b></font>Infer<font color="#000080">:=</font>Inf_Type<font color="#000080">(</font>HomeSetValue<font color="#000080">, </font>Var1<font color="#000080">^.</font>GetMemberShipOf<font color="#000080">(</font>SetName1<font color="#000080">),
                                </font>Var2<font color="#000080">^.</font>GetMemberShipOf<font color="#000080">(</font>SetName2<font color="#000080">));
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>BEGIN </b></font><font color="#008000"><i>(* Fuzzy-Logic-Unit *)
  (* Test auf Herculeskarte wg. Farbe fÅr Ergebnismengen *)
  </i></font>Regs<font color="#000080">.</font>ah<font color="#000080">:=</font><font color="#800000">15</font><font color="#000080">;
  </font>Intr<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">,</font>Regs<font color="#000080">);
  </font><font color="#FF0000"><b>IF </b></font>Regs<font color="#000080">.</font>AL<font color="#000080">=</font><font color="#800000">7 </font><font color="#FF0000"><b>THEN </b></font><font color="#008000"><i>(* Hercules-Karte *)
  </i></font><font color="#FF0000"><b>BEGIN
    </b></font>ResultCol <font color="#000080">:=</font>Blue<font color="#000080">;
    </font>DisplayOn <font color="#000080">:=</font>FALSE<font color="#000080">; </font><font color="#008000"><i>(* siehe Artikel c't 3/91 *)
  </i></font><font color="#FF0000"><b>END
  ELSE </b></font><font color="#008000"><i>(* EGA-/VGA-Karte *)
  </i></font><font color="#FF0000"><b>BEGIN
    </b></font>ResultCol <font color="#000080">:=</font>LightGray<font color="#000080">;
    </font>DisplayOn <font color="#000080">:=</font>TRUE
  <font color="#FF0000"><b>END
END</b></font><font color="#000080">.

</font><font color="#008000"><i>{ --------------------------    DEMO PROGRAM   ------------------------ }
{             I HOPE THAT YOU CAN READ GERMAN !!                        }

</i></font><font color="#FF0000"><b>program </b></font>fuzzy_inf_demo<font color="#000080">; </font><font color="#008000"><i>(* c't 3/91 / it / C.v.Altrock, RWTH Aachen *)
</i></font><font color="#FF0000"><b>uses </b></font>Graph<font color="#000080">, </font>Crt<font color="#000080">, </font>Fuzzy<font color="#000080">;
</font><font color="#FF0000"><b>type </b></font>InputType <font color="#000080">= (</font>temp<font color="#000080">,</font>press<font color="#000080">,</font>valve<font color="#000080">);
</font><font color="#FF0000"><b>var
  </b></font>GraphDriver<font color="#000080">, </font>GraphMode<font color="#000080">, </font>RK <font color="#000080">: </font>Integer<font color="#000080">;
  </font>StepWidth     <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font>InputType<font color="#000080">] </font><font color="#FF0000"><b>OF </b></font>Real<font color="#000080">;
  </font>i<font color="#000080">,</font>Input       <font color="#000080">: </font>InputType<font color="#000080">;
  </font>Ch            <font color="#000080">: </font>Char<font color="#000080">;
  </font>FuzzyVars     <font color="#000080">: </font><font color="#FF0000"><b>ARRAY</b></font><font color="#000080">[</font>InputType<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>FuzzyVarList<font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>InitGrafix<font color="#000080">;
</font><font color="#008000"><i>(* Grafikmodus initialisieren und Hilfetexte schreiben *)
</i></font><font color="#FF0000"><b>BEGIN
  </b></font>GraphDriver <font color="#000080">:= </font>Detect<font color="#000080">;
  </font>InitGraph<font color="#000080">(</font>GraphDriver<font color="#000080">,</font>GraphMode<font color="#000080">,</font><font color="#800000">'\turbo\tp'</font><font color="#000080">);
  </font>SetTextJustify<font color="#000080">(</font>CenterText<font color="#000080">,</font>CenterText<font color="#000080">);
  </font>OutTextXY<font color="#000080">( </font>GetMaxX <font color="#FF0000"><b>DIV </b></font><font color="#800000">2</font><font color="#000080">, </font><font color="#800000">10</font><font color="#000080">, </font><font color="#800000">'Demonstration der MAX-PROD-'
             </font><font color="#000080">+</font><font color="#800000">'Inferenz (c''t 3/91 / C.v.Altrock, RWTH Aachen)'</font><font color="#000080">);
  </font>OutTextXY<font color="#000080">( </font><font color="#800000">500</font><font color="#000080">, </font><font color="#800000">50</font><font color="#000080">, </font><font color="#800000">'Eingabe Temperatur: ['</font><font color="#000080">+</font>Chr<font color="#000080">(</font><font color="#800000">24</font><font color="#000080">)+</font><font color="#800000">']' </font><font color="#000080">);
  </font>OutTextXY<font color="#000080">( </font><font color="#800000">500</font><font color="#000080">, </font><font color="#800000">65</font><font color="#000080">, </font><font color="#800000">'Eingabe Druck: ['</font><font color="#000080">+</font>Chr<font color="#000080">(</font><font color="#800000">25</font><font color="#000080">)+</font><font color="#800000">']' </font><font color="#000080">);
  </font>OutTextXY<font color="#000080">( </font><font color="#800000">500</font><font color="#000080">, </font><font color="#800000">80</font><font color="#000080">, </font><font color="#800000">'Erhîhen: ['</font><font color="#000080">+</font>Chr<font color="#000080">(</font><font color="#800000">26</font><font color="#000080">)+</font><font color="#800000">']' </font><font color="#000080">);
  </font>OutTextXY<font color="#000080">( </font><font color="#800000">500</font><font color="#000080">, </font><font color="#800000">95</font><font color="#000080">, </font><font color="#800000">'Vermindern: ['</font><font color="#000080">+</font>Chr<font color="#000080">(</font><font color="#800000">27</font><font color="#000080">)+</font><font color="#800000">']' </font><font color="#000080">);
  </font>OutTextXY<font color="#000080">( </font><font color="#800000">500</font><font color="#000080">, </font><font color="#800000">110</font><font color="#000080">, </font><font color="#800000">'Schrittweite: [Bild'</font><font color="#000080">+</font>Chr<font color="#000080">(</font><font color="#800000">24</font><font color="#000080">)+</font>Chr<font color="#000080">(</font><font color="#800000">25</font><font color="#000080">)+</font><font color="#800000">']' </font><font color="#000080">);
  </font>Rectangle<font color="#000080">(</font><font color="#800000">400</font><font color="#000080">,</font><font color="#800000">40</font><font color="#000080">,</font><font color="#800000">600</font><font color="#000080">,</font><font color="#800000">120</font><font color="#000080">);
</font><font color="#FF0000"><b>END</b></font><font color="#000080">; </font><font color="#008000"><i>(* InitGrafix *)

</i></font><font color="#FF0000"><b>begin </b></font><font color="#008000"><i>(* main *)
  </i></font>InitGrafix<font color="#000080">;

  </font><font color="#008000"><i>(* Definition der linguistischen Variablen &quot;Temperatur&quot; *)
  </i></font>FuzzyVars<font color="#000080">[</font>temp<font color="#000080">]:= </font>new<font color="#000080">(</font>FuzzyVarList<font color="#000080">,
                    </font>Init<font color="#000080">(</font><font color="#800000">'Temperatur'</font><font color="#000080">,</font><font color="#800000">20</font><font color="#000080">,</font><font color="#800000">30</font><font color="#000080">,</font><font color="#800000">7</font><font color="#000080">,</font><font color="#800000">400</font><font color="#000080">,</font><font color="#800000">1000</font><font color="#000080">,</font><font color="#800000">650</font><font color="#000080">,</font><font color="#800000">'&oslash;C'</font><font color="#000080">));
  </font><font color="#FF0000"><b>WITH </b></font>FuzzyVars<font color="#000080">[</font>temp<font color="#000080">]^ </font><font color="#FF0000"><b>DO
  BEGIN
    </b></font><font color="#008000"><i>(* Definition und Anzeige der Fuzzy Sets *)
    </i></font>DefineSet<font color="#000080">(</font><font color="#800000">'niedrig'</font><font color="#000080">,-</font>Infinity<font color="#000080">,</font><font color="#800000">500</font><font color="#000080">,</font><font color="#800000">650</font><font color="#000080">,</font>Blue<font color="#000080">);
    </font>DefineSet<font color="#000080">(</font><font color="#800000">'mittel'</font><font color="#000080">,</font><font color="#800000">500</font><font color="#000080">,</font><font color="#800000">650</font><font color="#000080">,</font><font color="#800000">800</font><font color="#000080">,</font>LightGreen<font color="#000080">);
    </font>DefineSet<font color="#000080">(</font><font color="#800000">'hoch'</font><font color="#000080">,</font><font color="#800000">650</font><font color="#000080">,</font><font color="#800000">800</font><font color="#000080">,</font><font color="#800000">950</font><font color="#000080">,</font>Red<font color="#000080">);
    </font>DefineSet<font color="#000080">(</font><font color="#800000">'sehr_hoch'</font><font color="#000080">,</font><font color="#800000">800</font><font color="#000080">,</font><font color="#800000">950</font><font color="#000080">,</font>Infinity<font color="#000080">,</font>Yellow<font color="#000080">);
    </font>DisplaySets<font color="#000080">; </font>DisplayValue<font color="#000080">(</font>ValueCol<font color="#000080">);
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font><font color="#008000"><i>(* Definition der linguistischen Variablen &quot;Druck&quot; *)
  </i></font>FuzzyVars<font color="#000080">[</font>press<font color="#000080">]:= </font>new<font color="#000080">(</font>FuzzyVarList<font color="#000080">,
                     </font>Init<font color="#000080">(</font><font color="#800000">'Druck'</font><font color="#000080">,</font><font color="#800000">20</font><font color="#000080">,</font><font color="#800000">210</font><font color="#000080">,</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">38</font><font color="#000080">,</font><font color="#800000">41</font><font color="#000080">,</font><font color="#800000">40</font><font color="#000080">,</font><font color="#800000">'bar'</font><font color="#000080">));
  </font><font color="#FF0000"><b>WITH </b></font>FuzzyVars<font color="#000080">[</font>press<font color="#000080">]^ </font><font color="#FF0000"><b>DO
  BEGIN
    </b></font><font color="#008000"><i>(* Definition und Anzeige der Fuzzy Sets *)
    </i></font>DefineSet<font color="#000080">(</font><font color="#800000">'unter_normal'</font><font color="#000080">,-</font>Infinity<font color="#000080">,</font><font color="#800000">39</font><font color="#000080">,</font><font color="#800000">40</font><font color="#000080">,</font>Blue<font color="#000080">);
    </font>DefineSet<font color="#000080">(</font><font color="#800000">'normal'</font><font color="#000080">,</font><font color="#800000">39</font><font color="#000080">,</font><font color="#800000">40</font><font color="#000080">,</font><font color="#800000">41</font><font color="#000080">,</font>LightGreen<font color="#000080">);
    </font>DefineSet<font color="#000080">(</font><font color="#800000">'Åber_normal'</font><font color="#000080">,</font><font color="#800000">40</font><font color="#000080">,</font><font color="#800000">41</font><font color="#000080">,</font>Infinity<font color="#000080">,</font>Red<font color="#000080">);
    </font>DisplaySets<font color="#000080">; </font>DisplayValue<font color="#000080">(</font>ValueCol<font color="#000080">);
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font><font color="#008000"><i>(* Definition der linguistischen Variablen &quot;Methanventil&quot; *)
  </i></font>FuzzyVars<font color="#000080">[</font>valve<font color="#000080">]:= </font>new<font color="#000080">(</font>FuzzyVarList<font color="#000080">,
                     </font>Init<font color="#000080">(</font><font color="#800000">'Methanventil'</font><font color="#000080">,</font><font color="#800000">340</font><font color="#000080">,</font><font color="#800000">170</font><font color="#000080">,</font><font color="#800000">7</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">12</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">'m3/h'</font><font color="#000080">));
  </font><font color="#FF0000"><b>WITH </b></font>FuzzyVars<font color="#000080">[</font>valve<font color="#000080">]^ </font><font color="#FF0000"><b>DO
  BEGIN
    </b></font><font color="#008000"><i>(* Definition der Fuzzy Sets *)
    </i></font>DefineSet<font color="#000080">(</font><font color="#800000">'gedrosselt'</font><font color="#000080">,-</font>Infinity<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">4</font><font color="#000080">,</font>Blue<font color="#000080">);
    </font>DefineSet<font color="#000080">(</font><font color="#800000">'halboffen'</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">8</font><font color="#000080">,</font>Green<font color="#000080">);
    </font>DefineSet<font color="#000080">(</font><font color="#800000">'mittel'</font><font color="#000080">,</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">8</font><font color="#000080">,</font><font color="#800000">12</font><font color="#000080">,</font>LightGreen<font color="#000080">);
    </font>DefineSet<font color="#000080">(</font><font color="#800000">'offen'</font><font color="#000080">,</font><font color="#800000">8</font><font color="#000080">,</font><font color="#800000">12</font><font color="#000080">,</font>Infinity<font color="#000080">,</font>Yellow<font color="#000080">);
    </font><font color="#008000"><i>(* Definition der Inferenzregeln *)
    (* 1 IF Temperatur ist niedrig OR Druck ist unter_normal
         THEN Methanventil ist offen                         *)
    </i></font>DefineRule<font color="#000080">(</font><font color="#800000">'offen'</font><font color="#000080">,</font>OR_MaxMax<font color="#000080">, </font>FuzzyVars<font color="#000080">[</font>temp<font color="#000080">],</font><font color="#800000">'niedrig'</font><font color="#000080">,
                                  </font>FuzzyVars<font color="#000080">[</font>press<font color="#000080">],</font><font color="#800000">'unter_normal'</font><font color="#000080">);
    </font><font color="#008000"><i>(* 2 IF Temperatur ist sehr_hoch OR Druck ist Åber_normal
         THEN Methanventil ist gedrosselt                    *)
    </i></font>DefineRule<font color="#000080">(</font><font color="#800000">'gedrosselt'</font><font color="#000080">,</font>OR_MaxMax<font color="#000080">, </font>FuzzyVars<font color="#000080">[</font>temp<font color="#000080">],</font><font color="#800000">'sehr_hoch'</font><font color="#000080">,
                                       </font>FuzzyVars<font color="#000080">[</font>press<font color="#000080">],</font><font color="#800000">'Åber_normal'</font><font color="#000080">);
    </font><font color="#008000"><i>(* 3 IF Temperatur ist hoch AND Druck ist normal
         THEN Methanventil ist halboffen                     *)
    </i></font>DefineRule<font color="#000080">(</font><font color="#800000">'halboffen'</font><font color="#000080">,</font>AND_MaxMin<font color="#000080">, </font>FuzzyVars<font color="#000080">[</font>temp<font color="#000080">],</font><font color="#800000">'hoch'</font><font color="#000080">,
                                       </font>FuzzyVars<font color="#000080">[</font>press<font color="#000080">],</font><font color="#800000">'normal'</font><font color="#000080">);
    </font><font color="#008000"><i>(* 4 IF Temperatur ist mittel AND Druck ist normal
         THEN Methanventil ist mittel                        *)
    </i></font>DefineRule<font color="#000080">(</font><font color="#800000">'mittel'</font><font color="#000080">,</font>AND_MaxMin<font color="#000080">, </font>FuzzyVars<font color="#000080">[</font>temp<font color="#000080">],</font><font color="#800000">'mittel'</font><font color="#000080">,
                                       </font>FuzzyVars<font color="#000080">[</font>press<font color="#000080">],</font><font color="#800000">'normal'</font><font color="#000080">);
    </font><font color="#FF0000"><b>IF </b></font>DisplayOn <font color="#FF0000"><b>THEN </b></font>DisplaySets<font color="#000080">;
    </font>DisplayValue<font color="#000080">(</font>ValueCol<font color="#000080">);
    </font>Infer<font color="#000080">;
    </font>Defuzzy<font color="#000080">;
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font>SetColor<font color="#000080">( </font>Red <font color="#000080">);
  </font>OutTextXY<font color="#000080">( </font><font color="#800000">540</font><font color="#000080">, </font><font color="#800000">330</font><font color="#000080">, </font><font color="#800000">'(Resultat der Inferenz)' </font><font color="#000080">);
  </font><font color="#008000"><i>(* Schrittweiten fÅr Druck und Temperatur intitialisieren *)
  </i></font>StepWidth<font color="#000080">[</font>temp<font color="#000080">]:=</font><font color="#800000">25</font><font color="#000080">;
  </font>StepWidth<font color="#000080">[</font>press<font color="#000080">]:=</font><font color="#800000">0.25</font><font color="#000080">;

  </font>Input<font color="#000080">:= </font>temp<font color="#000080">;
  </font>Ch <font color="#000080">:= </font>ReadKey<font color="#000080">;
  </font><font color="#FF0000"><b>while </b></font>Ch <font color="#000080">= </font><font color="#800000">#0 </font><font color="#FF0000"><b>do
  begin
    </b></font>RK <font color="#000080">:= </font>ord<font color="#000080">(</font>ReadKey<font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font>RK <font color="#000080">= </font><font color="#800000">72 </font><font color="#FF0000"><b>then </b></font>input <font color="#000080">:= </font>temp
    <font color="#FF0000"><b>else if </b></font>RK <font color="#000080">= </font><font color="#800000">80 </font><font color="#FF0000"><b>then </b></font>input <font color="#000080">:= </font>press
    <font color="#FF0000"><b>else if </b></font><font color="#000080">(</font>RK<font color="#000080">=</font><font color="#800000">73</font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font>StepWidth<font color="#000080">[</font>input<font color="#000080">]:=</font>StepWidth<font color="#000080">[</font>input<font color="#000080">] * </font><font color="#800000">2
    </font><font color="#FF0000"><b>else if </b></font><font color="#000080">(</font>RK<font color="#000080">=</font><font color="#800000">81</font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font>Stepwidth<font color="#000080">[</font>input<font color="#000080">]:= </font>StepWidth<font color="#000080">[</font>input<font color="#000080">] / </font><font color="#800000">2
    </font><font color="#FF0000"><b>else if </b></font><font color="#000080">(</font>RK<font color="#000080">=</font><font color="#800000">75</font><font color="#000080">) </font><font color="#FF0000"><b>OR </b></font><font color="#000080">(</font>RK<font color="#000080">=</font><font color="#800000">77</font><font color="#000080">) </font><font color="#FF0000"><b>then
    begin
      </b></font><font color="#008000"><i>(* 1. Eingangsvariable Ñndern *)
      </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>RK<font color="#000080">=</font><font color="#800000">75</font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font>FuzzyVars<font color="#000080">[</font>Input<font color="#000080">]^.</font>Change<font color="#000080">(-</font>StepWidth<font color="#000080">[</font>input<font color="#000080">])
      </font><font color="#FF0000"><b>ELSE </b></font>FuzzyVars<font color="#000080">[</font>Input<font color="#000080">]^.</font>Change<font color="#000080">(</font>StepWidth<font color="#000080">[</font>input<font color="#000080">]);
      </font><font color="#008000"><i>(* 2. Inferenz durchfÅhren *)
      </i></font>FuzzyVars<font color="#000080">[</font>valve<font color="#000080">]^.</font>Infer<font color="#000080">;
      </font><font color="#008000"><i>(* 3. Ergebnismenge defuzzifizieren *)
      </i></font>FuzzyVars<font color="#000080">[</font>valve<font color="#000080">]^.</font>Defuzzy
    <font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>Ch <font color="#000080">:= </font>ReadKey
  <font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>CloseGraph
<font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to MISC SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0087.PAS">Original</a><b>]</b></p></body>
</html>
