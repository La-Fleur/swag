<html>
<head><title> "Simulate Phone Ringing" by BJORN FELTEN</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to MISC SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0084.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
 &gt; I stumbled across the correct sequence

 Well, why don't we let some more people stumble in on our little secret? :)

Something like this might do the trick. The brute delay code 'asm hlt end',
that simply waits for the next interrupt (should be the timer IRQ) to occur,
may not work on some machines -- especially when running some multitaskers.
If so it can be changed to 'delay(50)' or something like that.
}

</i></font><font color="#FF0000"><b>program </b></font>Ring<font color="#000080">;
</font><font color="#FF0000"><b>uses </b></font>crt<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>i<font color="#000080">:</font>word<font color="#000080">;
</font><font color="#FF0000"><b>begin
  for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">6 </font><font color="#FF0000"><b>do
  begin
      </b></font>sound<font color="#000080">(</font><font color="#800000">523</font><font color="#000080">); </font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">hlt </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>Delay<font color="#000080">(</font><font color="#800000">50</font><font color="#000080">);
      </font>sound<font color="#000080">(</font><font color="#800000">659</font><font color="#000080">); </font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">hlt </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>Delay<font color="#000080">(</font><font color="#800000">50</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>nosound
<font color="#FF0000"><b>end</b></font><font color="#000080">.

</font><font color="#008000"><i>{ Or, for those of you that don't like the crt unit, here's the same thing in
  BASM: }

</i></font><font color="#FF0000"><b>program </b></font>Ring<font color="#000080">;
</font><font color="#FF0000"><b>begin
  asm
    </b></font><font color="#FF00FF">mov   al,0B6h
    out   43h,al
    in    al,61h
    or    al,3
    out   61h,al
    mov   cx,7
    mov   dx,42h
@the_loop:
    mov   al,0E9h
    out   dx,al
    mov   al,8
    out   dx,al
    hlt
    mov   al,12h
    out   dx,al
    mov   al,7
    out   dx,al
    hlt
    loop  @the_loop
    in    al,61h
    and   al,0FCh
    out   61h,al
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to MISC SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0084.PAS">Original</a><b>]</b></p></body>
</html>
