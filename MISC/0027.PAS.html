<html>
<head><title> "Fast Anagrams" by MARK OUELLET</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to MISC SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0027.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{$A+,B+,D+,E-,F+,G+,I+,L+,N-,O+,P+,Q+,R+,S+,T+,V-,X+,Y+}
{$M 65520,100000,655360}
{
  Copyright 1993 Mark Ouellet. All rights reserved.

  May be freely distributed and incorporated in your own code, in part
  or in it's entirety as long as due credit is given to it's author

  All I ask is that you state my name if you use ALL or PART of it in
  your own code.
}

</i></font><font color="#FF0000"><b>Program </b></font>FastAnagrams<font color="#000080">;

</font><font color="#FF0000"><b>Uses
  </b></font>Crt<font color="#000080">;

</font><font color="#FF0000"><b>Type
  </b></font>StrPointer <font color="#000080">= ^</font><font color="#FF0000"><b>String</b></font><font color="#000080">;
  </font>NodePtr <font color="#000080">= ^</font>Node<font color="#000080">;
  </font>Node    <font color="#000080">= </font><font color="#FF0000"><b>Record
    </b></font>Anagram <font color="#000080">: </font>StrPointer<font color="#000080">;
    </font>Next    <font color="#000080">: </font>NodePtr<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Var
  </b></font>OldAnagrams <font color="#000080">: </font>NodePtr<font color="#000080">;
  </font>NewAnagrams <font color="#000080">: </font>NodePtr<font color="#000080">;
  </font>OldCursor <font color="#000080">: </font>NodePtr<font color="#000080">;
  </font>NewCursor <font color="#000080">: </font>NodePtr<font color="#000080">;
  </font>InputStr <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>GetInput<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>ClrScr<font color="#000080">;
  </font>Write<font color="#000080">(</font><font color="#800000">'Input your String: '</font><font color="#000080">);
  </font>readln<font color="#000080">(</font>InputStr<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>FindAnagrams<font color="#000080">;

</font><font color="#FF0000"><b>Var
  </b></font>OldIndex <font color="#000080">: </font>Word<font color="#000080">;
  </font>NewIndex <font color="#000080">: </font>Word<font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>OldAnagrams <font color="#000080">:= </font><font color="#FF0000"><b>NIL</b></font><font color="#000080">;
  </font>OldCursor   <font color="#000080">:= </font><font color="#FF0000"><b>NIL</b></font><font color="#000080">;
  </font>NewAnagrams <font color="#000080">:= </font><font color="#FF0000"><b>NIL</b></font><font color="#000080">;
  </font>NewCursor   <font color="#000080">:= </font><font color="#FF0000"><b>NIL</b></font><font color="#000080">;

  </font>New<font color="#000080">(</font>OldCursor<font color="#000080">);
  </font>OldCursor<font color="#000080">^.</font>Next <font color="#000080">:= </font>OldAnagrams<font color="#000080">;
  </font>GetMem<font color="#000080">(</font>OldCursor<font color="#000080">^.</font>Anagram<font color="#000080">, </font><font color="#800000">2</font><font color="#000080">);
  </font>OldCursor<font color="#000080">^.</font>Anagram<font color="#000080">^ := </font>Copy<font color="#000080">(</font>InputStr<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
  </font>OldAnagrams <font color="#000080">:= </font>OldCursor<font color="#000080">;

  </font><font color="#FF0000"><b>For </b></font>OldIndex <font color="#000080">:= </font><font color="#800000">2 </font><font color="#FF0000"><b>to </b></font>Ord<font color="#000080">(</font>InputStr<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]) </font><font color="#FF0000"><b>do
  begin
    </b></font>OldCursor <font color="#000080">:= </font>OldAnagrams<font color="#000080">;
    </font><font color="#FF0000"><b>While </b></font>OldCursor <font color="#000080">&lt;&gt; </font><font color="#FF0000"><b>NIL do
    begin
      For </b></font>NewIndex <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>Ord<font color="#000080">(</font>OldCursor<font color="#000080">^.</font>Anagram<font color="#000080">^[</font><font color="#800000">0</font><font color="#000080">])+</font><font color="#800000">1 </font><font color="#FF0000"><b>do
      begin
        </b></font>New<font color="#000080">(</font>NewCursor<font color="#000080">);
        </font>NewCursor<font color="#000080">^.</font>Next <font color="#000080">:= </font>NewAnagrams<font color="#000080">;
        </font>getmem<font color="#000080">(</font>NewCursor<font color="#000080">^.</font>Anagram<font color="#000080">, </font>sizeof<font color="#000080">(</font>OldCursor<font color="#000080">^.</font>Anagram<font color="#000080">^)+</font><font color="#800000">1</font><font color="#000080">);
        </font>NewCursor<font color="#000080">^.</font>Anagram<font color="#000080">^ := </font>OldCursor<font color="#000080">^.</font>Anagram<font color="#000080">^;
        </font>Insert<font color="#000080">(</font>Copy<font color="#000080">(</font>InputStr<font color="#000080">, </font>OldIndex<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">),
          </font>NewCursor<font color="#000080">^.</font>Anagram<font color="#000080">^, </font>NewIndex<font color="#000080">);
        </font>NewAnagrams <font color="#000080">:= </font>NewCursor<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font>OldCursor <font color="#000080">:= </font>OldCursor<font color="#000080">^.</font>Next<font color="#000080">;
      </font>FreeMem<font color="#000080">(</font>OldAnagrams<font color="#000080">^.</font>Anagram<font color="#000080">, </font>Ord<font color="#000080">(</font>OldAnagrams<font color="#000080">^.</font>Anagram<font color="#000080">^[</font><font color="#800000">0</font><font color="#000080">])+</font><font color="#800000">1</font><font color="#000080">);
      </font>OldAnagrams<font color="#000080">^.</font>Anagram <font color="#000080">:= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">;
      </font>Dispose<font color="#000080">(</font>OldAnagrams<font color="#000080">);
      </font>OldAnagrams <font color="#000080">:= </font>OldCursor<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>OldAnagrams <font color="#000080">:= </font>NewAnagrams<font color="#000080">;
    </font>OldCursor   <font color="#000080">:= </font>OldAnagrams<font color="#000080">;
    </font>NewAnagrams <font color="#000080">:= </font><font color="#FF0000"><b>NIL</b></font><font color="#000080">;
    </font>NewCursor   <font color="#000080">:= </font><font color="#FF0000"><b>NIL</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>OutputAnagrams<font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>Count <font color="#000080">: </font>Word<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Count <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>OldCursor <font color="#000080">:= </font>OldAnagrams<font color="#000080">;
  </font><font color="#FF0000"><b>While </b></font>OldCursor <font color="#000080">&lt;&gt; </font><font color="#FF0000"><b>NIL do
  begin
    </b></font>OldCursor <font color="#000080">:= </font>OldCursor<font color="#000080">^.</font>Next<font color="#000080">;
    </font>Writeln<font color="#000080">(</font>OldAnagrams<font color="#000080">^.</font>Anagram<font color="#000080">^);
    </font>FreeMem<font color="#000080">(</font>OldAnagrams<font color="#000080">^.</font>Anagram<font color="#000080">, </font>sizeof<font color="#000080">(</font>OldAnagrams<font color="#000080">^.</font>Anagram<font color="#000080">^));
    </font>dispose<font color="#000080">(</font>OldAnagrams<font color="#000080">);
    </font>OldAnagrams <font color="#000080">:= </font>OldCursor<font color="#000080">;
    </font>Inc<font color="#000080">(</font>Count<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>Writeln<font color="#000080">;
  </font>Writeln<font color="#000080">(</font>Count<font color="#000080">, </font><font color="#800000">' Anagrams found.'</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>GetInput<font color="#000080">;
  </font>Writeln<font color="#000080">;
  </font>Writeln<font color="#000080">(</font>MaxAvail<font color="#000080">, </font><font color="#800000">' Available memory.'</font><font color="#000080">);
  </font>Writeln<font color="#000080">;
  </font>FindAnagrams<font color="#000080">;
  </font>OutputAnagrams<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to MISC SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0027.PAS">Original</a><b>]</b></p></body>
</html>
