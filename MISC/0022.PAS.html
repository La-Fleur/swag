<html>
<head><title> "Randmom Number Function" by KENT BRIGGS</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to MISC SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0022.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#000080">===========================================================================
 </font>BBS<font color="#000080">: </font>Canada Remote Systems
Date<font color="#000080">: </font><font color="#800000">06</font><font color="#000080">-</font><font color="#800000">18</font><font color="#000080">-</font><font color="#800000">93 </font><font color="#000080">(</font><font color="#800000">23</font><font color="#000080">:</font><font color="#800000">27</font><font color="#000080">)             </font>Number<font color="#000080">: </font><font color="#800000">26893
</font>From<font color="#000080">: </font>KENT BRIGGS                  Refer<font color="#800000">#</font><font color="#000080">: </font>NONE
  <font color="#FF0000"><b>To</b></font><font color="#000080">: </font>BRIAN PAPE                    Recvd<font color="#000080">: </font>NO  
Subj<font color="#000080">: </font>RANDOM NUMBERS                 Conf<font color="#000080">: (</font><font color="#800000">1221</font><font color="#000080">) </font>F<font color="#000080">-</font><font color="#FF0000"><b>PASCAL
</b></font><font color="#000080">---------------------------------------------------------------------------
 -=&gt; </font>Quoting Brian Pape <font color="#FF0000"><b>to </b></font>Erik Johnson <font color="#000080">&lt;=-

 </font>BP<font color="#000080">&gt; </font>Please<font color="#000080">- </font>I <font color="#000080">*</font>am<font color="#000080">* </font>looking <font color="#FF0000"><b>for </b></font>the source code <font color="#FF0000"><b>to </b></font>a decent random number
 BP<font color="#000080">&gt; </font>generator so that I<font color="#800000">'m not dependant on Borland.

 </font>Brian<font color="#000080">, </font>Borland did change their random<font color="#000080">:</font>word <font color="#FF0000"><b>function </b></font>when they released
 <font color="#800000">7.0.  </font>However the random<font color="#000080">:</font>real <font color="#FF0000"><b>function</b></font><font color="#000080">, </font>the randomize <font color="#FF0000"><b>procedure</b></font><font color="#000080">, </font><font color="#FF0000"><b>and </b></font>their
 method <font color="#FF0000"><b>of </b></font>updating randseed remain the same <font color="#FF0000"><b>as </b></font>ver <font color="#800000">6.0.  </font>Using DJ Murdoch<font color="#800000">'s
 </font>CycleRandseed <font color="#FF0000"><b>procedure and </b></font>reverse engineering TP6<font color="#800000">'s and TP7'</font>s Random
 functions<font color="#000080">, </font>I came up <font color="#FF0000"><b>with </b></font>the following routines<font color="#000080">:

</font><font color="#FF0000"><b>const </b></font>rseed<font color="#000080">: </font>longint <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>randomize67<font color="#000080">;      </font><font color="#008000"><i>{TP 6.0 &amp; 7.0 seed generator}
</i></font><font color="#FF0000"><b>begin
  </b></font>reg<font color="#000080">.</font>ah<font color="#000080">:=</font><font color="#800000">$2c</font><font color="#000080">;
  </font>msdos<font color="#000080">(</font>reg<font color="#000080">);    </font><font color="#008000"><i>{get time: ch=hour,cl=min,dh=sec,dl=sec/100}
  </i></font>rseed<font color="#000080">:=</font>reg<font color="#000080">.</font>dx<font color="#000080">;
  </font>rseed<font color="#000080">:=(</font>rseed <font color="#FF0000"><b>shl </b></font><font color="#800000">16</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font>reg<font color="#000080">.</font>cx<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>rand_word6<font color="#000080">(</font>x<font color="#000080">: </font>word<font color="#000080">): </font>word<font color="#000080">;    </font><font color="#008000"><i>{TP 6.0 RNG: word}
</i></font><font color="#FF0000"><b>begin
  </b></font>rseed<font color="#000080">:=</font>rseed<font color="#000080">*</font><font color="#800000">134775813</font><font color="#000080">+</font><font color="#800000">1</font><font color="#000080">;
  </font>rand_word6<font color="#000080">:=(</font>rseed <font color="#FF0000"><b>shr </b></font><font color="#800000">16</font><font color="#000080">) </font><font color="#FF0000"><b>mod </b></font>x<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>rand_word7<font color="#000080">(</font>x<font color="#000080">: </font>word<font color="#000080">): </font>word<font color="#000080">;    </font><font color="#008000"><i>{TP 7.0 RNG: word}
</i></font><font color="#FF0000"><b>begin
  </b></font>rseed<font color="#000080">:=</font>rseed<font color="#000080">*</font><font color="#800000">134775813</font><font color="#000080">+</font><font color="#800000">1</font><font color="#000080">;
  </font>rand_word7<font color="#000080">:=((</font>rseed <font color="#FF0000"><b>shr </b></font><font color="#800000">16</font><font color="#000080">)*</font>x<font color="#000080">+((</font>rseed <font color="#FF0000"><b>and </b></font><font color="#800000">$ffff</font><font color="#000080">)*</font>x <font color="#FF0000"><b>shr </b></font><font color="#800000">16</font><font color="#000080">)) </font><font color="#FF0000"><b>shr </b></font><font color="#800000">16</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>rand_real67<font color="#000080">: </font>real<font color="#000080">;    </font><font color="#008000"><i>{TP 6.0 &amp; 7.0 RNG: real}
</i></font><font color="#FF0000"><b>begin
  </b></font>rseed<font color="#000080">:=</font>rseed<font color="#000080">*</font><font color="#800000">134775813</font><font color="#000080">+</font><font color="#800000">1</font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>rseed<font color="#000080">&lt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>rand_real67<font color="#000080">:=</font>rseed<font color="#000080">/</font><font color="#800000">4294967296.0</font><font color="#000080">+</font><font color="#800000">1.0 </font><font color="#FF0000"><b>else
  </b></font>rand_real67<font color="#000080">:=</font>rseed<font color="#000080">/</font><font color="#800000">4294967296.0</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>If </b></font>anyone can improve <font color="#FF0000"><b>on </b></font>these please post some code here<font color="#000080">, </font>thanks<font color="#000080">.

</font>___ Blue Wave<font color="#000080">/</font>QWK v2<font color="#000080">.</font><font color="#800000">12
</font><font color="#000080">--- </font>Renegade v06<font color="#000080">-</font><font color="#800000">11 </font>Beta

 <font color="#000080">* </font>Origin<font color="#000080">: </font>Snipe<font color="#800000">'s Castle BBS, Waco TX   (817)-757-0169 (1:388/26)
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to MISC SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0022.PAS">Original</a><b>]</b></p></body>
</html>
