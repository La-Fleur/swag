<html>
<head><title> "Dos Programming FAQ" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to FAQ SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0002.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#000080">=====================
</font>section <font color="#800000">1. </font>General questions
    <font color="#800000">101. </font>Why won<font color="#800000">'t my code work?
    102. </font>What <font color="#FF0000"><b>is </b></font>this newsgroup about<font color="#000080">?
    </font><font color="#800000">103. </font>What<font color="#800000">'s the difference from comp.sys.ibm.pc.programmer?
    104. </font>What other newsgroups should I know about<font color="#000080">?

</font>section <font color="#800000">2. </font>Compile <font color="#FF0000"><b>and </b></font>link
    <font color="#800000">201. </font>What the heck <font color="#FF0000"><b>is </b></font><font color="#000080">&quot;</font>DGROUP <font color="#000080">&gt; </font><font color="#800000">64</font>K<font color="#000080">&quot;?
    </font><font color="#800000">202. </font>How <font color="#FF0000"><b>do </b></font>I fix <font color="#000080">&quot;</font>automatic data segment exceeds <font color="#800000">64</font>K<font color="#000080">&quot; </font><font color="#FF0000"><b>or </b></font><font color="#000080">&quot;</font>stack
         plus data exceed <font color="#800000">64</font>K<font color="#000080">&quot;?
    </font><font color="#800000">203. </font>Will Borland C code <font color="#FF0000"><b>and </b></font>Microsoft C code link together<font color="#000080">?
    </font><font color="#800000">204. </font>Why did my <font color="#FF0000"><b>program </b></font>bomb at run time <font color="#FF0000"><b>with </b></font><font color="#000080">&quot;</font>floating point
         formats <font color="#FF0000"><b>not </b></font>linked<font color="#000080">&quot;?
    </font><font color="#800000">205. </font>Why did my <font color="#FF0000"><b>program </b></font>bomb <font color="#FF0000"><b>with </b></font><font color="#000080">&quot;</font>floating point <font color="#FF0000"><b>not </b></font>loaded<font color="#000080">&quot;?
    </font><font color="#800000">206. </font>How can I change the stack size <font color="#FF0000"><b>in </b></font>Borland<font color="#800000">'s C compilers?
    207. </font>What<font color="#800000">'s the format of an .OBJ file?
    208. </font>What<font color="#800000">'s the format of an .EXE header?
    209. </font>What<font color="#800000">'s the difference between .COM and .EXE formats?

</font>section <font color="#800000">3. </font>Keyboard
    <font color="#800000">301. </font>How can I read a character without echoing it <font color="#FF0000"><b>to </b></font>the screen<font color="#000080">,
         </font><font color="#FF0000"><b>and </b></font>without waiting <font color="#FF0000"><b>for </b></font>the user <font color="#FF0000"><b>to </b></font>press the Enter key<font color="#000080">?
    </font><font color="#800000">302. </font>How can I find <font color="#FF0000"><b>out </b></font>whether a character has been typed<font color="#000080">, </font>without
         waiting <font color="#FF0000"><b>for </b></font>one<font color="#000080">?
    </font><font color="#800000">303. </font>How can I disable Ctrl<font color="#000080">-</font>C<font color="#000080">/</font>Ctrl<font color="#000080">-</font>Break <font color="#FF0000"><b>and</b></font><font color="#000080">/</font><font color="#FF0000"><b>or </b></font>Ctrl<font color="#000080">-</font>Alt<font color="#000080">-</font>Del<font color="#000080">?
    </font><font color="#800000">304. </font>How can I disable the print screen <font color="#FF0000"><b>function</b></font><font color="#000080">?
    </font><font color="#800000">305. </font>How can my <font color="#FF0000"><b>program </b></font>turn NumLock <font color="#000080">(</font>CapsLock<font color="#000080">, </font>ScrollLock<font color="#000080">) </font><font color="#FF0000"><b>on</b></font><font color="#000080">/</font>off<font color="#000080">?
    </font><font color="#800000">306. </font>How can I speed up the keyboard<font color="#800000">'s auto-repeat?
    307. </font>What <font color="#FF0000"><b>is </b></font>the SysRq key <font color="#FF0000"><b>for</b></font><font color="#000080">?
    </font><font color="#800000">308. </font>How can my <font color="#FF0000"><b>program </b></font>tell what kind <font color="#FF0000"><b>of </b></font>keyboard <font color="#FF0000"><b>is on </b></font>the system<font color="#000080">?
    </font><font color="#800000">309. </font>How can I tell <font color="#FF0000"><b>if </b></font>input<font color="#000080">, </font>output<font color="#000080">, </font><font color="#FF0000"><b>or </b></font>stderr has been redirected<font color="#000080">?

</font>section <font color="#800000">4. </font>Disks <font color="#FF0000"><b>and </b></font>files
    <font color="#800000">401. </font>What drive was the PC booted from<font color="#000080">?
    </font><font color="#800000">402. </font>How can I boot from drive b<font color="#000080">:?
    </font><font color="#800000">403. </font>Which real <font color="#FF0000"><b>and virtual </b></font>disk drives are valid<font color="#000080">?
    </font><font color="#800000">404. </font>How can I make my single floppy drive both a<font color="#000080">: </font><font color="#FF0000"><b>and </b></font>b<font color="#000080">:?
    </font><font color="#800000">405. </font>Why won<font color="#800000">'t my C program open a file with a path?
    406. </font>How can I redirect printer output <font color="#FF0000"><b>to </b></font>a <font color="#FF0000"><b>file</b></font><font color="#000080">?
    </font><font color="#800000">407. </font>How can my <font color="#FF0000"><b>program </b></font>open more files than DOS<font color="#800000">'s limit of 20?
    408. </font>How can I read<font color="#000080">, </font>create<font color="#000080">, </font>change<font color="#000080">, </font><font color="#FF0000"><b>or </b></font>delete the volume <font color="#FF0000"><b>label</b></font><font color="#000080">?
    </font><font color="#800000">409. </font>How can I get the disk serial number<font color="#000080">?
    </font><font color="#800000">410. </font>What<font color="#800000">'s the format of .OBJ, .EXE., .COM files?

</font>section <font color="#800000">5. </font>Serial ports <font color="#000080">(</font>COM ports<font color="#000080">)
    </font><font color="#800000">501. </font>How <font color="#FF0000"><b>do </b></font>I <font color="#FF0000"><b>set </b></font>my machine up <font color="#FF0000"><b>to </b></font>use COM3 <font color="#FF0000"><b>and </b></font>COM4<font color="#000080">?
    </font><font color="#800000">502. </font>How <font color="#FF0000"><b>do </b></font>I find the I<font color="#000080">/</font>O address <font color="#FF0000"><b>of </b></font>a COM port<font color="#000080">?
    </font><font color="#800000">503. </font>But aren<font color="#800000">'t the COM ports always at I/O addresses 3F8, 2F8, 3E8,
         </font><font color="#FF0000"><b>and </b></font><font color="#800000">2E8</font><font color="#000080">?
    </font><font color="#800000">504. </font>How <font color="#FF0000"><b>do </b></font>I configure a COM port <font color="#FF0000"><b>and </b></font>use it <font color="#FF0000"><b>to </b></font>transmit data<font color="#000080">?
</font>section <font color="#800000">6. </font>Other hardware questions <font color="#FF0000"><b>and </b></font>problems
    <font color="#800000">601. </font>Which <font color="#800000">80</font>x86 CPU <font color="#FF0000"><b>is </b></font>running my <font color="#FF0000"><b>program</b></font><font color="#000080">?
    </font><font color="#800000">602. </font>How can a C <font color="#FF0000"><b>program </b></font>send control codes <font color="#FF0000"><b>to </b></font>my printer<font color="#000080">?
    </font><font color="#800000">603. </font>How can I redirect printer output <font color="#FF0000"><b>to </b></font>a <font color="#FF0000"><b>file</b></font><font color="#000080">?
    </font><font color="#800000">604. </font>Which video adapter <font color="#FF0000"><b>is </b></font>installed<font color="#000080">?
    </font><font color="#800000">605. </font>How <font color="#FF0000"><b>do </b></font>I switch <font color="#FF0000"><b>to </b></font><font color="#800000">43</font><font color="#000080">- </font><font color="#FF0000"><b>or </b></font><font color="#800000">50</font><font color="#000080">-</font>line mode<font color="#000080">?
    </font><font color="#800000">606. </font>How can I find the Microsoft mouse position <font color="#FF0000"><b>and </b></font>button status<font color="#000080">?
    </font><font color="#800000">607. </font>How can I access a specific address <font color="#FF0000"><b>in </b></font>the PC<font color="#800000">'s memory?
    608. </font>How can I read <font color="#FF0000"><b>or </b></font>write my PC<font color="#800000">'s CMOS memory?
    609. </font>How can I access memory beyond <font color="#800000">640</font>K<font color="#000080">?
</font>section <font color="#800000">7. </font>Other software questions <font color="#FF0000"><b>and </b></font>problems
    <font color="#800000">701. </font>How can a <font color="#FF0000"><b>program </b></font>reboot my PC<font color="#000080">?
    </font><font color="#800000">702. </font>How can I time events <font color="#FF0000"><b>with </b></font>finer resolution than the system
         clock<font color="#800000">'s 55 ms (about 18 ticks a second)?
    703. </font>How can I find the error level <font color="#FF0000"><b>of </b></font>the previous <font color="#FF0000"><b>program</b></font><font color="#000080">?
    </font><font color="#800000">704. </font>How can a <font color="#FF0000"><b>program set </b></font>DOS environment variables<font color="#000080">?
    </font><font color="#800000">705. </font>How can I change the switch character <font color="#FF0000"><b>to </b></font><font color="#000080">- </font>from <font color="#000080">/?
    </font><font color="#800000">706. </font>Why does my interrupt <font color="#FF0000"><b>function </b></font>behave strangely<font color="#000080">?
    </font><font color="#800000">707. </font>How can I write a TSR <font color="#000080">(</font>terminate<font color="#000080">-</font>stay<font color="#000080">-</font>resident<font color="#000080">) </font>utility<font color="#000080">?
    </font><font color="#800000">708. </font>How can I write a device driver<font color="#000080">?
    </font><font color="#800000">709. </font>What can I use <font color="#FF0000"><b>to </b></font>manage versions <font color="#FF0000"><b>of </b></font>software<font color="#000080">?
    </font><font color="#800000">710. </font>What<font color="#800000">'s this &quot;null pointer assignment&quot; after my C program
         </font>executes<font color="#000080">?

</font>section A<font color="#000080">. </font>Downloading
    A01<font color="#000080">. </font>What <font color="#FF0000"><b>is </b></font>garbo<font color="#000080">?  </font>What <font color="#FF0000"><b>is </b></font>wustl<font color="#000080">?
    </font>A02<font color="#000080">. </font>What are Simtel <font color="#FF0000"><b>and </b></font><font color="#000080">&quot;</font>mirror sites<font color="#000080">&quot;?  </font>What good are they<font color="#000080">?
    </font>A03<font color="#000080">. </font>Where <font color="#FF0000"><b>do </b></font>I find <font color="#FF0000"><b>program </b></font><font color="#000080">&lt;</font>mumble<font color="#000080">&gt;?
    </font>A04<font color="#000080">. </font>How can I check Simtel <font color="#FF0000"><b>or </b></font>garbo before I post a request <font color="#FF0000"><b>for </b></font>a
         <font color="#FF0000"><b>program</b></font><font color="#000080">?
    </font>A05<font color="#000080">. </font>How <font color="#FF0000"><b>do </b></font>I download <font color="#FF0000"><b>and </b></font>decode a <font color="#FF0000"><b>program </b></font>I found<font color="#000080">?
    </font>A06<font color="#000080">. </font>Where <font color="#FF0000"><b>is </b></font>UUDECODE<font color="#000080">?
    </font>A07<font color="#000080">. </font>Why <font color="#FF0000"><b>do </b></font>I get errors when extracting from a ZIP <font color="#FF0000"><b>file </b></font>I
         downloaded<font color="#000080">?

</font>section B<font color="#000080">. </font>Vendors <font color="#FF0000"><b>and </b></font>products
    B01<font color="#000080">. </font>How can I contact Borland<font color="#000080">?
    </font>B02<font color="#000080">. </font>How can I contact Microsoft<font color="#000080">?
    </font>B03<font color="#000080">. </font>What<font color="#800000">'s the current version of PKZIP?
    </font>B04<font color="#000080">. </font>What<font color="#800000">'s in Borland Pascal/Turbo Pascal 7.0?
    </font>B05<font color="#000080">. </font>What<font color="#800000">'s in Microsoft C/C++ 7.0?
</font>section C<font color="#000080">. </font>More information
    C01<font color="#000080">. </font>Are there any good <font color="#FF0000"><b>on</b></font><font color="#000080">-</font>line references <font color="#FF0000"><b>for </b></font>PC hardware
         components<font color="#000080">?
    </font>C02<font color="#000080">. </font>Are there any good <font color="#FF0000"><b>on</b></font><font color="#000080">-</font>line references <font color="#FF0000"><b>for </b></font>PC interrupts<font color="#000080">?
    </font>C03<font color="#000080">. </font>What <font color="#FF0000"><b>and </b></font>where <font color="#FF0000"><b>is </b></font><font color="#000080">&quot;</font>Ralf Brown<font color="#800000">'s interrupt list&quot;?
    </font>C04<font color="#000080">. </font>Where can I find lex<font color="#000080">, </font>yacc<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>language grammars<font color="#000080">?
    </font>C05<font color="#000080">. </font>What<font color="#800000">'s the best book to learn programming?
    </font>C06<font color="#000080">. </font>Where are FAQ lists archived<font color="#000080">?
    </font>C07<font color="#000080">. </font>Where can I get the latest copy <font color="#FF0000"><b>of </b></font>this FAQ list<font color="#000080">?



</font>section <font color="#800000">1. </font>General questions
<font color="#000080">============================

</font>Q101<font color="#000080">. </font>Why won<font color="#800000">'t my code work?

    </font>First you need <font color="#FF0000"><b>to try to </b></font>determine whether the problem <font color="#FF0000"><b>is in </b></font>your
    use <font color="#FF0000"><b>of </b></font>the programming language <font color="#FF0000"><b>or in </b></font>your use <font color="#FF0000"><b>of </b></font>MSDOS <font color="#FF0000"><b>and </b></font>your PC
    hardware<font color="#000080">.  (</font>Your manual should tell you which features are standard
    <font color="#FF0000"><b>and </b></font>which are vendor<font color="#000080">- </font><font color="#FF0000"><b>or </b></font>MSDOS<font color="#000080">- </font><font color="#FF0000"><b>or </b></font>PC<font color="#000080">-</font>specific<font color="#000080">.  </font>You _have_ read
    your manual carefully<font color="#000080">, </font>haven<font color="#800000">'t you?)

    </font><font color="#FF0000"><b>If </b></font>the feature that seems <font color="#FF0000"><b>to </b></font>be working wrong <font color="#FF0000"><b>is </b></font>something related
    <font color="#FF0000"><b>to </b></font>your PC hardware <font color="#FF0000"><b>or to </b></font>the internals <font color="#FF0000"><b>of </b></font>MS<font color="#000080">-</font>DOS<font color="#000080">, </font>this group <font color="#FF0000"><b>is </b></font>the
    right place <font color="#FF0000"><b>to </b></font>ask<font color="#000080">.  (</font>Please check this list first<font color="#000080">, </font><font color="#FF0000"><b>to </b></font>make sure
    your question isn<font color="#800000">'t already answered.)

    </font><font color="#FF0000"><b>On </b></font>the other hand<font color="#000080">, </font><font color="#FF0000"><b>if </b></font>your problem <font color="#FF0000"><b>is with </b></font>the programming language<font color="#000080">,
    </font>the comp<font color="#000080">.</font>lang hierarchy <font color="#000080">(</font>including comp<font color="#000080">.</font>lang<font color="#000080">.</font><font color="#FF0000"><b>pascal and </b></font>comp<font color="#000080">.</font>lang c<font color="#000080">)
    </font><font color="#FF0000"><b>is </b></font>probably a better resource<font color="#000080">.  </font>Please read the other group<font color="#800000">'s FAQ
    </font>list thoroughly before posting<font color="#000080">.  (</font>These exist <font color="#FF0000"><b>in </b></font>comp<font color="#000080">.</font>lang<font color="#000080">.</font>c<font color="#000080">,
    </font>comp<font color="#000080">.</font>lang<font color="#000080">.</font>c<font color="#000080">++, </font>comp<font color="#000080">.</font>lang<font color="#000080">.</font>modula3<font color="#000080">, </font>comp<font color="#000080">.</font>lang<font color="#000080">.</font>lisp<font color="#000080">, </font>comp<font color="#000080">.</font>lang<font color="#000080">.</font>perl<font color="#000080">;
    </font>they may exist <font color="#FF0000"><b>in </b></font>other groups <font color="#FF0000"><b>as </b></font>well<font color="#000080">.)  </font>It<font color="#800000">'s almost never a good
    </font>idea <font color="#FF0000"><b>to </b></font>crosspost between this group <font color="#FF0000"><b>and </b></font>a language group<font color="#000080">.

    </font>Before posting <font color="#FF0000"><b>in </b></font>either place<font color="#000080">, </font><font color="#FF0000"><b>try to </b></font>make your <font color="#FF0000"><b>program as </b></font>small <font color="#FF0000"><b>as
    </b></font>possible <font color="#FF0000"><b>while </b></font>still exhibiting the bad behavior<font color="#000080">.  </font>Sometimes this
    alone <font color="#FF0000"><b>is </b></font>enough <font color="#FF0000"><b>to </b></font>show you where the trouble <font color="#FF0000"><b>is</b></font><font color="#000080">.  </font>Also edit your
    description <font color="#FF0000"><b>of </b></font>the problem <font color="#FF0000"><b>to </b></font>be <font color="#FF0000"><b>as </b></font>short <font color="#FF0000"><b>as </b></font>possible<font color="#000080">.  </font>This makes
    it look more like you tried <font color="#FF0000"><b>to </b></font>solve the problem <font color="#FF0000"><b>on </b></font>your own<font color="#000080">, </font><font color="#FF0000"><b>and
    </b></font>makes people more inclined <font color="#FF0000"><b>to try to </b></font>help you<font color="#000080">.

    </font>When you <font color="#FF0000"><b>do </b></font>post a question<font color="#000080">, </font>it<font color="#800000">'s good manners to say &quot;email please;
    </font>I<font color="#800000">'ll post a summary.&quot;  Then everybody else in the group doesn'</font>t have
    <font color="#FF0000"><b>to </b></font>read ten virtually identical responses<font color="#000080">.  </font><font color="#FF0000"><b>Of </b></font>course<font color="#000080">, </font><font color="#FF0000"><b>then </b></font>you have
    <font color="#FF0000"><b>to </b></font>follow through<font color="#000080">.  </font>A summary <font color="#FF0000"><b>is not </b></font>simply pasting together all the
    email you received<font color="#000080">.  </font>Instead<font color="#000080">, </font>write your own <font color="#000080">(</font>brief<font color="#000080">) </font>description <font color="#FF0000"><b>of
    </b></font>the solution<font color="#000080">:  </font>this <font color="#FF0000"><b>is </b></font>the best way <font color="#FF0000"><b>to </b></font>make sure you really
    understand it<font color="#000080">.  </font>Definitely don<font color="#800000">'t repost people'</font>s cute signatures<font color="#000080">.

</font>Q102<font color="#000080">. </font>What <font color="#FF0000"><b>is </b></font>this newsgroup about<font color="#000080">?

    </font>comp<font color="#000080">.</font>os<font color="#000080">.</font>msdos<font color="#000080">.</font>programmer <font color="#000080">(</font>comp<font color="#000080">.</font>sys<font color="#000080">.</font>ibm<font color="#000080">.</font>pc<font color="#000080">.</font>programmer <font color="#FF0000"><b>until </b></font>September
    <font color="#800000">1990</font><font color="#000080">) </font>concerns programming <font color="#FF0000"><b>for </b></font>MS<font color="#000080">-</font>DOS systems<font color="#000080">.  </font>The article <font color="#000080">&quot;</font>USENET
    Readership report <font color="#FF0000"><b>for </b></font>Nov <font color="#800000">92</font><font color="#000080">&quot; </font><font color="#FF0000"><b>in </b></font>news<font color="#000080">.</font>lists shows <font color="#800000">42</font><font color="#000080">,</font><font color="#800000">000 </font>readers <font color="#FF0000"><b>of
    </b></font>this newsgroup worldwide<font color="#000080">.  </font>Traffic was <font color="#800000">1090.7 </font>Kbytes <font color="#000080">(</font>exclusive <font color="#FF0000"><b>of
    </b></font>crossposts<font color="#000080">), </font>comprised <font color="#FF0000"><b>in </b></font><font color="#800000">611 </font>articles<font color="#000080">.

    </font>Much <font color="#FF0000"><b>of </b></font>our traffic <font color="#FF0000"><b>is </b></font>about language products <font color="#000080">(</font>chiefly from Borland
    <font color="#FF0000"><b>and </b></font>Microsoft<font color="#000080">).  </font>More programming topics focus <font color="#FF0000"><b>on </b></font>C than <font color="#FF0000"><b>on </b></font>any one
    other language<font color="#000080">.

    </font>Since most MS<font color="#000080">-</font>DOS systems run <font color="#FF0000"><b>on </b></font>hardware that <font color="#FF0000"><b>is </b></font>roughly compatible
    <font color="#FF0000"><b>with </b></font>the IBM PC<font color="#000080">, </font><font color="#FF0000"><b>on </b></font>Intel <font color="#800000">8088</font><font color="#000080">, </font><font color="#800000">80188</font><font color="#000080">, </font><font color="#FF0000"><b>or </b></font><font color="#800000">80</font>x86 chips<font color="#000080">, </font>we tend <font color="#FF0000"><b>to
    </b></font>get a lot <font color="#FF0000"><b>of </b></font>questions <font color="#FF0000"><b>and </b></font>answers about programming other parts <font color="#FF0000"><b>of
    </b></font>the hardware<font color="#000080">.

</font>Q103<font color="#000080">. </font>What<font color="#800000">'s the difference from comp.sys.ibm.pc.programmer?

    </font>c<font color="#000080">.</font>s<font color="#000080">.</font>i<font color="#000080">.</font>p<font color="#000080">.</font>programmer <font color="#FF0000"><b>is </b></font>the old name <font color="#FF0000"><b>of </b></font>comp<font color="#000080">.</font>os<font color="#000080">.</font>msdos<font color="#000080">.</font>programmer<font color="#000080">, </font><font color="#FF0000"><b>and
    </b></font>has been obsolete since September <font color="#800000">1990.  </font>However<font color="#000080">, </font>many systems have
    <font color="#FF0000"><b>not </b></font>removed the old group<font color="#000080">, </font><font color="#FF0000"><b>or </b></font>have removed it but aliased it <font color="#FF0000"><b>to </b></font>the
    new name<font color="#000080">.  </font>This means that some people still think they<font color="#800000">'re posting
    </font><font color="#FF0000"><b>to </b></font>c<font color="#000080">.</font>s<font color="#000080">.</font>i<font color="#000080">.</font>p<font color="#000080">.</font>programmer even though they<font color="#800000">'re actually posting to
    </font>c<font color="#000080">.</font>o<font color="#000080">.</font>m<font color="#000080">.</font>programmer<font color="#000080">.

    </font>You can easily verify the non<font color="#000080">-</font>existence <font color="#FF0000"><b>of </b></font>c<font color="#000080">.</font>s<font color="#000080">.</font>i<font color="#000080">.</font>p<font color="#000080">.</font>programmer by
    reference <font color="#FF0000"><b>to </b></font>the <font color="#000080">&quot;</font>List <font color="#FF0000"><b>of </b></font>Active Newsgroups<font color="#000080">&quot; </font>posted <font color="#FF0000"><b>to </b></font>news<font color="#000080">.</font>groups<font color="#000080">.
    </font>It<font color="#800000">'s available as /pub/usenet/news.answers/active-newsgroups/part1
    </font>from the archives <font color="#000080">(</font>see <font color="#000080">&quot;</font>Where are FAQ lists archived<font color="#000080">?&quot; </font><font color="#FF0000"><b>in </b></font>section C<font color="#000080">,
    &quot;</font>More information<font color="#000080">&quot;).

</font>Q104<font color="#000080">. </font>What other newsgroups should I know about<font color="#000080">?

    </font>Your best bet <font color="#FF0000"><b>is to </b></font>read the periodic information postings <font color="#FF0000"><b>in </b></font>the
    comp<font color="#000080">.</font>binaries<font color="#000080">.</font>ibm<font color="#000080">.</font>pc newsgroup<font color="#000080">.  </font>Specially helpful articles<font color="#000080">:
        </font>Using the comp<font color="#000080">.</font>binaries<font color="#000080">.</font>ibm<font color="#000080">.</font>pc<font color="#000080">.</font>d groups
        Beginner<font color="#800000">'s guide to binaries
        </font>Starter kit
        About archives <font color="#FF0000"><b>and </b></font>archivers
    Please wait <font color="#FF0000"><b>for </b></font>these articles <font color="#FF0000"><b>to </b></font>come around<font color="#000080">; </font>don<font color="#800000">'t post a request.

    </font>Also check <font color="#FF0000"><b>out </b></font>news<font color="#000080">.</font>announce<font color="#000080">.</font>newusers<font color="#000080">, </font>even <font color="#FF0000"><b>if </b></font>you<font color="#800000">'re not a new
    </font>user<font color="#000080">.  </font>You may be surprised how much useful information <font color="#FF0000"><b>is in </b></font>the
    monthly postings there<font color="#000080">.  </font>Lots <font color="#FF0000"><b>of </b></font>old<font color="#000080">-</font>timers also get useful stuff
    from news<font color="#000080">.</font>newusers<font color="#000080">.</font>questions<font color="#000080">, </font>especially the periodic postings<font color="#000080">.

    </font>Remember that it<font color="#800000">'s good manners to subscribe to any newsgroup and
    </font>read it <font color="#FF0000"><b>for </b></font>a <font color="#FF0000"><b>while </b></font>before you post a question<font color="#000080">.  </font>When you post<font color="#000080">, </font>it<font color="#800000">'s
    </font>also good manners <font color="#FF0000"><b>to </b></font>ask <font color="#FF0000"><b>for </b></font>replies <font color="#FF0000"><b>to </b></font>be emailed <font color="#FF0000"><b>and then to </b></font>post
    a summary<font color="#000080">, </font>which you<font color="#800000">'ve edited down to the absolute minimum size.

    </font>You may also be interested <font color="#FF0000"><b>in </b></font>the following newsgroups<font color="#000080">.  </font>Caution<font color="#000080">:
    </font>Some <font color="#FF0000"><b>of </b></font>them have specialized charters<font color="#000080">; </font>you<font color="#800000">'ll probably get (and
    </font>deserve<font color="#000080">) </font>some flames <font color="#FF0000"><b>if </b></font>you post <font color="#FF0000"><b>to </b></font>an inappropriate group<font color="#000080">.

    - </font>misc<font color="#000080">.</font>forsale<font color="#000080">.</font>computers <font color="#FF0000"><b>and </b></font>misc<font color="#000080">.</font>forsale<font color="#000080">.</font>computers<font color="#000080">.</font>pc<font color="#000080">-</font>clone are
      where you post notices <font color="#FF0000"><b>of </b></font>equipment<font color="#000080">, </font>software<font color="#000080">, </font><font color="#FF0000"><b>or </b></font>computer books
      that you want <font color="#FF0000"><b>to </b></font>sell<font color="#000080">.  </font>Please don<font color="#800000">'t post or crosspost those
      </font>notices <font color="#FF0000"><b>to </b></font>comp<font color="#000080">.</font>os<font color="#000080">.</font>msdos<font color="#000080">.</font>programmer<font color="#000080">.

    - </font>comp<font color="#000080">.</font>os<font color="#000080">.</font>ms<font color="#000080">-</font>windows<font color="#000080">.</font>programmer<font color="#000080">.</font>tools <font color="#FF0000"><b>and </b></font><font color="#000080">...</font>misc <font color="#000080">(</font>formerly part <font color="#FF0000"><b>of
      </b></font>comp<font color="#000080">.</font>windows<font color="#000080">.</font>ms<font color="#000080">.</font>programmer<font color="#000080">):  </font>Similar <font color="#FF0000"><b>to </b></font>this group<font color="#000080">, </font>but focus
      <font color="#FF0000"><b>on </b></font>programming <font color="#FF0000"><b>for </b></font>the MS<font color="#000080">-</font>Windows <font color="#FF0000"><b>platform</b></font><font color="#000080">.

    - </font>comp<font color="#000080">.</font>sys<font color="#000080">.</font>ibm<font color="#000080">.</font>pc<font color="#000080">.</font>hardware <font color="#FF0000"><b>is for </b></font>more hardware<font color="#000080">-</font>oriented discussions
      <font color="#FF0000"><b>of </b></font>the machines that run DOS<font color="#000080">.

    - </font>comp<font color="#000080">.</font>binaries<font color="#000080">.</font>ibm<font color="#000080">.</font>pc<font color="#000080">.</font>wanted<font color="#000080">: </font>AFTER you have looked <font color="#FF0000"><b>in </b></font>the other
      groups<font color="#000080">, </font>this <font color="#FF0000"><b>is </b></font>the place <font color="#FF0000"><b>to </b></font>post a request <font color="#FF0000"><b>for </b></font>a particular
      binary <font color="#FF0000"><b>program</b></font><font color="#000080">.

    - </font>comp<font color="#000080">.</font>binaries<font color="#000080">.</font>msdos<font color="#000080">.</font>announce <font color="#000080">(</font>moderated<font color="#000080">) </font>explains how <font color="#FF0000"><b>to </b></font>use the
      archive sites<font color="#000080">, </font>especially garbo <font color="#FF0000"><b>and </b></font>Simtel<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>lists files
      uploaded <font color="#FF0000"><b>to </b></font>them<font color="#000080">.  </font>Discussions belong <font color="#FF0000"><b>in </b></font>comp<font color="#000080">.</font>binaries<font color="#000080">.</font>msdos<font color="#000080">.</font>d<font color="#000080">,
      </font>which replaced comp<font color="#000080">.</font>binaries<font color="#000080">.</font>ibm<font color="#000080">.</font>pc<font color="#000080">.</font>archives<font color="#000080">.

    - </font>comp<font color="#000080">.</font>binaries<font color="#000080">.</font>ibm<font color="#000080">.</font>pc<font color="#000080">.</font>d <font color="#FF0000"><b>is for </b></font>discussions about programs posted <font color="#FF0000"><b>in
      </b></font>comp<font color="#000080">.</font>binaries<font color="#000080">.</font>ibm<font color="#000080">.</font>pc<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>only those programs<font color="#000080">.  </font>This <font color="#FF0000"><b>is </b></font>a good
      place <font color="#FF0000"><b>to </b></font>report bugs <font color="#FF0000"><b>in </b></font>the programs<font color="#000080">, </font>but <font color="#FF0000"><b>not to </b></font>ask where <font color="#FF0000"><b>to </b></font>find
      them <font color="#000080">(</font>see cbip<font color="#000080">.</font>wanted<font color="#000080">, </font>above<font color="#000080">).  </font>cbip<font color="#000080">.</font>d <font color="#FF0000"><b>is NOT </b></font>supposed <font color="#FF0000"><b>to </b></font>be a
      general PC discussion group<font color="#000080">.

    - </font>comp<font color="#000080">.</font>sources<font color="#000080">.</font>misc<font color="#000080">: </font>a moderated group <font color="#FF0000"><b>for </b></font>source code <font color="#FF0000"><b>for </b></font>many
      computer systems<font color="#000080">.  </font>It tends <font color="#FF0000"><b>to </b></font>get lots <font color="#FF0000"><b>of </b></font>Unix stuff<font color="#000080">, </font>but you may
      also pick up some DOS<font color="#000080">-</font>compatible code here<font color="#000080">.

    - </font>alt<font color="#000080">.</font>sources<font color="#000080">: </font>an unmoderated group <font color="#FF0000"><b>for </b></font>source code<font color="#000080">.  </font>Guidelines are
      posted periodically<font color="#000080">.

    - </font>Turbo Vision <font color="#FF0000"><b>is </b></font>a mailing list<font color="#000080">, </font><font color="#FF0000"><b>not </b></font>a newsgroup<font color="#000080">; </font>send email <font color="#FF0000"><b>to
      </b></font>listserv<font color="#000080">@</font>vtvm1<font color="#000080">.</font>cc<font color="#000080">.</font>vt<font color="#000080">.</font>edu <font color="#FF0000"><b>if </b></font>you want <font color="#FF0000"><b>to </b></font>subscribe<font color="#000080">.


</font>section <font color="#800000">2. </font>Compile <font color="#FF0000"><b>and </b></font>link
<font color="#000080">===========================

</font>Q201<font color="#000080">. </font>What the heck <font color="#FF0000"><b>is </b></font><font color="#000080">&quot;</font>DGROUP <font color="#000080">&gt; </font><font color="#800000">64</font>K<font color="#000080">&quot;?

    </font>DGROUP <font color="#FF0000"><b>is </b></font>a link<font color="#000080">-</font>time group <font color="#FF0000"><b>of </b></font>data segments<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>the compiler
    typically generates code that expects DS <font color="#FF0000"><b>to </b></font>be pointing <font color="#FF0000"><b>to </b></font>DGROUP<font color="#000080">.
    (</font>Exception<font color="#000080">: </font>Borland<font color="#800000">'s huge model has no DGROUP.)

    </font>Here<font color="#800000">'s what goes into DGROUP:

    </font><font color="#000080">- </font>tiny model <font color="#000080">(</font>all pointers <font color="#FF0000"><b>near</b></font><font color="#000080">):  </font>DGROUP holds the entire <font color="#FF0000"><b>program</b></font><font color="#000080">.

    - </font>small <font color="#FF0000"><b>and </b></font>medium models <font color="#000080">(</font>data pointers <font color="#FF0000"><b>near</b></font><font color="#000080">):  </font>DGROUP holds all
      globals <font color="#FF0000"><b>and </b></font>static variables including <font color="#FF0000"><b>string </b></font>literals<font color="#000080">, </font>plus the
      stack <font color="#FF0000"><b>and </b></font>the heap<font color="#000080">.

    - </font>large<font color="#000080">, </font>compact<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>huge models <font color="#FF0000"><b>in </b></font>Microsoft <font color="#000080">(</font>data pointers <font color="#FF0000"><b>far</b></font><font color="#000080">):
      </font>DGROUP holds only initialized globals <font color="#FF0000"><b>and </b></font>static variables
      including <font color="#FF0000"><b>string </b></font>literals<font color="#000080">, </font>plus the stack <font color="#FF0000"><b>and </b></font>the <font color="#FF0000"><b>near </b></font>heap<font color="#000080">.

    - </font>large <font color="#FF0000"><b>and </b></font>compact models <font color="#FF0000"><b>in </b></font>Borland <font color="#000080">(</font>data pointers <font color="#FF0000"><b>far</b></font><font color="#000080">): </font>DGROUP
      holds initialized <font color="#FF0000"><b>and </b></font>uninitialized globals <font color="#FF0000"><b>and </b></font>static variables
      including <font color="#FF0000"><b>string </b></font>literals<font color="#000080">, </font>but <font color="#FF0000"><b>not </b></font>the stack <font color="#FF0000"><b>or </b></font>heap<font color="#000080">.

    - </font>huge model <font color="#FF0000"><b>in </b></font>Borland <font color="#000080">(</font>data pointers <font color="#FF0000"><b>far</b></font><font color="#000080">): </font>there <font color="#FF0000"><b>is </b></font>no DGROUP<font color="#000080">, </font>so
      the <font color="#800000">64</font>K limit doesn<font color="#800000">'t apply.

    </font><font color="#FF0000"><b>In </b></font>all <font color="#FF0000"><b>of </b></font>the above<font color="#000080">, </font>which <font color="#FF0000"><b>is to </b></font>say all six models <font color="#FF0000"><b>in </b></font>Microsoft C
    <font color="#FF0000"><b>and </b></font>all but huge <font color="#FF0000"><b>in </b></font>Borland C<font color="#000080">, </font>DGROUP <font color="#FF0000"><b>is </b></font>limited <font color="#FF0000"><b>to </b></font><font color="#800000">64</font>K including
    <font color="#FF0000"><b>string </b></font>literals <font color="#000080">(</font>which are treated <font color="#FF0000"><b>as </b></font>static data<font color="#000080">).  </font>This limitation
    <font color="#FF0000"><b>is </b></font>due <font color="#FF0000"><b>to </b></font>the Intel CPU<font color="#800000">'s segmented architecture.

    </font>See the next Q <font color="#FF0000"><b>for </b></font>possible remedies<font color="#000080">.

    </font><font color="#FF0000"><b>For </b></font>more information<font color="#000080">, </font>see topics like <font color="#000080">&quot;</font>memory models<font color="#000080">&quot; </font><font color="#FF0000"><b>and </b></font><font color="#000080">&quot;</font>memory
    management<font color="#000080">&quot; </font><font color="#FF0000"><b>in </b></font>the index <font color="#FF0000"><b>of </b></font>your compiler manual<font color="#000080">.  </font>Also see
    TI738<font color="#000080">.</font>ASC <font color="#FF0000"><b>in </b></font>PD1<font color="#000080">:&lt;</font>MSDOS<font color="#000080">.</font>TURBO<font color="#000080">-</font>C<font color="#000080">&gt;</font>BCHELP10<font color="#000080">.</font>ZIP at Simtel <font color="#FF0000"><b>for </b></font>an
    extended general discussion <font color="#FF0000"><b>of </b></font>memory usage <font color="#FF0000"><b>in </b></font>Borland C programs<font color="#000080">,
    </font><font color="#FF0000"><b>of </b></font>which much applies <font color="#FF0000"><b>to </b></font>any C compiler <font color="#FF0000"><b>in </b></font>DOS<font color="#000080">.

</font>Q202<font color="#000080">. </font>How <font color="#FF0000"><b>do </b></font>I fix <font color="#000080">&quot;</font>automatic data segment exceeds <font color="#800000">64</font>K<font color="#000080">&quot; </font><font color="#FF0000"><b>or </b></font><font color="#000080">&quot;</font>stack plus
      data exceed <font color="#800000">64</font>K<font color="#000080">&quot;?

    </font>These messages are a variation <font color="#FF0000"><b>of </b></font><font color="#000080">&quot;</font>DGROUP <font color="#000080">&gt; </font><font color="#800000">64</font>K<font color="#000080">&quot;.  </font><font color="#FF0000"><b>For </b></font>causes<font color="#000080">,
    </font>please see the preceding Q<font color="#000080">.

    </font><font color="#FF0000"><b>If </b></font>you get this error <font color="#FF0000"><b>in </b></font>tiny model<font color="#000080">, </font>your <font color="#FF0000"><b>program is </b></font>simply too big
    <font color="#FF0000"><b>and </b></font>you must use a different memory model<font color="#000080">.  </font><font color="#FF0000"><b>If </b></font>you get this link
    error <font color="#FF0000"><b>in </b></font>models S<font color="#000080">, </font>C<font color="#000080">, </font>M<font color="#000080">, </font>L<font color="#000080">, </font><font color="#FF0000"><b>or </b></font>Microsoft<font color="#800000">'s H, there are some things
    </font>you can <font color="#FF0000"><b>do</b></font><font color="#000080">.  (</font>This error can<font color="#800000">'t occur in Borland'</font>s huge model<font color="#000080">.)

    </font><font color="#FF0000"><b>If </b></font>you have one <font color="#FF0000"><b>or </b></font>two big global arrays<font color="#000080">, </font>simply declare them <font color="#FF0000"><b>far</b></font><font color="#000080">.
    </font>The compiler takes this <font color="#FF0000"><b>to </b></font>mean that any references <font color="#FF0000"><b>to </b></font>them will use
    <font color="#800000">32</font><font color="#000080">-</font>bit pointers<font color="#000080">, </font>so they<font color="#800000">'ll be in separate segments and no longer
    </font>part <font color="#FF0000"><b>of </b></font>DGROUP<font color="#000080">.

    </font><font color="#FF0000"><b>Or </b></font>you can use the <font color="#000080">/</font>Gt<font color="#000080">[</font>number<font color="#000080">] </font>option <font color="#FF0000"><b>with </b></font>Microsoft <font color="#FF0000"><b>or </b></font><font color="#000080">-</font>Ff<font color="#000080">[=</font>size<font color="#000080">]
    </font><font color="#FF0000"><b>with </b></font>Borland C<font color="#000080">++ </font><font color="#800000">2.0 </font><font color="#FF0000"><b>and </b></font>up<font color="#000080">.  </font>This will automatically put variables
    above a certain size into their own segments outside <font color="#FF0000"><b>of </b></font>DGROUP<font color="#000080">.

    </font>Yet another option <font color="#FF0000"><b>is to </b></font>change global arrays <font color="#FF0000"><b>to far </b></font>pointers<font color="#000080">.  </font><font color="#FF0000"><b>Then
    </b></font>at the beginning <font color="#FF0000"><b>of </b></font>your <font color="#FF0000"><b>program</b></font><font color="#000080">, </font>allocate them from the <font color="#FF0000"><b>far </b></font>heap
    <font color="#000080">(</font>_fmalloc <font color="#FF0000"><b>in </b></font>Microsoft<font color="#000080">, </font>farmalloc <font color="#FF0000"><b>in </b></font>Borland<font color="#000080">).

    </font><font color="#FF0000"><b>Finally</b></font><font color="#000080">, </font>you can change <font color="#FF0000"><b>to </b></font>huge model <font color="#000080">(</font><font color="#FF0000"><b>with </b></font>Borland compilers<font color="#000080">, </font><font color="#FF0000"><b>not
    </b></font>Microsoft<font color="#000080">).  </font>Borland<font color="#800000">'s H model still uses far pointers by default,
    </font>but <font color="#000080">&quot;</font>sets aside the <font color="#000080">[</font><font color="#800000">64</font>K<font color="#000080">] </font>limit<font color="#000080">&quot; </font><font color="#FF0000"><b>and </b></font>has no DGROUP group<font color="#000080">, </font>according
    <font color="#FF0000"><b>to </b></font>the BC<font color="#000080">++ </font><font color="#800000">2.0 </font>Programmer<font color="#800000">'s Guide.  Microsoft'</font>s H model does use
    huge data pointers by <font color="#FF0000"><b>default </b></font>but retains DGROUP <font color="#FF0000"><b>and </b></font>its <font color="#800000">64</font>K limit<font color="#000080">,
    </font>so switching <font color="#FF0000"><b>to </b></font>the H model doesn<font color="#800000">'t buy you anything if you have
    </font>DGROUP problems<font color="#000080">.

</font>Q203<font color="#000080">. </font>Will Borland C code <font color="#FF0000"><b>and </b></font>Microsoft C code link together<font color="#000080">?

    </font>Typically this question <font color="#FF0000"><b>is </b></font>asked by someone who owns compiler A <font color="#FF0000"><b>and
    is </b></font>trying <font color="#FF0000"><b>to </b></font>write code <font color="#FF0000"><b>to </b></font>link <font color="#FF0000"><b>with </b></font>a third<font color="#000080">-</font>party <font color="#FF0000"><b>library </b></font>that was
    compiled under compiler B<font color="#000080">.

    </font>The answer <font color="#FF0000"><b>to </b></font>the question <font color="#FF0000"><b>is</b></font><font color="#000080">, </font><font color="#FF0000"><b>Not in </b></font>general<font color="#000080">.  </font>Here are some <font color="#FF0000"><b>of </b></font>the
    reasons<font color="#000080">:

    - &quot;</font>Helper<font color="#000080">&quot; </font>functions <font color="#000080">(</font>undocumented functions <font color="#FF0000"><b>for </b></font>stack checking<font color="#000080">,
      </font>floating<font color="#000080">-</font>point arithmetic<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>operations <font color="#FF0000"><b>on </b></font>longs<font color="#000080">) </font>differ between
      the two compilers<font color="#000080">.

    - </font>The compilers may embed instructions <font color="#FF0000"><b>in </b></font>the <font color="#FF0000"><b>object </b></font>code that tell
      the linker <font color="#FF0000"><b>to </b></font>look <font color="#FF0000"><b>for </b></font>their own run<font color="#000080">-</font>time libraries<font color="#000080">.

    </font>Those problems will generate link<font color="#000080">-</font>time errors<font color="#000080">.  </font>Others may <font color="#FF0000"><b>not </b></font>show
    up <font color="#FF0000"><b>until </b></font>run time<font color="#000080">:

    - </font>Borland<font color="#800000">'s compact, large, and huge models don'</font>t assume DS<font color="#000080">=</font>SS<font color="#000080">, </font>but
      Microsoft<font color="#800000">'s do.  The -Fs option on the Borland compiler, or one of
      </font>the <font color="#000080">/</font>A options <font color="#FF0000"><b>on </b></font>Microsoft<font color="#000080">, </font>should take care <font color="#FF0000"><b>of </b></font>this problem <font color="#000080">--
      </font>once you know that<font color="#800000">'s what'</font>s going <font color="#FF0000"><b>on</b></font><font color="#000080">.

    - </font>Check conventions <font color="#FF0000"><b>for </b></font>ordering <font color="#FF0000"><b>and </b></font>packing structure members<font color="#000080">, </font><font color="#FF0000"><b>and
      for </b></font>alignment <font color="#FF0000"><b>of </b></font>various types <font color="#FF0000"><b>on </b></font>byte<font color="#000080">, </font>word<font color="#000080">, </font>paragraph<font color="#000080">, </font><font color="#FF0000"><b>or </b></font>other
      boundaries<font color="#000080">.  </font>Again<font color="#000080">, </font>you can generally adjust your code <font color="#FF0000"><b>to </b></font>match <font color="#FF0000"><b>if
      </b></font>you know what conventions were used <font color="#FF0000"><b>in </b></font>compiling the <font color="#000080">&quot;</font>foreign<font color="#000080">&quot;
      </font>libraries<font color="#000080">.

    - </font>Check the obvious <font color="#FF0000"><b>and </b></font>make sure that your code was compiled under
      the same memory model <font color="#FF0000"><b>as </b></font>the code you<font color="#800000">'re trying to link with.
      </font><font color="#000080">(</font>That<font color="#800000">'s necessary, but no guarantee.  Microsoft and Borland don'</font>t
      use exactly the same conventions <font color="#FF0000"><b>for </b></font>segments <font color="#FF0000"><b>and </b></font>groups<font color="#000080">,
      </font>particularly <font color="#FF0000"><b>in </b></font>the larger memory models<font color="#000080">.)

    </font>That said<font color="#000080">, </font>there are some circumstances where you can link hybrids<font color="#000080">.
    </font>Your best chance <font color="#FF0000"><b>of </b></font>success comes <font color="#FF0000"><b>if </b></font>you avoid longs <font color="#FF0000"><b>and </b></font>floating
    point<font color="#000080">, </font>use only <font color="#800000">16</font><font color="#000080">-</font>bit pointers<font color="#000080">, </font>suppress stack checking<font color="#000080">, </font><font color="#FF0000"><b>and
    </b></font>specify all libraries used <font color="#FF0000"><b>in </b></font>the link<font color="#000080">.

</font>Q204<font color="#000080">. </font>Why did my <font color="#FF0000"><b>program </b></font>bomb at run time <font color="#FF0000"><b>with </b></font><font color="#000080">&quot;</font>floating point formats
      <font color="#FF0000"><b>not </b></font>linked<font color="#000080">&quot;?

    </font>First<font color="#000080">, </font><font color="#FF0000"><b>is </b></font>that the actual <font color="#FF0000"><b>message</b></font><font color="#000080">, </font><font color="#FF0000"><b>or </b></font>did it say <font color="#000080">&quot;</font>floating point <font color="#FF0000"><b>not
    </b></font>loaded<font color="#000080">&quot;?  </font><font color="#FF0000"><b>If </b></font>it was the latter<font color="#000080">, </font>see the next Q<font color="#000080">.

    </font>You<font color="#800000">'re probably using a Borland compiler for C or C++ (including
    </font>Turbo C <font color="#FF0000"><b>and </b></font>Turbo C<font color="#000080">++).  </font>Borland<font color="#800000">'s compilers try to be smart and not
    </font>link <font color="#FF0000"><b>in </b></font>the floating<font color="#000080">-</font>point <font color="#000080">(</font>f<font color="#000080">-</font>p<font color="#000080">) </font><font color="#FF0000"><b>library </b></font>unless you need it<font color="#000080">.  </font>Alas<font color="#000080">,
    </font>they all get the decision wrong<font color="#000080">.  </font>One common <font color="#FF0000"><b>case is </b></font>where you don<font color="#800000">'t
    </font>call any f<font color="#000080">-</font>p functions<font color="#000080">, </font>but you have <font color="#000080">%</font>f <font color="#FF0000"><b>or </b></font>other f<font color="#000080">-</font>p formats <font color="#FF0000"><b>in
    </b></font>scanf<font color="#000080">/</font>printf calls<font color="#000080">.  </font>The cure <font color="#FF0000"><b>is to </b></font>call an f<font color="#000080">-</font>p <font color="#FF0000"><b>function</b></font><font color="#000080">, </font><font color="#FF0000"><b>or </b></font>at
    least force one <font color="#FF0000"><b>to </b></font>be present <font color="#FF0000"><b>in </b></font>the link<font color="#000080">.

    </font><font color="#FF0000"><b>To do </b></font>that<font color="#000080">, </font>define this <font color="#FF0000"><b>function </b></font>somewhere <font color="#FF0000"><b>in </b></font>a source <font color="#FF0000"><b>file </b></font>but
    don<font color="#800000">'t call it:

        </font>static void forcefloat<font color="#000080">(</font>float <font color="#000080">*</font>p<font color="#000080">)
            </font><font color="#008000"><i>{ float f = *p; forcefloat(&amp;f); }

    </i></font>It doesn<font color="#800000">'t have to be in the module with the main program, as long
    </font><font color="#FF0000"><b>as </b></font>it<font color="#800000">'s in a module that will be included in the link.

    </font>A new solution <font color="#FF0000"><b>for </b></font>Borland C<font color="#000080">++ </font><font color="#800000">3.0 </font>was posted<font color="#000080">, </font>but I don<font color="#800000">'t own the
    </font>product <font color="#FF0000"><b>and </b></font>have <font color="#FF0000"><b>not </b></font>been able <font color="#FF0000"><b>to </b></font>verify it<font color="#000080">.  </font>Insert these
    statements <font color="#FF0000"><b>in </b></font>your <font color="#FF0000"><b>program</b></font><font color="#000080">:

        </font>extern unsigned _floatconvert<font color="#000080">;
        </font><font color="#800000">#</font>pragma extref _floatconvert

Q205<font color="#000080">. </font>Why did my <font color="#FF0000"><b>program </b></font>bomb <font color="#FF0000"><b>with </b></font><font color="#000080">&quot;</font>floating point <font color="#FF0000"><b>not </b></font>loaded<font color="#000080">&quot;?

    </font>That <font color="#FF0000"><b>is </b></font>Microsoft C<font color="#800000">'s run-time message when the code requires a
    </font>numeric coprocessor but your computer doesn<font color="#800000">'t have one installed.

    </font><font color="#FF0000"><b>If </b></font>the <font color="#FF0000"><b>program is </b></font>yours<font color="#000080">, </font>relink it using the xLIBCE <font color="#FF0000"><b>or </b></font>xLIBCA
    <font color="#FF0000"><b>library </b></font><font color="#000080">(</font>where x <font color="#FF0000"><b>is </b></font>the memory model<font color="#000080">).

</font>Q206<font color="#000080">. </font>How can I change the stack size <font color="#FF0000"><b>in </b></font>Borland<font color="#800000">'s C compilers?

    </font><font color="#FF0000"><b>In </b></font>Turbo C<font color="#000080">, </font>Turbo C<font color="#000080">++, </font><font color="#FF0000"><b>and </b></font>Borland C<font color="#000080">++, </font>you may <font color="#FF0000"><b>not </b></font>find <font color="#000080">&quot;</font>stack
    size<font color="#000080">&quot; </font><font color="#FF0000"><b>in </b></font>the index but the global variable _stklen should be there<font color="#000080">.
    </font>The manual will instruct you <font color="#FF0000"><b>to </b></font>put a statement like

        extern unsigned _stklen <font color="#000080">= </font><font color="#800000">54321</font>U<font color="#000080">;

    </font><font color="#FF0000"><b>in </b></font>your code<font color="#000080">, </font>outside <font color="#FF0000"><b>of </b></font>any <font color="#FF0000"><b>function</b></font><font color="#000080">.  </font>You must assign the value
    right <font color="#FF0000"><b>in </b></font>the extern statement<font color="#000080">; </font>it won<font color="#800000">'t work to assign a value at
    </font>run time<font color="#000080">.  (</font>The <font color="#000080">&quot;</font>extern<font color="#000080">&quot; </font><font color="#FF0000"><b>in </b></font>this context isn<font color="#800000">'t ANSI C and ought not
    </font><font color="#FF0000"><b>to </b></font>be required<font color="#000080">, </font>but the above statement <font color="#FF0000"><b>is </b></font>a direct quote from the
    <font color="#FF0000"><b>Library </b></font>Reference manual <font color="#FF0000"><b>of </b></font>Borland C<font color="#000080">++ </font><font color="#800000">2.0.</font><font color="#000080">)  </font>The linker may give
    you a duplicate symbol warning<font color="#000080">, </font>which you can ignore<font color="#000080">.

</font>Q207<font color="#000080">. </font>What<font color="#800000">'s the format of an .OBJ file?

    </font>Here<font color="#800000">'s what I'</font>ve been told<font color="#000080">, </font>though I have verified any <font color="#FF0000"><b>of </b></font>these
    references myself<font color="#000080">:

    - </font>base <font color="#000080">.</font>OBJ format<font color="#000080">:  </font>Intel<font color="#800000">'s document number #121748-001, {8086
      </font>Relocatable <font color="#FF0000"><b>Object </b></font>Module Formats<font color="#000080">}.  (</font>Note however that both
      Microsoft <font color="#FF0000"><b>and </b></font>Borland formats have extended the <font color="#000080">.</font>OBJ format<font color="#000080">.)

    - </font>Microsoft<font color="#000080">-</font>specific <font color="#000080">.</font>OBJ formats<font color="#000080">:  </font>a <font color="#000080">&quot;</font>Microsoft OMF Specification<font color="#000080">&quot;
      (</font>document number <font color="#000080">??), </font><font color="#FF0000"><b>as </b></font>well <font color="#FF0000"><b>as </b></font>a section <font color="#FF0000"><b>in </b></font>the MS<font color="#000080">-</font>DOS
      encyclopedia<font color="#000080">.

    - </font>A <font color="#000080">&quot;</font>tutorial <font color="#FF0000"><b>on </b></font>the <font color="#000080">.</font>OBJ format<font color="#000080">&quot; </font>comes <font color="#FF0000"><b>with </b></font>the VAL experimental
      linker<font color="#000080">, </font>which <font color="#FF0000"><b>is </b></font>VAL<font color="#000080">-</font>LINK<font color="#000080">.</font>ARC <font color="#FF0000"><b>in </b></font>PD1<font color="#000080">:&lt;</font>MSDOS<font color="#000080">.</font>PGMUTL<font color="#000080">&gt; </font>at Simtel<font color="#000080">.

    </font><font color="#FF0000"><b>If </b></font>you have specific references<font color="#000080">, </font>either <font color="#FF0000"><b>to </b></font>fpt<font color="#000080">-</font>able documents <font color="#FF0000"><b>or to
    published </b></font>works <font color="#000080">(</font>author<font color="#000080">, </font>title<font color="#000080">, </font>order number <font color="#FF0000"><b>or </b></font>ISBN<font color="#000080">), </font>please email
    them <font color="#FF0000"><b>to </b></font>brown<font color="#000080">@</font>ncoast<font color="#000080">.</font>org <font color="#FF0000"><b>for </b></font>inclusion <font color="#FF0000"><b>in </b></font>the next edition <font color="#FF0000"><b>of </b></font>this
    list<font color="#000080">.

</font>Q208<font color="#000080">. </font>What<font color="#800000">'s the format of an .EXE header?

    </font>See pages <font color="#800000">349</font><font color="#000080">-</font><font color="#800000">350 </font><font color="#FF0000"><b>of </b></font><font color="#008000"><i>{PC Magazine}</i></font><font color="#800000">'s June 30, 1992 issue (xi:12) for
    </font>the old <font color="#FF0000"><b>and </b></font>new formats<font color="#000080">.  </font><font color="#FF0000"><b>For </b></font>a more detailed layout<font color="#000080">, </font>look under INT
    <font color="#800000">21 </font><font color="#FF0000"><b>function </b></font><font color="#800000">4</font>B <font color="#FF0000"><b>in </b></font>Ralf Brown<font color="#800000">'s interrupt list.  Ralf Brown'</font>s list
    includes extensions <font color="#FF0000"><b>for </b></font>Borland<font color="#800000">'s TLINK and Borland debugger info.

    </font>Among the books that detail formats <font color="#FF0000"><b>of </b></font>executable files are <font color="#008000"><i>{DOS
    Programmer's Reference: 2d Edition} </i></font>by Terry Dettman <font color="#FF0000"><b>and </b></font>Jim Kyle<font color="#000080">,
    </font>ISBN <font color="#800000">0</font><font color="#000080">-</font><font color="#800000">88022</font><font color="#000080">-</font><font color="#800000">458</font><font color="#000080">-</font><font color="#800000">4</font><font color="#000080">; </font><font color="#FF0000"><b>and </b></font><font color="#008000"><i>{Microsoft MS-DOS Programmer's Reference}</i></font><font color="#000080">,
    </font>ISBN <font color="#800000">1</font><font color="#000080">-</font><font color="#800000">55615</font><font color="#000080">-</font><font color="#800000">329</font><font color="#000080">-</font><font color="#800000">5.

</font>Q209<font color="#000080">. </font>What<font color="#800000">'s the difference between .COM and .EXE formats?

    </font><font color="#FF0000"><b>To </b></font>oversimplify<font color="#000080">:  </font>a <font color="#000080">.</font>COM <font color="#FF0000"><b>file is </b></font>a direct image <font color="#FF0000"><b>of </b></font>core<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>an <font color="#000080">.</font>EXE
    <font color="#FF0000"><b>file </b></font>will undergo some further relocation when it <font color="#FF0000"><b>is </b></font>run <font color="#000080">(</font><font color="#FF0000"><b>and </b></font>so it
    begins <font color="#FF0000"><b>with </b></font>a relocation header<font color="#000080">).  </font>A <font color="#000080">.</font>COM <font color="#FF0000"><b>file is </b></font>limited <font color="#FF0000"><b>to </b></font><font color="#800000">64</font>K <font color="#FF0000"><b>for
    </b></font>all segments combined<font color="#000080">, </font>but an <font color="#000080">.</font>EXE <font color="#FF0000"><b>file </b></font>can have <font color="#FF0000"><b>as </b></font>many segments <font color="#FF0000"><b>as
    </b></font>your linker will handle <font color="#FF0000"><b>and </b></font>be <font color="#FF0000"><b>as </b></font>large <font color="#FF0000"><b>as </b></font>RAM can take<font color="#000080">.

    </font>The actual <font color="#FF0000"><b>file </b></font>extension doesn<font color="#800000">'t matter.  DOS knows that a file
    </font>being loaded <font color="#FF0000"><b>is in </b></font><font color="#000080">.</font>EXE format <font color="#FF0000"><b>if </b></font>its first two bytes are MZ <font color="#FF0000"><b>or </b></font>ZM<font color="#000080">;
    </font>otherwise it <font color="#FF0000"><b>is </b></font>assumed <font color="#FF0000"><b>to </b></font>be <font color="#FF0000"><b>in </b></font><font color="#000080">.</font>COM format<font color="#000080">.  </font><font color="#FF0000"><b>For </b></font>instance<font color="#000080">, </font>I am
    told that DR<font color="#000080">-</font>DOS <font color="#800000">6.0's COMMAND.COM is in .EXE format.


</font>section <font color="#800000">3. </font>Keyboard
<font color="#000080">===================

</font>Q301<font color="#000080">. </font>How can I read a character without echoing it <font color="#FF0000"><b>to </b></font>the screen<font color="#000080">, </font><font color="#FF0000"><b>and
      </b></font>without waiting <font color="#FF0000"><b>for </b></font>the user <font color="#FF0000"><b>to </b></font>press the Enter key<font color="#000080">?

    </font>The C compilers from Microsoft <font color="#FF0000"><b>and </b></font>Borland offer getch <font color="#000080">(</font><font color="#FF0000"><b>or </b></font>getche <font color="#FF0000"><b>to
    </b></font>echo the character<font color="#000080">); </font>Turbo <font color="#FF0000"><b>Pascal </b></font>has ReadKey<font color="#000080">.

    </font><font color="#FF0000"><b>In </b></font>other programming languages<font color="#000080">, </font>load <font color="#800000">8 </font><font color="#FF0000"><b>in register </b></font>AH <font color="#FF0000"><b>and </b></font>execute
    INT <font color="#800000">21</font><font color="#000080">; </font>AL <font color="#FF0000"><b>is </b></font>returned <font color="#FF0000"><b>with </b></font>the character from standard input
    <font color="#000080">(</font>possibly redirected<font color="#000080">).  </font><font color="#FF0000"><b>If </b></font>you don<font color="#800000">'t want to allow redirection, or
    </font>you want <font color="#FF0000"><b>to </b></font>capture Ctrl<font color="#000080">-</font>C <font color="#FF0000"><b>and </b></font>other special keys<font color="#000080">, </font>use INT <font color="#800000">16 </font><font color="#FF0000"><b>with
    </b></font>AH<font color="#000080">=</font><font color="#800000">10</font><font color="#000080">; </font>this will return the scan code <font color="#FF0000"><b>in </b></font>AH <font color="#FF0000"><b>and </b></font>ASCII code <font color="#000080">(</font><font color="#FF0000"><b>if
    </b></font>possible<font color="#000080">) </font><font color="#FF0000"><b>in </b></font>AL<font color="#000080">, </font><font color="#FF0000"><b>except </b></font>that AL<font color="#000080">=</font>E0 <font color="#FF0000"><b>with </b></font>AH nonzero indicates one <font color="#FF0000"><b>of
    </b></font>the grey <font color="#000080">&quot;</font>extended<font color="#000080">&quot; </font>keys was pressed<font color="#000080">.  (</font><font color="#FF0000"><b>If </b></font>your BIOS doesn<font color="#800000">'t
    </font>support the extended keyboard<font color="#000080">, </font>use INT <font color="#800000">16 </font><font color="#FF0000"><b>function </b></font><font color="#800000">0 </font><font color="#FF0000"><b>not </b></font><font color="#800000">10.</font><font color="#000080">)

</font>Q302<font color="#000080">. </font>How can I find <font color="#FF0000"><b>out </b></font>whether a character has been typed<font color="#000080">, </font>without
      waiting <font color="#FF0000"><b>for </b></font>one<font color="#000080">?

    </font><font color="#FF0000"><b>In </b></font>Turbo <font color="#FF0000"><b>Pascal</b></font><font color="#000080">, </font>use KeyPressed<font color="#000080">.  </font>Both Microsoft C <font color="#FF0000"><b>and </b></font>Turbo C offer
    the kbhit<font color="#000080">( ) </font><font color="#FF0000"><b>function</b></font><font color="#000080">.  </font>All <font color="#FF0000"><b>of </b></font>these tell you whether a key has been
    pressed<font color="#000080">.  </font><font color="#FF0000"><b>If </b></font>no key has been pressed<font color="#000080">, </font>they return that information
    <font color="#FF0000"><b>to </b></font>your <font color="#FF0000"><b>program</b></font><font color="#000080">.  </font><font color="#FF0000"><b>If </b></font>a keystroke <font color="#FF0000"><b>is </b></font>waiting<font color="#000080">, </font>they tell your <font color="#FF0000"><b>program
    </b></font>that but leave the key <font color="#FF0000"><b>in </b></font>the input buffer<font color="#000080">.

    </font>You can use the BIOS call<font color="#000080">, </font>INT <font color="#800000">16 </font><font color="#FF0000"><b>function </b></font><font color="#800000">01 </font><font color="#FF0000"><b>or </b></font><font color="#800000">11</font><font color="#000080">, </font><font color="#FF0000"><b>to </b></font>check
    whether an actual keystroke <font color="#FF0000"><b>is </b></font>waiting<font color="#000080">; </font><font color="#FF0000"><b>or </b></font>the DOS call<font color="#000080">, </font>INT <font color="#800000">21
    </font><font color="#FF0000"><b>function </b></font><font color="#800000">0</font>B<font color="#000080">, </font><font color="#FF0000"><b>to </b></font>check <font color="#FF0000"><b>for </b></font>a keystroke from stdin <font color="#000080">(</font>subject <font color="#FF0000"><b>to
    </b></font>redirection<font color="#000080">).  </font>See Ralf Brown<font color="#800000">'s interrupt list.

</font>Q303<font color="#000080">. </font>How can I disable Ctrl<font color="#000080">-</font>C<font color="#000080">/</font>Ctrl<font color="#000080">-</font>Break <font color="#FF0000"><b>and</b></font><font color="#000080">/</font><font color="#FF0000"><b>or </b></font>Ctrl<font color="#000080">-</font>Alt<font color="#000080">-</font>Del<font color="#000080">?

    </font>You can download the <font color="#FF0000"><b>file </b></font>PD1<font color="#000080">:&lt;</font>MSDOS<font color="#000080">.</font>KEYBOARD<font color="#000080">&gt;</font>CADEL<font color="#000080">.</font>ZIP from Simtel<font color="#000080">.
    </font>It <font color="#FF0000"><b>contains </b></font>a TSR <font color="#FF0000"><b>to </b></font>disable those keys<font color="#000080">, </font><font color="#FF0000"><b>with </b></font>source code <font color="#FF0000"><b>in ASM</b></font><font color="#FF00FF">.

    To disable only Ctrl-Alt-Del (actually, to change the boot keys to
    leftShift-Alt-Del), use DEBOOT.COM.  Along with KEYKILL.COM, which
    lets you disable up to three keys of your choice, it is at Simtel in
    the file PD1:&lt;MSDOS.KEYBOARD&gt;KEYKILL.ARC.

    C programmers who simply want to make sure that the user can't
    Ctrl-Break out of their program can use the ANSI-standard signal( )
    function; the Borland compilers also offer ctrlbrk( ) for handling
    Ctrl-Break.  However, if your program uses normal DOS input, the
    characters ^C will appear on the screen when the user presses Ctrl-C
    or Ctrl-Break.  There are many ways to work around that, including:
    use INT 21 function 7, which allows redirection but doesn't display
    the ^C (or echo any other character, for that matter); or use INT 16
    function 0 or 10; or call _bios_keybrd( ) in MSC or bioskey( ) in
    BC++; or hook INT 9 to discard Ctrl-C and Ctrl-Break before the
    regular BIOS keyboard handler sees them; etc., etc.

    You should be aware that Ctrl-C and Ctrl-Break are processed quite
    differently internally.  Ctrl-Break, like all keystrokes, is
    processed by the BIOS code at INT 9 as soon as the user presses the
    keys, even if earlier keys are still in the keyboard buffer:  by
    default the handler at INT 1B is called.  Ctrl-C is not special to
    the BIOS, nor is it special to DOS functions 6 and 7; it _is_
    special to DOS functions 1 and 8 when at the head of the keyboard
    buffer.  You will need to make sure BREAK is OFF to prevent DOS
    polling the keyboard for Ctrl-C during non-keyboard operations.

    Some good general references are </font><font color="#008000"><i>{Advanced MS-DOS} </i></font><font color="#FF00FF">by Ray Duncan,
    ISBN 1-55615-157-8; </font><font color="#008000"><i>{8088 Assembler Language Programming:  The IBM
    PC}</i></font><font color="#FF00FF">, ISBN 0-672-22024-5, by Willen &amp; Krantz; and </font><font color="#008000"><i>{COMPUTE!'s Mapping
    the IBM PC}</i></font><font color="#FF00FF">, ISBN 0-942386-92-2.

Q304. How can I disable the print screen function?

    There are really two print screen functions:  1) print current
    screen snapshot, triggered by PrintScreen or Shift-PrtSc or
    Shift-grey*, and 2) turn on continuous screen echo, started and
    stopped by Ctrl-P or Ctrl-PrtSc.

    1) Screen snapshot to printer
       --------------------------

    The BIOS uses INT 5 for this.  Fortunately, you don't need to mess
    with that interrupt handler.  The standard handler, in BIOSes dated
    December 1982 or later, uses a byte at 0040:0100 (alias 0000:0500)
    to determine whether a print screen is currently in progress.  If it
    is, pressing PrintScreen again is ignored.  So to disable the screen
    snapshot, all you have to do is write a 1 to that byte.  When the
    user presses PrintScreen, the BIOS will think that a print screen is
    already in progress and will ignore the user's keypress.  You can
    re-enable PrintScreen by zeroing the same byte.

    Here's some simple code:

        void prtsc_allow(int allow) /* 0=disable, nonzero=enable */ </font><font color="#008000"><i>{
            unsigned char far* flag = (unsigned char far*)0x00400100UL;
            *flag = (unsigned char)!allow;
        }

    </i></font><font color="#FF00FF">2) Continuous echo of screen to printer
       ------------------------------------

    If ANSI.SYS is loaded, you can easily disable the continuous echo of
    screen to printer (Ctrl-P or Ctrl-PrtSc).  Just redefine the keys by
    &quot;printing&quot; strings like these to the screen (BASIC print, C printf,
    Pascal Write statements, or ECHO command in batch files):

        &lt;27&gt;[0;114;&quot;Ctrl-PrtSc disabled&quot;p
        &lt;27&gt;[16;&quot;^P&quot;p

    Change &lt;27&gt; in the above to an Escape character, ASCII 27.

    If you haven't installed ANSI.SYS, I can't offer an easy way to
    disable the echo-screen-to-printer function.  Please send any tested
    solutions to brown@ncoast.org and I'll add them to this list.

    Actually, you might not need to disable Ctrl-P and Ctrl-PrtSc.  If
    your only concern is not locking up your machine, when you see the
    &quot;Abort, Retry, Ignore, Fail&quot; prompt just press Ctrl-P again and then
    I.  As an alternative, install one of the many print spoolers that
    intercept printer-status queries and always return &quot;Printer ready&quot;.

Q305. How can my program turn NumLock (CapsLock, ScrollLock) on or off?

    You need to twiddle bit 5, 6, or 4 of location 0040:0017.  Here's
    some code:  lck( ) turns on a lock state, and unlck( ) turns it off.
    (The status lights on some keyboards may not reflect the change.  If
    yours is one, call INT 16 function 2, &quot;get shift status&quot;, and that
    may update them.  It will certainly do no harm.)

        #define NUM_LOCK  (1 &lt;&lt; 5)
        #define CAPS_LOCK (1 &lt;&lt; 6)
        #define SCRL_LOCK (1 &lt;&lt; 4)
        void lck(int shiftype) </font><font color="#008000"><i>{
            char far* kbdstatus = (char far*)0x00400017UL;
            *kbdstatus |= (char)shiftype;
        }
        </i></font><font color="#FF00FF">void unlck(int shiftype) </font><font color="#008000"><i>{
            char far* kbdstatus = (char far*)0x00400017UL;
            *kbdstatus &amp;= ~(char)shiftype;
        }

</i></font><font color="#FF00FF">Q306. How can I speed up the keyboard's auto-repeat?

    The keyboard speed has two components: delay (before a key that you
    hold down starts repeating) and typematic rate (the speed once the
    key starts repeating).  Most BIOSes since 1986 let software change
    the delay and typematic rate by calling INT 16 function 3, &quot;set
    typematic rate and delay&quot;; see Ralf Brown's interrupt list.  If you
    have DOS 4.0 or later, you can use the MODE CON command that you'll
    find in your DOS manual.

    On 83-key keyboards (mostly XTs), the delay and typematic rate can't
    easily be changed.  According to the </font><font color="#008000"><i>{PC Magazine} </i></font><font color="#FF00FF">of 15 Jan 1991,
    page 409, to adjust the typematic rate you need &quot;a memory-resident
    program which simply '[watches]' the keyboard to see if you're
    holding down a key ... and after a certain time [starts] stuffing
    extra copies of the held-down key into the buffer.&quot;  No source code
    is given in that issue; but I'm told that the QUICKEYS utility that
    </font><font color="#008000"><i>{PC} </i></font><font color="#FF00FF">published in 1986 does this sort of watching; you can download
    source and object code in PD1:&lt;MSDOS.PCMAG&gt;VOL5N05.ARC from Simtel.

Q307. What is the SysRq key for?

    There is no standard use for the key.  The BIOS keyboard routines in
    INT 16 simply ignore it; therefore so do the DOS input routines in
    INT 21 as well as the keyboard routines in libraries supplied with
    high-level languages.

    When you press or release a key, the keyboard triggers hardware line
    IRQ1, and the CPU calls INT 9.  INT 9 reads the scan code from the
    keyboard and the shift states from the BIOS data area.

    What happens next depends on whether your PC's BIOS supports an
    enhanced keyboard (101 or 102 keys).  If so, INT 9 calls INT 15
    function 4F to translate the scan code.  If the translated scan code
    is 54 hex (for the SysRq key) then INT 9 calls INT 15 function 85
    and doesn't put the keystroke into the keyboard buffer.  The default
    handler of that function does nothing and simply returns.  (If your
    PC has an older BIOS that doesn't support the extended keyboards,
    INT 15 function 4F is not called.  Early ATs have 84-key keyboards,
    so their BIOS calls INT 15 function 85 but nor 4F.)

    Thus your program is free to use SysRq for its own purposes, but at
    the cost of some programming.  You could hook INT 9, but it's
    probably easier to hook INT 15 function 85, which is called when
    SysRq is pressed or released.

Q308. How can my program tell what kind of keyboard is on the system?

    Ralf Brown's Interrupt List includes MEMORY.LST, a detailed
    breakdown by Robin Walker of the contents of the BIOS system block
    that starts at 0040:0000.  Bit 4 of byte 0040:0096 is &quot;1=enhanced
    keyboard installed&quot;.  C code to test the keyboard type:
        char far *kbd_stat_byte3 = (char far *)0x00400096UL;
        if (0x10 &amp; *kbd_stat_byte3)
            /* 101- or 102-key keyboard is installed */

    </font><font color="#008000"><i>{PC Magazine}</i></font><font color="#FF00FF">'s 15 Jan 1991 issue suggests on page 412 that &quot;for
    some clones [the above test] is not foolproof&quot;.  If you use this
    method in your program you should provide the user some way to
    override this test, or at least some way to tell your program to
    assume a non-enhanced keyboard.  The </font><font color="#008000"><i>{PC Magazine} </i></font><font color="#FF00FF">article suggests
    a different approach to determining the type of keyboard.

Q309. How can I tell if input, output, or stderr has been redirected?

    Normally, input and output are associated with the console (i.e.,
    with the keyboard and the screen, respectively).  If either is not,
    you know that it has been redirected.  Some source code to check
    this is available at the usual archive sites.

    If you program in Turbo Pascal, download the /pc/ts/tspa*.zip
    collection of Turbo Pascal units from garbo; or from Simtel,
    PD1:&lt;MSDOS.TURBOPAS&gt;TSPA*.ZIP.  (Choose TSPA3060.ZIP, TSPA3055.ZIP,
    TSPA3050.ZIP, or TSPA3040.ZIP for Turbo Pascal 6.0, 5.5, 5.0, or 4.0
    respectively.)  Source code is not included.  Also see the
    information in garbo.uwasa.fi:/pc/ts/tsfaq*.zip Frequently Asked
    Questions, the Turbo Pascal section.

    If you program in C, use isatty( ) if your implementation has it.
    Otherwise, you can download PD1:&lt;MSDOS.SYSUTL&gt;IS_CON10.ZIP from
    Simtel; it includes source code.

    Good references for the principles are </font><font color="#008000"><i>{PC Magazine} </i></font><font color="#FF00FF">16 Apr 1991
    (vol 10 nr 7) pg 374; Ray Duncan's {Advanced MS-DOS}, ISBN
    1-55615-157-8, or Ralf Brown's interrupt list for INT 21 function
    4400; and Terry Dettman and Jim Kyle's {DOS Programmer's Reference:
    2d edition}, ISBN 0-88022-458-4, pp 602-603.


If the posting date is more than six weeks in the past, see instructions
in part 4 of this list for how to get an updated copy.

            Copyright (C) 1992  Stan Brown, Oak Road Systems


section 4.  Disks and files
===========================

Q401. What drive was the PC booted from?

    Under DOS 4.0 or later, load 3305 hex into AX; do an INT 21.  DL is
    returned with an integer indicating the boot drive (1=A:, etc.).

Q402. How can I boot from drive b:?

    Download PD1:&lt;MSDOS.DSKUTL&gt;BOOT_B.ZIP (shareware) from Simtel.  The
    included documentation says it works by writing a new boot sector on
    a disk in your a: drive that redirects the boot to your b: drive.

Q403. Which real and virtual disk drives are valid?

    Use INT 21 function 29 (parse filename).  Point DS:SI at a null-
    terminated ASCII string that contains the drive letter and a colon,
    point ES:DI at a 37-byte dummy FCB buffer, set AX to 2900h, and do
    an INT 21.  On return, AL is FF if the drive is invalid, something
    else if the drive is valid.  RAM disks and SUBSTed drives are
    considered valid.

    Unfortunately, the b: drive is considered valid even on a single-
    diskette system.  You can check that special case by interrogating
    the BIOS equipment byte at 0040:0010.  Bits 7-6 contain the one less
    than the number of diskette drives, so if those bits are zero you
    know that b: is an invalid drive even though function 29 says it's
    valid.

    Following is some code originally posted by Doug Dougherty, with my
    fix for the b: special case, tested only in Borland C++ 2.0 (in
    the small model):

        #include &lt;dos.h&gt;
        void drvlist(void)  </font><font color="#008000"><i>{
            char *s = &quot;A:&quot;, fcb_buff[37];
            int valid;
            for (   ;  *s&lt;='Z';  (*s)++) {
                _SI = (unsigned) s;
                _DI = (unsigned) fcb_buff;
                _ES = _DS;
                _AX = 0x2900;
                geninterrupt(0x21);
                valid = _AL != 0xFF;
                if (*s == 'B'  &amp;&amp;  valid) {
                    char far *equipbyte = (char far *)0x00400010UL;
                    valid = (*equipbyte &amp; (3 &lt;&lt; 6)) != 0;
                }
                </i></font><font color="#FF00FF">printf(&quot;Drive '%s' is %sa valid drive.\n&quot;,
                        s, valid ? &quot;&quot; : &quot;not &quot;);
            }
        }

Q404. How can I make my single floppy drive both a: and b:?

    Under any DOS since DOS 2.0, you can put the command

        assign b=a

    into your AUTOEXEC.BAT file.  Then, when you type &quot;DIR B:&quot; you'll no
    longer get the annoying prompt to insert diskette B (and the even
    more annoying prompt to insert A the next time you type &quot;DIR A:&quot;).

    You may be wondering why anybody would want to do this.  Suppose you
    use two different machines, maybe one at home and one at work.  One
    of them has only a 3.5&quot; diskette drive; the other machine has two
    drives, and b: is the 3.5&quot; one.  You're bound to type &quot;dir b:&quot; on
    the first one, and get the nuisance message

        Insert diskette for drive B: and press any key when ready.

    But if you assign drive b: to point to a:, you avoid this problem.

    Caution:  there are a few commands, such as DISKCOPY, that will not
    work right on ASSIGNed or SUBSTed drives.  See the DOS manual for
    the full list.  Before typing one of those commands, be sure to turn
    off the mapping by typing &quot;assign&quot; without arguments.

    The DOS 5.0 manual says that ASSIGN is obsolete, and recommends the
    equivalent form of SUBST: &quot;subst b: a:\&quot;.  Unfortunately, if this
    command is executed when a: doesn't hold a diskette, the command
    fails.  ASSIGN doesn't have this problem, so I must advise you to
    disregard that particular bit of advice in the DOS manual.

Q405. Why won't my C program open a file with a path?

    You've probably got something like the following code:

        char *filename = &quot;c:\foo\bar\mumble.dat&quot;;
        . . .  fopen(filename, &quot;r&quot;);

    The problem is that \f is a form feed, \b is a backspace, and \m is
    m.  Whenever you want a backslash in a string constant in C, you
    must use two backslashes:

        char *filename = &quot;c:\\foo\\bar\\mumble.dat&quot;;

    This is a feature of every C compiler, because Dennis Ritchie
    designed C this way.  It's a problem only on MS-DOS systems, because
    only DOS (and Atari ST/TT running TOS, I'm told) uses the backslash
    in directory paths.  But even in DOS this backslash convention
    applies _only_ to string constants in your source code.  For file
    and keyboard input at run time, \ is just a normal character, so
    users of your program would type in file specs at run time the same
    way as in DOS commands, with single backslashes.

    Another possibility is to code all paths in source programs with /
    rather than \ characters:

        char *filename = &quot;c:/foo/bar/mumble.dat&quot;;

    Ralf Brown writes that &quot;All versions of the DOS kernel accept either
    forward or backslashes as directory separators.  I tend to use this
    form more frequently than backslashes since it is easier to type and
    read.&quot;  This applies to DOS function calls (and therefore to calls
    to the file library of every programming language), but not to DOS
    commands.

Q406. How can I redirect printer output to a file?

    My personal favorite utility for this purpose is PRN2FILE from </font><font color="#008000"><i>{PC
    Magazine}</i></font><font color="#FF00FF">, available from Simtel as PD1:&lt;MSDOS.PRINTER&gt;PRN2FILE.ARC,
    or from garbo as prn2file.zip in /pc/printer.  (</font><font color="#008000"><i>{PC Magazine} </i></font><font color="#FF00FF">has
    given copies away as part of its utilities disks, so you may already
    have a copy.)

    Check the PD1:&lt;MSDOS.PRINTER&gt; directory at Simtel, or /pc/printer
    at garbo, for lots of other printer-redirection utilities.

Q407. How can my program open more files than DOS's limit of 20?

    (This is a summary of an article Ralf Brown posted on 8 August 1992.)

    There are separate limits on files and file handles.  For example,
    DOS opens three files but five file handles:  CON (stdin, stdout,
    and stderr), AUX (stdaux), and PRN (stdprn).

    The limit in FILES= in CONFIG.SYS is a system-wide limit on files
    opened by all programs (including the three that DOS opens and any
    opened by TSRs); each process has a limit of 20 handles (including
    the five that DOS opens).  Example:  CONFIG.SYS has FILES=40.  Then
    program #1 will be able to open 15 file handles.  Assuming that the
    program actually does open 15 handles pointing to 15 different
    files, other programs could still open a total of 22 files (40-3-15
    = 22), though no one program could open more than 15 file handles.

    If you're running DOS 3.3 or later, you can increase the per-process
    limit of 20 file handles by a call to INT 21 function 67, Set Handle
    Count.  Your program is still limited by the system-wide limit on
    open files, so you may also need to increase the FILES= value in
    your CONFIG.SYS file (and reboot).  The run-time library that you're
    using may have a fixed-size table of file handles, so you may also
    need to get source code for the module that contains the table,
    increase the table size, and recompile it.

Q408. How can I read, create, change, or delete the volume label?

    In DOS 5.0 (and, I believe, in 4.0 as well), there are actually two
    volume labels: one, the traditional one, is an entry in the root
    directory of the disk; and the other is in the boot record along
    with the serial number (see next Q).  The DIR and VOL commands
    report the traditional label; the LABEL command reports the
    traditional one but changes both of them.

    In DOS 4.0 and later, use INT 21 function 69 to access the boot
    record's serial number and volume label together; see the next Q.

    Assume that by &quot;volume label&quot; you mean the traditional one, the one
    that DIR and VOL display.  Though it's a directory entry in the root
    directory, you can't change it using the newer DOS file-access
    functions (3C, 41, 43); instead, use the old FCB-oriented directory
    functions.  Specifically, you need to allocate a 64-byte buffer and
    a 41- byte extended FCB (file control block).  Call INT 21 AH=1A to
    find out whether there is a volume label.  If there is, AL returns 0
    and you can change the label using DOS function 17 or delete it
    using DOS function 13.  If there's no volume label, function 1A will
    return FF and you can create a label via function 16.  Important
    points to notice are that ? wildcards are allowed but * are not; the
    volume label must be space filled not null terminated.

    The following MSC 7.0 code worked for me in DOS 5.0; the functions
    it uses have been around since DOS 2.0.  The function parameter is 0
    for the current disk, 1 for a:, 2 for b:, etc.  It doesn't matter
    what your current directory is; these functions always search the
    root directory for volume labels.  (I didn't try to change the
    volume label of any networked drives.)

    </font><font color="#008000"><i>// Requires DOS.H, STDIO.H, STRING.H
    </i></font><font color="#FF00FF">void vollabel(unsigned char drivenum) </font><font color="#008000"><i>{
        static unsigned char extfcb[41], dta[64], status, *newlabel;
        int chars_got = 0;
        #define DOS(buff,func) __asm { __asm mov dx,offset buff \
            __asm mov ax,seg buff  __asm push ds  __asm mov ds,ax \
            __asm mov ah,func  __asm int 21h  __asm pop ds \
            __asm mov status,al }
        </i></font><font color="#FF00FF">#define getlabel(buff,prompt) newlabel = buff;  \
            memset(newlabel,' ',11);  printf(prompt);   \
            scanf(&quot;%11[^\n]%n&quot;, newlabel, &amp;chars_got);  \
            if (chars_got &lt; 11) newlabel[chars_got] = ' ';

        </font><font color="#008000"><i>// Set up the 64-byte transfer area used by function 1A.
        </i></font><font color="#FF00FF">DOS(dta, 1Ah)
        </font><font color="#008000"><i>// Set up an extended FCB and search for the volume label.
        </i></font><font color="#FF00FF">memset(extfcb, 0, sizeof extfcb);
        extfcb[0] = 0xFF;             </font><font color="#008000"><i>// denotes extended FCB
        </i></font><font color="#FF00FF">extfcb[6] = 8;                </font><font color="#008000"><i>// volume-label attribute bit
        </i></font><font color="#FF00FF">extfcb[7] = drivenum;         </font><font color="#008000"><i>// 1=A, 2=B, etc.; 0=current drive
        </i></font><font color="#FF00FF">memset(&amp;extfcb[8], '?', 11);  </font><font color="#008000"><i>// wildcard *.*
        </i></font><font color="#FF00FF">DOS(extfcb,11h)
        if (status == 0) </font><font color="#008000"><i>{            // DTA contains volume label's FCB
            printf(&quot;volume label is %11.11s\n&quot;, &amp;dta[8]);
            getlabel(&amp;dta[0x18], &quot;new label (\&quot;delete\&quot; to delete): &quot;);
            if (chars_got == 0)
                printf(&quot;label not changed\n&quot;);
            else if (strncmp(newlabel,&quot;delete     &quot;,11) == 0) {
                DOS(dta,13h)
                printf(status ? &quot;label failed\n&quot; : &quot;label deleted\n&quot;);
            }
            </i></font><font color="#FF00FF">else </font><font color="#008000"><i>{                    // user wants to change label
                DOS(dta,17h)
                printf(status ? &quot;label failed\n&quot; : &quot;label changed\n&quot;);
            }
        </i></font><font color="#FF00FF">}
        else </font><font color="#008000"><i>{                        // no volume label was found
            printf(&quot;disk has no volume label.\n&quot;);
            getlabel(&amp;extfcb[8], &quot;new label (&lt;Enter&gt; for none): &quot;);
            if (chars_got &gt; 0) {
                DOS(extfcb,16h)
                printf(status ? &quot;label failed\n&quot; : &quot;label created\n&quot;);
            }
        </i></font><font color="#FF00FF">}
    }   </font><font color="#008000"><i>// end function vollabel

</i></font><font color="#FF00FF">Q409. How can I get the disk serial number?

    Use INT 21.  AX=6900 gets the serial number; AX=6901 sets it.  See
    Ralf Brown's interrupt list, or page 496 of the July 1992 {PC
    Magazine}, for details.

    This function also gets and sets the volume label, but it's the
    volume label in the boot record, not the volume label that a DIR
    command displays.  See the preceding Q.

Q410. What's the format of .OBJ, .EXE., .COM files?

    Please see section 2, &quot;Compile and link&quot;.


section 5. Serial ports (COM ports)
===================================

Q501. How do I set my machine up to use COM3 and COM4?

    Unless your machine is fairly old, it's probably already set up.
    After installing the board that contains the extra COM port(s),
    check the I/O addresses in word 0040:0004 or 0040:0006.  (In DEBUG,
    type &quot;D 40:4 L4&quot; and remember that every word is displayed low
    byte first, so if you see &quot;03 56&quot; the word is 5603.)  If those
    addresses are nonzero, your PC is ready to use the ports and you
    don't need the rest of this answer.

    If the I/O address words in the 0040 segment are zero after you've
    installed the I/O board, you need some code to store these values
    into the BIOS data segment:

        0040:0004  word  I/O address of COM3
        0040:0006  word  I/O address of COM4
        0040:0011  byte (bits 3-1): number of serial ports installed

    The documentation with your I/O board should tell you the port
    addresses.  When you know the proper port addresses, you can add
    code to your program to store them and the number of serial ports
    into the BIOS data area before you open communications.  Or you can
    use DEBUG to create a little program to include in your AUTOEXEC.BAT
    file, using this script:

            n SET_ADDR.COM      &lt;--- or a different name ending in .COM
            a 100
            mov  AX,0040
            mov  DS,AX
            mov  wo [0004],aaaa &lt;--- replace aaaa with COM3 address or 0
            mov  wo [0006],ffff &lt;--- replace ffff with COM4 address or 0
            and  by [0011],f1
            or   by [0011],8    &lt;--- use number of serial ports times 2
            mov  AH,0
            int  21
                                &lt;--- this line must be blank
            rCX
            1f
            rBX
            0
            w
            q

Q502. How do I find the I/O address of a COM port?

    Look in the four words beginning at 0040:0000 for COM1 through COM4.
    (The DEBUG command &quot;D 40:0 L8&quot; will do this.  Remember that words
    are stored and displayed low byte first, so a word value of 03F8
    will be displayed as F8 03.)  If the value is zero, that COM port is
    not installed (or you've got an old BIOS; see the preceding Q).  If
    the value is nonzero, it is the I/O address of the transmit/receive
    register for the COM port.  Each COM port occupies eight consecutive
    I/O addresses (though only seven are used by many chips).

    Here's some C code to find the I/O address:

        unsigned ptSel(unsigned comport) </font><font color="#008000"><i>{
            unsigned io_addr;
            if (comport &gt;= 1  &amp;&amp;  comport &lt;= 4) {
                unsigned far *com_addr = (unsigned far *)0x00400000UL;
                io_addr = com_addr[comport-1];
            }
            </i></font><font color="#FF00FF">else
                io_addr = 0;
            return io_addr;
        }

Q503. But aren't the COM ports always at I/O addresses 3F8, 2F8, 3E8,
      and 2E8?

    The first two are usually right (though not always); the last two
    are different on many machines.

Q504. How do I configure a COM port and use it to transmit data?

    After hearing several recommendations, I looked at Joe Campbell's {C
    Programmer's Guide to Serial Communications}, ISBN 0-672-22584-0,
    and agree that it is excellent.  He gives complete details on how
    serial ports work, along with complete programs for doing polled or
    interrupt-driver I/O.  The book is quite thick, and none of it looks
    like filler.

    If Campbell's book is overkill for you, you'll find a good short
    description of serial I/O in </font><font color="#008000"><i>{DOS 5: A Developer's Guide}</i></font><font color="#FF00FF">, ISBN
    1-55851-177-6, by Al Williams.

    You may also want to look at an extended example in Borland's
    TechFax TI445, part of PD1:&lt;MSDOS.TURBO-C&gt; at Simtel.  Though
    written by Borland, much of it is applicable to other forms of C,
    and it should give you ideas for other programming languages.

section 6. Other hardware questions and problems
================================================

Q601. Which 80x86 CPU is running my program?

    According to an article posted by Michael Davidson, Intel's approved
    code for distinguishing among 8086, 80286, 80386, and 80486 and for
    detecting the presence of an 80287 or 80387 is published in the
    Intel's 486SX processor manual (order number 240950-001).  You can
    download David Kirschbaum's improved version of this from Simtel as
    PD1:&lt;MSDOS.SYSUTL&gt;CPUID593.ZIP.

    According to an article posted by its author, WCPU041.ZIP knows the
    differences between DX and SX varieties of 386 and 486 chips, and
    can also detect a math coprocessor.  It's in PD1:&lt;MSDOS.SYSUTL&gt; at
    Simtel.

Q602. How can a C program send control codes to my printer?

    If you just fprintf(stdprn, ...), C will translate some of your
    control codes.  The way around this is to reopen the printer in
    binary mode:

        prn = fopen(&quot;PRN&quot;, &quot;wb&quot;);

    You must use a different file handle because stdprn isn't an lvalue.
    By the way, PRN or LPT1 must not be followed by a colon in DOS 5.0.

    There's one special case, Ctrl-Z (ASCII 26), the DOS end-of-file
    character.  If you try to send an ASCII 26 to your printer, DOS
    simply ignores it.  To get around this, you need to reset the
    printer from &quot;cooked&quot; to &quot;raw&quot; mode.  Microsoft C users must use int
    21 function 44, &quot;get/set device information&quot;.  Turbo C and Borland
    C++ users can use ioctl to accomplish the same thing:

        ioctl(fileno(prn), 1, ioctl(fileno(prn),0) &amp; 0xFF | 0x20, 0);

    An alternative approach is simply to write the printer output into a
    disk file, then copy the file to the printer with the /B switch.

    A third approach is to bypass DOS functions entirely and use the
    BIOS printer functions at INT 17.  If you also fprintf(stdprn,...)
    in the same program, you'll need to use fflush( ) to synchronize
    fprintf( )'s buffered output with the BIOS's unbuffered.

    By the way, if you've opened the printer in binary mode from a C
    program, remember that outgoing \n won't be translated to carriage
    return/line feed.  Depending on your printer, you may need to send
    explicit \n\r sequences.

Q603. How can I redirect printer output to a file?

    Please see section 4, &quot;Disks and files&quot;, for the answer.

Q604. Which video adapter is installed?

    The technique below should work if your BIOS is not too old.  It
    uses three functions from INT 10, the BIOS video interrupt.  (If
    you're using a Borland language, you may not have to do this the
    hard way.  Look for a function called DetectGraph or something
    similar.)

    Set AH=12h, AL=0, BL=32h; INT 10h.  If AL is 12h, you have a VGA.
    If not, set AH=12h, BL=10h; INT 10h.  If BL is 0,1,2,3, you have an
    EGA with 64,128,192,256K memory.  If not, set AH=0Fh; INT 10h.  If
    AL is 7, you have an MDA (original monochrome adapter) or Hercules;
    if not, you have a CGA.

    I've tested this for my VGA and got the right answer; but I can't
    test it for the other equipment types.  Please let me know by email
    at brown@ncoast.org if your results vary.

Q605. How do I switch to 43- or 50-line mode?

    Download PD1:&lt;MSDOS.SCREEN&gt;VIDMODE.ZIP from Simtel or one of the
    mirror sites.  It contains .COM utilities and .</font><font color="#FF0000"><b>ASM </b></font><font color="#FF00FF">source code.

Q606. How can I find the Microsoft mouse position and button status?

    Use INT 33 function 3, described in Ralf Brown's interrupt list.

    The Windows manual says that the Logitech mouse is compatible with
    the Microsoft one, so I assume the interrupt will work the same.

    Also, see the directory PD1:&lt;MSDOS.MOUSE&gt; at Simtel.

Q607. How can I access a specific address in the PC's memory?

    First check the library that came with your compiler.  Many vendors
    have some variant of peek and poke functions; in Turbo Pascal use
    the pseudo-arrays Mem, MemW, and MemL.  As an alternative, you can
    construct a far pointer:  use Ptr in Turbo Pascal, MK_FP in the
    Turbo C family, and FP_OFF and FP_SEG in Microsoft C.

    Caution:  Turbo C and Turbo C++ also have FP_OFF and FP_SEG macros,
    but they can't be used to construct a pointer.  In Borland C++ those
    macros work the same as in Microsoft C, but MK_FP is easier to use.

    By the way, it's not useful to talk about &quot;portable&quot; ways to do
    this.  Any operation that is tied to a specific memory address is
    not likely to work on another kind of machine.

Q608. How can I read or write my PC's CMOS memory?

    There are a great many public-domain utilities that do this.  These
    were available for download from Simtel as of 31 March 1992:

    PD1:&lt;MSDOS.AT&gt;
    CMOS14.ZIP     5965  920817  Saves/restores CMOS to/from file
    CMOSER11.ZIP  28323  910721  386/286 enhanced CMOS setup program
    CMOSRAM.ZIP   76096  920214  Save AT/386/486 CMOS data to file and restore
    ROM2.ARC      20497  900131  Save AT and 386 CMOS data to file and restore
    SETUP21.ARC   24888  880613  Setup program which modifies CMOS RAM
    VIEWCMOS.ARC  15374  900225  Display contents of AT CMOS RAM, w/C source

    At garbo, /pc/ts/tsutle17.zip contains a CMOS program to check and
    display CMOS memory, but not to write to it.

    I have heard good reports of CMOS299.ZIP, available in the pc.dir
    directory of cantva.canterbury.ac.nz [132.181.30.3].

    Of the above, my only experience is with CMOSRAM, which seems to
    work fine.  It contains an excellent (and witty) .DOC file that
    explains the hardware involved and gives specific recommendations
    for preventing disaster or recovering from it.  It's $5 shareware.

    Robert Jourdain's {Programmer's Problem Solver for the IBM PC, XT,
    and AT} has code for accessing the CMOS RAM, according to an article
    posted in this newsgroup.

Q609. How can I access memory beyond 640K?

    I'm outside my expertise on this one, but in late 1992 Jamshid
    Afshar (jamshid@emx.utexas.edu) kindly supplied the following, which
    incorporates some corrections agreed with Duncan Murdoch (dmurdoch@
    mast.queensu.ca).  If you have any corrections or comments, please
    send them to both the above addresses.

    ...........................(begin quote)............................
    1. Use XMS or EMS memory.  XMS is preferable in most cases, but
    some machines won't provide it.  There are some libraries available
    at Simtel to access XMS or EMS.  The disadvantage is that you
    don't allocate the memory as you would with malloc() (or `new' in
    C++).  I believe it also requires that you lock this memory when in
    use.  This means your code is not easily ported to other (and
    future) operating systems and that your code is more convoluted than
    it would be under a &quot;real&quot; os.  The advantage is that the library
    works with compilers since Turbo C 2.0 (I think) and that your
    program will easily run on even 286s.

    2.  Program under MS Windows.  MS Windows functions as a 16-bit DOS
    Extender (see #3).  Borland/Turbo C++ 3.x includes EasyWin [and
    Microsoft C/C++ 7.0 has QuickWin --ed.] which is a library that
    automatically lets you compile your current code using C/C++
    standard input or &lt;conio.h&gt; into a MS Windows program so your code
    can immediately allocate many MBs of memory (Windows enhanced mode
    even does virtual memory).  The disadvantage is that like any 16-bit
    Extender a single malloc() is restricted to 64K (unless you want to
    mess with huge pointers in Windows).  Also, EasyWin's screen output
    is significantly slower than a DOS character-mode program's and you
    must of course run the program from Windows.

    3.  Use a 16-bit or 32-bit DOS Extender.  This is definitely the
    best solution from the programmer's standpoint.  You just allocate
    as much memory as you need using malloc() or 'new'.  A 16-bit
    Extender still has 16-bit ints and restricts arrays to 64K, but a
    32-bit Extender has 32-bits ints (which makes porting a lot of UNIX
    code easier) so there are no 64K limits.  A 32-bit Extender requires
    a 32-bit compiler and the program will not run on 286s.  Some
    Extenders also do virtual memory.  Using an Extender doesn't require
    source code changes and unlike option #1 your code is portable and
    not obsolete in a few months.  Your options for this solution are:

    - Buy PharLap's 16-bit Extender that works with BC++ 3.0+ and MSC
      (just requires a relink).  Note, the BC++ 3.1 upgrade came with
      PharLap &quot;lite&quot;.  Pharlap's 32-bit Extender works with 32-bit
      compilers like [?]

    - Get the GNU (free,copylefted) gcc 2.x compiler which DJ Delorie
      ported from UNIX and which uses his 32-bit Extender.  It supports
      C and C++, but the Extender is VCPI which means neither the
      compiler nor programs it produces will run in a DOS session under
      Windows.  FTP to barnacle.erc.clarkson.edu and get
      pub/msdos/djgpp/readme.

    - Get a 32-bit compiler or one that comes with a DOS Extender.
      Zortech comes with 16-bit and a 32-bit Extenders (no debugger for
      32-bit programs, but Flashtek sells one).  Watcom also makes a C
      [and C++?] 32-bit compiler.  [If anyone else has products or plans
      to announce, please let me know.]

    - Buy Borland Pascal 7.0.  It includes a 16 bit royalty-free DOS
      extender using the same interface as MS Windows.  It functions
      under a DPMI server like Windows or QDPMI from Quarterdeck, and
      also provides its own server which you can distribute with your
      programs.

    4.  This option doesn't really count since it's not a solution in
    DOS, but you could switch to a full 32-bit operating system like
    OS/2 2.0 or UNIX (or NT when it comes out).  I believe Win32 will
    allow you to write 32-bit Windows programs.  [can someone fill me in
    on what exactly Win32 is?]
    ............................(</font><font color="#FF0000"><b>end </b></font>quote<font color="#000080">).............................


</font>section <font color="#800000">7. </font>Other software questions <font color="#FF0000"><b>and </b></font>problems
<font color="#000080">================================================

</font>Q701<font color="#000080">. </font>How can a <font color="#FF0000"><b>program </b></font>reboot my PC<font color="#000080">?

    </font>You can generate a <font color="#000080">&quot;</font>cold<font color="#000080">&quot; </font>boot <font color="#FF0000"><b>or </b></font>a <font color="#000080">&quot;</font>warm<font color="#000080">&quot; </font>boot<font color="#000080">.  </font>A cold boot <font color="#FF0000"><b>is
    </b></font>the same <font color="#FF0000"><b>as </b></font>turning the power off <font color="#FF0000"><b>and on</b></font><font color="#000080">; </font>a warm boot <font color="#FF0000"><b>is </b></font>the same <font color="#FF0000"><b>as
    </b></font>Ctrl<font color="#000080">-</font>Alt<font color="#000080">-</font>Del <font color="#FF0000"><b>and </b></font>skips the power<font color="#000080">-</font><font color="#FF0000"><b>on </b></font>self test<font color="#000080">.

    </font><font color="#FF0000"><b>For </b></font>a warm boot<font color="#000080">, </font>store the hex value <font color="#800000">1234 </font><font color="#FF0000"><b>in </b></font>the word at <font color="#800000">0040</font><font color="#000080">:</font><font color="#800000">0072.
    </font><font color="#FF0000"><b>For </b></font>a cold boot<font color="#000080">, </font>store <font color="#800000">0 </font><font color="#FF0000"><b>in </b></font>that word<font color="#000080">.  </font><font color="#FF0000"><b>Then</b></font><font color="#000080">, </font><font color="#FF0000"><b>if </b></font>you want <font color="#FF0000"><b>to </b></font>live
    dangerously<font color="#000080">, </font>jump <font color="#FF0000"><b>to </b></font>address FFFF<font color="#000080">:</font><font color="#800000">0000.  </font>Here<font color="#800000">'s C code to do it:

        </font><font color="#000080">/* </font>WARNING<font color="#000080">:  </font>data loss possible <font color="#000080">*/
        </font>void bootme<font color="#000080">(</font>int want_warm<font color="#000080">)  /* </font>arg <font color="#800000">0 </font><font color="#000080">= </font>cold boot<font color="#000080">, </font><font color="#800000">1 </font><font color="#000080">= </font>warm <font color="#000080">*/ </font><font color="#008000"><i>{
            void (far* boot)(void) = (void (far*)(void))0xFFFF0000UL;
            unsigned far* type = (unsigned far*)0x00400072UL;
            *type = (want_warm ? 0x1234 : 0);
            (*boot)( );
        }

    </i></font>What<font color="#800000">'s wrong with that method?  It will boot right away, without
    </font>closing files<font color="#000080">, </font>flushing disk caches<font color="#000080">, </font>etc<font color="#000080">.  </font><font color="#FF0000"><b>If </b></font>you boot without
    flushing a write<font color="#000080">-</font>behind disk cache <font color="#000080">(</font><font color="#FF0000"><b>if </b></font>one <font color="#FF0000"><b>is </b></font>running<font color="#000080">), </font>you could
    lose data <font color="#FF0000"><b>or </b></font>even trash your hard drive<font color="#000080">.

    </font>There are two methods <font color="#FF0000"><b>of </b></font>signaling the cache <font color="#FF0000"><b>to </b></font>flush its buffers<font color="#000080">:
    (</font><font color="#800000">1</font><font color="#000080">) </font>simulate a keyboard Ctrl<font color="#000080">-</font>Alt<font color="#000080">-</font>Del <font color="#FF0000"><b>in </b></font>the keystroke translation
    <font color="#FF0000"><b>function of </b></font>the BIOS <font color="#000080">(</font>INT <font color="#800000">15 </font><font color="#FF0000"><b>function </b></font><font color="#800000">4</font>F<font color="#000080">), </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font><font color="#800000">2</font><font color="#000080">) </font>issue a disk
    reset <font color="#000080">(</font>DOS <font color="#FF0000"><b>function </b></font><font color="#800000">0</font>D<font color="#000080">).  </font>Most disk<font color="#000080">-</font>cache programs hook one <font color="#FF0000"><b>or </b></font>both
    <font color="#FF0000"><b>of </b></font>those interrupts<font color="#000080">, </font>so <font color="#FF0000"><b>if </b></font>you use both methods you<font color="#800000">'ll probably be
    </font>safe<font color="#000080">.

    </font>When user code simulates a Ctrl<font color="#000080">-</font>Alt<font color="#000080">-</font>Del<font color="#000080">, </font>one <font color="#FF0000"><b>or </b></font>more <font color="#FF0000"><b>of </b></font>the programs
    that have hooked INT <font color="#800000">15 </font><font color="#FF0000"><b>function </b></font><font color="#800000">4</font>F can ask that the key be ignored by
    clearing the carry flag<font color="#000080">.  </font><font color="#FF0000"><b>For </b></font>example<font color="#000080">, </font>HyperDisk does this when it
    has started but <font color="#FF0000"><b>not </b></font>finished a cache flush<font color="#000080">.  </font>So <font color="#FF0000"><b>if </b></font>the carry flag
    comes back cleared<font color="#000080">, </font>the boot code has <font color="#FF0000"><b>to </b></font>wait a couple <font color="#FF0000"><b>of </b></font>cluck
    ticks <font color="#FF0000"><b>and then try </b></font>again<font color="#000080">.  (</font>None <font color="#FF0000"><b>of </b></font>this matters <font color="#FF0000"><b>on </b></font>older machines
    whose BIOS can<font color="#800000">'t support 101- or 102-key keyboards; see &quot;What is the
    </font>SysRq key <font color="#FF0000"><b>for</b></font><font color="#000080">?&quot; </font><font color="#FF0000"><b>in </b></font>section <font color="#800000">3</font><font color="#000080">, &quot;</font>Keyboard<font color="#000080">&quot;.)

    </font>Here<font color="#800000">'s C code that tries to signal the disk cache (if any) to flush:

        #</font>include <font color="#000080">&lt;</font>dos<font color="#000080">.</font>h<font color="#000080">&gt;
        </font>void bootme<font color="#000080">(</font>int want_warm<font color="#000080">)  /* </font>arg <font color="#800000">0 </font><font color="#000080">= </font>cold boot<font color="#000080">, </font><font color="#800000">1 </font><font color="#000080">= </font>warm <font color="#000080">*/ </font><font color="#008000"><i>{
            union REGS reg;
            void    (far* boot)(void) = (void (far*)(void))0xFFFF0000UL;
            unsigned far* boottype    =     (unsigned far*)0x00400072UL;
            char     far* shiftstate  =         (char far*)0x00400017UL;
            unsigned      ticks;
            int           time_to_waste;
            /* Simulate reception of Ctrl-Alt-Del: */
            for (;;) {
                *shiftstate |= 0x0C;    /* turn on Ctrl &amp; Alt */
                reg.x.ax = 0x4F53;      /* 0x53 = Del's scan code */
                reg.x.cflag = 1;        /* sentinel for ignoring key */
                int86(0x15, &amp;reg, &amp;reg);
                /* If carry flag is still set, we've finished. */
                if (reg.x.cflag)
                    break;
                /* Else waste some time before trying again: */
                reg.h.ah = 0;
                int86(0x1A, &amp;reg, &amp;reg);/* system time into CX:DX */
                ticks = reg.x.dx;
                for (time_to_waste = 3;  time_to_waste &gt; 0;  ) {
                    reg.h.ah = 0;
                    int86(0x1A, &amp;reg, &amp;reg);
                    if (ticks != reg.x.dx)
                        ticks = reg.x.dx , --time_to_waste;
                }
            </i></font><font color="#000080">}
            /* </font>Issue a DOS disk reset request<font color="#000080">: */
            </font>reg<font color="#000080">.</font>h<font color="#000080">.</font>ah <font color="#000080">= </font><font color="#800000">0</font>x0D<font color="#000080">;
            </font>int86<font color="#000080">(</font><font color="#800000">0</font>x21<font color="#000080">, &amp;</font>reg<font color="#000080">, &amp;</font>reg<font color="#000080">);
            /* </font><font color="#FF0000"><b>Set </b></font>boot <font color="#FF0000"><b>type and </b></font>boot<font color="#000080">: */
            *</font>boottype <font color="#000080">= (</font>want_warm <font color="#000080">? </font><font color="#800000">0</font>x1234 <font color="#000080">: </font><font color="#800000">0</font><font color="#000080">);
            </font><font color="#008000"><i>(*boot)( );
        }

Q702. How can I time events with finer resolution than the system
      clock's 55 ms (about 18 ticks a second)?

    The following files, among others, can be downloaded from Simtel:

    PD1:&lt;MSDOS.AT&gt;
    ATIM.ARC       5946  881126  Precision program timing for AT

    PD1:&lt;MSDOS.C&gt;
    MILLISEC.ZIP  37734  911205  MSC/asm src for millisecond res timing
    MSCHRT3.ZIP   53708  910605  High-res timer toolbox for MSC 5.1
    MSEC_12.ZIP    8484  920320  High-def millisec timer v1.2 (C,ASM)
    ZTIMER11.ZIP  77625  920428  Microsecond timer for C, C++, ASM

    PD1:&lt;MSDOS.TURBO-C&gt;
    TCHRT3.ZIP    53436  910606  High-res timer toolbox for Turbo C 2.0
    TCTIMER.ARC   20087  891030  High-res timing of events for Turbo C

    PD1:&lt;MSDOS.TURBOPAS&gt;
    BONUS507.ARC 150435  900205  [Turbo Pascal source: high-res timing]

    Pascal users can download source code in /pc/turbopas/bonus507.zip
    at garbo.

Q703. How can I find the error level of the previous program?

    First, which previou
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to FAQ SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0002.PAS">Original</a><b>]</b></p></body>
</html>
