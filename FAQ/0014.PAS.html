<html>
<head><title> "How Much Memory" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to FAQ SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0014.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#000080">&gt; </font>Can anyone help me <font color="#FF0000"><b>in </b></font>determining how much stack<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>heap memory
<font color="#000080">&gt; </font>you need <font color="#FF0000"><b>to </b></font>give a TSR<font color="#000080">, </font>does it depend <font color="#FF0000"><b>on </b></font>how many variables <font color="#FF0000"><b>or </b></font>how
<font color="#000080">&gt; </font>long your code <font color="#FF0000"><b>is</b></font><font color="#000080">?

</font>Your three requirements are based <font color="#FF0000"><b>on </b></font>the following<font color="#000080">:

</font>Stack Space
<font color="#000080">-----------
</font>This <font color="#FF0000"><b>is </b></font>based <font color="#FF0000"><b>on </b></font>how deep your <font color="#FF0000"><b>procedure </b></font>nesting goes<font color="#000080">, </font>whether your
procedures are recursive <font color="#FF0000"><b>and </b></font>how much they<font color="#800000">'ll recurse, how large the
</font>Parameters <font color="#FF0000"><b>to </b></font>those procedures are<font color="#000080">, </font><font color="#FF0000"><b>and </b></font>size <font color="#FF0000"><b>of </b></font>local variables<font color="#000080">. </font>Keep <font color="#FF0000"><b>in
</b></font>mind that you only have <font color="#FF0000"><b>to </b></font>cover the largest<font color="#000080">/</font>deepest combo <font color="#FF0000"><b>of </b></font>everything
<font color="#FF0000"><b>to </b></font>be safe<font color="#000080">, </font><font color="#FF0000"><b>not </b></font>the total<font color="#000080">. </font><font color="#FF0000"><b>TO </b></font>be safe you should leave a little extra
<font color="#FF0000"><b>for </b></font>interrupts <font color="#FF0000"><b>and </b></font>stuff <font color="#FF0000"><b>to </b></font>use <font color="#000080">(</font><font color="#800000">$100 </font><font color="#FF0000"><b>or </b></font>so<font color="#000080">)
</font>I use <font color="#800000">$2000 </font><font color="#FF0000"><b>for </b></font>most programs<font color="#000080">, </font><font color="#FF0000"><b>and </b></font><font color="#800000">$400 </font><font color="#FF0000"><b>for </b></font>my TSR<font color="#800000">'s, which will hardly
</font>ever use that much<font color="#000080">. </font><font color="#800000">$400 </font><font color="#FF0000"><b>is </b></font>the minimum you can declare<font color="#000080">.
</font><font color="#FF0000"><b>If </b></font>you <font color="#FF0000"><b>do </b></font>alot <font color="#FF0000"><b>of </b></font>recursion <font color="#FF0000"><b>or </b></font>put huge things <font color="#FF0000"><b>on </b></font>the stack<font color="#000080">, </font>use more<font color="#000080">.
</font>Actually<font color="#000080">, </font>use the smallest number you can get away <font color="#FF0000"><b>with </b></font>without an error
<font color="#FF0000"><b>while </b></font>stack checking <font color="#FF0000"><b>is </b></font>enabled<font color="#000080">.

</font>Minimum Heap
<font color="#000080">------------
</font>This <font color="#FF0000"><b>is </b></font>the LEAST heap space your <font color="#FF0000"><b>program </b></font>can run <font color="#FF0000"><b>with</b></font><font color="#000080">. </font>Your <font color="#FF0000"><b>program
</b></font>ABSOLUTELY HAS <font color="#FF0000"><b>to </b></font>have at least this much heap space when it<font color="#800000">'s run.

</font>You use heap space when you declare variables <font color="#FF0000"><b>with </b></font>New <font color="#FF0000"><b>or </b></font>getMem <font color="#000080">(</font>like
<font color="#FF0000"><b>with </b></font>Turbo Vision <font color="#FF0000"><b>or </b></font>other objects<font color="#000080">)

</font>So <font color="#FF0000"><b>if </b></font>you don<font color="#800000">'t use any dynamic variables, you can pretty safely set
</font>this <font color="#FF0000"><b>to </b></font><font color="#800000">0. </font>Otherwise<font color="#000080">, </font><font color="#FF0000"><b>set </b></font>it <font color="#FF0000"><b>to </b></font>a reasonable number <font color="#FF0000"><b>for </b></font>your
application<font color="#000080">. (</font>I mean <font color="#FF0000"><b>if </b></font>your database <font color="#FF0000"><b>program </b></font>only has memory <font color="#FF0000"><b>for </b></font>ONE
<font color="#FF0000"><b>record</b></font><font color="#000080">, </font>what use <font color="#FF0000"><b>is </b></font>it <font color="#FF0000"><b>for </b></font>it <font color="#FF0000"><b>to </b></font>run<font color="#000080">?)

</font>Maximum Heap
<font color="#000080">------------
</font>This <font color="#FF0000"><b>is </b></font>the most heap space your <font color="#FF0000"><b>program </b></font>WILL reserve<font color="#000080">, </font>even <font color="#FF0000"><b>if </b></font>more <font color="#FF0000"><b>is
</b></font>available<font color="#000080">. </font>This needs <font color="#FF0000"><b>to </b></font>be large enough <font color="#FF0000"><b>to </b></font>hold all the <font color="#FF0000"><b>dynamic
</b></font>variables you plan <font color="#FF0000"><b>on </b></font>allocating<font color="#000080">, </font>plus a little<font color="#000080">...

</font>Problem <font color="#FF0000"><b>with </b></font>reserving it ALL <font color="#FF0000"><b>is </b></font>that you can no longer spawn child
processes <font color="#FF0000"><b>with </b></font>exec<font color="#000080">. </font>So this needs <font color="#FF0000"><b>to </b></font>be small enough <font color="#FF0000"><b>to </b></font>let other
processes you plan <font color="#FF0000"><b>on </b></font>running <font color="#000080">(</font>dos shells<font color="#000080">) </font>run<font color="#000080">, </font>yet large enough so you
don<font color="#800000">'t run out of memory easily...

</font>This <font color="#FF0000"><b>is </b></font>the toughest one <font color="#FF0000"><b>to set</b></font><font color="#000080">.

</font><font color="#FF0000"><b>In </b></font>programs that don<font color="#800000">'t use the heap, set it to 0.

</font><font color="#FF0000"><b>in </b></font>programs that will never ever call a child process <font color="#FF0000"><b>with </b></font>Exec<font color="#000080">, </font><font color="#FF0000"><b>set </b></font>it
<font color="#FF0000"><b>to </b></font><font color="#800000">655360 </font><font color="#000080">(</font><font color="#800000">$100000</font><font color="#000080">, </font><font color="#FF0000"><b>or </b></font>all available memory<font color="#000080">)

</font>otherwise<font color="#000080">, </font>your guess <font color="#FF0000"><b>is as </b></font>good <font color="#FF0000"><b>as </b></font>mine<font color="#000080">...

</font>I have my <font color="#FF0000"><b>default set </b></font>at <font color="#800000">65536. </font><font color="#000080">(</font><font color="#800000">$10000</font><font color="#000080">)

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to FAQ SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0014.PAS">Original</a><b>]</b></p></body>
</html>
