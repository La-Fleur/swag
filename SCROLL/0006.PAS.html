<html>
<head><title> "Quick Scroller" by BERNIE PALLEK</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to SCROLL SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0006.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
BERNIE PALLEK

&gt;Would anyone happen to know how I can use the ASCII Characters
&gt;while in Video mode $13 (320x200x256)? Or better yet, make a message
&gt;scroll across the screen like in them neat intros and demos..

The easiest way to do it is to set DirectVideo to False (if you are using
the Crt Unit).  This disables direct Writes to the screen, meaning that
the BIOS does screen writing, and the BIOS works in just about every
screen mode.  Then, you can just use Write and WriteLn to display Text
Characters (I think GotoXY will even work).  As For scrolling...
Since mode 13h ($13) has linearly addressed video memory (just a run
of 64,000 contiguous Bytes), do something like this:

this is untested, but it might actually work  :')
}

</i></font><font color="#FF0000"><b>Uses
  </b></font>Crt<font color="#000080">;
</font><font color="#FF0000"><b>Const
  </b></font>msgRow <font color="#000080">= </font><font color="#800000">23</font><font color="#000080">;
  </font>waitTime <font color="#000080">= </font><font color="#800000">1</font><font color="#000080">; </font><font color="#008000"><i>{ adjust suit your CPU speed }
  </i></font>myMessage <font color="#000080">: </font><font color="#FF0000"><b>String </b></font><font color="#000080">= </font><font color="#800000">'This is a test message.  It should be more ' </font><font color="#000080">+
        </font><font color="#800000">'than 40 Characters long so the scrolling can be demonstrated.'</font><font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>sx<font color="#000080">, </font>xpos <font color="#000080">: </font>Byte<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>MoveCharsLeft<font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>curLine <font color="#000080">: </font>Word<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font><font color="#008000"><i>{ shift the row left 1 pixel }
  </i></font><font color="#FF0000"><b>For </b></font>curLine <font color="#000080">:= (</font>msgRow <font color="#000080">* </font><font color="#800000">8</font><font color="#000080">) </font><font color="#FF0000"><b>to </b></font><font color="#000080">(</font>msgRow <font color="#000080">* </font><font color="#800000">8</font><font color="#000080">) + </font><font color="#800000">7 </font><font color="#FF0000"><b>DO
    </b></font>Move<font color="#000080">(</font>Mem<font color="#000080">[</font><font color="#800000">$A000 </font><font color="#000080">: </font>curLine <font color="#000080">* </font><font color="#800000">320 </font><font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">], </font>Mem<font color="#000080">[</font><font color="#800000">$A000 </font><font color="#000080">: </font>curLine <font color="#000080">* </font><font color="#800000">320</font><font color="#000080">], </font><font color="#800000">319</font><font color="#000080">);
  </font><font color="#008000"><i>{ clear the trailing pixels }
  </i></font><font color="#FF0000"><b>For </b></font>curLine <font color="#000080">:= (</font>msgRow <font color="#000080">* </font><font color="#800000">8</font><font color="#000080">) </font><font color="#FF0000"><b>to </b></font><font color="#000080">(</font>msgRow <font color="#000080">* </font><font color="#800000">8</font><font color="#000080">) + </font><font color="#800000">7 </font><font color="#FF0000"><b>DO
    </b></font>Mem<font color="#000080">[</font><font color="#800000">$A000 </font><font color="#000080">: </font>curLine <font color="#000080">* </font><font color="#800000">320 </font><font color="#000080">+ </font><font color="#800000">319</font><font color="#000080">] := </font><font color="#800000">0</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  Asm
    </b></font><font color="#FF00FF">MOV AX, $13
    INT $10
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>DirectVideo <font color="#000080">:= </font>False<font color="#000080">;
  </font>GotoXY<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">, </font>msgRow <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">);
  </font>Write<font color="#000080">(</font>Copy<font color="#000080">(</font>myMessage<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">40</font><font color="#000080">));
  </font><font color="#008000"><i>{ 'myMessage' must be a String With a Length &gt; 40 }
  </i></font><font color="#FF0000"><b>For </b></font>xpos <font color="#000080">:= </font><font color="#800000">41 </font><font color="#FF0000"><b>to </b></font>Length<font color="#000080">(</font>myMessage<font color="#000080">) </font><font color="#FF0000"><b>do
  begin
    For </b></font>sx <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">7 </font><font color="#FF0000"><b>do
    begin
      </b></font>MoveCharsLeft<font color="#000080">;
      </font>Delay<font color="#000080">(</font>waitTime<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>GotoXY<font color="#000080">(</font><font color="#800000">40</font><font color="#000080">, </font>msgRow <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">);
    </font>Write<font color="#000080">(</font>myMessage<font color="#000080">[</font>xpos<font color="#000080">]);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>Asm
    </b></font><font color="#FF00FF">MOV AX, $3
    INT $10
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font><font color="#008000"><i>{
This may not be very efficiently coded.  As well, it could benefit from
an Assembler version.  But it should at least demonstrate a technique
you can learn from.  }

</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to SCROLL SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0006.PAS">Original</a><b>]</b></p></body>
</html>
