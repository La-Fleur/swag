<html>
<head><title> "Reading User/IDX Files" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to FILES SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0038.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
  Here's the demo Program I promised. You'll have to add the missing
  Type definitions before you will be able to run this Program.
}

</i></font><font color="#FF0000"><b>Program </b></font>Demo_Read_User_Files<font color="#000080">;

</font><font color="#FF0000"><b>Type

  </b></font><font color="#008000"><i>(* NOTE: Missing Type definitions need to go here, before this      *)
  (*       Program will compile.                                      *)
  (*                                                                  *)
  (*   ie: uflags, suflags, acrq, mhireadr, mzscanr, fzscanr,         *)
  (*       colors.                                                    *)
  (*                                                                  *)

  (* USERS.IDX : Sorted names listing                     *)
  </i></font>UserIdxRec <font color="#000080">= </font><font color="#FF0000"><b>Record
    </b></font>Name     <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">36</font><font color="#000080">];   </font><font color="#008000"><i>(* Name (Real or handle) *)
    </i></font>Number   <font color="#000080">: </font>Integer<font color="#000080">;      </font><font color="#008000"><i>(* User number           *)
    </i></font>RealName <font color="#000080">: </font>Boolean<font color="#000080">;      </font><font color="#008000"><i>(* User's Real name?     *)
    </i></font>Deleted  <font color="#000080">: </font>Boolean<font color="#000080">;      </font><font color="#008000"><i>(* Deleted or not        *)
    </i></font>Left     <font color="#000080">: </font>Integer<font color="#000080">;      </font><font color="#008000"><i>(* Record or -1          *)
    </i></font>Right    <font color="#000080">: </font>Integer<font color="#000080">;      </font><font color="#008000"><i>(* Record or -1          *)
  </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>(* USERS.DAT : User Records                             *)
  </i></font>UserRec <font color="#000080">= </font><font color="#FF0000"><b>Record
    </b></font>Name           <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">36</font><font color="#000080">];     </font><font color="#008000"><i>(* System name      *)
    </i></font>RealName       <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">36</font><font color="#000080">];     </font><font color="#008000"><i>(* Real name        *)
    </i></font>PW             <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">20</font><font color="#000080">];     </font><font color="#008000"><i>(* PassWord         *)
    </i></font>Ph             <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">12</font><font color="#000080">];     </font><font color="#008000"><i>(* Phone #          *)
    </i></font>BDay           <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">8</font><font color="#000080">];      </font><font color="#008000"><i>(* Birthdate        *)
    </i></font>FirstOn        <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">8</font><font color="#000080">];      </font><font color="#008000"><i>(* First on date    *)
    </i></font>LastOn         <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">8</font><font color="#000080">];      </font><font color="#008000"><i>(* Last on date     *)
    </i></font>Street         <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">30</font><font color="#000080">];     </font><font color="#008000"><i>(* Street address   *)
    </i></font>CityState      <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">30</font><font color="#000080">];     </font><font color="#008000"><i>(* City, State      *)
    </i></font>ZipCode        <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">10</font><font color="#000080">];     </font><font color="#008000"><i>(* Zipcode          *)

                                     (* Type of computer *)
    </i></font>UsrDefStr      <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">3</font><font color="#000080">] </font><font color="#FF0000"><b>of String</b></font><font color="#000080">[</font><font color="#800000">35</font><font color="#000080">];

    </font><font color="#008000"><i>(* Occupation                                           *)

    (* BBS reference                                        *)
    </i></font>Note           <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">35</font><font color="#000080">];     </font><font color="#008000"><i>(* SysOp note       *)
    </i></font>UserStartMenu  <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">8</font><font color="#000080">];      </font><font color="#008000"><i>(* Menu to start at *)
    </i></font>LockedFile     <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">8</font><font color="#000080">];      </font><font color="#008000"><i>(* Print lockout msg*)
    </i></font>Flags          <font color="#000080">: </font><font color="#FF0000"><b>set of </b></font>uflags<font color="#000080">;  </font><font color="#008000"><i>(* Flags            *)
    </i></font>SFlags         <font color="#000080">: </font><font color="#FF0000"><b>set of </b></font>suflags<font color="#000080">; </font><font color="#008000"><i>(* Status flags     *)
    </i></font>AR             <font color="#000080">: </font><font color="#FF0000"><b>set of </b></font>acrq<font color="#000080">;    </font><font color="#008000"><i>(* AR flags         *)

                                     (* Voting data      *)
    </i></font>Vote           <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">25</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte<font color="#000080">;

    </font>Sex            <font color="#000080">: </font>Char<font color="#000080">;           </font><font color="#008000"><i>(* Gender           *)
    </i></font>TTimeOn<font color="#000080">,                         </font><font color="#008000"><i>(* Total time on    *)
    </i></font>UK<font color="#000080">,                              </font><font color="#008000"><i>(* UL k             *)
    </i></font>DK             <font color="#000080">: </font>LongInt<font color="#000080">;        </font><font color="#008000"><i>(* DL k             *)
    </i></font>TLToday<font color="#000080">,                         </font><font color="#008000"><i>(* # Min left today *)
    </i></font>ForUsr<font color="#000080">,                          </font><font color="#008000"><i>(* Forward mail to  *)
    </i></font>FilePoints     <font color="#000080">: </font>Integer<font color="#000080">;        </font><font color="#008000"><i>(* # Of File points *)

    </i></font>UpLoads<font color="#000080">, </font>DownLoads<font color="#000080">,              </font><font color="#008000"><i>(* # Of ULs/# of DLs*)
    </i></font>LoggedOn<font color="#000080">,                        </font><font color="#008000"><i>(* # Times on       *)
    </i></font>MsgPost<font color="#000080">,                         </font><font color="#008000"><i>(* # Message posts  *)
    </i></font>EmailSent<font color="#000080">,                       </font><font color="#008000"><i>(* # Email sent     *)
    </i></font>Feedback<font color="#000080">,                        </font><font color="#008000"><i>(* # Feedback sent  *)
    </i></font>Timebank<font color="#000080">,                        </font><font color="#008000"><i>(* # Mins in bank   *)
    </i></font>TimebankAdd<font color="#000080">,                     </font><font color="#008000"><i>(* # Added today    *)
    </i></font>DlKToday<font color="#000080">,                        </font><font color="#008000"><i>(* # KBytes dl today*)
    </i></font>DlToday        <font color="#000080">: </font>Word<font color="#000080">;           </font><font color="#008000"><i>(* # Files dl today *)

    </i></font>Waiting<font color="#000080">,                         </font><font color="#008000"><i>(* Mail waiting     *)
    </i></font>LineLen<font color="#000080">,                         </font><font color="#008000"><i>(* Line length      *)
    </i></font>PageLen<font color="#000080">,                         </font><font color="#008000"><i>(* Page length      *)
    </i></font>OnToday<font color="#000080">,                         </font><font color="#008000"><i>(* # Times on today *)
    </i></font>Illegal<font color="#000080">,                         </font><font color="#008000"><i>(* # Illegal logons *)
    </i></font>Barf<font color="#000080">,
    </font>LastMBase<font color="#000080">,                       </font><font color="#008000"><i>(* # Last msg base  *)
    </i></font>LastFBase<font color="#000080">,                       </font><font color="#008000"><i>(* # Last File base *)
    </i></font>SL<font color="#000080">, </font>DSL        <font color="#000080">: </font>Byte<font color="#000080">;           </font><font color="#008000"><i>(* SL / DSL         *)

    (* Message last read date ptrs      *)
    </i></font>MHiRead         <font color="#000080">: </font>mhireadr<font color="#000080">;
    </font><font color="#008000"><i>(* Which message bases to scan      *)
    </i></font>MzScan          <font color="#000080">: </font>mzscanr<font color="#000080">;
    </font><font color="#008000"><i>(* Which File bases to scan         *)
    </i></font>FzScan          <font color="#000080">: </font>fzscanr<font color="#000080">;

    </font><font color="#008000"><i>(* User colors                      *)
    </i></font>Cols            <font color="#000080">: </font>colors<font color="#000080">;

    </font>Garbage         <font color="#000080">: </font>Byte<font color="#000080">;

    </font><font color="#008000"><i>(* Amount of time Withdrawn today   *)
    </i></font>TimebankWith    <font color="#000080">: </font>Word<font color="#000080">;
    </font><font color="#008000"><i>(* Last day PassWord changed        *)
    </i></font>PassWordChanged <font color="#000080">: </font>Word<font color="#000080">;
    </font><font color="#008000"><i>(* Default QWK archive Type         *)
    </i></font>DefArcType      <font color="#000080">: </font>Byte<font color="#000080">;
    </font><font color="#008000"><i>(* Last conference they were in     *)
    </i></font>LastConf        <font color="#000080">: </font>Char<font color="#000080">;
    </font><font color="#008000"><i>(* Date/time of last qwk packet     *)
    </i></font>LastQwk         <font color="#000080">: </font>LongInt<font color="#000080">;
    </font><font color="#008000"><i>(* Add own messages to qwk packet?  *)
    </i></font>GetOwnQwk       <font color="#000080">: </font>Boolean<font color="#000080">;
    </font><font color="#008000"><i>(* Scan File bases For qwk packets? *)
    </i></font>ScanFilesQwk    <font color="#000080">: </font>Boolean<font color="#000080">;
    </font><font color="#008000"><i>(* Get private mail in qwk packets? *)
    </i></font>PrivateQwk      <font color="#000080">: </font>Boolean<font color="#000080">;
    </font><font color="#008000"><i>(* Amount of credit a User has      *)
    </i></font>Credit          <font color="#000080">: </font>LongInt<font color="#000080">;
    </font><font color="#008000"><i>(* Amount of debit a User has       *)
    </i></font>Debit           <font color="#000080">: </font>LongInt<font color="#000080">;
    </font><font color="#008000"><i>(* Expiration date of this User     *)
    </i></font>Expiration      <font color="#000080">: </font>LongInt<font color="#000080">;
    </font><font color="#008000"><i>(* Subscription level to expire to  *)
    </i></font>ExpireTo        <font color="#000080">: </font>Char<font color="#000080">;
    </font><font color="#008000"><i>(* User's color scheme #            *)
    </i></font>ColorScheme     <font color="#000080">: </font>Byte<font color="#000080">;
    </font><font color="#008000"><i>(* Echo Teleconf lines?             *)
    </i></font>TeleConfEcho    <font color="#000080">: </font>Boolean<font color="#000080">;
    </font><font color="#008000"><i>(* Interrupt during typing?         *)
    </i></font>TeleConfInt     <font color="#000080">: </font>Boolean<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#008000"><i>(***** Check For IO error, and take some sort of action?            *)
(*                                                                  *)
</i></font><font color="#FF0000"><b>Procedure </b></font>CheckForIOerror<font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>in_Error <font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>in_Error <font color="#000080">:= </font>ioresult<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>in_Error <font color="#000080">&lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
    begin
      </b></font>Writeln<font color="#000080">(</font><font color="#800000">' I/O Error = '</font><font color="#000080">, </font>in_Error<font color="#000080">);

      </font><font color="#008000"><i>(* Take some sort of action to correct error, or halt Program *)

    </i></font><font color="#FF0000"><b>end
end</b></font><font color="#000080">;        </font><font color="#008000"><i>(* CheckForIOerror.                                     *)


</i></font><font color="#FF0000"><b>Var
  </b></font>rc_TempUI   <font color="#000080">: </font>UserIdxRec<font color="#000080">;
  </font>rc_TempUR   <font color="#000080">: </font>UserRec<font color="#000080">;

  </font>fi_UsersIdx <font color="#000080">: </font><font color="#FF0000"><b>File of </b></font>UserIdxRec<font color="#000080">;
  </font>fi_UsersDat <font color="#000080">: </font><font color="#FF0000"><b>File of </b></font>UserRec<font color="#000080">;

</font><font color="#FF0000"><b>begin
              </b></font><font color="#008000"><i>(* Open USERS.IDX File.                                 *)
  </i></font>assign<font color="#000080">(</font>fi_UsersIdx<font color="#000080">, </font><font color="#800000">'USERS.IDX'</font><font color="#000080">);
  </font><font color="#008000"><i>{$I-}
  </i></font>reset<font color="#000080">(</font>fi_UsersIdx<font color="#000080">);
  </font><font color="#008000"><i>{$I+}
  </i></font>CheckForIOerror<font color="#000080">;

              </font><font color="#008000"><i>(* Read first Record from File.                         *)
  </i></font>read<font color="#000080">(</font>fi_UsersIdx<font color="#000080">, </font>rc_TempUI<font color="#000080">);
  </font>CheckForIOerror<font color="#000080">;

              </font><font color="#008000"><i>(* Display data from the first Record.                  *)
  </i></font><font color="#FF0000"><b>With </b></font>rc_TempUI <font color="#FF0000"><b>do
  begin
    </b></font>Writeln<font color="#000080">(</font><font color="#800000">'Name      = '</font><font color="#000080">, </font>Name<font color="#000080">);
    </font>Writeln<font color="#000080">(</font><font color="#800000">'Number    = '</font><font color="#000080">, </font>Number<font color="#000080">);
    </font>Writeln<font color="#000080">(</font><font color="#800000">'Real Name = '</font><font color="#000080">, </font>RealName<font color="#000080">);
    </font>Writeln<font color="#000080">(</font><font color="#800000">'Deleted   = '</font><font color="#000080">, </font>Deleted<font color="#000080">);
    </font>Writeln<font color="#000080">(</font><font color="#800000">'Left      = '</font><font color="#000080">, </font>Left<font color="#000080">);
    </font>Writeln<font color="#000080">(</font><font color="#800000">'Right     = '</font><font color="#000080">, </font>Right<font color="#000080">)
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

              </font><font color="#008000"><i>(* Read 10th Record from File.                          *)
  </i></font>seek<font color="#000080">(</font>fi_UsersIdx<font color="#000080">, </font>pred<font color="#000080">(</font><font color="#800000">10</font><font color="#000080">));
  </font>read<font color="#000080">(</font>fi_UsersIdx<font color="#000080">, </font>rc_TempUI<font color="#000080">);
  </font>CheckForIOerror<font color="#000080">;

              </font><font color="#008000"><i>(* Display data from the 10th Record.                   *)
  </i></font><font color="#FF0000"><b>With </b></font>rc_TempUI <font color="#FF0000"><b>do
  begin
    </b></font>Writeln<font color="#000080">(</font><font color="#800000">'Name      = '</font><font color="#000080">, </font>Name<font color="#000080">);
    </font>Writeln<font color="#000080">(</font><font color="#800000">'Number    = '</font><font color="#000080">, </font>Number<font color="#000080">);
    </font>Writeln<font color="#000080">(</font><font color="#800000">'Real Name = '</font><font color="#000080">, </font>RealName<font color="#000080">);
    </font>Writeln<font color="#000080">(</font><font color="#800000">'Deleted   = '</font><font color="#000080">, </font>Deleted<font color="#000080">);
    </font>Writeln<font color="#000080">(</font><font color="#800000">'Left      = '</font><font color="#000080">, </font>Left<font color="#000080">);
    </font>Writeln<font color="#000080">(</font><font color="#800000">'Right     = '</font><font color="#000080">, </font>Right<font color="#000080">)
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

              </font><font color="#008000"><i>(* Close USERS.IDX File.                                *)
  </i></font>close<font color="#000080">(</font>fi_UsersIdx<font color="#000080">);
  </font>CheckForIOerror<font color="#000080">;

              </font><font color="#008000"><i>(* Open USERS.DAT File.                                 *)
  </i></font>assign<font color="#000080">(</font>fi_UsersDat<font color="#000080">, </font><font color="#800000">'USERS.DAT'</font><font color="#000080">);
  </font><font color="#008000"><i>{$I-}
  </i></font>reset<font color="#000080">(</font>fi_UsersDat<font color="#000080">);
  </font><font color="#008000"><i>{$I+}
  </i></font>CheckForIOerror<font color="#000080">;

              </font><font color="#008000"><i>(* Read first Record from File.                         *)
  </i></font>read<font color="#000080">(</font>fi_UsersDat<font color="#000080">, </font>rc_TempUR<font color="#000080">);
  </font>CheckForIOerror<font color="#000080">;

              </font><font color="#008000"><i>(* Display data from the first Record.                  *)
  </i></font><font color="#FF0000"><b>With </b></font>rc_TempUR <font color="#FF0000"><b>do
    begin
      </b></font>Writeln<font color="#000080">(</font><font color="#800000">'Name      = '</font><font color="#000080">, </font>Name<font color="#000080">);
      </font>Writeln<font color="#000080">(</font><font color="#800000">'Real Name = '</font><font color="#000080">, </font>RealName<font color="#000080">);
      </font>Writeln<font color="#000080">(</font><font color="#800000">'Street    = '</font><font color="#000080">, </font>Street<font color="#000080">);
      </font>Writeln<font color="#000080">(</font><font color="#800000">'CityState = '</font><font color="#000080">, </font>CityState<font color="#000080">);
      </font>Writeln<font color="#000080">(</font><font color="#800000">'ZipCode   = '</font><font color="#000080">, </font>ZipCode<font color="#000080">);
      </font>Writeln<font color="#000080">(</font><font color="#800000">'Sex       = '</font><font color="#000080">, </font>Sex<font color="#000080">)
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

              </font><font color="#008000"><i>(* Read 10th Record from File.                          *)
  </i></font>seek<font color="#000080">(</font>fi_UsersDat<font color="#000080">, </font>pred<font color="#000080">(</font><font color="#800000">10</font><font color="#000080">));
  </font>read<font color="#000080">(</font>fi_UsersDat<font color="#000080">, </font>rc_TempUR<font color="#000080">);
  </font>CheckForIOerror<font color="#000080">;

              </font><font color="#008000"><i>(* Display data from the 10th Record.                   *)
  </i></font><font color="#FF0000"><b>With </b></font>rc_TempUR <font color="#FF0000"><b>do
    begin
      </b></font>Writeln<font color="#000080">(</font><font color="#800000">'Name      = '</font><font color="#000080">, </font>Name<font color="#000080">);
      </font>Writeln<font color="#000080">(</font><font color="#800000">'Real Name = '</font><font color="#000080">, </font>RealName<font color="#000080">);
      </font>Writeln<font color="#000080">(</font><font color="#800000">'Street    = '</font><font color="#000080">, </font>Street<font color="#000080">);
      </font>Writeln<font color="#000080">(</font><font color="#800000">'CityState = '</font><font color="#000080">, </font>CityState<font color="#000080">);
      </font>Writeln<font color="#000080">(</font><font color="#800000">'ZipCode   = '</font><font color="#000080">, </font>ZipCode<font color="#000080">);
      </font>Writeln<font color="#000080">(</font><font color="#800000">'Sex       = '</font><font color="#000080">, </font>Sex<font color="#000080">)
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

              </font><font color="#008000"><i>(* Close USERS.DAT File.                                *)
  </i></font>close<font color="#000080">(</font>fi_UsersDat<font color="#000080">);
  </font>CheckForIOerror<font color="#000080">;

</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to FILES SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0038.PAS">Original</a><b>]</b></p></body>
</html>
