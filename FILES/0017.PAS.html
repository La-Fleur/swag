<html>
<head><title> "View File Object" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to FILES SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0017.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{ File Viewer Object  }

</i></font><font color="#FF0000"><b>uses </b></font>Dos<font color="#000080">, </font>Crt<font color="#000080">;

</font><font color="#FF0000"><b>const
   </b></font>PrintSet<font color="#000080">: </font><font color="#FF0000"><b>set of </b></font><font color="#800000">$20</font><font color="#000080">..</font><font color="#800000">$7E </font><font color="#000080">= [ </font><font color="#800000">$20</font><font color="#000080">..</font><font color="#800000">$7E </font><font color="#000080">];
   </font>ExtenSet<font color="#000080">: </font><font color="#FF0000"><b>set of </b></font><font color="#800000">$80</font><font color="#000080">..</font><font color="#800000">$FE </font><font color="#000080">= [ </font><font color="#800000">$80</font><font color="#000080">..</font><font color="#800000">$FE </font><font color="#000080">];
   </font>NoPrnSet<font color="#000080">: </font><font color="#FF0000"><b>set of </b></font><font color="#800000">$09</font><font color="#000080">..</font><font color="#800000">$0D </font><font color="#000080">= [ </font><font color="#800000">$09</font><font color="#000080">, </font><font color="#800000">$0A</font><font color="#000080">, </font><font color="#800000">$0D </font><font color="#000080">];

</font><font color="#FF0000"><b>type
   </b></font>CharType <font color="#000080">= ( </font>Unknown<font color="#000080">, </font>Ascii<font color="#000080">, </font>Hex <font color="#000080">);
   </font>DataBlock <font color="#000080">= </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">256</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
   </font>Viewer <font color="#000080">= </font><font color="#FF0000"><b>object
               </b></font>XOrg<font color="#000080">, </font>YOrg<font color="#000080">,
               </font>LineLen<font color="#000080">, </font>LineCnt<font color="#000080">, </font>BlockCount <font color="#000080">: </font>integer<font color="#000080">;
               </font>FileName <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
               </font>FileType <font color="#000080">: </font>CharType<font color="#000080">;
               </font><font color="#FF0000"><b>procedure </b></font>FileOpen<font color="#000080">( </font>Fn <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
                                   </font>X1<font color="#000080">, </font>Y1<font color="#000080">, </font>X2<font color="#000080">, </font>Y2 <font color="#000080">: </font>integer <font color="#000080">);
               </font><font color="#FF0000"><b>function  </b></font>TestBlock<font color="#000080">( </font>FileBlock <font color="#000080">: </font>DataBlock<font color="#000080">;
                                    </font>Count <font color="#000080">: </font>integer <font color="#000080">): </font>CharType<font color="#000080">;
               </font><font color="#FF0000"><b>procedure </b></font>ListHex<font color="#000080">( </font>FileBlock <font color="#000080">: </font>DataBlock<font color="#000080">;
                                  </font>Count<font color="#000080">, </font>Ofs <font color="#000080">: </font>integer <font color="#000080">);
               </font><font color="#FF0000"><b>procedure </b></font>ListAscii<font color="#000080">( </font>FileBlock <font color="#000080">: </font>DataBlock<font color="#000080">;
                                    </font>Count <font color="#000080">: </font>integer <font color="#000080">);
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

   </font>Finder <font color="#000080">= </font><font color="#FF0000"><b>object</b></font><font color="#000080">( </font>Viewer <font color="#000080">)
               </font><font color="#FF0000"><b>procedure </b></font>Search<font color="#000080">( </font>Fn<font color="#000080">, </font>SearchStr <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
                                 </font>X1<font color="#000080">, </font>Y1<font color="#000080">, </font>X2<font color="#000080">, </font>Y2 <font color="#000080">: </font>integer <font color="#000080">);
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>Finder<font color="#000080">.</font>Search<font color="#000080">;
   </font><font color="#FF0000"><b>var
      </b></font>VF <font color="#000080">: </font><font color="#FF0000"><b>file</b></font><font color="#000080">;   </font>Result1<font color="#000080">, </font>Result2 <font color="#000080">: </font>word<font color="#000080">;
      </font>BlkOfs<font color="#000080">, </font>i<font color="#000080">, </font>j<font color="#000080">, </font>SearchLen <font color="#000080">: </font>integer<font color="#000080">;
      </font>SearchArray <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">128</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
      </font>EndFlag<font color="#000080">, </font>BlkDone<font color="#000080">, </font>SearchResult <font color="#000080">: </font>boolean<font color="#000080">;
      </font>FileBlock1<font color="#000080">, </font>FileBlock2<font color="#000080">, </font>ResultArray <font color="#000080">: </font>DataBlock<font color="#000080">;
   </font><font color="#FF0000"><b>begin
      </b></font>BlockCount <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font>XOrg <font color="#000080">:= </font>X1<font color="#000080">;
      </font>YOrg <font color="#000080">:= </font>Y1<font color="#000080">;
      </font>LineLen <font color="#000080">:= </font>X2<font color="#000080">;
      </font>LineCnt <font color="#000080">:= </font>Y2<font color="#000080">;
      </font>FileType <font color="#000080">:= </font>Unknown<font color="#000080">;
      </font>SearchLen <font color="#000080">:= </font>ord<font color="#000080">( </font>SearchStr<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">] );
      </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>Searchlen <font color="#FF0000"><b>do
         </b></font>SearchArray<font color="#000080">[</font>i<font color="#000080">] := </font>ord<font color="#000080">( </font>SearchStr<font color="#000080">[</font>i<font color="#000080">] );
      </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>sizeof<font color="#000080">( </font>ResultArray <font color="#000080">) </font><font color="#FF0000"><b>do
         </b></font>ResultArray<font color="#000080">[</font>i<font color="#000080">] := </font><font color="#800000">$00</font><font color="#000080">;

      </font>assign<font color="#000080">( </font>VF<font color="#000080">, </font>Fn <font color="#000080">);
      </font><font color="#008000"><i>{$I-} </i></font>reset<font color="#000080">( </font>VF<font color="#000080">, </font><font color="#800000">1 </font><font color="#000080">); </font><font color="#008000"><i>{$I+}
      </i></font><font color="#FF0000"><b>if </b></font>IOresult <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then
      begin
         </b></font>EndFlag <font color="#000080">:= </font>false<font color="#000080">;
         </font>BlkDone <font color="#000080">:= </font>false<font color="#000080">;
         </font>SearchResult <font color="#000080">:= </font>false<font color="#000080">;
         </font>BlockRead<font color="#000080">( </font>VF<font color="#000080">, </font>FileBlock2<font color="#000080">, </font>sizeof<font color="#000080">( </font>FileBlock2 <font color="#000080">), </font>Result2 <font color="#000080">);
         </font>EndFlag <font color="#000080">:= </font>Result2 <font color="#000080">&lt;&gt; </font>sizeof<font color="#000080">( </font>FileBlock2 <font color="#000080">);
         </font><font color="#FF0000"><b>repeat
            </b></font>FileBlock1 <font color="#000080">:= </font>FileBlock2<font color="#000080">;
            </font>Result1 <font color="#000080">:= </font>Result2<font color="#000080">;
            </font>FileBlock2 <font color="#000080">:= </font>ResultArray<font color="#000080">;
            </font><font color="#FF0000"><b>if not </b></font>EndFlag <font color="#FF0000"><b>then
            begin
               </b></font>BlockRead<font color="#000080">( </font>VF<font color="#000080">, </font>FileBlock2<font color="#000080">, </font>sizeof<font color="#000080">( </font>FileBlock2 <font color="#000080">), </font>Result2 <font color="#000080">);
               </font>inc<font color="#000080">( </font>BlockCount <font color="#000080">);
               </font>EndFlag <font color="#000080">:= </font>Result2 <font color="#000080">&lt;&gt; </font>sizeof<font color="#000080">( </font>FileBlock2 <font color="#000080">);
            </font><font color="#FF0000"><b>end else </b></font>BlkDone <font color="#000080">:= </font>True<font color="#000080">;
            </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>Result1 <font color="#FF0000"><b>do
            begin
               if </b></font>SearchArray<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] = </font>FileBlock1<font color="#000080">[</font>i<font color="#000080">] </font><font color="#FF0000"><b>then
               begin
                  </b></font>BlkOfs <font color="#000080">:= </font>i<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">;
                  </font>SearchResult <font color="#000080">:= </font>true<font color="#000080">;
                  </font><font color="#FF0000"><b>for </b></font>j <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>SearchLen <font color="#FF0000"><b>do
                  begin
                     if </b></font>i<font color="#000080">+</font>j<font color="#000080">-</font><font color="#800000">1 </font><font color="#000080">&lt;= </font>Result1 <font color="#FF0000"><b>then
                     begin
                        if </b></font>SearchArray<font color="#000080">[</font>j<font color="#000080">] = </font>FileBlock1<font color="#000080">[</font>i<font color="#000080">+</font>j<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">] </font><font color="#FF0000"><b>then
                           </b></font>ResultArray<font color="#000080">[</font>j<font color="#000080">] := </font>FileBlock1<font color="#000080">[</font>i<font color="#000080">+</font>j<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">] </font><font color="#FF0000"><b>else
                           begin
                              </b></font>SearchResult <font color="#000080">:= </font>false<font color="#000080">;
                              </font>j <font color="#000080">:= </font>SearchLen<font color="#000080">;
                           </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
                     </font><font color="#FF0000"><b>end else
                        if </b></font>SearchArray<font color="#000080">[</font>j<font color="#000080">] = </font>FileBlock2<font color="#000080">[</font>i<font color="#000080">+</font>j<font color="#000080">-</font><font color="#800000">257</font><font color="#000080">] </font><font color="#FF0000"><b>then
                           </b></font>ResultArray<font color="#000080">[</font>j<font color="#000080">] := </font>FileBlock2<font color="#000080">[</font>i<font color="#000080">+</font>j<font color="#000080">-</font><font color="#800000">257</font><font color="#000080">] </font><font color="#FF0000"><b>else
                           begin
                              </b></font>SearchResult <font color="#000080">:= </font>false<font color="#000080">;
                              </font>j <font color="#000080">:= </font>SearchLen<font color="#000080">;
                           </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
                  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
                  </font><font color="#FF0000"><b>if </b></font>SearchResult <font color="#FF0000"><b>then
                  begin
                     for </b></font>j <font color="#000080">:= </font>SearchLen<font color="#000080">+</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>sizeof<font color="#000080">( </font>ResultArray <font color="#000080">) </font><font color="#FF0000"><b>do
                        if </b></font>i<font color="#000080">+</font>j<font color="#000080">-</font><font color="#800000">1 </font><font color="#000080">&lt;= </font>Result1
                           <font color="#FF0000"><b>then </b></font>ResultArray<font color="#000080">[</font>j<font color="#000080">] := </font>FileBlock1<font color="#000080">[</font>i<font color="#000080">+</font>j<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">]
                           </font><font color="#FF0000"><b>else </b></font>ResultArray<font color="#000080">[</font>j<font color="#000080">] := </font>FileBlock2<font color="#000080">[</font>i<font color="#000080">+</font>j<font color="#000080">-</font><font color="#800000">257</font><font color="#000080">];
                     </font>i <font color="#000080">:= </font>Result1<font color="#000080">;
                  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
               </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
         </font><font color="#FF0000"><b>until </b></font>BlkDone <font color="#FF0000"><b>or </b></font>SearchResult<font color="#000080">;
         </font><font color="#FF0000"><b>if </b></font>SearchResult <font color="#FF0000"><b>then
         begin
            </b></font>writeln<font color="#000080">( </font><font color="#800000">'Search string found in file block '</font><font color="#000080">, </font>BlockCount<font color="#000080">,
               </font><font color="#800000">' beginning at byte offset '</font><font color="#000080">, </font>BlkOfs<font color="#000080">, </font><font color="#800000">' ...' </font><font color="#000080">);
            </font>writeln<font color="#000080">;
            </font><font color="#FF0000"><b>if </b></font>FileType <font color="#000080">= </font>Unknown <font color="#FF0000"><b>then
               </b></font>FileType <font color="#000080">:= </font>TestBlock<font color="#000080">( </font>ResultArray<font color="#000080">,
                                      </font>sizeof<font color="#000080">( </font>ResultArray <font color="#000080">) );
            </font><font color="#FF0000"><b>case </b></font>FileType <font color="#FF0000"><b>of
                 </b></font>Hex <font color="#000080">: </font>ListHex<font color="#000080">( </font>ResultArray<font color="#000080">, </font>sizeof<font color="#000080">( </font>ResultArray <font color="#000080">), </font>BlkOfs <font color="#000080">);
               </font>Ascii <font color="#000080">: </font>ListAscii<font color="#000080">( </font>ResultArray<font color="#000080">, </font>sizeof<font color="#000080">( </font>ResultArray <font color="#000080">) );
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
         </font><font color="#FF0000"><b>end else </b></font>writeln<font color="#000080">( </font><font color="#800000">'&quot;'</font><font color="#000080">, </font>SearchStr<font color="#000080">, </font><font color="#800000">'&quot; not found in '</font><font color="#000080">, </font>FN <font color="#000080">);
         </font>close<font color="#000080">( </font>VF <font color="#000080">);
         </font>window<font color="#000080">( </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">80</font><font color="#000080">, </font><font color="#800000">25 </font><font color="#000080">);
      </font><font color="#FF0000"><b>end else </b></font>writeln<font color="#000080">( </font>Fn<font color="#000080">, </font><font color="#800000">' invalid file name!' </font><font color="#000080">);
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>Viewer<font color="#000080">.</font>FileOpen<font color="#000080">;
   </font><font color="#FF0000"><b>var
      </b></font>VF <font color="#000080">: </font><font color="#FF0000"><b>file</b></font><font color="#000080">;      </font>Ch <font color="#000080">: </font>char<font color="#000080">;
      </font>Result<font color="#000080">, </font>CrtX<font color="#000080">, </font>CrtY <font color="#000080">: </font>word<font color="#000080">;
      </font>EndFlag <font color="#000080">: </font>boolean<font color="#000080">;
      </font>FileBlock <font color="#000080">: </font>DataBlock<font color="#000080">;
   </font><font color="#FF0000"><b>begin
      </b></font>BlockCount <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font>XOrg <font color="#000080">:= </font>X1<font color="#000080">;
      </font>YOrg <font color="#000080">:= </font>Y1<font color="#000080">;
      </font>LineLen <font color="#000080">:= </font>X2<font color="#000080">;
      </font>LineCnt <font color="#000080">:= </font>Y2<font color="#000080">;
      </font>FileType <font color="#000080">:= </font>Unknown<font color="#000080">;
      </font>assign<font color="#000080">( </font>VF<font color="#000080">, </font>Fn <font color="#000080">);
      </font><font color="#008000"><i>{$I-} </i></font>reset<font color="#000080">( </font>VF<font color="#000080">, </font><font color="#800000">1 </font><font color="#000080">); </font><font color="#008000"><i>{$I+}
      </i></font><font color="#FF0000"><b>if </b></font>IOresult <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then
      begin
         </b></font>window<font color="#000080">( </font>X1<font color="#000080">, </font>Y1<font color="#000080">, </font>X1<font color="#000080">+</font>X2<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">, </font>Y1<font color="#000080">+</font>Y2<font color="#000080">-</font><font color="#800000">1 </font><font color="#000080">);
         </font>writeln<font color="#000080">;
         </font>EndFlag <font color="#000080">:= </font>false<font color="#000080">;
         </font><font color="#FF0000"><b>repeat
            </b></font>BlockRead<font color="#000080">( </font>VF<font color="#000080">, </font>FileBlock<font color="#000080">, </font>sizeof<font color="#000080">( </font>FileBlock <font color="#000080">), </font>Result <font color="#000080">);
            </font>inc<font color="#000080">( </font>BlockCount <font color="#000080">);
            </font>EndFlag <font color="#000080">:= </font>Result <font color="#000080">&lt;&gt; </font>sizeof<font color="#000080">( </font>FileBlock <font color="#000080">);
            </font><font color="#FF0000"><b>if </b></font>FileType <font color="#000080">= </font>Unknown <font color="#FF0000"><b>then
               </b></font>FileType <font color="#000080">:= </font>TestBlock<font color="#000080">( </font>FileBlock<font color="#000080">, </font>Result <font color="#000080">);
            </font><font color="#FF0000"><b>case </b></font>FileType <font color="#FF0000"><b>of
                 </b></font>Hex <font color="#000080">: </font>ListHex<font color="#000080">( </font>FileBlock<font color="#000080">, </font>Result<font color="#000080">, </font><font color="#800000">0 </font><font color="#000080">);
               </font>Ascii <font color="#000080">: </font>ListAscii<font color="#000080">( </font>FileBlock<font color="#000080">, </font>Result <font color="#000080">);
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
            </font><font color="#FF0000"><b>if not </b></font>EndFlag <font color="#FF0000"><b>then
            begin
               </b></font>CrtX <font color="#000080">:= </font>WhereX<font color="#000080">;    </font>CrtY <font color="#000080">:= </font>WhereY<font color="#000080">;
               </font><font color="#FF0000"><b>if </b></font>WhereY <font color="#000080">= </font>LineCnt <font color="#FF0000"><b>then
               begin   </b></font>writeln<font color="#000080">;
                       </font>dec<font color="#000080">( </font>CrtY <font color="#000080">);  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
               </font>gotoxy<font color="#000080">( </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1 </font><font color="#000080">);    </font>clreol<font color="#000080">;
               </font>write<font color="#000080">(</font><font color="#800000">' Viewing: '</font><font color="#000080">, </font>FN <font color="#000080">);
               </font>gotoxy<font color="#000080">( </font><font color="#800000">1</font><font color="#000080">, </font>LineCnt <font color="#000080">);   </font>clreol<font color="#000080">;
               </font>write<font color="#000080">(</font><font color="#800000">' Press (+) to continue, (Enter) to exit: '</font><font color="#000080">);
               </font>Ch <font color="#000080">:= </font>ReadKey<font color="#000080">;     </font>EndFlag <font color="#000080">:= </font>Ch <font color="#000080">&lt;&gt; </font><font color="#800000">'+'</font><font color="#000080">;
               </font>gotoxy<font color="#000080">( </font><font color="#800000">1</font><font color="#000080">, </font>LineCnt <font color="#000080">);   </font>clreol<font color="#000080">;
               </font>gotoxy<font color="#000080">( </font>CrtX<font color="#000080">, </font>CrtY <font color="#000080">);
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
         </font><font color="#FF0000"><b>until </b></font>EndFlag<font color="#000080">;
         </font>close<font color="#000080">( </font>VF <font color="#000080">);
         </font>sound<font color="#000080">( </font><font color="#800000">440 </font><font color="#000080">); </font>delay<font color="#000080">( </font><font color="#800000">100 </font><font color="#000080">);
         </font>sound<font color="#000080">( </font><font color="#800000">220 </font><font color="#000080">); </font>delay<font color="#000080">( </font><font color="#800000">100 </font><font color="#000080">); </font>nosound<font color="#000080">;
         </font>window<font color="#000080">( </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">80</font><font color="#000080">, </font><font color="#800000">25 </font><font color="#000080">);
      </font><font color="#FF0000"><b>end else </b></font>writeln<font color="#000080">( </font>Fn<font color="#000080">, </font><font color="#800000">' invalid file name!' </font><font color="#000080">);
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>Viewer<font color="#000080">.</font>TestBlock<font color="#000080">;
   </font><font color="#FF0000"><b>var
      </b></font>i <font color="#000080">: </font>integer<font color="#000080">;
   </font><font color="#FF0000"><b>begin
      </b></font>FileType <font color="#000080">:= </font>Ascii<font color="#000080">;
      </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>Count <font color="#FF0000"><b>do
         if not </b></font>FileBlock<font color="#000080">[</font>i<font color="#000080">] </font><font color="#FF0000"><b>in </b></font>NoPrnSet<font color="#000080">+</font>PrintSet <font color="#FF0000"><b>then
            </b></font>FileType <font color="#000080">:= </font>Hex<font color="#000080">;
      </font>TestBlock <font color="#000080">:= </font>FileType<font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>Viewer<font color="#000080">.</font>ListHex<font color="#000080">;
   </font><font color="#FF0000"><b>const
      </b></font>HexStr<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">16</font><font color="#000080">] = </font><font color="#800000">'0123456789ABCDEF'</font><font color="#000080">;
   </font><font color="#FF0000"><b>var
      </b></font>i<font color="#000080">, </font>j<font color="#000080">, </font>k <font color="#000080">: </font>integer<font color="#000080">;
   </font><font color="#FF0000"><b>begin
      </b></font>k <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
      </font><font color="#FF0000"><b>repeat
         </b></font>write<font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">);
         </font>j <font color="#000080">:= (</font>BlockCount<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">) * </font>sizeof<font color="#000080">( </font>FileBlock <font color="#000080">) + ( </font>k <font color="#000080">- </font><font color="#800000">1 </font><font color="#000080">) + </font>Ofs<font color="#000080">;
         </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">3 </font><font color="#FF0000"><b>downto </b></font><font color="#800000">0 </font><font color="#FF0000"><b>do
            </b></font>write<font color="#000080">( </font>HexStr<font color="#000080">[ </font>j <font color="#FF0000"><b>shr </b></font><font color="#000080">(</font>i<font color="#000080">*</font><font color="#800000">4</font><font color="#000080">) </font><font color="#FF0000"><b>AND </b></font><font color="#800000">$0F </font><font color="#000080">+ </font><font color="#800000">1 </font><font color="#000080">] );
         </font>write<font color="#000080">(</font><font color="#800000">': '</font><font color="#000080">);
         </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">16 </font><font color="#FF0000"><b>do
         begin
            if </b></font>k <font color="#000080">&lt;= </font>Count <font color="#FF0000"><b>then
               </b></font>write<font color="#000080">( </font>HexStr<font color="#000080">[ </font>FileBlock<font color="#000080">[</font>k<font color="#000080">] </font><font color="#FF0000"><b>shr </b></font><font color="#800000">4 </font><font color="#000080">+ </font><font color="#800000">1 </font><font color="#000080">],
                      </font>HexStr<font color="#000080">[ </font>FileBlock<font color="#000080">[</font>k<font color="#000080">] </font><font color="#FF0000"><b>AND </b></font><font color="#800000">$0F </font><font color="#000080">+ </font><font color="#800000">1 </font><font color="#000080">], </font><font color="#800000">' ' </font><font color="#000080">)
               </font><font color="#FF0000"><b>else </b></font>write<font color="#000080">( </font><font color="#800000">'  ' </font><font color="#000080">);
            </font>inc<font color="#000080">( </font>k <font color="#000080">);
            </font><font color="#FF0000"><b>if</b></font><font color="#000080">( </font>i <font color="#FF0000"><b>div </b></font><font color="#800000">4 </font><font color="#000080">= </font>i <font color="#000080">/ </font><font color="#800000">4 </font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font>write<font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">);
         </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
         </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font>k<font color="#000080">-</font><font color="#800000">16 </font><font color="#FF0000"><b>to </b></font>k<font color="#000080">-</font><font color="#800000">1 </font><font color="#FF0000"><b>do
         if </b></font>i <font color="#000080">&lt;= </font>Count <font color="#FF0000"><b>then
            if </b></font>FileBlock<font color="#000080">[</font>i<font color="#000080">] </font><font color="#FF0000"><b>in </b></font>PrintSet<font color="#000080">+</font>ExtenSet
               <font color="#FF0000"><b>then </b></font>write<font color="#000080">( </font>chr<font color="#000080">( </font>FileBlock<font color="#000080">[</font>i<font color="#000080">] ) )
               </font><font color="#FF0000"><b>else </b></font>write<font color="#000080">(</font><font color="#800000">'.'</font><font color="#000080">);
         </font>writeln<font color="#000080">;
      </font><font color="#FF0000"><b>until </b></font>k <font color="#000080">&gt;= </font>Count<font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>Viewer<font color="#000080">.</font>ListAscii<font color="#000080">;
   </font><font color="#FF0000"><b>var
      </b></font>i <font color="#000080">: </font>integer<font color="#000080">;
   </font><font color="#FF0000"><b>begin
      for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>Count <font color="#FF0000"><b>do
      begin
         </b></font>write<font color="#000080">( </font>chr<font color="#000080">( </font>FileBlock<font color="#000080">[</font>i<font color="#000080">] ) );
         </font><font color="#FF0000"><b>if </b></font>WhereX <font color="#000080">&gt; </font>LineLen <font color="#FF0000"><b>then </b></font>writeln<font color="#000080">;
         </font><font color="#FF0000"><b>if </b></font>WhereY <font color="#000080">&gt;= </font>LineCnt <font color="#FF0000"><b>then
         begin
            </b></font>writeln<font color="#000080">;
            </font>gotoxy<font color="#000080">( </font><font color="#800000">1</font><font color="#000080">, </font>LineCnt<font color="#000080">-</font><font color="#800000">1 </font><font color="#000080">);
         </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{=============== end Viewer object ==============}

</i></font><font color="#FF0000"><b>var
   </b></font>FileFind <font color="#000080">: </font>Finder<font color="#000080">;
</font><font color="#FF0000"><b>begin
   </b></font>clrscr<font color="#000080">;
   </font>FileFind<font color="#000080">.</font>Search<font color="#000080">( </font>ParamStr<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">),    </font><font color="#008000"><i>{ file to search }
                    </i></font><font color="#800000">'Press any key'</font><font color="#000080">,           </font><font color="#008000"><i>{ search string  }
                    </i></font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">80</font><font color="#000080">, </font><font color="#800000">25 </font><font color="#000080">);            </font><font color="#008000"><i>{ display window }
   </i></font>gotoxy<font color="#000080">( </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">25 </font><font color="#000080">);   </font>clreol<font color="#000080">;
   </font>write<font color="#000080">( </font><font color="#800000">'Press any key to continue: '</font><font color="#000080">);
   </font><font color="#FF0000"><b>while not </b></font>KeyPressed <font color="#FF0000"><b>do</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to FILES SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0017.PAS">Original</a><b>]</b></p></body>
</html>
