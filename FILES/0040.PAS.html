<html>
<head><title> "Deleting Chars from Files" by TOM CARROLL</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to FILES SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0040.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt; A friend of mine has a small problem with Binkley connecting, and whenever
&gt; this happens, Binkley writes a bunch of Line noise characters in his log f
&gt; Some of these characters are EOF and EOL markers. I am trying to write a s
&gt; program that will read it, and write the contents to a new file, without a
&gt; the garbage in it. Of course, when I get to the first EOF, my program thin
&gt; it's done.
}

</i></font><font color="#FF0000"><b>Program </b></font>KillChar<font color="#000080">;

</font><font color="#008000"><i>{ Written by Tom Carroll and released to the public domain
  on 12/11/93.

 This program will read any file and delete any characters passed on
  the command line.

  For example:  KillChar InFile OutFile ASCII Value (of character)

         i.e.:  KILLCHAR MYFILE.TXT NEWFILE.TXT 12

  This will remove all form feeds from a text file.

  No error control is included.

}

</i></font><font color="#FF0000"><b>VAR
   </b></font>Buffer    <font color="#000080">: </font><font color="#FF0000"><b>ARRAY</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">] </font><font color="#FF0000"><b>OF </b></font>Char<font color="#000080">;
   </font>TmpString<font color="#000080">,
   </font>StringVar <font color="#000080">: </font><font color="#FF0000"><b>STRING</b></font><font color="#000080">;
   </font>FileLoc<font color="#000080">,
   </font>NumBytes  <font color="#000080">: </font>LongInt<font color="#000080">;
   </font>InFile<font color="#000080">,
   </font>OutFile   <font color="#000080">: </font><font color="#FF0000"><b>FILE</b></font><font color="#000080">;
   </font>NumRead   <font color="#000080">: </font>Integer<font color="#000080">;
   </font>StringPos <font color="#000080">: </font>Integer<font color="#000080">;

</font><font color="#FF0000"><b>BEGIN
   </b></font>Val<font color="#000080">(</font>ParamStr<font color="#000080">(</font><font color="#800000">3</font><font color="#000080">), </font>NumRead<font color="#000080">, </font>StringPos<font color="#000080">);
   </font>TmpString <font color="#000080">:= </font>Chr<font color="#000080">(</font>NumRead<font color="#000080">); </font><font color="#008000"><i>{#26;}
   </i></font>Assign<font color="#000080">(</font>InFile<font color="#000080">, </font>ParamStr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">));
   </font>Reset<font color="#000080">(</font>InFile<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
   </font>Assign<font color="#000080">(</font>OutFile<font color="#000080">, </font>ParamStr<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">));
   </font>Rewrite<font color="#000080">(</font>OutFile<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
   </font>NumBytes <font color="#000080">:= </font>FileSize<font color="#000080">(</font>InFIle<font color="#000080">);
   </font><font color="#FF0000"><b>WHILE </b></font>FilePos<font color="#000080">(</font>InFile<font color="#000080">) &lt; </font>NumBytes <font color="#FF0000"><b>DO
      BEGIN
         </b></font>FileLoc <font color="#000080">:= </font>FilePos<font color="#000080">(</font>InFile<font color="#000080">);
         </font><font color="#FF0000"><b>IF </b></font>FileLoc <font color="#000080">&lt; (</font>NumBytes <font color="#000080">- </font><font color="#800000">255</font><font color="#000080">) </font><font color="#FF0000"><b>THEN
            </b></font>BlockRead<font color="#000080">(</font>InFile<font color="#000080">, </font>Buffer<font color="#000080">, </font><font color="#800000">255</font><font color="#000080">, </font>NumRead<font color="#000080">)
         </font><font color="#FF0000"><b>ELSE
            </b></font>BlockRead<font color="#000080">(</font>InFile<font color="#000080">, </font>Buffer<font color="#000080">, </font>FileSize<font color="#000080">(</font>InFile<font color="#000080">) - </font>FileLoc<font color="#000080">,
                      </font>NumRead<font color="#000080">);
         </font>Move<font color="#000080">(</font>Buffer<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">], </font>StringVar<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">], </font>NumRead<font color="#000080">);
         </font>StringVar<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">] := </font>Chr<font color="#000080">(</font>NumRead<font color="#000080">);
         </font>StringPos <font color="#000080">:= </font>Pos<font color="#000080">(</font>TmpString<font color="#000080">, </font>StringVar<font color="#000080">);
         </font><font color="#FF0000"><b>WHILE </b></font>StringPos <font color="#000080">&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>DO
            BEGIN
               </b></font>StringPos <font color="#000080">:= </font>Pos<font color="#000080">(</font>TmpString<font color="#000080">, </font>StringVar<font color="#000080">);
               </font>Delete<font color="#000080">(</font>StringVar<font color="#000080">, </font>StringPos<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
            </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
         </font>StringPos <font color="#000080">:= </font>Length<font color="#000080">(</font>StringVar<font color="#000080">);
         </font>Move<font color="#000080">(</font>StringVar<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">], </font>Buffer<font color="#000080">, </font>Length<font color="#000080">(</font>StringVar<font color="#000080">));
         </font>BlockWrite<font color="#000080">(</font>OutFile<font color="#000080">, </font>Buffer<font color="#000080">, </font>Length<font color="#000080">(</font>StringVar<font color="#000080">));
      </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
   </font>Close<font color="#000080">(</font>InFile<font color="#000080">);
   </font>Close<font color="#000080">(</font>OutFIle<font color="#000080">);
</font><font color="#FF0000"><b>END</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to FILES SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0040.PAS">Original</a><b>]</b></p></body>
</html>
