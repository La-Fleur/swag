<html>
<head><title> "Increasing a files size" by IAN LIN</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to FILES SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0037.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
IAN LIN

Add junk to file to increase size. v.2.2. }

{$I-,G+,R-,D-,L-}

</i></font><font color="#FF0000"><b>Uses
  </b></font>dos<font color="#000080">;

</font><font color="#FF0000"><b>Type
  </b></font>buf <font color="#000080">= </font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">$ffff</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;

</font><font color="#FF0000"><b>Var
  </b></font>c<font color="#000080">, </font>k<font color="#000080">,
  </font>size <font color="#000080">: </font>longint<font color="#000080">;
  </font>s<font color="#000080">, </font>v <font color="#000080">: </font>word<font color="#000080">;
  </font>f    <font color="#000080">: </font><font color="#FF0000"><b>file</b></font><font color="#000080">;
  </font>b    <font color="#000080">: ^</font>buf<font color="#000080">;

</font><font color="#FF0000"><b>Begin
  </b></font>writeln<font color="#000080">(</font><font color="#800000">'JUNK v2.2'</font><font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>paramcount <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then
  begin
   </b></font>writeln<font color="#000080">(</font><font color="#800000">'Help screen. Syntax:'</font><font color="#000080">);
   </font>writeln<font color="#000080">(</font>paramstr<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">),</font><font color="#800000">' &lt;infile&gt; &lt;bytes&gt;'</font><font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">'&lt;infile&gt;: source file -- &lt;bytes&gt;: bytes to add to source file'</font><font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">'Error level codes'</font><font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">'0: Normal execution or show help screen (no parameters)'</font><font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">'1: Not enough parameters. Must have specify a file and size.'</font><font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">'2: Invalid size specified for &lt;bytes&gt;'</font><font color="#000080">);
   </font>halt<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
  </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>if </b></font>paramcount <font color="#000080">= </font><font color="#800000">1 </font><font color="#FF0000"><b>then
  begin
    </b></font>writeln<font color="#000080">(</font><font color="#800000">'Not enough parameters.'</font><font color="#000080">);
    </font>halt<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
  </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

  </font>assign<font color="#000080">(</font>f<font color="#000080">, </font>paramstr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">));
  </font>val<font color="#000080">(</font>paramstr<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">), </font>size<font color="#000080">, </font>v<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>v <font color="#000080">&lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>size <font color="#000080">&lt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
  begin
    </b></font>writeln<font color="#000080">(</font><font color="#800000">'Invalid number in &lt;bytes&gt;. Run '</font><font color="#000080">, </font>paramstr<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">), </font><font color="#800000">' alone for help.'</font><font color="#000080">);
    </font>halt<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>reset<font color="#000080">(</font>f<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>ioresult <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then
    </b></font>seek<font color="#000080">(</font>f<font color="#000080">, </font>filesize<font color="#000080">(</font>f<font color="#000080">))
  </font><font color="#FF0000"><b>else
    </b></font>rewrite<font color="#000080">(</font>f<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
  </font>k <font color="#000080">:= </font>size <font color="#FF0000"><b>div </b></font>sizeof<font color="#000080">(</font>buf<font color="#000080">);
  </font>s <font color="#000080">:= </font>size <font color="#FF0000"><b>mod </b></font>sizeof<font color="#000080">(</font>buf<font color="#000080">);
  </font>randomize<font color="#000080">;
  </font>new<font color="#000080">(</font>b<font color="#000080">);
  </font><font color="#FF0000"><b>for </b></font>c <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>sizeof<font color="#000080">(</font>buf<font color="#000080">) </font><font color="#FF0000"><b>do
    </b></font>b<font color="#000080">^[</font>c<font color="#000080">] := </font>random<font color="#000080">(</font><font color="#800000">128</font><font color="#000080">) + </font><font color="#800000">128</font><font color="#000080">;

  </font><font color="#FF0000"><b>while </b></font>k <font color="#000080">&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>do
  begin
    </b></font>blockwrite<font color="#000080">(</font>f<font color="#000080">, </font>b<font color="#000080">^, </font>sizeof<font color="#000080">(</font>buf<font color="#000080">));
    </font>dec<font color="#000080">(</font>k<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>if </b></font>s <font color="#000080">&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
    </b></font>blockwrite<font color="#000080">(</font>f<font color="#000080">, </font>b<font color="#000080">^, </font>s<font color="#000080">);
  </font>writeln<font color="#000080">(</font><font color="#800000">'Wrote '</font><font color="#000080">, </font>size<font color="#000080">, </font><font color="#800000">' bytes to '</font><font color="#000080">, </font>fexpand<font color="#000080">(</font>paramstr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">)));
  </font>writeln<font color="#000080">(</font><font color="#800000">'Total size of '</font><font color="#000080">, </font>fexpand<font color="#000080">(</font>paramstr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">)), </font><font color="#800000">' is '</font><font color="#000080">, </font>filesize<font color="#000080">(</font>f<font color="#000080">));
  </font>close<font color="#000080">(</font>f<font color="#000080">);
  </font>dispose<font color="#000080">(</font>b<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to FILES SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0037.PAS">Original</a><b>]</b></p></body>
</html>
