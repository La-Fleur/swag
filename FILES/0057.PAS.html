<html>
<head><title> ">64K Blockread/Blockwrite" by JOSE CAMPIONE</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to FILES SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0057.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>(*************************************************************************

           =====================================================
           Breaking the 64K barrier for BlockRead and BlockWrite
           =====================================================
                 Copyright (c) 1992,1994 by Jos‚ Campione
                   Ottawa-Orleans Personal Systems Group
                          Fidonet: 1:163/513.3

 Turbo Pascal implements two procedures for fast transfer of data from 
 files to memory blocks and viceversa: Blockread and Blockwrite. One of 
 the commonly encountered limitation in these procedures is the fact that 
 they can only handle blocks not exceeding 65535 bytes.

 This limitation bears a connection with the often asked question on how 
 to brake the 64K barrier for arrays declared in Pascal. Several answers 
 have been proposed to this effect. Perhaps one of the most elegant is 
 the one proposed by Neil Rubenking in his book on Turbo Pascal 6.0 
 Techniques and Utilities (Ziff-Davis Press, 1991). Albeit elegant, 
 Neil's approach uses OOP which may not be fully appreciated by many 
 Pascal users. 

 So, here is a less ambitious approach with several procedures and 
 functions permitting the direct handling of large memory blocks. In the 
 following unit large memory blocks are defined as arrays of blocks each
 not exceeding 64K. The only limitation for the size of the overall large 
 block is that it must not exceed the normal RAM. A longint pointer is 
 then used to access individual positions. 

 This unit uses a modified heapfunc that permits the replacement of &quot;new&quot; 
 with &quot;getmem&quot;. This, together with range checking off, allows an array 
 to be declared as a single byte. During runtime it can be assigned any 
 size determined by the program. This ensures that the &quot;tail&quot; of the big 
 block will never be larger than strictly necessary. 

 Functions BigBlockRead and BigBlockWrite permit the reading and writing 
 of blocks from and to a file much in the same way as Pascal's BlockRead
 and BlockWrite. Only difference is that the 64K limit is not a problem 
 anymore. Note that the size of the blocks can only be defined in terms 
 of bytes and that the file being read or write must have been previously 
 assigned to variable f (an untyped file declared within the unit). Also, 
 these are not procedures but functions returning false if the reading or 
 the writing of the big block was not completed. 

 In the present implementation only one array of big blocks is permitted. 
 Variable BigBlkExist ensures that MakeBig will only work if a previous 
 big block has not been created. BigBlk is the array of blocks reserved 
 in the heap. SizBlk is an array containing the sizes in bytes of each 
 block reserved in the heap as part of the big block. NumVec contains the
 number of blocks used by the big block. 

 And last, some acknowledgements:

 Part of this unit was inspired by code contained in a file posted at 
 garbo.uwasa.fi by Prof. Timo Salmi. The code itself was based on a 
 submission by Naji Moawad. Prof. Salmi's code contained the following 
 message: 

    The code below is based on a UseNet posting in comp.lang.pascal by 
    Naji Mouawad nmouawad@watmath.waterloo.edu. Naji's idea was for a 
    vector, my adaptation is for a two-dimensional matrix. The realization
    of the idea is simpler than the one presented by Kent Porter in 
    Dr.Dobb's Journal, March 1988. 
***************************************************************************)

{$R-} { R has to be off... }
{$M 8096,0,655360}

</i></font><font color="#FF0000"><b>unit </b></font>bigarru<font color="#000080">;

</font><font color="#FF0000"><b>interface

   uses </b></font>crt<font color="#000080">,</font>dos<font color="#000080">;

   </font><font color="#FF0000"><b>const
       </b></font>SizVec <font color="#000080">= </font><font color="#800000">$FFFF</font><font color="#000080">;
       </font>MaxBlk <font color="#000080">= </font><font color="#800000">$FF</font><font color="#000080">;

   </font><font color="#FF0000"><b>type
       </b></font>Vec <font color="#000080">= </font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">0</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;

   </font><font color="#FF0000"><b>var
       </b></font>BigBlk  <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font>MaxBlk<font color="#000080">] </font><font color="#FF0000"><b>of </b></font><font color="#000080">^</font>Vec<font color="#000080">;
       </font>SizBlk  <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font>MaxBlk<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>word<font color="#000080">;
       </font>TotSizBlk <font color="#000080">: </font>longint<font color="#000080">;
       </font>NumVec <font color="#000080">: </font>byte<font color="#000080">;
       </font>HeapTop <font color="#000080">: </font>pointer<font color="#000080">;
       </font>BigBlkExist <font color="#000080">: </font>boolean<font color="#000080">;

   </font><font color="#008000"><i>{$F+} </i></font><font color="#FF0000"><b>function </b></font>HeapFunc<font color="#000080">(</font>Size<font color="#000080">: </font>word<font color="#000080">) : </font>integer<font color="#000080">; </font><font color="#008000"><i>{$F-}
   </i></font><font color="#FF0000"><b>function </b></font>MakeBig<font color="#000080">(</font>HeapNeeded<font color="#000080">: </font>longint<font color="#000080">): </font>boolean<font color="#000080">;
   </font><font color="#FF0000"><b>function </b></font>Peek<font color="#000080">(</font>p<font color="#000080">: </font>longint<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>error<font color="#000080">: </font>boolean<font color="#000080">): </font>byte<font color="#000080">;
   </font><font color="#FF0000"><b>procedure </b></font>Poke<font color="#000080">(</font>b <font color="#000080">: </font>byte<font color="#000080">; </font>p<font color="#000080">: </font>longint<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>error<font color="#000080">: </font>boolean<font color="#000080">);
   </font><font color="#FF0000"><b>procedure </b></font>FillRange<font color="#000080">(</font>fromby<font color="#000080">, </font>toby <font color="#000080">:</font>longint<font color="#000080">; </font>b <font color="#000080">: </font>byte<font color="#000080">);
   </font><font color="#FF0000"><b>procedure </b></font>FillAll<font color="#000080">(</font>b<font color="#000080">: </font>byte<font color="#000080">);
   </font><font color="#FF0000"><b>function </b></font>BigBlockRead <font color="#000080">(</font><font color="#FF0000"><b>var </b></font>f<font color="#000080">: </font><font color="#FF0000"><b>file</b></font><font color="#000080">): </font>boolean<font color="#000080">;
   </font><font color="#FF0000"><b>function </b></font>BigBlockWrite<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>f<font color="#000080">: </font><font color="#FF0000"><b>file</b></font><font color="#000080">): </font>boolean<font color="#000080">;

</font><font color="#FF0000"><b>implementation

   </b></font><font color="#008000"><i>{$F+} </i></font><font color="#FF0000"><b>function </b></font>HeapFunc<font color="#000080">(</font>Size<font color="#000080">: </font>word<font color="#000080">) : </font>integer<font color="#000080">; </font><font color="#008000"><i>{$F-}
   </i></font><font color="#FF0000"><b>begin
     </b></font>HeapFunc<font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

   </font><font color="#008000"><i>{ Create the dynamic variables }
   { HeapNeeded is the needed number of BYTES }
   </i></font><font color="#FF0000"><b>function </b></font>MakeBig<font color="#000080">(</font>HeapNeeded<font color="#000080">: </font>longint<font color="#000080">): </font>boolean<font color="#000080">;
   </font><font color="#FF0000"><b>var
     </b></font>i          <font color="#000080">: </font>integer<font color="#000080">;
     </font>error      <font color="#000080">: </font>boolean<font color="#000080">;
   </font><font color="#FF0000"><b>begin
     </b></font>error<font color="#000080">:= </font>false<font color="#000080">;
     </font><font color="#FF0000"><b>if </b></font>BigBlkExist <font color="#FF0000"><b>then begin
       </b></font>Makebig<font color="#000080">:= </font>false<font color="#000080">;
       </font>exit<font color="#000080">;
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
     </font>fillchar<font color="#000080">(</font>sizblk<font color="#000080">,</font>sizeof<font color="#000080">(</font>sizblk<font color="#000080">),</font><font color="#800000">0</font><font color="#000080">);
     </font>NumVec<font color="#000080">:= (</font>HeapNeeded <font color="#FF0000"><b>div </b></font>SizVec<font color="#000080">);
     </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>HeapNeeded <font color="#000080">&lt; </font>SizVec<font color="#000080">) </font><font color="#FF0000"><b>then begin
       </b></font>SizBlk<font color="#000080">[</font>NumVec<font color="#000080">]:= </font>HeapNeeded<font color="#000080">;
       </font>BigBlk<font color="#000080">[</font>NumVec<font color="#000080">]:= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">;
       </font>GetMem<font color="#000080">(</font>BigBlk<font color="#000080">[</font>NumVec<font color="#000080">], </font>SizBlk<font color="#000080">[</font>NumVec<font color="#000080">]);
       </font><font color="#FF0000"><b>if </b></font>BigBlk<font color="#000080">[</font>NumVec<font color="#000080">] = </font><font color="#FF0000"><b>nil then </b></font>error<font color="#000080">:= </font>true<font color="#000080">;
     </font><font color="#FF0000"><b>end else begin
       </b></font>i<font color="#000080">:= -</font><font color="#800000">1</font><font color="#000080">;
       </font><font color="#FF0000"><b>while not </b></font>error <font color="#FF0000"><b>and </b></font><font color="#000080">(</font>i <font color="#000080">&lt; </font>NumVec <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>do begin
         </b></font>inc<font color="#000080">(</font>i<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
         </font>SizBlk<font color="#000080">[</font>i<font color="#000080">]:= </font>SizVec<font color="#000080">;
         </font>BigBlk<font color="#000080">[</font>i<font color="#000080">]:= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">;
         </font>GetMem<font color="#000080">(</font>BigBlk<font color="#000080">[</font>i<font color="#000080">],</font>SizBlk<font color="#000080">[</font>i<font color="#000080">]);
         </font><font color="#FF0000"><b>if </b></font>BigBlk<font color="#000080">[</font>i<font color="#000080">] = </font><font color="#FF0000"><b>nil then </b></font>error<font color="#000080">:= </font>true<font color="#000080">;
       </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
       </font><font color="#FF0000"><b>if not </b></font>error <font color="#FF0000"><b>then begin
         </b></font>SizBlk<font color="#000080">[</font>NumVec<font color="#000080">]:= </font>HeapNeeded <font color="#000080">- ((</font>i <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">) * </font>SizVec<font color="#000080">);
         </font>BigBlk<font color="#000080">[</font>NumVec<font color="#000080">]:= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">;
         </font>GetMem<font color="#000080">(</font>BigBlk<font color="#000080">[</font>NumVec<font color="#000080">], </font>SizBlk<font color="#000080">[</font>NumVec<font color="#000080">]);
         </font><font color="#FF0000"><b>if </b></font>BigBlk<font color="#000080">[</font>NumVec<font color="#000080">] = </font><font color="#FF0000"><b>nil then </b></font>error<font color="#000080">:= </font>true<font color="#000080">;
       </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
     </font><font color="#FF0000"><b>if not </b></font>error <font color="#FF0000"><b>then begin
       </b></font>TotSizBlk<font color="#000080">:= </font>HeapNeeded<font color="#000080">;
       </font>BigBlkExist<font color="#000080">:= </font>true<font color="#000080">;
       </font>MakeBig<font color="#000080">:= </font>true<font color="#000080">;
     </font><font color="#FF0000"><b>end else begin
       </b></font>MakeBig<font color="#000080">:= </font>false<font color="#000080">;
       </font>release<font color="#000080">(</font>heaptop<font color="#000080">);
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{ makebig }

   </i></font><font color="#FF0000"><b>function </b></font>Peek<font color="#000080">(</font>p<font color="#000080">: </font>longint<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>error<font color="#000080">: </font>boolean<font color="#000080">): </font>byte<font color="#000080">;
   </font><font color="#FF0000"><b>var
     </b></font>VecNum<font color="#000080">: </font>byte<font color="#000080">;
     </font>BytNum<font color="#000080">: </font>word<font color="#000080">;
   </font><font color="#FF0000"><b>begin
     if </b></font>BigBlkExist <font color="#FF0000"><b>and not </b></font><font color="#000080">(</font>p <font color="#000080">&gt; </font>totsizblk<font color="#000080">) </font><font color="#FF0000"><b>then begin
       </b></font>error<font color="#000080">:= </font>false<font color="#000080">;
       </font>VecNum<font color="#000080">:= </font>p <font color="#FF0000"><b>div </b></font>SizVec<font color="#000080">;
       </font>BytNum<font color="#000080">:= </font>p <font color="#000080">- (</font>VecNum <font color="#000080">* </font>SizVec<font color="#000080">);
       </font>peek<font color="#000080">:= </font>BigBlk<font color="#000080">[</font>VecNum<font color="#000080">]^[</font>BytNum<font color="#000080">];
     </font><font color="#FF0000"><b>end else begin
       </b></font>error<font color="#000080">:= </font>true<font color="#000080">;
       </font>peek<font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

   </font><font color="#FF0000"><b>procedure </b></font>Poke<font color="#000080">(</font>b<font color="#000080">: </font>byte<font color="#000080">; </font>p<font color="#000080">: </font>longint<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>error<font color="#000080">: </font>boolean<font color="#000080">);
   </font><font color="#FF0000"><b>var
     </b></font>VecNum<font color="#000080">: </font>byte<font color="#000080">;
     </font>BytNum<font color="#000080">: </font>word<font color="#000080">;
   </font><font color="#FF0000"><b>begin
      if </b></font>BigBlkExist <font color="#FF0000"><b>and not </b></font><font color="#000080">(</font>p <font color="#000080">&gt; </font>totsizblk<font color="#000080">) </font><font color="#FF0000"><b>then begin
        </b></font>error<font color="#000080">:= </font>false<font color="#000080">;
        </font>VecNum<font color="#000080">:= </font>p <font color="#FF0000"><b>div </b></font>SizVec<font color="#000080">;
        </font>BytNum<font color="#000080">:= </font>p <font color="#000080">- (</font>VecNum <font color="#000080">* </font>SizVec<font color="#000080">);
        </font>BigBlk<font color="#000080">[</font>VecNum<font color="#000080">]^[</font>BytNum<font color="#000080">]:= </font>b<font color="#000080">;
      </font><font color="#FF0000"><b>end else </b></font>error<font color="#000080">:= </font>true<font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

   </font><font color="#FF0000"><b>procedure </b></font>FillRange<font color="#000080">(</font>fromby<font color="#000080">, </font>toby <font color="#000080">:</font>longint<font color="#000080">; </font>b <font color="#000080">: </font>byte<font color="#000080">);
   </font><font color="#FF0000"><b>var
     </b></font>p<font color="#000080">: </font>longint<font color="#000080">;
     </font>VecNum<font color="#000080">: </font>byte<font color="#000080">;
     </font>BytNum<font color="#000080">: </font>word<font color="#000080">;
   </font><font color="#FF0000"><b>begin
     If </b></font>BigBlkExist <font color="#FF0000"><b>then begin
       for </b></font>p<font color="#000080">:= </font>fromby <font color="#FF0000"><b>to </b></font>toby <font color="#FF0000"><b>do begin
         </b></font>VecNum<font color="#000080">:= </font>p <font color="#FF0000"><b>div </b></font>SizVec<font color="#000080">;
         </font>BytNum<font color="#000080">:= </font>p <font color="#000080">- (</font>VecNum <font color="#000080">* </font>SizVec<font color="#000080">);
         </font>BigBlk<font color="#000080">[</font>VecNum<font color="#000080">]^[</font>BytNum<font color="#000080">]:= </font>b<font color="#000080">;
       </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

   </font><font color="#FF0000"><b>procedure </b></font>FillAll<font color="#000080">(</font>b<font color="#000080">: </font>byte<font color="#000080">);
   </font><font color="#FF0000"><b>var
     </b></font>i <font color="#000080">: </font>byte<font color="#000080">;
   </font><font color="#FF0000"><b>begin
     if </b></font>BigBlkExist <font color="#FF0000"><b>then
       for </b></font>i<font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>NumVec <font color="#FF0000"><b>do
         </b></font>fillchar<font color="#000080">(</font>BigBlk<font color="#000080">[</font>i<font color="#000080">]^,</font>SizBlk<font color="#000080">[</font>i<font color="#000080">],</font>b<font color="#000080">);
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

   </font><font color="#FF0000"><b>function </b></font>BigBlockRead <font color="#000080">(</font><font color="#FF0000"><b>var </b></font>f<font color="#000080">: </font><font color="#FF0000"><b>file</b></font><font color="#000080">): </font>boolean<font color="#000080">;
   </font><font color="#FF0000"><b>var
     </b></font>i <font color="#000080">: </font>integer<font color="#000080">;
     </font>error <font color="#000080">: </font>boolean<font color="#000080">;
   </font><font color="#FF0000"><b>begin
     </b></font>error<font color="#000080">:= </font>false<font color="#000080">;
     </font>BigBlockRead<font color="#000080">:= </font>true<font color="#000080">;
     </font><font color="#008000"><i>{$I-} </i></font>reset<font color="#000080">(</font>f<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">); </font><font color="#008000"><i>{$I+}
     </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>ioresult <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font>bigblkexist <font color="#FF0000"><b>then begin
       </b></font>i<font color="#000080">:= -</font><font color="#800000">1</font><font color="#000080">;
       </font><font color="#FF0000"><b>while not </b></font>error <font color="#FF0000"><b>and </b></font><font color="#000080">(</font>i <font color="#000080">&lt; </font>NumVec<font color="#000080">) </font><font color="#FF0000"><b>do begin
         </b></font>inc<font color="#000080">(</font>i<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
         </font><font color="#008000"><i>{$I-} </i></font>BlockRead<font color="#000080">(</font>f<font color="#000080">,</font>BigBlk<font color="#000080">[</font>i<font color="#000080">]^,</font>SizBlk<font color="#000080">[</font>i<font color="#000080">]); </font><font color="#008000"><i>{$I+}
         </i></font><font color="#FF0000"><b>if </b></font>ioresult <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>error<font color="#000080">:= </font>true<font color="#000080">;
       </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
       </font><font color="#FF0000"><b>if not </b></font>error <font color="#FF0000"><b>then </b></font><font color="#008000"><i>{$I-}</i></font>close<font color="#000080">(</font>f<font color="#000080">)</font><font color="#008000"><i>{$I+} </i></font><font color="#FF0000"><b>else </b></font>BigBlockRead<font color="#000080">:= </font>false<font color="#000080">;
     </font><font color="#FF0000"><b>end else </b></font>BigBlockRead<font color="#000080">:= </font>false<font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

   </font><font color="#FF0000"><b>function </b></font>BigBlockWrite<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>f<font color="#000080">: </font><font color="#FF0000"><b>file</b></font><font color="#000080">): </font>boolean<font color="#000080">;
   </font><font color="#FF0000"><b>var
     </b></font>i <font color="#000080">: </font>integer<font color="#000080">;
     </font>error <font color="#000080">: </font>boolean<font color="#000080">;
   </font><font color="#FF0000"><b>begin
     </b></font>error<font color="#000080">:= </font>false<font color="#000080">;
     </font>BigBlockWrite<font color="#000080">:= </font>true<font color="#000080">;
     </font><font color="#008000"><i>{$I-} </i></font>rewrite<font color="#000080">(</font>f<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">); </font><font color="#008000"><i>{$I+}
     </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>ioresult <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font>bigblkexist <font color="#FF0000"><b>then begin
       </b></font>i<font color="#000080">:= -</font><font color="#800000">1</font><font color="#000080">;
       </font><font color="#FF0000"><b>while not </b></font>error <font color="#FF0000"><b>and </b></font><font color="#000080">(</font>i <font color="#000080">&lt; </font>NumVec<font color="#000080">) </font><font color="#FF0000"><b>do begin
         </b></font>inc<font color="#000080">(</font>i<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
         </font><font color="#008000"><i>{$I-} </i></font>BlockWrite<font color="#000080">(</font>f<font color="#000080">,</font>BigBlk<font color="#000080">[</font>i<font color="#000080">]^,</font>SizBlk<font color="#000080">[</font>i<font color="#000080">]); </font><font color="#008000"><i>{$I+}
         </i></font><font color="#FF0000"><b>if </b></font>ioresult <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>error<font color="#000080">:= </font>true<font color="#000080">;
       </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
       </font><font color="#FF0000"><b>if not </b></font>error <font color="#FF0000"><b>then </b></font><font color="#008000"><i>{$I-}</i></font>close<font color="#000080">(</font>f<font color="#000080">)</font><font color="#008000"><i>{$I+} </i></font><font color="#FF0000"><b>else </b></font>BigBlockWrite<font color="#000080">:= </font>false<font color="#000080">;
     </font><font color="#FF0000"><b>end else </b></font>BigBlockWrite<font color="#000080">:= </font>false<font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>heaperror<font color="#000080">:= @</font>heapfunc<font color="#000080">;
  </font>BigBlkExist<font color="#000080">:= </font>false<font color="#000080">;
  </font>mark<font color="#000080">(</font>heaptop<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to FILES SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0057.PAS">Original</a><b>]</b></p></body>
</html>
