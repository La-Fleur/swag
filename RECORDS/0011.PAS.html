<html>
<head><title> "Records in ASM" by MAYNARD PHILBROOK</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to RECORDS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0011.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
 To access record fields in Assembler you should define a Register to the
ofset of the variable s or Record..
Example:
}
</i></font><font color="#FF0000"><b>Type </b></font>MyRec <font color="#000080">= </font><font color="#FF0000"><b>Record
       </b></font>Hi <font color="#000080">:</font>Byte<font color="#000080">;
       </font>Lo <font color="#000080">:</font>Word<font color="#000080">;
       </font>S <font color="#000080">:</font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">90</font><font color="#000080">];
      </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Var
 </b></font>Yup <font color="#000080">:</font>MyRec<font color="#000080">;
</font><font color="#FF0000"><b>Begin
asM
       </b></font><font color="#FF00FF">Mov     DI, Seg Yup;
       Push    DI;     </font><font color="#008000"><i>{ Save it just incase folloing code uses DI }
       { do what evr code you wish }
       </i></font><font color="#FF00FF">Pop     DI      </font><font color="#008000"><i>{ Get back our pointer }
       </i></font><font color="#FF00FF">Mov     [DI+MyRec.Hi], AL;      </font><font color="#008000"><i>{ Lets say AL was the reg u want }
       </i></font><font color="#FF00FF">Mov     [DI+RyRec.Lo], BX;
       </font><font color="#008000"><i>{ Ect }
{       ....
Remember, if you enter an assembler rountine that passes a Array of Records
then you must Load AX with the size of Your Record, Take the Array Pointer
Index Times The AX using the MUL instructions then SubTrace the Size of the
Record from the AX which would be the Results fo the multiply and then add
that to the DI for a Total Offset to the correct Record;
Example:
 I want Record # 2
}
</i></font><font color="#FF00FF">Procedure Test( AR:Array[1..4] of MyRec);
 Begin
  </font><font color="#FF0000"><b>ASm
   </b></font><font color="#FF00FF">Mov Di, Offset AR;
   Mov AX, TypeOF(MyRec);      </font><font color="#008000"><i>{ This generates the Size of the Record }
   </i></font><font color="#FF00FF">MUL AX, 2;                  </font><font color="#008000"><i>{ I want to times it by 2 }
   </i></font><font color="#FF00FF">SUB AX, TypeOf(MyRec);
   ADD DI,AX;
   </font><font color="#008000"><i>{ Now the DI pointers to the start of the #2 Record }
{ Of course this Record is on the stack in this example;
 Use a Globel methd or use the VAr in the Parms.
it you use VAR then the Address must be gotten indirectly.
Example:
}  </i></font><font color="#FF00FF">LES  DI, AR;         </font><font color="#008000"><i>{ THis Loads the Address fo the Array from the STactk
 { Then you go through you same multipy stuff }
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to RECORDS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0011.PAS">Original</a><b>]</b></p></body>
</html>
