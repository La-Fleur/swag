<html>
<head><title> "MANYRECS.PAS" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to RECORDS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0003.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt;Okay, I've got the need to load about 3000 Records, at 73 Bytes a piece,
&gt;into active memory.  It'd be preferred to have it as an Array of
&gt;Records, which is what I'm using now (only at 1000 Records though).

&gt;When I do this I get Structure too Large.  Is there any way that I can
&gt;load all of these Records into memory, For sorting, editing, deleting
&gt;and adding new entries (which is easy With an Array).

}
</i></font><font color="#FF0000"><b>Const
     </b></font>MaxItems  <font color="#000080">= </font><font color="#800000">3000 </font><font color="#000080">;

</font><font color="#FF0000"><b>Type </b></font>TItem <font color="#000080">=
     </font><font color="#FF0000"><b>Record
          </b></font><font color="#008000"><i>{ 73 Bytes Record }
          </i></font>Dum  <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">73</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte <font color="#000080">;
     </font><font color="#FF0000"><b>end </b></font><font color="#000080">;
     </font>PItem <font color="#000080">= ^</font>TItem <font color="#000080">;

     </font>TItemArray <font color="#000080">= </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font>MaxItems<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>PItem <font color="#000080">;

</font><font color="#FF0000"><b>Var  </b></font>i    <font color="#000080">: </font>Integer <font color="#000080">;
     </font>Arr  <font color="#000080">: </font>TItemArray <font color="#000080">;

</font><font color="#FF0000"><b>begin
     For </b></font>i<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>MaxItems <font color="#FF0000"><b>Do </b></font>New<font color="#000080">(</font>Arr<font color="#000080">[</font>i<font color="#000080">]) ;

     </font><font color="#008000"><i>{ Now, can use all those items in memory }

     </i></font><font color="#FF0000"><b>For </b></font>i<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>MaxItems <font color="#FF0000"><b>Do </b></font>Dispose<font color="#000080">(</font>Arr<font color="#000080">[</font>i<font color="#000080">]) ;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font><font color="#008000"><i>{

note that the set of data will occupy :

3000*4 Bytes in DS            12000 Bytes
3000*80 Bytes in the heap    240000 Bytes
                             ------
                             252000 Bytes of memory...

The '80' in the second line is due to the fact that TP 6's heap manager
allocates heap space by multiples of 8 Bytes, thus 73 Bytes result in
80 Bytes allocs. Reducing it to 72 Bytes would save 8*3000=24000 Bytes.

Anyway, this is not Real safe Programming, and you should prefer using a
File, unleast you are Really sure that :
- you won't have more than 3000 Records,
- any machine your Program will run onto has enough memory.
}</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to RECORDS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0003.PAS">Original</a><b>]</b></p></body>
</html>
