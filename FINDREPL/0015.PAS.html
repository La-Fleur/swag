<html>
<head><title> "SYMTAB2.PAS" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to FINDREPL SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0015.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#000000">LARRY HADLEY

   Errata<font color="#000080">: </font>include an <font color="#000080">&quot;</font>info<font color="#000080">&quot; </font>Pointer field <font color="#FF0000"><b>in </b></font>the SYMTAB_NODE
   structure <font color="#FF0000"><b>in </b></font>the previous post<font color="#000080">.

   </font>USING THE SYMBOL TABLE <font color="#000080">- </font>A CROSS REFERENCER

   A cross<font color="#000080">-</font>reference <font color="#FF0000"><b>is </b></font>a listing <font color="#FF0000"><b>of </b></font>a Programs identifiers <font color="#FF0000"><b>in
   </b></font>alphabetical order<font color="#000080">:

</font>Page <font color="#800000">1   </font>hello<font color="#000080">.</font>pas  April <font color="#800000">08 1993  19</font><font color="#000080">:</font><font color="#800000">03
   1 0</font><font color="#000080">: </font><font color="#FF0000"><b>Program </b></font>hello <font color="#000080">(</font>output<font color="#000080">);
   </font><font color="#800000">2 0</font><font color="#000080">: </font><font color="#FF0000"><b>Var </b></font>i<font color="#000080">:</font>Integer<font color="#000080">;
   </font><font color="#800000">3 0</font><font color="#000080">: </font><font color="#FF0000"><b>begin
   </b></font><font color="#800000">4 0</font><font color="#000080">:    </font><font color="#FF0000"><b>For </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">10 </font><font color="#FF0000"><b>do
   </b></font><font color="#800000">5 0</font><font color="#000080">:    </font><font color="#FF0000"><b>begin
   </b></font><font color="#800000">6 0</font><font color="#000080">:       </font>WriteLn<font color="#000080">(</font><font color="#800000">'Hello world.'</font><font color="#000080">);
   </font><font color="#800000">7 0</font><font color="#000080">:    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#800000">8 0</font><font color="#000080">: </font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>Cross Reference
<font color="#000080">---------------

</font>hello               <font color="#800000">1

</font>i                   <font color="#800000">2    4

</font>Integer             <font color="#800000">2

</font>ouput               <font color="#800000">1

</font>Writeln             <font color="#800000">6

  </font><font color="#FF0000"><b>As </b></font>shown above<font color="#000080">, </font>alongside each identifier<font color="#800000">'s name are the source
  </font>line numbers that contain the identifier<font color="#000080">. (</font>This <font color="#FF0000"><b>is </b></font>useful <font color="#FF0000"><b>for
  </b></font>tracking where they<font color="#800000">'re used)

  </font>A cross<font color="#000080">-</font>referencer reads the source <font color="#FF0000"><b>File and </b></font>looks <font color="#FF0000"><b>for
  </b></font>identifiers<font color="#000080">, </font>using the scanner you<font color="#800000">'ve built previously. The first
  </font>time a particular identifier <font color="#FF0000"><b>is </b></font>found<font color="#000080">, </font>it <font color="#FF0000"><b>is </b></font>inserted <font color="#FF0000"><b>in </b></font>the
  symbol tree along <font color="#FF0000"><b>With </b></font>it<font color="#800000">'s line number. Subsequent appearances of
  </font>the same identifier update the symbol tree <font color="#FF0000"><b>With </b></font>an additional line
  number appended <font color="#FF0000"><b>to </b></font>the list <font color="#FF0000"><b>of </b></font>line numbers<font color="#000080">.

  </font><font color="#FF0000"><b>As </b></font>soon <font color="#FF0000"><b>as </b></font>the <font color="#FF0000"><b>Program is </b></font>completely scanned<font color="#000080">, </font>all the identifier
  names <font color="#FF0000"><b>and </b></font>their line numbers are printed<font color="#000080">.

  </font>Use the INFO field <font color="#FF0000"><b>of </b></font>SYMTAB_NODE <font color="#FF0000"><b>to </b></font>point <font color="#FF0000"><b>to </b></font>a LINKED LIST <font color="#FF0000"><b>of
  </b></font>line numbers<font color="#000080">.

  </font>The main loop should scan <font color="#FF0000"><b>For </b></font>tokens <font color="#FF0000"><b>Until </b></font>it finds a period<font color="#000080">, </font><font color="#FF0000"><b>or
  </b></font>Exits <font color="#FF0000"><b>With </b></font>an <font color="#000080">&quot;</font>Unexpected <font color="#FF0000"><b>end of File</b></font><font color="#000080">&quot; </font>error<font color="#000080">. </font><font color="#FF0000"><b>For </b></font>each identifier<font color="#000080">,
  </font>search the symbol table <font color="#FF0000"><b>to </b></font>see <font color="#FF0000"><b>if </b></font>their were any previous
  instances <font color="#FF0000"><b>of </b></font>the identifier<font color="#000080">. </font><font color="#FF0000"><b>If </b></font>it <font color="#FF0000"><b>is not </b></font>found<font color="#000080">, </font><font color="#FF0000"><b>then </b></font>this must be
  the first time it <font color="#FF0000"><b>is </b></font>used so we can call the <font color="#000080">&quot;</font>enter<font color="#000080">&quot; </font><font color="#FF0000"><b>Function to
  </b></font>create a new node<font color="#000080">.

  </font><font color="#FF0000"><b>Then</b></font><font color="#000080">, </font>whether a new node was actually created <font color="#FF0000"><b>or not</b></font><font color="#000080">, </font>we call a
  <font color="#FF0000"><b>Function to </b></font>add the line number <font color="#FF0000"><b>to </b></font>the queue <font color="#FF0000"><b>of </b></font>line numbers
  attached <font color="#FF0000"><b>to </b></font>the node<font color="#800000">'s &quot;info&quot; field. Finally, when the scanner
  </font>loop terminates<font color="#000080">, </font>we call a printing <font color="#FF0000"><b>Function </b></font>which traverses the
  tree from left <font color="#FF0000"><b>to </b></font>right <font color="#FF0000"><b>to </b></font>print the sorted tree <font color="#000080">- </font><font color="#FF0000"><b>and </b></font>all the
  line numbers <font color="#FF0000"><b>in </b></font>the linked list attached <font color="#FF0000"><b>to </b></font>each node<font color="#000080">.

  </font>Note that a recursive call <font color="#FF0000"><b>to </b></font>itself <font color="#FF0000"><b>is </b></font>probably the easiest way
  <font color="#FF0000"><b>to do </b></font>this<font color="#000080">, </font>since _all_ the nodes <font color="#FF0000"><b>of </b></font>the tree are being accessed<font color="#000080">,
  </font><font color="#FF0000"><b>not </b></font>just one<font color="#000080">.

  </font>Types you will need<font color="#000080">:

</font><font color="#FF0000"><b>Type
  </b></font>pLINENUMS <font color="#000080">= ^</font>LINENUM_NODE<font color="#000080">;
  </font>LINENUM_NODE <font color="#000080">= </font><font color="#FF0000"><b>Record
     </b></font>next     <font color="#000080">:</font>pLINENUMS<font color="#000080">;
     </font>line     <font color="#000080">:</font>Integer<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>pLINE_HEADER <font color="#000080">= ^</font>LINENUM_HDR<font color="#000080">;
  </font>LINENUM_HDR <font color="#000080">= </font><font color="#FF0000"><b>Record
     </b></font>first<font color="#000080">, </font>last <font color="#000080">:</font>pLINENUMS<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>EXCERCISE <font color="#800000">#1

  </font>Write a cross referencer<font color="#000080">, </font><font color="#FF0000"><b>as </b></font>above<font color="#000080">. </font>Text it <font color="#FF0000"><b>With </b></font>an assortment <font color="#FF0000"><b>of
  pascal </b></font>sourceFiles<font color="#000080">.

  </font>ADVANCED EXCERCISE

  Note that the symbol table above converts all identifier names <font color="#FF0000"><b>to
  </b></font>lower <font color="#FF0000"><b>case</b></font><font color="#000080">. </font>What would be needed <font color="#FF0000"><b>to </b></font>reWrite the scanner<font color="#000080">/</font>xref
  <font color="#FF0000"><b>Program to </b></font>preserve <font color="#FF0000"><b>case</b></font><font color="#000080">? </font>ReWrite the xref <font color="#FF0000"><b>Program to do </b></font>so<font color="#000080">. (</font>note
  that <font color="#FF0000"><b>Pascal </b></font>compilers are <font color="#FF0000"><b>Case </b></font>insensitive<font color="#000080">, </font>so the symbol table <font color="#000080">-

  </font><font color="#FF0000"><b>For </b></font>compatibility <font color="#000080">- </font>must compare lower <font color="#FF0000"><b>case</b></font><font color="#000080">)

  &quot;</font>BRAIN TEASERS<font color="#000080">&quot;

  </font><font color="#800000">1. </font>What would be necessary <font color="#FF0000"><b>to </b></font>reWrite the symbol table <font color="#FF0000"><b>as </b></font>a hash
     table<font color="#000080">?

  </font><font color="#800000">2. </font><font color="#FF0000"><b>If </b></font>an identifier appears more than once <font color="#FF0000"><b>in </b></font>a line<font color="#000080">, </font>line
     numbers will appear more than once <font color="#FF0000"><b>in </b></font>the listing<font color="#000080">. </font>Fix xref <font color="#FF0000"><b>to
     </b></font>recognize duplicate occurences <font color="#FF0000"><b>of </b></font>line numbers <font color="#FF0000"><b>in </b></font>node<font color="#000080">-</font>lists<font color="#000080">.

  -----------------------------------------------------------------

  </font>Next<font color="#000080">: </font><font color="#FF0000"><b>Pascal </b></font>source cruncher<font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to FINDREPL SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0015.PAS">Original</a><b>]</b></p></body>
</html>
