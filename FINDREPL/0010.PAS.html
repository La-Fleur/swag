<html>
<head><title> "NICECODE.PAS" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to FINDREPL SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0010.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>(*
&gt;Does anyone know of a utility Program that will apply some sort of
&gt;reasonable structuring to a pascal source File?

I'm not sure if it's what you want, but the source For a Pascal
reFormatter, etc, was entered in the Fidonet PASCAL Programming
Competition, and came third (I came second!!).

As you can see by the File dates, this is a very recent thing and
since it is Nearly too late I toyed With the idea of just keeping it
to myself.  It certainly is not an example of inspired Programming.
But then, I thought, if everyone felt that way you'd have nothing to
chose from and even if this is not a prize winner, mayby someone
else will find it useful.

So here it is...  not extensively tested, but I couldn't find any
bugs.  Used Pretty to reFormat itself and it still Compiled and
worked.  Anyway, the only possible use is to another Turbo Pascal
Programmer who shouldn't have any difficult modifying to suit
himself.  They'd probably do that anyway since the output represents
my own peculiar notion as to what a readable Format should be.

'Pretty Printers' date back to the earliest Computer days and
Variations existed For just about any language.  However, I've been
unable to find a current one For Turbo Pascal.

Here's what this one does:

Pretty With no parameters generates a syntax message.

Input is scanned line-by-line, Word-by-Word and Byte-by-Byte.  Any
identifiers recognized as part of TP's language are replaced by
mixed Case (in a style which _I_ like).  Someone else can edit
Constants Borland1 through Borland5 and TP3.  (Why TP3 later.)  The
first one on a line is capitalized anyway.

A fallout of this is to use selected ones to determine indentation
in increments of 'IndentSpcs' which I arbitrarily set to 3.  Change
if you like. Indentation is incremented whenever one of the
'IndentIDs' appears and decremented With 'UnindentIDs' (surprise!).

Single indents are also provided For 'SectionIDs' (Const, Type,
Uses, Var) and For 'NestIDs' (Procedure Function) to make these more
visible.  White space is what does it, right?

On the other hand, no attempt is made to affect white space in the
vertical direction.  Since that generally stays the way you
originate it.

Any '{', '(' or '''' (Single quote) detected during the line scan
trigger a 'skipit' mode which moves the enclosed stuff directly to
output, unmodified. With one exception.  {Comments} which begin a
line are aligned to the left margin (where I like to see Compiler
directives and one line Procedure/Function explanations).  Other
{Comments} which begin/end on the same line are shifted so the '}'
aligns at the (80th column) right margin.  I think this makes them
more visible than when snuggled up to a semi-colon and getting them
away from the code makes it more legible, too.

and it did look better originally when it used some of my personal
Units. Hastily modified to stand alone.  There are, no doubt, some
obvious ways the Programming can be improved (you would probably
have used some nice hash tables to look up key Words) but, as I say,
I thought I would be the only one using this and speed in this Case
is not all that important.

With one exception.  Something I worked up For an earlier
application and may be worth looking at -- 'LowCase'.

It will Compile With TP4-TP5.5 and probably TP6 (if it still
supports Inline). I included TP3 stuff because some of the old
software I was looking at was written in it.  and it recognizes
Units in a clumsy sort of way.

Switching to chat mode here.  if you're Really busy, you can skip the
following.

This thing actually began as a 'Case-converter'.  I was trying to
avoid re-inventing some wheels by re-working some old Pascal source
dating back to the late 70's and 80's.  Upper Case Programs became a
'standard' back in the days when you talked to main frames through a
teleType machine, which has no lower Case.  Sadly, this persisted
long after it was no longer necessary and I find those
all-upper-Case Programs almost unreadable.  That is I can't find
what I'm looking For.  They were making me crazy.  (BTW I suspect
some of this has to do With why Pascal has UpCase but no LoCase.)

I stole the orginal LowCase included here from someone who had done
the intuitive thing -- first test For 'A', then For 'Z'.  Changing
to an initial test For 'Z' does two things.  A whopping 164 of the
255 possible Characters can be eliminated With just one test and,
since ordinary Text consists of mostly lower Case, these will be
passed over rapidly.

When you received this you thought, &quot;Who the heck is Art Weller?  I
don't remember him on the Pascal Echo.&quot;  Right.  I'm a 'lurker'!
Been reading the echo since beFore it had a moderator.  (Now we have
an excellent one.  Thank you.) I have a machine on a timer which
calls the BBS each morning to read and store several echos which I
read later.  Rarely get inspired enough to call back and enter a
discussion.  Things usually get resolved nicely without me.  I
especially don't want to get involved in such as the 'Goto' wars.
But I monitor the better discussions to enhance my TP skills.

I'm not Really a Programmer (no Formal training, that is --
Computers hadn't been invented when I was in school!), but an
engineer.  I'm retired from White Sands Missile Range where I was
Chief of Plans and Programs For (mumble, mumble) years.  I
self-taught myself Computers when folks from our Analysis and
Computation Directorate started using jargon on me.  I did that well
enough to later help Write a book For people who wanted to convert
from BASIC to Pascal then after &quot;retiring&quot; was an editor For a small
Computer magazine (68 Micro-Journal).

In summary, if you think this worth sharing With others I'll be
pleased enough even without a prize.  not even sure it will get
there in time.  Snail-Mail, you know.
*)

</i></font><font color="#FF0000"><b>Program </b></font>Pretty<font color="#000080">;
</font><font color="#008000"><i>{A 'Pretty Printer' For Turbo Pascal Programs}
{  This Program converts Turbo Pascal identifiers in a source code File to
   mixed Case and indents the code.
   Released into Public Domain June, 1992 on an 'AS IS' basis.  Enjoy at your
   own risk.
                                                    Art Weller
                                                    3217 Pagosa Court
                                                    El Paso, Texas  79904
                                                    U. S. A.
                                                    Ph. (915) 755-2516}

{Uses
   Strings;}

</i></font><font color="#FF0000"><b>Const
   </b></font>IndentSpcs <font color="#000080">= </font><font color="#800000">3</font><font color="#000080">;

   </font>Borland1 <font color="#000080">=
   </font><font color="#800000">' Absolute Addr and ArcTan Array Assign AuxInptr AuxOutptr BDos begin Bios '</font><font color="#000080">+
   </font><font color="#800000">' BlockRead BlockWrite Boolean Buflen Byte Case Chain Char Chr Close ClrEol '</font><font color="#000080">+
   </font><font color="#800000">' ClrScr Color Concat Const Copy Cos Delay Delete DelLine Dispose div do '</font><font color="#000080">;
   </font>Borland2 <font color="#000080">=
   </font><font color="#800000">' Downto Draw else end Eof Eoln Erase Execute Exp External False File '</font><font color="#000080">+
   </font><font color="#800000">' FilePos FileSize FillChar Flush For Forward Frac Freemem Function Getmem '</font><font color="#000080">+
   </font><font color="#800000">' Goto GotoXY Halt HeapPtr Hi HighVideo HiRes if Implementation in Inline '</font><font color="#000080">;
   </font>Borland3 <font color="#000080">=
   </font><font color="#800000">' Input Insert InsLine Int Integer Interface Intr IOResult KeyPressed '</font><font color="#000080">+
   </font><font color="#800000">' Label Length Ln Lo LowVideo Lst Mark MaxAvail Maxint Mem MemAvail Memw Mod '</font><font color="#000080">+
   </font><font color="#800000">' Move New Nil NormVideo not Odd of Ofs or Ord Output Overlay Packed '</font><font color="#000080">;
   </font>Borland4 <font color="#000080">=
   </font><font color="#800000">' Pallette Pi Plot Port Pos Pred Procedure Program Ptr Random Randomize Read '</font><font color="#000080">+
   </font><font color="#800000">' ReadLn Real Record Release Rename Repeat Reset ReWrite Round Seek Seg Set '</font><font color="#000080">+
   </font><font color="#800000">' Shl Shr Sin SizeOf Sound Sqr Sqrt Str String Succ Swap Text then to '</font><font color="#000080">;
   </font>Borland5 <font color="#000080">=
   </font><font color="#800000">' True Trunc Type Unit Until UpCase Uses UsrOutPtr Val Var While Window With '</font><font color="#000080">+
   </font><font color="#800000">' Write WriteLn xor '</font><font color="#000080">;
   </font>TP3 <font color="#000080">=
   </font><font color="#800000">' AUX CONinPTR CON CONOUTPTR ConstPTR CrtEXIT CrtinIT ERRorPTR Kbd '</font><font color="#000080">+
   </font><font color="#800000">' LStoUTPTR TRM USR USRinPTR '</font><font color="#000080">;

   </font>IndentIDs   <font color="#000080">= </font><font color="#800000">' begin Case Const Record Repeat Type Uses Var '</font><font color="#000080">;
   </font>UnIndentIDs <font color="#000080">= </font><font color="#800000">' end Until '</font><font color="#000080">;
   </font>SectionIDs  <font color="#000080">= </font><font color="#800000">' Const Type Uses Var '</font><font color="#000080">;
   </font>endSection  <font color="#000080">= </font><font color="#800000">' begin Const Uses Var Function Implementation Interface '</font><font color="#000080">+
                 </font><font color="#800000">' Procedure Type Unit '</font><font color="#000080">;
   </font>NestIDs     <font color="#000080">= </font><font color="#800000">' Function Procedure Unit '</font><font color="#000080">;

   </font>IDAlphas    <font color="#000080">= [</font><font color="#800000">'a'</font><font color="#000080">..</font><font color="#800000">'z'</font><font color="#000080">, </font><font color="#800000">'1'</font><font color="#000080">..</font><font color="#800000">'0'</font><font color="#000080">, </font><font color="#800000">'_'</font><font color="#000080">];

</font><font color="#FF0000"><b>Var
   </b></font>Indent<font color="#000080">,
   </font>endPend<font color="#000080">,
   </font>Pending<font color="#000080">,
   </font>UnitFlag       <font color="#000080">: </font>Boolean<font color="#000080">;
   </font>NestLevel<font color="#000080">,
   </font>NestIndent<font color="#000080">,
   </font>IndentNext<font color="#000080">,
   </font>IndentNow<font color="#000080">,
   </font>Pntr<font color="#000080">, </font>LineNum  <font color="#000080">: </font>Integer<font color="#000080">;
   </font>IDs<font color="#000080">,
   </font>InFile<font color="#000080">,
   </font>OutFile<font color="#000080">,
   </font>ProgWrd<font color="#000080">,
   </font>ProgLine       <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
   </font>Idents<font color="#000080">,
   </font>OutID          <font color="#000080">: </font><font color="#FF0000"><b>Array </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">5</font><font color="#000080">] </font><font color="#FF0000"><b>of String</b></font><font color="#000080">;
   </font>f1<font color="#000080">, </font>f2         <font color="#000080">: </font>Text<font color="#000080">;

</font><font color="#FF0000"><b>Function  </b></font>LowCase<font color="#000080">(</font>Ch<font color="#000080">: </font>Char<font color="#000080">): </font>Char<font color="#000080">;
</font><font color="#FF0000"><b>begin
  Inline</b></font><font color="#000080">(
   </font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$86</font><font color="#000080">/&gt;</font>Ch<font color="#000080">/                          </font><font color="#008000"><i>{      mov al,&gt;Ch[bp]   ;Char to check}
   </i></font><font color="#800000">$3C</font><font color="#000080">/</font><font color="#800000">$5A</font><font color="#000080">/                              </font><font color="#008000"><i>{      cmp al,'Z'                     }
   </i></font><font color="#800000">$7F</font><font color="#000080">/</font><font color="#800000">$06</font><font color="#000080">/                              </font><font color="#008000"><i>{      jg  Done                       }
   </i></font><font color="#800000">$3C</font><font color="#000080">/</font><font color="#800000">$41</font><font color="#000080">/                              </font><font color="#008000"><i>{      cmp al,'A'                     }
   </i></font><font color="#800000">$7C</font><font color="#000080">/</font><font color="#800000">$02</font><font color="#000080">/                              </font><font color="#008000"><i>{      jl  Done                       }
   </i></font><font color="#800000">$0C</font><font color="#000080">/</font><font color="#800000">$20</font><font color="#000080">/                              </font><font color="#008000"><i>{      or al,$20                      }
   </i></font><font color="#800000">$88</font><font color="#000080">/</font><font color="#800000">$86</font><font color="#000080">/&gt;</font>LowCase<font color="#000080">);                    </font><font color="#008000"><i>{Done :mov &gt;LowCase[bp],al            }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>LowCaseStr<font color="#000080">(</font>InStr <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">): </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>i  <font color="#000080">: </font>Integer<font color="#000080">;
  </font>len<font color="#000080">: </font>Byte <font color="#FF0000"><b>Absolute </b></font>InStr<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>LowCaseStr<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">] := </font>Chr<font color="#000080">(</font>len<font color="#000080">);
  </font><font color="#FF0000"><b>For </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>len <font color="#FF0000"><b>do
  </b></font>LowCaseStr<font color="#000080">[</font>i<font color="#000080">] := </font>LowCase<font color="#000080">(</font>InStr<font color="#000080">[</font>i<font color="#000080">]);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function  </b></font>Blanks<font color="#000080">(</font>Count<font color="#000080">: </font>Byte<font color="#000080">): </font><font color="#FF0000"><b>String</b></font><font color="#000080">; </font><font color="#008000"><i>{return String of 'Count' spaces}
</i></font><font color="#FF0000"><b>Var
  </b></font>Result<font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>FillChar<font color="#000080">(</font>Result<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">], </font>Count<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">' '</font><font color="#000080">);
  </font>Result<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">] := </font>Chr<font color="#000080">(</font>Count<font color="#000080">);
  </font>Blanks <font color="#000080">:= </font>Result<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>StripLeading<font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>Str<font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">);  </font><font color="#008000"><i>{remove all leading spaces}
</i></font><font color="#FF0000"><b>begin
  While </b></font><font color="#000080">(</font>Str<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] = </font><font color="#800000">#32</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>length<font color="#000080">(</font>Str<font color="#000080">) &gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>do
    </b></font>Delete<font color="#000080">(</font>Str<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Initialize<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>IDs <font color="#000080">:= </font>IndentIDs <font color="#000080">+ </font>UnIndentIDs <font color="#000080">+ </font>endSection<font color="#000080">;
  </font>OutID<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] := </font>Borland1<font color="#000080">;
  </font>Idents<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] := </font>LowCaseStr<font color="#000080">(</font>OutID<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]);
  </font>OutID<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">] := </font>Borland2<font color="#000080">;
  </font>Idents<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">] := </font>LowCaseStr<font color="#000080">(</font>OutID<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">]);
  </font>OutID<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">] := </font>Borland3<font color="#000080">;
  </font>Idents<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">] := </font>LowCaseStr<font color="#000080">(</font>OutID<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">]);
  </font>OutID<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">] := </font>Borland4<font color="#000080">;
  </font>Idents<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">] := </font>LowCaseStr<font color="#000080">(</font>OutID<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">]);
  </font>OutID<font color="#000080">[</font><font color="#800000">5</font><font color="#000080">] := </font>Borland5 <font color="#000080">+ </font>TP3<font color="#000080">;
  </font>Idents<font color="#000080">[</font><font color="#800000">5</font><font color="#000080">] := </font>LowCaseStr<font color="#000080">(</font>OutID<font color="#000080">[</font><font color="#800000">5</font><font color="#000080">]);
  </font>Pending <font color="#000080">:= </font>False<font color="#000080">;
  </font>UnitFlag <font color="#000080">:= </font>False<font color="#000080">;
  </font>IndentNext <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>IndentNow <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>LineNum <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>NestIndent <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>NestLevel <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Greeting<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Writeln<font color="#000080">;
  </font>Writeln<font color="#000080">(</font><font color="#800000">'Pascal Program Indenter'</font><font color="#000080">);
  </font>Writeln<font color="#000080">; </font>Writeln<font color="#000080">;
  </font>Writeln<font color="#000080">(</font><font color="#800000">'SYNTAX:  INDENT InputFile OutPutFile'</font><font color="#000080">);
  </font>Writeln<font color="#000080">(</font><font color="#800000">'         INDENT InputFile &gt; OutPut'</font><font color="#000080">);
  </font>Writeln<font color="#000080">; </font>Writeln<font color="#000080">;
  </font>Halt<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>OpenFiles<font color="#000080">;
</font><font color="#FF0000"><b>begin
  if </b></font>paramcount <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
  begin
    </b></font>InFile <font color="#000080">:= </font>ParamStr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>pos<font color="#000080">(</font><font color="#800000">'.'</font><font color="#000080">, </font>InFile<font color="#000080">) = </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
      </b></font>InFile <font color="#000080">:= </font>InFile <font color="#000080">+ </font><font color="#800000">'.pas'</font><font color="#000080">;
    </font>OutFile <font color="#000080">:= </font>Paramstr<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">);
  </font><font color="#FF0000"><b>end
  else
    </b></font>Greeting<font color="#000080">;
  </font>Assign<font color="#000080">(</font>f1<font color="#000080">, </font>InFile<font color="#000080">);
  </font>Reset<font color="#000080">(</font>f1<font color="#000080">);
  </font>Assign<font color="#000080">(</font>f2<font color="#000080">, </font>OutFile<font color="#000080">);
  </font>ReWrite<font color="#000080">(</font>f2<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>GetWord<font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>i<font color="#000080">,
  </font>index<font color="#000080">,
  </font>TmpPtr<font color="#000080">,
  </font>WrdPos   <font color="#000080">: </font>Integer<font color="#000080">;

  </font><font color="#FF0000"><b>Procedure </b></font>DecIndent<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    if </b></font><font color="#000080">(</font>IndentNext <font color="#000080">&gt; </font>IndentNow<font color="#000080">) </font><font color="#FF0000"><b>then   </b></font><font color="#008000"><i>{begin/end on same line}
      </i></font>Dec<font color="#000080">(</font>IndentNext<font color="#000080">)
    </font><font color="#FF0000"><b>else
    if </b></font>IndentNow <font color="#000080">&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
      </b></font>dec<font color="#000080">(</font>IndentNow<font color="#000080">);
    </font>IndentNext <font color="#000080">:= </font>IndentNow<font color="#000080">;    </font><font color="#008000"><i>{next line, too}
  </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>ProgWrd <font color="#000080">:= </font><font color="#800000">' '</font><font color="#000080">;
  </font>TmpPtr <font color="#000080">:= </font>Pntr<font color="#000080">;

  </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>LowCase<font color="#000080">(</font>ProgLine<font color="#000080">[</font>Pntr<font color="#000080">]) </font><font color="#FF0000"><b>in </b></font>IDAlphas<font color="#000080">) </font><font color="#008000"><i>{Convert checked For LCase alpha}
        </i></font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>Pntr <font color="#000080">&lt;= </font>length<font color="#000080">(</font>ProgLine<font color="#000080">)) </font><font color="#FF0000"><b>do
  begin
    </b></font>ProgWrd <font color="#000080">:= </font>ProgWrd <font color="#000080">+ </font>LowCase<font color="#000080">(</font>ProgLine<font color="#000080">[</font>Pntr<font color="#000080">]);
    </font>Inc<font color="#000080">(</font>Pntr<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>ProgWrd <font color="#000080">:= </font>ProgWrd<font color="#000080">+</font><font color="#800000">' '</font><font color="#000080">;   </font><font color="#008000"><i>{surrounded With blanks to make it unique!}
  </i></font>index <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;

  </font><font color="#FF0000"><b>Repeat</b></font><font color="#000080">;     </font><font color="#008000"><i>{is it a Turbo Pascal Word?}
    </i></font>inc<font color="#000080">(</font>index<font color="#000080">);
    </font>WrdPos <font color="#000080">:= </font>Pos<font color="#000080">(</font>ProgWrd<font color="#000080">, </font>Idents<font color="#000080">[</font>index<font color="#000080">]);
  </font><font color="#FF0000"><b>Until </b></font><font color="#000080">(</font>WrdPos <font color="#000080">&lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>index <font color="#000080">= </font><font color="#800000">5</font><font color="#000080">);

  </font><font color="#FF0000"><b>if </b></font>WrdPos <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then   </b></font><font color="#008000"><i>{found a Pascal Word}
  </i></font><font color="#FF0000"><b>begin
    </b></font>Move<font color="#000080">(</font>OutID<font color="#000080">[</font>index<font color="#000080">][</font>WrdPos<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">], </font>ProgLine<font color="#000080">[</font>TmpPtr<font color="#000080">], </font>Length<font color="#000080">(</font>ProgWrd<font color="#000080">)-</font><font color="#800000">2</font><font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font>TmpPtr <font color="#000080">= </font><font color="#800000">1 </font><font color="#FF0000"><b>then
      </b></font>ProgLine<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] := </font>UpCase<font color="#000080">(</font>ProgLine<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]);

    </font><font color="#FF0000"><b>if </b></font>Pos<font color="#000080">(</font>ProgWrd<font color="#000080">, </font>IDs<font color="#000080">) &lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then  </b></font><font color="#008000"><i>{only checked if a Pascal Word ^}
    </i></font><font color="#FF0000"><b>begin
      if </b></font>Pos<font color="#000080">(</font>ProgWrd<font color="#000080">, </font>endSection<font color="#000080">) &lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then  </b></font><font color="#008000"><i>{this includes &quot;SectionIDs&quot;}
      </i></font><font color="#FF0000"><b>begin                                      </b></font><font color="#008000"><i>{and &quot;NestIDs&quot;}
        </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>pos<font color="#000080">(</font>ProgWrd<font color="#000080">, </font>NestIDs<font color="#000080">) &lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
        begin
          if </b></font>ProgWrd <font color="#000080">= </font><font color="#800000">' Unit ' </font><font color="#FF0000"><b>then
            </b></font>UnitFlag <font color="#000080">:= </font>True<font color="#000080">;
          </font><font color="#FF0000"><b>if not </b></font>UnitFlag <font color="#FF0000"><b>then
            </b></font>inc<font color="#000080">(</font>NestLevel<font color="#000080">);
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
        </font><font color="#FF0000"><b>if </b></font>Pending <font color="#FF0000"><b>then
          </b></font>DecIndent<font color="#000080">;
        </font>Pending <font color="#000080">:= </font>Pos<font color="#000080">(</font>ProgWrd<font color="#000080">, </font>SectionIDs<font color="#000080">) &lt;&gt; </font><font color="#800000">0</font><font color="#000080">;
        </font><font color="#FF0000"><b>if </b></font>ProgWrd <font color="#000080">= </font><font color="#800000">' Implementation ' </font><font color="#FF0000"><b>then
          </b></font>UnitFlag <font color="#000080">:= </font>False<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font>Pos<font color="#000080">(</font>ProgWrd<font color="#000080">, </font>IndentIDs<font color="#000080">) &lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
        </b></font>inc<font color="#000080">(</font>IndentNext<font color="#000080">); </font><font color="#008000"><i>{Indent 1 level}
      </i></font><font color="#FF0000"><b>if </b></font>Pos<font color="#000080">(</font>ProgWrd<font color="#000080">, </font>UnIndentIDs<font color="#000080">) &lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
      begin
         </b></font>DecIndent<font color="#000080">;   </font><font color="#008000"><i>{Unindent 1 level}
         </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>IndentNow <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>NestLevel <font color="#000080">&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
           </b></font>dec<font color="#000080">(</font>NestLevel<font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font>NestLevel <font color="#000080">&gt; </font><font color="#800000">1 </font><font color="#FF0000"><b>then
        </b></font>NestIndent <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Convert<font color="#000080">;

  </font><font color="#FF0000"><b>Procedure </b></font>OutLine<font color="#000080">;
  </font><font color="#FF0000"><b>Var
    </b></font>Tabs <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">40</font><font color="#000080">];
  </font><font color="#FF0000"><b>begin
    </b></font>Tabs <font color="#000080">:= </font>Blanks<font color="#000080">((</font>IndentNow<font color="#000080">+</font>NestIndent<font color="#000080">) * </font>IndentSpcs<font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font>ProgLine<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] = </font><font color="#800000">'{' </font><font color="#FF0000"><b>then
      </b></font>Writeln<font color="#000080">(</font>f2<font color="#000080">, </font>ProgLine<font color="#000080">)
    </font><font color="#FF0000"><b>else
      </b></font>Writeln<font color="#000080">(</font>f2<font color="#000080">, </font>Tabs<font color="#000080">, </font>ProgLine<font color="#000080">);
    </font>IndentNow <font color="#000080">:= </font>IndentNext<font color="#000080">;   </font><font color="#008000"><i>{ get ready For next line }
    </i></font><font color="#FF0000"><b>if </b></font>NestLevel <font color="#000080">&lt; </font><font color="#800000">2 </font><font color="#FF0000"><b>then
      </b></font>NestIndent <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>Procedure </b></font>Skipto<font color="#000080">(</font>SearchChar<font color="#000080">: </font>Char<font color="#000080">);
  </font><font color="#FF0000"><b>begin
    Repeat
      if </b></font>pntr <font color="#000080">&gt; </font>Length<font color="#000080">(</font>ProgLine<font color="#000080">) </font><font color="#FF0000"><b>then
      begin
        </b></font>OutLine<font color="#000080">;
        </font>Readln<font color="#000080">(</font>f1<font color="#000080">, </font>ProgLine<font color="#000080">);   </font><font color="#008000"><i>{get another line}
        </i></font>Pntr <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font>Inc<font color="#000080">(</font>pntr<font color="#000080">);
    </font><font color="#FF0000"><b>Until </b></font><font color="#000080">(</font>ProgLine<font color="#000080">[</font>pntr<font color="#000080">] = </font>SearchChar<font color="#000080">) </font><font color="#FF0000"><b>or </b></font>Eof<font color="#000080">(</font>f1<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>Procedure </b></font>MoveComments<font color="#000080">;
  </font><font color="#FF0000"><b>Var
    </b></font>TmpIndent <font color="#000080">: </font>Integer<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    if </b></font><font color="#000080">(</font>ProgLine<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] = </font><font color="#800000">'{'</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>ProgLine<font color="#000080">[</font>Pntr<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">] = </font><font color="#800000">'$'</font><font color="#000080">) </font><font color="#FF0000"><b>then
    begin
      </b></font>Skipto<font color="#000080">(</font><font color="#800000">'}'</font><font color="#000080">);
      </font>Exit<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>TmpIndent <font color="#000080">:= (</font>IndentNow<font color="#000080">+</font>NestIndent<font color="#000080">) * </font>IndentSpcs<font color="#000080">;
    </font><font color="#FF0000"><b>While </b></font>Length<font color="#000080">(</font>ProgLine<font color="#000080">) &lt; </font><font color="#800000">80</font><font color="#000080">-</font>TmpIndent <font color="#FF0000"><b>do
      </b></font>Insert<font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">, </font>ProgLine<font color="#000080">, </font>Pntr<font color="#000080">);
    </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>pos<font color="#000080">(</font><font color="#800000">'}'</font><font color="#000080">, </font>ProgLine<font color="#000080">) &gt; </font><font color="#800000">80</font><font color="#000080">-</font>TmpIndent<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>pos<font color="#000080">(</font><font color="#800000">' {'</font><font color="#000080">, </font>ProgLine<font color="#000080">) &gt; </font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>do
    begin
      </b></font>Delete<font color="#000080">(</font>ProgLine<font color="#000080">, </font>Pos<font color="#000080">(</font><font color="#800000">' {'</font><font color="#000080">, </font>ProgLine<font color="#000080">), </font><font color="#800000">1</font><font color="#000080">);
      </font>Dec<font color="#000080">(</font>Pntr<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>Skipto<font color="#000080">(</font><font color="#800000">'}'</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  While not </b></font>Eof<font color="#000080">(</font>f1<font color="#000080">) </font><font color="#FF0000"><b>do
  begin
    </b></font>Readln<font color="#000080">(</font>f1<font color="#000080">, </font>ProgLine<font color="#000080">);
    </font>StripLeading<font color="#000080">(</font>ProgLine<font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font>Length<font color="#000080">(</font>ProgLine<font color="#000080">) = </font><font color="#800000">0 </font><font color="#FF0000"><b>then
      </b></font>Writeln<font color="#000080">(</font>f2<font color="#000080">)
    </font><font color="#FF0000"><b>else
    begin
      </b></font>Pntr <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
      </font><font color="#FF0000"><b>Repeat
        Case </b></font>LowCase<font color="#000080">(</font>ProgLine<font color="#000080">[</font>pntr<font color="#000080">]) </font><font color="#FF0000"><b>of
          </b></font><font color="#800000">'a'</font><font color="#000080">..</font><font color="#800000">'z'</font><font color="#000080">,</font><font color="#800000">'_'  </font><font color="#000080">:  </font>GetWord<font color="#000080">;
          </font><font color="#800000">'{'           </font><font color="#000080">:  </font>MoveComments<font color="#000080">;
          </font><font color="#800000">'('           </font><font color="#000080">:  </font>Skipto<font color="#000080">(</font><font color="#800000">')'</font><font color="#000080">);
          </font><font color="#800000">#39           </font><font color="#000080">:  </font>Skipto<font color="#000080">(</font><font color="#800000">#39</font><font color="#000080">)        </font><font color="#008000"><i>{Single quote}
        </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
        </font>Inc<font color="#000080">(</font>pntr<font color="#000080">)
      </font><font color="#FF0000"><b>Until </b></font><font color="#000080">(</font>pntr <font color="#000080">&gt;= </font>length<font color="#000080">(</font>ProgLine<font color="#000080">));
      </font>OutLine<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{ While }
  </i></font>Close<font color="#000080">(</font>f1<font color="#000080">); </font>Close<font color="#000080">(</font>f2<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>Initialize<font color="#000080">;
  </font>OpenFiles<font color="#000080">;
  </font>Convert<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to FINDREPL SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0010.PAS">Original</a><b>]</b></p></body>
</html>
