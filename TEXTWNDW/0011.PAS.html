<html>
<head><title> "Text DrawLine Functions" by TIM SCHEMPP</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to TEXTWNDW SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0011.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{ WRITTEN BY TIM SCHEMPP
  OCTOBER 21, 1993       }

</i></font><font color="#FF0000"><b>unit </b></font>drawline<font color="#000080">;

</font><font color="#FF0000"><b>interface

   procedure </b></font>horizline<font color="#000080">(</font>x1<font color="#000080">,</font>x2<font color="#000080">,</font>y<font color="#000080">:</font>integer<font color="#000080">; </font><font color="#FF0000"><b>default</b></font><font color="#000080">:</font>char<font color="#000080">);
   </font><font color="#FF0000"><b>procedure </b></font>vertline<font color="#000080">(</font>x<font color="#000080">,</font>y1<font color="#000080">,</font>y2<font color="#000080">:</font>integer<font color="#000080">; </font><font color="#FF0000"><b>default</b></font><font color="#000080">:</font>char<font color="#000080">);
   </font><font color="#FF0000"><b>procedure </b></font>rectlines<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">:</font>integer<font color="#000080">; </font><font color="#FF0000"><b>default</b></font><font color="#000080">:</font>char<font color="#000080">);

</font><font color="#008000"><i>{ IF writetomemory IS SET TO TRUE, LINES WILL BE DRAWN AN AVERAGE OF
  ABOUT 15 TO 20 PERCENT FASTER THAN IF writetomemory IS SET TO FALSE.
  HOWEVER, IF DATA IS WRITTEN DIRECTLY TO VIDEO MEMORY, YOU ARE STUCK WITH
  THE SCREENS CURRENT COLORS (TEXTCOLOR AND TEXTBACKGROUND HAVE NO EFFECT).
  THE DEFAULT VALUE OF writetomemory IS FALSE. }

</i></font><font color="#FF0000"><b>var </b></font>writetomemory<font color="#000080">:</font>boolean<font color="#000080">;

</font><font color="#FF0000"><b>implementation
 uses </b></font>crt<font color="#000080">; </font><font color="#008000"><i>{for gotoxy, wherex and wherey}

     </i></font><font color="#FF0000"><b>const </b></font>symbols<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">40</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>char<font color="#000080">=
                      (</font><font color="#800000">'&sup3;'</font><font color="#000080">,</font><font color="#800000">'&acute;'</font><font color="#000080">,</font><font color="#800000">'&micro;'</font><font color="#000080">,</font><font color="#800000">'¶'</font><font color="#000080">,</font><font color="#800000">'&middot;'</font><font color="#000080">,</font><font color="#800000">'&cedil;'</font><font color="#000080">,</font><font color="#800000">'&sup1;'</font><font color="#000080">,</font><font color="#800000">'&ordm;'</font><font color="#000080">,</font><font color="#800000">'&raquo;'</font><font color="#000080">,</font><font color="#800000">'&frac14;'</font><font color="#000080">,</font><font color="#800000">'&frac12;'</font><font color="#000080">,</font><font color="#800000">'&frac34;'</font><font color="#000080">,</font><font color="#800000">'&iquest;'</font><font color="#000080">,
                       </font><font color="#800000">'&Agrave;'</font><font color="#000080">,</font><font color="#800000">'&Aacute;'</font><font color="#000080">,</font><font color="#800000">'&Acirc;'</font><font color="#000080">,</font><font color="#800000">'&Atilde;'</font><font color="#000080">,</font><font color="#800000">'&Auml;'</font><font color="#000080">,</font><font color="#800000">'&Aring;'</font><font color="#000080">,</font><font color="#800000">'&AElig;'</font><font color="#000080">,</font><font color="#800000">'&Ccedil;'</font><font color="#000080">,</font><font color="#800000">'&Egrave;'</font><font color="#000080">,</font><font color="#800000">'&Eacute;'</font><font color="#000080">,</font><font color="#800000">'&Ecirc;'</font><font color="#000080">,</font><font color="#800000">'&Euml;'</font><font color="#000080">,</font><font color="#800000">'&Igrave;'</font><font color="#000080">,
                       </font><font color="#800000">'&Iacute;'</font><font color="#000080">,</font><font color="#800000">'&Icirc;'</font><font color="#000080">,</font><font color="#800000">'&Iuml;'</font><font color="#000080">,</font><font color="#800000">'&ETH;'</font><font color="#000080">,</font><font color="#800000">'&Ntilde;'</font><font color="#000080">,</font><font color="#800000">'&Ograve;'</font><font color="#000080">,</font><font color="#800000">'&Oacute;'</font><font color="#000080">,</font><font color="#800000">'&Ocirc;'</font><font color="#000080">,</font><font color="#800000">'&Otilde;'</font><font color="#000080">,</font><font color="#800000">'&Ouml;'</font><font color="#000080">,</font><font color="#800000">'&times;'</font><font color="#000080">,</font><font color="#800000">'&Oslash;'</font><font color="#000080">,</font><font color="#800000">'&Ugrave;'</font><font color="#000080">,
                       </font><font color="#800000">'&Uacute;'</font><font color="#000080">);

           </font>codes<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">40</font><font color="#000080">] </font><font color="#FF0000"><b>of string</b></font><font color="#000080">[</font><font color="#800000">4</font><font color="#000080">]=
                    (</font><font color="#800000">'1010'</font><font color="#000080">,</font><font color="#800000">'1011'</font><font color="#000080">,</font><font color="#800000">'1012'</font><font color="#000080">,</font><font color="#800000">'2021'</font><font color="#000080">,</font><font color="#800000">'0021'</font><font color="#000080">,</font><font color="#800000">'0012'</font><font color="#000080">,</font><font color="#800000">'2022'</font><font color="#000080">,</font><font color="#800000">'2020'</font><font color="#000080">,
                     </font><font color="#800000">'0022'</font><font color="#000080">,</font><font color="#800000">'2002'</font><font color="#000080">,</font><font color="#800000">'2001'</font><font color="#000080">,</font><font color="#800000">'1002'</font><font color="#000080">,</font><font color="#800000">'0011'</font><font color="#000080">,</font><font color="#800000">'1100'</font><font color="#000080">,</font><font color="#800000">'1101'</font><font color="#000080">,</font><font color="#800000">'0111'</font><font color="#000080">,
                     </font><font color="#800000">'1110'</font><font color="#000080">,</font><font color="#800000">'0101'</font><font color="#000080">,</font><font color="#800000">'1111'</font><font color="#000080">,</font><font color="#800000">'1210'</font><font color="#000080">,</font><font color="#800000">'2120'</font><font color="#000080">,</font><font color="#800000">'2200'</font><font color="#000080">,</font><font color="#800000">'0220'</font><font color="#000080">,</font><font color="#800000">'2202'</font><font color="#000080">,
                     </font><font color="#800000">'0222'</font><font color="#000080">,</font><font color="#800000">'2220'</font><font color="#000080">,</font><font color="#800000">'0202'</font><font color="#000080">,</font><font color="#800000">'2222'</font><font color="#000080">,</font><font color="#800000">'1202'</font><font color="#000080">,</font><font color="#800000">'2101'</font><font color="#000080">,</font><font color="#800000">'0212'</font><font color="#000080">,</font><font color="#800000">'0121'</font><font color="#000080">,
                     </font><font color="#800000">'2100'</font><font color="#000080">,</font><font color="#800000">'1200'</font><font color="#000080">,</font><font color="#800000">'0210'</font><font color="#000080">,</font><font color="#800000">'0120'</font><font color="#000080">,</font><font color="#800000">'2121'</font><font color="#000080">,</font><font color="#800000">'1212'</font><font color="#000080">,</font><font color="#800000">'1001'</font><font color="#000080">,</font><font color="#800000">'0110'</font><font color="#000080">);

            </font><font color="#008000"><i>{THE SCREEN DIMENSIONS}
            </i></font>screenwidth<font color="#000080">=</font><font color="#800000">80</font><font color="#000080">;   </font>screenlength<font color="#000080">=</font><font color="#800000">25</font><font color="#000080">;

</font><font color="#008000"><i>{******}

{READS A CHARACTER FROM VIDEO MEMORY AT THE GIVEN COORDINANTS}
</i></font><font color="#FF0000"><b>function </b></font>Memread<font color="#000080">(</font>col<font color="#000080">,</font>row<font color="#000080">:</font>integer<font color="#000080">):</font>char<font color="#000080">;

  </font><font color="#FF0000"><b>Const
    </b></font>Seg <font color="#000080">= </font><font color="#800000">$B000</font><font color="#000080">; </font><font color="#008000"><i>{ Video memory address for color system  }
    </i></font>Ofs <font color="#000080">= </font><font color="#800000">$8000</font><font color="#000080">; </font><font color="#008000"><i>{ For monochrome system, make Ofs = $0000 }
  </i></font><font color="#FF0000"><b>Var
    </b></font>SChar <font color="#000080">: </font>Integer<font color="#000080">;
  </font><font color="#FF0000"><b>Begin
          </b></font>SChar <font color="#000080">:= ((</font>Row<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">)*</font><font color="#800000">160</font><font color="#000080">) + ((</font>Col<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">)*</font><font color="#800000">2</font><font color="#000080">); </font><font color="#008000"><i>{ Compute starting location }
          </i></font>memread<font color="#000080">:=</font>chr<font color="#000080">(</font>Mem<font color="#000080">[</font>Seg<font color="#000080">:</font>Ofs <font color="#000080">+ </font>SChar<font color="#000080">]);   </font><font color="#008000"><i>{ read character from memory}
  </i></font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#008000"><i>{******}

{WRITES A CHARACTER DIRECTORY TO VIDEO MEMORY AT THE GIVEN COORDINATES}
{NOTE: THE CURRENT COLORS AT THE GIVEN COORDINANTS ARE USED FOR DRAWING.}
</i></font><font color="#FF0000"><b>procedure </b></font>Memwrite<font color="#000080">(</font>col<font color="#000080">,</font>row<font color="#000080">:</font>integer<font color="#000080">; </font>c<font color="#000080">:</font>char<font color="#000080">);

  </font><font color="#FF0000"><b>Const
    </b></font>Seg <font color="#000080">= </font><font color="#800000">$B000</font><font color="#000080">; </font><font color="#008000"><i>{ Video memory address for color system  }
    </i></font>Ofs <font color="#000080">= </font><font color="#800000">$8000</font><font color="#000080">; </font><font color="#008000"><i>{ For monochrome system, make Ofs = $0000 }
  </i></font><font color="#FF0000"><b>Var
    </b></font>SChar <font color="#000080">: </font>Integer<font color="#000080">;
  </font><font color="#FF0000"><b>Begin
          </b></font>SChar <font color="#000080">:= ((</font>Row<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">)*</font><font color="#800000">160</font><font color="#000080">) + ((</font>Col<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">)*</font><font color="#800000">2</font><font color="#000080">); </font><font color="#008000"><i>{ Compute starting location }
          </i></font>Mem<font color="#000080">[</font>Seg<font color="#000080">:</font>Ofs <font color="#000080">+ </font>SChar<font color="#000080">]:=</font>ord<font color="#000080">(</font>c<font color="#000080">);         </font><font color="#008000"><i>{ write character to memory}
  </i></font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#008000"><i>{******}

   {PROCEDURE USED INTERNALLY TO CREATE A SET OF CHARACTER CODES}
   </i></font><font color="#FF0000"><b>function </b></font>getcode<font color="#000080">(</font>c<font color="#000080">:</font>char<font color="#000080">; </font>direction<font color="#000080">:</font>byte<font color="#000080">):</font>char<font color="#000080">;
   </font><font color="#FF0000"><b>var </b></font>counter<font color="#000080">:</font>integer<font color="#000080">;
   </font><font color="#FF0000"><b>begin
    </b></font>counter<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;
    </font><font color="#FF0000"><b>while </b></font><font color="#000080">(</font>counter<font color="#000080">&lt;=</font><font color="#800000">40</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>c<font color="#000080">&lt;&gt;</font>symbols<font color="#000080">[</font>counter<font color="#000080">]) </font><font color="#FF0000"><b>do </b></font>inc<font color="#000080">(</font>counter<font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font>counter<font color="#000080">&gt;</font><font color="#800000">40 </font><font color="#FF0000"><b>then </b></font>getcode<font color="#000080">:=</font><font color="#800000">'0' </font><font color="#FF0000"><b>else </b></font>getcode<font color="#000080">:=</font>codes<font color="#000080">[</font>counter<font color="#000080">,</font>direction<font color="#000080">];
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{******}

   {PROCEDURE DRAWS A LINE IN TEXT MODE FROM (X1,Y) TO (X2,Y)}
   {DEFAULT IS EITHER '1' OR '2' FOR SINGLE OF DOUBLE LINES}
   </i></font><font color="#FF0000"><b>procedure </b></font>horizline<font color="#000080">(</font>x1<font color="#000080">,</font>x2<font color="#000080">,</font>y<font color="#000080">:</font>integer<font color="#000080">; </font><font color="#FF0000"><b>default</b></font><font color="#000080">:</font>char<font color="#000080">);

    </font><font color="#FF0000"><b>var </b></font>code<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">4</font><font color="#000080">];
        </font>defaultchar<font color="#000080">:</font>char<font color="#000080">;
        </font>c<font color="#000080">,</font>index<font color="#000080">:</font>integer<font color="#000080">;
        </font>xpos<font color="#000080">,</font>ypos<font color="#000080">:</font>integer<font color="#000080">;

    </font><font color="#FF0000"><b>begin
     </b></font>xpos<font color="#000080">:=</font>wherex<font color="#000080">; </font>ypos<font color="#000080">:=</font>wherey<font color="#000080">;
     </font><font color="#FF0000"><b>if </b></font>x2<font color="#000080">&lt;</font>x1 <font color="#FF0000"><b>then begin </b></font>c<font color="#000080">:=</font>x1<font color="#000080">; </font>x1<font color="#000080">:=</font>x2<font color="#000080">; </font>x2<font color="#000080">:=</font>c<font color="#000080">; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
     </font><font color="#FF0000"><b>if default</b></font><font color="#000080">=</font><font color="#800000">'1' </font><font color="#FF0000"><b>then </b></font>defaultchar<font color="#000080">:=</font>symbols<font color="#000080">[</font><font color="#800000">18</font><font color="#000080">]
                    </font><font color="#FF0000"><b>else </b></font>defaultchar<font color="#000080">:=</font>symbols<font color="#000080">[</font><font color="#800000">27</font><font color="#000080">];
     </font><font color="#FF0000"><b>for </b></font>c<font color="#000080">:=</font>x1 <font color="#FF0000"><b>to </b></font>x2 <font color="#FF0000"><b>do
      begin
       </b></font>code<font color="#000080">:=</font><font color="#800000">'0000'</font><font color="#000080">;
       </font><font color="#FF0000"><b>if </b></font>y<font color="#000080">&lt;&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>code<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]:=</font>getcode<font color="#000080">(</font>memread<font color="#000080">(</font>c<font color="#000080">,</font>y<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">),</font><font color="#800000">3</font><font color="#000080">) </font><font color="#FF0000"><b>else </b></font>code<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]:=</font><font color="#800000">'0'</font><font color="#000080">;
       </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>c<font color="#000080">=</font>x2<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>x2<font color="#000080">=</font>screenwidth<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>code<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">]:=</font><font color="#800000">'0'
          </font><font color="#FF0000"><b>else if </b></font><font color="#000080">(</font>c<font color="#000080">=</font>x2<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>code<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">]:=</font>getcode<font color="#000080">(</font>memread<font color="#000080">(</font>x2<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,</font>y<font color="#000080">),</font><font color="#800000">4</font><font color="#000080">)
                         </font><font color="#FF0000"><b>else </b></font>code<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">]:=</font><font color="#FF0000"><b>default</b></font><font color="#000080">;
       </font><font color="#FF0000"><b>if </b></font>y<font color="#000080">&lt;&gt;</font>screenlength <font color="#FF0000"><b>then </b></font>code<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">]:=</font>getcode<font color="#000080">(</font>memread<font color="#000080">(</font>c<font color="#000080">,</font>y<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">),</font><font color="#800000">1</font><font color="#000080">)
                          </font><font color="#FF0000"><b>else </b></font>code<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">]:=</font><font color="#800000">'0'</font><font color="#000080">;
       </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>c<font color="#000080">=</font>x1<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>x1<font color="#000080">=</font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font>code<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">]:=</font><font color="#800000">'0'
          </font><font color="#FF0000"><b>else
           if </b></font><font color="#000080">(</font>c<font color="#000080">=</font>x1<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>code<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">]:=</font>getcode<font color="#000080">(</font>memread<font color="#000080">(</font>x1<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">,</font>y<font color="#000080">),</font><font color="#800000">2</font><font color="#000080">)
                     </font><font color="#FF0000"><b>else </b></font>code<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">]:=</font><font color="#FF0000"><b>default</b></font><font color="#000080">;
       </font>index<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;
       </font><font color="#FF0000"><b>while </b></font><font color="#000080">(</font>index<font color="#000080">&lt;=</font><font color="#800000">40</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>code<font color="#000080">&lt;&gt;</font>codes<font color="#000080">[</font>index<font color="#000080">]) </font><font color="#FF0000"><b>do </b></font>inc<font color="#000080">(</font>index<font color="#000080">);
       </font><font color="#FF0000"><b>if </b></font>writetomemory <font color="#FF0000"><b>then
         if </b></font>index<font color="#000080">&gt;</font><font color="#800000">40 </font><font color="#FF0000"><b>then </b></font>memwrite<font color="#000080">(</font>c<font color="#000080">,</font>y<font color="#000080">,</font>defaultchar<font color="#000080">)
                     </font><font color="#FF0000"><b>else </b></font>memwrite<font color="#000080">(</font>c<font color="#000080">,</font>y<font color="#000080">,</font>symbols<font color="#000080">[</font>index<font color="#000080">])
                   </font><font color="#FF0000"><b>else
         if </b></font>index<font color="#000080">&gt;</font><font color="#800000">40 </font><font color="#FF0000"><b>then begin </b></font>gotoxy<font color="#000080">(</font>c<font color="#000080">,</font>y<font color="#000080">); </font>write<font color="#000080">(</font>defaultchar<font color="#000080">); </font><font color="#FF0000"><b>end
                     else begin </b></font>gotoxy<font color="#000080">(</font>c<font color="#000080">,</font>y<font color="#000080">); </font>write<font color="#000080">(</font>symbols<font color="#000080">[</font>index<font color="#000080">]); </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{counter}
      </i></font><font color="#FF0000"><b>if not </b></font>writetomemory <font color="#FF0000"><b>then </b></font>gotoxy<font color="#000080">(</font>xpos<font color="#000080">,</font>ypos<font color="#000080">);
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{******}

   {PROCEDURE DRAWS A LINE IN TEXT MODE FROM (X,Y1) TO (X,Y2)}
   {DEFAULT IS EITHER '1' OR '2' FOR SINGLE OF DOUBLE LINES}
   </i></font><font color="#FF0000"><b>procedure </b></font>vertline<font color="#000080">(</font>x<font color="#000080">,</font>y1<font color="#000080">,</font>y2<font color="#000080">:</font>integer<font color="#000080">; </font><font color="#FF0000"><b>default</b></font><font color="#000080">:</font>char<font color="#000080">);

    </font><font color="#FF0000"><b>var </b></font>code<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">4</font><font color="#000080">];
        </font>defaultchar<font color="#000080">:</font>char<font color="#000080">;
        </font>c<font color="#000080">,</font>index<font color="#000080">:</font>integer<font color="#000080">;
        </font>xpos<font color="#000080">,</font>ypos<font color="#000080">:</font>integer<font color="#000080">;

    </font><font color="#FF0000"><b>begin
     </b></font>xpos<font color="#000080">:=</font>wherex<font color="#000080">; </font>ypos<font color="#000080">:=</font>wherey<font color="#000080">;
     </font><font color="#FF0000"><b>if </b></font>y2<font color="#000080">&lt;</font>y1 <font color="#FF0000"><b>then begin </b></font>c<font color="#000080">:=</font>y1<font color="#000080">; </font>y1<font color="#000080">:=</font>y2<font color="#000080">; </font>y2<font color="#000080">:=</font>c<font color="#000080">; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
     </font><font color="#FF0000"><b>if default</b></font><font color="#000080">=</font><font color="#800000">'1' </font><font color="#FF0000"><b>then </b></font>defaultchar<font color="#000080">:=</font>symbols<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]
                    </font><font color="#FF0000"><b>else </b></font>defaultchar<font color="#000080">:=</font>symbols<font color="#000080">[</font><font color="#800000">8</font><font color="#000080">];
     </font><font color="#FF0000"><b>for </b></font>c<font color="#000080">:=</font>y1 <font color="#FF0000"><b>to </b></font>y2 <font color="#FF0000"><b>do
      begin
       </b></font>code<font color="#000080">:=</font><font color="#800000">'0000'</font><font color="#000080">;
       </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>c<font color="#000080">=</font>y2<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>y2<font color="#000080">=</font>screenlength<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>code<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">]:=</font><font color="#800000">'0'
          </font><font color="#FF0000"><b>else if </b></font><font color="#000080">(</font>c<font color="#000080">=</font>y2<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>code<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">]:=</font>getcode<font color="#000080">(</font>memread<font color="#000080">(</font>x<font color="#000080">,</font>y2<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">),</font><font color="#800000">1</font><font color="#000080">)
                         </font><font color="#FF0000"><b>else </b></font>code<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">]:=</font><font color="#FF0000"><b>default</b></font><font color="#000080">;
       </font><font color="#FF0000"><b>if </b></font>x<font color="#000080">&lt;&gt;</font>screenwidth <font color="#FF0000"><b>then </b></font>code<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">]:=</font>getcode<font color="#000080">(</font>memread<font color="#000080">(</font>x<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,</font>c<font color="#000080">),</font><font color="#800000">4</font><font color="#000080">)
                         </font><font color="#FF0000"><b>else </b></font>code<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]:=</font><font color="#800000">'0'</font><font color="#000080">;
       </font><font color="#FF0000"><b>if </b></font>x<font color="#000080">&lt;&gt;</font><font color="#800000">1 </font><font color="#FF0000"><b>then </b></font>code<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">]:=</font>getcode<font color="#000080">(</font>memread<font color="#000080">(</font>x<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">,</font>c<font color="#000080">),</font><font color="#800000">2</font><font color="#000080">)
               </font><font color="#FF0000"><b>else </b></font>code<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]:=</font><font color="#800000">'0'</font><font color="#000080">;
       </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>c<font color="#000080">=</font>y1<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>y1<font color="#000080">=</font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font>code<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]:=</font><font color="#800000">'0'
          </font><font color="#FF0000"><b>else if </b></font><font color="#000080">(</font>c<font color="#000080">=</font>y1<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>code<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]:=</font>getcode<font color="#000080">(</font>memread<font color="#000080">(</font>x<font color="#000080">,</font>y1<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">),</font><font color="#800000">3</font><font color="#000080">)
                         </font><font color="#FF0000"><b>else </b></font>code<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]:=</font><font color="#FF0000"><b>default</b></font><font color="#000080">;
       </font>index<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;
       </font><font color="#FF0000"><b>while </b></font><font color="#000080">(</font>index<font color="#000080">&lt;=</font><font color="#800000">40</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>code<font color="#000080">&lt;&gt;</font>codes<font color="#000080">[</font>index<font color="#000080">]) </font><font color="#FF0000"><b>do </b></font>inc<font color="#000080">(</font>index<font color="#000080">);

       </font><font color="#FF0000"><b>if </b></font>writetomemory <font color="#FF0000"><b>then
             if </b></font>index<font color="#000080">&gt;</font><font color="#800000">40 </font><font color="#FF0000"><b>then </b></font>memwrite<font color="#000080">(</font>x<font color="#000080">,</font>c<font color="#000080">,</font>defaultchar<font color="#000080">)
                         </font><font color="#FF0000"><b>else </b></font>memwrite<font color="#000080">(</font>x<font color="#000080">,</font>c<font color="#000080">,</font>symbols<font color="#000080">[</font>index<font color="#000080">])
                        </font><font color="#FF0000"><b>else
             if </b></font>index<font color="#000080">&gt;</font><font color="#800000">40 </font><font color="#FF0000"><b>then begin </b></font>gotoxy<font color="#000080">(</font>x<font color="#000080">,</font>c<font color="#000080">); </font>write<font color="#000080">(</font>defaultchar<font color="#000080">) </font><font color="#FF0000"><b>end
                         else begin </b></font>gotoxy<font color="#000080">(</font>x<font color="#000080">,</font>c<font color="#000080">); </font>write<font color="#000080">(</font>symbols<font color="#000080">[</font>index<font color="#000080">]); </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{counter}
     </i></font><font color="#FF0000"><b>if not </b></font>writetomemory <font color="#FF0000"><b>then </b></font>gotoxy<font color="#000080">(</font>xpos<font color="#000080">,</font>ypos<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{******}

   {PROCEDURE DRAWS A RECTANGLE IN TEXT MODE}
   {DEFAULT IS EITHER '1' OR '2' FOR SINGLE OF DOUBLE LINES}
   </i></font><font color="#FF0000"><b>procedure </b></font>rectlines<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">:</font>integer<font color="#000080">; </font><font color="#FF0000"><b>default</b></font><font color="#000080">:</font>char<font color="#000080">);

   </font><font color="#FF0000"><b>begin
    </b></font>horizline<font color="#000080">(</font>x1<font color="#000080">,</font>x2<font color="#000080">,</font>y1<font color="#000080">,</font><font color="#FF0000"><b>default</b></font><font color="#000080">);
    </font>horizline<font color="#000080">(</font>x1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">,</font><font color="#FF0000"><b>default</b></font><font color="#000080">);
    </font>vertline<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>y2<font color="#000080">,</font><font color="#FF0000"><b>default</b></font><font color="#000080">);
    </font>vertline<font color="#000080">(</font>x2<font color="#000080">,</font>y1<font color="#000080">,</font>y2<font color="#000080">,</font><font color="#FF0000"><b>default</b></font><font color="#000080">);
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{******}

 </i></font><font color="#FF0000"><b>begin
  </b></font>writetomemory<font color="#000080">:=</font>false<font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">. </font><font color="#008000"><i>{unit}


 {-------------------   DEMO PROGRAM ------------------------}
 { ----------------      CUT HERE  --------------------------}

 { WRITTEN BY TIM SCHEMPP
  OCTOBER 21, 1993       }

   {THIS PROGRAM DEMONSTARTES THE USE OF THE UNIT drawline.  UNIT DRAWLINE
    WILL USE THE ASCII SET TO DRAW LINES.  WHEN LINE INTERSECTIONS ARE
    FOUND, THE PROCEDURES DESCIDE WHICH CHARACTER FITS BEST.  THUS MAKING
    IT VERY EASY TO CREATE VARIOUS TABLES AND OTHER SCREEN SET UPS.  THE
    UNIT ALSO HAS THE ABILITY TO WRITE DIRECTORY TO VIDEO MEMORY FOR
    A 15% TO 20% IMPROVEMENT IN SPEED.  SEE DRAWLINE.DOC FOR MORE INFO.}

</i></font><font color="#FF0000"><b>program </b></font>demo<font color="#000080">;

 </font><font color="#FF0000"><b>uses </b></font>crt<font color="#000080">,</font>drawline<font color="#000080">;

 </font><font color="#FF0000"><b>var </b></font>counter<font color="#000080">:</font>integer<font color="#000080">;

 </font><font color="#FF0000"><b>begin
  </b></font><font color="#008000"><i>{SET THE SCREEN UP}
  </i></font>textbackground<font color="#000080">(</font>black<font color="#000080">);
  </font>textcolor<font color="#000080">(</font>white<font color="#000080">);
  </font>clrscr<font color="#000080">;

  </font><font color="#008000"><i>{THE CALL TO CLEAR SCREEN FILLED THE SCREEN WITH SPACES WITH A BLACK
   BACKGROUND AND A WHITE FOREGROUND.  IF writetomemory IS SET TO TRUE,
   ALL OF THE OUTPUT WILL BE WRITTEN WITH A BLACK BACKGROUND AND A WHITE
   FOREGROUND REGARDLESS OF TEXT ATTRIBUTE CHANGES.}

  {writetomemory:=true;} { &lt;--- ADD THIS STATEMENT AND SEE COLOR DIFFERENCE}

  {WRITE SOME TEXT}
   </i></font>gotoxy<font color="#000080">(</font><font color="#800000">22</font><font color="#000080">,</font><font color="#800000">6</font><font color="#000080">);
   </font>textcolor<font color="#000080">(</font>lightblue<font color="#000080">);
   </font>write<font color="#000080">(</font><font color="#800000">'LINE DRAWING DEMONSTARTATION PROGRAM'</font><font color="#000080">);
   </font>textcolor<font color="#000080">(</font>yellow<font color="#000080">);
  </font><font color="#008000"><i>{DRAW A RECTANGLE WITH DOUBLE LINES}
  </i></font>rectlines<font color="#000080">(</font><font color="#800000">10</font><font color="#000080">,</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">70</font><font color="#000080">,</font><font color="#800000">20</font><font color="#000080">,</font><font color="#800000">'2'</font><font color="#000080">);
  </font><font color="#008000"><i>{DRAW SOME HORIZONTAL SINGLE LINES}
  </i></font><font color="#FF0000"><b>for </b></font>counter<font color="#000080">:=</font><font color="#800000">9 </font><font color="#FF0000"><b>to </b></font><font color="#800000">19 </font><font color="#FF0000"><b>do
   </b></font>horizline<font color="#000080">(</font><font color="#800000">10</font><font color="#000080">,</font><font color="#800000">70</font><font color="#000080">,</font>counter<font color="#000080">,</font><font color="#800000">'1'</font><font color="#000080">);
  </font><font color="#008000"><i>{DRAW SOME SINGLE VERTICLE LINES}
   </i></font>counter<font color="#000080">:=</font><font color="#800000">20</font><font color="#000080">;
   </font><font color="#FF0000"><b>while </b></font>counter<font color="#000080">&lt;=</font><font color="#800000">60 </font><font color="#FF0000"><b>do
    begin
     </b></font>vertline<font color="#000080">(</font>counter<font color="#000080">,</font><font color="#800000">8</font><font color="#000080">,</font><font color="#800000">20</font><font color="#000080">,</font><font color="#800000">'1'</font><font color="#000080">);
     </font>inc<font color="#000080">(</font>counter<font color="#000080">,</font><font color="#800000">10</font><font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{WHILE}
  {DRAW ONE LAST HORIZONTAL DOUBLE LINE}
   </i></font>horizline<font color="#000080">(</font><font color="#800000">10</font><font color="#000080">,</font><font color="#800000">70</font><font color="#000080">,</font><font color="#800000">8</font><font color="#000080">,</font><font color="#800000">'2'</font><font color="#000080">);

  </font><font color="#FF0000"><b>repeat until </b></font>keypressed<font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">.</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to TEXTWNDW SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0011.PAS">Original</a><b>]</b></p></body>
</html>
