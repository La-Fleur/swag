<html>
<head><title> "WINDOWS1.PAS" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to TEXTWNDW SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0004.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt;   Okay...it works fine, but I want to somehow be able to kindo of remove t
&gt; Window.  I'm not sure if there is any way of doing this?

You need to save the screen data at the location you wish to make
a Window, then after you're done With the Window simply restore
the screen data back to what it was.  Here's some example
routines of what you can do, you must call InitWindows once at
the begining of the Program before using the OpenWindow
Procedure, then CloseWindow to restore the screen.
}

</i></font><font color="#FF0000"><b>Uses
  </b></font>Crt<font color="#000080">;

</font><font color="#FF0000"><b>Type
  </b></font>ShadeType <font color="#000080">= (</font>Shading<font color="#000080">, </font>NoShading<font color="#000080">);
  </font>ScreenBlock <font color="#000080">= </font><font color="#FF0000"><b>Array </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">2000</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Integer<font color="#000080">;
  </font>ScreenLine  <font color="#000080">= </font><font color="#FF0000"><b>Array </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">80</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Word<font color="#000080">;
  </font>ScreenArray <font color="#000080">= </font><font color="#FF0000"><b>Array </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">25</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>ScreenLine<font color="#000080">;
  </font>WindowLink  <font color="#000080">= ^</font>WindowControlBlock<font color="#000080">;
  </font>WindowControlBlock <font color="#000080">= </font><font color="#FF0000"><b>Record
    </b></font>X<font color="#000080">,</font>Y      <font color="#000080">: </font>Byte<font color="#000080">;          </font><font color="#008000"><i>{ start position }
    </i></font>Hight    <font color="#000080">: </font>Byte<font color="#000080">;          </font><font color="#008000"><i>{ Menu Hight     }
    </i></font>Width    <font color="#000080">: </font>Byte<font color="#000080">;          </font><font color="#008000"><i>{ Menu width     }
    </i></font>ID       <font color="#000080">: </font>Byte<font color="#000080">;          </font><font color="#008000"><i>{ Menu number    }
    </i></font>BackLink <font color="#000080">: </font>WindowLink<font color="#000080">;    </font><font color="#008000"><i>{ previous block }
    </i></font>MenuItem <font color="#000080">: </font>Byte<font color="#000080">;          </font><font color="#008000"><i>{ select item    }
    </i></font>ScreenData <font color="#000080">: </font>ScreenBlock<font color="#000080">; </font><font color="#008000"><i>{ saved screen data }
  </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>String30 <font color="#000080">= </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">30</font><font color="#000080">];
  </font>ScreenPtr <font color="#000080">= ^</font>ScreenRec<font color="#000080">;
  </font>ScreenRec <font color="#000080">= </font><font color="#FF0000"><b>Array </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">25</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">80</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Integer<font color="#000080">;


</font><font color="#FF0000"><b>Var
  </b></font>Screen       <font color="#000080">: </font>ScreenPtr<font color="#000080">;
  </font>ActiveWindow <font color="#000080">: </font>Pointer<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>InitWindows<font color="#000080">;
</font><font color="#FF0000"><b>begin
  If </b></font>LastMode <font color="#000080">= </font>Mono <font color="#FF0000"><b>Then
    </b></font>Screen <font color="#000080">:= </font>Ptr<font color="#000080">(</font><font color="#800000">$B000</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">)
  </font><font color="#FF0000"><b>Else
    </b></font>Screen <font color="#000080">:= </font>Ptr<font color="#000080">(</font><font color="#800000">$B800</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
  </font>ActiveWindow <font color="#000080">:= </font><font color="#FF0000"><b>Nil</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>OpenWindow<font color="#000080">(</font>X<font color="#000080">, </font>Y<font color="#000080">, </font>Lines<font color="#000080">, </font>Columns<font color="#000080">, </font>FrameColor<font color="#000080">,
                     </font>ForeGround<font color="#000080">, </font>BackGround <font color="#000080">: </font>Byte<font color="#000080">;
                     </font>Title <font color="#000080">: </font>String30<font color="#000080">; </font>Shade <font color="#000080">: </font>ShadeType<font color="#000080">);
</font><font color="#FF0000"><b>Var
  </b></font>A<font color="#000080">, </font>X1<font color="#000080">, </font>X2<font color="#000080">,
  </font>Y1<font color="#000080">, </font>Y2        <font color="#000080">: </font>Integer<font color="#000080">;
  </font>OldAttr       <font color="#000080">: </font>Integer<font color="#000080">;
  </font>WindowSize    <font color="#000080">: </font>Integer<font color="#000080">;
  </font>Block         <font color="#000080">: </font>WindowLink<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>OldAttr <font color="#000080">:= </font>TextAttr<font color="#000080">;

  </font>WindowSize <font color="#000080">:= (</font>Lines <font color="#000080">+ </font><font color="#800000">3</font><font color="#000080">) * (</font>Columns <font color="#000080">+ </font><font color="#800000">5</font><font color="#000080">) * </font><font color="#800000">2 </font><font color="#000080">+
                 </font>Sizeof<font color="#000080">(</font>WindowControlBlock<font color="#000080">) - </font>Sizeof<font color="#000080">(</font>ScreenBlock<font color="#000080">);

  </font><font color="#FF0000"><b>If </b></font>MemAvail <font color="#000080">&lt; </font>WindowSize <font color="#FF0000"><b>Then
  begin
    </b></font>WriteLn<font color="#000080">;</font>WriteLn<font color="#000080">(</font><font color="#800000">'Program out of memory'</font><font color="#000080">);
    </font>Halt<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>GetMem<font color="#000080">(</font>Block<font color="#000080">,</font>WindowSize<font color="#000080">);
  </font>Block<font color="#000080">^.</font>X <font color="#000080">:= </font>X <font color="#000080">- </font><font color="#800000">2</font><font color="#000080">;
  </font>Block<font color="#000080">^.</font>Y <font color="#000080">:= </font>Y <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
  </font>Block<font color="#000080">^.</font>Hight <font color="#000080">:= </font>Lines <font color="#000080">+ </font><font color="#800000">3</font><font color="#000080">;
  </font>Block<font color="#000080">^.</font>Width <font color="#000080">:= </font>Columns <font color="#000080">+ </font><font color="#800000">5</font><font color="#000080">;
  </font>Block<font color="#000080">^.</font>BackLink <font color="#000080">:= </font>ActiveWindow<font color="#000080">;

  </font>ActiveWindow <font color="#000080">:= </font>Block<font color="#000080">;
  </font>A <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
  </font><font color="#FF0000"><b>For </b></font>Y1 <font color="#000080">:= </font>Block<font color="#000080">^.</font>Y <font color="#FF0000"><b>to </b></font>Block<font color="#000080">^.</font>Y<font color="#000080">+</font>Block<font color="#000080">^.</font>Hight<font color="#000080">-</font><font color="#800000">1 </font><font color="#FF0000"><b>Do
  begin
    </b></font>Move<font color="#000080">(</font>Screen<font color="#000080">^[</font>Y1<font color="#000080">, </font>Block<font color="#000080">^.</font>X<font color="#000080">], </font>Block<font color="#000080">^.</font>ScreenData<font color="#000080">[</font>A<font color="#000080">], </font>Block<font color="#000080">^.</font>Width <font color="#000080">* </font><font color="#800000">2</font><font color="#000080">);
    </font>A <font color="#000080">:= </font>A <font color="#000080">+ </font>Block<font color="#000080">^.</font>Width<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>TextColor<font color="#000080">(</font>FrameColor<font color="#000080">);
  </font><font color="#FF0000"><b>If </b></font>BackGround <font color="#000080">= </font>Black <font color="#FF0000"><b>Then
    </b></font>TextBackGround<font color="#000080">(</font>LightGray<font color="#000080">)    </font><font color="#008000"><i>{ This will keep exploding Window visable }
  </i></font><font color="#FF0000"><b>Else
    </b></font>TextBackground<font color="#000080">(</font>BackGround<font color="#000080">);

  </font>X1 <font color="#000080">:= </font>X <font color="#000080">+ </font>Columns <font color="#FF0000"><b>Div </b></font><font color="#800000">2</font><font color="#000080">;
  </font>X2 <font color="#000080">:= </font>X1 <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
  </font>Y1 <font color="#000080">:= </font>Y <font color="#000080">+ </font>Lines <font color="#FF0000"><b>Div </b></font><font color="#800000">2</font><font color="#000080">;
  </font>Y2 <font color="#000080">:= </font>Y1 <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;

  </font><font color="#FF0000"><b>Repeat
    </b></font>Window<font color="#000080">(</font>X1<font color="#000080">, </font>Y1<font color="#000080">, </font>X2<font color="#000080">, </font>Y2<font color="#000080">);
    </font>ClrScr<font color="#000080">;
    </font><font color="#FF0000"><b>If </b></font>Columns <font color="#000080">&lt; </font><font color="#800000">20 </font><font color="#FF0000"><b>Then
      </b></font>Delay<font color="#000080">(</font><font color="#800000">20</font><font color="#000080">);
    </font><font color="#FF0000"><b>If </b></font>X1 <font color="#000080">&gt; </font>X <font color="#FF0000"><b>Then
      </b></font>Dec<font color="#000080">(</font>X1<font color="#000080">);
    </font><font color="#FF0000"><b>If </b></font>X2 <font color="#000080">&lt; </font>X <font color="#000080">+ </font>Columns <font color="#FF0000"><b>Then
      </b></font>Inc<font color="#000080">(</font>X2<font color="#000080">);
    </font><font color="#FF0000"><b>If </b></font>Y1 <font color="#000080">&gt; </font>Y <font color="#FF0000"><b>Then
      </b></font>Dec<font color="#000080">(</font>Y1<font color="#000080">);
    </font><font color="#FF0000"><b>If </b></font>Y2 <font color="#000080">&lt; </font>Y <font color="#000080">+ </font>Lines <font color="#FF0000"><b>Then
      </b></font>Inc<font color="#000080">(</font>Y2<font color="#000080">);
  </font><font color="#FF0000"><b>Until </b></font><font color="#000080">(</font>X2 <font color="#000080">- </font>X1 <font color="#000080">&gt;= </font>Columns <font color="#000080">) </font><font color="#FF0000"><b>And </b></font><font color="#000080">(</font>Y2 <font color="#000080">- </font>Y1 <font color="#000080">&gt;= </font>Lines<font color="#000080">);

  </font>Window<font color="#000080">(</font>X <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">, </font>Y<font color="#000080">, </font>X <font color="#000080">+ </font>Columns<font color="#000080">, </font>Y <font color="#000080">+ </font>Lines<font color="#000080">);
  </font>TextBackground<font color="#000080">(</font>BackGround<font color="#000080">);
  </font>ClrScr<font color="#000080">;
  </font>TextColor<font color="#000080">(</font>FrameColor<font color="#000080">);
  </font>Window<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">80</font><font color="#000080">, </font><font color="#800000">24</font><font color="#000080">);
  </font>GotoXY<font color="#000080">(</font>X <font color="#000080">- </font><font color="#800000">2</font><font color="#000080">, </font>Y <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">);
  </font>Write<font color="#000080">(</font><font color="#800000">'&Uacute;'</font><font color="#000080">);
  </font><font color="#FF0000"><b>For </b></font>A <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>Columns <font color="#000080">+ </font><font color="#800000">2 </font><font color="#FF0000"><b>Do
    </b></font>Write<font color="#000080">(</font><font color="#800000">'&Auml;'</font><font color="#000080">);

  </font>Write<font color="#000080">(</font><font color="#800000">'&iquest;'</font><font color="#000080">);
  </font><font color="#FF0000"><b>For </b></font>A <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>Lines <font color="#FF0000"><b>Do
  begin
    </b></font>GotoXY<font color="#000080">(</font>X <font color="#000080">- </font><font color="#800000">2</font><font color="#000080">, </font>Y <font color="#000080">+ </font>A <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">);
    </font>Write<font color="#000080">(</font><font color="#800000">'&sup3;'</font><font color="#000080">);
    </font>GotoXY<font color="#000080">(</font>X <font color="#000080">+ </font>Columns <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">, </font>Y <font color="#000080">+ </font>A <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">);
    </font>Write<font color="#000080">(</font><font color="#800000">'&sup3;'</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>GotoXY<font color="#000080">(</font>X <font color="#000080">- </font><font color="#800000">2</font><font color="#000080">, </font>Y <font color="#000080">+ </font>Lines<font color="#000080">);
  </font>Write<font color="#000080">(</font><font color="#800000">'&Agrave;'</font><font color="#000080">);
  </font><font color="#FF0000"><b>For </b></font>A <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>Columns <font color="#000080">+ </font><font color="#800000">2 </font><font color="#FF0000"><b>Do
    </b></font>Write<font color="#000080">(</font><font color="#800000">'&Auml;'</font><font color="#000080">);
  </font>Write<font color="#000080">(</font><font color="#800000">'&Ugrave;'</font><font color="#000080">);
  </font><font color="#FF0000"><b>If </b></font>Shade <font color="#000080">= </font>Shading <font color="#FF0000"><b>Then
  begin
    For </b></font>A <font color="#000080">:= </font>Y <font color="#FF0000"><b>to </b></font>Y <font color="#000080">+ </font>Lines <font color="#000080">+ </font><font color="#800000">1 </font><font color="#FF0000"><b>Do
      </b></font>Screen<font color="#000080">^[</font>A<font color="#000080">, </font>X <font color="#000080">+ </font>Columns <font color="#000080">+ </font><font color="#800000">2</font><font color="#000080">] := </font>Screen<font color="#000080">^[</font>A<font color="#000080">, </font>X <font color="#000080">+ </font>Columns <font color="#000080">+ </font><font color="#800000">2</font><font color="#000080">] </font><font color="#FF0000"><b>And </b></font><font color="#800000">$07FF</font><font color="#000080">;
    </font><font color="#FF0000"><b>For </b></font>A <font color="#000080">:= </font>X <font color="#000080">- </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>X <font color="#000080">+ </font>Columns <font color="#000080">+ </font><font color="#800000">1 </font><font color="#FF0000"><b>Do
      </b></font>Screen<font color="#000080">^[</font>Y <font color="#000080">+ </font>Lines <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">, </font>A<font color="#000080">] := </font>Screen<font color="#000080">^[</font>Y <font color="#000080">+ </font>Lines <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">, </font>A<font color="#000080">] </font><font color="#FF0000"><b>And </b></font><font color="#800000">$07FF</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>If </b></font>Title <font color="#000080">&lt;&gt; </font><font color="#800000">'' </font><font color="#FF0000"><b>Then
  begin
    </b></font>TextColor<font color="#000080">(</font>FrameColor<font color="#000080">);
    </font>GotoXY<font color="#000080">(</font>X <font color="#000080">+ ((</font>Columns <font color="#000080">- </font>Length<font color="#000080">(</font>Title<font color="#000080">)) </font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">) - </font><font color="#800000">1</font><font color="#000080">, </font>Y <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">);
    </font>Write<font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">, </font>Title<font color="#000080">, </font><font color="#800000">' '</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>Window<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">80</font><font color="#000080">, </font><font color="#800000">24</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>CloseWindow<font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>Block   <font color="#000080">: </font>WindowLink<font color="#000080">;
  </font>A       <font color="#000080">: </font>Integer<font color="#000080">;
  </font>Y1      <font color="#000080">: </font>Integer<font color="#000080">;
  </font>WindowSize <font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  If </b></font>ActiveWindow <font color="#000080">= </font><font color="#FF0000"><b>Nil Then
    </b></font>Exit<font color="#000080">;
  </font>Block <font color="#000080">:= </font>ActiveWindow<font color="#000080">;
  </font>WindowSize <font color="#000080">:= (</font>Block<font color="#000080">^.</font>Hight<font color="#000080">) * (</font>Block<font color="#000080">^.</font>Width<font color="#000080">) * </font><font color="#800000">2 </font><font color="#000080">+
                 </font>Sizeof<font color="#000080">(</font>WindowControlBlock<font color="#000080">) - </font>Sizeof<font color="#000080">(</font>ScreenBlock<font color="#000080">);
  </font>A <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
  </font><font color="#FF0000"><b>For </b></font>Y1 <font color="#000080">:= </font>Block<font color="#000080">^.</font>Y <font color="#FF0000"><b>to </b></font>Block<font color="#000080">^.</font>Y<font color="#000080">+</font>Block<font color="#000080">^.</font>Hight <font color="#000080">- </font><font color="#800000">1 </font><font color="#FF0000"><b>Do
    begin
    </b></font>Move<font color="#000080">(</font>Block<font color="#000080">^.</font>ScreenData<font color="#000080">[</font>A<font color="#000080">], </font>Screen<font color="#000080">^[</font>Y1<font color="#000080">, </font>Block<font color="#000080">^.</font>X<font color="#000080">], </font>Block<font color="#000080">^.</font>Width <font color="#000080">* </font><font color="#800000">2</font><font color="#000080">);
    </font>A <font color="#000080">:= </font>A <font color="#000080">+ </font>Block<font color="#000080">^.</font>Width<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>ActiveWindow <font color="#000080">:= </font>Block<font color="#000080">^.</font>BackLink<font color="#000080">;
  </font>FreeMem<font color="#000080">(</font>Block<font color="#000080">, </font>WindowSize<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>InitWindows<font color="#000080">;
  </font>OpenWindow<font color="#000080">(</font><font color="#800000">10</font><font color="#000080">, </font><font color="#800000">5</font><font color="#000080">, </font><font color="#800000">10</font><font color="#000080">, </font><font color="#800000">50</font><font color="#000080">, </font>LightGreen<font color="#000080">, </font>LightBlue<font color="#000080">, </font>Magenta<font color="#000080">,
                     </font><font color="#800000">'Test Window'</font><font color="#000080">, </font>Shading<font color="#000080">);
  </font>ReadKey<font color="#000080">;
  </font>OpenWindow<font color="#000080">(</font><font color="#800000">20</font><font color="#000080">, </font><font color="#800000">6</font><font color="#000080">, </font><font color="#800000">6</font><font color="#000080">, </font><font color="#800000">30</font><font color="#000080">, </font>Green<font color="#000080">, </font>Yellow<font color="#000080">, </font>Blue<font color="#000080">,
                     </font><font color="#800000">'Test Window 2'</font><font color="#000080">, </font>Shading<font color="#000080">);
  </font>ReadKey<font color="#000080">;
  </font>CloseWindow<font color="#000080">;
  </font>ReadKey<font color="#000080">;
  </font>CloseWindow<font color="#000080">;
  </font>ReadKey<font color="#000080">;
  </font>GotoXY<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">24</font><font color="#000080">);

</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to TEXTWNDW SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0004.PAS">Original</a><b>]</b></p></body>
</html>
