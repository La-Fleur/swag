<html>
<head><title> "Texty Window Management" by SUNE MARCHER</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to TEXTWNDW SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0026.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>unit </b></font>txtwin<font color="#000080">;

</font><font color="#FF0000"><b>INTERFACE

type
  </b></font>psave<font color="#000080">=^</font>tsave<font color="#000080">;
  </font>tsave<font color="#000080">=</font><font color="#FF0000"><b>record
          </b></font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">:</font>word<font color="#000080">;
          </font>saved<font color="#000080">:</font>pointer<font color="#000080">;
          </font>active<font color="#000080">:</font>boolean<font color="#000080">;
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>wintype<font color="#000080">=</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">6</font><font color="#000080">]</font><font color="#FF0000"><b>of </b></font>char<font color="#000080">;
  </font>pwin<font color="#000080">=^</font>twin<font color="#000080">;
  </font>twin<font color="#000080">=</font><font color="#FF0000"><b>record
         </b></font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">:</font>word<font color="#000080">;
         </font>f1<font color="#000080">,</font>b1<font color="#000080">:</font>byte<font color="#000080">;
         </font>screen<font color="#000080">:</font>psave<font color="#000080">;
         </font>active<font color="#000080">:</font>boolean<font color="#000080">;
         </font>wint<font color="#000080">:</font>wintype<font color="#000080">;
       </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>const
  </b></font>normal<font color="#000080">:</font>wintype<font color="#000080">=(</font><font color="#800000">'&Uacute;'</font><font color="#000080">,</font><font color="#800000">'&iquest;'</font><font color="#000080">,</font><font color="#800000">'&Agrave;'</font><font color="#000080">,</font><font color="#800000">'&Ugrave;'</font><font color="#000080">,</font><font color="#800000">'&Auml;'</font><font color="#000080">,</font><font color="#800000">'&sup3;'</font><font color="#000080">);
  </font>double<font color="#000080">:</font>wintype<font color="#000080">=(</font><font color="#800000">'&Eacute;'</font><font color="#000080">,</font><font color="#800000">'&raquo;'</font><font color="#000080">,</font><font color="#800000">'&Egrave;'</font><font color="#000080">,</font><font color="#800000">'&frac14;'</font><font color="#000080">,</font><font color="#800000">'&Iacute;'</font><font color="#000080">,</font><font color="#800000">'&ordm;'</font><font color="#000080">);

</font><font color="#FF0000"><b>procedure </b></font>initback<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>sav<font color="#000080">:</font>psave<font color="#000080">);
</font><font color="#FF0000"><b>procedure </b></font>saveback<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>sav<font color="#000080">:</font>psave<font color="#000080">;</font>xx1<font color="#000080">,</font>yy1<font color="#000080">,</font>xx2<font color="#000080">,</font>yy2<font color="#000080">:</font>word<font color="#000080">);
</font><font color="#FF0000"><b>procedure </b></font>resback<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>sav<font color="#000080">:</font>psave<font color="#000080">);
</font><font color="#FF0000"><b>procedure </b></font>initwin<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>win<font color="#000080">:</font>pwin<font color="#000080">);
</font><font color="#FF0000"><b>procedure </b></font>drawwin<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>win<font color="#000080">:</font>pwin<font color="#000080">; </font>xx1<font color="#000080">,</font>yy1<font color="#000080">,</font>xx2<font color="#000080">,</font>yy2<font color="#000080">:</font>word<font color="#000080">; </font>ff1<font color="#000080">,</font>bb1<font color="#000080">:</font>byte<font color="#000080">;</font>wt<font color="#000080">:</font>wintype<font color="#000080">);
</font><font color="#FF0000"><b>procedure </b></font>shade<font color="#000080">(</font>x1<font color="#000080">,</font>x2<font color="#000080">,</font>y<font color="#000080">:</font>word<font color="#000080">);
</font><font color="#FF0000"><b>procedure </b></font>closewin<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>win<font color="#000080">:</font>pwin<font color="#000080">);
</font><font color="#FF0000"><b>procedure </b></font>redrawwin<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>win<font color="#000080">:</font>pwin<font color="#000080">);

</font><font color="#FF0000"><b>IMPLEMENTATION

procedure </b></font>initback<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>sav<font color="#000080">:</font>psave<font color="#000080">);
</font><font color="#FF0000"><b>begin
  with </b></font>sav<font color="#000080">^ </font><font color="#FF0000"><b>do
  begin
    </b></font>active<font color="#000080">:=</font>false<font color="#000080">;
    </font>x1<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">; </font>y1<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">; </font>x2<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">; </font>y2<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>saveback<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>sav<font color="#000080">:</font>psave<font color="#000080">;</font>xx1<font color="#000080">,</font>yy1<font color="#000080">,</font>xx2<font color="#000080">,</font>yy2<font color="#000080">:</font>word<font color="#000080">);
</font><font color="#FF0000"><b>var
  </b></font>y<font color="#000080">,</font>w<font color="#000080">,</font>o<font color="#000080">:</font>word<font color="#000080">;
</font><font color="#FF0000"><b>begin
  with </b></font>sav<font color="#000080">^ </font><font color="#FF0000"><b>do
  begin
    if</b></font><font color="#000080">(</font>active<font color="#000080">)</font><font color="#FF0000"><b>then </b></font>exit<font color="#000080">;
    </font>x1<font color="#000080">:=</font>xx1<font color="#000080">; </font>y1<font color="#000080">:=</font>yy1<font color="#000080">;
    </font>x2<font color="#000080">:=</font>xx2<font color="#000080">; </font>y2<font color="#000080">:=</font>yy2<font color="#000080">;
    </font>w<font color="#000080">:=</font>succ<font color="#000080">(</font>x2<font color="#000080">-</font>x1<font color="#000080">)*</font><font color="#800000">2</font><font color="#000080">;
    </font>getmem<font color="#000080">(</font>saved<font color="#000080">,</font>w<font color="#000080">*</font>succ<font color="#000080">(</font>y2<font color="#000080">-</font>y1<font color="#000080">));
    </font>active<font color="#000080">:=</font>true<font color="#000080">;
    </font>o<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
    </font><font color="#FF0000"><b>for </b></font>y<font color="#000080">:=</font>y1 <font color="#FF0000"><b>to </b></font>y2 <font color="#FF0000"><b>do
    begin
      </b></font>move<font color="#000080">(</font>mem<font color="#000080">[</font>segb800<font color="#000080">:</font>pred<font color="#000080">(</font>y<font color="#000080">)*</font><font color="#800000">160</font><font color="#000080">+</font>pred<font color="#000080">(</font>x1<font color="#000080">)],</font>mem<font color="#000080">[</font>seg<font color="#000080">(</font>saved<font color="#000080">^):</font>ofs<font color="#000080">(</font>saved<font color="#000080">^)+</font>o<font color="#000080">],</font>w<font color="#000080">);
      </font>inc<font color="#000080">(</font>o<font color="#000080">,</font>w<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>resback<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>sav<font color="#000080">:</font>psave<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>y<font color="#000080">,</font>w<font color="#000080">,</font>o<font color="#000080">:</font>word<font color="#000080">;
</font><font color="#FF0000"><b>begin
  with </b></font>sav<font color="#000080">^ </font><font color="#FF0000"><b>do
  begin
    if not</b></font><font color="#000080">(</font>active<font color="#000080">)</font><font color="#FF0000"><b>then </b></font>exit<font color="#000080">;
    </font>w<font color="#000080">:=</font>succ<font color="#000080">(</font>x2<font color="#000080">-</font>x1<font color="#000080">)*</font><font color="#800000">2</font><font color="#000080">;
    </font>o<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
    </font><font color="#FF0000"><b>for </b></font>y<font color="#000080">:=</font>y1 <font color="#FF0000"><b>to </b></font>y2 <font color="#FF0000"><b>do
    begin
      </b></font>move<font color="#000080">(</font>mem<font color="#000080">[</font>seg<font color="#000080">(</font>saved<font color="#000080">^):</font>ofs<font color="#000080">(</font>saved<font color="#000080">^)+</font>o<font color="#000080">],</font>mem<font color="#000080">[</font>segb800<font color="#000080">:</font>pred<font color="#000080">(</font>y<font color="#000080">)*</font><font color="#800000">160</font><font color="#000080">+</font>pred<font color="#000080">(</font>x1<font color="#000080">)],</font>w<font color="#000080">);
      </font>inc<font color="#000080">(</font>o<font color="#000080">,</font>w<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>freemem<font color="#000080">(</font>saved<font color="#000080">,</font>w<font color="#000080">*</font>succ<font color="#000080">(</font>y2<font color="#000080">-</font>y1<font color="#000080">));
    </font>active<font color="#000080">:=</font>false<font color="#000080">;
    </font>x1<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">; </font>y1<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">; </font>x2<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">; </font>y2<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>initwin<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>win<font color="#000080">:</font>pwin<font color="#000080">);
</font><font color="#FF0000"><b>begin
  with </b></font>win<font color="#000080">^ </font><font color="#FF0000"><b>do
  begin
    </b></font>x1<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">; </font>y1<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">; </font>x2<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">; </font>y2<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
    </font>f1<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">; </font>b1<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
    </font>active<font color="#000080">:=</font>false<font color="#000080">;
    </font>wint<font color="#000080">:=</font>normal<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>buildstr<font color="#000080">(</font><font color="#FF0000"><b>const </b></font>ch<font color="#000080">:</font>char<font color="#000080">;</font><font color="#FF0000"><b>const </b></font>num<font color="#000080">:</font>byte<font color="#000080">):</font><font color="#FF0000"><b>string</b></font><font color="#000080">; </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">xor ch,ch
  mov al,[num]
  mov cl,al
  les di,@result
  stosb
  jcxz @@exit
  mov al,[&amp;ch]
  mov ah,al
  shr cl,1
  rep stosw
  adc cl,cl
  rep stosb
  @@exit:
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>str2scr<font color="#000080">(</font><font color="#FF0000"><b>const </b></font>s<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">;</font><font color="#FF0000"><b>const </b></font>x<font color="#000080">,</font>y<font color="#000080">:</font>word<font color="#000080">;</font><font color="#FF0000"><b>const </b></font>c<font color="#000080">:</font>byte<font color="#000080">); </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">push ds
  dec [x]
  dec [y]
  mov es,segb800
  mov di,[y]
  mov bx,di
  shl di,6
  shl bx,4
  add di,bx
  add di,[x]
  shl di,1
  lds si,s
  xor ch,ch
  mov cl,ds:[si]
  inc si
  mov ah,[c]
 @@loop:
   lodsb
   stosw
   loop @@loop
 @@exit:
 pop ds
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>drawwin<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>win<font color="#000080">:</font>pwin<font color="#000080">; </font>xx1<font color="#000080">,</font>yy1<font color="#000080">,</font>xx2<font color="#000080">,</font>yy2<font color="#000080">:</font>word<font color="#000080">; </font>ff1<font color="#000080">,</font>bb1<font color="#000080">:</font>byte<font color="#000080">;</font>wt<font color="#000080">:</font>wintype<font color="#000080">);
</font><font color="#FF0000"><b>var
  </b></font>tmp<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">;
  </font>cnt<font color="#000080">:</font>byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
  with </b></font>win<font color="#000080">^ </font><font color="#FF0000"><b>do
  begin
    if</b></font><font color="#000080">(</font>active<font color="#000080">)</font><font color="#FF0000"><b>then </b></font>exit<font color="#000080">;
    </font>active<font color="#000080">:=</font>true<font color="#000080">;
    </font>initback<font color="#000080">(</font>screen<font color="#000080">);
    </font>x1<font color="#000080">:=</font>xx1<font color="#000080">; </font>y1<font color="#000080">:=</font>yy1<font color="#000080">;
    </font>x2<font color="#000080">:=</font>xx2<font color="#000080">; </font>y2<font color="#000080">:=</font>yy2<font color="#000080">;
    </font>f1<font color="#000080">:=</font>ff1<font color="#000080">; </font>b1<font color="#000080">:=</font>bb1<font color="#000080">;
    </font>saveback<font color="#000080">(</font>screen<font color="#000080">,</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">);
    </font>wint<font color="#000080">:=</font>wt<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>tmp<font color="#000080">:=</font><font color="#800000">''</font><font color="#000080">; </font>tmp<font color="#000080">:=</font>wt<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">];
  </font><font color="#FF0000"><b>if</b></font><font color="#000080">((</font>xx2<font color="#000080">-</font>xx1<font color="#000080">)&gt;</font><font color="#800000">2</font><font color="#000080">)</font><font color="#FF0000"><b>then </b></font>tmp<font color="#000080">:=</font>concat<font color="#000080">(</font>tmp<font color="#000080">,</font>buildstr<font color="#000080">(</font>wt<font color="#000080">[</font><font color="#800000">5</font><font color="#000080">],</font>pred<font color="#000080">(</font>xx2<font color="#000080">-</font>xx1<font color="#000080">)));
  </font>tmp<font color="#000080">:=</font>concat<font color="#000080">(</font>tmp<font color="#000080">,</font>wt<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">]);
  </font>str2scr<font color="#000080">(</font>tmp<font color="#000080">,</font>xx1<font color="#000080">,</font>yy1<font color="#000080">,(</font>bb1 <font color="#FF0000"><b>shl </b></font><font color="#800000">4</font><font color="#000080">)+</font>ff1<font color="#000080">);
  </font>tmp<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]:=</font>wt<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">]; </font>tmp<font color="#000080">[</font>ord<font color="#000080">(</font>tmp<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">])]:=</font>wt<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">];
  </font>str2scr<font color="#000080">(</font>tmp<font color="#000080">,</font>xx1<font color="#000080">,</font>yy2<font color="#000080">,(</font>bb1 <font color="#FF0000"><b>shl </b></font><font color="#800000">4</font><font color="#000080">)+</font>ff1<font color="#000080">);
  </font>tmp<font color="#000080">:=</font><font color="#800000">''</font><font color="#000080">; </font>tmp<font color="#000080">:=</font>wt<font color="#000080">[</font><font color="#800000">6</font><font color="#000080">];
  </font><font color="#FF0000"><b>if</b></font><font color="#000080">((</font>xx2<font color="#000080">-</font>xx1<font color="#000080">)&gt;</font><font color="#800000">2</font><font color="#000080">)</font><font color="#FF0000"><b>then </b></font>tmp<font color="#000080">:=</font>concat<font color="#000080">(</font>tmp<font color="#000080">,</font>buildstr<font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">,</font>pred<font color="#000080">(</font>xx2<font color="#000080">-</font>xx1<font color="#000080">)));
  </font>tmp<font color="#000080">:=</font>concat<font color="#000080">(</font>tmp<font color="#000080">,</font>wt<font color="#000080">[</font><font color="#800000">6</font><font color="#000080">]);
  </font><font color="#FF0000"><b>if</b></font><font color="#000080">((</font>yy2<font color="#000080">-</font>yy1<font color="#000080">)&gt;</font><font color="#800000">2</font><font color="#000080">)</font><font color="#FF0000"><b>then
  begin
    for </b></font>cnt<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>pred<font color="#000080">(</font>yy2<font color="#000080">-</font>yy1<font color="#000080">)</font><font color="#FF0000"><b>do
      </b></font>str2scr<font color="#000080">(</font>tmp<font color="#000080">,</font>xx1<font color="#000080">,</font>yy1<font color="#000080">+</font>cnt<font color="#000080">,(</font>bb1 <font color="#FF0000"><b>shl </b></font><font color="#800000">4</font><font color="#000080">)+</font>ff1<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>shade<font color="#000080">(</font>x1<font color="#000080">,</font>x2<font color="#000080">,</font>y<font color="#000080">:</font>word<font color="#000080">); </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">mov es,segb800
  dec [x1]
  dec [y]
  mov cx,[x2]
  sub cx,[x1]
  mov di,[y]
  mov bx,di
  shl di,6
  shl bx,4
  add di,bx
  shl di,1
  add di,[x1]
  add di,[x1]
  inc di
  @@loop:
    mov al,es:[di]
    sub al,112
    mov es:[di],al
    add di,2
    dec cx
    jnz @@loop
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>closewin<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>win<font color="#000080">:</font>pwin<font color="#000080">);
</font><font color="#FF0000"><b>begin
  with </b></font>win<font color="#000080">^ </font><font color="#FF0000"><b>do
  begin
    if not</b></font><font color="#000080">(</font>active<font color="#000080">)</font><font color="#FF0000"><b>then </b></font>exit<font color="#000080">;
    </font>active<font color="#000080">:=</font>false<font color="#000080">;
    </font>x1<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">; </font>y1<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">; </font>x2<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">; </font>y2<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
    </font>f1<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">; </font>b1<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
    </font>resback<font color="#000080">(</font>screen<font color="#000080">);
    </font>wint<font color="#000080">:=</font>normal<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>redrawwin<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>win<font color="#000080">:</font>pwin<font color="#000080">);
</font><font color="#FF0000"><b>var
  </b></font>tmp<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">;
  </font>c<font color="#000080">:</font>byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
  with </b></font>win<font color="#000080">^ </font><font color="#FF0000"><b>do
  begin
    if not</b></font><font color="#000080">(</font>active<font color="#000080">)</font><font color="#FF0000"><b>then </b></font>exit<font color="#000080">;
    </font>tmp<font color="#000080">:=</font><font color="#800000">''</font><font color="#000080">; </font>tmp<font color="#000080">:=</font>wint<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">];
    </font><font color="#FF0000"><b>if</b></font><font color="#000080">((</font>x2<font color="#000080">-</font>x1<font color="#000080">)&gt;</font><font color="#800000">2</font><font color="#000080">)</font><font color="#FF0000"><b>then </b></font>tmp<font color="#000080">:=</font>concat<font color="#000080">(</font>tmp<font color="#000080">,</font>buildstr<font color="#000080">(</font>wint<font color="#000080">[</font><font color="#800000">5</font><font color="#000080">],</font>pred<font color="#000080">(</font>x2<font color="#000080">-</font>x1<font color="#000080">)));
    </font>tmp<font color="#000080">:=</font>concat<font color="#000080">(</font>tmp<font color="#000080">,</font>wint<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">]);
    </font>str2scr<font color="#000080">(</font>tmp<font color="#000080">,</font>x1<font color="#000080">,</font>y1<font color="#000080">,(</font>b1 <font color="#FF0000"><b>shl </b></font><font color="#800000">4</font><font color="#000080">)+</font>f1<font color="#000080">);
    </font>tmp<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]:=</font>wint<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">]; </font>tmp<font color="#000080">[</font>ord<font color="#000080">(</font>tmp<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">])]:=</font>wint<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">];
    </font>str2scr<font color="#000080">(</font>tmp<font color="#000080">,</font>x1<font color="#000080">,</font>y2<font color="#000080">,(</font>b1 <font color="#FF0000"><b>shl </b></font><font color="#800000">4</font><font color="#000080">)+</font>f1<font color="#000080">);
    </font>tmp<font color="#000080">:=</font><font color="#800000">''</font><font color="#000080">; </font>tmp<font color="#000080">:=</font>wint<font color="#000080">[</font><font color="#800000">6</font><font color="#000080">];
    </font><font color="#FF0000"><b>if</b></font><font color="#000080">((</font>x2<font color="#000080">-</font>x1<font color="#000080">)&gt;</font><font color="#800000">2</font><font color="#000080">)</font><font color="#FF0000"><b>then </b></font>tmp<font color="#000080">:=</font>concat<font color="#000080">(</font>tmp<font color="#000080">,</font>buildstr<font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">,</font>pred<font color="#000080">(</font>x2<font color="#000080">-</font>x1<font color="#000080">)));
    </font>tmp<font color="#000080">:=</font>concat<font color="#000080">(</font>tmp<font color="#000080">,</font>wint<font color="#000080">[</font><font color="#800000">6</font><font color="#000080">]);
    </font><font color="#FF0000"><b>if</b></font><font color="#000080">((</font>y2<font color="#000080">-</font>y1<font color="#000080">)&gt;</font><font color="#800000">2</font><font color="#000080">)</font><font color="#FF0000"><b>then
    begin
      for </b></font>c<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>pred<font color="#000080">(</font>y2<font color="#000080">-</font>y1<font color="#000080">)</font><font color="#FF0000"><b>do
        </b></font>str2scr<font color="#000080">(</font>tmp<font color="#000080">,</font>x1<font color="#000080">,</font>y1<font color="#000080">+</font>c<font color="#000080">,(</font>b1 <font color="#FF0000"><b>shl </b></font><font color="#800000">4</font><font color="#000080">)+</font>f1<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
end</b></font><font color="#000080">.</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to TEXTWNDW SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0026.PAS">Original</a><b>]</b></p></body>
</html>
