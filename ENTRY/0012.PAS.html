<html>
<head><title> "Simple Entry Routine" by RICHARD GRIFFIN</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to ENTRY SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0012.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>unit </b></font>GS_KeyI<font color="#000080">;

</font><font color="#008000"><i>{      Written by  Richard F Griffin

       1 December 1988, (Released to the public domain)

       1110 Magnolia Circle
       Papillion, Nebraska  68128

       CIS 75206.231

   This unit allows you to set data entry routines quickly and simply.
   It also gives the programmer the capability to override the entry
   routine and use another procedure to handle function keys.

}


</i></font><font color="#FF0000"><b>interface

uses </b></font>crt<font color="#000080">, </font>dos<font color="#000080">;

</font><font color="#FF0000"><b>type
   </b></font>GS_KeyI_str80 <font color="#000080">= </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">80</font><font color="#000080">];

</font><font color="#FF0000"><b>var
   </b></font>GS_KeyI_Chr <font color="#000080">: </font>char<font color="#000080">;
   </font>GS_KeyI_Fuc<font color="#000080">,
   </font>GS_KeyI_Esc <font color="#000080">: </font>boolean<font color="#000080">;
   </font>GS_KeyI_Hlp <font color="#000080">: </font>pointer<font color="#000080">;
   </font>GS_KeyI_Psn <font color="#000080">: </font>integer<font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>GS_KeyI_Get <font color="#000080">: </font>char<font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>GS_KeyI_Key<font color="#000080">(</font>wait <font color="#000080">: </font>boolean<font color="#000080">;</font>Fldcnt<font color="#000080">,</font>x<font color="#000080">,</font>y <font color="#000080">: </font>integer<font color="#000080">);

</font><font color="#FF0000"><b>function </b></font>GS_KeyI_T<font color="#000080">(</font>waitcr<font color="#000080">: </font>boolean<font color="#000080">;</font>Fl<font color="#000080">,</font>X<font color="#000080">,</font>Y<font color="#000080">,</font>B<font color="#000080">:</font>integer<font color="#000080">;</font>CTitl<font color="#000080">,
                 </font>CVal<font color="#000080">:</font>GS_KeyI_str80<font color="#000080">) : </font>GS_KeyI_str80<font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>GS_KeyI_I<font color="#000080">(</font>waitcr<font color="#000080">:</font>boolean<font color="#000080">;</font>Fl<font color="#000080">,</font>x<font color="#000080">,</font>y<font color="#000080">,</font>B<font color="#000080">:</font>integer<font color="#000080">;
                </font>CTitl<font color="#000080">:</font>GS_KeyI_str80<font color="#000080">;</font>XVal<font color="#000080">,</font>l<font color="#000080">,</font>h<font color="#000080">:</font>integer<font color="#000080">) : </font>integer<font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>GS_KeyI_R<font color="#000080">(</font>waitcr<font color="#000080">:</font>boolean<font color="#000080">;</font>Fl<font color="#000080">,</font>x<font color="#000080">,</font>y<font color="#000080">,</font>B<font color="#000080">:</font>integer<font color="#000080">;</font>CTitl<font color="#000080">:</font>GS_KeyI_str80<font color="#000080">;
                          </font>XVal<font color="#000080">,</font>l<font color="#000080">,</font>h<font color="#000080">:</font>real<font color="#000080">;</font>d<font color="#000080">:</font>integer<font color="#000080">) : </font>real<font color="#000080">;

</font><font color="#FF0000"><b>implementation

var
   </b></font>Big_String <font color="#000080">: </font>GS_KeyI_str80<font color="#000080">;

</font><font color="#008000"><i>{$F+}
</i></font><font color="#FF0000"><b>procedure </b></font>GS_KeyI_Dum<font color="#000080">;
</font><font color="#FF0000"><b>begin
   </b></font>write<font color="#000080">(</font><font color="#800000">#7</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{$F-}

{
   This procedure is an Inline far call.  The address is inserted by
   GS_KeyI_Call based on the address in GS_KeyI_Hlp.  This address is
   initially to GS_KeyI_Dum, but may be changed by the using program.

   ex:  GS_KeyI_Hlp := @MyProcedure

   The procedure will be called when a special function key (F1, F2,
   Home, RtArrow, etc.) is pressed during data entry.  The using procedure
   may then use GS_KeyI_Chr to find which key was pressed.  It is up to the
   using program to ensure the screen and window sizes are properly restored.
   The programmer must ensure that the $F+ option is used in the procedure
   to force a Far Return.

        -----------      DO NOT MODIFY THIS ROUTINE        ------------
}

</i></font><font color="#FF0000"><b>procedure </b></font>GS_KeyI_Jmp<font color="#000080">;
</font><font color="#FF0000"><b>begin
   InLine </b></font><font color="#000080">(</font><font color="#800000">$9A</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">);       </font><font color="#008000"><i>{CALLF [GS_KeyI_Hlp]}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{
   Inserts a Far Call address for GS_KeyI_Jmp.
   Works in TP 4 and 5.
}

</i></font><font color="#FF0000"><b>procedure </b></font>GS_KeyI_Call<font color="#000080">;
</font><font color="#FF0000"><b>begin
   </b></font>MemW<font color="#000080">[</font>seg<font color="#000080">(</font>GS_KeyI_Jmp<font color="#000080">):</font>ofs<font color="#000080">(</font>GS_KeyI_Jmp<font color="#000080">)+</font><font color="#800000">11</font><font color="#000080">] := </font>ofs<font color="#000080">(</font>GS_KeyI_Hlp<font color="#000080">^);
   </font>MemW<font color="#000080">[</font>seg<font color="#000080">(</font>GS_KeyI_Jmp<font color="#000080">):</font>ofs<font color="#000080">(</font>GS_KeyI_Jmp<font color="#000080">)+</font><font color="#800000">13</font><font color="#000080">] := </font>seg<font color="#000080">(</font>GS_KeyI_Hlp<font color="#000080">^);
   </font>GS_KeyI_Jmp<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>GS_KeyI_Get <font color="#000080">: </font>char<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>ch<font color="#000080">: </font>char<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Ch <font color="#000080">:= </font>ReadKey<font color="#000080">;
  </font><font color="#FF0000"><b>If </b></font><font color="#000080">(</font>Ch <font color="#000080">= </font><font color="#800000">#0</font><font color="#000080">) </font><font color="#FF0000"><b>then  </b></font><font color="#008000"><i>{ it must be a function key }
  </i></font><font color="#FF0000"><b>begin
    </b></font>Ch <font color="#000080">:= </font>ReadKey<font color="#000080">;
    </font>GS_KeyI_Fuc <font color="#000080">:= </font>true<font color="#000080">;
  </font><font color="#FF0000"><b>end
  else </b></font>GS_KeyI_Fuc <font color="#000080">:= </font>false<font color="#000080">;
  </font>GS_KeyI_Get <font color="#000080">:= </font>Ch<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>GS_KeyI_Key<font color="#000080">(</font>wait <font color="#000080">: </font>boolean<font color="#000080">;</font>Fldcnt<font color="#000080">,</font>x<font color="#000080">,</font>y <font color="#000080">: </font>integer<font color="#000080">);
</font><font color="#FF0000"><b>Var
   </b></font>Big_S <font color="#000080">: </font>GS_KeyI_str80<font color="#000080">;
   </font>i <font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
   </b></font>Big_s <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
   </font>GS_KeyI_Psn <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
   </font>gotoxy<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">);
   </font><font color="#FF0000"><b>Repeat
      </b></font>GS_KeyI_Chr <font color="#000080">:= </font>GS_KeyI_Get<font color="#000080">;
      </font>GS_KeyI_Esc <font color="#000080">:= </font>false<font color="#000080">;
      </font><font color="#FF0000"><b>if not </b></font>GS_KeyI_Fuc <font color="#FF0000"><b>then
      begin
         case </b></font>GS_KeyI_Chr <font color="#FF0000"><b>of
            </b></font><font color="#800000">#08        </font><font color="#000080">: </font><font color="#FF0000"><b>begin
                            If </b></font>GS_KeyI_Psn <font color="#000080">&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
                            begin
                               </b></font>GS_KeyI_Psn <font color="#000080">:= </font>GS_KeyI_Psn <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
                               </font>gotoxy<font color="#000080">(</font>x<font color="#000080">+</font>GS_KeyI_Psn<font color="#000080">,</font>y<font color="#000080">);
                               </font>write<font color="#000080">(</font><font color="#800000">'_'</font><font color="#000080">);
                               </font>gotoxy<font color="#000080">(</font>x<font color="#000080">+</font>GS_KeyI_Psn<font color="#000080">,</font>y<font color="#000080">);
                               </font>delete<font color="#000080">(</font>Big_S<font color="#000080">,</font>length<font color="#000080">(</font>Big_S<font color="#000080">),</font><font color="#800000">1</font><font color="#000080">);
                            </font><font color="#FF0000"><b>end else
                            begin
                               </b></font>write<font color="#000080">(</font><font color="#800000">'_'</font><font color="#000080">);
                               </font>gotoxy<font color="#000080">(</font>x<font color="#000080">+</font>GS_KeyI_Psn<font color="#000080">,</font>y<font color="#000080">);
                            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
                         </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
            </font><font color="#800000">' '</font><font color="#000080">..</font><font color="#800000">'}'   </font><font color="#000080">: </font><font color="#FF0000"><b>begin
                            if </b></font><font color="#000080">(</font>GS_KeyI_Psn <font color="#000080">= </font>Fldcnt<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>wait<font color="#000080">) </font><font color="#FF0000"><b>then
                                </b></font>write<font color="#000080">(</font><font color="#800000">#7</font><font color="#000080">)
                            </font><font color="#FF0000"><b>else begin
                               if </b></font>GS_KeyI_Psn <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then
                               begin
                                  for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>Fldcnt <font color="#FF0000"><b>do </b></font>write<font color="#000080">(</font><font color="#800000">'_'</font><font color="#000080">);
                                  </font>gotoxy<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">);
                               </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
                               </font>GS_KeyI_Psn <font color="#000080">:= </font>GS_KeyI_Psn <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
                               </font>write<font color="#000080">(</font>GS_KeyI_Chr<font color="#000080">);
                               </font>Big_S <font color="#000080">:= </font>Big_S <font color="#000080">+ </font>GS_KeyI_Chr<font color="#000080">;
                            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
                         </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
            </font><font color="#800000">#27        </font><font color="#000080">: </font><font color="#FF0000"><b>begin
                            </b></font>Big_S <font color="#000080">:= </font><font color="#800000">' '</font><font color="#000080">;
                            </font>GS_KeyI_Esc <font color="#000080">:= </font>true<font color="#000080">;
                         </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
         </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>end else
      begin
         </b></font>GS_KeyI_Call<font color="#000080">;
         </font>gotoxy<font color="#000080">(</font>x<font color="#000080">+</font>GS_KeyI_Psn<font color="#000080">,</font>y<font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>until </b></font><font color="#000080">(</font>GS_KeyI_Chr <font color="#FF0000"><b>in </b></font><font color="#000080">[</font><font color="#800000">#13</font><font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">]) </font><font color="#FF0000"><b>or </b></font><font color="#000080">((</font>GS_KeyI_Psn <font color="#000080">= </font>Fldcnt<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font><font color="#FF0000"><b>not </b></font>wait<font color="#000080">));
   </font>Big_String <font color="#000080">:= </font>Big_S<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ The GS_KeyI_T function will process an input from the keyboard and display
  it on the screen in a specified location.  The length of the input field is
  given, as well as a default entry.  The default entry is optionally shown
  on the screen.

  Parameter descriptions are:

        1  Boolean flag to determine whether to wait for a carriage return
           once the field is full.

        2  Length of input field.

        3  Horizontal location to start.

        4  Vertical position to start.

        5  Vertical line to place default value.  Should be 0 to inhibit
           display of default.  Will usually be the same as (4).

        6  The prompt to place on the screen prior to the data entry field.
           Should be '' if no prompt.

        7  Default value.

}


</i></font><font color="#FF0000"><b>function </b></font>GS_KeyI_T<font color="#000080">(</font>waitcr<font color="#000080">: </font>boolean<font color="#000080">;</font>Fl<font color="#000080">,</font>X<font color="#000080">,</font>Y<font color="#000080">,</font>B<font color="#000080">:</font>integer<font color="#000080">;</font>CTitl<font color="#000080">,
                   </font>CVal<font color="#000080">:</font>GS_KeyI_str80<font color="#000080">) : </font>GS_KeyI_str80<font color="#000080">;
</font><font color="#FF0000"><b>var
   </b></font>i <font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>GS_KeyI_T <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
  </font>gotoxy<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">);
  </font>write<font color="#000080">(</font>CTitl<font color="#000080">);
  </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>Fl <font color="#FF0000"><b>do </b></font>write<font color="#000080">(</font><font color="#800000">'_'</font><font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>B <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
  begin
     </b></font>gotoxy<font color="#000080">(</font>x<font color="#000080">+</font>length<font color="#000080">(</font>CTitl<font color="#000080">),</font>B<font color="#000080">);
     </font>write<font color="#000080">(</font>CVal<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>GS_KeyI_Key<font color="#000080">(</font>waitcr<font color="#000080">,</font>FL<font color="#000080">,</font>x<font color="#000080">+</font>length<font color="#000080">(</font>CTitl<font color="#000080">),</font>y<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>Big_String <font color="#000080">= </font><font color="#800000">'' </font><font color="#FF0000"><b>then </b></font>Big_String <font color="#000080">:= </font>CVal<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>GS_KeyI_Esc <font color="#FF0000"><b>then </b></font>Big_String <font color="#000080">:= </font><font color="#800000">' '</font><font color="#000080">;
  </font>gotoxy<font color="#000080">(</font>x<font color="#000080">+</font>length<font color="#000080">(</font>CTitl<font color="#000080">),</font>y<font color="#000080">);
  </font>write<font color="#000080">(</font>Big_String<font color="#000080">,</font><font color="#800000">''</font><font color="#000080">:</font>Fl<font color="#000080">-</font>length<font color="#000080">(</font>Big_String<font color="#000080">));
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>B <font color="#000080">&lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>B <font color="#000080">&lt;&gt; </font>Y<font color="#000080">) </font><font color="#FF0000"><b>then
  begin
     </b></font>gotoxy<font color="#000080">(</font>x<font color="#000080">+</font>length<font color="#000080">(</font>CTitl<font color="#000080">),</font>B<font color="#000080">);
     </font>write<font color="#000080">(</font><font color="#800000">''</font><font color="#000080">:</font>length<font color="#000080">(</font>CVal<font color="#000080">));
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>GS_KeyI_T <font color="#000080">:= </font>Big_String<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ The GS_KeyI_I function will accept an integer from the keyboard and display
  it on the screen in a specified location.  The length of the input field is
  given, as well as a default entry.  The default entry is optionally shown
  on the screen.  A range of acceptable values is also specified.

  Parameter descriptions are:

        1  Boolean flag to determine whether to wait for a carriage return
           once the field is full.

        2  Length of input field.

        3  Horizontal location to start.

        4  Vertical position to start.

        5  Vertical line to place default value.  Should be 0 to inhibit
           display of default.  Will usually be the same as (4).

        6  The prompt to place on the screen prior to the data entry field.
           Should be '' if no prompt.

        7  Default value.

        8  Lowest value acceptable.

        9  Highest value acceptable.

}


</i></font><font color="#FF0000"><b>function </b></font>GS_KeyI_I<font color="#000080">(</font>waitcr<font color="#000080">:</font>boolean<font color="#000080">;</font>Fl<font color="#000080">,</font>x<font color="#000080">,</font>y<font color="#000080">,</font>B<font color="#000080">:</font>integer<font color="#000080">;
                </font>CTitl<font color="#000080">:</font>GS_KeyI_str80<font color="#000080">;</font>XVal<font color="#000080">,</font>l<font color="#000080">,</font>h<font color="#000080">:</font>integer<font color="#000080">) : </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>Var
   </b></font>Cod<font color="#000080">, </font>q<font color="#000080">, </font>i <font color="#000080">: </font>integer<font color="#000080">;
   </font>CVal <font color="#000080">: </font>GS_KeyI_str80<font color="#000080">;

</font><font color="#FF0000"><b>begin
   </b></font>str<font color="#000080">(</font>XVal<font color="#000080">:</font>Fl<font color="#000080">,</font>CVal<font color="#000080">);
   </font>Cod <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
   </font><font color="#FF0000"><b>while </b></font>Cod <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>do
   begin
      </b></font>Big_String <font color="#000080">:= </font>GS_KeyI_T<font color="#000080">(</font>waitcr<font color="#000080">,</font>Fl<font color="#000080">,</font>X<font color="#000080">,</font>Y<font color="#000080">,</font>B<font color="#000080">,</font>CTitl<font color="#000080">,</font>CVal<font color="#000080">);
      </font><font color="#FF0000"><b>if </b></font>GS_KeyI_Esc <font color="#FF0000"><b>then
      begin
         </b></font>GS_KeyI_I <font color="#000080">:= </font>XVal<font color="#000080">;
         </font>Exit<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font>Big_String<font color="#000080">[</font>length<font color="#000080">(</font>Big_String<font color="#000080">)] = </font><font color="#800000">' ' </font><font color="#FF0000"><b>then
         </b></font>Big_String <font color="#000080">:= </font><font color="#800000">'z'</font><font color="#000080">;
      </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>length<font color="#000080">(</font>Big_String<font color="#000080">) </font><font color="#FF0000"><b>do
         if </b></font>Big_String<font color="#000080">[</font>i<font color="#000080">] = </font><font color="#800000">' ' </font><font color="#FF0000"><b>then </b></font>Big_String<font color="#000080">[</font>i<font color="#000080">] := </font><font color="#800000">'0'</font><font color="#000080">;
      </font>val<font color="#000080">(</font>Big_String<font color="#000080">,</font>q<font color="#000080">,</font>Cod<font color="#000080">);
      </font><font color="#FF0000"><b>if </b></font>Cod <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
      begin
         </b></font>write<font color="#000080">(</font>chr<font color="#000080">(</font><font color="#800000">7</font><font color="#000080">));
      </font><font color="#FF0000"><b>end else
      begin
         if </b></font><font color="#000080">(</font>q <font color="#000080">&lt; </font>l<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>q <font color="#000080">&gt; </font>h<font color="#000080">) </font><font color="#FF0000"><b>then
         begin
            </b></font>Cod <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
            </font>write<font color="#000080">(</font>chr<font color="#000080">(</font><font color="#800000">7</font><font color="#000080">));
         </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font>GS_KeyI_I <font color="#000080">:= </font>q<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#008000"><i>{ The GS_KeyI_R function will accept a real number from the keyboard and
  display it on the screen in a specified location.  The length of the
  input field is given, as well as a default entry.  The default entry
  is optionally shown on the screen.  A range of acceptable values is
  also specified.

  Parameter descriptions are:

        1  Boolean flag to determine whether to wait for a carriage return
           once the field is full.

        2  Length of input field.

        3  Horizontal location to start.

        4  Vertical position to start.

        5  Vertical line to place default value.  Should be 0 to inhibit
           display of default.  Will usually be the same as (4).

        6  The prompt to place on the screen prior to the data entry field.
           Should be '' if no prompt.

        7  Default value.

        8  Lowest value acceptable.

        9  Highest value acceptable.

       10  Number of decimal places.

}


</i></font><font color="#FF0000"><b>function </b></font>GS_KeyI_R<font color="#000080">(</font>waitcr<font color="#000080">:</font>boolean<font color="#000080">;</font>Fl<font color="#000080">,</font>x<font color="#000080">,</font>y<font color="#000080">,</font>B<font color="#000080">:</font>integer<font color="#000080">;</font>CTitl<font color="#000080">:</font>GS_KeyI_str80<font color="#000080">;
                          </font>XVal<font color="#000080">,</font>l<font color="#000080">,</font>h<font color="#000080">:</font>real<font color="#000080">;</font>d<font color="#000080">:</font>integer<font color="#000080">) : </font>real<font color="#000080">;
</font><font color="#FF0000"><b>Var
   </b></font>Cod<font color="#000080">, </font>i <font color="#000080">: </font>integer<font color="#000080">;
   </font>CVal <font color="#000080">: </font>GS_KeyI_str80<font color="#000080">;
   </font>r <font color="#000080">: </font>real<font color="#000080">;

</font><font color="#FF0000"><b>begin
   </b></font>str<font color="#000080">(</font>XVal<font color="#000080">:</font>Fl<font color="#000080">:</font>d<font color="#000080">,</font>CVal<font color="#000080">);
   </font>Cod <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
   </font><font color="#FF0000"><b>while </b></font>Cod <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>do
   begin
      </b></font>Big_String <font color="#000080">:= </font>GS_KeyI_T<font color="#000080">(</font>waitcr<font color="#000080">,</font>Fl<font color="#000080">,</font>X<font color="#000080">,</font>Y<font color="#000080">,</font>B<font color="#000080">,</font>CTitl<font color="#000080">,</font>CVal<font color="#000080">);
      </font><font color="#FF0000"><b>if </b></font>GS_KeyI_Esc <font color="#FF0000"><b>then
      begin
         </b></font>GS_KeyI_R <font color="#000080">:= </font>XVal<font color="#000080">;
         </font>Exit<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font>Big_String<font color="#000080">[</font>length<font color="#000080">(</font>Big_String<font color="#000080">)] = </font><font color="#800000">' ' </font><font color="#FF0000"><b>then
         </b></font>Big_String <font color="#000080">:= </font><font color="#800000">'z'</font><font color="#000080">;
      </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>length<font color="#000080">(</font>Big_String<font color="#000080">) </font><font color="#FF0000"><b>do
         if </b></font>Big_String<font color="#000080">[</font>i<font color="#000080">] = </font><font color="#800000">' ' </font><font color="#FF0000"><b>then </b></font>Big_String<font color="#000080">[</font>i<font color="#000080">] := </font><font color="#800000">'0'</font><font color="#000080">;
      </font>val<font color="#000080">(</font>Big_String<font color="#000080">,</font>r<font color="#000080">,</font>Cod<font color="#000080">);
      </font><font color="#FF0000"><b>if </b></font>Cod <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
      begin
         </b></font>write<font color="#000080">(</font>chr<font color="#000080">(</font><font color="#800000">7</font><font color="#000080">));
      </font><font color="#FF0000"><b>end else
      begin
         if </b></font><font color="#000080">(</font>r <font color="#000080">&lt; </font>l<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>r <font color="#000080">&gt; </font>h<font color="#000080">) </font><font color="#FF0000"><b>then
         begin
            </b></font>Cod <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
            </font>write<font color="#000080">(</font>chr<font color="#000080">(</font><font color="#800000">7</font><font color="#000080">));
         </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font>gotoxy<font color="#000080">(</font>x<font color="#000080">+</font>length<font color="#000080">(</font>CTitl<font color="#000080">),</font>y<font color="#000080">);
   </font>str<font color="#000080">(</font>r<font color="#000080">:</font>Fl<font color="#000080">:</font>d<font color="#000080">,</font>Big_String<font color="#000080">);
   </font>write<font color="#000080">(</font>Big_String<font color="#000080">,</font><font color="#800000">''</font><font color="#000080">:</font>Fl<font color="#000080">-</font>length<font color="#000080">(</font>Big_String<font color="#000080">));
   </font>GS_KeyI_R <font color="#000080">:= </font>r<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
   </b></font>GS_KeyI_Hlp <font color="#000080">:= @</font>GS_KeyI_Dum<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font><font color="#008000"><i>{----------------   DEMO PROGRAM ------------------------ }

</i></font><font color="#FF0000"><b>program </b></font>KeyIDemo<font color="#000080">;

</font><font color="#FF0000"><b>uses </b></font>crt<font color="#000080">, </font>dos<font color="#000080">, </font>GS_KeyI<font color="#000080">;

</font><font color="#FF0000"><b>var
   </b></font>lin  <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">80</font><font color="#000080">];
   </font>numi <font color="#000080">: </font>integer<font color="#000080">;
   </font>numr <font color="#000080">: </font>real<font color="#000080">;

</font><font color="#008000"><i>{$F+}
</i></font><font color="#FF0000"><b>procedure </b></font>tst<font color="#000080">;
</font><font color="#FF0000"><b>begin
   </b></font>window<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">20</font><font color="#000080">,</font><font color="#800000">80</font><font color="#000080">,</font><font color="#800000">24</font><font color="#000080">);
   </font>ClrScr<font color="#000080">;
   </font>gotoxy<font color="#000080">(</font><font color="#800000">20</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
   </font><font color="#FF0000"><b>case </b></font>GS_KeyI_Chr <font color="#FF0000"><b>of
      </b></font><font color="#800000">#59 </font><font color="#000080">: </font>write<font color="#000080">(</font><font color="#800000">'Function Key F1 Pressed'</font><font color="#000080">);
      </font><font color="#800000">#60 </font><font color="#000080">: </font>write<font color="#000080">(</font><font color="#800000">'Function Key F2 Pressed'</font><font color="#000080">);
      </font><font color="#800000">#61 </font><font color="#000080">: </font>write<font color="#000080">(</font><font color="#800000">'Function Key F3 Pressed'</font><font color="#000080">);
      </font><font color="#800000">#62 </font><font color="#000080">: </font>write<font color="#000080">(</font><font color="#800000">'Function Key F4 Pressed'</font><font color="#000080">);
      </font><font color="#800000">#71 </font><font color="#000080">: </font>write<font color="#000080">(</font><font color="#800000">'The Home Key was Pressed'</font><font color="#000080">);
      </font><font color="#800000">#79 </font><font color="#000080">: </font>write<font color="#000080">(</font><font color="#800000">'The End Key was Pressed'</font><font color="#000080">);
   </font><font color="#FF0000"><b>else
      </b></font>write<font color="#000080">(</font><font color="#800000">#7</font><font color="#000080">);
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font>window<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">80</font><font color="#000080">,</font><font color="#800000">25</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{$F-}

</i></font><font color="#FF0000"><b>begin
   </b></font>clrscr<font color="#000080">;
   </font>GS_KeyI_Hlp <font color="#000080">:= @</font>tst<font color="#000080">;
   </font>lin <font color="#000080">:= </font>GS_KeyI_T<font color="#000080">(</font>true<font color="#000080">, </font><font color="#800000">8</font><font color="#000080">,</font><font color="#800000">10</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">'Enter Text Field: '</font><font color="#000080">,</font><font color="#800000">'empty'</font><font color="#000080">);
   </font>numi <font color="#000080">:= </font>GS_KeyI_I<font color="#000080">(</font>true<font color="#000080">, </font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">10</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">'Enter Integer Field (0-50): '</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">50</font><font color="#000080">);
   </font>numr<font color="#000080">:= </font>GS_KeyI_R<font color="#000080">(</font>true<font color="#000080">, </font><font color="#800000">6</font><font color="#000080">,</font><font color="#800000">10</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">'Enter Real Field (0-99.99): '</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">99.99</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to ENTRY SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0012.PAS">Original</a><b>]</b></p></body>
</html>
