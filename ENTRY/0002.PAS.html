<html>
<head><title> "General Input with Color" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to ENTRY SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0002.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{ General STRING input routine with Color prompt and input }

</i></font><font color="#FF0000"><b>USES </b></font>DOS<font color="#000080">,</font>Crt<font color="#000080">;

</font><font color="#FF0000"><b>TYPE
    </b></font>CharSet <font color="#000080">= </font><font color="#FF0000"><b>Set OF </b></font>Char<font color="#000080">;

</font><font color="#FF0000"><b>VAR
    </b></font>Name <font color="#000080">: </font><font color="#FF0000"><b>STRING</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>QWrite<font color="#000080">( </font>Column<font color="#000080">, </font>Line <font color="#000080">, </font>Color <font color="#000080">: </font>byte<font color="#000080">; </font>S <font color="#000080">: </font><font color="#FF0000"><b>STRING </b></font><font color="#000080">);

</font><font color="#FF0000"><b>var
   </b></font>VMode  <font color="#000080">: </font>BYTE <font color="#FF0000"><b>ABSOLUTE </b></font><font color="#800000">$0040 </font><font color="#000080">: </font><font color="#800000">$0049</font><font color="#000080">; </font><font color="#008000"><i>{ Video mode: Mono=7, Color=0-3 }
   </i></font>NumCol <font color="#000080">: </font>WORD <font color="#FF0000"><b>ABSOLUTE </b></font><font color="#800000">$0040 </font><font color="#000080">: </font><font color="#800000">$004A</font><font color="#000080">; </font><font color="#008000"><i>{ Number of CRT columns (1-based) }
   </i></font>VSeg   <font color="#000080">: </font>WORD<font color="#000080">;
   </font>OfsPos <font color="#000080">: </font>integer<font color="#000080">;  </font><font color="#008000"><i>{ offset position of the character in video RAM }
   </i></font>vPos   <font color="#000080">: </font>integer<font color="#000080">;
   </font>sLen   <font color="#000080">: </font>Byte <font color="#FF0000"><b>ABSOLUTE </b></font>S<font color="#000080">;

</font><font color="#FF0000"><b>Begin
  If </b></font>VMode <font color="#FF0000"><b>in </b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">7</font><font color="#000080">] </font><font color="#FF0000"><b>THEN </b></font>VSeg <font color="#000080">:= </font><font color="#800000">$B000 </font><font color="#FF0000"><b>ELSE </b></font>VSeg <font color="#000080">:= </font><font color="#800000">$B800</font><font color="#000080">;
  </font>OfsPos   <font color="#000080">:= (((</font>pred<font color="#000080">(</font>Line<font color="#000080">) * </font>NumCol<font color="#000080">) + </font>pred<font color="#000080">(</font>Column<font color="#000080">)) * </font><font color="#800000">2</font><font color="#000080">);
  </font><font color="#FF0000"><b>FOR </b></font>vPos <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>pred<font color="#000080">(</font>sLen<font color="#000080">) </font><font color="#FF0000"><b>do
      </b></font>MemW<font color="#000080">[</font>VSeg <font color="#000080">: (</font>OfsPos <font color="#000080">+ (</font>vPos <font color="#000080">* </font><font color="#800000">2</font><font color="#000080">))] :=
                     (</font>Color <font color="#FF0000"><b>shl </b></font><font color="#800000">8</font><font color="#000080">) + </font>byte<font color="#000080">(</font>S<font color="#000080">[</font>succ<font color="#000080">(</font>vPos<font color="#000080">)])
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>GetString<font color="#000080">(</font>cx<font color="#000080">,</font>cy<font color="#000080">,</font>cc<font color="#000080">,</font>pc <font color="#000080">: </font>Byte<font color="#000080">; </font><font color="#FF0000"><b>Default</b></font><font color="#000080">,</font>Prompt <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">; </font>MaxLen <font color="#000080">: </font>Integer<font color="#000080">;</font>OKSet <font color="#000080">:
</font>charset<font color="#000080">):</font><font color="#FF0000"><b>string</b></font><font color="#000080">;

</font><font color="#008000"><i>{ cx = Input Column }
{ cy = Input Row    }
{ cc = Input Color  }
{ pc = Prompt Color }

</i></font><font color="#FF0000"><b>const
  </b></font>BS                 <font color="#000080">= ^</font>H<font color="#000080">;
  </font>CR                 <font color="#000080">= ^</font>M<font color="#000080">;
  </font>iPutChar           <font color="#000080">= </font><font color="#800000">#249</font><font color="#000080">;
  </font>ConSet             <font color="#000080">: </font>CharSet <font color="#000080">= [</font>BS<font color="#000080">,</font>CR<font color="#000080">];
</font><font color="#FF0000"><b>var
  </b></font>TStr               <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
  </font>TLen<font color="#000080">,</font>X<font color="#000080">,</font>i           <font color="#000080">: </font>Integer<font color="#000080">;
  </font>Ch                 <font color="#000080">: </font>Char<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font><font color="#008000"><i>{$I-} { turn off I/O checking }
  </i></font>TStr <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
  </font>TLen <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>Qwrite<font color="#000080">(</font>cx<font color="#000080">,</font>cy<font color="#000080">,</font>pc<font color="#000080">,</font>Prompt<font color="#000080">);
  </font>X <font color="#000080">:= </font>cx <font color="#000080">+ </font>Length<font color="#000080">(</font>Prompt<font color="#000080">);
  </font><font color="#FF0000"><b>For </b></font>i <font color="#000080">:= </font>x <font color="#FF0000"><b>to </b></font><font color="#000080">(</font>x <font color="#000080">+ </font>Maxlen <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>do
    </b></font>Qwrite<font color="#000080">(</font>i<font color="#000080">,</font>cy<font color="#000080">,</font>cc<font color="#000080">,</font>iputChar<font color="#000080">);
  </font>Qwrite<font color="#000080">(</font>x<font color="#000080">,</font>cy<font color="#000080">,</font>cc<font color="#000080">,</font><font color="#FF0000"><b>Default</b></font><font color="#000080">);
  </font>OKSet <font color="#000080">:= </font>OKSet <font color="#000080">+ </font>ConSet<font color="#000080">;
  </font><font color="#FF0000"><b>repeat
    </b></font>Gotoxy<font color="#000080">(</font>x<font color="#000080">,</font>cy<font color="#000080">);
    </font><font color="#FF0000"><b>repeat
      </b></font>ch <font color="#000080">:= </font>readkey
    <font color="#FF0000"><b>until </b></font>Ch <font color="#FF0000"><b>in </b></font>OKSet<font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font>Ch <font color="#000080">= </font>BS <font color="#FF0000"><b>then begin
      if </b></font>TLen <font color="#000080">&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then begin
        </b></font>TLen <font color="#000080">:= </font>TLen <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
        </font>X <font color="#000080">:= </font>X <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
        </font>QWrite<font color="#000080">(</font>x<font color="#000080">,</font>cy<font color="#000080">,</font>cc<font color="#000080">,</font>iPutChar<font color="#000080">);
      </font><font color="#FF0000"><b>end
    end
    else if </b></font><font color="#000080">(</font>Ch <font color="#000080">&lt;&gt; </font>CR<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>TLen <font color="#000080">&lt; </font>MaxLen<font color="#000080">) </font><font color="#FF0000"><b>then begin
      </b></font>QWrite<font color="#000080">(</font>x<font color="#000080">,</font>cy<font color="#000080">,</font>cc<font color="#000080">,</font>Ch<font color="#000080">);
      </font>TLen <font color="#000080">:= </font>TLen <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
      </font>TStr<font color="#000080">[</font>TLen<font color="#000080">] := </font>Ch<font color="#000080">;
      </font>X <font color="#000080">:= </font>X <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
    </font><font color="#FF0000"><b>end
  until </b></font>Ch <font color="#000080">= </font>CR<font color="#000080">;
  </font><font color="#FF0000"><b>If </b></font>Tlen <font color="#000080">&gt; </font><font color="#800000">0
    </font><font color="#FF0000"><b>Then Begin
           </b></font>TStr<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">] := </font>chr<font color="#000080">(</font>Tlen<font color="#000080">);
           </font>Getstring <font color="#000080">:= </font>TStr
         <font color="#FF0000"><b>End
    Else </b></font>Getstring <font color="#000080">:= </font><font color="#FF0000"><b>Default</b></font><font color="#000080">;
  </font><font color="#008000"><i>{$I+}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>BEGIN
   </b></font>ClrScr<font color="#000080">;
   </font>Name <font color="#000080">:= </font>Getstring<font color="#000080">(</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">79</font><font color="#000080">,</font><font color="#800000">31</font><font color="#000080">,</font><font color="#800000">'GOOD OLE BOY'</font><font color="#000080">,</font><font color="#800000">'Enter Name : '</font><font color="#000080">,</font><font color="#800000">25</font><font color="#000080">,[</font><font color="#800000">'a'</font><font color="#000080">..</font><font color="#800000">'z'</font><font color="#000080">,</font><font color="#800000">'A'</font><font color="#000080">..</font><font color="#800000">'Z'</font><font color="#000080">,</font><font color="#800000">' '</font><font color="#000080">]);
   </font>GOTOXY<font color="#000080">(</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">7</font><font color="#000080">);
   </font>WriteLn<font color="#000080">(</font><font color="#800000">'Name : '</font><font color="#000080">,</font>Name<font color="#000080">);
   </font>Readkey<font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to ENTRY SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0002.PAS">Original</a><b>]</b></p></body>
</html>
