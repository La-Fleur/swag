<html>
<head><title> "A Simple Input Routine" by SEAN PALMER</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to ENTRY SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0005.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
SEAN PALMER

&gt; name:_______________) problem, how do you make a field where you
&gt; define the max Chars in the field and doNOT let the person Type more
&gt; than that.  stop the users keyboard at the last Char in this Case its
&gt; 78 Chars max and the field looks like this

Try this. Send it a default value, the length of the field, and a set of
Char containing all the valid Characters For the field.

}
</i></font><font color="#FF0000"><b>Uses </b></font>uInput<font color="#000080">,</font>Crt<font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>getName <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Const
  </b></font>nameMax <font color="#000080">= </font><font color="#800000">20</font><font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>Count    <font color="#000080">: </font>Integer<font color="#000080">;
  </font>attrsave <font color="#000080">: </font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>GotoXY<font color="#000080">(</font><font color="#800000">12</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">);
  </font>Write<font color="#000080">(</font><font color="#800000">'ENTER NAME:'</font><font color="#000080">);
  </font>attrsave <font color="#000080">:= </font>TextAttr<font color="#000080">;
  </font>TextColor<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
  </font>TextBackground<font color="#000080">(</font><font color="#800000">7</font><font color="#000080">);
  </font>GotoXY<font color="#000080">(</font><font color="#800000">26</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">);
  </font><font color="#FF0000"><b>for </b></font>Count <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>nameMax <font color="#FF0000"><b>do
    </b></font>Write<font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">);  </font><font color="#008000"><i>{draw inverse field}
  </i></font>GotoXY<font color="#000080">(</font><font color="#800000">26</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">);
  </font>getName  <font color="#000080">:= </font>input<font color="#000080">(</font><font color="#800000">'Nobody'</font><font color="#000080">, </font>nameMax<font color="#000080">, [</font><font color="#800000">'A'</font><font color="#000080">..</font><font color="#800000">'Z'</font><font color="#000080">,</font><font color="#800000">'a'</font><font color="#000080">..</font><font color="#800000">'z'</font><font color="#000080">,</font><font color="#800000">'.'</font><font color="#000080">,</font><font color="#800000">' '</font><font color="#000080">]);
  </font>Textattr <font color="#000080">:= </font>attrsave<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{----------}

{uInput}
{by Sean Palmer}
{released to the public domain}
 {2237 Lincoln St.}
 {Longmont, CO 80501}
{Alms gladly accepted! 8) }

</i></font><font color="#FF0000"><b>Unit </b></font>uInput<font color="#000080">;
</font><font color="#008000"><i>{$B-,I-,N-,O-,R-,S-,V-,X-}

</i></font><font color="#FF0000"><b>Interface

</b></font><font color="#008000"><i>{tCharSet is used to specify Function keys to the input routine}
</i></font><font color="#FF0000"><b>Type
  </b></font>tCharSet <font color="#000080">= </font><font color="#FF0000"><b>set of </b></font>Char<font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>isKey <font color="#000080">: </font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>Inline</b></font><font color="#000080">(
 </font><font color="#800000">$B4</font><font color="#000080">/</font><font color="#800000">$B</font><font color="#000080">/   </font><font color="#008000"><i>{mov ah,$B}
 </i></font><font color="#800000">$CD</font><font color="#000080">/</font><font color="#800000">$21</font><font color="#000080">/  </font><font color="#008000"><i>{int $21}
 </i></font><font color="#800000">$24</font><font color="#000080">/</font><font color="#800000">$FE</font><font color="#000080">); </font><font color="#008000"><i>{and al,$FE}

</i></font><font color="#FF0000"><b>Function </b></font>getKey <font color="#000080">: </font>Char<font color="#000080">;
</font><font color="#FF0000"><b>Inline</b></font><font color="#000080">(
 </font><font color="#800000">$B4</font><font color="#000080">/</font><font color="#800000">7</font><font color="#000080">/    </font><font color="#008000"><i>{mov ah,7}
 </i></font><font color="#800000">$CD</font><font color="#000080">/</font><font color="#800000">$21</font><font color="#000080">); </font><font color="#008000"><i>{int $21}

</i></font><font color="#FF0000"><b>Function </b></font>input<font color="#000080">(</font><font color="#FF0000"><b>default </b></font><font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">; </font>maxCh <font color="#000080">: </font>Byte<font color="#000080">; </font>cs <font color="#000080">: </font>tCharSet<font color="#000080">) : </font><font color="#FF0000"><b>String</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Implementation

Function </b></font>input<font color="#000080">(</font><font color="#FF0000"><b>default </b></font><font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">; </font>maxCh <font color="#000080">: </font>Byte<font color="#000080">; </font>cs <font color="#000080">: </font>tCharSet<font color="#000080">) : </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>p <font color="#000080">: </font>Byte<font color="#000080">;
  </font>c <font color="#000080">: </font>Char<font color="#000080">;
  </font>s <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">255</font><font color="#000080">];
</font><font color="#FF0000"><b>begin
  </b></font>s <font color="#000080">:= </font><font color="#FF0000"><b>default</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>Repeat
    </b></font>c <font color="#000080">:= </font>getKey<font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font>c <font color="#000080">= </font><font color="#800000">#0 </font><font color="#FF0000"><b>then
      </b></font>c <font color="#000080">:= </font>Char<font color="#000080">(</font>Byte<font color="#000080">(</font>getKey<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#800000">$80</font><font color="#000080">);
    </font><font color="#FF0000"><b>Case </b></font>c <font color="#FF0000"><b>of
      </b></font><font color="#000080">^</font>H <font color="#000080">:
        </font><font color="#FF0000"><b>if </b></font>s<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">] &lt;&gt; </font><font color="#800000">#0 </font><font color="#FF0000"><b>then
        begin
          </b></font>Write<font color="#000080">(^</font>H<font color="#000080">, </font><font color="#800000">' '</font><font color="#000080">, ^</font>H<font color="#000080">);
          </font>dec<font color="#000080">(</font>s<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]);
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#800000">#127 </font><font color="#000080">:
        </font><font color="#FF0000"><b>begin
          For </b></font>p <font color="#000080">:= </font>length<font color="#000080">(</font>s<font color="#000080">) </font><font color="#FF0000"><b>downto </b></font><font color="#800000">1 </font><font color="#FF0000"><b>do
            </b></font>Write<font color="#000080">(^</font>H<font color="#000080">, </font><font color="#800000">' '</font><font color="#000080">, ^</font>H<font color="#000080">);
            </font>s<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">] := </font><font color="#800000">#0</font><font color="#000080">;
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      ^</font>M <font color="#000080">: ; </font><font color="#008000"><i>{don't beep}
      </i></font><font color="#800000">' '</font><font color="#000080">..</font><font color="#800000">'~' </font><font color="#000080">:
        </font><font color="#FF0000"><b>if </b></font>length<font color="#000080">(</font>s<font color="#000080">) &lt; </font>maxCh <font color="#FF0000"><b>then
        begin
          </b></font>Write<font color="#000080">(</font>c<font color="#000080">);
          </font>inc<font color="#000080">(</font>s<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]);
          </font>s<font color="#000080">[</font>Byte<font color="#000080">(</font>s<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">])] := </font>c<font color="#000080">;
        </font><font color="#FF0000"><b>end
        else
          </b></font>Write<font color="#000080">(^</font>G<font color="#000080">);

      </font><font color="#FF0000"><b>else
        if </b></font>c <font color="#FF0000"><b>in </b></font>cs <font color="#FF0000"><b>then
        begin
          </b></font>s<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] := </font>c<font color="#000080">;
          </font>s<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">] := </font><font color="#800000">#1</font><font color="#000080">;
          </font>c    <font color="#000080">:= ^</font>M<font color="#000080">;
        </font><font color="#FF0000"><b>end
        else
          </b></font>Write<font color="#000080">(^</font>G<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>Until </b></font><font color="#000080">(</font>c <font color="#000080">= ^</font>M<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>c <font color="#000080">= ^[);

  </font><font color="#FF0000"><b>if </b></font>c <font color="#000080">= ^[ </font><font color="#FF0000"><b>then
    </b></font>input <font color="#000080">:= </font><font color="#FF0000"><b>default
  else
    </b></font>input <font color="#000080">:= </font>s<font color="#000080">;

</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to ENTRY SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0005.PAS">Original</a><b>]</b></p></body>
</html>
