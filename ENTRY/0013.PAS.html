<html>
<head><title> "Small Input Routines" by ROBERT MASHLAN</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to ENTRY SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0013.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>Unit </b></font>InputUn<font color="#000080">;

</font><font color="#008000"><i>{ This is a small unit with crash proof user input routines and some
  string formating functions. Compile the DemoInput program for more
  information on how to use these functions.

   Robert Mashlan [71160,3067]  3/11/89 }

</i></font><font color="#FF0000"><b>Interface

Uses </b></font>Crt<font color="#000080">;

</font><font color="#FF0000"><b>const
   </b></font>DefaultSet <font color="#000080">= [</font><font color="#800000">' '</font><font color="#000080">..</font><font color="#800000">'}'</font><font color="#000080">];

</font><font color="#FF0000"><b>Var
   </b></font>InverseOn    <font color="#000080">: </font>boolean<font color="#000080">;
   </font>UpcaseOn     <font color="#000080">: </font>boolean<font color="#000080">;
   </font>ValidCharSet <font color="#000080">: </font><font color="#FF0000"><b>set of </b></font>char<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Inverse<font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>UnderLine<font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>Normal<font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>Goback<font color="#000080">;
</font><font color="#FF0000"><b>Function </b></font>ReadString<font color="#000080">( </font>Prompt <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">; </font>Width <font color="#000080">: </font>byte<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>Escape <font color="#000080">: </font>boolean <font color="#000080">) : </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Function </b></font>ReadNum<font color="#000080">( </font>Prompt <font color="#000080">: </font>real<font color="#000080">; </font>Width <font color="#000080">: </font>byte<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>Escape <font color="#000080">: </font>boolean <font color="#000080">) : </font>real<font color="#000080">;
</font><font color="#FF0000"><b>Function </b></font>ReadInt<font color="#000080">( </font>Prompt <font color="#000080">: </font>longint<font color="#000080">; </font>Width <font color="#000080">: </font>byte<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>Escape <font color="#000080">: </font>boolean <font color="#000080">) : </font>longint<font color="#000080">;
</font><font color="#FF0000"><b>Function </b></font>Left<font color="#000080">( </font>AnyString <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">; </font>Width <font color="#000080">: </font>byte <font color="#000080">) : </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Function </b></font>Center<font color="#000080">( </font>AnyString <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">; </font>Width <font color="#000080">: </font>byte <font color="#000080">) : </font><font color="#FF0000"><b>string</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Implementation

const
   </b></font>esc <font color="#000080">= </font><font color="#800000">#27</font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Inverse<font color="#000080">;
</font><font color="#FF0000"><b>begin
   </b></font>textbackground<font color="#000080">(</font>white<font color="#000080">);
   </font>textcolor<font color="#000080">(</font>black<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>UnderLine<font color="#000080">;
</font><font color="#FF0000"><b>begin
   </b></font>textbackground<font color="#000080">(</font>white<font color="#000080">);
   </font>textcolor<font color="#000080">(</font>blue<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Normal<font color="#000080">;
</font><font color="#FF0000"><b>begin
   </b></font>textbackground<font color="#000080">(</font>black<font color="#000080">);
   </font>textcolor<font color="#000080">(</font>white<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Procedure </b></font>Goback<font color="#000080">;
</font><font color="#FF0000"><b>begin
   </b></font>GotoXY<font color="#000080">(</font>WhereX<font color="#000080">,</font>WhereY<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">);
   </font>ClrEol<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Left<font color="#000080">( </font>AnyString <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">; </font>Width <font color="#000080">: </font>byte <font color="#000080">) : </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
</font><font color="#FF0000"><b>var
   </b></font>len  <font color="#000080">: </font>byte <font color="#FF0000"><b>absolute </b></font>AnyString<font color="#000080">;
   </font>loop <font color="#000080">: </font>byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
   while </b></font>length<font color="#000080">( </font>AnyString <font color="#000080">) &lt; </font>Width <font color="#FF0000"><b>do
      </b></font>AnyString<font color="#000080">:=</font>AnyString<font color="#000080">+</font><font color="#800000">' '</font><font color="#000080">;
   </font>len<font color="#000080">:=</font>Width<font color="#000080">;      </font><font color="#008000"><i>{ truncate AnyString if Needed }
   </i></font>Left<font color="#000080">:=</font>AnyString<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Center<font color="#000080">( </font>AnyString <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">; </font>Width <font color="#000080">: </font>byte <font color="#000080">) : </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
   repeat
      if </b></font>length<font color="#000080">( </font>AnyString <font color="#000080">) &lt; </font>Width
         <font color="#FF0000"><b>then </b></font>AnyString<font color="#000080">:=</font>AnyString<font color="#000080">+</font><font color="#800000">' '</font><font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font>length<font color="#000080">( </font>AnyString <font color="#000080">) &lt; </font>Width
         <font color="#FF0000"><b>then </b></font>AnyString<font color="#000080">:=</font><font color="#800000">' '</font><font color="#000080">+</font>AnyString<font color="#000080">;
   </font><font color="#FF0000"><b>until </b></font>length<font color="#000080">( </font>AnyString <font color="#000080">) &gt;= </font>Width<font color="#000080">;
   </font>Center<font color="#000080">:=</font>AnyString<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Function </b></font>ReadString<font color="#000080">( </font>Prompt <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">; </font>Width <font color="#000080">: </font>byte<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>Escape <font color="#000080">: </font>boolean <font color="#000080">) : </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
</font><font color="#FF0000"><b>var
   </b></font>NewString    <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
   </font>InKey<font color="#000080">,</font>InKey2 <font color="#000080">: </font>char<font color="#000080">;
   </font>Start        <font color="#000080">: </font>byte<font color="#000080">;
   </font>index        <font color="#000080">: </font>integer<font color="#000080">;
   </font>InsertMode   <font color="#000080">: </font>boolean<font color="#000080">;

   </font><font color="#FF0000"><b>Procedure </b></font>Display<font color="#000080">;
   </font><font color="#FF0000"><b>begin
      </b></font>GotoXY<font color="#000080">(</font>Start<font color="#000080">,</font>WhereY<font color="#000080">);
      </font><font color="#FF0000"><b>if </b></font>InverseOn
         <font color="#FF0000"><b>then </b></font>Inverse<font color="#000080">;
      </font>write<font color="#000080">(</font>left<font color="#000080">(</font>NewString<font color="#000080">,</font>Width<font color="#000080">));
      </font><font color="#FF0000"><b>if </b></font>InverseOn
         <font color="#FF0000"><b>then </b></font>Normal<font color="#000080">;
      </font>GotoXY<font color="#000080">(</font>Start<font color="#000080">+</font>index<font color="#000080">,</font>WhereY<font color="#000080">);
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

   </font><font color="#FF0000"><b>Procedure </b></font>StripSpaces<font color="#000080">( </font><font color="#FF0000"><b>var </b></font>AnyString <font color="#000080">: </font><font color="#FF0000"><b>string </b></font><font color="#000080">);
   </font><font color="#008000"><i>{ decrease length of AnyString until a character until a char other than a space is found }
   </i></font><font color="#FF0000"><b>begin
      while </b></font>AnyString<font color="#000080">[ </font>ord<font color="#000080">(</font>AnyString<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]) ]=</font><font color="#800000">' ' </font><font color="#FF0000"><b>do
         </b></font>dec<font color="#000080">(</font>AnyString<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]);
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ Procedure }



</i></font><font color="#FF0000"><b>begin
   </b></font>InsertMode<font color="#000080">:=</font>false<font color="#000080">;
   </font>Start<font color="#000080">:=</font>WhereX<font color="#000080">;
   </font>index<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
   </font>NewString<font color="#000080">:=</font>Prompt<font color="#000080">;
   </font>Display<font color="#000080">;
   </font>index<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;
   </font><font color="#FF0000"><b>if </b></font>UpCaseOn
      <font color="#FF0000"><b>then </b></font>Inkey<font color="#000080">:=</font>UpCase<font color="#000080">(</font>ReadKey<font color="#000080">)
      </font><font color="#FF0000"><b>else </b></font>InKey<font color="#000080">:=</font>ReadKey<font color="#000080">;
   </font><font color="#FF0000"><b>if </b></font>InKey<font color="#000080">=</font><font color="#800000">#0
      </font><font color="#FF0000"><b>then begin
         </b></font>InKey2<font color="#000080">:=</font>ReadKey<font color="#000080">;
         </font><font color="#FF0000"><b>if </b></font>InKey2 <font color="#FF0000"><b>in </b></font><font color="#000080">[</font><font color="#800000">#77</font><font color="#000080">,</font><font color="#800000">#82</font><font color="#000080">]
            </font><font color="#FF0000"><b>then </b></font>NewString<font color="#000080">:=</font>Prompt
            <font color="#FF0000"><b>else </b></font>NewString<font color="#000080">:=</font><font color="#800000">''</font><font color="#000080">;
         </font><font color="#FF0000"><b>if </b></font>Inkey2<font color="#000080">=</font><font color="#800000">#82
            </font><font color="#FF0000"><b>then begin
               </b></font>InsertMode<font color="#000080">:=</font>true<font color="#000080">;
               </font>index<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>end </b></font><font color="#008000"><i>{ then }
      </i></font><font color="#FF0000"><b>else if </b></font>InKey <font color="#FF0000"><b>in </b></font>ValidCharSet
         <font color="#FF0000"><b>then </b></font>NewString<font color="#000080">:=</font>InKey
         <font color="#FF0000"><b>else begin
            </b></font>NewString<font color="#000080">:=</font><font color="#800000">''</font><font color="#000080">;
            </font>index<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
         </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>if </b></font>InKey<font color="#000080">=</font>esc
      <font color="#FF0000"><b>then begin
         </b></font>ReadString<font color="#000080">:=</font>Prompt<font color="#000080">;
         </font>Escape<font color="#000080">:=</font>true<font color="#000080">;
         </font>ValidCharSet<font color="#000080">:=</font>defaultSet<font color="#000080">;
         </font>exit<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>if </b></font>InKey<font color="#000080">=</font><font color="#800000">#13
      </font><font color="#FF0000"><b>then begin
         </b></font>Escape<font color="#000080">:=</font>false<font color="#000080">;
         </font>ReadString<font color="#000080">:=</font>Prompt<font color="#000080">;
         </font>ValidCharSet<font color="#000080">:=</font>DefaultSet<font color="#000080">;
         </font>exit<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font>Display<font color="#000080">;
   </font><font color="#FF0000"><b>repeat
     if </b></font>UpCaseOn
        <font color="#FF0000"><b>then </b></font>Inkey<font color="#000080">:=</font>Upcase<font color="#000080">(</font>readkey<font color="#000080">)
        </font><font color="#FF0000"><b>else </b></font>InKey<font color="#000080">:=</font>ReadKey<font color="#000080">;
     </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>InKey <font color="#FF0000"><b>in </b></font>ValidCharSet<font color="#000080">)
       </font><font color="#FF0000"><b>then begin
           if not </b></font>InsertMode
              <font color="#FF0000"><b>then </b></font>Delete<font color="#000080">(</font>NewString<font color="#000080">,</font>index<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
           </font>insert<font color="#000080">(</font>InKey<font color="#000080">,</font>NewString<font color="#000080">,</font>index<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">);
           </font><font color="#FF0000"><b>if </b></font>index<font color="#000080">&lt;&gt; </font>Width <font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>index<font color="#000080">)
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
     </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>length<font color="#000080">(</font>NewString<font color="#000080">)&lt;&gt;</font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>InKey<font color="#000080">=</font><font color="#800000">#8</font><font color="#000080">)  </font><font color="#008000"><i>{ backspace }
        </i></font><font color="#FF0000"><b>then begin
           </b></font>Delete<font color="#000080">(</font>NewString<font color="#000080">,</font>index<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
           </font><font color="#FF0000"><b>if </b></font>index<font color="#000080">&lt;&gt;</font><font color="#800000">0
              </font><font color="#FF0000"><b>then </b></font>dec<font color="#000080">(</font>index<font color="#000080">);
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
     </font><font color="#FF0000"><b>if </b></font>InKey<font color="#000080">=</font><font color="#800000">#0
        </font><font color="#FF0000"><b>then begin
           </b></font>InKey<font color="#000080">:=</font>ReadKey<font color="#000080">;
           </font><font color="#FF0000"><b>case </b></font>InKey <font color="#FF0000"><b>of
              </b></font><font color="#800000">#77 </font><font color="#000080">: </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>index<font color="#000080">&lt;&gt;</font>length<font color="#000080">(</font>NewString<font color="#000080">)) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font><font color="#800000">' ' </font><font color="#FF0000"><b>in </b></font>ValidCharSet<font color="#000080">)
                     </font><font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>index<font color="#000080">)
                     </font><font color="#FF0000"><b>else if </b></font><font color="#000080">(</font>index<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">&lt;&gt;</font>Width<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font><font color="#800000">' ' </font><font color="#FF0000"><b>in </b></font>ValidCharSet<font color="#000080">)
                        </font><font color="#FF0000"><b>then begin
                           </b></font>NewString<font color="#000080">:=</font>NewString<font color="#000080">+</font><font color="#800000">' '</font><font color="#000080">;
                           </font>inc<font color="#000080">(</font>index<font color="#000080">);
                        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
              </font><font color="#800000">#75 </font><font color="#000080">: </font><font color="#FF0000"><b>if </b></font>index<font color="#000080">&lt;&gt;</font><font color="#800000">0
                       </font><font color="#FF0000"><b>then if </b></font>length<font color="#000080">(</font>NewString<font color="#000080">)+</font><font color="#800000">1</font><font color="#000080">&lt;&gt;</font>index
                          <font color="#FF0000"><b>then </b></font>dec<font color="#000080">(</font>index<font color="#000080">)
                          </font><font color="#FF0000"><b>else if </b></font>NewString<font color="#000080">[</font>index<font color="#000080">]=</font><font color="#800000">' '
                             </font><font color="#FF0000"><b>then begin
                                </b></font>NewString<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]:=</font>succ<font color="#000080">(</font>NewString<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]);
                                </font>dec<font color="#000080">(</font>index<font color="#000080">);
                             </font><font color="#FF0000"><b>end
                             else </b></font>dec<font color="#000080">(</font>index<font color="#000080">);
              </font><font color="#800000">#83 </font><font color="#000080">: </font><font color="#FF0000"><b>if </b></font>length<font color="#000080">(</font>NewString<font color="#000080">)&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>Delete<font color="#000080">(</font>NewString<font color="#000080">,</font>index<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
              </font><font color="#800000">#82 </font><font color="#000080">: </font><font color="#FF0000"><b>if </b></font>InsertMode
                       <font color="#FF0000"><b>then </b></font>InsertMode<font color="#000080">:=</font>false
                       <font color="#FF0000"><b>else </b></font>InsertMode<font color="#000080">:=</font>true<font color="#000080">;
           </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ case }
        </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ then }
     </i></font><font color="#FF0000"><b>if </b></font>Length<font color="#000080">(</font>NewString<font color="#000080">)&gt;</font>width <font color="#FF0000"><b>then </b></font>dec<font color="#000080">( </font>NewString<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">] );
     </font><font color="#FF0000"><b>if </b></font>index <font color="#000080">&gt;= </font>width <font color="#FF0000"><b>then </b></font>dec<font color="#000080">(</font>index<font color="#000080">);
     </font>Display<font color="#000080">;
   </font><font color="#FF0000"><b>until </b></font><font color="#000080">(</font>InKey<font color="#000080">=</font><font color="#800000">#13</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>InKey<font color="#000080">=</font>esc<font color="#000080">);
   </font>ValidCharSet<font color="#000080">:=</font>DefaultSet<font color="#000080">;
   </font><font color="#FF0000"><b>if not </b></font><font color="#000080">( (</font>InKey<font color="#000080">=</font>esc<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>length<font color="#000080">(</font>NewString<font color="#000080">)=</font><font color="#800000">0</font><font color="#000080">))
      </font><font color="#FF0000"><b>then begin
         </b></font>StripSpaces<font color="#000080">(</font>NewString<font color="#000080">);
         </font>ReadString<font color="#000080">:=</font>NewString
      <font color="#FF0000"><b>end
      else </b></font>ReadString<font color="#000080">:=</font>Prompt<font color="#000080">;
   </font><font color="#FF0000"><b>if </b></font>InKey<font color="#000080">=</font>esc
      <font color="#FF0000"><b>then </b></font>Escape<font color="#000080">:=</font>true
      <font color="#FF0000"><b>else </b></font>Escape<font color="#000080">:=</font>false<font color="#000080">;

</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ Procedure }

</i></font><font color="#FF0000"><b>Function </b></font>ReadNum<font color="#000080">( </font>Prompt <font color="#000080">: </font>real<font color="#000080">; </font>Width <font color="#000080">: </font>byte<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>Escape <font color="#000080">: </font>boolean <font color="#000080">) : </font>real<font color="#000080">;
</font><font color="#FF0000"><b>var
   </b></font>NewString <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
   </font>code      <font color="#000080">: </font>integer<font color="#000080">;
   </font>OldNum    <font color="#000080">: </font>real<font color="#000080">;
   </font>Start     <font color="#000080">: </font>byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
   </b></font>OldNum<font color="#000080">:=</font>Prompt<font color="#000080">;
   </font>Start<font color="#000080">:=</font>WhereX<font color="#000080">;
   </font><font color="#FF0000"><b>repeat
      </b></font>GotoXY<font color="#000080">(</font>Start<font color="#000080">,</font>WhereY<font color="#000080">);
      </font>str<font color="#000080">( </font>Prompt<font color="#000080">:</font><font color="#800000">0</font><font color="#000080">:</font><font color="#800000">2</font><font color="#000080">, </font>NewString <font color="#000080">);
      </font>ValidCharSet<font color="#000080">:=[</font><font color="#800000">'0'</font><font color="#000080">..</font><font color="#800000">'9'</font><font color="#000080">,</font><font color="#800000">'.'</font><font color="#000080">,</font><font color="#800000">'-'</font><font color="#000080">,</font><font color="#800000">' '</font><font color="#000080">];
      </font>NewString<font color="#000080">:=</font>ReadString<font color="#000080">( </font>NewString<font color="#000080">, </font>Width<font color="#000080">, </font>Escape <font color="#000080">);
      </font>val<font color="#000080">(</font>NewString<font color="#000080">,</font>Prompt<font color="#000080">,</font>code<font color="#000080">);
   </font><font color="#FF0000"><b>until </b></font>Escape <font color="#FF0000"><b>or </b></font><font color="#000080">(</font>code<font color="#000080">=</font><font color="#800000">0</font><font color="#000080">);
   </font><font color="#FF0000"><b>if </b></font>Escape <font color="#FF0000"><b>or </b></font><font color="#000080">(</font>code<font color="#000080">&lt;&gt;</font><font color="#800000">0</font><font color="#000080">)
      </font><font color="#FF0000"><b>then </b></font>ReadNum<font color="#000080">:=</font>OldNum
      <font color="#FF0000"><b>else </b></font>ReadNum<font color="#000080">:=</font>Prompt<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>ReadInt<font color="#000080">( </font>Prompt <font color="#000080">: </font>longint<font color="#000080">; </font>Width <font color="#000080">: </font>byte<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>Escape <font color="#000080">: </font>boolean <font color="#000080">) : </font>longint<font color="#000080">;
</font><font color="#FF0000"><b>var
   </b></font>NewString <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
   </font>code      <font color="#000080">: </font>integer<font color="#000080">;
   </font>OldNum    <font color="#000080">: </font>longint<font color="#000080">;
   </font>Start     <font color="#000080">: </font>byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
   </b></font>OldNum<font color="#000080">:=</font>Prompt<font color="#000080">;
   </font>Start<font color="#000080">:=</font>WhereX<font color="#000080">;
   </font><font color="#FF0000"><b>repeat
      </b></font>GotoXY<font color="#000080">(</font>Start<font color="#000080">,</font>WhereY<font color="#000080">);
      </font>str<font color="#000080">( </font>Prompt<font color="#000080">, </font>NewString <font color="#000080">);
      </font>ValidCharSet<font color="#000080">:=[</font><font color="#800000">'0'</font><font color="#000080">..</font><font color="#800000">'9'</font><font color="#000080">,</font><font color="#800000">'-'</font><font color="#000080">,</font><font color="#800000">' '</font><font color="#000080">];
      </font>NewString<font color="#000080">:=</font>ReadString<font color="#000080">( </font>NewString<font color="#000080">, </font>Width<font color="#000080">, </font>Escape <font color="#000080">);
      </font>val<font color="#000080">(</font>NewString<font color="#000080">,</font>Prompt<font color="#000080">,</font>code<font color="#000080">);
   </font><font color="#FF0000"><b>until </b></font>Escape <font color="#FF0000"><b>or </b></font><font color="#000080">(</font>code<font color="#000080">=</font><font color="#800000">0</font><font color="#000080">);
   </font><font color="#FF0000"><b>if </b></font>Escape
      <font color="#FF0000"><b>then </b></font>ReadInt<font color="#000080">:=</font>OldNum
      <font color="#FF0000"><b>else </b></font>ReadInt<font color="#000080">:=</font>Prompt<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
   </b></font>InverseOn<font color="#000080">:=</font>true<font color="#000080">;
   </font>UpcaseOn<font color="#000080">:=</font>false<font color="#000080">;
   </font>ValidCharSet<font color="#000080">:=</font>DefaultSet<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font><font color="#008000"><i>{ -----------------------------   DEMO PROGRAM ----------------------- }
</i></font><font color="#FF0000"><b>Program </b></font>DemoInputUnit<font color="#000080">;

</font><font color="#FF0000"><b>Uses
   </b></font>Crt<font color="#000080">, </font>InputUn<font color="#000080">;

</font><font color="#FF0000"><b>var
   </b></font>InKey     <font color="#000080">: </font>char<font color="#000080">;
   </font>AnyString <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
   </font>AnyInt    <font color="#000080">: </font>longint<font color="#000080">;
   </font>AnyNum    <font color="#000080">: </font>real<font color="#000080">;
   </font>Escape    <font color="#000080">: </font>boolean<font color="#000080">;

</font><font color="#FF0000"><b>begin
   </b></font>ClrScr<font color="#000080">;
   </font>writeln<font color="#000080">;
   </font>Inverse<font color="#000080">;
   </font>writeln<font color="#000080">(</font><font color="#800000">' Text in Inverse mode '</font><font color="#000080">);
   </font>writeln<font color="#000080">;
   </font>Underline<font color="#000080">;
   </font>writeln<font color="#000080">(</font><font color="#800000">' Text in Underline mode ( if using a monochrome monitor)'</font><font color="#000080">);
   </font>writeln<font color="#000080">;
   </font>normal<font color="#000080">;
   </font>writeln<font color="#000080">(</font><font color="#800000">' Back to normal '</font><font color="#000080">);
   </font>writeln<font color="#000080">;
   </font>writeln<font color="#000080">(</font><font color="#800000">' The GoBack procedure is used...(press any key)................ '</font><font color="#000080">);
   </font>Inkey<font color="#000080">:=</font>readkey<font color="#000080">;
   </font>goback<font color="#000080">;
   </font>writeln<font color="#000080">(</font><font color="#800000">' To erase a line and write a new one  (press any key) '</font><font color="#000080">);
   </font>InKey<font color="#000080">:=</font>readkey<font color="#000080">;
   </font>ClrScr<font color="#000080">;
   </font>writeln<font color="#000080">(</font><font color="#800000">' The ReadString function takes 3 parameters'</font><font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">' Function ReadString( Prompt : string; width : byte; var Escape : boolean )'</font><font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">'                                                                    : string;'</font><font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">' Prompt is the string that is first put into the edit field.'</font><font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">' This is the string that the function returns if the function is exited with'</font><font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">' an Esc at any time, or a return while it is there.'</font><font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">' This prompt may be edited if the right arrow or the insert key is pressed'</font><font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">' on the first input, otherwise the prompt will disappear.  The return key '</font><font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">' will input all the visible characters in the field and exit the function.'</font><font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">' The Del, left and right arrow keys work as does the backspace.'</font><font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">' The Ins key toggles the insert mode where new characters are inserted '</font><font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">' instead of written over.  It is initially off.'</font><font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">' Esc will also exit the function, return the prompt as the result and set '</font><font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">' the Escape parameter to true (otherwise set to false with a return'</font><font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">' the width parameter sets the maximum length of the string'</font><font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">' This field is highlighted in Inverse. It may be turned off by setting the'</font><font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">' InverseOn to true. Another Global varible that affects this function is'</font><font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">' ValidCharSet which is initially set to the set of all printable characters.'</font><font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">' You can change it before calling this function, and is reset to the '</font><font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">' DefaultSet const after calling it.  The InverseOn varible will convert'</font><font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">' all letters to uppercase if set to true. It is initially set to false'</font><font color="#000080">);
   </font>writeln<font color="#000080">;
   </font><font color="#FF0000"><b>repeat
      </b></font>write<font color="#000080">(</font><font color="#800000">'Input a string-&gt;'</font><font color="#000080">);
      </font>AnyString<font color="#000080">:=</font>ReadString<font color="#000080">(</font><font color="#800000">'This is your prompt'</font><font color="#000080">,</font><font color="#800000">20</font><font color="#000080">,</font>escape<font color="#000080">);
      </font>writeln<font color="#000080">;
      </font>goback<font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font>escape
         <font color="#FF0000"><b>then </b></font>write<font color="#000080">(</font><font color="#800000">' Escape Exit  '</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font><font color="#800000">'Your string is '''</font><font color="#000080">,</font>AnyString<font color="#000080">,</font><font color="#800000">''''</font><font color="#000080">);
      </font>inkey<font color="#000080">:=</font>readkey<font color="#000080">;
      </font>goback<font color="#000080">;
      </font>write<font color="#000080">(</font><font color="#800000">'Input an integer ( ReadInt )-&gt;'</font><font color="#000080">);
      </font>AnyInt<font color="#000080">:=</font>ReadInt<font color="#000080">(</font><font color="#800000">123</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font>Escape<font color="#000080">);
      </font>writeln<font color="#000080">;
      </font>goback<font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font>escape
         <font color="#FF0000"><b>then </b></font>write<font color="#000080">(</font><font color="#800000">' Escape Exit  '</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font><font color="#800000">'Your integer is '</font><font color="#000080">,</font>AnyInt<font color="#000080">);
      </font><font color="#FF0000"><b>if </b></font>escape <font color="#FF0000"><b>then </b></font>exit<font color="#000080">;
      </font>inkey<font color="#000080">:=</font>readkey<font color="#000080">;
      </font>goback<font color="#000080">;
      </font>write<font color="#000080">(</font><font color="#800000">'Input a real number ( ReadNum )-&gt;'</font><font color="#000080">);
      </font>AnyNum<font color="#000080">:=</font>ReadNum<font color="#000080">(</font><font color="#800000">1.23</font><font color="#000080">,</font><font color="#800000">8</font><font color="#000080">,</font>escape<font color="#000080">);
      </font>writeln<font color="#000080">;
      </font>goback<font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font>escape
         <font color="#FF0000"><b>then </b></font>write<font color="#000080">(</font><font color="#800000">' Escape Exit  '</font><font color="#000080">);
      </font>writeln<font color="#000080">(</font><font color="#800000">'Your Number is '</font><font color="#000080">,</font>AnyNum<font color="#000080">:</font><font color="#800000">0</font><font color="#000080">:</font><font color="#800000">5</font><font color="#000080">);
      </font><font color="#FF0000"><b>if </b></font>escape <font color="#FF0000"><b>then </b></font>exit<font color="#000080">;
      </font><font color="#FF0000"><b>if not </b></font>escape
         <font color="#FF0000"><b>then begin
            </b></font>Inkey<font color="#000080">:=</font>readkey<font color="#000080">;
            </font>goback<font color="#000080">;
         </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>until </b></font>escape<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.





</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to ENTRY SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0013.PAS">Original</a><b>]</b></p></body>
</html>
