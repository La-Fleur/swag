<html>
<head><title> "Fossil unit" by RONEN MAGID</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to COMM SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0023.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
                     Version 1.2  26-August-1989

&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;
&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&Ucirc;
&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&Ucirc;
&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&Ucirc;
&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn; &Ucirc;&Ucirc;&Ucirc;                         &plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&Ucirc;&Ucirc;&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;&Uacute;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&iquest;&plusmn;&Ucirc;
&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn; &Ucirc;&Ucirc;&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn; &Ucirc;&Ucirc;&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;&sup3;   Ronen Magid's  &sup3;&plusmn;&Ucirc;
&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn; &Ucirc;&Ucirc;&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&plusmn;&plusmn;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&plusmn;&plusmn;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&plusmn;&plusmn;&Ucirc;&Ucirc;&Ucirc;&plusmn; &Ucirc;&Ucirc;&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;&sup3;                  &sup3;&plusmn;&Ucirc;
&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn; &Ucirc;&Ucirc;&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn; &Ucirc;&Ucirc;&Ucirc;  &Ucirc;&Ucirc;&Ucirc;&plusmn; &Ucirc;&Ucirc;&Ucirc;   &plusmn;&plusmn; &Ucirc;&Ucirc;&Ucirc;   &plusmn;&plusmn; &Ucirc;&Ucirc;&Ucirc;&plusmn; &Ucirc;&Ucirc;&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;&sup3;      Fossil      &sup3;&plusmn;&Ucirc;
&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn; &Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&plusmn; &Ucirc;&Ucirc;&Ucirc;&plusmn; &Ucirc;&Ucirc;&Ucirc;&plusmn; &Ucirc;&Ucirc;&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn; &Ucirc;&Ucirc;&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn; &Ucirc;&Ucirc;&Ucirc;&plusmn; &Ucirc;&Ucirc;&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;&sup3;      support     &sup3;&plusmn;&Ucirc;
&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn; &Ucirc;&Ucirc;&Ucirc;  &plusmn;&plusmn; &Ucirc;&Ucirc;&Ucirc;&plusmn; &Ucirc;&Ucirc;&Ucirc;&plusmn; &Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&plusmn; &Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&plusmn; &Ucirc;&Ucirc;&Ucirc;&plusmn; &Ucirc;&Ucirc;&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;&sup3;     Unit For     &sup3;&plusmn;&Ucirc;
&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn; &Ucirc;&Ucirc;&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn; &Ucirc;&Ucirc;&Ucirc;&plusmn; &Ucirc;&Ucirc;&Ucirc;&plusmn;     &Ucirc;&Ucirc;&Ucirc;&plusmn;     &Ucirc;&Ucirc;&Ucirc;&plusmn; &Ucirc;&Ucirc;&Ucirc;&plusmn; &Ucirc;&Ucirc;&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;&sup3;                  &sup3;&plusmn;&Ucirc;
&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn; &Ucirc;&Ucirc;&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn; &Ucirc;&Ucirc;&Ucirc;&plusmn; &Ucirc;&Ucirc;&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;  &Ucirc;&Ucirc;&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;  &Ucirc;&Ucirc;&Ucirc;&plusmn; &Ucirc;&Ucirc;&Ucirc;&plusmn; &Ucirc;&Ucirc;&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;&sup3;   TURBO PASCAL   &sup3;&plusmn;&Ucirc;
&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn; &Ucirc;&Ucirc;&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn; &Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&plusmn;&plusmn;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&plusmn;&plusmn;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&plusmn; &Ucirc;&Ucirc;&Ucirc;&plusmn; &Ucirc;&Ucirc;&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;&sup3;     versions     &sup3;&plusmn;&Ucirc;
&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;   &plusmn;&plusmn;&plusmn;&plusmn;&plusmn;        &plusmn;&plusmn;       &plusmn;&plusmn;       &plusmn;&plusmn;   &plusmn;&plusmn;   &plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&sup3;       4,5        &sup3;&plusmn;&Ucirc;
&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&Agrave;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Ugrave;&plusmn;&Ucirc;
&Ucirc;&plusmn;&plusmn;&plusmn;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&Ucirc;
&Ucirc;&plusmn;&plusmn;                                                    &plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&Ucirc;
&Ucirc;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&plusmn;&Ucirc;
&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;

          Copyright (c) 1989 by Ronen Magid. Tel (972)-52-917663 VOICE
                             972-52-27271 2400 24hrs


}

</i></font><font color="#FF0000"><b>Unit </b></font>FOSCOM<font color="#000080">;

</font><font color="#FF0000"><b>Interface

Uses
  </b></font>Dos<font color="#000080">, </font>Crt<font color="#000080">;

</font><font color="#FF0000"><b>Var
  </b></font>Regs <font color="#000080">: </font>Registers<font color="#000080">;                    </font><font color="#008000"><i>{Registers used by Intr and Ms-Dos}



{             Available user Procedures and Functions                     }

</i></font><font color="#FF0000"><b>Procedure </b></font>Fos_Init       <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Procedure </b></font>Fos_Close      <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Procedure </b></font>Fos_Parms      <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">; </font>Baud<font color="#000080">: </font>Integer<font color="#000080">; </font>DataBits<font color="#000080">: </font>Byte<font color="#000080">;
                          </font>Parity<font color="#000080">: </font>Char<font color="#000080">; </font>StopBit<font color="#000080">: </font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Procedure </b></font>Fos_Dtr        <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">; </font>State<font color="#000080">: </font>Boolean<font color="#000080">);
</font><font color="#FF0000"><b>Procedure </b></font>Fos_Flow       <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">; </font>State<font color="#000080">: </font>Boolean<font color="#000080">);
</font><font color="#FF0000"><b>Function  </b></font>Fos_CD         <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">) : </font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>Fos_Kill_Out   <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Procedure </b></font>Fos_Kill_In    <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Procedure </b></font>Fos_Flush      <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Function  </b></font>Fos_Avail      <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">) : </font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>Function  </b></font>Fos_OkToSend   <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">) : </font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>Function  </b></font>Fos_Empty      <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">) : </font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>Fos_Write      <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">; </font>Character<font color="#000080">: </font>Char<font color="#000080">);
</font><font color="#FF0000"><b>Procedure </b></font>Fos_String     <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">; </font>OutString<font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">);
</font><font color="#FF0000"><b>Procedure </b></font>Fos_StringCRLF <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">; </font>OutString<font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">);
</font><font color="#FF0000"><b>Procedure </b></font>Fos_Ansi       <font color="#000080">(</font>Character<font color="#000080">: </font>Char<font color="#000080">);
</font><font color="#FF0000"><b>Procedure </b></font>Fos_Bios       <font color="#000080">(</font>Character<font color="#000080">: </font>Char<font color="#000080">);
</font><font color="#FF0000"><b>Procedure </b></font>Fos_WatchDog   <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">; </font>State<font color="#000080">: </font>Boolean<font color="#000080">);
</font><font color="#FF0000"><b>Function  </b></font>Fos_Receive    <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">) : </font>Char<font color="#000080">;
</font><font color="#FF0000"><b>Function  </b></font>Fos_Hangup     <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">) : </font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>Fos_Reboot<font color="#000080">;
</font><font color="#FF0000"><b>Function  </b></font>Fos_CheckModem <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">) : </font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>Function  </b></font>Fos_AtCmd      <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">; </font>Command<font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">)  : </font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>Fos_Clear_Regs<font color="#000080">;


</font><font color="#FF0000"><b>Implementation

Procedure </b></font>Fos_Clear_Regs<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>FillChar <font color="#000080">(</font>Regs<font color="#000080">, </font>SizeOf <font color="#000080">(</font>Regs<font color="#000080">), </font><font color="#800000">0</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Fos_Init  <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>begin
 </b></font>Fos_Clear_Regs<font color="#000080">;
 </font><font color="#FF0000"><b>With </b></font>Regs <font color="#FF0000"><b>Do
 begin
    </b></font>AH <font color="#000080">:= </font><font color="#800000">4</font><font color="#000080">;
    </font>DX <font color="#000080">:= (</font>ComPort<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">);
    </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">, </font>Regs<font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font>AX <font color="#000080">&lt;&gt; </font><font color="#800000">$1954 </font><font color="#FF0000"><b>then
    begin
      </b></font>Writeln<font color="#000080">;
      </font>Writeln <font color="#000080">(</font><font color="#800000">' Fossil driver is not loaded.'</font><font color="#000080">);
      </font>halt <font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Fos_Close <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>begin
  </b></font>Fos_Clear_Regs<font color="#000080">;
  </font>Fos_Dtr<font color="#000080">(</font>Comport<font color="#000080">,</font>False<font color="#000080">);

  </font><font color="#FF0000"><b>With </b></font>Regs <font color="#FF0000"><b>Do
  begin
    </b></font>AH <font color="#000080">:= </font><font color="#800000">5</font><font color="#000080">;
    </font>DX <font color="#000080">:= (</font>ComPort<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">);
    </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">, </font>Regs<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Procedure </b></font>Fos_Parms <font color="#000080">(</font>ComPort<font color="#000080">: </font>Byte<font color="#000080">; </font>Baud<font color="#000080">: </font>Integer<font color="#000080">; </font>DataBits<font color="#000080">: </font>Byte<font color="#000080">;
                                    </font>Parity<font color="#000080">: </font>Char<font color="#000080">; </font>StopBit<font color="#000080">: </font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Var
 </b></font>Code<font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Code<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font>Fos_Clear_Regs<font color="#000080">;
  </font><font color="#FF0000"><b>Case </b></font>Baud <font color="#FF0000"><b>of
      </b></font><font color="#800000">0 </font><font color="#000080">: </font>Exit<font color="#000080">;
    </font><font color="#800000">100 </font><font color="#000080">: </font>code<font color="#000080">:=</font>code<font color="#000080">+</font><font color="#800000">000</font><font color="#000080">+</font><font color="#800000">00</font><font color="#000080">+</font><font color="#800000">00</font><font color="#000080">;
    </font><font color="#800000">150 </font><font color="#000080">: </font>code<font color="#000080">:=</font>code<font color="#000080">+</font><font color="#800000">000</font><font color="#000080">+</font><font color="#800000">00</font><font color="#000080">+</font><font color="#800000">32</font><font color="#000080">;
    </font><font color="#800000">300 </font><font color="#000080">: </font>code<font color="#000080">:=</font>code<font color="#000080">+</font><font color="#800000">000</font><font color="#000080">+</font><font color="#800000">64</font><font color="#000080">+</font><font color="#800000">00</font><font color="#000080">;
    </font><font color="#800000">600 </font><font color="#000080">: </font>code<font color="#000080">:=</font>code<font color="#000080">+</font><font color="#800000">000</font><font color="#000080">+</font><font color="#800000">64</font><font color="#000080">+</font><font color="#800000">32</font><font color="#000080">;
    </font><font color="#800000">1200</font><font color="#000080">: </font>code<font color="#000080">:=</font>code<font color="#000080">+</font><font color="#800000">128</font><font color="#000080">+</font><font color="#800000">00</font><font color="#000080">+</font><font color="#800000">00</font><font color="#000080">;
    </font><font color="#800000">2400</font><font color="#000080">: </font>code<font color="#000080">:=</font>code<font color="#000080">+</font><font color="#800000">128</font><font color="#000080">+</font><font color="#800000">00</font><font color="#000080">+</font><font color="#800000">32</font><font color="#000080">;
    </font><font color="#800000">4800</font><font color="#000080">: </font>code<font color="#000080">:=</font>code<font color="#000080">+</font><font color="#800000">128</font><font color="#000080">+</font><font color="#800000">64</font><font color="#000080">+</font><font color="#800000">00</font><font color="#000080">;
    </font><font color="#800000">9600</font><font color="#000080">: </font>code<font color="#000080">:=</font>code<font color="#000080">+</font><font color="#800000">128</font><font color="#000080">+</font><font color="#800000">64</font><font color="#000080">+</font><font color="#800000">32</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>Case </b></font>DataBits <font color="#FF0000"><b>of
    </b></font><font color="#800000">5</font><font color="#000080">: </font>code<font color="#000080">:=</font>code<font color="#000080">+</font><font color="#800000">0</font><font color="#000080">+</font><font color="#800000">0</font><font color="#000080">;
    </font><font color="#800000">6</font><font color="#000080">: </font>code<font color="#000080">:=</font>code<font color="#000080">+</font><font color="#800000">0</font><font color="#000080">+</font><font color="#800000">1</font><font color="#000080">;
    </font><font color="#800000">7</font><font color="#000080">: </font>code<font color="#000080">:=</font>code<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">+</font><font color="#800000">0</font><font color="#000080">;
    </font><font color="#800000">8</font><font color="#000080">: </font>code<font color="#000080">:=</font>code<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">+</font><font color="#800000">1</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>Case </b></font>Parity <font color="#FF0000"><b>of
    </b></font><font color="#800000">'N'</font><font color="#000080">,</font><font color="#800000">'n'</font><font color="#000080">: </font>code<font color="#000080">:=</font>code<font color="#000080">+</font><font color="#800000">00</font><font color="#000080">+</font><font color="#800000">0</font><font color="#000080">;
    </font><font color="#800000">'O'</font><font color="#000080">,</font><font color="#800000">'o'</font><font color="#000080">: </font>code<font color="#000080">:=</font>code<font color="#000080">+</font><font color="#800000">00</font><font color="#000080">+</font><font color="#800000">8</font><font color="#000080">;
    </font><font color="#800000">'E'</font><font color="#000080">,</font><font color="#800000">'e'</font><font color="#000080">: </font>code<font color="#000080">:=</font>code<font color="#000080">+</font><font color="#800000">16</font><font color="#000080">+</font><font color="#800000">8</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>Case </b></font>StopBit <font color="#FF0000"><b>of
    </b></font><font color="#800000">1</font><font color="#000080">: </font>code <font color="#000080">:= </font>code <font color="#000080">+ </font><font color="#800000">0</font><font color="#000080">;
    </font><font color="#800000">2</font><font color="#000080">: </font>code <font color="#000080">:= </font>code <font color="#000080">+ </font><font color="#800000">4</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>With </b></font>Regs <font color="#FF0000"><b>do
  begin
    </b></font>AH <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font>AL <font color="#000080">:= </font>Code<font color="#000080">;
    </font>DX <font color="#000080">:= (</font>ComPort<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">);
    </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">, </font>Regs<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Fos_Dtr   <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">; </font>State<font color="#000080">: </font>Boolean<font color="#000080">);
</font><font color="#FF0000"><b>begin
  </b></font>Fos_Clear_Regs<font color="#000080">;
  </font><font color="#FF0000"><b>With </b></font>Regs <font color="#FF0000"><b>do
  begin
    </b></font>AH <font color="#000080">:= </font><font color="#800000">6</font><font color="#000080">;
    </font>DX <font color="#000080">:= (</font>ComPort<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">);
    </font><font color="#FF0000"><b>Case </b></font>State <font color="#FF0000"><b>of
    </b></font>True <font color="#000080">: </font>AL <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
    </font>False<font color="#000080">: </font>AL <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">, </font>Regs<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Function  </b></font>Fos_CD    <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">) : </font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Fos_Clear_Regs<font color="#000080">;
  </font><font color="#FF0000"><b>With </b></font>Regs <font color="#FF0000"><b>do
  begin
    </b></font>AH <font color="#000080">:= </font><font color="#800000">3</font><font color="#000080">;
    </font>DX <font color="#000080">:= (</font>ComPort<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">);
    </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">, </font>Regs<font color="#000080">);
    </font>Fos_Cd <font color="#000080">:= ((</font>AL <font color="#FF0000"><b>and </b></font><font color="#800000">128</font><font color="#000080">) = </font><font color="#800000">128</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Procedure </b></font>Fos_Flow  <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">; </font>State<font color="#000080">: </font>Boolean<font color="#000080">);
</font><font color="#FF0000"><b>begin
  </b></font>Fos_Clear_Regs<font color="#000080">;
    </font><font color="#FF0000"><b>With </b></font>Regs <font color="#FF0000"><b>do
    begin
    </b></font>AH <font color="#000080">:= </font><font color="#800000">15</font><font color="#000080">;
    </font>DX <font color="#000080">:= </font>ComPort<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">;
    </font><font color="#FF0000"><b>Case </b></font>State <font color="#FF0000"><b>of
      </b></font>True<font color="#000080">:  </font>AL <font color="#000080">:= </font><font color="#800000">255</font><font color="#000080">;
      </font>False<font color="#000080">: </font>AL <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">, </font>Regs<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Fos_Kill_Out <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>begin
  </b></font>Fos_Clear_Regs<font color="#000080">;
    </font><font color="#FF0000"><b>With </b></font>Regs <font color="#FF0000"><b>do
    begin
    </b></font>AH <font color="#000080">:= </font><font color="#800000">9</font><font color="#000080">;
    </font>DX <font color="#000080">:= </font>ComPort<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">;
    </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">, </font>Regs<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Procedure </b></font>Fos_Kill_In  <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>begin
  </b></font>Fos_Clear_Regs<font color="#000080">;
  </font><font color="#FF0000"><b>With </b></font>Regs <font color="#FF0000"><b>do
  begin
    </b></font>AH <font color="#000080">:= </font><font color="#800000">10</font><font color="#000080">;
    </font>DX <font color="#000080">:= </font>ComPort<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">;
    </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">, </font>Regs<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Fos_Flush    <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>begin
  </b></font>Fos_Clear_Regs<font color="#000080">;
  </font><font color="#FF0000"><b>With </b></font>Regs <font color="#FF0000"><b>do
  begin
    </b></font>AH <font color="#000080">:= </font><font color="#800000">8</font><font color="#000080">;
    </font>DX <font color="#000080">:= </font>ComPort<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">;
    </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">, </font>Regs<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function  </b></font>Fos_Avail    <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">) : </font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Fos_Clear_Regs<font color="#000080">;
  </font><font color="#FF0000"><b>With </b></font>Regs <font color="#FF0000"><b>do
  begin
    </b></font>AH <font color="#000080">:= </font><font color="#800000">3</font><font color="#000080">;
    </font>DX <font color="#000080">:= </font>ComPort<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">;
    </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">, </font>Regs<font color="#000080">);
    </font>Fos_Avail<font color="#000080">:= ((</font>AH <font color="#FF0000"><b>and </b></font><font color="#800000">1</font><font color="#000080">) = </font><font color="#800000">1</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function  </b></font>Fos_OkToSend <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">) : </font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Fos_Clear_Regs<font color="#000080">;
  </font><font color="#FF0000"><b>With </b></font>Regs <font color="#FF0000"><b>do
  begin
    </b></font>AH <font color="#000080">:= </font><font color="#800000">3</font><font color="#000080">;
    </font>DX <font color="#000080">:= </font>ComPort<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">;
    </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">, </font>Regs<font color="#000080">);
    </font>Fos_OkToSend <font color="#000080">:= ((</font>AH <font color="#FF0000"><b>and </b></font><font color="#800000">32</font><font color="#000080">) = </font><font color="#800000">32</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Function  </b></font>Fos_Empty <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">) : </font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Fos_Clear_Regs<font color="#000080">;
  </font><font color="#FF0000"><b>With </b></font>Regs <font color="#FF0000"><b>do
  begin
    </b></font>AH <font color="#000080">:= </font><font color="#800000">3</font><font color="#000080">;
    </font>DX <font color="#000080">:= </font>ComPort<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">;
    </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">, </font>Regs<font color="#000080">);
    </font>Fos_Empty <font color="#000080">:= ((</font>AH <font color="#FF0000"><b>and </b></font><font color="#800000">64</font><font color="#000080">) = </font><font color="#800000">64</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Fos_Write     <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">; </font>Character<font color="#000080">: </font>Char<font color="#000080">);
</font><font color="#FF0000"><b>begin
  </b></font>Fos_Clear_Regs<font color="#000080">;
  </font><font color="#FF0000"><b>With </b></font>Regs <font color="#FF0000"><b>do
  begin
    </b></font>AH <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
    </font>DX <font color="#000080">:= </font>ComPort<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">;
    </font>AL <font color="#000080">:= </font>ORD <font color="#000080">(</font>Character<font color="#000080">);
    </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">, </font>Regs<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Procedure </b></font>Fos_String   <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">; </font>OutString<font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">);
</font><font color="#FF0000"><b>Var
  </b></font>Pos<font color="#000080">: </font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
  For </b></font>Pos <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>Length<font color="#000080">(</font>OutString<font color="#000080">) </font><font color="#FF0000"><b>do
  begin
     </b></font>Fos_Write<font color="#000080">(</font>Comport<font color="#000080">,</font>OutString<font color="#000080">[</font>Pos<font color="#000080">]);
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font>OutString<font color="#000080">:=</font><font color="#800000">''</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Procedure </b></font>Fos_StringCRLF  <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">; </font>OutString<font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">);
</font><font color="#FF0000"><b>Var
  </b></font>Pos<font color="#000080">: </font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
  For </b></font>Pos <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>Length<font color="#000080">(</font>OutString<font color="#000080">) </font><font color="#FF0000"><b>do
    </b></font>Fos_Write<font color="#000080">(</font>ComPort<font color="#000080">,</font>OutString<font color="#000080">[</font>Pos<font color="#000080">]);
  </font>Fos_Write<font color="#000080">(</font>ComPort<font color="#000080">,</font>Char<font color="#000080">(</font><font color="#800000">13</font><font color="#000080">));
  </font>Fos_Write<font color="#000080">(</font>ComPort<font color="#000080">,</font>Char<font color="#000080">(</font><font color="#800000">10</font><font color="#000080">));
  </font>OutString<font color="#000080">:=</font><font color="#800000">''</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Fos_Bios     <font color="#000080">(</font>Character<font color="#000080">: </font>Char<font color="#000080">);
 </font><font color="#FF0000"><b>begin
   </b></font>Fos_Clear_Regs<font color="#000080">;
   </font><font color="#FF0000"><b>With </b></font>Regs <font color="#FF0000"><b>do
   begin
     </b></font>AH <font color="#000080">:= </font><font color="#800000">21</font><font color="#000080">;
     </font>AL <font color="#000080">:= </font>ORD <font color="#000080">(</font>Character<font color="#000080">);
     </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">, </font>Regs<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Procedure </b></font>Fos_Ansi     <font color="#000080">(</font>Character<font color="#000080">: </font>Char<font color="#000080">);
</font><font color="#FF0000"><b>begin
  </b></font>Fos_Clear_Regs<font color="#000080">;
  </font><font color="#FF0000"><b>With </b></font>Regs <font color="#FF0000"><b>do
  begin
    </b></font>AH <font color="#000080">:= </font><font color="#800000">2</font><font color="#000080">;
    </font>DL <font color="#000080">:= </font>ORD <font color="#000080">(</font>Character<font color="#000080">);
    </font>Intr <font color="#000080">(</font><font color="#800000">$21</font><font color="#000080">, </font>Regs<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Procedure </b></font>Fos_WatchDog <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">; </font>State<font color="#000080">: </font>Boolean<font color="#000080">);
</font><font color="#FF0000"><b>begin
  </b></font>Fos_Clear_Regs<font color="#000080">;
  </font><font color="#FF0000"><b>With </b></font>Regs <font color="#FF0000"><b>do
  begin
    </b></font>AH <font color="#000080">:= </font><font color="#800000">20</font><font color="#000080">;
    </font>DX <font color="#000080">:= </font>ComPort<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">;
    </font><font color="#FF0000"><b>Case </b></font>State <font color="#FF0000"><b>of
      </b></font>True  <font color="#000080">: </font>AL <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
      </font>False <font color="#000080">: </font>AL <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">, </font>Regs<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Function </b></font>Fos_Receive  <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">) : </font>Char<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Fos_Clear_Regs<font color="#000080">;
  </font><font color="#FF0000"><b>With </b></font>Regs <font color="#FF0000"><b>do
  begin
    </b></font>AH <font color="#000080">:= </font><font color="#800000">2</font><font color="#000080">;
    </font>DX <font color="#000080">:= </font>ComPort<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">;
    </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">, </font>Regs<font color="#000080">);
    </font>Fos_Receive <font color="#000080">:= </font>Chr<font color="#000080">(</font>AL<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Function </b></font>Fos_Hangup   <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">) : </font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>Tcount <font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Fos_Dtr<font color="#000080">(</font>Comport<font color="#000080">,</font>False<font color="#000080">);
  </font>Delay <font color="#000080">(</font><font color="#800000">600</font><font color="#000080">);
  </font>Fos_Dtr<font color="#000080">(</font>Comport<font color="#000080">,</font>True<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>FOS_CD <font color="#000080">(</font>ComPort<font color="#000080">)=</font>True <font color="#FF0000"><b>then
  begin
    </b></font>Tcount<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;
    </font><font color="#FF0000"><b>Repeat
      </b></font>Fos_String <font color="#000080">(</font>Comport<font color="#000080">,</font><font color="#800000">'+++'</font><font color="#000080">);
      </font>Delay <font color="#000080">(</font><font color="#800000">3000</font><font color="#000080">);
      </font>Fos_StringCRLF <font color="#000080">(</font>Comport<font color="#000080">,</font><font color="#800000">'ATH0'</font><font color="#000080">);
      </font>Delay<font color="#000080">(</font><font color="#800000">3000</font><font color="#000080">);
      </font><font color="#FF0000"><b>if </b></font>Fos_CD <font color="#000080">(</font>ComPort<font color="#000080">)=</font>False <font color="#FF0000"><b>then
        </b></font>tcount<font color="#000080">:=</font><font color="#800000">3</font><font color="#000080">;
      </font>Tcount<font color="#000080">:=</font>Tcount<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">;
    </font><font color="#FF0000"><b>Until </b></font>Tcount<font color="#000080">=</font><font color="#800000">4</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>if </b></font>Fos_Cd <font color="#000080">(</font>ComPort<font color="#000080">)=</font>True <font color="#FF0000"><b>then
    </b></font>Fos_Hangup<font color="#000080">:=</font>False
  <font color="#FF0000"><b>else
    </b></font>Fos_Hangup<font color="#000080">:=</font>True<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Procedure </b></font>Fos_Reboot<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Fos_Clear_Regs<font color="#000080">;
  </font><font color="#FF0000"><b>With </b></font>Regs <font color="#FF0000"><b>do
  begin
    </b></font>AH <font color="#000080">:= </font><font color="#800000">23</font><font color="#000080">;
    </font>AL <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
    </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">, </font>Regs<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Fos_CheckModem <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">) : </font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>Ch     <font color="#000080">:   </font>Char<font color="#000080">;
  </font>Result <font color="#000080">:   </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">10</font><font color="#000080">];
  </font>I<font color="#000080">,</font>Z    <font color="#000080">:   </font>Integer<font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>Fos_CheckModem<font color="#000080">:=</font>False<font color="#000080">;
  </font>Result<font color="#000080">:=</font><font color="#800000">''</font><font color="#000080">;
  </font><font color="#FF0000"><b>For </b></font>Z<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">3 </font><font color="#FF0000"><b>do
  begin
    </b></font>Delay<font color="#000080">(</font><font color="#800000">500</font><font color="#000080">);
    </font>Fos_Write <font color="#000080">(</font>Comport<font color="#000080">,</font>Char<font color="#000080">(</font><font color="#800000">13</font><font color="#000080">));
    </font>Delay<font color="#000080">(</font><font color="#800000">1000</font><font color="#000080">);
    </font>Fos_StringCRLF <font color="#000080">(</font>Comport<font color="#000080">,</font><font color="#800000">'AT'</font><font color="#000080">);
    </font>Delay<font color="#000080">(</font><font color="#800000">1000</font><font color="#000080">);
    </font><font color="#FF0000"><b>Repeat
      if </b></font>Fos_Avail <font color="#000080">(</font>Comport<font color="#000080">) </font><font color="#FF0000"><b>then
      begin
        </b></font>Ch<font color="#000080">:=</font>Fos_Receive<font color="#000080">(</font>Comport<font color="#000080">);
        </font>Result<font color="#000080">:=</font>Result<font color="#000080">+</font>Ch<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>Until </b></font>Fos_Avail<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">)=</font>False<font color="#000080">;
    </font><font color="#FF0000"><b>For </b></font>I<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>Length<font color="#000080">(</font>Result<font color="#000080">) </font><font color="#FF0000"><b>do
    begin
      if </b></font>Copy<font color="#000080">(</font>Result<font color="#000080">,</font>I<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">)=</font><font color="#800000">'OK' </font><font color="#FF0000"><b>then
      begin
        </b></font>Fos_CheckModem<font color="#000080">:=</font>True<font color="#000080">;
        </font>Exit<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Function </b></font>Fos_AtCmd <font color="#000080">(</font>Comport<font color="#000080">: </font>Byte<font color="#000080">; </font>Command<font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">) : </font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>Ch     <font color="#000080">:   </font>Char<font color="#000080">;
  </font>Result <font color="#000080">:   </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">10</font><font color="#000080">];
  </font>I<font color="#000080">,</font>Z    <font color="#000080">:   </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Fos_AtCmd<font color="#000080">:=</font>False<font color="#000080">;
  </font>Result<font color="#000080">:=</font><font color="#800000">''</font><font color="#000080">;
  </font><font color="#FF0000"><b>For </b></font>Z<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">3 </font><font color="#FF0000"><b>do
  begin
    </b></font>Delay<font color="#000080">(</font><font color="#800000">500</font><font color="#000080">);
    </font>Fos_Write <font color="#000080">(</font>Comport<font color="#000080">,</font>Char<font color="#000080">(</font><font color="#800000">13</font><font color="#000080">));
    </font>Delay<font color="#000080">(</font><font color="#800000">1000</font><font color="#000080">);
    </font>Fos_StringCRLF <font color="#000080">(</font>Comport<font color="#000080">,</font>Command<font color="#000080">);
    </font>Delay<font color="#000080">(</font><font color="#800000">1000</font><font color="#000080">);
    </font><font color="#FF0000"><b>Repeat
      if </b></font>Fos_Avail <font color="#000080">(</font>Comport<font color="#000080">) </font><font color="#FF0000"><b>then
      begin
        </b></font>Ch<font color="#000080">:=</font>Fos_Receive<font color="#000080">(</font>Comport<font color="#000080">);
        </font>Result<font color="#000080">:=</font>Result<font color="#000080">+</font>Ch<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>Until </b></font>Fos_Avail<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">)=</font>False<font color="#000080">;
    </font><font color="#FF0000"><b>For </b></font>I<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>Length<font color="#000080">(</font>Result<font color="#000080">) </font><font color="#FF0000"><b>do
    begin
      if </b></font>Copy<font color="#000080">(</font>Result<font color="#000080">,</font>I<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">)=</font><font color="#800000">'OK' </font><font color="#FF0000"><b>then
      begin
        </b></font>Fos_AtCmd<font color="#000080">:=</font>True<font color="#000080">;
       </font>Exit<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to COMM SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0023.PAS">Original</a><b>]</b></p></body>
</html>
