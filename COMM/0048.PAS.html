<html>
<head><title> "Full Fossil Code" by MIKE WHITAKER</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to COMM SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0048.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#008000"><i>(*    &Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;&Uuml;
      &Ucirc;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&Ucirc;
      &Ucirc;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&Ucirc;
      &Ucirc;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&Ucirc;
      &Ucirc;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&Ucirc;&Ucirc;                                         &Ucirc;&Ucirc; &deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&Ucirc;
      &Ucirc;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&Ucirc;&Ucirc; &deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&Ucirc;&Ucirc; &deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&Ucirc;
      &Ucirc;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&Ucirc;&Ucirc; &deg;&deg;&deg;&deg;&deg;&deg;&deg;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&deg;&deg;&deg;&deg;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&deg;&deg;&deg;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&deg;&deg;&Ucirc;&Ucirc;&deg;&deg;&Ucirc;&Ucirc; &deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&Ucirc;
      &Ucirc;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&deg;&deg;&Ucirc;      &Ucirc;&deg;&deg;&deg;&Ucirc;       &deg;&deg;&Ucirc;       &deg;&Ucirc;&Ucirc; &deg;&Ucirc;&Ucirc; &deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&Ucirc;
      &Ucirc;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&Ucirc;&Ucirc;      &deg;&Ucirc; &deg;&deg;&deg;&deg;&deg;&Ucirc; &deg;&deg;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc; &deg;&deg;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc; &deg;&Ucirc;&Ucirc; &deg;&Ucirc;&Ucirc; &deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&Ucirc;
      &Ucirc;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&Ucirc;&Ucirc; &deg;&deg;&deg;&deg;&deg;&deg;&Ucirc; &deg;&deg;&deg;&deg;&deg;&Ucirc; &deg;&deg;&deg;     &Ucirc; &deg;&deg;&deg;     &Ucirc; &deg;&Ucirc;&Ucirc; &deg;&Ucirc;&Ucirc; &deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&Ucirc;
      &Ucirc;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&Ucirc;&Ucirc; &deg;&deg;&deg;&deg;&deg;&deg;&deg;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;  &deg;&deg;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc; &deg;&deg;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc; &deg;&Ucirc;&Ucirc; &deg;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&Ucirc;
      &Ucirc;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;  &deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;      &deg;&deg;&deg;&deg;       &deg;&deg;&deg;       &deg;&deg;  &deg;         &deg;&deg;&deg;&deg;&deg;&deg;&Ucirc;
      &Ucirc;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&Ucirc;
      &Ucirc;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&deg;&Ucirc;
      &szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;&szlig;
   &thorn;  FIDO/OPUS/SEADOG/Standard Interface Layer  &thorn;           Version 1.02

      Interface for X00 and BNU Fossil Driver(s)

      Written by: Mike Whitaker  *)

{$R-,S-,I-,D-,F+,V-,B-,N-}

</i></font><font color="#FF0000"><b>Unit </b></font>Fossil<font color="#000080">;

</font><font color="#FF0000"><b>Interface

Uses </b></font>Dos<font color="#000080">, </font>Crt<font color="#000080">;

</font><font color="#FF0000"><b>Const  </b></font>CTS_RTS  <font color="#000080">= </font><font color="#800000">2</font><font color="#000080">;    </font><font color="#008000"><i>{ To Control Flow Control }
       </i></font>XON_XOFF <font color="#000080">= </font><font color="#800000">9</font><font color="#000080">;

</font><font color="#FF0000"><b>Type </b></font>Fossil_Struct <font color="#000080">= </font><font color="#FF0000"><b>Record
       </b></font>StructSize <font color="#000080">: </font>Word<font color="#000080">;
       </font>MajorVer   <font color="#000080">: </font>Byte<font color="#000080">;
       </font>MinVer     <font color="#000080">: </font>Byte<font color="#000080">;
       </font>FOS_ID     <font color="#000080">: </font><font color="#FF0000"><b>Array </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">2</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Word<font color="#000080">;
       </font>Inp_Buffer <font color="#000080">: </font>Word<font color="#000080">;
       </font>Recv_Bytes <font color="#000080">: </font>Word<font color="#000080">;
       </font>Out_Buffer <font color="#000080">: </font>Word<font color="#000080">;
       </font>Send_Bytes <font color="#000080">: </font>Word<font color="#000080">;
       </font>SWidth     <font color="#000080">: </font>Byte<font color="#000080">;
       </font>SHeight    <font color="#000080">: </font>Byte<font color="#000080">;
       </font>BaudRate   <font color="#000080">: </font>Byte
     <font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Var </b></font>FosPort  <font color="#000080">: </font>Byte<font color="#000080">;


</font><font color="#FF0000"><b>Function  </b></font>Install_Fossil <font color="#000080">(</font>ComPort<font color="#000080">:</font>Byte<font color="#000080">):</font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>Close_Fossil <font color="#000080">(</font>ComPort<font color="#000080">:</font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Procedure </b></font>Set_Fossil <font color="#000080">(</font>ComPort<font color="#000080">:</font>Byte<font color="#000080">; </font>BaudRate<font color="#000080">:</font>LongInt<font color="#000080">; </font>DataBits<font color="#000080">:</font>Byte<font color="#000080">;
                     </font>Parity<font color="#000080">:</font>Char<font color="#000080">; </font>StopBits<font color="#000080">:</font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Procedure </b></font>SendChar <font color="#000080">(</font>K<font color="#000080">:</font>Char<font color="#000080">);
</font><font color="#FF0000"><b>Procedure </b></font>SendString <font color="#000080">(</font>S<font color="#000080">:</font><font color="#FF0000"><b>String</b></font><font color="#000080">);
</font><font color="#FF0000"><b>Function  </b></font>GetChar<font color="#000080">:</font>Char<font color="#000080">;
</font><font color="#FF0000"><b>Function  </b></font>Fossil_Chars<font color="#000080">:</font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>Function  </b></font>Fossil_Carrier<font color="#000080">:</font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>Fossil_DTR <font color="#000080">(</font>ComPort<font color="#000080">:</font>Byte<font color="#000080">; </font>State<font color="#000080">:</font>Boolean<font color="#000080">);
</font><font color="#FF0000"><b>Procedure </b></font>Hangup<font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>Fossil_Timer <font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>Tick_Int<font color="#000080">, </font>Ints_Sec<font color="#000080">:</font>Byte<font color="#000080">; </font>MS_Tics<font color="#000080">:</font>Integer<font color="#000080">);
</font><font color="#FF0000"><b>Procedure </b></font>Fossil_OutPut_FLUSH <font color="#000080">(</font>ComPort<font color="#000080">:</font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Procedure </b></font>Fossil_Nuke_Input   <font color="#000080">(</font>ComPort<font color="#000080">:</font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Procedure </b></font>Fossil_Nuke_OutPut  <font color="#000080">(</font>ComPort<font color="#000080">:</font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Function  </b></font>NoWait_Send <font color="#000080">(</font>K<font color="#000080">:</font>Char<font color="#000080">):</font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>Function  </b></font>Fossil_Peek<font color="#000080">:</font>Char<font color="#000080">;
</font><font color="#008000"><i>{Function  Fossil_GetChar:Char;}
</i></font><font color="#FF0000"><b>Function  </b></font>Fossil_Wait<font color="#000080">:</font>Char<font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>Fossil_FLOW <font color="#000080">(</font>State<font color="#000080">:</font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Procedure </b></font>Set_CtrlC <font color="#000080">(</font>ComPort<font color="#000080">, </font>State<font color="#000080">:</font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Function  </b></font>CtrlC_Check <font color="#000080">(</font>ComPort<font color="#000080">:</font>Byte<font color="#000080">):</font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>Fossil_GotoXY <font color="#000080">(</font>X<font color="#000080">,</font>Y<font color="#000080">:</font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Procedure </b></font>Fossil_Position <font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>X<font color="#000080">,</font>Y<font color="#000080">:</font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Function  </b></font>Fossil_WhereX<font color="#000080">:</font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>Function  </b></font>Fossil_WhereY<font color="#000080">:</font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>ANSI_Write <font color="#000080">(</font>K<font color="#000080">:</font>Char<font color="#000080">);
</font><font color="#FF0000"><b>Procedure </b></font>WatchDog <font color="#000080">(</font>Status<font color="#000080">:</font>Boolean<font color="#000080">);
</font><font color="#FF0000"><b>Procedure </b></font>BIOS_Write <font color="#000080">(</font>K<font color="#000080">:</font>Char<font color="#000080">);
</font><font color="#FF0000"><b>Function  </b></font>Add_Fossil_Proc    <font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>P<font color="#000080">):</font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>Function  </b></font>Delete_Fossil_Proc <font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>P<font color="#000080">):</font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>WarmBoot<font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>ColdBoot<font color="#000080">;
</font><font color="#FF0000"><b>Function  </b></font>Fossil_BlockRead  <font color="#000080">(</font>Bytes<font color="#000080">:</font>Word<font color="#000080">; </font><font color="#FF0000"><b>Var </b></font>Buffer<font color="#000080">):</font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>Function  </b></font>Fossil_BlockWrite <font color="#000080">(</font>Bytes<font color="#000080">:</font>Word<font color="#000080">; </font><font color="#FF0000"><b>Var </b></font>Buffer<font color="#000080">):</font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>Function  </b></font>Fossil_Descrip <font color="#000080">(</font>ComPort<font color="#000080">:</font>Byte<font color="#000080">):</font><font color="#FF0000"><b>String</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Function  </b></font>Fos_Ringing<font color="#000080">: </font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>Implementation



Var </b></font>R<font color="#000080">:</font>Registers<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Delay <font color="#000080">(</font>I<font color="#000080">:</font>Integer<font color="#000080">);
</font><font color="#FF0000"><b>Begin
  </b></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$86</font><font color="#000080">;
  </font>Move <font color="#000080">(</font>I<font color="#000080">,</font>R<font color="#000080">.</font>Cx<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">);
  </font>Intr <font color="#000080">(</font><font color="#800000">$15</font><font color="#000080">,</font>R<font color="#000080">)
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Install_Fossil <font color="#000080">(</font>ComPort<font color="#000080">:</font>Byte<font color="#000080">):</font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>Begin                                   </b></font><font color="#008000"><i>{ Initializes the Specified  }
  </i></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$04</font><font color="#000080">;                          </font><font color="#008000"><i>{ Communications Port        }
  </i></font>R<font color="#000080">.</font>Dx <font color="#000080">:= </font>ComPort <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;                  </font><font color="#008000"><i>{ Sets FOSPORT to COMPORT    }
  </i></font>R<font color="#000080">.</font>Bx <font color="#000080">:= </font><font color="#800000">$4F50</font><font color="#000080">;
  </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">);
  </font>Install_Fossil <font color="#000080">:= </font>R<font color="#000080">.</font>Ax <font color="#000080">= </font><font color="#800000">$1954</font><font color="#000080">;
  </font>FosPort <font color="#000080">:= </font>ComPort <font color="#000080">- </font><font color="#800000">1
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Close_Fossil <font color="#000080">(</font>ComPort<font color="#000080">:</font>Byte<font color="#000080">);  </font><font color="#008000"><i>{ Closes the Initialized     }
</i></font><font color="#FF0000"><b>Begin                                   </b></font><font color="#008000"><i>{ Communications Port        }
  </i></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$05</font><font color="#000080">;
  </font>R<font color="#000080">.</font>Dx <font color="#000080">:= </font>ComPort <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
  </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">);
  </font>FosPort <font color="#000080">:= </font><font color="#800000">255
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Procedure </b></font>Set_Fossil <font color="#000080">(</font>ComPort<font color="#000080">:</font>Byte<font color="#000080">; </font>BaudRate<font color="#000080">:</font>LongInt<font color="#000080">; </font>DataBits<font color="#000080">:</font>Byte<font color="#000080">;
                      </font>Parity<font color="#000080">:</font>Char<font color="#000080">; </font>StopBits<font color="#000080">:</font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Var </b></font>Baud<font color="#000080">,</font>Code<font color="#000080">:</font>Byte<font color="#000080">;                     </font><font color="#008000"><i>{ Sets the to the COMPORT    }
</i></font><font color="#FF0000"><b>Begin                                   </b></font><font color="#008000"><i>{ The BaudRate, DataBits,    }
  </i></font><font color="#FF0000"><b>Case </b></font>BaudRate <font color="#FF0000"><b>of                      </b></font><font color="#008000"><i>{ The Parity, And StopBits   }
   </i></font><font color="#800000">1200  </font><font color="#000080">: </font>Baud <font color="#000080">:= </font><font color="#800000">128</font><font color="#000080">;                 </font><font color="#008000"><i>{ Sets FOSPORT to COMPORT    }
   </i></font><font color="#800000">2400  </font><font color="#000080">: </font>Baud <font color="#000080">:= </font><font color="#800000">160</font><font color="#000080">;
   </font><font color="#800000">4800  </font><font color="#000080">: </font>Baud <font color="#000080">:= </font><font color="#800000">192</font><font color="#000080">;
   </font><font color="#800000">9600  </font><font color="#000080">: </font>Baud <font color="#000080">:= </font><font color="#800000">224</font><font color="#000080">;
   </font><font color="#800000">19200 </font><font color="#000080">: </font>Baud <font color="#000080">:= </font><font color="#800000">0
   </font><font color="#FF0000"><b>Else If </b></font>BaudRate <font color="#000080">= </font><font color="#800000">38400 </font><font color="#FF0000"><b>Then </b></font>Baud <font color="#000080">:= </font><font color="#800000">32
  </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>Case </b></font>DataBits <font color="#FF0000"><b>of
 </b></font><font color="#008000"><i>{ 5 : Baud := Baud + 0; }
   </i></font><font color="#800000">6 </font><font color="#000080">: </font>Baud <font color="#000080">:= </font>Baud <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
   </font><font color="#800000">7 </font><font color="#000080">: </font>Baud <font color="#000080">:= </font>Baud <font color="#000080">+ </font><font color="#800000">2</font><font color="#000080">;
   </font><font color="#800000">8 </font><font color="#000080">: </font>Baud <font color="#000080">:= </font>Baud <font color="#000080">+ </font><font color="#800000">3
  </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>Case </b></font>Parity <font color="#FF0000"><b>of
 </b></font><font color="#008000"><i>{ 'N' : Baud := Baud + 0; }
   </i></font><font color="#800000">'O' </font><font color="#000080">: </font>Baud <font color="#000080">:= </font>Baud <font color="#000080">+ </font><font color="#800000">8</font><font color="#000080">;
   </font><font color="#800000">'E' </font><font color="#000080">: </font>Baud <font color="#000080">:= </font>Baud <font color="#000080">+ </font><font color="#800000">24
  </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>Case </b></font>StopBits <font color="#FF0000"><b>of
   </b></font><font color="#800000">1 </font><font color="#000080">: </font>Baud <font color="#000080">:= </font>Baud <font color="#000080">+ </font><font color="#800000">0</font><font color="#000080">;
   </font><font color="#800000">2 </font><font color="#000080">: </font>Baud <font color="#000080">:= </font>Baud <font color="#000080">+ </font><font color="#800000">4
  </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>R<font color="#000080">.</font>Al <font color="#000080">:= </font>Baud<font color="#000080">;
  </font>R<font color="#000080">.</font>Dx <font color="#000080">:= </font>ComPort <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
  </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">);
  </font>FosPort <font color="#000080">:= </font>ComPort <font color="#000080">- </font><font color="#800000">1
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Fos_Ringing<font color="#000080">: </font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>CC <font color="#000080">: </font>Char<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Fos_Ringing <font color="#000080">:= </font>False<font color="#000080">;
  </font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$0C</font><font color="#000080">;
  </font>R<font color="#000080">.</font>Dx <font color="#000080">:= </font>fosport<font color="#000080">;
  </font>Intr<font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">, </font>R<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>r<font color="#000080">.</font>ax <font color="#000080">= </font><font color="#800000">$FFFF </font><font color="#FF0000"><b>then
    </b></font>Fos_ringing <font color="#000080">:= </font>false
  <font color="#FF0000"><b>else
  begin
    </b></font>cc <font color="#000080">:= </font>chr<font color="#000080">(</font>r<font color="#000080">.</font>al<font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font>cc <font color="#000080">= </font><font color="#800000">#13 </font><font color="#FF0000"><b>then
      </b></font>Fos_ringing <font color="#000080">:= </font>true<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;



</font><font color="#FF0000"><b>Procedure </b></font>SendChar <font color="#000080">(</font>K<font color="#000080">:</font>Char<font color="#000080">);            </font><font color="#008000"><i>{ Transmitts a Character     }
</i></font><font color="#FF0000"><b>Begin                                   </b></font><font color="#008000"><i>{ through FOSPORT Comm Port  }
  </i></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$01</font><font color="#000080">;                          </font><font color="#008000"><i>{ and then Waits.            }
  </i></font>R<font color="#000080">.</font>Al <font color="#000080">:= </font>Ord<font color="#000080">(</font>K<font color="#000080">);
  </font>R<font color="#000080">.</font>Dx <font color="#000080">:= </font>FosPort<font color="#000080">;
  </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">)
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Procedure </b></font>SendString <font color="#000080">(</font>S<font color="#000080">:</font><font color="#FF0000"><b>String</b></font><font color="#000080">);        </font><font color="#008000"><i>{ Sends a String through the }
</i></font><font color="#FF0000"><b>Var </b></font>I<font color="#000080">:</font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>I<font color="#000080">:=</font>Fossil_BlockWrite <font color="#000080">(</font>Length<font color="#000080">(</font>S<font color="#000080">),</font>S<font color="#000080">)
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Function </b></font>GetChar<font color="#000080">:</font>Char<font color="#000080">;                  </font><font color="#008000"><i>{ Gets a Character from the  }
</i></font><font color="#FF0000"><b>Begin                                   </b></font><font color="#008000"><i>{ FOSPORT Communications Port}
  </i></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$02</font><font color="#000080">;
  </font>R<font color="#000080">.</font>Dx <font color="#000080">:= </font>FosPort<font color="#000080">;
  </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">);
  </font>GetChar <font color="#000080">:= </font>Chr<font color="#000080">(</font>R<font color="#000080">.</font>Al<font color="#000080">)
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Fossil_Chars<font color="#000080">:</font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$03</font><font color="#000080">;
  </font>R<font color="#000080">.</font>Dx <font color="#000080">:= </font>FosPort<font color="#000080">;
  </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">);
  </font>Fossil_Chars <font color="#000080">:= (</font>R<font color="#000080">.</font>Ah <font color="#FF0000"><b>And </b></font><font color="#800000">1</font><font color="#000080">) = </font><font color="#800000">1
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Fossil_Carrier<font color="#000080">:</font>Boolean<font color="#000080">;        </font><font color="#008000"><i>{ Detects whether a Carrier  }
</i></font><font color="#FF0000"><b>Begin                                   </b></font><font color="#008000"><i>{ is on FOSPORT Port         }
  </i></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$03</font><font color="#000080">;
  </font>R<font color="#000080">.</font>Dx <font color="#000080">:= </font>FosPort<font color="#000080">;
  </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">);
  </font>Fossil_Carrier <font color="#000080">:= (</font>R<font color="#000080">.</font>Al <font color="#FF0000"><b>And </b></font><font color="#800000">128</font><font color="#000080">) = </font><font color="#800000">128
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Fossil_DTR <font color="#000080">(</font>ComPort<font color="#000080">:</font>Byte<font color="#000080">; </font>State<font color="#000080">:</font>Boolean<font color="#000080">);
</font><font color="#FF0000"><b>Begin                                   </b></font><font color="#008000"><i>{ Lowers/Raises the DTR on   }
  </i></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$06</font><font color="#000080">;                          </font><font color="#008000"><i>{ COMPORT                    }
  </i></font>R<font color="#000080">.</font>Al <font color="#000080">:= </font>Byte<font color="#000080">(</font>State<font color="#000080">);
  </font>R<font color="#000080">.</font>Dx <font color="#000080">:= </font>ComPort <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
  </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">)
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Procedure </b></font>Hangup<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  If Not </b></font>Fossil_Carrier <font color="#FF0000"><b>Then </b></font>Exit<font color="#000080">;
  </font>Fossil_DTR <font color="#000080">(</font>FosPort <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">,</font>False<font color="#000080">);
  </font>Delay <font color="#000080">(</font><font color="#800000">700</font><font color="#000080">);
  </font>Fossil_DTR <font color="#000080">(</font>FosPort <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">,</font>True<font color="#000080">);
  </font><font color="#FF0000"><b>If </b></font>Fossil_Carrier <font color="#FF0000"><b>Then </b></font>SendString <font color="#000080">(</font><font color="#800000">'+++'</font><font color="#000080">)
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Fossil_Timer <font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>Tick_Int<font color="#000080">, </font>Ints_Sec<font color="#000080">:</font>Byte<font color="#000080">; </font>MS_Tics<font color="#000080">:</font>Integer<font color="#000080">);
</font><font color="#FF0000"><b>Begin
  </b></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$07</font><font color="#000080">;
  </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">);
  </font>Tick_Int <font color="#000080">:= </font>R<font color="#000080">.</font>Al<font color="#000080">;
  </font>Ints_Sec <font color="#000080">:= </font>R<font color="#000080">.</font>Ah<font color="#000080">;
  </font>MS_Tics  <font color="#000080">:= </font>R<font color="#000080">.</font>Dx
<font color="#FF0000"><b>End</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Procedure </b></font>Fossil_OutPut_FLUSH <font color="#000080">(</font>ComPort<font color="#000080">:</font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Begin                                   </b></font><font color="#008000"><i>{ Forecs the OutPut Chars    }
  </i></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$08</font><font color="#000080">;                          </font><font color="#008000"><i>{ out of the Buffer          }
  </i></font>R<font color="#000080">.</font>Dx <font color="#000080">:= </font>ComPort <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
  </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">)
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Fossil_Nuke_OutPut <font color="#000080">(</font>ComPort<font color="#000080">:</font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Begin                                   </b></font><font color="#008000"><i>{ Purges the OutPut Buffer   }
  </i></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$09</font><font color="#000080">;
  </font>R<font color="#000080">.</font>Dx <font color="#000080">:= </font>ComPort <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
  </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">)
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Fossil_Nuke_Input <font color="#000080">(</font>ComPort<font color="#000080">:</font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Begin                                   </b></font><font color="#008000"><i>{ Purges the Input Buffer    }
  </i></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$0A</font><font color="#000080">;
  </font>R<font color="#000080">.</font>Dx <font color="#000080">:= </font>ComPort <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
  </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">)
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>NoWait_Send <font color="#000080">(</font>K<font color="#000080">:</font>Char<font color="#000080">):</font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$0B</font><font color="#000080">;
  </font>R<font color="#000080">.</font>Al <font color="#000080">:= </font>Ord<font color="#000080">(</font>K<font color="#000080">);
  </font>R<font color="#000080">.</font>Dx <font color="#000080">:= </font>FosPort<font color="#000080">;
  </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">);
  </font>NoWait_Send <font color="#000080">:= </font>Boolean<font color="#000080">(</font>R<font color="#000080">.</font>Ax<font color="#000080">)
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Fossil_Peek<font color="#000080">:</font>Char<font color="#000080">;              </font><font color="#008000"><i>{ Checks out what the Next   }
</i></font><font color="#FF0000"><b>Begin                                   </b></font><font color="#008000"><i>{ Character is in FOSPORT    }
  </i></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$0C</font><font color="#000080">;                          </font><font color="#008000"><i>{ Without Taking it out of   }
  </i></font>R<font color="#000080">.</font>Dx <font color="#000080">:= </font>FosPort<font color="#000080">;                      </font><font color="#008000"><i>{ the Bufffer                }
  </i></font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">);
  </font>Fossil_Peek <font color="#000080">:= </font>Chr<font color="#000080">(</font>R<font color="#000080">.</font>Al<font color="#000080">)
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Fossil_GetChar<font color="#000080">:</font>Char<font color="#000080">;         </font><font color="#008000"><i>{ Gets Character from Input Buffer }
</i></font><font color="#FF0000"><b>Begin                                 </b></font><font color="#008000"><i>{ $FFFF if none: HIGH Byte is Scan }
  </i></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$0D</font><font color="#000080">;                        </font><font color="#008000"><i>{ code                             }
  </i></font>R<font color="#000080">.</font>Dx <font color="#000080">:= </font>FosPort<font color="#000080">;
  </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">);
  </font>Fossil_GetChar <font color="#000080">:= </font>Chr<font color="#000080">(</font>R<font color="#000080">.</font>Al<font color="#000080">)
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Fossil_Wait<font color="#000080">:</font>Char<font color="#000080">;            </font><font color="#008000"><i>{ Waits until a Character has been }
</i></font><font color="#FF0000"><b>Begin                                 </b></font><font color="#008000"><i>{ Receieved                        }
  </i></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$0E</font><font color="#000080">;
  </font>R<font color="#000080">.</font>Dx <font color="#000080">:= </font>FosPort<font color="#000080">;
  </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">);
  </font>Fossil_Wait <font color="#000080">:= </font>Chr<font color="#000080">(</font>R<font color="#000080">.</font>Al<font color="#000080">)
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Fossil_FLOW <font color="#000080">(</font>State<font color="#000080">:</font>Byte<font color="#000080">);   </font><font color="#008000"><i>{ Sets Flow Control    }
</i></font><font color="#FF0000"><b>Begin                                 </b></font><font color="#008000"><i>{ 0 = Disabled         }
  </i></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$0F</font><font color="#000080">;                        </font><font color="#008000"><i>{ Bit 0 &amp; 3 = XON/XOFF } { Chars }
  </i></font>R<font color="#000080">.</font>Al <font color="#000080">:= </font>State<font color="#000080">;                      </font><font color="#008000"><i>{ Bit 1     = CTS/RTS  } { Signals * }
  </i></font>R<font color="#000080">.</font>Dx <font color="#000080">:= </font>FosPort<font color="#000080">;                    </font><font color="#008000"><i>{ Call using the defined Constants }
  </i></font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">)
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Procedure </b></font>Set_CtrlC <font color="#000080">(</font>ComPort<font color="#000080">,</font>State<font color="#000080">:</font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Begin
  </b></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$10</font><font color="#000080">;
  </font>R<font color="#000080">.</font>Al <font color="#000080">:= </font>State<font color="#000080">;
  </font>R<font color="#000080">.</font>Dx <font color="#000080">:= </font>ComPort <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
  </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">)
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>CtrlC_Check <font color="#000080">(</font>ComPort<font color="#000080">:</font>Byte<font color="#000080">):</font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$10</font><font color="#000080">;
  </font>R<font color="#000080">.</font>Al <font color="#000080">:= </font><font color="#800000">2</font><font color="#000080">;
  </font>R<font color="#000080">.</font>Dx <font color="#000080">:= </font>ComPort <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
  </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">);
  </font>CtrlC_Check <font color="#000080">:= </font>Boolean<font color="#000080">(</font>R<font color="#000080">.</font>Ax<font color="#000080">)
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Fossil_GotoXY <font color="#000080">(</font>X<font color="#000080">,</font>Y<font color="#000080">:</font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Begin
  </b></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$11</font><font color="#000080">;
  </font>R<font color="#000080">.</font>Dh <font color="#000080">:= </font>Y <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
  </font>R<font color="#000080">.</font>Dl <font color="#000080">:= </font>X <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
  </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">)
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Fossil_Position <font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>X<font color="#000080">,</font>Y<font color="#000080">:</font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Begin
  </b></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$12</font><font color="#000080">;
  </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">);
  </font>X <font color="#000080">:= </font>R<font color="#000080">.</font>Dl <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
  </font>Y <font color="#000080">:= </font>R<font color="#000080">.</font>Dh <font color="#000080">+ </font><font color="#800000">1
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Fossil_WhereX<font color="#000080">:</font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$12</font><font color="#000080">;
  </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">);
  </font>Fossil_WhereX <font color="#000080">:= </font>R<font color="#000080">.</font>Dl <font color="#000080">+ </font><font color="#800000">1
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Fossil_WhereY<font color="#000080">:</font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$12</font><font color="#000080">;
  </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">);
  </font>Fossil_WhereY <font color="#000080">:= </font>R<font color="#000080">.</font>Dh <font color="#000080">+ </font><font color="#800000">1
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>ANSI_Write <font color="#000080">(</font>K<font color="#000080">:</font>Char<font color="#000080">);        </font><font color="#008000"><i>{ Projects Character to Screen   }
</i></font><font color="#FF0000"><b>Begin                                 </b></font><font color="#008000"><i>{ through ANSI.SYS               }
  </i></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$13</font><font color="#000080">;
  </font>R<font color="#000080">.</font>Al <font color="#000080">:= </font>Ord<font color="#000080">(</font>K<font color="#000080">);
  </font>R<font color="#000080">.</font>Dx <font color="#000080">:= </font>FosPort<font color="#000080">;
  </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">)
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>WatchDog <font color="#000080">(</font>Status<font color="#000080">:</font>Boolean<font color="#000080">);  </font><font color="#008000"><i>{ Sets WatchDOG = ON/OFF        }
</i></font><font color="#FF0000"><b>Begin                                 </b></font><font color="#008000"><i>{ If ON then Reboots on Carrier }
  </i></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$14</font><font color="#000080">;                        </font><font color="#008000"><i>{ Loss!                         }
  </i></font>R<font color="#000080">.</font>Al <font color="#000080">:= </font>Byte<font color="#000080">(</font>Status<font color="#000080">);
  </font>R<font color="#000080">.</font>Dx <font color="#000080">:= </font>FosPort<font color="#000080">;
  </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">)
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>BIOS_Write <font color="#000080">(</font>K<font color="#000080">:</font>Char<font color="#000080">);        </font><font color="#008000"><i>{ Writes a Character to the     }
</i></font><font color="#FF0000"><b>Begin                                 </b></font><font color="#008000"><i>{ Screen Using BIOS Screen Write}
  </i></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$15</font><font color="#000080">;
  </font>R<font color="#000080">.</font>Al <font color="#000080">:= </font>Ord<font color="#000080">(</font>K<font color="#000080">);
  </font>R<font color="#000080">.</font>Dx <font color="#000080">:= </font>FosPort<font color="#000080">;
  </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">)
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Add_Fossil_Proc <font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>P<font color="#000080">):</font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$16</font><font color="#000080">;
  </font>R<font color="#000080">.</font>Al <font color="#000080">:= </font><font color="#800000">$01</font><font color="#000080">;
  </font>R<font color="#000080">.</font>ES <font color="#000080">:= </font>Seg <font color="#000080">(</font>P<font color="#000080">);
  </font>R<font color="#000080">.</font>DX <font color="#000080">:= </font>Ofs <font color="#000080">(</font>P<font color="#000080">);
  </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">);
  </font>Add_Fossil_Proc <font color="#000080">:= </font>R<font color="#000080">.</font>Ax <font color="#000080">= </font><font color="#800000">0
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Delete_Fossil_Proc <font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>P<font color="#000080">):</font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$16</font><font color="#000080">;
  </font>R<font color="#000080">.</font>Al <font color="#000080">:= </font><font color="#800000">$00</font><font color="#000080">;
  </font>R<font color="#000080">.</font>ES <font color="#000080">:= </font>Seg <font color="#000080">(</font>P<font color="#000080">);
  </font>R<font color="#000080">.</font>DX <font color="#000080">:= </font>Ofs <font color="#000080">(</font>P<font color="#000080">);
  </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">);
  </font>Delete_Fossil_Proc <font color="#000080">:= </font>R<font color="#000080">.</font>Ax <font color="#000080">= </font><font color="#800000">0
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>ColdBoot<font color="#000080">;                   </font><font color="#008000"><i>{ Does a Cold Reboot            }
</i></font><font color="#FF0000"><b>Begin
  </b></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$17</font><font color="#000080">;
  </font>R<font color="#000080">.</font>Al <font color="#000080">:= </font><font color="#800000">$00</font><font color="#000080">;
  </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">)
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>WarmBoot<font color="#000080">;                   </font><font color="#008000"><i>{ Does a Warm Reboot            }
</i></font><font color="#FF0000"><b>Begin
  </b></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$17</font><font color="#000080">;
  </font>R<font color="#000080">.</font>Al <font color="#000080">:= </font><font color="#800000">$01</font><font color="#000080">;
  </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">)
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Fossil_BlockRead <font color="#000080">(</font>Bytes<font color="#000080">:</font>Word<font color="#000080">; </font><font color="#FF0000"><b>Var </b></font>Buffer<font color="#000080">):</font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>Begin                                 </b></font><font color="#008000"><i>{ BUFFER is an Array, and BYTES is  }
  </i></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$18</font><font color="#000080">;                        </font><font color="#008000"><i>{ the size of the Array.            }
  </i></font>R<font color="#000080">.</font>Dx <font color="#000080">:= </font>FosPort<font color="#000080">;                    </font><font color="#008000"><i>{ It Returns the number of recieved }
  </i></font>R<font color="#000080">.</font>Cx <font color="#000080">:= </font>Bytes<font color="#000080">;                      </font><font color="#008000"><i>{ Characters.                       }
  </i></font>R<font color="#000080">.</font>ES <font color="#000080">:= </font>Seg <font color="#000080">(</font>Buffer<font color="#000080">);
  </font>R<font color="#000080">.</font>DI <font color="#000080">:= </font>Ofs <font color="#000080">(</font>Buffer<font color="#000080">);
  </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">);
  </font>Fossil_BlockRead <font color="#000080">:= </font>R<font color="#000080">.</font>Ax
<font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Fossil_BlockWrite <font color="#000080">(</font>Bytes<font color="#000080">:</font>Word<font color="#000080">; </font><font color="#FF0000"><b>Var </b></font>Buffer<font color="#000080">):</font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>Begin                                 </b></font><font color="#008000"><i>{ Writes an Array of BYTES Chars    }
  </i></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$19</font><font color="#000080">;                        </font><font color="#008000"><i>{ to the FOSPORT from BUFFER        }
  </i></font>R<font color="#000080">.</font>Dx <font color="#000080">:= </font>FosPort<font color="#000080">;                    </font><font color="#008000"><i>{ Returns the number of characters  }
  </i></font>R<font color="#000080">.</font>Cx <font color="#000080">:= </font>Bytes<font color="#000080">;                      </font><font color="#008000"><i>{ sent.                             }
  </i></font>R<font color="#000080">.</font>ES <font color="#000080">:= </font>Seg <font color="#000080">(</font>Buffer<font color="#000080">);
  </font>R<font color="#000080">.</font>DI <font color="#000080">:= </font>Ofs <font color="#000080">(</font>Buffer<font color="#000080">);
  </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">);
  </font>Fossil_BlockWrite <font color="#000080">:= </font>R<font color="#000080">.</font>Ax
<font color="#FF0000"><b>End</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Function </b></font>Fossil_Descrip <font color="#000080">(</font>ComPort<font color="#000080">:</font>Byte<font color="#000080">):</font><font color="#FF0000"><b>String</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Var </b></font>Cnt<font color="#000080">:</font>Integer<font color="#000080">;                      </font><font color="#008000"><i>{ Returns the Communications FOSSIL }
    </i></font>Fos_Arry<font color="#000080">:</font>Fossil_Struct<font color="#000080">;           </font><font color="#008000"><i>{ Driver Utilizing the COMPORT      }
    </i></font>First<font color="#000080">,</font>Second<font color="#000080">:</font>Word<font color="#000080">;                </font><font color="#008000"><i>{ Communications Port               }
    </i></font>Kar<font color="#000080">:</font>Char<font color="#000080">;                         </font><font color="#008000"><i>{ Returns the FOSSIL Driver         }
    </i></font>S<font color="#000080">:</font><font color="#FF0000"><b>String</b></font><font color="#000080">;                         </font><font color="#008000"><i>{ Description.                      }
</i></font><font color="#FF0000"><b>Begin
  </b></font>R<font color="#000080">.</font>Ah <font color="#000080">:= </font><font color="#800000">$1B</font><font color="#000080">;
  </font>R<font color="#000080">.</font>Dx <font color="#000080">:= </font>ComPort <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
  </font>R<font color="#000080">.</font>ES <font color="#000080">:= </font>Seg <font color="#000080">(</font>Fos_Arry<font color="#000080">);
  </font>R<font color="#000080">.</font>DI <font color="#000080">:= </font>Ofs <font color="#000080">(</font>Fos_Arry<font color="#000080">);
  </font>R<font color="#000080">.</font>CX <font color="#000080">:= </font>SizeOf <font color="#000080">(</font>Fos_Arry<font color="#000080">);
  </font>Intr <font color="#000080">(</font><font color="#800000">$14</font><font color="#000080">,</font>R<font color="#000080">);
  </font>First  <font color="#000080">:= </font>Fos_Arry<font color="#000080">.</font>FOS_ID<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">];
  </font>Second <font color="#000080">:= </font>Fos_Arry<font color="#000080">.</font>FOS_ID<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">];
  </font>S   <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
  </font>Kar <font color="#000080">:= </font><font color="#800000">#26</font><font color="#000080">;
  </font><font color="#FF0000"><b>While </b></font>Kar <font color="#000080">&lt;&gt; </font><font color="#800000">#0 </font><font color="#FF0000"><b>Do Begin
    </b></font>Kar<font color="#000080">:=</font>Chr <font color="#000080">(</font>Mem<font color="#000080">[</font>First<font color="#000080">:</font>Second<font color="#000080">]);
    </font>S <font color="#000080">:= </font>S <font color="#000080">+ </font>Kar<font color="#000080">;
    </font>Second<font color="#000080">:=</font>Second <font color="#000080">+ </font><font color="#800000">1
  </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font>Fossil_Descrip<font color="#000080">:=</font>S
<font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Begin
End</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to COMM SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0048.PAS">Original</a><b>]</b></p></body>
</html>
