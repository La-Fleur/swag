<html>
<head><title> "Another AVATAR Routine" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to COMM SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0011.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
GREGORY P. SMITH

Here's a Unit I just pieced together from some old code I wrote a couple
years ago.  It'll generate AVT/0+ and ANSI codes:
}

</i></font><font color="#FF0000"><b>Unit </b></font>TermCode<font color="#000080">;  </font><font color="#008000"><i>{$S-,D-,L-,R-,F-,O-}
{  Generate ANSI and AVT/0+ codes For color and cursor ctrl }
{  Public Domain -- by Gregory P. Smith  }  { untested }

</i></font><font color="#FF0000"><b>Interface

Type
  </b></font>Str12 <font color="#000080">= </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">12</font><font color="#000080">];  </font><font color="#008000"><i>{ Maximum size For most ANSI Strings }
  </i></font>Str3  <font color="#000080">= </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">3</font><font color="#000080">];
  </font>grTermType <font color="#000080">= (</font>TTY<font color="#000080">, </font>ANSI<font color="#000080">, </font>AVT0<font color="#000080">); </font><font color="#008000"><i>{ TTY, ANSI or Avatar/0+ }

</i></font><font color="#FF0000"><b>Var
  </b></font>grTerm <font color="#000080">: </font>grTermType<font color="#000080">;
  </font>grColor <font color="#000080">: </font>Byte<font color="#000080">;  </font><font color="#008000"><i>{ Last color set }

{ Non Specific Functions }
</i></font><font color="#FF0000"><b>Function </b></font>grRepChar<font color="#000080">(</font>c<font color="#000080">:</font>Char<font color="#000080">;</font>n<font color="#000080">:</font>Byte<font color="#000080">): </font><font color="#FF0000"><b>String</b></font><font color="#000080">;   </font><font color="#008000"><i>{ Repeat Chars }
</i></font><font color="#FF0000"><b>Function </b></font>grSetPos<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">:</font>Byte<font color="#000080">): </font>Str12<font color="#000080">;   </font><font color="#008000"><i>{ Set Cursor Position }
</i></font><font color="#FF0000"><b>Function </b></font>grCLS<font color="#000080">: </font>Str12<font color="#000080">;          </font><font color="#008000"><i>{ Clear Screen + reset Attr }
</i></font><font color="#FF0000"><b>Function </b></font>grDelEOL<font color="#000080">: </font>Str12<font color="#000080">;                   </font><font color="#008000"><i>{ Delete to EOL }

</i></font><font color="#FF0000"><b>Function </b></font>grSetAttr<font color="#000080">(</font>a<font color="#000080">:</font>Byte<font color="#000080">): </font>Str12<font color="#000080">;      </font><font color="#008000"><i>{ Change writing color }
</i></font><font color="#FF0000"><b>Function </b></font>grSetColor<font color="#000080">(</font>fg<font color="#000080">,</font>bg<font color="#000080">:</font>Byte<font color="#000080">): </font>Str12<font color="#000080">; </font><font color="#008000"><i>{ Change color fg &amp; bg }

{ AVT/0+ Specific Functions }
</i></font><font color="#FF0000"><b>Function </b></font>AVTRepPat<font color="#000080">(</font>pat<font color="#000080">:</font><font color="#FF0000"><b>String</b></font><font color="#000080">;</font>n<font color="#000080">:</font>Byte<font color="#000080">): </font><font color="#FF0000"><b>String</b></font><font color="#000080">; </font><font color="#008000"><i>{ Repeat Pattern (AVT/0+) }
</i></font><font color="#FF0000"><b>Function </b></font>AVTScrollUp<font color="#000080">(</font>n<font color="#000080">,</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">:</font>Byte<font color="#000080">): </font>Str12<font color="#000080">;
</font><font color="#FF0000"><b>Function </b></font>AVTScrollDown<font color="#000080">(</font>n<font color="#000080">,</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">:</font>Byte<font color="#000080">): </font>Str12<font color="#000080">;
</font><font color="#FF0000"><b>Function </b></font>AVTClearArea<font color="#000080">(</font>a<font color="#000080">,</font>l<font color="#000080">,</font>c<font color="#000080">:</font>Byte<font color="#000080">): </font>Str12<font color="#000080">;
</font><font color="#FF0000"><b>Function </b></font>AVTInitArea<font color="#000080">(</font>ch<font color="#000080">:</font>Char<font color="#000080">;</font>a<font color="#000080">,</font>l<font color="#000080">,</font>c<font color="#000080">:</font>Byte<font color="#000080">): </font>Str12<font color="#000080">;

</font><font color="#FF0000"><b>Implementation

Const
  </b></font>hdr <font color="#000080">= </font><font color="#800000">#27'['</font><font color="#000080">; </font><font color="#008000"><i>{ ansi header }

{ Misc support Functions }

</i></font><font color="#FF0000"><b>Function </b></font>bts<font color="#000080">(</font>x<font color="#000080">:</font>Byte<font color="#000080">): </font>str3<font color="#000080">; </font><font color="#008000"><i>{ Byte to String }
</i></font><font color="#FF0000"><b>Var
  </b></font>z<font color="#000080">: </font>str3<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Str<font color="#000080">(</font>x<font color="#000080">,</font>z<font color="#000080">);
  </font>bts <font color="#000080">:= </font>z<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Repl<font color="#000080">(</font>n<font color="#000080">:</font>Byte<font color="#000080">; </font>c<font color="#000080">:</font>Char<font color="#000080">): </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>z <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>fillChar<font color="#000080">(</font>z<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">],</font>n<font color="#000080">,</font>c<font color="#000080">);
  </font>z<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">] := </font>chr<font color="#000080">(</font>n<font color="#000080">);
  </font>repl <font color="#000080">:= </font>z<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ Cursor Control Functions }

</i></font><font color="#FF0000"><b>Function </b></font>grRepChar<font color="#000080">(</font>c<font color="#000080">:</font>Char<font color="#000080">;</font>n<font color="#000080">:</font>Byte<font color="#000080">): </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
  if </b></font>grTerm <font color="#000080">= </font>AVT0 <font color="#FF0000"><b>then
    </b></font>grRepChar <font color="#000080">:= ^</font>Y<font color="#000080">+</font>c<font color="#000080">+</font>chr<font color="#000080">(</font>n<font color="#000080">)
  </font><font color="#FF0000"><b>else
    </b></font>grRepChar <font color="#000080">:= </font>repl<font color="#000080">(</font>n<font color="#000080">,</font>c<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ repcahr }

</i></font><font color="#FF0000"><b>Function </b></font>grSetPos<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">:</font>Byte<font color="#000080">): </font>Str12<font color="#000080">;
</font><font color="#FF0000"><b>begin
  Case </b></font>grTerm <font color="#FF0000"><b>of
    </b></font>ANSI <font color="#000080">: </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>x <font color="#000080">= </font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>y <font color="#000080">&gt; </font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>then
             </b></font>grSetPos <font color="#000080">:= </font>hdr<font color="#000080">+</font>bts<font color="#000080">(</font>y<font color="#000080">)+</font><font color="#800000">'H'   </font><font color="#008000"><i>{ x defualts to 1 }
           </i></font><font color="#FF0000"><b>else
             </b></font>grSetPos <font color="#000080">:= </font>hdr<font color="#000080">+</font>bts<font color="#000080">(</font>y<font color="#000080">)+</font><font color="#800000">';'</font><font color="#000080">+</font>bts<font color="#000080">(</font>x<font color="#000080">)+</font><font color="#800000">'H'</font><font color="#000080">;
    </font>AVT0 <font color="#000080">: </font>grSetPos <font color="#000080">:= ^</font>V<font color="#000080">+^</font>H<font color="#000080">+</font>chr<font color="#000080">(</font>y<font color="#000080">)+</font>chr<font color="#000080">(</font>x<font color="#000080">);
    </font>TTY  <font color="#000080">: </font>grSetPos <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ Case }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Function </b></font>grCLS<font color="#000080">: </font>Str12<font color="#000080">;
</font><font color="#FF0000"><b>begin
  Case </b></font>grTerm <font color="#FF0000"><b>of
    </b></font>ANSI <font color="#000080">: </font>grCLS <font color="#000080">:= </font>hdr<font color="#000080">+</font><font color="#800000">'2J'</font><font color="#000080">;
    </font>TTY<font color="#000080">,
    </font>AVT0 <font color="#000080">: </font>grCLS <font color="#000080">:= ^</font>L<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>grTerm <font color="#000080">= </font>AVT0 <font color="#FF0000"><b>then </b></font>GrColor <font color="#000080">:= </font><font color="#800000">3</font><font color="#000080">; </font><font color="#008000"><i>{ reset the color }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ cls }

</i></font><font color="#FF0000"><b>Function </b></font>grDelEOL<font color="#000080">: </font>Str12<font color="#000080">; </font><font color="#008000"><i>{ clear rest of line }
</i></font><font color="#FF0000"><b>begin
  Case </b></font>grTerm <font color="#FF0000"><b>of
    </b></font>ANSI <font color="#000080">: </font>grDelEOL <font color="#000080">:= </font>hdr<font color="#000080">+</font><font color="#800000">'K'</font><font color="#000080">;
    </font>AVT0 <font color="#000080">: </font>grDelEOL <font color="#000080">:= ^</font>V<font color="#000080">^</font>G<font color="#000080">;
    </font>TTY  <font color="#000080">: </font>grDelEOL <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ Color Functions }

</i></font><font color="#FF0000"><b>Function </b></font>grSetAttr<font color="#000080">(</font>a<font color="#000080">:</font>Byte<font color="#000080">): </font>Str12<font color="#000080">;
</font><font color="#FF0000"><b>Const
  </b></font>ANS_Colors <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">7</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Char <font color="#000080">= (</font><font color="#800000">'0'</font><font color="#000080">,</font><font color="#800000">'4'</font><font color="#000080">,</font><font color="#800000">'2'</font><font color="#000080">,</font><font color="#800000">'6'</font><font color="#000080">,</font><font color="#800000">'1'</font><font color="#000080">,</font><font color="#800000">'5'</font><font color="#000080">,</font><font color="#800000">'3'</font><font color="#000080">,</font><font color="#800000">'7'</font><font color="#000080">);
</font><font color="#FF0000"><b>Var
  </b></font>tmp <font color="#000080">: </font>Str12<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>tmp <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
  </font><font color="#FF0000"><b>Case </b></font>grTerm <font color="#FF0000"><b>of
    </b></font>ANSI <font color="#000080">:
    </font><font color="#FF0000"><b>begin
      </b></font>tmp <font color="#000080">:= </font>hdr<font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>a <font color="#FF0000"><b>and </b></font><font color="#800000">$08</font><font color="#000080">)=</font><font color="#800000">8 </font><font color="#FF0000"><b>then </b></font>tmp <font color="#000080">:= </font>tmp<font color="#000080">+</font><font color="#800000">'1' </font><font color="#FF0000"><b>else </b></font>tmp <font color="#000080">:= </font>tmp<font color="#000080">+</font><font color="#800000">'0'</font><font color="#000080">; </font><font color="#008000"><i>{ bright }
      </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>a <font color="#FF0000"><b>and </b></font><font color="#800000">$80</font><font color="#000080">)=</font><font color="#800000">$80 </font><font color="#FF0000"><b>then </b></font>tmp <font color="#000080">:= </font>tmp<font color="#000080">+</font><font color="#800000">';5'</font><font color="#000080">;  </font><font color="#008000"><i>{ blink }
      </i></font>tmp <font color="#000080">:= </font>tmp<font color="#000080">+</font><font color="#800000">';3'</font><font color="#000080">+</font>ANS_Colors<font color="#000080">[</font>a <font color="#FF0000"><b>and </b></font><font color="#800000">$07</font><font color="#000080">]; </font><font color="#008000"><i>{ foreground }
      </i></font>tmp <font color="#000080">:= </font>tmp<font color="#000080">+</font><font color="#800000">';4'</font><font color="#000080">+</font>ANS_Colors<font color="#000080">[(</font>a <font color="#FF0000"><b>shr </b></font><font color="#800000">4</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#800000">$07</font><font color="#000080">]; </font><font color="#008000"><i>{ background }
      </i></font>grSetAttr <font color="#000080">:= </font>tmp<font color="#000080">+</font><font color="#800000">'m'</font><font color="#000080">; </font><font color="#008000"><i>{ complete ANSI code }
    </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>AVT0 <font color="#000080">:
    </font><font color="#FF0000"><b>begin
      </b></font>tmp <font color="#000080">:= ^</font>V<font color="#000080">+^</font>A<font color="#000080">+</font>chr<font color="#000080">(</font>a <font color="#FF0000"><b>and </b></font><font color="#800000">$7f</font><font color="#000080">);
      </font><font color="#FF0000"><b>if </b></font>a <font color="#000080">&gt; </font><font color="#800000">127  </font><font color="#FF0000"><b>then </b></font>tmp <font color="#000080">:= </font>tmp<font color="#000080">+^</font>V<font color="#000080">+^</font>B<font color="#000080">; </font><font color="#008000"><i>{ Blink }
      </i></font>grSetAttr <font color="#000080">:= </font>tmp<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>TTY  <font color="#000080">: </font>grSetAttr <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ Case }
  </i></font>GrColor <font color="#000080">:= </font>a<font color="#000080">; </font><font color="#008000"><i>{ Current Attribute }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ setattr }

</i></font><font color="#FF0000"><b>Function </b></font>grSetColor<font color="#000080">(</font>fg<font color="#000080">,</font>bg<font color="#000080">:</font>Byte<font color="#000080">): </font>Str12<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>grSetColor <font color="#000080">:= </font>grSetAttr<font color="#000080">((</font>bg <font color="#FF0000"><b>shl </b></font><font color="#800000">4</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>fg <font color="#FF0000"><b>and </b></font><font color="#800000">$0f</font><font color="#000080">));
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ SetColor }

{ AVATAR Specific Functions: }

</i></font><font color="#FF0000"><b>Function </b></font>AVTRepPat<font color="#000080">(</font>pat<font color="#000080">:</font><font color="#FF0000"><b>String</b></font><font color="#000080">;</font>n<font color="#000080">:</font>Byte<font color="#000080">): </font><font color="#FF0000"><b>String</b></font><font color="#000080">; </font><font color="#008000"><i>{ Repeat Pattern (AVT/0+) }
</i></font><font color="#FF0000"><b>begin
  </b></font>AVTRepPat <font color="#000080">:= ^</font>V<font color="#000080">+^</font>Y<font color="#000080">+</font>pat<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]+</font>pat<font color="#000080">+</font>chr<font color="#000080">(</font>n<font color="#000080">); </font><font color="#008000"><i>{ Repeat pat n times }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>AVTScrollUp<font color="#000080">(</font>n<font color="#000080">,</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">:</font>Byte<font color="#000080">): </font>Str12<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>AVTScrollUp <font color="#000080">:= ^</font>V<font color="#000080">+^</font>J<font color="#000080">+</font>chr<font color="#000080">(</font>n<font color="#000080">)+</font>chr<font color="#000080">(</font>y1<font color="#000080">)+</font>chr<font color="#000080">(</font>x1<font color="#000080">)+</font>chr<font color="#000080">(</font>y2<font color="#000080">)+</font>chr<font color="#000080">(</font>x2<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ AVTScrollUp }

</i></font><font color="#FF0000"><b>Function </b></font>AVTScrollDown<font color="#000080">(</font>n<font color="#000080">,</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">:</font>Byte<font color="#000080">): </font>Str12<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>AVTScrollDown <font color="#000080">:= ^</font>V<font color="#000080">+^</font>K<font color="#000080">+</font>chr<font color="#000080">(</font>n<font color="#000080">)+</font>chr<font color="#000080">(</font>y1<font color="#000080">)+</font>chr<font color="#000080">(</font>x1<font color="#000080">)+</font>chr<font color="#000080">(</font>y2<font color="#000080">)+</font>chr<font color="#000080">(</font>x2<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ AVTScrollDown }

</i></font><font color="#FF0000"><b>Function </b></font>AVTClearArea<font color="#000080">(</font>a<font color="#000080">,</font>l<font color="#000080">,</font>c<font color="#000080">:</font>Byte<font color="#000080">): </font>Str12<font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>b<font color="#000080">:</font>Byte<font color="#000080">;
  </font>s<font color="#000080">:</font>Str12<font color="#000080">;
</font><font color="#FF0000"><b>begin       </b></font><font color="#008000"><i>{ Clear lines,columns from cursor pos With Attr }
  </i></font>b <font color="#000080">:= </font>a <font color="#FF0000"><b>and </b></font><font color="#800000">$7f</font><font color="#000080">;
  </font>s <font color="#000080">:= ^</font>V<font color="#000080">+^</font>L<font color="#000080">+</font>chr<font color="#000080">(</font>b<font color="#000080">)+</font>chr<font color="#000080">(</font>l<font color="#000080">)+</font>chr<font color="#000080">(</font>c<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>a <font color="#000080">&gt; </font><font color="#800000">127 </font><font color="#FF0000"><b>then
    </b></font>Insert<font color="#000080">(^</font>V<font color="#000080">+^</font>B<font color="#000080">,</font>s<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">); </font><font color="#008000"><i>{ blink on }
  </i></font>AVTClearArea <font color="#000080">:= </font>s<font color="#000080">;
  </font>GrColor <font color="#000080">:= </font>a<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ AVTClearArea }

</i></font><font color="#FF0000"><b>Function </b></font>AVTInitArea<font color="#000080">(</font>ch<font color="#000080">:</font>Char<font color="#000080">;</font>a<font color="#000080">,</font>l<font color="#000080">,</font>c<font color="#000080">:</font>Byte<font color="#000080">): </font>Str12<font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>b<font color="#000080">:</font>Byte<font color="#000080">;
  </font>s<font color="#000080">:</font>Str12<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>b <font color="#000080">:= </font>a <font color="#FF0000"><b>and </b></font><font color="#800000">$7f</font><font color="#000080">;
  </font>s <font color="#000080">:= ^</font>V<font color="#000080">+^</font>M<font color="#000080">+</font>chr<font color="#000080">(</font>b<font color="#000080">)+</font>ch<font color="#000080">+</font>chr<font color="#000080">(</font>l<font color="#000080">)+</font>chr<font color="#000080">(</font>c<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>a <font color="#000080">&gt; </font><font color="#800000">127 </font><font color="#FF0000"><b>then
    </b></font>Insert<font color="#000080">(^</font>V<font color="#000080">+^</font>B<font color="#000080">,</font>s<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
  </font>AvtInitArea <font color="#000080">:= </font>s<font color="#000080">;
  </font>GrColor <font color="#000080">:= </font>a<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ AVTInitArea }

{ Initalization code }
</i></font><font color="#FF0000"><b>begin
  </b></font>GrTerm  <font color="#000080">:= </font>AVT0<font color="#000080">;  </font><font color="#008000"><i>{ Default to Avatar }
  </i></font>GrColor <font color="#000080">:= </font><font color="#800000">3</font><font color="#000080">;     </font><font color="#008000"><i>{ Cyan is the AVT/0+ defualt }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font><font color="#008000"><i>{
set GrTerm to whatever terminal codes you want to create; then you can use the
common routines to generate ANSI or Avatar codes.  Here's a Print Procedure
that you were mentioning:
}

</i></font><font color="#FF0000"><b>Procedure </b></font>Print<font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>msg<font color="#000080">:</font><font color="#FF0000"><b>String</b></font><font color="#000080">);
</font><font color="#FF0000"><b>Var
  </b></font>idx <font color="#000080">: </font>Byte
<font color="#FF0000"><b>begin
  if </b></font>length<font color="#000080">(</font>msg<font color="#000080">) &gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
    For </b></font>idx <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>length<font color="#000080">(</font>msg<font color="#000080">) </font><font color="#FF0000"><b>do begin
      </b></font>Parse_AVT1<font color="#000080">(</font>msg<font color="#000080">[</font>idx<font color="#000080">]);
      </font>SendOutComPortThingy<font color="#000080">(</font>msg<font color="#000080">[</font>idx<font color="#000080">]);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ For }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{
You could modify this so that it pays attention to the TextAttr Variable of the
Crt Unit if you wish so that it compares TextAttr to GrColor and adds a
SetAttr(TextAttr) command in before it sends msg.
}</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to COMM SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0011.PAS">Original</a><b>]</b></p></body>
</html>
