<html>
<head><title> "Palette Fades/Transparent" by DAVID DAHL</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0127.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>Program </b></font>Transparent<font color="#000080">;
</font><font color="#008000"><i>{                                       }
{   Example of How Transparency Works   }
{                                       }
{  Programmed by David Dahl @ 1:272/38  }
{                                       }
{     This program is PUBLIC DOMAIN     }
{                                       }
</i></font><font color="#FF0000"><b>Uses </b></font>CRT<font color="#000080">, </font>Palette<font color="#000080">;

</font><font color="#FF0000"><b>Type </b></font>ImageArray <font color="#000080">= </font><font color="#FF0000"><b>Array </b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">15</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">15</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte<font color="#000080">;

     </font>LocationRec <font color="#000080">= </font><font color="#FF0000"><b>Record
                         </b></font>X <font color="#000080">: </font>Integer<font color="#000080">;
                         </font>Y <font color="#000080">: </font>Integer<font color="#000080">;
                   </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

     </font>VGABufferArray <font color="#000080">= </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">199</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">319</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte<font color="#000080">;
     </font>VGABufferPtr   <font color="#000080">= ^</font>VGABufferArray<font color="#000080">;

</font><font color="#FF0000"><b>Const </b></font>BobTemplate <font color="#000080">: </font>ImageArray <font color="#000080">=
              ((</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">07</font><font color="#000080">,</font><font color="#800000">07</font><font color="#000080">,</font><font color="#800000">07</font><font color="#000080">,</font><font color="#800000">07</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">),
               (</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">07</font><font color="#000080">,</font><font color="#800000">07</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">06</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">),
               (</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">07</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">),
               (</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">07</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">03</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">),
               (</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">07</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">),
               (</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">07</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">01</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">),
               (</font><font color="#800000">07</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">01</font><font color="#000080">),
               (</font><font color="#800000">07</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">01</font><font color="#000080">),
               (</font><font color="#800000">07</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">01</font><font color="#000080">),
               (</font><font color="#800000">07</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">01</font><font color="#000080">),
               (</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">06</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">01</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">),
               (</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">06</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">01</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">),
               (</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">01</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">),
               (</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">01</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">),
               (</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">03</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">01</font><font color="#000080">,</font><font color="#800000">01</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">),
               (</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">01</font><font color="#000080">,</font><font color="#800000">01</font><font color="#000080">,</font><font color="#800000">01</font><font color="#000080">,</font><font color="#800000">01</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">,</font><font color="#800000">00</font><font color="#000080">));

      </font>MaxBob <font color="#000080">= </font><font color="#800000">2</font><font color="#000080">; </font><font color="#008000"><i>{ 3 Bobs (0 .. 2) }

</i></font><font color="#FF0000"><b>Var </b></font>VGA        <font color="#000080">: </font>VGABufferPtr<font color="#000080">;
    </font>BackGround <font color="#000080">: </font>VGABufferPtr<font color="#000080">;
    </font>WorkPage   <font color="#000080">: </font>VGABufferPtr<font color="#000080">;

    </font>Pal <font color="#000080">: </font>PaletteArray<font color="#000080">;

    </font>BobImage    <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font>MaxBob<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>ImageArray<font color="#000080">;
    </font>BobLocation <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font>MaxBob<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>LocationRec<font color="#000080">;

    </font>Counter1 <font color="#000080">: </font>Integer<font color="#000080">;
    </font>Counter2 <font color="#000080">: </font>Integer<font color="#000080">;

</font><font color="#008000"><i>{-[ Set VGA Mode 13h (320 X 200 X 256 Chain 4) ]------------------------}
</i></font><font color="#FF0000"><b>Procedure </b></font>SetMode13h<font color="#000080">; </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>ASM
   </b></font><font color="#FF00FF">MOV AX, $13
   INT $10
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#008000"><i>{-[ Put A 16 X 16 Image by ORing it With Background ]-------------------}
</i></font><font color="#FF0000"><b>Procedure </b></font>Put16X16ImageOR <font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>Bob    <font color="#000080">: </font>ImageArray<font color="#000080">;
                               </font>X<font color="#000080">, </font>Y   <font color="#000080">: </font>Integer<font color="#000080">);
</font><font color="#FF0000"><b>Var </b></font>CounterX<font color="#000080">,
    </font>CounterY  <font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>Begin
     For </b></font>CounterY <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">15 </font><font color="#FF0000"><b>do
      For </b></font>CounterX <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">15 </font><font color="#FF0000"><b>do
       </b></font>WorkPage<font color="#000080">^[</font>CounterY <font color="#000080">+ </font>Y<font color="#000080">, </font>CounterX <font color="#000080">+ </font>X<font color="#000080">] :=
        </font>WorkPage<font color="#000080">^[</font>CounterY <font color="#000080">+ </font>Y<font color="#000080">, </font>CounterX <font color="#000080">+ </font>X<font color="#000080">] </font><font color="#FF0000"><b>OR </b></font>Bob<font color="#000080">[</font>CounterX<font color="#000080">, </font>CounterY<font color="#000080">];
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#008000"><i>{-[ Update Bob Positions ]----------------------------------------------}
</i></font><font color="#FF0000"><b>Procedure </b></font>UpdateBobs<font color="#000080">;
</font><font color="#FF0000"><b>Var </b></font>BobCounter <font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>Begin
     For </b></font>BobCounter <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>MaxBob <font color="#FF0000"><b>do
     Begin
          </b></font>Inc <font color="#000080">(</font>Counter1<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
          </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>Counter1 <font color="#000080">&gt;= </font><font color="#800000">360</font><font color="#000080">) </font><font color="#FF0000"><b>do
             </b></font>Dec<font color="#000080">(</font>Counter1<font color="#000080">, </font><font color="#800000">360</font><font color="#000080">);

          </font><font color="#FF0000"><b>If </b></font><font color="#000080">(</font>Counter1 <font color="#FF0000"><b>MOD </b></font><font color="#800000">2</font><font color="#000080">) = </font><font color="#800000">0
          </font><font color="#FF0000"><b>Then
          Begin
               </b></font>Inc<font color="#000080">(</font>Counter2<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
               </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>Counter2 <font color="#000080">&gt;= </font><font color="#800000">360</font><font color="#000080">) </font><font color="#FF0000"><b>do
                     </b></font>Dec<font color="#000080">(</font>Counter2<font color="#000080">, </font><font color="#800000">360</font><font color="#000080">);
          </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

          </font>BobLocation<font color="#000080">[</font>BobCounter<font color="#000080">].</font>X <font color="#000080">:= </font><font color="#800000">160 </font><font color="#000080">+
             </font>Round<font color="#000080">(</font><font color="#800000">90 </font><font color="#000080">* -</font>Sin<font color="#000080">((</font>Counter1 <font color="#000080">+ (</font>BobCounter<font color="#000080">*</font>Counter2<font color="#000080">))*</font>PI<font color="#000080">/</font><font color="#800000">180</font><font color="#000080">));

          </font>BobLocation<font color="#000080">[</font>BobCounter<font color="#000080">].</font>Y <font color="#000080">:= </font><font color="#800000">95 </font><font color="#000080">+
             </font>Round<font color="#000080">(</font><font color="#800000">60 </font><font color="#000080">* </font>Cos<font color="#000080">((</font>Counter2 <font color="#000080">+ (</font>BobCounter<font color="#000080">*</font>Counter1<font color="#000080">))*</font>PI<font color="#000080">/</font><font color="#800000">180</font><font color="#000080">));

     </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#008000"><i>{-[ Draw All Bobs To Work Buffer ]--------------------------------------}
</i></font><font color="#FF0000"><b>Procedure </b></font>DrawBobs<font color="#000080">;
</font><font color="#FF0000"><b>Var </b></font>BobCounter <font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>Begin
     For </b></font>BobCounter <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>MaxBob <font color="#FF0000"><b>do
         </b></font>Put16X16ImageOR <font color="#000080">(</font>BobImage<font color="#000080">[</font>BobCounter<font color="#000080">],
            </font>BobLocation<font color="#000080">[</font>BobCounter<font color="#000080">].</font>X<font color="#000080">, </font>BobLocation<font color="#000080">[</font>BobCounter<font color="#000080">].</font>Y<font color="#000080">);
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#008000"><i>{-[ Initialize Variables ]----------------------------------------------}
</i></font><font color="#FF0000"><b>Procedure </b></font>InitializeVariables<font color="#000080">;
</font><font color="#FF0000"><b>Const </b></font>Tbl <font color="#000080">: </font><font color="#FF0000"><b>Array </b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font>MaxBob<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte <font color="#000080">= (</font><font color="#800000">8</font><font color="#000080">, </font><font color="#800000">16</font><font color="#000080">, </font><font color="#800000">32</font><font color="#000080">);
</font><font color="#FF0000"><b>Var </b></font>BobCounter <font color="#000080">: </font>Integer<font color="#000080">;
    </font>CX<font color="#000080">, </font>CY     <font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>Begin
     </b></font><font color="#008000"><i>{ Make Individual Bobs From Template }
     </i></font><font color="#FF0000"><b>For </b></font>BobCounter <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>MaxBob <font color="#FF0000"><b>do
     Begin
          </b></font>BobImage<font color="#000080">[</font>BobCounter<font color="#000080">] := </font>BobTemplate<font color="#000080">;

          </font><font color="#FF0000"><b>For </b></font>CY <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">15 </font><font color="#FF0000"><b>do
              For </b></font>CX <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">15 </font><font color="#FF0000"><b>do
                  If </b></font>BobImage<font color="#000080">[</font>BobCounter<font color="#000080">][</font>CX<font color="#000080">,</font>CY<font color="#000080">] &lt;&gt; </font><font color="#800000">0
                  </font><font color="#FF0000"><b>Then
                      </b></font>BobImage<font color="#000080">[</font>BobCounter<font color="#000080">][</font>CX<font color="#000080">,</font>CY<font color="#000080">] :=
                         </font>BobImage<font color="#000080">[</font>BobCounter<font color="#000080">][</font>CX<font color="#000080">,</font>CY<font color="#000080">] </font><font color="#FF0000"><b>OR </b></font>Tbl<font color="#000080">[</font>BobCounter<font color="#000080">];
     </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

     </font>Counter1 <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
     </font>Counter2 <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#008000"><i>{-[ Build Palette ]-----------------------------------------------------}
</i></font><font color="#FF0000"><b>Procedure </b></font>BuildPalette<font color="#000080">;
</font><font color="#FF0000"><b>Var </b></font>ColorCounter <font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>Begin
     </b></font><font color="#008000"><i>{ Initialize Palette Buffer To All Black }
     </i></font>FillChar <font color="#000080">(</font>Pal<font color="#000080">, </font>SizeOf<font color="#000080">(</font>Pal<font color="#000080">), </font><font color="#800000">0</font><font color="#000080">);

     </font><font color="#FF0000"><b>For </b></font>ColorCounter <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">7 </font><font color="#FF0000"><b>do
     Begin
      </b></font><font color="#008000"><i>{ Make Red, Green, and Blue Bobs }
      </i></font>Pal<font color="#000080">[</font>ColorCounter <font color="#FF0000"><b>OR </b></font><font color="#800000">08</font><font color="#000080">].</font>Red   <font color="#000080">:= </font><font color="#800000">21 </font><font color="#000080">+ (</font>ColorCounter <font color="#000080">* </font><font color="#800000">6</font><font color="#000080">);
      </font>Pal<font color="#000080">[</font>ColorCounter <font color="#FF0000"><b>OR </b></font><font color="#800000">16</font><font color="#000080">].</font>Green <font color="#000080">:= </font><font color="#800000">21 </font><font color="#000080">+ (</font>ColorCounter <font color="#000080">* </font><font color="#800000">6</font><font color="#000080">);
      </font>Pal<font color="#000080">[</font>ColorCounter <font color="#FF0000"><b>OR </b></font><font color="#800000">32</font><font color="#000080">].</font>Blue  <font color="#000080">:= </font><font color="#800000">21 </font><font color="#000080">+ (</font>ColorCounter <font color="#000080">* </font><font color="#800000">6</font><font color="#000080">);

      </font><font color="#008000"><i>{ Make Colors Where Red and Green Bobs Overlap }
      </i></font>Pal<font color="#000080">[</font>ColorCounter <font color="#FF0000"><b>OR </b></font><font color="#800000">08 </font><font color="#FF0000"><b>OR </b></font><font color="#800000">16</font><font color="#000080">].</font>Red   <font color="#000080">:= </font><font color="#800000">21 </font><font color="#000080">+ (</font>ColorCounter <font color="#000080">* </font><font color="#800000">6</font><font color="#000080">);
      </font>Pal<font color="#000080">[</font>ColorCounter <font color="#FF0000"><b>OR </b></font><font color="#800000">08 </font><font color="#FF0000"><b>OR </b></font><font color="#800000">16</font><font color="#000080">].</font>Green <font color="#000080">:= </font><font color="#800000">21 </font><font color="#000080">+ (</font>ColorCounter <font color="#000080">* </font><font color="#800000">6</font><font color="#000080">);

      </font><font color="#008000"><i>{ Make Colors Where Red and Blue Bobs Overlap }
      </i></font>Pal<font color="#000080">[</font>ColorCounter <font color="#FF0000"><b>OR </b></font><font color="#800000">08 </font><font color="#FF0000"><b>OR </b></font><font color="#800000">32</font><font color="#000080">].</font>Red  <font color="#000080">:= </font><font color="#800000">21 </font><font color="#000080">+ (</font>ColorCounter <font color="#000080">* </font><font color="#800000">6</font><font color="#000080">);
      </font>Pal<font color="#000080">[</font>ColorCounter <font color="#FF0000"><b>OR </b></font><font color="#800000">08 </font><font color="#FF0000"><b>OR </b></font><font color="#800000">32</font><font color="#000080">].</font>Blue <font color="#000080">:= </font><font color="#800000">21 </font><font color="#000080">+ (</font>ColorCounter <font color="#000080">* </font><font color="#800000">6</font><font color="#000080">);

      </font><font color="#008000"><i>{ Make Colors Where Green and Blue Bobs Overlap }
      </i></font>Pal<font color="#000080">[</font>ColorCounter <font color="#FF0000"><b>OR </b></font><font color="#800000">16 </font><font color="#FF0000"><b>OR </b></font><font color="#800000">32</font><font color="#000080">].</font>Green <font color="#000080">:= </font><font color="#800000">21 </font><font color="#000080">+ (</font>ColorCounter <font color="#000080">* </font><font color="#800000">6</font><font color="#000080">);
      </font>Pal<font color="#000080">[</font>ColorCounter <font color="#FF0000"><b>OR </b></font><font color="#800000">16 </font><font color="#FF0000"><b>OR </b></font><font color="#800000">32</font><font color="#000080">].</font>Blue  <font color="#000080">:= </font><font color="#800000">21 </font><font color="#000080">+ (</font>ColorCounter <font color="#000080">* </font><font color="#800000">6</font><font color="#000080">);

      </font><font color="#008000"><i>{ Make Colors Where Red, Green and Blue Bobs Overlap }
      </i></font>Pal<font color="#000080">[</font>ColorCounter <font color="#FF0000"><b>OR </b></font><font color="#800000">08 </font><font color="#FF0000"><b>OR </b></font><font color="#800000">16 </font><font color="#FF0000"><b>OR </b></font><font color="#800000">32</font><font color="#000080">].</font>Red   <font color="#000080">:= </font><font color="#800000">21</font><font color="#000080">+(</font>ColorCounter <font color="#000080">* </font><font color="#800000">6</font><font color="#000080">);
      </font>Pal<font color="#000080">[</font>ColorCounter <font color="#FF0000"><b>OR </b></font><font color="#800000">08 </font><font color="#FF0000"><b>OR </b></font><font color="#800000">16 </font><font color="#FF0000"><b>OR </b></font><font color="#800000">32</font><font color="#000080">].</font>Green <font color="#000080">:= </font><font color="#800000">21</font><font color="#000080">+(</font>ColorCounter <font color="#000080">* </font><font color="#800000">6</font><font color="#000080">);
      </font>Pal<font color="#000080">[</font>ColorCounter <font color="#FF0000"><b>OR </b></font><font color="#800000">08 </font><font color="#FF0000"><b>OR </b></font><font color="#800000">16 </font><font color="#FF0000"><b>OR </b></font><font color="#800000">32</font><font color="#000080">].</font>blue  <font color="#000080">:= </font><font color="#800000">21</font><font color="#000080">+(</font>ColorCounter <font color="#000080">* </font><font color="#800000">6</font><font color="#000080">);
     </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

     </font><font color="#008000"><i>{ Make Colors Where The Grey Square Overlaps The Bobs }
     </i></font><font color="#FF0000"><b>For </b></font>ColorCounter <font color="#000080">:= </font><font color="#800000">128 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do
     Begin
      </b></font>Pal<font color="#000080">[</font>ColorCounter<font color="#000080">].</font>Red   <font color="#000080">:= (</font>Pal<font color="#000080">[</font>ColorCounter<font color="#000080">-</font><font color="#800000">128</font><font color="#000080">].</font>Red   <font color="#FF0000"><b>DIV </b></font><font color="#800000">4</font><font color="#000080">)+</font><font color="#800000">14</font><font color="#000080">;
      </font>Pal<font color="#000080">[</font>ColorCounter<font color="#000080">].</font>Green <font color="#000080">:= (</font>Pal<font color="#000080">[</font>ColorCounter<font color="#000080">-</font><font color="#800000">128</font><font color="#000080">].</font>Green <font color="#FF0000"><b>DIV </b></font><font color="#800000">4</font><font color="#000080">)+</font><font color="#800000">14</font><font color="#000080">;
      </font>Pal<font color="#000080">[</font>ColorCounter<font color="#000080">].</font>Blue  <font color="#000080">:= (</font>Pal<font color="#000080">[</font>ColorCounter<font color="#000080">-</font><font color="#800000">128</font><font color="#000080">].</font>Blue  <font color="#FF0000"><b>DIV </b></font><font color="#800000">4</font><font color="#000080">)+</font><font color="#800000">14</font><font color="#000080">;
     </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#008000"><i>{-[ Draw Grey Square In Background Buffer ]-----------------------------}
</i></font><font color="#FF0000"><b>Procedure </b></font>BuildBackground<font color="#000080">;
</font><font color="#FF0000"><b>Var </b></font>Y<font color="#000080">, </font>X <font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>Begin
     </b></font>FillChar <font color="#000080">(</font>BackGround<font color="#000080">^, </font>SizeOf<font color="#000080">(</font>BackGround<font color="#000080">^), </font><font color="#800000">0</font><font color="#000080">);

     </font><font color="#FF0000"><b>For </b></font>Y <font color="#000080">:= </font><font color="#800000">50 </font><font color="#FF0000"><b>to </b></font><font color="#800000">150 </font><font color="#FF0000"><b>do
     For </b></font>X <font color="#000080">:= </font><font color="#800000">100 </font><font color="#FF0000"><b>to </b></font><font color="#800000">220 </font><font color="#FF0000"><b>do
         </b></font>BackGround<font color="#000080">^[</font>Y<font color="#000080">, </font>X<font color="#000080">] := </font><font color="#800000">128</font><font color="#000080">;

</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#008000"><i>{=[ Main Program ]======================================================}
</i></font><font color="#FF0000"><b>Begin
     </b></font>VGA <font color="#000080">:= </font>Ptr <font color="#000080">(</font><font color="#800000">$A000</font><font color="#000080">,</font><font color="#800000">$0000</font><font color="#000080">);
     </font>New <font color="#000080">(</font>WorkPage<font color="#000080">);
     </font>New <font color="#000080">(</font>BackGround<font color="#000080">);

     </font>InitializeVariables<font color="#000080">;
     </font>BuildPalette<font color="#000080">;
     </font>BuildBackground<font color="#000080">;

     </font>SetMode13h<font color="#000080">;
     </font>SetPalette <font color="#000080">(</font>Pal<font color="#000080">);

     </font><font color="#FF0000"><b>Repeat
           </b></font>UpdateBobs<font color="#000080">;               </font><font color="#008000"><i>{ Update Bob Positions }
           </i></font>WorkPage<font color="#000080">^ := </font>BackGround<font color="#000080">^; </font><font color="#008000"><i>{ Clear WorkPage With Static Image }
           </i></font>DrawBobs<font color="#000080">;                 </font><font color="#008000"><i>{ Draw Bobs }

           { Wait For Retrace }
           </i></font><font color="#FF0000"><b>Repeat Until </b></font><font color="#000080">((</font>Port<font color="#000080">[</font><font color="#800000">$3DA</font><font color="#000080">] </font><font color="#FF0000"><b>AND </b></font><font color="#800000">8</font><font color="#000080">) &lt;&gt; </font><font color="#800000">0</font><font color="#000080">);

           </font>VGA<font color="#000080">^ := </font>WorkPage<font color="#000080">^;        </font><font color="#008000"><i>{ Display Page }
     </i></font><font color="#FF0000"><b>Until </b></font>KeyPressed<font color="#000080">;

     </font>TextMode <font color="#000080">(</font>C80<font color="#000080">);

     </font>Dispose <font color="#000080">(</font>BackGround<font color="#000080">);
     </font>Dispose <font color="#000080">(</font>WorkPage<font color="#000080">);
</font><font color="#FF0000"><b>End</b></font><font color="#000080">.

</font><font color="#008000"><i>{ PALETTE CODE FOLLOWS }

{
 TD&gt; I've seen it done in many places, but I haven't seen any info on
 TD&gt; how it's done:  What is the basic algorithm for fading from one
 TD&gt; palette to another.

        Many people do palette fading incorrectly.  The correct
way to do it would be to set up a relation such as:

        Palette_Element     Calculated_Element
        ---------------  =  ------------------
         Max_Intensity      Current_Intensity

Where Palette_Element is a single element in our master DAC
table, Max_Intensity is the maximum allowable intensity level for
our scale, Current_Intensity is a number between 0 and
Max_Intensity which represents the level we want, and
Calculated_Element is the new value for the element of our DAC
table.  But since we want the Calculated_Element, we re-write it
as this equation:

        Calculated_Element = Palette_Element * Current_Intensity
                             -----------------------------------
                                         Max_Intensity

The above equation will allow us to fade a given palette set to
black or from black to a given palette set.  To fade out an entire
palette set, you would need to calculate the above for the red,
green, and blue components of each color in the 256 element DAC
table.
        Fading from one palette set to another palette set is
very similar.  What you must do is fade one palette set to black
while simultaneously fade from black to another palette set and
add the two values.  The equation for this is:

       CE = ((PE1 * (MI - CI)) + (PE2 * CI)) / MI

Where CE is the calculated element, PE1 and PE2 are corresponding
palette elements from palette 1 and 2, MI is the maximum
intensity in our scale, and CI is the current intensity we want
(num between 0 and MI). }

</i></font><font color="#FF0000"><b>Unit </b></font>Palette<font color="#000080">;
</font><font color="#008000"><i>{ Programmed By David Dahl @ FidoNet 1:272/38 }
(* PUBLIC DOMAIN *)
</i></font><font color="#FF0000"><b>Interface
  Type </b></font>PaletteRec <font color="#000080">= </font><font color="#FF0000"><b>Record
                          </b></font>Red   <font color="#000080">: </font>Byte<font color="#000080">;
                          </font>Green <font color="#000080">: </font>Byte<font color="#000080">;
                          </font>Blue  <font color="#000080">: </font>Byte<font color="#000080">;
                    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
       </font>PaletteArray <font color="#000080">= </font><font color="#FF0000"><b>Array </b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>PaletteRec<font color="#000080">;

  </font><font color="#FF0000"><b>Procedure </b></font>SetPalette <font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>PaletteIn <font color="#000080">: </font>PaletteArray<font color="#000080">);
  </font><font color="#FF0000"><b>Procedure </b></font>FadeFromPaletteToBlack <font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>PaletteIn <font color="#000080">: </font>PaletteArray<font color="#000080">);
  </font><font color="#FF0000"><b>Procedure </b></font>FadeFromBlackToPalette <font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>PaletteIn <font color="#000080">: </font>PaletteArray<font color="#000080">);
  </font><font color="#FF0000"><b>Procedure </b></font>FadeFromPalette1ToPalette2 <font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>Palette1 <font color="#000080">: </font>PaletteArray<font color="#000080">;
                                        </font><font color="#FF0000"><b>Var </b></font>Palette2 <font color="#000080">: </font>PaletteArray<font color="#000080">);
</font><font color="#FF0000"><b>Implementation
Procedure </b></font>SetPalette <font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>PaletteIn <font color="#000080">: </font>PaletteArray<font color="#000080">); </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm
   </b></font><font color="#008000"><i>{ Get Address of PaletteIn }
   </i></font><font color="#FF00FF">LDS SI, PaletteIn
   CLD

   </font><font color="#008000"><i>{ Tell VGA To Start With First Palette Element }
   </i></font><font color="#FF00FF">XOR AX, AX     
   MOV DX, $3C8
   OUT DX, AL

   </font><font color="#008000"><i>{ Wait For Retrace }
   </i></font><font color="#FF00FF">MOV DX, $3DA
   @VRWait1:
     IN AL, DX
     AND AL, 8
   JZ @VRWait1
   
   </font><font color="#008000"><i>{ Set First Half Of Palette }
   </i></font><font color="#FF00FF">MOV DX, $3C9
   MOV CX, 128 * 3
   @PALLOOP1:
     LODSB  </font><font color="#008000"><i>{ DON'T use &quot;REP OUTSB&quot; since some VGA cards can't handle it }
     </i></font><font color="#FF00FF">OUT DX, AL
   LOOP @PALLOOP1

   </font><font color="#008000"><i>{ Wait For Retrace }
   </i></font><font color="#FF00FF">PUSH DX
   MOV DX, $3DA
   @VRWait2:
     IN AL, DX
     AND AL, 8
   JZ @VRWait2
   POP DX

   </font><font color="#008000"><i>{ Set Last Half Of Palette }
   </i></font><font color="#FF00FF">MOV CX, 128 * 3
   @PALLOOP2:
     LODSB
     OUT DX, AL
   LOOP @PALLOOP2
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>FadeFromPaletteToBlack <font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>PaletteIn <font color="#000080">: </font>PaletteArray<font color="#000080">);
</font><font color="#FF0000"><b>Var </b></font>WorkPalette <font color="#000080">: </font>PaletteArray<font color="#000080">;
    </font>Counter     <font color="#000080">: </font>Integer<font color="#000080">;
    </font>Intensity   <font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>Begin
     For </b></font>Intensity <font color="#000080">:= </font><font color="#800000">31 </font><font color="#FF0000"><b>downto </b></font><font color="#800000">0 </font><font color="#FF0000"><b>do  
     Begin
       For </b></font>Counter <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do
       Begin
          </b></font>WorkPalette<font color="#000080">[</font>Counter<font color="#000080">].</font>Red   <font color="#000080">:= 
                   (</font>PaletteIn<font color="#000080">[</font>Counter<font color="#000080">].</font>Red   <font color="#000080">* </font>Intensity<font color="#000080">) </font><font color="#FF0000"><b>DIV </b></font><font color="#800000">32</font><font color="#000080">;
          </font>WorkPalette<font color="#000080">[</font>Counter<font color="#000080">].</font>Green <font color="#000080">:= 
                   (</font>PaletteIn<font color="#000080">[</font>Counter<font color="#000080">].</font>Green <font color="#000080">* </font>Intensity<font color="#000080">) </font><font color="#FF0000"><b>DIV </b></font><font color="#800000">32</font><font color="#000080">;
          </font>WorkPalette<font color="#000080">[</font>Counter<font color="#000080">].</font>Blue  <font color="#000080">:= 
                   (</font>PaletteIn<font color="#000080">[</font>Counter<font color="#000080">].</font>Blue  <font color="#000080">* </font>Intensity<font color="#000080">) </font><font color="#FF0000"><b>DIV </b></font><font color="#800000">32</font><font color="#000080">;
       </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
       </font>SetPalette <font color="#000080">(</font>WorkPalette<font color="#000080">);
     </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>FadeFromBlackToPalette <font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>PaletteIn <font color="#000080">: </font>PaletteArray<font color="#000080">);
</font><font color="#FF0000"><b>Var </b></font>WorkPalette <font color="#000080">: </font>PaletteArray<font color="#000080">;
    </font>Counter     <font color="#000080">: </font>Integer<font color="#000080">;
    </font>Intensity   <font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>Begin
     For </b></font>Intensity <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">32 </font><font color="#FF0000"><b>do  
     Begin
       For </b></font>Counter <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do
       Begin
          </b></font>WorkPalette<font color="#000080">[</font>Counter<font color="#000080">].</font>Red   <font color="#000080">:= 
                   (</font>PaletteIn<font color="#000080">[</font>Counter<font color="#000080">].</font>Red   <font color="#000080">* </font>Intensity<font color="#000080">) </font><font color="#FF0000"><b>DIV </b></font><font color="#800000">32</font><font color="#000080">;
          </font>WorkPalette<font color="#000080">[</font>Counter<font color="#000080">].</font>Green <font color="#000080">:= 
                   (</font>PaletteIn<font color="#000080">[</font>Counter<font color="#000080">].</font>Green <font color="#000080">* </font>Intensity<font color="#000080">) </font><font color="#FF0000"><b>DIV </b></font><font color="#800000">32</font><font color="#000080">;
          </font>WorkPalette<font color="#000080">[</font>Counter<font color="#000080">].</font>Blue  <font color="#000080">:= 
                   (</font>PaletteIn<font color="#000080">[</font>Counter<font color="#000080">].</font>Blue  <font color="#000080">* </font>Intensity<font color="#000080">) </font><font color="#FF0000"><b>DIV </b></font><font color="#800000">32</font><font color="#000080">;
       </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
       </font>SetPalette <font color="#000080">(</font>WorkPalette<font color="#000080">);
     </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>FadeFromPalette1ToPalette2 <font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>Palette1 <font color="#000080">: </font>PaletteArray<font color="#000080">;
                                      </font><font color="#FF0000"><b>Var </b></font>Palette2 <font color="#000080">: </font>PaletteArray<font color="#000080">);
</font><font color="#FF0000"><b>Var </b></font>WorkPalette <font color="#000080">: </font>PaletteArray<font color="#000080">;
    </font>Counter     <font color="#000080">: </font>Integer<font color="#000080">;
    </font>CrossFade   <font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>Begin
     For </b></font>CrossFade <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">32 </font><font color="#FF0000"><b>do
     Begin
       For </b></font>Counter <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do
       Begin
         </b></font>WorkPalette<font color="#000080">[</font>Counter<font color="#000080">].</font>Red   <font color="#000080">:=
             ((</font>Palette1<font color="#000080">[</font>Counter<font color="#000080">].</font>Red   <font color="#000080">* (</font><font color="#800000">32 </font><font color="#000080">- </font>CrossFade<font color="#000080">)) + 
              (</font>Palette2<font color="#000080">[</font>Counter<font color="#000080">].</font>Red   <font color="#000080">* </font>CrossFade<font color="#000080">)) </font><font color="#FF0000"><b>DIV </b></font><font color="#800000">32</font><font color="#000080">;
         </font>WorkPalette<font color="#000080">[</font>Counter<font color="#000080">].</font>Green <font color="#000080">:=
             ((</font>Palette1<font color="#000080">[</font>Counter<font color="#000080">].</font>Green <font color="#000080">* (</font><font color="#800000">32 </font><font color="#000080">- </font>CrossFade<font color="#000080">)) + 
              (</font>Palette2<font color="#000080">[</font>Counter<font color="#000080">].</font>Green <font color="#000080">* </font>CrossFade<font color="#000080">)) </font><font color="#FF0000"><b>DIV </b></font><font color="#800000">32</font><font color="#000080">;
         </font>WorkPalette<font color="#000080">[</font>Counter<font color="#000080">].</font>Blue  <font color="#000080">:=
             ((</font>Palette1<font color="#000080">[</font>Counter<font color="#000080">].</font>Blue  <font color="#000080">* (</font><font color="#800000">32 </font><font color="#000080">- </font>CrossFade<font color="#000080">)) + 
              (</font>Palette2<font color="#000080">[</font>Counter<font color="#000080">].</font>Blue  <font color="#000080">* </font>CrossFade<font color="#000080">)) </font><font color="#FF0000"><b>DIV </b></font><font color="#800000">32</font><font color="#000080">;
       </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
       </font>SetPalette <font color="#000080">(</font>WorkPalette<font color="#000080">);
     </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">.

</font>TUTORIAL <font color="#000080">!!

        </font>Transparent objects are rather simple<font color="#000080">.  </font>What you <font color="#FF0000"><b>do is
set </b></font>up your palette so pure colors are represented by powers <font color="#FF0000"><b>of
</b></font>two<font color="#000080">.  </font>This way you can <font color="#000080">&quot;</font>mix<font color="#000080">&quot; </font>your colors by ORing the values
together<font color="#000080">.  </font><font color="#FF0000"><b>For </b></font>simplicity<font color="#800000">'s sake, this example will use 3 colors:

        </font>Bit  <font color="#800000">7 6 5 4 3 2 1 0
                       </font><font color="#000080">| | |
                       | | +----&gt; </font>Red
                       <font color="#000080">| +------&gt; </font>Green
                       <font color="#000080">+--------&gt; </font>Blue

So now you would <font color="#FF0000"><b>set </b></font>your palette up <font color="#FF0000"><b>as </b></font>follows<font color="#000080">:

    </font>All single colors<font color="#000080">:

      </font><font color="#800000">2</font><font color="#000080">^</font><font color="#800000">0 </font><font color="#000080">= </font><font color="#800000">1   </font><font color="#000080">--   </font>Red
      <font color="#800000">2</font><font color="#000080">^</font><font color="#800000">1 </font><font color="#000080">= </font><font color="#800000">2   </font><font color="#000080">--   </font>Green
      <font color="#800000">2</font><font color="#000080">^</font><font color="#800000">2 </font><font color="#000080">= </font><font color="#800000">4   </font><font color="#000080">--   </font>Blue

    All possible <font color="#800000">2 </font>color mixes<font color="#000080">:

      </font><font color="#800000">2</font><font color="#000080">^</font><font color="#800000">0 </font><font color="#FF0000"><b>OR </b></font><font color="#800000">2</font><font color="#000080">^</font><font color="#800000">1 </font><font color="#000080">= </font><font color="#800000">1 </font><font color="#FF0000"><b>OR </b></font><font color="#800000">2 </font><font color="#000080">= </font><font color="#800000">3   </font><font color="#000080">--   </font>Red <font color="#000080">+ </font>Green  <font color="#000080">= </font>Yellow
      <font color="#800000">2</font><font color="#000080">^</font><font color="#800000">0 </font><font color="#FF0000"><b>OR </b></font><font color="#800000">2</font><font color="#000080">^</font><font color="#800000">2 </font><font color="#000080">= </font><font color="#800000">1 </font><font color="#FF0000"><b>OR </b></font><font color="#800000">4 </font><font color="#000080">= </font><font color="#800000">5   </font><font color="#000080">--   </font>Red <font color="#000080">+ </font>Blue   <font color="#000080">= </font>Magenta
      <font color="#800000">2</font><font color="#000080">^</font><font color="#800000">1 </font><font color="#FF0000"><b>OR </b></font><font color="#800000">2</font><font color="#000080">^</font><font color="#800000">2 </font><font color="#000080">= </font><font color="#800000">2 </font><font color="#FF0000"><b>OR </b></font><font color="#800000">4 </font><font color="#000080">= </font><font color="#800000">6   </font><font color="#000080">--   </font>Green <font color="#000080">+ </font>Blue <font color="#000080">= </font>Cyan

    All possible <font color="#800000">3 </font>color mixes<font color="#000080">:

      </font><font color="#800000">2</font><font color="#000080">^</font><font color="#800000">0 </font><font color="#FF0000"><b>OR </b></font><font color="#800000">2</font><font color="#000080">^</font><font color="#800000">1 </font><font color="#FF0000"><b>OR </b></font><font color="#800000">2</font><font color="#000080">^</font><font color="#800000">2 </font><font color="#000080">= </font><font color="#800000">1 </font><font color="#FF0000"><b>OR </b></font><font color="#800000">2 </font><font color="#FF0000"><b>OR </b></font><font color="#800000">4 </font><font color="#000080">= </font><font color="#800000">7  </font><font color="#000080">--  </font>R <font color="#000080">+ </font>G <font color="#000080">+ </font>B <font color="#000080">= </font>White

So our palette <font color="#FF0000"><b>is set </b></font>up <font color="#FF0000"><b>as</b></font><font color="#000080">:

        </font><font color="#800000">0 </font><font color="#000080">- </font>Black
        <font color="#800000">1 </font><font color="#000080">- </font>Red
        <font color="#800000">2 </font><font color="#000080">- </font>Green
        <font color="#800000">3 </font><font color="#000080">- </font>Yellow
        <font color="#800000">4 </font><font color="#000080">- </font>Blue
        <font color="#800000">5 </font><font color="#000080">- </font>Magenta
        <font color="#800000">6 </font><font color="#000080">- </font>Cyan
        <font color="#800000">7 </font><font color="#000080">- </font>White

Now let<font color="#800000">'s say we have a Red, Green, and a Blue square.  The
</font>bitmap <font color="#FF0000"><b>of </b></font>the red square will be made up <font color="#FF0000"><b>of </b></font>bytes <font color="#FF0000"><b>of </b></font>the value <font color="#800000">1</font><font color="#000080">,
</font>the green square will be made up <font color="#FF0000"><b>of </b></font>the value <font color="#800000">2</font><font color="#000080">, </font><font color="#FF0000"><b>and </b></font>the blue
square will be made up <font color="#FF0000"><b>of </b></font>the value <font color="#800000">4 </font><font color="#FF0000"><b>as </b></font>so<font color="#000080">:

           </font>Red             Green              Blue

         <font color="#800000">11111111         22222222          44444444
         11111111         22222222          44444444
         11111111         22222222          44444444
         11111111         22222222          44444444

</font><font color="#FF0000"><b>To </b></font>put the squares<font color="#000080">, </font>you just have <font color="#FF0000"><b>to OR </b></font>put them <font color="#FF0000"><b>to </b></font>your frame
buffer<font color="#000080">.  </font><font color="#FF0000"><b>If </b></font>they overlap<font color="#000080">, </font>they will automatically mix <font color="#FF0000"><b>as </b></font>so<font color="#000080">:

     </font>The <font color="#800000">3 </font>overlaping bitmaps       The <font color="#800000">3 </font>overlaping bitmaps
     <font color="#FF0000"><b>in </b></font>frame buffer using an       <font color="#FF0000"><b>in </b></font>frame buffer showing
     <font color="#FF0000"><b>OR</b></font><font color="#800000">'d image put:                what colors are where:

            11111111                      </font>RRRRRRRR
            <font color="#800000">11111111                      </font>RRRRRRRR
            <font color="#800000">111133332222                  </font>RRRRYYYYGGGG
            <font color="#800000">155577776222                  </font>RMMMWWWWCGGG
             <font color="#800000">44466666222                   </font>BBBCCCCCGGG
             <font color="#800000">44466666222                   </font>BBBCCCCCGGG
             <font color="#800000">44444444                      </font>BBBBBBBB

The following example <font color="#FF0000"><b>program uses </b></font>this bit scheme<font color="#000080">:

        </font>Bit  <font color="#800000">7 6 5 4 3 2 1 0
             </font><font color="#000080">|   | | | +-+-+---&gt; </font>Color Intensity <font color="#000080">(</font><font color="#800000">0</font><font color="#000080">:</font>Least <font color="#000080">- </font><font color="#800000">7</font><font color="#000080">:</font>Full<font color="#000080">)
             |   | | +---------&gt; </font>Red
             <font color="#000080">|   | +-----------&gt; </font>Green
             <font color="#000080">|   +-------------&gt; </font>Blue
             <font color="#000080">+-----------------&gt; </font>Grey


David Dahl
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0127.PAS">Original</a><b>]</b></p></body>
</html>
