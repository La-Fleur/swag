<html>
<head><title> "VIDEO MODE" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0072.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
How can I save and restore the text screen mode (e.g. 132*28 characters)
when using BGI calls in a Turbo Pascal program ?
Unfortunately I always have 80*25 after program exit.
}

</i></font><font color="#FF0000"><b>function </b></font>get_video_mode <font color="#000080">: </font>byte<font color="#000080">;
</font><font color="#008000"><i>{ Returns the current video mode (from interrupt $10,$f).
  Byte [$40:$49] also contains this information, but might not always
  have the correct value.
}
 
</i></font><font color="#FF0000"><b>var
  </b></font>check_b <font color="#000080">: </font>byte<font color="#000080">; </font><font color="#008000"><i>{video mode byte : absolute $40:$49}
 
</i></font><font color="#FF0000"><b>begin </b></font><font color="#008000"><i>{get_video_mode}
  </i></font><font color="#FF0000"><b>asm
    </b></font><font color="#FF00FF">mov ah, 0fh
    int 10h
    mov check_b, al
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>check_b <font color="#000080">&gt; </font><font color="#800000">127
    </font><font color="#FF0000"><b>then </b></font>get_video_mode<font color="#000080">:=</font>check_b<font color="#000080">-</font><font color="#800000">128  </font><font color="#008000"><i>{last mode change was done without
                                       screen clearing, mode is given by the
                                       low 7 bits}
    </i></font><font color="#FF0000"><b>else </b></font>get_video_mode<font color="#000080">:=</font>check_b<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{get_video_mode}
 
 
</i></font><font color="#FF0000"><b>procedure </b></font>set_video_mode<font color="#000080">(</font>m <font color="#000080">: </font>byte<font color="#000080">);
</font><font color="#008000"><i>{ Sets the given video mode (via interrupt $10,0).
  If high bit is on screen is not cleared (works only for text modes?).
}
 
</i></font><font color="#FF0000"><b>begin </b></font><font color="#008000"><i>{set_video_mode}
  </i></font><font color="#FF0000"><b>asm
    </b></font><font color="#FF00FF">mov ah, 00h
    mov al, m
    int 10h
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{set_video_mode}
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0072.PAS">Original</a><b>]</b></p></body>
</html>
