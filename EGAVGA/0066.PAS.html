<html>
<head><title> "VGA Text Mode Demo" by KAI ROHRBACHER</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0066.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
KAI ROHRBACHER

&gt;&gt; VGA Text mode (which is just an all-points-not-addressable mode,
&gt;&gt; whereas the Graphics modes we're all familiar With are called all-
&gt;&gt; points-addressable. The point is that whether all the points are
&gt;&gt; addressable or not is irrevelant, but rather the &quot;points&quot; are
&gt;&gt; there period.)

No.  The  width  of  a  normal  256  color  Graphics mode counts twice
compared  to the pixel frequency of a 16 color mode (Text or Graphic):
a  320  pixel  resolution in 256 colors needs the same clock rate as a
640 pixel resolution in 16 color mode.

&gt;&gt; Anyway, the VGA Text mode consists of 80 Characters wide
&gt;&gt; each which are 9 points wide. Do you see where I'm going...the VGA
&gt;&gt; ISSSSS capable of 720 pixels wide.
&gt; I wouldn't doubt it since we've seen 640x480x16 on a regular VGA.
&gt; 720 isn't far from 640.

That's  why  it  is  so  easy  to  trick  the  VGA into 360x400x256 or
360x480x256 modes: 80 Text columns * 9 pixels = 720 pixels. 720/2=360.
Here's  a  small Program, demonstrating some Graphics mode; it's taken
from a German computer magazine, I just ported it from &quot;C&quot; to TP.
Note  that  For  the  same reason, I doubt that the claimed resolution
640x400x256  will  run  on  a  standard  VGA:  it  would require a dot
frequency of 1280 pixels in a 16 color mode!
}

</i></font><font color="#FF0000"><b>Program </b></font>vgademo<font color="#000080">;

</font><font color="#FF0000"><b>Uses
  </b></font>Dos<font color="#000080">, </font>Crt<font color="#000080">;

</font><font color="#FF0000"><b>Const
  </b></font>maxPar <font color="#000080">= </font><font color="#800000">23</font><font color="#000080">;

</font><font color="#FF0000"><b>Type
  </b></font>parameter <font color="#000080">= </font><font color="#FF0000"><b>Array </b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font>maxPar<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte<font color="#000080">;

</font><font color="#FF0000"><b>Const
 </b></font>CrtRegVal320x240 <font color="#000080">: </font>parameter <font color="#008000"><i>{ Static }  </i></font><font color="#000080">=
   (</font><font color="#800000">95</font><font color="#000080">,</font><font color="#800000">79</font><font color="#000080">,</font><font color="#800000">80</font><font color="#000080">,</font><font color="#800000">130</font><font color="#000080">,</font><font color="#800000">84</font><font color="#000080">,</font><font color="#800000">128</font><font color="#000080">,</font><font color="#800000">13</font><font color="#000080">,</font><font color="#800000">62</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">65</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">234</font><font color="#000080">,</font><font color="#800000">172</font><font color="#000080">,</font><font color="#800000">223</font><font color="#000080">,</font><font color="#800000">40</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">231</font><font color="#000080">,</font><font color="#800000">6</font><font color="#000080">,</font><font color="#800000">227</font><font color="#000080">);
 </font>CrtRegVal320x400 <font color="#000080">: </font>parameter <font color="#008000"><i>{ Static }  </i></font><font color="#000080">=
   (</font><font color="#800000">95</font><font color="#000080">,</font><font color="#800000">79</font><font color="#000080">,</font><font color="#800000">80</font><font color="#000080">,</font><font color="#800000">130</font><font color="#000080">,</font><font color="#800000">84</font><font color="#000080">,</font><font color="#800000">128</font><font color="#000080">,</font><font color="#800000">191</font><font color="#000080">,</font><font color="#800000">31</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">64</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">156</font><font color="#000080">,</font><font color="#800000">142</font><font color="#000080">,</font><font color="#800000">143</font><font color="#000080">,</font><font color="#800000">40</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">150</font><font color="#000080">,</font><font color="#800000">185</font><font color="#000080">,</font><font color="#800000">227</font><font color="#000080">);
 </font>CrtRegVal360x480 <font color="#000080">: </font>parameter <font color="#008000"><i>{ Static }  </i></font><font color="#000080">=
   (</font><font color="#800000">107</font><font color="#000080">,</font><font color="#800000">89</font><font color="#000080">,</font><font color="#800000">90</font><font color="#000080">,</font><font color="#800000">142</font><font color="#000080">,</font><font color="#800000">94</font><font color="#000080">,</font><font color="#800000">138</font><font color="#000080">,</font><font color="#800000">13</font><font color="#000080">,</font><font color="#800000">62</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">64</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">234</font><font color="#000080">,</font><font color="#800000">172</font><font color="#000080">,</font><font color="#800000">223</font><font color="#000080">,</font><font color="#800000">45</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">231</font><font color="#000080">,</font><font color="#800000">6</font><font color="#000080">,</font><font color="#800000">227</font><font color="#000080">);
 </font>CrtRegVal640x400 <font color="#000080">: </font>parameter <font color="#008000"><i>{ Static }  </i></font><font color="#000080">=
   (</font><font color="#800000">95</font><font color="#000080">,</font><font color="#800000">79</font><font color="#000080">,</font><font color="#800000">80</font><font color="#000080">,</font><font color="#800000">130</font><font color="#000080">,</font><font color="#800000">84</font><font color="#000080">,</font><font color="#800000">128</font><font color="#000080">,</font><font color="#800000">191</font><font color="#000080">,</font><font color="#800000">31</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">64</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">156</font><font color="#000080">,</font><font color="#800000">142</font><font color="#000080">,</font><font color="#800000">143</font><font color="#000080">,</font><font color="#800000">40</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">150</font><font color="#000080">,</font><font color="#800000">185</font><font color="#000080">,</font><font color="#800000">163</font><font color="#000080">);

 </font>actualMode <font color="#000080">:</font>Byte <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">;

 </font>R640x400 <font color="#000080">= </font><font color="#800000">4</font><font color="#000080">;
 </font>R360x480 <font color="#000080">= </font><font color="#800000">3</font><font color="#000080">;
 </font>R320x400 <font color="#000080">= </font><font color="#800000">2</font><font color="#000080">;
 </font>R320x240 <font color="#000080">= </font><font color="#800000">1</font><font color="#000080">;    </font><font color="#008000"><i>{ die moeglichen Aufloesungen }


</i></font><font color="#FF0000"><b>Var
  </b></font>ch       <font color="#000080">: </font>Char<font color="#000080">;
  </font>VideoRam<font color="#000080">,
  </font>zb4<font color="#000080">,           </font><font color="#008000"><i>{ein 1/4 der Bytes je Grafikzeile}
  </i></font>max_X<font color="#000080">,
  </font>max_Y    <font color="#000080">: </font>Word<font color="#000080">;
  </font>regs     <font color="#000080">: </font>Registers<font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>ReadMode <font color="#000080">: </font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>regs<font color="#000080">.</font>ah <font color="#000080">:= </font><font color="#800000">$f</font><font color="#000080">;
  </font>intr<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">, </font>regs<font color="#000080">);
  </font>ReadMode <font color="#000080">:= </font>regs<font color="#000080">.</font>al<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Procedure </b></font>OldMode<font color="#000080">(</font>OldMod <font color="#000080">: </font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>begin
  </b></font>regs<font color="#000080">.</font>ah <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>regs<font color="#000080">.</font>al <font color="#000080">:= </font>OldMod<font color="#000080">;
  </font>intr<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">, </font>regs<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Procedure </b></font>Mode<font color="#000080">(</font>Resolution <font color="#000080">: </font>Word<font color="#000080">);
</font><font color="#FF0000"><b>Var
  </b></font>Read_1<font color="#000080">,
  </font>RegNumber <font color="#000080">: </font>Word<font color="#000080">;
</font><font color="#FF0000"><b>begin
 </b></font>regs<font color="#000080">.</font>ax <font color="#000080">:= </font><font color="#800000">$0012</font><font color="#000080">;
 </font>intr<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">, </font>regs<font color="#000080">);
 </font>regs<font color="#000080">.</font>ax <font color="#000080">:= </font><font color="#800000">$0013</font><font color="#000080">;
 </font>intr<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">, </font>regs<font color="#000080">);
 </font>portw<font color="#000080">[</font><font color="#800000">$3c4</font><font color="#000080">] := </font><font color="#800000">$0604</font><font color="#000080">;
 </font>port<font color="#000080">[</font><font color="#800000">$3d4</font><font color="#000080">]  := </font><font color="#800000">$11</font><font color="#000080">;
 </font>Read_1      <font color="#000080">:= </font>port<font color="#000080">[</font><font color="#800000">$03d5</font><font color="#000080">] </font><font color="#FF0000"><b>And </b></font><font color="#800000">$7f</font><font color="#000080">;
 </font>port<font color="#000080">[</font><font color="#800000">$03d5</font><font color="#000080">] := </font>Read_1<font color="#000080">;

 </font><font color="#FF0000"><b>Case </b></font>Resolution <font color="#FF0000"><b>Of
   </b></font>R320x240 <font color="#000080">:
   </font><font color="#FF0000"><b>begin
     </b></font>actualMode   <font color="#000080">:= </font>R320x240<font color="#000080">;
     </font>portw<font color="#000080">[</font><font color="#800000">$03c4</font><font color="#000080">] := </font><font color="#800000">$0100</font><font color="#000080">;
     </font>port<font color="#000080">[</font><font color="#800000">$03c2</font><font color="#000080">]  := </font><font color="#800000">$e3</font><font color="#000080">;
     </font>portw<font color="#000080">[</font><font color="#800000">$03c4</font><font color="#000080">] := </font><font color="#800000">$0300</font><font color="#000080">;
     </font><font color="#FF0000"><b>For </b></font>RegNumber <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>maxPar <font color="#FF0000"><b>DO
       </b></font>portw<font color="#000080">[</font><font color="#800000">$03d4</font><font color="#000080">] := </font>CrtRegVal320x240<font color="#000080">[</font>RegNumber<font color="#000080">] </font><font color="#FF0000"><b>SHL </b></font><font color="#800000">8 </font><font color="#000080">+ </font>RegNumber<font color="#000080">;
     </font>zb4   <font color="#000080">:= </font><font color="#800000">80</font><font color="#000080">;
     </font>max_X <font color="#000080">:= </font><font color="#800000">319</font><font color="#000080">;
     </font>max_Y <font color="#000080">:= </font><font color="#800000">239</font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

   </font>R320x400 <font color="#000080">:
   </font><font color="#FF0000"><b>begin
     </b></font>actualMode <font color="#000080">:= </font>R320x400<font color="#000080">;
     </font><font color="#FF0000"><b>For </b></font>RegNumber <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>maxPar <font color="#FF0000"><b>DO
       </b></font>portw<font color="#000080">[</font><font color="#800000">$03d4</font><font color="#000080">] := </font>CrtRegVal320x400<font color="#000080">[</font>RegNumber<font color="#000080">] </font><font color="#FF0000"><b>SHL </b></font><font color="#800000">8 </font><font color="#000080">+ </font>RegNumber<font color="#000080">;
     </font>zb4   <font color="#000080">:= </font><font color="#800000">80</font><font color="#000080">;
     </font>max_X <font color="#000080">:= </font><font color="#800000">319</font><font color="#000080">;
     </font>max_Y <font color="#000080">:= </font><font color="#800000">399</font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

   </font>R360x480 <font color="#000080">:
   </font><font color="#FF0000"><b>begin
     </b></font>actualMode <font color="#000080">:= </font>R360x480<font color="#000080">;
     </font>portw<font color="#000080">[</font><font color="#800000">$03c4</font><font color="#000080">] := </font><font color="#800000">$0100</font><font color="#000080">;
     </font>port<font color="#000080">[</font><font color="#800000">$03c2</font><font color="#000080">]  := </font><font color="#800000">$e7</font><font color="#000080">;
     </font>portw<font color="#000080">[</font><font color="#800000">$03c4</font><font color="#000080">] := </font><font color="#800000">$0300</font><font color="#000080">;
     </font><font color="#FF0000"><b>For </b></font>RegNumber <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>maxPar <font color="#FF0000"><b>DO
       </b></font>portw<font color="#000080">[</font><font color="#800000">$03d4</font><font color="#000080">] := </font>CrtRegVal360x480<font color="#000080">[</font>RegNumber<font color="#000080">] </font><font color="#FF0000"><b>SHL </b></font><font color="#800000">8 </font><font color="#000080">+ </font>RegNumber<font color="#000080">;
     </font>zb4   <font color="#000080">:= </font><font color="#800000">90</font><font color="#000080">;
     </font>max_X <font color="#000080">:= </font><font color="#800000">359</font><font color="#000080">;
     </font>max_Y <font color="#000080">:= </font><font color="#800000">479</font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

   </font>R640x400 <font color="#000080">:
   </font><font color="#FF0000"><b>begin
     </b></font>actualMode   <font color="#000080">:= </font>R640x400<font color="#000080">;
     </font><font color="#008000"><i>{hier!}
     </i></font>portw<font color="#000080">[</font><font color="#800000">$03c4</font><font color="#000080">] := </font><font color="#800000">$0100</font><font color="#000080">;
     </font>port<font color="#000080">[</font><font color="#800000">$03c2</font><font color="#000080">]  := </font><font color="#800000">$e7</font><font color="#000080">;
     </font>portw<font color="#000080">[</font><font color="#800000">$03c4</font><font color="#000080">] := </font><font color="#800000">$0300</font><font color="#000080">;
     </font><font color="#FF0000"><b>For </b></font>RegNumber <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>maxPar <font color="#FF0000"><b>DO
       </b></font>portw<font color="#000080">[</font><font color="#800000">$03d4</font><font color="#000080">] := </font>CrtRegVal640x400<font color="#000080">[</font>RegNumber<font color="#000080">] </font><font color="#FF0000"><b>SHL </b></font><font color="#800000">8 </font><font color="#000080">+ </font>RegNumber<font color="#000080">;
     </font>zb4   <font color="#000080">:= </font><font color="#800000">160</font><font color="#000080">;
     </font>max_X <font color="#000080">:= </font><font color="#800000">639</font><font color="#000080">;
     </font>max_Y <font color="#000080">:= </font><font color="#800000">399</font><font color="#000080">;
   </font><font color="#FF0000"><b>end
 end</b></font><font color="#000080">;

 </font>VideoRam <font color="#000080">:= </font><font color="#800000">$a000</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Procedure </b></font>Paint<font color="#000080">(</font>Resolution<font color="#000080">, </font>Side <font color="#000080">: </font>Word<font color="#000080">);
</font><font color="#FF0000"><b>begin
  Case </b></font>Resolution <font color="#FF0000"><b>Of
    </b></font>R320x240 <font color="#000080">: </font><font color="#FF0000"><b>Case </b></font>Side <font color="#FF0000"><b>Of
                 </b></font><font color="#800000">1  </font><font color="#000080">: </font>VideoRam <font color="#000080">:= </font><font color="#800000">$a000</font><font color="#000080">;
                 </font><font color="#800000">2  </font><font color="#000080">: </font>VideoRam <font color="#000080">:= </font><font color="#800000">$a4b0</font><font color="#000080">;
                 </font><font color="#800000">3  </font><font color="#000080">: </font>VideoRam <font color="#000080">:= </font><font color="#800000">$a960</font><font color="#000080">;
                 </font><font color="#FF0000"><b>else </b></font>VideoRam <font color="#000080">:= </font><font color="#800000">$a000</font><font color="#000080">;
               </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>R320x400 <font color="#000080">: </font><font color="#FF0000"><b>Case </b></font>Side <font color="#FF0000"><b>Of
                 </b></font><font color="#800000">1  </font><font color="#000080">: </font>VideoRam <font color="#000080">:= </font><font color="#800000">$a000</font><font color="#000080">;
                 </font><font color="#800000">2  </font><font color="#000080">: </font>VideoRam <font color="#000080">:= </font><font color="#800000">$a800</font><font color="#000080">;
                 </font><font color="#FF0000"><b>else </b></font>VideoRam <font color="#000080">:= </font><font color="#800000">$a000</font><font color="#000080">;
               </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>R360x480<font color="#000080">,
    </font>R640x400 <font color="#000080">: </font>VideoRam <font color="#000080">:= </font><font color="#800000">$a000</font><font color="#000080">;
    </font><font color="#FF0000"><b>else
      </b></font>VideoRam <font color="#000080">:= </font><font color="#800000">$a000</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Procedure </b></font>Show<font color="#000080">(</font>Resolution<font color="#000080">, </font>Side <font color="#000080">: </font>Word<font color="#000080">);
</font><font color="#FF0000"><b>Var
  </b></font>Start <font color="#000080">: </font>Word<font color="#000080">;
</font><font color="#FF0000"><b>begin
  Case </b></font>Resolution <font color="#FF0000"><b>Of
    </b></font>R320x240 <font color="#000080">:
    </font><font color="#FF0000"><b>Case </b></font>Side <font color="#FF0000"><b>Of
      </b></font><font color="#800000">1 </font><font color="#000080">: </font>Start <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font><font color="#800000">2 </font><font color="#000080">: </font>Start <font color="#000080">:= </font><font color="#800000">$4b</font><font color="#000080">;
      </font><font color="#800000">3 </font><font color="#000080">: </font>Start <font color="#000080">:= </font><font color="#800000">$96</font><font color="#000080">;
      </font><font color="#FF0000"><b>else </b></font><font color="#008000"><i>{ Default } </i></font>Start <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

    </font>R320x400<font color="#000080">:
    </font><font color="#FF0000"><b>Case </b></font>Side <font color="#FF0000"><b>Of
      </b></font><font color="#800000">1 </font><font color="#000080">: </font>Start <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font><font color="#800000">2 </font><font color="#000080">: </font>Start <font color="#000080">:= </font><font color="#800000">$80</font><font color="#000080">;
      </font><font color="#FF0000"><b>else </b></font><font color="#008000"><i>{ Default } </i></font>Start <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

    </font>R360x480<font color="#000080">,
    </font>R640x400 <font color="#000080">: </font>Start <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;

    </font><font color="#FF0000"><b>else </b></font><font color="#008000"><i>{ Default } </i></font>Start <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>portw<font color="#000080">[</font><font color="#800000">$03d4</font><font color="#000080">] := </font>Start <font color="#FF0000"><b>SHL </b></font><font color="#800000">8 </font><font color="#000080">+ </font><font color="#800000">$0c</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Procedure </b></font>SetPoint<font color="#000080">(</font>x<font color="#000080">, </font>y<font color="#000080">, </font>Color <font color="#000080">: </font>Word<font color="#000080">);
</font><font color="#FF0000"><b>Var
  </b></font>Offset <font color="#000080">: </font>Word<font color="#000080">;
</font><font color="#FF0000"><b>begin
</b></font><font color="#008000"><i>{ if actualMode=R640x400
  then Offset:=(y*zb4)+ (x shr 1 and $FE)
  else}
  </i></font>Offset <font color="#000080">:= (</font>y <font color="#000080">* </font>zb4<font color="#000080">) + (</font>x <font color="#FF0000"><b>Shr </b></font><font color="#800000">2</font><font color="#000080">);
  </font>portw<font color="#000080">[</font><font color="#800000">$03c4</font><font color="#000080">] := (</font><font color="#800000">1 </font><font color="#FF0000"><b>Shl </b></font><font color="#000080">((</font>x <font color="#FF0000"><b>And </b></font><font color="#800000">3</font><font color="#000080">) + </font><font color="#800000">8</font><font color="#000080">)) + </font><font color="#800000">2</font><font color="#000080">;
  </font>mem<font color="#000080">[</font>VideoRam <font color="#000080">: </font>Offset<font color="#000080">] := </font>Color<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Function </b></font>GetPoint<font color="#000080">(</font>x<font color="#000080">, </font>y <font color="#000080">: </font>Word<font color="#000080">) : </font>Word<font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>Offset <font color="#000080">: </font>Word<font color="#000080">;
</font><font color="#FF0000"><b>begin
</b></font><font color="#008000"><i>{ if actualMode=R640x400
  then Offset:=(y*zb4)+ (x shr 1 and $FE)
  else}
  </i></font>Offset <font color="#000080">:= (</font>y <font color="#000080">* </font>zb4<font color="#000080">) + (</font>x <font color="#FF0000"><b>Shr </b></font><font color="#800000">2</font><font color="#000080">);
  </font>portw<font color="#000080">[</font><font color="#800000">$03ce</font><font color="#000080">] := (</font>x <font color="#FF0000"><b>And </b></font><font color="#800000">3</font><font color="#000080">) </font><font color="#FF0000"><b>SHL </b></font><font color="#800000">8 </font><font color="#000080">+ </font><font color="#800000">4</font><font color="#000080">;
  </font>GetPoint <font color="#000080">:= </font>mem<font color="#000080">[</font>VideoRam <font color="#000080">: </font>Offset<font color="#000080">];
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ Demo-HauptProgramm }

</i></font><font color="#FF0000"><b>Procedure </b></font>main<font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>x<font color="#000080">,
  </font>y<font color="#000080">,
  </font>c<font color="#000080">,
  </font>OldMod <font color="#000080">: </font>Word<font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>OldMod <font color="#000080">:= </font>ReadMode<font color="#000080">; </font><font color="#008000"><i>{ speichert alten Videomodus in Oldmod }
  </i></font>Writeln<font color="#000080">(</font><font color="#800000">'VGASTAR'</font><font color="#000080">);
  </font>Writeln<font color="#000080">(</font><font color="#800000">'320x240 (3 Seiten), 320x400 (2 Seiten ) 360x480 oder'</font><font color="#000080">);
  </font>Writeln<font color="#000080">(</font><font color="#800000">'640x400 Pixel in 256 Farben auf Standard-VGA mit 256K'</font><font color="#000080">);
  </font>Writeln<font color="#000080">(</font><font color="#800000">'1991 Ingo Spitczok von Brisinski, c''t 12/91'</font><font color="#000080">);
  </font>Writeln<font color="#000080">(</font><font color="#800000">' Modus 1: 320 x 240 Pixel mit 3 Seiten'</font><font color="#000080">);
  </font>Write<font color="#000080">(</font><font color="#800000">'Bitte Return-Taste druecken'</font><font color="#000080">);
  </font>ch <font color="#000080">:= </font>ReadKey<font color="#000080">;
  </font>Mode<font color="#000080">(</font>R320x240<font color="#000080">);
  </font>Show<font color="#000080">(</font>R320x240<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
  </font>Paint<font color="#000080">(</font>R320x240<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
  </font>x <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>x <font color="#000080">&lt;= </font>max_X<font color="#000080">) </font><font color="#FF0000"><b>Do
  begin
    </b></font>y <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>y <font color="#000080">&lt;= </font>max_Y<font color="#000080">) </font><font color="#FF0000"><b>Do
    begin
      </b></font><font color="#008000"><i>{ male in 256 Farben }
      </i></font>SetPoint<font color="#000080">(</font>x<font color="#000080">, </font>y<font color="#000080">, ((</font>x <font color="#000080">+ </font>y<font color="#000080">) </font><font color="#FF0000"><b>And </b></font><font color="#800000">255</font><font color="#000080">));
      </font>y <font color="#000080">:= </font>Succ<font color="#000080">(</font>y<font color="#000080">)
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>x <font color="#000080">:= </font>Succ<font color="#000080">(</font>x<font color="#000080">)
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>Show<font color="#000080">(</font>R320x240<font color="#000080">, </font><font color="#800000">2</font><font color="#000080">);
  </font>Paint<font color="#000080">(</font>R320x240<font color="#000080">, </font><font color="#800000">2</font><font color="#000080">);
  </font>x <font color="#000080">:= </font><font color="#800000">100</font><font color="#000080">;
  </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>x <font color="#000080">&lt; </font><font color="#800000">201</font><font color="#000080">) </font><font color="#FF0000"><b>Do
  begin
    </b></font>y <font color="#000080">:= </font><font color="#800000">100</font><font color="#000080">;
    </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>y <font color="#000080">&lt; </font><font color="#800000">201</font><font color="#000080">) </font><font color="#FF0000"><b>Do
    begin
      </b></font><font color="#008000"><i>{ Quadrat 100x100 Pixel }
      </i></font>SetPoint<font color="#000080">(</font>x<font color="#000080">, </font>y<font color="#000080">, ((</font>x <font color="#000080">+ </font>y<font color="#000080">) </font><font color="#FF0000"><b>And </b></font><font color="#800000">255</font><font color="#000080">));
      </font>y <font color="#000080">:= </font>Succ<font color="#000080">(</font>y<font color="#000080">)
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>x <font color="#000080">:= </font>Succ<font color="#000080">(</font>x<font color="#000080">)
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>Paint<font color="#000080">(</font>R320x240<font color="#000080">, </font><font color="#800000">3</font><font color="#000080">);
  </font>c <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>c <font color="#000080">&lt;= </font>max_Y<font color="#000080">) </font><font color="#FF0000"><b>Do
  begin
    </b></font>SetPoint<font color="#000080">(</font>c<font color="#000080">, </font>c<font color="#000080">, </font><font color="#800000">10</font><font color="#000080">);
    </font>c <font color="#000080">:= </font>Succ<font color="#000080">(</font>c<font color="#000080">)
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>ch <font color="#000080">:= </font>ReadKey<font color="#000080">;
  </font>Show<font color="#000080">(</font>R320x240<font color="#000080">, </font><font color="#800000">3</font><font color="#000080">);
  </font>ch <font color="#000080">:= </font>ReadKey<font color="#000080">;
  </font>Show<font color="#000080">(</font>R320x240<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
  </font>ch <font color="#000080">:= </font>ReadKey<font color="#000080">;
  </font>OldMode<font color="#000080">(</font>OldMod<font color="#000080">);
  </font>Writeln<font color="#000080">(</font><font color="#800000">' Modus 2: 320 x 400 Pixel, 2 Seiten'</font><font color="#000080">);
  </font>ch <font color="#000080">:= </font>ReadKey<font color="#000080">;
  </font>Mode<font color="#000080">(</font>R320x400<font color="#000080">);
  </font>Show<font color="#000080">(</font>R320x400<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
  </font>Paint<font color="#000080">(</font>R320x400<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
  </font>x <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;

  </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>x <font color="#000080">&lt;= </font>max_X<font color="#000080">) </font><font color="#FF0000"><b>Do
  begin
    </b></font>y <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>y <font color="#000080">&lt; </font><font color="#800000">200</font><font color="#000080">) </font><font color="#FF0000"><b>Do
    begin
      </b></font>SetPoint<font color="#000080">(</font>x<font color="#000080">, </font>y<font color="#000080">, ((</font>x <font color="#000080">+ </font>y<font color="#000080">) </font><font color="#FF0000"><b>And </b></font><font color="#800000">255</font><font color="#000080">));
      </font>y <font color="#000080">:= </font>Succ<font color="#000080">(</font>y<font color="#000080">)
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>x <font color="#000080">:= </font>Succ<font color="#000080">(</font>x<font color="#000080">)
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>x <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>x <font color="#000080">&lt; </font><font color="#800000">320</font><font color="#000080">) </font><font color="#FF0000"><b>Do
  begin
    </b></font>y <font color="#000080">:= </font><font color="#800000">200</font><font color="#000080">;
    </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>y <font color="#000080">&lt; </font><font color="#800000">400</font><font color="#000080">) </font><font color="#FF0000"><b>Do
    begin
      </b></font>SetPoint<font color="#000080">(</font>x<font color="#000080">, </font>y<font color="#000080">, </font><font color="#800000">22</font><font color="#000080">);
      </font>y <font color="#000080">:= </font>Succ<font color="#000080">(</font>y<font color="#000080">)
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>x <font color="#000080">:= </font>Succ<font color="#000080">(</font>x<font color="#000080">)
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>Paint<font color="#000080">(</font>R320x400<font color="#000080">, </font><font color="#800000">2</font><font color="#000080">);
  </font>x <font color="#000080">:= </font><font color="#800000">80</font><font color="#000080">;
  </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>x <font color="#000080">&lt; </font><font color="#800000">220</font><font color="#000080">) </font><font color="#FF0000"><b>Do
  begin
    </b></font>y <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>y <font color="#000080">&lt;= </font>max_Y<font color="#000080">) </font><font color="#FF0000"><b>Do
    begin
      </b></font>SetPoint<font color="#000080">(</font>x<font color="#000080">, </font>y<font color="#000080">, ((</font>x <font color="#000080">+ </font>y<font color="#000080">) </font><font color="#FF0000"><b>And </b></font><font color="#800000">255</font><font color="#000080">));
      </font>y <font color="#000080">:= </font>Succ<font color="#000080">(</font>y<font color="#000080">)
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>x <font color="#000080">:= </font>Succ<font color="#000080">(</font>x<font color="#000080">)
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>ch <font color="#000080">:= </font>ReadKey<font color="#000080">;
  </font>Show<font color="#000080">(</font>R320x400<font color="#000080">, </font><font color="#800000">2</font><font color="#000080">);
  </font>ch <font color="#000080">:= </font>ReadKey<font color="#000080">;
  </font>Show<font color="#000080">(</font>R320x400<font color="#000080">, </font><font color="#800000">3</font><font color="#000080">);
  </font>Paint<font color="#000080">(</font>R320x400<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
  </font>x <font color="#000080">:= </font><font color="#800000">100</font><font color="#000080">;

  </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>x <font color="#000080">&lt; </font><font color="#800000">200</font><font color="#000080">) </font><font color="#FF0000"><b>Do
  begin
    </b></font>y <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>y <font color="#000080">&lt; </font><font color="#800000">50</font><font color="#000080">) </font><font color="#FF0000"><b>Do
    begin
      </b></font>c <font color="#000080">:= </font>GetPoint<font color="#000080">(</font>x<font color="#000080">, </font>y<font color="#000080">);
      </font><font color="#008000"><i>{ Lies die Farbe }
      </i></font>SetPoint<font color="#000080">(</font>x<font color="#000080">, </font>y <font color="#000080">+ </font><font color="#800000">250</font><font color="#000080">, </font>c<font color="#000080">);
      </font><font color="#008000"><i>{ Male die gelesene Farbe } </i></font><font color="#000080">;
      </font>y <font color="#000080">:= </font>Succ<font color="#000080">(</font>y<font color="#000080">)
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>x <font color="#000080">:= </font>Succ<font color="#000080">(</font>x<font color="#000080">)
  </font><font color="#FF0000"><b>end </b></font><font color="#008000"><i>{ For }</i></font><font color="#000080">;

  </font>ch <font color="#000080">:= </font>ReadKey<font color="#000080">;
  </font>OldMode<font color="#000080">(</font>OldMod<font color="#000080">);
  </font>Writeln<font color="#000080">(</font><font color="#800000">' Modus 3: 360 x 400 Pixel, 1 Seite'</font><font color="#000080">);
  </font>ch <font color="#000080">:= </font>ReadKey<font color="#000080">;
  </font>Mode<font color="#000080">(</font>R360x480<font color="#000080">);
  </font>x <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;

  </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>x <font color="#000080">&lt; </font><font color="#800000">320</font><font color="#000080">) </font><font color="#FF0000"><b>Do
  begin
    </b></font>y <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>y <font color="#000080">&lt; </font><font color="#800000">200</font><font color="#000080">) </font><font color="#FF0000"><b>Do
    begin
      </b></font>SetPoint<font color="#000080">(</font>x<font color="#000080">, </font>y<font color="#000080">, (</font>x <font color="#FF0000"><b>And </b></font><font color="#800000">255</font><font color="#000080">));
      </font>y <font color="#000080">:= </font>Succ<font color="#000080">(</font>y<font color="#000080">)
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>x <font color="#000080">:= </font>Succ<font color="#000080">(</font>x<font color="#000080">)
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>x <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>x <font color="#000080">&lt;= </font>max_X<font color="#000080">) </font><font color="#FF0000"><b>Do
  begin
    </b></font>y <font color="#000080">:= </font><font color="#800000">200</font><font color="#000080">;
    </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>y <font color="#000080">&lt;= </font>max_Y<font color="#000080">) </font><font color="#FF0000"><b>Do
    begin
      </b></font>SetPoint<font color="#000080">(</font>x<font color="#000080">, </font>y<font color="#000080">, </font>y <font color="#FF0000"><b>And </b></font><font color="#800000">255</font><font color="#000080">);
      </font>y <font color="#000080">:= </font>Succ<font color="#000080">(</font>y<font color="#000080">)
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>x <font color="#000080">:= </font>Succ<font color="#000080">(</font>x<font color="#000080">)
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>x <font color="#000080">:= </font><font color="#800000">320</font><font color="#000080">;
  </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>x <font color="#000080">&lt;= </font>max_X<font color="#000080">) </font><font color="#FF0000"><b>Do
  begin
    </b></font>y <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>y  <font color="#000080">&lt;=  </font>max_Y<font color="#000080">) </font><font color="#FF0000"><b>Do
    begin
      </b></font>SetPoint<font color="#000080">(</font>x<font color="#000080">, </font>y<font color="#000080">, </font><font color="#800000">25</font><font color="#000080">);
      </font>y  <font color="#000080">:=  </font>Succ<font color="#000080">(</font>y<font color="#000080">)
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>x  <font color="#000080">:=  </font>Succ<font color="#000080">(</font>x<font color="#000080">)
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>x  <font color="#000080">:=  </font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>x <font color="#000080">&lt;= </font>max_X<font color="#000080">) </font><font color="#FF0000"><b>Do
  begin
    </b></font>y <font color="#000080">:= </font><font color="#800000">400</font><font color="#000080">;
    </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>y <font color="#000080">&lt;= </font>max_Y<font color="#000080">) </font><font color="#FF0000"><b>Do
    begin
      </b></font>SetPoint<font color="#000080">(</font>x<font color="#000080">, </font>y<font color="#000080">, </font><font color="#800000">26</font><font color="#000080">);
      </font>y <font color="#000080">:= </font>Succ<font color="#000080">(</font>y<font color="#000080">)
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>x <font color="#000080">:= </font>Succ<font color="#000080">(</font>x<font color="#000080">)
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>ch <font color="#000080">:= </font>ReadKey<font color="#000080">;
  </font>OldMode<font color="#000080">(</font>OldMod<font color="#000080">);
  </font>Writeln<font color="#000080">(</font><font color="#800000">' Modus 4: 640 x 400 Pixel, 1 Seite'</font><font color="#000080">);
  </font>ch <font color="#000080">:= </font>ReadKey<font color="#000080">;
  </font>Mode<font color="#000080">(</font>R640x400<font color="#000080">);
  </font>x <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;

  </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>x <font color="#000080">&lt;= </font>max_X<font color="#000080">) </font><font color="#FF0000"><b>Do
  begin
    </b></font>y <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>y <font color="#000080">&lt;= </font>max_Y<font color="#000080">) </font><font color="#FF0000"><b>Do
    begin
      </b></font><font color="#008000"><i>{ male in 256 Farben }</i></font><font color="#000080">;
      </font>SetPoint<font color="#000080">(</font>x<font color="#000080">, </font>y<font color="#000080">, ((</font>x<font color="#000080">+</font>y<font color="#000080">) </font><font color="#FF0000"><b>And </b></font><font color="#800000">255</font><font color="#000080">));
      </font>y <font color="#000080">:= </font>Succ<font color="#000080">(</font>y<font color="#000080">)
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>x <font color="#000080">:= </font>Succ<font color="#000080">(</font>x<font color="#000080">)
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>x <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>x <font color="#000080">&lt; </font><font color="#800000">400</font><font color="#000080">) </font><font color="#FF0000"><b>Do
  begin
    </b></font>y <font color="#000080">:= </font>x<font color="#000080">;
    </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>y <font color="#000080">&lt; </font><font color="#800000">400</font><font color="#000080">) </font><font color="#FF0000"><b>Do
    begin
      </b></font>c <font color="#000080">:= </font>GetPoint<font color="#000080">(</font>x<font color="#000080">, </font>y<font color="#000080">);
      </font>SetPoint<font color="#000080">(</font>x<font color="#000080">, </font>y<font color="#000080">, </font><font color="#800000">255</font><font color="#000080">-</font>c<font color="#000080">);
      </font><font color="#008000"><i>{ aendere Farbe}</i></font><font color="#000080">;
      </font>y <font color="#000080">:= </font>Succ<font color="#000080">(</font>y<font color="#000080">)
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>x <font color="#000080">:= </font>Succ<font color="#000080">(</font>x<font color="#000080">)
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>ch <font color="#000080">:= </font>ReadKey<font color="#000080">;
  </font>OldMode<font color="#000080">(</font>OldMod<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>SetPix<font color="#000080">(</font>x<font color="#000080">, </font>y<font color="#000080">, </font>Color <font color="#000080">: </font>Word<font color="#000080">);
</font><font color="#FF0000"><b>Var
  </b></font>Offset <font color="#000080">: </font>Word<font color="#000080">;
</font><font color="#FF0000"><b>begin
  if </b></font>actualMode <font color="#000080">= </font>R640x400 <font color="#FF0000"><b>then
    </b></font>Offset <font color="#000080">:= (</font>y <font color="#000080">* </font>zb4<font color="#000080">) + (</font>x <font color="#FF0000"><b>shr </b></font><font color="#800000">1 </font><font color="#FF0000"><b>and </b></font><font color="#800000">$FE</font><font color="#000080">)
  </font><font color="#FF0000"><b>else
    </b></font>Offset <font color="#000080">:= (</font>y <font color="#000080">* </font>zb4<font color="#000080">) + (</font>x <font color="#FF0000"><b>Shr </b></font><font color="#800000">2</font><font color="#000080">);
  </font>portw<font color="#000080">[</font><font color="#800000">$03c4</font><font color="#000080">] := (</font><font color="#800000">1 </font><font color="#FF0000"><b>Shl </b></font><font color="#000080">((</font>x <font color="#FF0000"><b>And </b></font><font color="#800000">3</font><font color="#000080">) + </font><font color="#800000">8</font><font color="#000080">)) + </font><font color="#800000">2</font><font color="#000080">;
  </font>mem<font color="#000080">[</font>VideoRam <font color="#000080">: </font>Offset<font color="#000080">] := </font>Color<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Function </b></font>GetPix<font color="#000080">(</font>x<font color="#000080">, </font>y <font color="#000080">: </font>Word<font color="#000080">) : </font>Word<font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>Offset <font color="#000080">: </font>Word<font color="#000080">;
</font><font color="#FF0000"><b>begin
</b></font><font color="#008000"><i>{ if actualMode=R640x400
  then Offset := (y*zb4)+ (x shr 1 and $FE)
  else}
  </i></font>Offset <font color="#000080">:= (</font>y <font color="#000080">* </font>zb4<font color="#000080">) + (</font>x <font color="#FF0000"><b>Shr </b></font><font color="#800000">2</font><font color="#000080">);
  </font>portw<font color="#000080">[</font><font color="#800000">$03ce</font><font color="#000080">] := (</font>x <font color="#FF0000"><b>And </b></font><font color="#800000">3</font><font color="#000080">) </font><font color="#FF0000"><b>SHL </b></font><font color="#800000">8 </font><font color="#000080">+ </font><font color="#800000">4</font><font color="#000080">;
  </font>GetPix <font color="#000080">:= </font>mem<font color="#000080">[</font>VideoRam <font color="#000080">: </font>Offset<font color="#000080">];
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>main<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0066.PAS">Original</a><b>]</b></p></body>
</html>
