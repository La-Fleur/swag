<html>
<head><title> "Ellipse Routine" by TANI HOSOKAWA</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0154.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>procedure </b></font>PutPixel<font color="#000080">(</font>X<font color="#000080">,</font>Y<font color="#000080">: </font>word<font color="#000080">; </font>Color<font color="#000080">: </font>byte<font color="#000080">); </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm
 </b></font><font color="#FF00FF">mov ax,y
 mov bx,x
 xchg ah,al
 add bx,ax
 shr ax,1
 shr ax,1
 add bx,ax
 mov ax,0a000h
 mov es,ax
 mov al,Color
 mov es:[bx],al
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>Ellipse<font color="#000080">(</font>X<font color="#000080">,</font>Y<font color="#000080">,</font>YRad<font color="#000080">,</font>XRad<font color="#000080">: </font>integer<font color="#000080">; </font>Color<font color="#000080">: </font>byte<font color="#000080">);
</font><font color="#FF0000"><b>var
 </b></font>EX<font color="#000080">,</font>EY<font color="#000080">: </font>integer<font color="#000080">;
 </font>YRadSqr<font color="#000080">,</font>YRadSqr2<font color="#000080">,</font>XRadSqr<font color="#000080">,</font>XRadSqr2<font color="#000080">,</font>D<font color="#000080">,</font>DX<font color="#000080">,</font>DY<font color="#000080">: </font>longint<font color="#000080">;
</font><font color="#FF0000"><b>begin
 </b></font>EX<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
 </font>EY<font color="#000080">:=</font>XRad<font color="#000080">;
 </font>YRadSqr<font color="#000080">:=</font>longint<font color="#000080">(</font>YRad<font color="#000080">)*</font>YRad<font color="#000080">;
 </font>YRadSqr2<font color="#000080">:=</font><font color="#800000">2</font><font color="#000080">*</font>YRadSqr<font color="#000080">;
 </font>XRadSqr<font color="#000080">:=</font>longInt<font color="#000080">(</font>XRad<font color="#000080">)*</font>XRad<font color="#000080">;
 </font>XRadSqr2<font color="#000080">:=</font><font color="#800000">2</font><font color="#000080">*</font>XRadSqr<font color="#000080">;
 </font>D<font color="#000080">:=</font>XRadSqr<font color="#000080">-</font>YRadSqr<font color="#000080">*</font>XRad<font color="#000080">+</font>YRadSqr <font color="#FF0000"><b>div </b></font><font color="#800000">4</font><font color="#000080">;
 </font>DX<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
 </font>DY<font color="#000080">:=</font>YRadSqr2<font color="#000080">*</font>XRad<font color="#000080">;
 </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">-</font>EY<font color="#000080">,</font>X<font color="#000080">,</font>Color<font color="#000080">);
 </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">+</font>EY<font color="#000080">,</font>X<font color="#000080">,</font>Color<font color="#000080">);
 </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">,</font>X<font color="#000080">-</font>YRad<font color="#000080">,</font>Color<font color="#000080">);
 </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">,</font>X<font color="#000080">+</font>YRad<font color="#000080">,</font>Color<font color="#000080">);
 </font><font color="#FF0000"><b>while </b></font><font color="#000080">(</font>DX<font color="#000080">&lt;</font>DY<font color="#000080">) </font><font color="#FF0000"><b>do begin
  if </b></font><font color="#000080">(</font>D<font color="#000080">&gt;</font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then begin
   </b></font>Dec<font color="#000080">(</font>EY<font color="#000080">);
   </font>Dec<font color="#000080">(</font>DY<font color="#000080">,</font>YRadSqr2<font color="#000080">);
   </font>Dec<font color="#000080">(</font>D<font color="#000080">,</font>DY<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>Inc<font color="#000080">(</font>EX<font color="#000080">);
  </font>Inc<font color="#000080">(</font>DX<font color="#000080">,</font>XRadSqr2<font color="#000080">);
  </font>Inc<font color="#000080">(</font>D<font color="#000080">,</font>XRadSqr<font color="#000080">+</font>DX<font color="#000080">);
  </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">+</font>EY<font color="#000080">,</font>X<font color="#000080">+</font>EX<font color="#000080">,</font>Color<font color="#000080">);
  </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">+</font>EY<font color="#000080">,</font>X<font color="#000080">-</font>EX<font color="#000080">,</font>Color<font color="#000080">);
  </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">-</font>EY<font color="#000080">,</font>X<font color="#000080">+</font>EX<font color="#000080">,</font>Color<font color="#000080">);
  </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">-</font>EY<font color="#000080">,</font>X<font color="#000080">-</font>EX<font color="#000080">,</font>Color<font color="#000080">);
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font>Inc<font color="#000080">(</font>D<font color="#000080">,(</font><font color="#800000">3</font><font color="#000080">*(</font>YRadSqr<font color="#000080">-</font>XRadSqr<font color="#000080">) </font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">-(</font>DX<font color="#000080">+</font>DY<font color="#000080">)) </font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">);
 </font><font color="#FF0000"><b>while </b></font><font color="#000080">(</font>EY<font color="#000080">&gt;</font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>do begin
  if</b></font><font color="#000080">(</font>D<font color="#000080">&lt;</font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then begin
   </b></font>Inc<font color="#000080">(</font>EX<font color="#000080">);
   </font>Inc<font color="#000080">(</font>DX<font color="#000080">,</font>XRadSqr2<font color="#000080">);
   </font>Inc<font color="#000080">(</font>D<font color="#000080">,</font>XRadSqr<font color="#000080">+</font>DX<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>Dec<font color="#000080">(</font>EY<font color="#000080">);
  </font>Dec<font color="#000080">(</font>DY<font color="#000080">,</font>YRadSqr2<font color="#000080">);
  </font>Inc<font color="#000080">(</font>D<font color="#000080">,</font>YRadSqr<font color="#000080">-</font>DY<font color="#000080">);
  </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">+</font>EY<font color="#000080">,</font>X<font color="#000080">+</font>EX<font color="#000080">,</font>Color<font color="#000080">);
  </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">+</font>EY<font color="#000080">,</font>X<font color="#000080">-</font>EX<font color="#000080">,</font>Color<font color="#000080">);
  </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">-</font>EY<font color="#000080">,</font>X<font color="#000080">+</font>EX<font color="#000080">,</font>Color<font color="#000080">);
  </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">-</font>EY<font color="#000080">,</font>X<font color="#000080">-</font>EX<font color="#000080">,</font>Color<font color="#000080">);
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{ little test code }
</i></font><font color="#FF0000"><b>begin
 asm
  </b></font><font color="#FF00FF">mov ah,0
  mov al,$13
  int 10h
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font>Ellipse<font color="#000080">(</font><font color="#800000">50</font><font color="#000080">,</font><font color="#800000">50</font><font color="#000080">,</font><font color="#800000">40</font><font color="#000080">,</font><font color="#800000">20</font><font color="#000080">,</font><font color="#800000">13</font><font color="#000080">);
 </font>Readln<font color="#000080">;
 </font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">mov ah,0
  mov al,$3
  int 10h
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0154.PAS">Original</a><b>]</b></p></body>
</html>
