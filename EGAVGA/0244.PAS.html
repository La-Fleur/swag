<html>
<head><title> "Exploding Box - BGI Routines" by MICHAEL DAY</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0244.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>

<font color="#008000"><i>{ *********************************************************************** }
{                                                                         }
{  ExpBox V1.03 explodes a Box on the display using BGI routines.         }
{  You define the final box area, how many steps in the explosion,        }
{  the speed at which the explosion occurs, and where the explosion       }
{  is to start at. You also define the color and pattern of the           }
{  exploding box. You can optionally specifiy a rectangle to follow       }
{  the exploding box to provide more action. The color of the rectangle   }
{  can also be defined.                                                   }
{    Uses the TP graph unit and the CRT unit (only uses the Delay         }
{  function from the CRT unit). If you don't use the CRT unit, then you   }
{  might want to consider using the CRTI unit from the Borland TP4        }
{  library on CompuServe which allows you to remove unwanted functions.   }
{                                                                         }
{      Originally written by Michael Day as 20 November 1988              }
{                  Copyright 1988 by Michael Day                          }
{           This release (V1.03) as of 14 February 1989                   }
{            Released to the public domain by author.                     }
{                                                                         }
{ *********************************************************************** }
{ History:                                                                }
{ V1.01 - Original release                                                }
{ V1.02 - Removed excess unused code                                      }
{ V1.03 - Adjusted number to match new release of SDI                     }

</i></font><font color="#FF0000"><b>unit </b></font>ExpBox<font color="#000080">;
</font><font color="#FF0000"><b>interface

uses </b></font>graph<font color="#000080">,</font>CRT<font color="#000080">;

</font><font color="#008000"><i>{ *********************************************************************** }
{--                    External access definitions                      --}
{ *********************************************************************** }

{-------------------------------------------------------------------------}
{Explodes a box on the screen}
{x1,y1,x2,y2=final box size, Step=explosion steps, }
{Speed=delay in ms between explosions, Style=how to explode}
{Color=box color, Pattern=background pattern, }
{RColor=rectangle color (if used) }

</i></font><font color="#FF0000"><b>procedure </b></font>ExplodeBox<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">:</font>integer<font color="#000080">;
                     </font>Speed<font color="#000080">,</font>Step<font color="#000080">,</font>Style<font color="#000080">:</font>word<font color="#000080">;
                     </font>Color<font color="#000080">,</font>Pattern<font color="#000080">,</font>RColor<font color="#000080">:</font>byte<font color="#000080">);


</font><font color="#008000"><i>{ *********************************************************************** }

</i></font><font color="#FF0000"><b>implementation


procedure </b></font>ExpRect<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">:</font>integer<font color="#000080">; </font>Style<font color="#000080">:</font>word<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>i<font color="#000080">,</font>Rc<font color="#000080">,</font>rx<font color="#000080">,</font>ry<font color="#000080">,</font>ix<font color="#000080">,</font>iy<font color="#000080">:</font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
   </b></font>bar<font color="#000080">(</font>X1<font color="#000080">, </font>Y1<font color="#000080">, </font>X2<font color="#000080">, </font>Y2<font color="#000080">);
   </font>Rc <font color="#000080">:= (</font>style <font color="#FF0000"><b>shr </b></font><font color="#800000">5</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#800000">7</font><font color="#000080">;
   </font><font color="#FF0000"><b>if </b></font>Rc <font color="#000080">&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
   begin
     </b></font>ix <font color="#000080">:= ((</font>x2<font color="#000080">-</font>x1<font color="#000080">)</font><font color="#FF0000"><b>shr </b></font><font color="#800000">1</font><font color="#000080">)</font><font color="#FF0000"><b>shr </b></font>rc<font color="#000080">;
     </font>iy <font color="#000080">:= ((</font>y2<font color="#000080">-</font>y1<font color="#000080">)</font><font color="#FF0000"><b>shr </b></font><font color="#800000">1</font><font color="#000080">)</font><font color="#FF0000"><b>shr </b></font>rc<font color="#000080">;
     </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font>Rc <font color="#FF0000"><b>downto </b></font><font color="#800000">1 </font><font color="#FF0000"><b>do
     begin
       </b></font>rx <font color="#000080">:= ((</font>x2<font color="#000080">-</font>x1<font color="#000080">)</font><font color="#FF0000"><b>shr</b></font><font color="#000080">(</font>i<font color="#000080">))-</font>ix<font color="#000080">;
       </font>ry <font color="#000080">:= ((</font>y2<font color="#000080">-</font>y1<font color="#000080">)</font><font color="#FF0000"><b>shr</b></font><font color="#000080">(</font>i<font color="#000080">))-</font>iy<font color="#000080">;
       </font>rectangle<font color="#000080">(</font>succ<font color="#000080">(</font>X1<font color="#000080">+</font>rx<font color="#000080">), </font>succ<font color="#000080">(</font>Y1<font color="#000080">+</font>ry<font color="#000080">), </font>pred<font color="#000080">(</font>X2<font color="#000080">-</font>rx<font color="#000080">), </font>pred<font color="#000080">(</font>Y2<font color="#000080">-</font>ry<font color="#000080">) );
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++}
{                         misc special effects                            }
{+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++}

{-------------------------------------------------------------------------}
{Explodes a box on the screen}

{Styles: 0=explode from center, 1=explode from top, 2=explode from bottom,}
{3=explode from left, 4=explode from right, 5=explode from top left corner,}
{6=explode bot left corner, 7=explode top right corner, }
{8=explode from bottom right corner. 9 and Above = no explode.}
{if Style bits 5,6,7 are set, then rectangles will be drawn while exploding.}
{a Step value of 0 or 1 will not cause an explode, the value must be larger}
{than 1 to get an explode to happen. Speed sets the delay in ms between}
{explode steps. Color and Pattern set the exploding box color and pattern.}
{RColor sets the rectangle color (when used). If Style bit 4 is on, then }
{sound effects will also be added.}

</i></font><font color="#FF0000"><b>procedure </b></font>ExplodeBox<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">:</font>integer<font color="#000080">;
                     </font>Speed<font color="#000080">,</font>Step<font color="#000080">,</font>Style<font color="#000080">:</font>word<font color="#000080">;
                     </font>Color<font color="#000080">,</font>Pattern<font color="#000080">,</font>RColor<font color="#000080">:</font>byte<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>si<font color="#000080">,</font>i<font color="#000080">,</font>Sx<font color="#000080">,</font>Sy <font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
   if </b></font>Step <font color="#000080">&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
   begin
     if </b></font><font color="#000080">(</font>Style <font color="#FF0000"><b>and </b></font><font color="#800000">$10</font><font color="#000080">) = </font><font color="#800000">$10 </font><font color="#FF0000"><b>then </b></font>NoSound<font color="#000080">;
     </font>Sx <font color="#000080">:= (</font>x2<font color="#000080">-</font>x1<font color="#000080">) </font><font color="#FF0000"><b>div </b></font>Step<font color="#000080">;
     </font>Sy <font color="#000080">:= (</font>y2<font color="#000080">-</font>y1<font color="#000080">) </font><font color="#FF0000"><b>div </b></font>Step<font color="#000080">;
     </font>SetFillStyle<font color="#000080">(</font>Pattern<font color="#000080">,</font>Color<font color="#000080">);
     </font>setcolor<font color="#000080">(</font>RColor<font color="#000080">);
     </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font>pred<font color="#000080">(</font>Step<font color="#000080">) </font><font color="#FF0000"><b>downto </b></font><font color="#800000">1 </font><font color="#FF0000"><b>do
     begin
       case </b></font><font color="#000080">(</font>Style <font color="#FF0000"><b>and </b></font><font color="#800000">$f</font><font color="#000080">) </font><font color="#FF0000"><b>of
         </b></font><font color="#008000"><i>{center explode}
         </i></font><font color="#800000">0</font><font color="#000080">: </font>ExpRect<font color="#000080">(</font>x1<font color="#000080">+((</font>Sx<font color="#000080">*</font>i<font color="#000080">)</font><font color="#FF0000"><b>shr </b></font><font color="#800000">1</font><font color="#000080">), </font>y1<font color="#000080">+((</font>Sy<font color="#000080">*</font>i<font color="#000080">)</font><font color="#FF0000"><b>shr </b></font><font color="#800000">1</font><font color="#000080">),
                    </font>x2<font color="#000080">-((</font>Sx<font color="#000080">*</font>i<font color="#000080">)</font><font color="#FF0000"><b>shr </b></font><font color="#800000">1</font><font color="#000080">), </font>y2<font color="#000080">-((</font>Sy<font color="#000080">*</font>i<font color="#000080">)</font><font color="#FF0000"><b>shr </b></font><font color="#800000">1</font><font color="#000080">), </font>Style<font color="#000080">);

         </font><font color="#008000"><i>{top explode}
         </i></font><font color="#800000">1</font><font color="#000080">: </font>ExpRect<font color="#000080">(</font>x1<font color="#000080">, </font>y1<font color="#000080">, </font>x2<font color="#000080">, </font>y2<font color="#000080">-(</font>Sy<font color="#000080">*</font>i<font color="#000080">), </font>Style<font color="#000080">);

         </font><font color="#008000"><i>{bot explode}
         </i></font><font color="#800000">2</font><font color="#000080">: </font>ExpRect<font color="#000080">(</font>x1<font color="#000080">, </font>y1<font color="#000080">+(</font>Sy<font color="#000080">*</font>i<font color="#000080">), </font>x2<font color="#000080">, </font>y2<font color="#000080">, </font>Style<font color="#000080">);

         </font><font color="#008000"><i>{left explode}
         </i></font><font color="#800000">3</font><font color="#000080">: </font>ExpRect<font color="#000080">(</font>x1<font color="#000080">, </font>y1<font color="#000080">, </font>x2<font color="#000080">-(</font>Sx<font color="#000080">*</font>i<font color="#000080">), </font>y2<font color="#000080">, </font>Style<font color="#000080">);

         </font><font color="#008000"><i>{right explode}
         </i></font><font color="#800000">4</font><font color="#000080">: </font>ExpRect<font color="#000080">(</font>x1<font color="#000080">+(</font>Sx<font color="#000080">*</font>i<font color="#000080">), </font>y1<font color="#000080">, </font>x2<font color="#000080">, </font>y2<font color="#000080">, </font>Style<font color="#000080">);

         </font><font color="#008000"><i>{top left explode}
         </i></font><font color="#800000">5</font><font color="#000080">: </font>ExpRect<font color="#000080">(</font>x1<font color="#000080">, </font>y1<font color="#000080">, </font>x2<font color="#000080">-(</font>Sx<font color="#000080">*</font>i<font color="#000080">), </font>y2<font color="#000080">-(</font>Sy<font color="#000080">*</font>i<font color="#000080">), </font>Style<font color="#000080">);

         </font><font color="#008000"><i>{bot left explode}
         </i></font><font color="#800000">6</font><font color="#000080">: </font>ExpRect<font color="#000080">(</font>x1<font color="#000080">, </font>y1<font color="#000080">+(</font>Sy<font color="#000080">*</font>i<font color="#000080">), </font>x2<font color="#000080">-(</font>Sx<font color="#000080">*</font>i<font color="#000080">), </font>y2<font color="#000080">, </font>Style<font color="#000080">);

         </font><font color="#008000"><i>{top right explode}
         </i></font><font color="#800000">7</font><font color="#000080">: </font>ExpRect<font color="#000080">(</font>x1<font color="#000080">+(</font>Sx<font color="#000080">*</font>i<font color="#000080">), </font>y1<font color="#000080">, </font>x2<font color="#000080">, </font>y2<font color="#000080">-(</font>Sy<font color="#000080">*</font>i<font color="#000080">), </font>Style<font color="#000080">);

         </font><font color="#008000"><i>{bot right explode}
         </i></font><font color="#800000">8</font><font color="#000080">: </font>ExpRect<font color="#000080">(</font>x1<font color="#000080">+(</font>Sx<font color="#000080">*</font>i<font color="#000080">), </font>y1<font color="#000080">+(</font>Sy<font color="#000080">*</font>i<font color="#000080">), </font>x2<font color="#000080">, </font>y2<font color="#000080">, </font>Style<font color="#000080">);

       </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{case}

       </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>Style <font color="#FF0000"><b>and </b></font><font color="#800000">$10</font><font color="#000080">) = </font><font color="#800000">$10 </font><font color="#FF0000"><b>then </b></font>Sound<font color="#000080">(</font>i <font color="#FF0000"><b>shl </b></font><font color="#800000">8</font><font color="#000080">);
       </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>Style <font color="#FF0000"><b>and </b></font><font color="#800000">$f</font><font color="#000080">) &lt; </font><font color="#800000">9 </font><font color="#FF0000"><b>then </b></font>delay<font color="#000080">(</font>Speed<font color="#000080">);
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
     </font>bar<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">);  </font><font color="#008000"><i>{draw final box}
     </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>Style <font color="#FF0000"><b>and </b></font><font color="#800000">$10</font><font color="#000080">) = </font><font color="#800000">$10 </font><font color="#FF0000"><b>then </b></font>NoSound<font color="#000080">; </font><font color="#008000"><i>{turn the sound off if was on}
   </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#008000"><i>{ *********************************************************************** }

</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0244.PAS">Original</a><b>]</b></p></body>
</html>
