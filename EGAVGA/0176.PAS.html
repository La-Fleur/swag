<html>
<head><title> "Texture Mapping" by ALEX CHALFIN</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0176.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
Here is a &quot;Perfect&quot; texture mapper. It uses real number to map a square
bitmap into a 4 point polygon. I haven't had any time to optimize it
so I would love to see somebody speed it up for realtime uses. :)
}

</i></font><font color="#FF0000"><b>Program </b></font>TextMap<font color="#000080">;
</font><font color="#008000"><i>{$N+,E+}   { Sorry all you out there :) }

</i></font><font color="#FF0000"><b>Uses </b></font>Crt<font color="#000080">;

</font><font color="#FF0000"><b>Type
  </b></font>PointType <font color="#000080">= </font><font color="#FF0000"><b>Record
    </b></font>X<font color="#000080">, </font>Y <font color="#000080">: </font>Integer<font color="#000080">;
  </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Const
  </b></font>Top <font color="#000080">= </font><font color="#800000">1</font><font color="#000080">;    </font>Bottom <font color="#000080">= </font><font color="#800000">2</font><font color="#000080">; </font>Left <font color="#000080">= </font><font color="#800000">3</font><font color="#000080">; </font>Right <font color="#000080">= </font><font color="#800000">4</font><font color="#000080">; </font>PWidth <font color="#000080">: </font>Integer <font color="#000080">= </font><font color="#800000">15</font><font color="#000080">;
  </font>PHeight <font color="#000080">: </font>Integer <font color="#000080">= </font><font color="#800000">15</font><font color="#000080">;

  </font>Points <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">3</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>PointType <font color="#000080">= ((</font>x <font color="#000080">: </font><font color="#800000">100</font><font color="#000080">; </font>y <font color="#000080">: </font><font color="#800000">100</font><font color="#000080">),
  (</font>x <font color="#000080">: </font><font color="#800000">150</font><font color="#000080">; </font>y <font color="#000080">: </font><font color="#800000">150</font><font color="#000080">),(</font>x <font color="#000080">: </font><font color="#800000">100</font><font color="#000080">; </font>y <font color="#000080">: </font><font color="#800000">200</font><font color="#000080">),(</font>x <font color="#000080">: </font><font color="#800000">50</font><font color="#000080">; </font>y <font color="#000080">: </font><font color="#800000">150</font><font color="#000080">));
  </font>BitMap <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">15</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">15</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte <font color="#000080">= ((</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">),
      (</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">),(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">),
      (</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">),(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">),
      (</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">),(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">),
      (</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">),(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">),
      (</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">),(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">),
      (</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">),(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">),
      (</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">),(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">),
      (</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">));

</font><font color="#FF0000"><b>Var
  </b></font>LeftTable<font color="#000080">, </font>RightTable <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">400</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">2</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Integer<font color="#000080">;
  </font>Max_Y<font color="#000080">, </font>Min_Y <font color="#000080">: </font>Integer<font color="#000080">;
  </font>LineHeight <font color="#000080">: </font>Integer<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>PutPixel<font color="#000080">(</font>X<font color="#000080">, </font>Y <font color="#000080">: </font>Integer<font color="#000080">; </font>C <font color="#000080">: </font>Byte<font color="#000080">);

</font><font color="#FF0000"><b>Begin
  </b></font>Mem<font color="#000080">[</font><font color="#800000">$A000</font><font color="#000080">:(</font>Y<font color="#000080">*</font><font color="#800000">320</font><font color="#000080">)+</font>x<font color="#000080">] := </font>c<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Swap<font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>a<font color="#000080">, </font>b <font color="#000080">: </font>Integer<font color="#000080">);

</font><font color="#FF0000"><b>Var
  </b></font>t <font color="#000080">: </font>Integer<font color="#000080">;

</font><font color="#FF0000"><b>Begin
  </b></font>t <font color="#000080">:= </font>a<font color="#000080">;
  </font>a <font color="#000080">:= </font>b<font color="#000080">;
  </font>b <font color="#000080">:= </font>t<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>FindMaxMin<font color="#000080">;

</font><font color="#FF0000"><b>Var
  </b></font>c <font color="#000080">: </font>Integer<font color="#000080">;

</font><font color="#FF0000"><b>Begin
  For </b></font>c <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">3 </font><font color="#FF0000"><b>do
    Begin
      If </b></font>Points<font color="#000080">[</font>c<font color="#000080">].</font>Y <font color="#000080">&lt; </font>Min_y
        <font color="#FF0000"><b>Then </b></font>Min_Y <font color="#000080">:= </font>Points<font color="#000080">[</font>c<font color="#000080">].</font>Y<font color="#000080">;
      </font><font color="#FF0000"><b>If </b></font>Points<font color="#000080">[</font>c<font color="#000080">].</font>Y <font color="#000080">&gt; </font>Max_y
        <font color="#FF0000"><b>Then </b></font>Max_Y <font color="#000080">:= </font>Points<font color="#000080">[</font>c<font color="#000080">].</font>Y<font color="#000080">;
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Procedure </b></font>ScanLeft<font color="#000080">(</font>X1<font color="#000080">, </font>X2<font color="#000080">, </font>Y1<font color="#000080">, </font>LH<font color="#000080">, </font>Side <font color="#000080">: </font>Integer<font color="#000080">);

</font><font color="#FF0000"><b>Var
  </b></font>y <font color="#000080">: </font>Integer<font color="#000080">;
  </font>XAdd<font color="#000080">, </font>Px<font color="#000080">, </font>Py<font color="#000080">, </font>PxAdd<font color="#000080">, </font>PyAdd<font color="#000080">, </font>x <font color="#000080">: </font>Single<font color="#000080">;

</font><font color="#FF0000"><b>Begin
  </b></font>LH <font color="#000080">:= </font>LH <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
  </font>XAdd <font color="#000080">:= (</font>X2<font color="#000080">-</font>X1<font color="#000080">)/</font>LH<font color="#000080">;
  </font><font color="#FF0000"><b>If </b></font>Side <font color="#000080">= </font>Top
    <font color="#FF0000"><b>Then Begin
      </b></font>Px <font color="#000080">:= </font>PWidth<font color="#000080">;
      </font>Py <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font>PxAdd <font color="#000080">:= -</font>PWidth<font color="#000080">/</font>LH<font color="#000080">;
      </font>PyAdd <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>If </b></font>Side <font color="#000080">= </font>Right
    <font color="#FF0000"><b>Then Begin
      </b></font>Px <font color="#000080">:= </font>PWidth<font color="#000080">;
      </font>Py <font color="#000080">:= </font>PHeight<font color="#000080">;
      </font>PxAdd <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font>PyAdd <font color="#000080">:= -</font>PHeight<font color="#000080">/</font>LH<font color="#000080">;
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>If </b></font>Side <font color="#000080">= </font>Bottom
    <font color="#FF0000"><b>Then Begin
      </b></font>Px <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font>Py <font color="#000080">:= </font>PHeight<font color="#000080">;
      </font>PxAdd <font color="#000080">:= </font>PWidth<font color="#000080">/</font>LH<font color="#000080">;
      </font>PyAdd <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>If </b></font>Side <font color="#000080">= </font>Left
    <font color="#FF0000"><b>Then Begin
      </b></font>Px <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font>Py <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font>PxAdd <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font>PyAdd <font color="#000080">:= </font>PHeight<font color="#000080">/</font>LH<font color="#000080">;
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font>x <font color="#000080">:= </font>X1<font color="#000080">;
  </font><font color="#FF0000"><b>For </b></font>y <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>LH <font color="#FF0000"><b>do
    Begin
      </b></font>LeftTable<font color="#000080">[</font>Y1 <font color="#000080">+ </font>y<font color="#000080">, </font><font color="#800000">0</font><font color="#000080">] := </font>Round<font color="#000080">(</font>x<font color="#000080">);
      </font>LeftTable<font color="#000080">[</font>Y1 <font color="#000080">+ </font>y<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">] := </font>Round<font color="#000080">(</font>Px<font color="#000080">);
      </font>LeftTable<font color="#000080">[</font>Y1 <font color="#000080">+ </font>y<font color="#000080">, </font><font color="#800000">2</font><font color="#000080">] := </font>Round<font color="#000080">(</font>Py<font color="#000080">);
      </font>X <font color="#000080">:= </font>X <font color="#000080">+ </font>XAdd<font color="#000080">;   </font>Px <font color="#000080">:= </font>Px <font color="#000080">+ </font>PxAdd<font color="#000080">; </font>Py <font color="#000080">:= </font>Py <font color="#000080">+ </font>PyAdd<font color="#000080">;
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>ScanRight<font color="#000080">(</font>X1<font color="#000080">, </font>X2<font color="#000080">, </font>Y1<font color="#000080">, </font>LH<font color="#000080">, </font>Side <font color="#000080">: </font>Integer<font color="#000080">);

</font><font color="#FF0000"><b>Var
  </b></font>y <font color="#000080">: </font>Integer<font color="#000080">;
  </font>XAdd<font color="#000080">, </font>Px<font color="#000080">, </font>Py<font color="#000080">, </font>PxAdd<font color="#000080">, </font>PyAdd<font color="#000080">, </font>x <font color="#000080">: </font>Single<font color="#000080">;

</font><font color="#FF0000"><b>Begin
  </b></font>LH <font color="#000080">:= </font>LH <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
  </font>XAdd <font color="#000080">:= (</font>X2<font color="#000080">-</font>X1<font color="#000080">)/</font>LH<font color="#000080">;
  </font><font color="#FF0000"><b>If </b></font>Side <font color="#000080">= </font>Top
    <font color="#FF0000"><b>Then Begin
      </b></font>Px <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font>Py <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font>PxAdd <font color="#000080">:= </font>PWidth<font color="#000080">/</font>LH<font color="#000080">;
      </font>PyAdd <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>If </b></font>Side <font color="#000080">= </font>Right
    <font color="#FF0000"><b>Then Begin
      </b></font>Px <font color="#000080">:= </font>PWidth<font color="#000080">;
      </font>Py <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font>PxAdd <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font>PyAdd <font color="#000080">:= </font>PHeight<font color="#000080">/</font>LH<font color="#000080">;
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>If </b></font>Side <font color="#000080">= </font>Bottom
    <font color="#FF0000"><b>Then Begin
      </b></font>Px <font color="#000080">:= </font>PWidth<font color="#000080">;
      </font>Py <font color="#000080">:= </font>PHeight<font color="#000080">;
      </font>PxAdd <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font>PyAdd <font color="#000080">:= -</font>PHeight<font color="#000080">/</font>LH<font color="#000080">;
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>If </b></font>Side <font color="#000080">= </font>Left
    <font color="#FF0000"><b>Then Begin
      </b></font>Px <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font>Py <font color="#000080">:= </font>PHeight<font color="#000080">;
      </font>PxAdd <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font>PyAdd <font color="#000080">:= -</font>PHeight<font color="#000080">/</font>LH<font color="#000080">;
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font>x <font color="#000080">:= </font>X1<font color="#000080">;
  </font><font color="#FF0000"><b>For </b></font>y <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>LH <font color="#FF0000"><b>do
    Begin
      </b></font>RightTable<font color="#000080">[</font>Y1 <font color="#000080">+ </font>y<font color="#000080">, </font><font color="#800000">0</font><font color="#000080">] := </font>Round<font color="#000080">(</font>x<font color="#000080">);
      </font>RightTable<font color="#000080">[</font>Y1 <font color="#000080">+ </font>y<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">] := </font>Round<font color="#000080">(</font>Px<font color="#000080">);
      </font>RightTable<font color="#000080">[</font>Y1 <font color="#000080">+ </font>y<font color="#000080">, </font><font color="#800000">2</font><font color="#000080">] := </font>Round<font color="#000080">(</font>Py<font color="#000080">);
      </font>X <font color="#000080">:= </font>X <font color="#000080">+ </font>XAdd<font color="#000080">;   </font>Px <font color="#000080">:= </font>Px <font color="#000080">+ </font>PxAdd<font color="#000080">; </font>Py <font color="#000080">:= </font>Py <font color="#000080">+ </font>PyAdd<font color="#000080">;
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Procedure </b></font>ScanConvert<font color="#000080">(</font>X1<font color="#000080">, </font>Y1<font color="#000080">, </font>X2<font color="#000080">, </font>Y2<font color="#000080">, </font>PLoc <font color="#000080">: </font>Integer<font color="#000080">);

</font><font color="#FF0000"><b>Begin
  If </b></font>Y2 <font color="#000080">&lt; </font>Y1
    <font color="#FF0000"><b>Then Begin
      </b></font>Swap<font color="#000080">(</font>X1<font color="#000080">, </font>X2<font color="#000080">);
      </font>Swap<font color="#000080">(</font>Y1<font color="#000080">, </font>Y2<font color="#000080">);
      </font>LineHeight <font color="#000080">:= </font>Y2 <font color="#000080">- </font>Y1<font color="#000080">;
      </font>ScanLeft<font color="#000080">(</font>X1<font color="#000080">, </font>X2<font color="#000080">, </font>Y1<font color="#000080">, </font>LineHeight<font color="#000080">, </font>PLoc<font color="#000080">);
    </font><font color="#FF0000"><b>End
    Else Begin
      </b></font>LineHeight <font color="#000080">:= </font>Y2 <font color="#000080">- </font>Y1<font color="#000080">;
      </font>ScanRight<font color="#000080">(</font>X1<font color="#000080">, </font>X2<font color="#000080">, </font>Y1<font color="#000080">, </font>LineHeight<font color="#000080">, </font>PLoc<font color="#000080">);
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>TextureMap<font color="#000080">;

</font><font color="#FF0000"><b>Var
  </b></font>LW<font color="#000080">, </font>x<font color="#000080">, </font>y <font color="#000080">: </font>Integer<font color="#000080">;
  </font>PolyX1<font color="#000080">, </font>PolyX2<font color="#000080">, </font>Px1<font color="#000080">, </font>Px2<font color="#000080">, </font>Py1<font color="#000080">, </font>Py2<font color="#000080">, </font>PxA<font color="#000080">, </font>PyA <font color="#000080">: </font>Single<font color="#000080">;
  </font>Color <font color="#000080">: </font>Byte<font color="#000080">;

</font><font color="#FF0000"><b>Begin
  For </b></font>y <font color="#000080">:= </font>Min_Y <font color="#FF0000"><b>to </b></font>Max_Y <font color="#FF0000"><b>do
    Begin
      </b></font>PolyX1 <font color="#000080">:= </font>LeftTable<font color="#000080">[</font>y<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">];
      </font>Px1 <font color="#000080">:= </font>LeftTable<font color="#000080">[</font>y<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">];
      </font>Py1 <font color="#000080">:= </font>LeftTable<font color="#000080">[</font>y<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">];
      </font>PolyX2 <font color="#000080">:= </font>RightTable<font color="#000080">[</font>y<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">];
      </font>Px2 <font color="#000080">:= </font>RightTable<font color="#000080">[</font>y<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">];
      </font>Py2 <font color="#000080">:= </font>RightTable<font color="#000080">[</font>y<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">];
      </font>LW <font color="#000080">:= </font>Round<font color="#000080">(</font>PolyX2<font color="#000080">-</font>PolyX1<font color="#000080">);
      </font>Lw <font color="#000080">:= </font>Lw <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
      </font>PxA <font color="#000080">:= (</font>Px2<font color="#000080">-</font>Px1<font color="#000080">)/</font>LW<font color="#000080">;
      </font>PyA <font color="#000080">:= (</font>Py2<font color="#000080">-</font>Py1<font color="#000080">)/</font>LW<font color="#000080">;
      </font><font color="#FF0000"><b>For </b></font>x <font color="#000080">:= </font>Round<font color="#000080">(</font>PolyX1<font color="#000080">) </font><font color="#FF0000"><b>to </b></font>Round<font color="#000080">(</font>PolyX2<font color="#000080">) </font><font color="#FF0000"><b>do
        Begin
          </b></font>Color <font color="#000080">:= </font>Bitmap<font color="#000080">[</font>Round<font color="#000080">(</font>Py1<font color="#000080">), </font>Round<font color="#000080">(</font>Px1<font color="#000080">)];
          </font>PutPixel<font color="#000080">(</font>X<font color="#000080">, </font>Y<font color="#000080">, </font>Color<font color="#000080">);
          </font>Px1 <font color="#000080">:= </font>Px1 <font color="#000080">+ </font>PxA<font color="#000080">;
          </font>Py1 <font color="#000080">:= </font>Py1 <font color="#000080">+ </font>PyA<font color="#000080">;
        </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Begin
  Asm
    </b></font><font color="#FF00FF">Mov AX,$13
    Int 10h
  </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font>Max_Y <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>Min_Y <font color="#000080">:= </font><font color="#800000">32000</font><font color="#000080">;
  </font>FindMaxMin<font color="#000080">;
  </font>ScanConvert<font color="#000080">(</font>Points<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">].</font>X<font color="#000080">, </font>Points<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">].</font>Y<font color="#000080">, </font>Points<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>x<font color="#000080">, </font>Points<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>y<font color="#000080">, </font>Top<font color="#000080">);
  </font>ScanConvert<font color="#000080">(</font>Points<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>X<font color="#000080">, </font>Points<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>Y<font color="#000080">, </font>Points<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">].</font>x<font color="#000080">, </font>Points<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">].</font>y<font color="#000080">, </font>Right<font color="#000080">);
  </font>ScanConvert<font color="#000080">(</font>Points<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">].</font>X<font color="#000080">, </font>Points<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">].</font>Y<font color="#000080">, </font>Points<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">].</font>x<font color="#000080">, </font>Points<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">].</font>y<font color="#000080">, </font>Bottom<font color="#000080">);
  </font>ScanConvert<font color="#000080">(</font>Points<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">].</font>X<font color="#000080">, </font>Points<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">].</font>Y<font color="#000080">, </font>Points<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">].</font>x<font color="#000080">, </font>Points<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">].</font>y<font color="#000080">, </font>Left<font color="#000080">);
  </font>TextureMap<font color="#000080">;
  </font>Readln<font color="#000080">;
  </font>TextMode<font color="#000080">(</font>co80<font color="#000080">);
</font><font color="#FF0000"><b>End</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0176.PAS">Original</a><b>]</b></p></body>
</html>
