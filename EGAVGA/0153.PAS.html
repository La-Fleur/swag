<html>
<head><title> "Planar 16 Color Mode Plot" by JORT BLOEM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0153.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt; I have not seen a correct SetPixel routine for a planar 16 color mode.  It
&gt; does not have to be fast or optimized, just working correctly so I can see
&gt; how it's done.

Well, I found something that you can fiddle around with, it's not exactly
working (well, kind of), but it shows the principle... all the Ports are
right, what's going in &amp; out is right, just the FillChar needs to be fixed
up to plot only a single pixel or group thereof.
}
</i></font><font color="#FF0000"><b>Program </b></font>Try_EGA<font color="#000080">;
</font><font color="#FF0000"><b>Uses </b></font>CRT<font color="#000080">;

</font><font color="#FF0000"><b>Var </b></font>Scr<font color="#000080">:</font>Byte <font color="#FF0000"><b>Absolute </b></font><font color="#800000">$A000</font><font color="#000080">:</font><font color="#800000">0</font><font color="#000080">;
    </font>Loop<font color="#000080">:</font>Word<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Mode_10<font color="#000080">;
</font><font color="#FF0000"><b>Inline</b></font><font color="#000080">(</font><font color="#800000">$B8</font><font color="#000080">/</font><font color="#800000">$0d</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/</font><font color="#800000">$CD</font><font color="#000080">/</font><font color="#800000">$10</font><font color="#000080">);</font><font color="#008000"><i>{Intr $10, AX=$000D}

</i></font><font color="#FF0000"><b>Procedure </b></font>Write<font color="#000080">;
</font><font color="#FF0000"><b>Begin
 </b></font><font color="#008000"><i>{Write mode}
 </i></font>Port<font color="#000080">[</font><font color="#800000">$03CE</font><font color="#000080">]:=</font><font color="#800000">5</font><font color="#000080">;
 </font>Port<font color="#000080">[</font><font color="#800000">$03CF</font><font color="#000080">]:=</font>Port<font color="#000080">[</font><font color="#800000">$03CF</font><font color="#000080">] </font><font color="#FF0000"><b>And </b></font><font color="#800000">$FC</font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Undo_Latches<font color="#000080">;
</font><font color="#FF0000"><b>Begin
 If </b></font>Scr<font color="#000080">=</font><font color="#800000">1 </font><font color="#FF0000"><b>Then
  Begin
  End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Bmp<font color="#000080">(</font>Bmp<font color="#000080">:</font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Begin
 </b></font><font color="#008000"><i>{Plane}
 </i></font>Port<font color="#000080">[</font><font color="#800000">$03CE</font><font color="#000080">]:=</font><font color="#800000">8</font><font color="#000080">;
 </font>Port<font color="#000080">[</font><font color="#800000">$03CF</font><font color="#000080">]:=</font>Bmp<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Color<font color="#000080">(</font>C<font color="#000080">:</font>Word<font color="#000080">);
</font><font color="#FF0000"><b>Begin
 </b></font>PortW<font color="#000080">[</font><font color="#800000">$03CE</font><font color="#000080">]:=</font>C<font color="#000080">*</font><font color="#800000">256</font><font color="#000080">;
 </font>PortW<font color="#000080">[</font><font color="#800000">$03CE</font><font color="#000080">]:=</font><font color="#800000">$0F01</font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Show<font color="#000080">(</font>Bm<font color="#000080">,</font>Clr<font color="#000080">:</font>Word<font color="#000080">);
</font><font color="#FF0000"><b>Begin
 </b></font>Bmp<font color="#000080">(</font>Bm<font color="#000080">);
 </font>Color<font color="#000080">(</font>Clr<font color="#000080">);
 </font>Undo_Latches<font color="#000080">;
 </font>FillChar<font color="#000080">(</font>Scr<font color="#000080">,</font><font color="#800000">8000</font><font color="#000080">,</font><font color="#800000">$FF</font><font color="#000080">);
 </font>Delay<font color="#000080">(</font><font color="#800000">1000</font><font color="#000080">);
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Begin
 </b></font>Mode_10<font color="#000080">;
 </font>Write<font color="#000080">;

 </font>Delay<font color="#000080">(</font><font color="#800000">1000</font><font color="#000080">);

 </font>Show<font color="#000080">(</font><font color="#800000">$11</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
 </font>Show<font color="#000080">(</font><font color="#800000">$22</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">);
 </font>Show<font color="#000080">(</font><font color="#800000">$44</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">);
 </font>Show<font color="#000080">(</font><font color="#800000">$88</font><font color="#000080">,</font><font color="#800000">4</font><font color="#000080">);
 </font>Show<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">);
 </font>Show<font color="#000080">(</font><font color="#800000">$20</font><font color="#000080">,</font><font color="#800000">6</font><font color="#000080">);
 </font>Show<font color="#000080">(</font><font color="#800000">$40</font><font color="#000080">,</font><font color="#800000">7</font><font color="#000080">);
 </font>Show<font color="#000080">(</font><font color="#800000">$80</font><font color="#000080">,</font><font color="#800000">8</font><font color="#000080">);

 </font>Delay<font color="#000080">(</font><font color="#800000">1000</font><font color="#000080">);
</font><font color="#FF0000"><b>End</b></font><font color="#000080">.
</font><font color="#008000"><i>{

Bmp says which pixels of any group of 8 is affected... the screen looks like
this:

1234567812345678123456781234567812345678.....
1234567812345678123456781234567812345678.....
1234567812345678123456781234567812345678.....
.
.
.

Thus if you want the first &amp; 3rd pixel green, do
}
 </i></font>Color<font color="#000080">(</font>Green<font color="#000080">);
 </font>Bmp<font color="#000080">(</font><font color="#800000">5</font><font color="#000080">);       </font><font color="#008000"><i>{Bits 1 &amp; 3 set}
 </i></font>Undo_Latches<font color="#000080">;
 </font>Mem<font color="#000080">[</font><font color="#800000">$A000</font><font color="#000080">:</font><font color="#800000">0</font><font color="#000080">]:=</font><font color="#800000">$FF</font><font color="#000080">; </font><font color="#008000"><i>{I think}
{
I dont know what Undo_Latches does, but it seems to work...

BTW, I saw mention of a VESA unit you were writing, as a reward for this
information.... do I qualify? I'm very interested....
}
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0153.PAS">Original</a><b>]</b></p></body>
</html>
