<html>
<head><title> "Fractals" by DAVE JARVIS</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0206.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt; I am trying to learn Turbo Pascal 7.0 and I was hoping someone might
&gt; post the code to some simple fractals or anything else that you think
&gt; might be educating...

Note that my code will not work unless you've got my VGAUnit.  It doesn't
look very easy to convert it to use Borland's Graphics unit, either.
}
</i></font><font color="#FF0000"><b>USES </b></font>Crt<font color="#000080">, </font>VGAUnit<font color="#000080">;
 
</font><font color="#FF0000"><b>CONST 
  </b></font>DStep  <font color="#000080">= </font><font color="#800000">0.2</font><font color="#000080">; 
  </font>Detail <font color="#000080">= </font><font color="#800000">100</font><font color="#000080">; 
 
</font><font color="#FF0000"><b>TYPE 
  </b></font>Complex <font color="#000080">= </font><font color="#FF0000"><b>RECORD 
              </b></font>a<font color="#000080">, </font>b <font color="#000080">: </font>REAL<font color="#000080">; 
            </font><font color="#FF0000"><b>End</b></font><font color="#000080">; 
 
</font><font color="#FF0000"><b>VAR 
  </b></font>Lambda<font color="#000080">, </font>Z_Prime<font color="#000080">, </font>Z <font color="#000080">: </font>Complex<font color="#000080">; 

</font><font color="#FF0000"><b>FUNCTION </b></font>Rnd <font color="#000080">: </font>REAL<font color="#000080">; 
</font><font color="#FF0000"><b>Begin 
  </b></font>Rnd <font color="#000080">:= </font>Random<font color="#000080">( </font><font color="#800000">65001 </font><font color="#000080">) / </font><font color="#800000">65000</font><font color="#000080">; 
</font><font color="#FF0000"><b>End</b></font><font color="#000080">; 
 
</font><font color="#FF0000"><b>PROCEDURE </b></font>Fractal<font color="#000080">( </font>Lambda<font color="#000080">, </font>Z_Prime <font color="#000080">: </font>Complex<font color="#000080">; </font>Count <font color="#000080">: </font>INTEGER <font color="#000080">); 
</font><font color="#FF0000"><b>VAR 
  </b></font>k            <font color="#000080">: </font>INTEGER<font color="#000080">; 
  </font>LambdaMag    <font color="#000080">: </font>REAL<font color="#000080">; 
  </font>FourOverLamb <font color="#000080">: </font>Complex<font color="#000080">; 
 
  </font><font color="#FF0000"><b>PROCEDURE </b></font>CalcPoint<font color="#000080">( </font>Z_Prime <font color="#000080">: </font>Complex<font color="#000080">; </font><font color="#FF0000"><b>VAR </b></font>Z <font color="#000080">: </font>Complex <font color="#000080">); 
  </font><font color="#FF0000"><b>VAR 
    </b></font>SaveB <font color="#000080">: </font>REAL<font color="#000080">; 
 
    </font><font color="#FF0000"><b>PROCEDURE </b></font>ComplexMult<font color="#000080">( </font>C1<font color="#000080">, </font>C2 <font color="#000080">: </font>Complex<font color="#000080">; </font><font color="#FF0000"><b>VAR </b></font>Result <font color="#000080">: </font>Complex <font color="#000080">); 
    </font><font color="#FF0000"><b>Begin 
      </b></font>Result<font color="#000080">.</font>A <font color="#000080">:= </font>C1<font color="#000080">.</font>A <font color="#000080">* </font>C2<font color="#000080">.</font>A <font color="#000080">- </font>C1<font color="#000080">.</font>B <font color="#000080">* </font>C2<font color="#000080">.</font>B<font color="#000080">; 
      </font>Result<font color="#000080">.</font>B <font color="#000080">:= </font>C1<font color="#000080">.</font>A <font color="#000080">+ </font>C2<font color="#000080">.</font>B <font color="#000080">+ </font>C1<font color="#000080">.</font>B <font color="#000080">* </font>C2<font color="#000080">.</font>A<font color="#000080">; 
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;  </font><font color="#008000"><i>{ ComplexMult } 
 
    </i></font><font color="#FF0000"><b>PROCEDURE </b></font>ComplexSqrt<font color="#000080">( </font>C <font color="#000080">: </font>Complex<font color="#000080">; </font><font color="#FF0000"><b>VAR </b></font>Result <font color="#000080">: </font>Complex <font color="#000080">); 
    </font><font color="#FF0000"><b>VAR 
      </b></font>CMag <font color="#000080">: </font>REAL<font color="#000080">; 
 
    </font><font color="#FF0000"><b>Begin 
      </b></font>CMag <font color="#000080">:= </font>Sqrt<font color="#000080">( </font>C<font color="#000080">.</font>A <font color="#000080">* </font>C<font color="#000080">.</font>A <font color="#000080">+ </font>C<font color="#000080">.</font>B <font color="#000080">* </font>C<font color="#000080">.</font>B <font color="#000080">); 
 
      </font><font color="#FF0000"><b>IF </b></font><font color="#000080">(</font>CMag <font color="#000080">+ </font>C<font color="#000080">.</font>A<font color="#000080">) &lt; </font><font color="#800000">0 </font><font color="#FF0000"><b>THEN 
        </b></font>Result<font color="#000080">.</font>A <font color="#000080">:= </font><font color="#800000">0 
      </font><font color="#FF0000"><b>ELSE 
        </b></font>Result<font color="#000080">.</font>A <font color="#000080">:= </font>Sqrt<font color="#000080">( ( </font>CMag <font color="#000080">+ </font>C<font color="#000080">.</font>A <font color="#000080">) / </font><font color="#800000">2 </font><font color="#000080">);
      </font><font color="#FF0000"><b>IF </b></font><font color="#000080">(</font>CMag <font color="#000080">- </font>C<font color="#000080">.</font>A<font color="#000080">) &lt; </font><font color="#800000">0 </font><font color="#FF0000"><b>THEN 
        </b></font>Result<font color="#000080">.</font>B <font color="#000080">:= </font><font color="#800000">0 
      </font><font color="#FF0000"><b>ELSE 
        </b></font>Result<font color="#000080">.</font>B <font color="#000080">:= </font>Sqrt<font color="#000080">( ( </font>CMag <font color="#000080">- </font>C<font color="#000080">.</font>A <font color="#000080">) / </font><font color="#800000">2 </font><font color="#000080">); 
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;  </font><font color="#008000"><i>{ ComplexSqrt } 
 
  { CalcPoint } 
  </i></font><font color="#FF0000"><b>Begin 
    </b></font>ComplexMult<font color="#000080">( </font>Z_Prime<font color="#000080">, </font>FourOverLamb<font color="#000080">, </font>Z <font color="#000080">); 
 
    </font>Z<font color="#000080">.</font>A   <font color="#000080">:= </font><font color="#800000">1 </font><font color="#000080">- </font>Z<font color="#000080">.</font>A<font color="#000080">; 
    </font>SaveB <font color="#000080">:= </font>Z<font color="#000080">.</font>B<font color="#000080">; 

    </font>ComplexSqrt<font color="#000080">( </font>Z<font color="#000080">, </font>Z <font color="#000080">); 
 
    </font><font color="#FF0000"><b>IF </b></font>SaveB <font color="#000080">&lt; </font><font color="#800000">0 </font><font color="#FF0000"><b>THEN 
      </b></font>Z<font color="#000080">.</font>A <font color="#000080">:= -</font>Z<font color="#000080">.</font>A<font color="#000080">; 
 
    </font><font color="#FF0000"><b>IF </b></font>Rnd <font color="#000080">&lt; </font><font color="#800000">0.5 </font><font color="#FF0000"><b>THEN 
    Begin 
      </b></font>Z<font color="#000080">.</font>A <font color="#000080">:= -</font>Z<font color="#000080">.</font>A<font color="#000080">; 
      </font>Z<font color="#000080">.</font>B <font color="#000080">:= -</font>Z<font color="#000080">.</font>B<font color="#000080">; 
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">; 
 
    </font>Z<font color="#000080">.</font>A <font color="#000080">:= </font><font color="#800000">1 </font><font color="#000080">- </font>Z<font color="#000080">.</font>A<font color="#000080">; 
    </font>Z<font color="#000080">.</font>A <font color="#000080">:= </font>Z<font color="#000080">.</font>A <font color="#000080">/ </font><font color="#800000">2</font><font color="#000080">; 
    </font>Z<font color="#000080">.</font>B <font color="#000080">:= </font>Z<font color="#000080">.</font>B <font color="#000080">/ </font><font color="#800000">2</font><font color="#000080">; 
  </font><font color="#FF0000"><b>End</b></font><font color="#000080">;  </font><font color="#008000"><i>{ CalcPoint } 
 
</i></font><font color="#FF0000"><b>Begin  </b></font><font color="#008000"><i>{ Fractal } 
  </i></font>LambdaMag <font color="#000080">:= </font>Lambda<font color="#000080">.</font>A <font color="#000080">* </font>Lambda<font color="#000080">.</font>A <font color="#000080">+ </font>Lambda<font color="#000080">.</font>B <font color="#000080">* </font>Lambda<font color="#000080">.</font>B<font color="#000080">; 
  </font>FourOverLamb<font color="#000080">.</font>A <font color="#000080">:= </font><font color="#800000">4 </font><font color="#000080">* </font>Lambda<font color="#000080">.</font>A <font color="#000080">/ </font>LambdaMag<font color="#000080">; 
  </font>FourOverLamb<font color="#000080">.</font>B <font color="#000080">:= -</font><font color="#800000">4 </font><font color="#000080">* </font>Lambda<font color="#000080">.</font>B <font color="#000080">/ </font>LambdaMag<font color="#000080">; 
 
  </font><font color="#FF0000"><b>FOR </b></font>K <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>TO </b></font><font color="#800000">10 </font><font color="#FF0000"><b>DO 
  Begin 
    </b></font>CalcPoint<font color="#000080">( </font>Z_Prime<font color="#000080">, </font>Z <font color="#000080">); 
    </font>Z_Prime <font color="#000080">:= </font>Z<font color="#000080">; 
  </font><font color="#FF0000"><b>End</b></font><font color="#000080">; 
 
  </font><font color="#FF0000"><b>FOR </b></font>K <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>TO </b></font>Count <font color="#FF0000"><b>DO 
  Begin 
    </b></font>CalcPoint<font color="#000080">( </font>Z_Prime<font color="#000080">, </font>Z <font color="#000080">); 
 
    </font><font color="#FF0000"><b>IF </b></font>WinGetPix<font color="#000080">( </font>Z<font color="#000080">.</font>A<font color="#000080">, </font>Z<font color="#000080">.</font>B <font color="#000080">) = </font>BLACK <font color="#FF0000"><b>THEN
      </b></font>WinPutPix<font color="#000080">( </font>Z<font color="#000080">.</font>A<font color="#000080">, </font>Z<font color="#000080">.</font>B<font color="#000080">, 
        (</font>Abs<font color="#000080">(</font>Round<font color="#000080">(</font><font color="#008000"><i>{Z.A * Z.B *} </i></font>Lambda<font color="#000080">.</font>A <font color="#000080">* </font>Lambda<font color="#000080">.</font>B <font color="#000080">* </font><font color="#800000">256</font><font color="#000080">)) </font><font color="#FF0000"><b>MOD </b></font><font color="#800000">254</font><font color="#000080">) + </font><font color="#800000">1 </font><font color="#000080">); 
 
    </font>Z_Prime <font color="#000080">:= </font>Z<font color="#000080">; 
  </font><font color="#FF0000"><b>End</b></font><font color="#000080">; 
</font><font color="#FF0000"><b>End</b></font><font color="#000080">; 
 
</font><font color="#FF0000"><b>VAR 
  </b></font>Ch      <font color="#000080">: </font>CHAR<font color="#000080">; 
  </font>R1<font color="#000080">, </font>G1<font color="#000080">, 
  </font>B1<font color="#000080">, </font>R2<font color="#000080">, 
  </font>G2<font color="#000080">, </font>B2  <font color="#000080">: </font>BYTE<font color="#000080">; 
  </font>Lim1<font color="#000080">,
  </font>Lim2    <font color="#000080">: </font>LONGINT<font color="#000080">; 
 
</font><font color="#FF0000"><b>Begin 
  </b></font>Randomize<font color="#000080">; 
 
  </font>VGA<font color="#000080">; 
  </font>BlendColours<font color="#000080">( </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">255</font><font color="#000080">, </font>RGBToLong<font color="#000080">( </font><font color="#800000">60</font><font color="#000080">, </font><font color="#800000">60</font><font color="#000080">, </font><font color="#800000">60 </font><font color="#000080">), </font>RGBToLong<font color="#000080">( </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">63 </font><font color="#000080">), </font><font color="#800000">0 </font><font color="#000080">); 
 
  </font>Window<font color="#000080">( -</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, -</font><font color="#800000">1 </font><font color="#000080">); 
 
  </font>Lambda<font color="#000080">.</font>A  <font color="#000080">:= </font><font color="#800000">13</font><font color="#000080">; 
  </font>Lambda<font color="#000080">.</font>B  <font color="#000080">:= -</font><font color="#800000">0.7</font><font color="#000080">; 
  </font>Z_Prime<font color="#000080">.</font>A <font color="#000080">:= </font><font color="#800000">0.1</font><font color="#000080">; 
  </font>Z_Prime<font color="#000080">.</font>B <font color="#000080">:= -</font><font color="#800000">0.1</font><font color="#000080">; 
  </font>Ch        <font color="#000080">:= </font><font color="#800000">#0</font><font color="#000080">; 
 
  </font><font color="#FF0000"><b>Repeat 
    </b></font>Fractal<font color="#000080">( </font>Lambda<font color="#000080">, </font>Z_Prime<font color="#000080">, </font>Detail <font color="#000080">); 
    </font>Lambda<font color="#000080">.</font>A <font color="#000080">:= </font>Lambda<font color="#000080">.</font>A <font color="#000080">+ </font>DStep<font color="#000080">; 
  </font><font color="#FF0000"><b>Until </b></font><font color="#000080">(</font>Lambda<font color="#000080">.</font>A <font color="#000080">&gt;= </font><font color="#800000">100</font><font color="#000080">) </font><font color="#FF0000"><b>OR </b></font><font color="#000080">(</font>KeyPressed <font color="#FF0000"><b>AND </b></font><font color="#000080">(</font>ReadKey <font color="#000080">= </font><font color="#800000">#27</font><font color="#000080">)); 
 
  </font>R1 <font color="#000080">:= </font>Random<font color="#000080">( </font><font color="#800000">64 </font><font color="#000080">); 
  </font>G1 <font color="#000080">:= </font>Random<font color="#000080">( </font><font color="#800000">64 </font><font color="#000080">); 
  </font>B1 <font color="#000080">:= </font>Random<font color="#000080">( </font><font color="#800000">64 </font><font color="#000080">); 
 
  </font><font color="#FF0000"><b>Repeat 
    </b></font>R2 <font color="#000080">:= </font>Random<font color="#000080">( </font><font color="#800000">64 </font><font color="#000080">); 
    </font>G2 <font color="#000080">:= </font>Random<font color="#000080">( </font><font color="#800000">64 </font><font color="#000080">); 
    </font>B2 <font color="#000080">:= </font>Random<font color="#000080">( </font><font color="#800000">64 </font><font color="#000080">); 
 
    </font>Lim1 <font color="#000080">:= </font>RGBToLong<font color="#000080">( </font>R1<font color="#000080">, </font>G1<font color="#000080">, </font>B1 <font color="#000080">); 
    </font>Lim2 <font color="#000080">:= </font>RGBToLong<font color="#000080">( </font>R2<font color="#000080">, </font>G2<font color="#000080">, </font>B2 <font color="#000080">);

    </font>BlendColours<font color="#000080">( </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">255</font><font color="#000080">, </font>Lim1<font color="#000080">, </font>Lim2<font color="#000080">, </font><font color="#800000">10 </font><font color="#000080">);

    </font>R1 <font color="#000080">:= </font>R2<font color="#000080">;
    </font>G1 <font color="#000080">:= </font>G2<font color="#000080">;
    </font>B1 <font color="#000080">:= </font>B2<font color="#000080">;
  </font><font color="#FF0000"><b>Until </b></font>KeyPressed <font color="#FF0000"><b>AND </b></font><font color="#000080">(</font>ReadKey <font color="#000080">= </font><font color="#800000">#27</font><font color="#000080">);

  </font><font color="#FF0000"><b>IF </b></font>ReadKey <font color="#000080">= </font><font color="#800000">#27 </font><font color="#FF0000"><b>THEN</b></font><font color="#000080">;

  </font>TextMode<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0206.PAS">Original</a><b>]</b></p></body>
</html>
