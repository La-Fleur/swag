<html>
<head><title> "Read VGA Dacs" by COLIN BUCKLEY</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0078.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt;Well, I have a procedure to return the VGA palette registers in BYTE
&gt;vars called like

&gt;GetColor(Color,Red,Green,Blue:BYTE);

This will not return anything as they will be removed from the Stack.  You
can pass like this, but you can no receive.  You must use Var R,G,B:Byte;

&gt;I want to do thgis, but in assembler:

&gt;&sup3;&sup3;   PORT[$3C8] := Color;
&gt;&sup3;&sup3;   Red        := PORT[$3C9];
&gt;&sup3;&sup3;   Green      := PORT[$3C9];
&gt;&sup3;&sup3;   Blue       := PORT[$3C9];

&gt;but in assembler....argh, any ideas?
}

</i></font><font color="#FF0000"><b>Procedure </b></font>VGAReadDAC<font color="#000080">(</font>Reg<font color="#000080">:</font>Byte<font color="#000080">; </font><font color="#FF0000"><b>Var </b></font>R<font color="#000080">,</font>G<font color="#000080">,</font>B<font color="#000080">:</font>Byte<font color="#000080">); </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>ASM
  </b></font><font color="#FF00FF">MOV   DX,3C7h                     </font><font color="#008000"><i>{; |Send Starting DAC Register    }
  </i></font><font color="#FF00FF">MOV   AL,[Reg]                    </font><font color="#008000"><i>{; |                              }
  </i></font><font color="#FF00FF">OUT   DX,AL                       </font><font color="#008000"><i>{;/                               }
  </i></font><font color="#FF00FF">INC   DX                          </font><font color="#008000"><i>{; |DX:=DAC Data Address          }
  </i></font><font color="#FF00FF">INC   DX                          </font><font color="#008000"><i>{;/                               }
  </i></font><font color="#FF00FF">IN    AL,DX                       </font><font color="#008000"><i>{; |Read Red Byte                 }
  </i></font><font color="#FF00FF">LES   DI,[R]                      </font><font color="#008000"><i>{; |                              }
  </i></font><font color="#FF00FF">MOV   [ES:DI],AL                  </font><font color="#008000"><i>{;/                               }
  </i></font><font color="#FF00FF">IN    AL,DX                       </font><font color="#008000"><i>{; |Read Green Byte               }
  </i></font><font color="#FF00FF">LES   DI,[G]                      </font><font color="#008000"><i>{; |                              }
  </i></font><font color="#FF00FF">MOV   [ES:DI],AL                  </font><font color="#008000"><i>{;/                               }
  </i></font><font color="#FF00FF">IN    AL,DX                       </font><font color="#008000"><i>{; |Read Blue Byte                }
  </i></font><font color="#FF00FF">LES   DI,[B]                      </font><font color="#008000"><i>{; |                              }
  </i></font><font color="#FF00FF">MOV   [ES:DI],AL                  </font><font color="#008000"><i>{;/                               }
</i></font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0078.PAS">Original</a><b>]</b></p></body>
</html>
