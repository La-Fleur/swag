<html>
<head><title> "Screen Sweep" by BAS VAN GAALEN</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0098.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
 WA&gt; I was wondering if anyone could help me out here.  What I
 WA&gt; would like is a program that sweeps my screen clear or to a
 WA&gt; color then self terminates. Something similar to a radar
 WA&gt; sweep.  I have a limited knowledge of TP 7.

I guess everyone who programs in Pascal has a limited knowledge of TP.

Anyway, this is what I just made:

--- cut here --- }

</i></font><font color="#FF0000"><b>program </b></font>screensweep<font color="#000080">;
</font><font color="#FF0000"><b>uses </b></font>crt<font color="#000080">;
</font><font color="#FF0000"><b>const </b></font>vseg <font color="#000080">: </font>word <font color="#000080">= </font><font color="#800000">$b800</font><font color="#000080">; </font>fillchar <font color="#000080">= </font><font color="#800000">32</font><font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>x<font color="#000080">,</font>i<font color="#000080">,</font>maxx<font color="#000080">,</font>maxy <font color="#000080">: </font>integer<font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>retrace<font color="#000080">;
</font><font color="#FF0000"><b>begin
  while </b></font><font color="#000080">(</font>port<font color="#000080">[</font><font color="#800000">$3da</font><font color="#000080">] </font><font color="#FF0000"><b>and </b></font><font color="#800000">8</font><font color="#000080">) &lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>do</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>while </b></font><font color="#000080">(</font>port<font color="#000080">[</font><font color="#800000">$3da</font><font color="#000080">] </font><font color="#FF0000"><b>and </b></font><font color="#800000">8</font><font color="#000080">) = </font><font color="#800000">0 </font><font color="#FF0000"><b>do</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>plot<font color="#000080">(</font>x<font color="#000080">,</font>y <font color="#000080">: </font>integer<font color="#000080">); </font><font color="#FF0000"><b>begin
  </b></font>mem<font color="#000080">[</font>vseg<font color="#000080">:</font>y<font color="#000080">*</font><font color="#800000">160</font><font color="#000080">+</font>x<font color="#000080">+</font>x<font color="#000080">] := </font>fillchar<font color="#000080">; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>line<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>x2<font color="#000080">,</font>y2 <font color="#000080">: </font>integer<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>d<font color="#000080">,</font>dx<font color="#000080">,</font>dy<font color="#000080">,</font>ai<font color="#000080">,</font>bi<font color="#000080">,</font>xi<font color="#000080">,</font>yi <font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  if </b></font>x <font color="#000080">&lt; </font>x2 <font color="#FF0000"><b>then begin </b></font>xi <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">; </font>dx <font color="#000080">:= </font>x2<font color="#000080">-</font>x<font color="#000080">; </font><font color="#FF0000"><b>end
  else begin </b></font>xi <font color="#000080">:= -</font><font color="#800000">1</font><font color="#000080">; </font>dx <font color="#000080">:= </font>x<font color="#000080">-</font>x2<font color="#000080">; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>y <font color="#000080">&lt; </font>y2 <font color="#FF0000"><b>then begin </b></font>yi <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">; </font>dy <font color="#000080">:= </font>y2<font color="#000080">-</font>y<font color="#000080">; </font><font color="#FF0000"><b>end
  else begin </b></font>yi <font color="#000080">:= -</font><font color="#800000">1</font><font color="#000080">; </font>dy <font color="#000080">:= </font>y<font color="#000080">-</font>y2<font color="#000080">; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>plot<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>dx <font color="#000080">&gt; </font>dy <font color="#FF0000"><b>then begin
    </b></font>ai <font color="#000080">:= (</font>dy<font color="#000080">-</font>dx<font color="#000080">)*</font><font color="#800000">2</font><font color="#000080">; </font>bi <font color="#000080">:= </font>dy<font color="#000080">*</font><font color="#800000">2</font><font color="#000080">; </font>d <font color="#000080">:= </font>bi<font color="#000080">-</font>dx<font color="#000080">;
    </font><font color="#FF0000"><b>repeat
      if </b></font>d <font color="#000080">&gt;= </font><font color="#800000">0 </font><font color="#FF0000"><b>then begin </b></font>inc<font color="#000080">(</font>y<font color="#000080">,</font>yi<font color="#000080">); </font>inc<font color="#000080">(</font>d<font color="#000080">,</font>ai<font color="#000080">); </font><font color="#FF0000"><b>end else </b></font>inc<font color="#000080">(</font>d<font color="#000080">,</font>bi<font color="#000080">);
      </font>inc<font color="#000080">(</font>x<font color="#000080">,</font>xi<font color="#000080">); </font>plot<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">);
    </font><font color="#FF0000"><b>until </b></font>x <font color="#000080">= </font>x2<font color="#000080">;
  </font><font color="#FF0000"><b>end
  else begin
    </b></font>ai <font color="#000080">:= (</font>dx<font color="#000080">-</font>dy<font color="#000080">)*</font><font color="#800000">2</font><font color="#000080">; </font>bi <font color="#000080">:= </font>dx<font color="#000080">*</font><font color="#800000">2</font><font color="#000080">; </font>d <font color="#000080">:= </font>bi<font color="#000080">-</font>dy<font color="#000080">;
    </font><font color="#FF0000"><b>repeat
      if </b></font>d <font color="#000080">&gt;= </font><font color="#800000">0 </font><font color="#FF0000"><b>then begin </b></font>inc<font color="#000080">(</font>x<font color="#000080">,</font>xi<font color="#000080">); </font>inc<font color="#000080">(</font>d<font color="#000080">,</font>ai<font color="#000080">); </font><font color="#FF0000"><b>end else </b></font>inc<font color="#000080">(</font>d<font color="#000080">,</font>bi<font color="#000080">);
      </font>inc<font color="#000080">(</font>y<font color="#000080">,</font>yi<font color="#000080">); </font>plot<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">);
    </font><font color="#FF0000"><b>until </b></font>y <font color="#000080">= </font>y2<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  if </b></font>lastmode <font color="#000080">= </font><font color="#800000">7 </font><font color="#FF0000"><b>then </b></font>vseg <font color="#000080">:= </font><font color="#800000">$b000</font><font color="#000080">;
  </font>maxx <font color="#000080">:= </font>lo<font color="#000080">(</font>windmax<font color="#000080">); </font>maxy <font color="#000080">:= </font>hi<font color="#000080">(</font>windmax<font color="#000080">);

  </font><font color="#008000"><i>{ fill the screen with characters added by G.DAVIS}
  </i></font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>SUCC<font color="#000080">(</font>maxy<font color="#000080">) </font><font color="#FF0000"><b>do
  begin
  </b></font>gotoxy<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font>i<font color="#000080">);
  </font><font color="#FF0000"><b>for </b></font>x <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>SUCC<font color="#000080">(</font>maxx<font color="#000080">) </font><font color="#FF0000"><b>do </b></font>write<font color="#000080">(</font>Chr<font color="#000080">(</font>X<font color="#000080">+</font><font color="#800000">32</font><font color="#000080">));
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>maxx <font color="#FF0000"><b>do begin
    </b></font>retrace<font color="#000080">;
    </font>line<font color="#000080">(</font>maxx <font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">,</font>maxy <font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">,</font>i<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>maxy <font color="#FF0000"><b>do begin
    </b></font>retrace<font color="#000080">;
    </font>line<font color="#000080">(</font>maxx <font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">,</font>maxy <font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">,</font>maxx<font color="#000080">,</font>i<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font>maxx <font color="#FF0000"><b>downto </b></font><font color="#800000">0 </font><font color="#FF0000"><b>do begin
    </b></font>retrace<font color="#000080">;
    </font>line<font color="#000080">(</font>maxx <font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">,</font>maxy <font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">,</font>i<font color="#000080">,</font>maxy<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font>maxy <font color="#FF0000"><b>downto </b></font><font color="#800000">0 </font><font color="#FF0000"><b>do begin
    </b></font>retrace<font color="#000080">;
    </font>line<font color="#000080">(</font>maxx <font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">,</font>maxy <font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>i<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

--- </font>cut here <font color="#000080">---

</font>The line<font color="#000080">-</font>routine was taken from Sean Palmers <font color="#800000">320</font>x240<font color="#000080">-</font>mode<font color="#000080">-</font>x <font color="#FF0000"><b>unit </b></font><font color="#000080">(</font>just a little
re<font color="#000080">-</font>idented<font color="#000080">. ;-))

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0098.PAS">Original</a><b>]</b></p></body>
</html>
