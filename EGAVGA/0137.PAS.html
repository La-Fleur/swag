<html>
<head><title> "New ANIVGA Fade - Horizontal" by KAI ROHRBACHER</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0137.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
  Well,  some  guy from Scotland asked me if it is possible to do a fade
  in  AniVGA  V1.2  which  shoves in one half of a picture from the left
  side and the other half from the right side.
  As it was very easy to do so and the results indeed look GREAT, it may
  be  of  some interest for others, too, so here we go: You may add this
  routine    to    the    other    fades   as   usual;   I   called   it
  &quot;Fade_HorizontalSplitClose  =  30;&quot; Hopefully, I didn't mess things up
  by converting the example back to TP 6.0 &amp; AniVGA V1.2 ...

kai.rohrbacher@logo.ka.sub.org
}

{$A+,B-,D+,L+,N-,E-,O-,R-,S-,V-,G-,F-,I-,X+}
{$M 32768,0,655360}
</i></font><font color="#FF0000"><b>PROGRAM </b></font>Example8D<font color="#000080">;
</font><font color="#FF0000"><b>USES </b></font>ANIVGA<font color="#000080">;

</font><font color="#FF0000"><b>CONST </b></font>pic<font color="#000080">=</font><font color="#800000">'DOG1.PIC'</font><font color="#000080">;      </font><font color="#008000"><i>{or any other PIC}
      </i></font>picPal1<font color="#000080">=</font><font color="#800000">'DOG1.PAL'</font><font color="#000080">;
</font><font color="#008000"><i>{$IFDEF VER60}
      </i></font>Seg0040<font color="#000080">:</font>WORD<font color="#000080">=</font><font color="#800000">$40</font><font color="#000080">;
</font><font color="#008000"><i>{$ENDIF}

  </i></font><font color="#FF0000"><b>PROCEDURE </b></font>HorizontalSplitClose<font color="#000080">(</font>pa<font color="#000080">,</font>time<font color="#000080">:</font>WORD<font color="#000080">);
  </font><font color="#008000"><i>{ in: pa    = page, which contents will be made visible }
  {     time  = time (in milliseconds) for this action (approx.) }
  {out: - }
  {rem: the contents of page &quot;pa&quot; has been copied to page visualPage }
  </i></font><font color="#FF0000"><b>CONST </b></font>n <font color="#000080">= (</font>XMAX<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>DIV </b></font><font color="#800000">2</font><font color="#000080">; </font><font color="#008000"><i>{number of executions of the delay loop}
  </i></font><font color="#FF0000"><b>VAR </b></font>counter<font color="#000080">:</font>WORD<font color="#000080">;
      </font>ClockTicks<font color="#000080">:^</font>LONGINT<font color="#000080">; </font><font color="#008000"><i>{LONGINT ABSOLUTE $40:$6C geht nicht}
      </i></font>t<font color="#000080">: </font>LONGINT<font color="#000080">;
      </font>temp<font color="#000080">:</font>REAL<font color="#000080">;
      </font>mitte<font color="#000080">,</font>columns<font color="#000080">:</font>INTEGER<font color="#000080">;

      </font>p<font color="#000080">:</font>POINTER<font color="#000080">;

  </font><font color="#FF0000"><b>BEGIN
   </b></font>ClockTicks<font color="#000080">:=</font>Ptr<font color="#000080">(</font>Seg0040<font color="#000080">,</font><font color="#800000">$6C</font><font color="#000080">);
   </font>t <font color="#000080">:= </font>ClockTicks<font color="#000080">^;
   </font>counter <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
   </font>temp <font color="#000080">:= </font><font color="#800000">0.0182</font><font color="#000080">*</font>time<font color="#000080">/</font>n<font color="#000080">;

   </font>mitte<font color="#000080">:=</font>XMAX <font color="#FF0000"><b>SHR </b></font><font color="#800000">1</font><font color="#000080">;
   </font><font color="#FF0000"><b>FOR </b></font>columns<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>TO </b></font>mitte <font color="#FF0000"><b>DO
    BEGIN
     </b></font>p<font color="#000080">:= </font>GetImage<font color="#000080">(</font>StartVirtualX<font color="#000080">+</font>mitte<font color="#000080">-</font>columns<font color="#000080">,</font>StartVirtualY<font color="#000080">,
                  </font>StartVirtualX<font color="#000080">+</font>mitte<font color="#000080">,</font>StartVirtualY<font color="#000080">+</font>YMAX<font color="#000080">,</font>pa<font color="#000080">);
     </font>PutImage<font color="#000080">(</font>StartVirtualX<font color="#000080">,</font>StartVirtualY<font color="#000080">,</font>p<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">-</font>Page<font color="#000080">);
     </font>FreeImageMem<font color="#000080">(</font>p<font color="#000080">);

     </font>p<font color="#000080">:= </font>GetImage<font color="#000080">(</font>StartVirtualX<font color="#000080">+</font>mitte<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,</font>StartVirtualY<font color="#000080">,
                  </font>StartVirtualX<font color="#000080">+</font>mitte<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">+</font>columns<font color="#000080">,</font>StartVirtualY<font color="#000080">+</font>YMAX<font color="#000080">,</font>pa<font color="#000080">);
     </font>PutImage<font color="#000080">(</font>StartVirtualX<font color="#000080">+</font>XMAX<font color="#000080">-</font>columns<font color="#000080">,</font>StartVirtualY<font color="#000080">,</font>p<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">-</font>Page<font color="#000080">);
     </font>FreeImageMem<font color="#000080">(</font>p<font color="#000080">);

     </font>INC<font color="#000080">(</font>counter<font color="#000080">);
     </font><font color="#FF0000"><b>WHILE </b></font><font color="#000080">(</font>ClockTicks<font color="#000080">^ &lt; (</font>t<font color="#000080">+</font>counter<font color="#000080">*</font>temp<font color="#000080">)) </font><font color="#FF0000"><b>DO BEGIN END</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

   </font><font color="#008000"><i>{Cleanup:}
   (* IF Odd(XMAX+1)
       THEN CopyPage(pa,visualPage); *)
  </i></font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>VAR </b></font>pal1<font color="#000080">:</font>Palette<font color="#000080">;
    </font>i<font color="#000080">:</font>WORD<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
 </b></font>InitGraph<font color="#000080">;
 </font>StartVirtualX<font color="#000080">:=</font><font color="#800000">20</font><font color="#000080">; </font>StartVirtualY<font color="#000080">:=</font><font color="#800000">10</font><font color="#000080">;
 </font>LoadBackgroundPage<font color="#000080">(</font>pic<font color="#000080">);
 </font>LoadPalette<font color="#000080">(</font>picPal1<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>pal1<font color="#000080">); </font>SetPalette<font color="#000080">(</font>pal1<font color="#000080">,</font>FALSE<font color="#000080">);
 </font>FillPage<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">-</font>Page<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
 </font><font color="#FF0000"><b>FOR </b></font>i<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>TO </b></font><font color="#800000">20000 </font><font color="#FF0000"><b>DO
  </b></font>PutPixel<font color="#000080">(</font>Random<font color="#000080">(</font>Succ<font color="#000080">(</font>XMAX<font color="#000080">)),</font>Random<font color="#000080">(</font>Succ<font color="#000080">(</font>YMAX<font color="#000080">)),</font>Random<font color="#000080">(</font><font color="#800000">256</font><font color="#000080">));

 </font>HorizontalSplitClose<font color="#000080">(</font>BACKGNDPAGE<font color="#000080">,</font><font color="#800000">2000</font><font color="#000080">);

 </font>CloseRoutines<font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0137.PAS">Original</a><b>]</b></p></body>
</html>
