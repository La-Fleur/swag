<html>
<head><title> "Drawing Objects in Mode 13h" by DIRK WESSELS</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0218.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
I see so many messages of people wanting help on drawing in Mode 13H
So mayB we can start a thread here for people that know as little as myself.

Following is a complete program to place you in Mode 13H and to draw an
object 100 times.

My knowledge of ASM is very limited so mayB you would like to make some
suggestions on how to do this faster &amp; also how I should keep the object
in memory in stead of using an array.
BUT, for the beginners this should be a good start - I hope ??
}

</i></font><font color="#FF0000"><b>Var
   </b></font>X<font color="#000080">,</font>Y<font color="#000080">,</font>I    <font color="#000080">: </font>Integer<font color="#000080">;
   </font>Object1  <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">40000</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte<font color="#000080">;
   </font>CH       <font color="#000080">: </font>Char<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>SetMode13H<font color="#000080">;
  </font><font color="#FF0000"><b>Begin
    ASM
      </b></font><font color="#FF00FF">mov   ah,0
      mov   al,13H
      int   10h
    </font><font color="#FF0000"><b>END
  End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>DrwObj<font color="#000080">(</font>X<font color="#000080">,</font>Y<font color="#000080">,</font>Width <font color="#000080">: </font>Integer<font color="#000080">;</font>Size <font color="#000080">: </font>Word<font color="#000080">);
  </font><font color="#FF0000"><b>Var
     </b></font>ROWS <font color="#000080">: </font>Byte<font color="#000080">;

  </font><font color="#FF0000"><b>Begin
     </b></font>ROWS <font color="#000080">:= </font>SIZE <font color="#FF0000"><b>DIV </b></font>WIDTH<font color="#000080">;
    </font><font color="#FF0000"><b>ASM
      </b></font><font color="#FF00FF">push    ds
      mov     ax,y         </font><font color="#008000"><i>{  place X,Y in DI for startpos }
      </i></font><font color="#FF00FF">mov     bx,320       </font><font color="#008000"><i>{  &quot; }
      </i></font><font color="#FF00FF">mul     bx           </font><font color="#008000"><i>{  &quot; }
      </i></font><font color="#FF00FF">add     ax,x         </font><font color="#008000"><i>{  &quot; }
      </i></font><font color="#FF00FF">mov     di,ax        </font><font color="#008000"><i>{  &quot; }
      </i></font><font color="#FF00FF">mov     ax,0A000H    </font><font color="#008000"><i>{ Mode 13h Screen Address }
      </i></font><font color="#FF00FF">mov     es,ax        </font><font color="#008000"><i>{ into es }

      </i></font><font color="#FF00FF">mov     AX, SEG object1;     </font><font color="#008000"><i>{ Let DS:SI point to Object 2 B drawn }
      </i></font><font color="#FF00FF">MOV     DS,AX                </font><font color="#008000"><i>{  &quot; }
      </i></font><font color="#FF00FF">MOV     AX, OFFSET OBJECT1   </font><font color="#008000"><i>{ &quot; }
      </i></font><font color="#FF00FF">MOV     SI,AX                </font><font color="#008000"><i>{ &quot; }
     </i></font><font color="#FF00FF">@DRAWROW:
      MOV     CX,WIDTH
      REP     MOVSB
      ADD     DI,320
      SUB     DI,WIDTH
      DEC     ROWS
      CMP     ROWS,1
      JNZ     @DRAWROW
      pop     ds
    </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>BEGIN
  </b></font>SetMode13H<font color="#000080">;
  </font><font color="#FF0000"><b>For </b></font>y <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">100 </font><font color="#FF0000"><b>do
    Begin
      For </b></font>x <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">20000 </font><font color="#FF0000"><b>do
        Begin
          </b></font>Object1<font color="#000080">[</font>x<font color="#000080">] := </font>x<font color="#000080">*</font>Y<font color="#000080">;
          </font>Object1<font color="#000080">[</font>x<font color="#000080">+</font><font color="#800000">20000</font><font color="#000080">] := </font>x<font color="#000080">*</font>y<font color="#000080">+</font>x<font color="#000080">;
        </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
        </font>DrwObj<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">300</font><font color="#000080">,</font><font color="#800000">39900</font><font color="#000080">);
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font>Readln<font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0218.PAS">Original</a><b>]</b></p></body>
</html>
