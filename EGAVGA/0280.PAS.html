<html>
<head><title> "VGA Textfont & Color changer" by NILTON CASTILLO ALBARRACIN</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0280.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>Unit </b></font>NEWFONT<font color="#000080">; </font><font color="#008000"><i>{VGA Textfont &amp; color changer. Source.}
        {
                Version: 1.0 (Beta/not all mode tested)

                Author: Nilton Castillo Albarrac&iexcl;n.
                        ncastill@araucaria.cec.uchile.cl
                        El Boldo 275 Est.Central Santiago Chile

                Tested on a VGA card only. CardWare. Use at own risk!
                I take no responsability of any damage that may occur
                to your hardware. Currently I've tested only the modes with
                CharSizeByte=16.
-----------------------------------------------------------------------------
          SETRGB(color,R,G,B)  Sets the Red/Green/Blue values for the
                               desired color (0 to 15).
                               R, G &amp; B go from 0 to 63.
-----------------------------------------------------------------------------
          SetFont(filename:string;csb:byte)
                               Loads a new font into memory.
                               csb is the charsize of the font in bytes,
                               it depends on the current graphical/text mode
-----------------------------------------------------------------------------
          SETMODE(mode)        Sets the graphical/text mode
                               Warning: Some modes may damage your monitor.
                               Below is a listing of save modes.
-----------------------------------------------------------------------------
          GetMode:word;        Get the current graphical/text mode
-----------------------------------------------------------------------------
          Border (color);      Change the border color.
-----------------------------------------------------------------------------

                 Mode     Alpha  Resolution Colors CharSize CharSizeBytes(CSB)
                 ------------------------------------------------------
                 $3(VGA)  80x25  640x350     16     8x16     16
                 $7(Vga)  80x25  720x400      2     9x16     18?
                 $7(Ega)  80x25  720x350      2     9x14
                 $50      80x30  640x480     16     8x16     16
                 $51      80x43  640x473     16     8x11     11
                 $52      80x60  640x480     16     8x8      8
                 $53     132x25 1056x350     16     8x14     14
                 $54     132x30 1056x480     16     8x16     16
                 $55     132x43 1056x473     16     8x11     11
                 $56     132x60 1056x480     16     8x8      8

              These are 'save' modes to use, all VGA monitors should support
              these modes. Higher modes may not be that kind to your monitor.

        Q: What is CardWare?
        A: It's like shareware: if you like it, send me a postcard.
           (with nice stamps on it! :) )

        Q: How do I make my own fonts?
        A: For textmode fonts, download EVAFONT.ZIP an editor by
           Pete Kvitek. It's excelent!
           For a font collection: Fntcol16.zip... many fonts, but no editor!

        Q: I need this to work for mode $10,$12 or $13 ...
        A: Email me, and I will send you some hints to make the fonts
           load in these modes...


        }
</i></font><font color="#FF0000"><b>interface
         procedure </b></font>SetRGB <font color="#000080">(</font>color<font color="#000080">:</font>integer<font color="#000080">;</font>r<font color="#000080">,</font>g<font color="#000080">,</font>b<font color="#000080">:</font>byte<font color="#000080">);
         </font><font color="#FF0000"><b>procedure </b></font>SetFont<font color="#000080">(</font>filename<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">;</font>csb<font color="#000080">:</font>byte<font color="#000080">);
         </font><font color="#FF0000"><b>procedure </b></font>SetMode<font color="#000080">(</font>Mode<font color="#000080">: </font>word<font color="#000080">);
         </font><font color="#FF0000"><b>Function  </b></font>GetMode<font color="#000080">:</font>word<font color="#000080">;
         </font><font color="#FF0000"><b>procedure </b></font>Border<font color="#000080">(</font>color<font color="#000080">: </font>byte<font color="#000080">);

</font><font color="#FF0000"><b>implementation
uses </b></font>DOS<font color="#000080">;
</font><font color="#FF0000"><b>var  </b></font>FONT<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">4095</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>Border<font color="#000080">(</font>color<font color="#000080">: </font>byte<font color="#000080">);
</font><font color="#FF0000"><b>begin
     asm
      </b></font><font color="#FF00FF">mov AX,$0B00;
      mov BH,$00;
      mov BL,color;
      int 10h
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>SetRGB <font color="#000080">(</font>color<font color="#000080">:</font>integer<font color="#000080">;</font>r<font color="#000080">,</font>g<font color="#000080">,</font>b<font color="#000080">:</font>byte<font color="#000080">);
</font><font color="#FF0000"><b>begin
     if </b></font>color<font color="#000080">&gt;</font><font color="#800000">5 </font><font color="#FF0000"><b>then    </b></font><font color="#008000"><i>{ this is to make color changes work with        }
          </i></font><font color="#FF0000"><b>case </b></font>color <font color="#FF0000"><b>of </b></font><font color="#008000"><i>{ textcolor() &amp; textbackground()...but why?      }
          </i></font><font color="#800000">6</font><font color="#000080">: </font>color<font color="#000080">:=</font><font color="#800000">20</font><font color="#000080">; </font><font color="#008000"><i>{ note: for fast palette fadings use color 0 to 5}
          </i></font><font color="#800000">8</font><font color="#000080">: </font>color<font color="#000080">:=</font><font color="#800000">56</font><font color="#000080">;
          </font><font color="#800000">9</font><font color="#000080">: </font>color<font color="#000080">:=</font><font color="#800000">57</font><font color="#000080">;
          </font><font color="#800000">10</font><font color="#000080">: </font>color<font color="#000080">:=</font><font color="#800000">58</font><font color="#000080">;
          </font><font color="#800000">11</font><font color="#000080">: </font>color<font color="#000080">:=</font><font color="#800000">59</font><font color="#000080">;
          </font><font color="#800000">12</font><font color="#000080">: </font>color<font color="#000080">:=</font><font color="#800000">60</font><font color="#000080">;
          </font><font color="#800000">13</font><font color="#000080">: </font>color<font color="#000080">:=</font><font color="#800000">61</font><font color="#000080">;
          </font><font color="#800000">14</font><font color="#000080">: </font>color<font color="#000080">:=</font><font color="#800000">62</font><font color="#000080">;
          </font><font color="#800000">15</font><font color="#000080">: </font>color<font color="#000080">:=</font><font color="#800000">63</font><font color="#000080">;
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>asm
      </b></font><font color="#FF00FF">mov AX,$1010;
      mov BX,color;
      mov DH,R;
      mov CH,G;
      mov CL,B;
      int 10h
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>SETFont<font color="#000080">(</font>filename<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">;</font>csb<font color="#000080">:</font>byte<font color="#000080">); </font><font color="#008000"><i>{ONLY for TextModes}
</i></font><font color="#FF0000"><b>var
  </b></font>Regs <font color="#000080">: </font>Registers<font color="#000080">;
  </font>f<font color="#000080">:</font><font color="#FF0000"><b>file</b></font><font color="#000080">;
  </font>d<font color="#000080">:</font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
     </b></font>assign<font color="#000080">(</font>f<font color="#000080">,</font>filename<font color="#000080">);
     </font>reset<font color="#000080">(</font>f<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
     </font>blockread<font color="#000080">(</font>f<font color="#000080">,</font>font<font color="#000080">,</font>sizeof<font color="#000080">(</font>font<font color="#000080">),</font>d<font color="#000080">);
     </font>close<font color="#000080">(</font>f<font color="#000080">);

      </font>regs<font color="#000080">.</font>AH<font color="#000080">:=</font><font color="#800000">$11</font><font color="#000080">;
      </font>regs<font color="#000080">.</font>AL<font color="#000080">:=</font><font color="#800000">$0</font><font color="#000080">;
      </font>regs<font color="#000080">.</font>BH<font color="#000080">:=</font>csb<font color="#000080">; </font><font color="#008000"><i>{bytes per char}
      </i></font>regs<font color="#000080">.</font>BL<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">; </font><font color="#008000"><i>{what is this? }
      </i></font>regs<font color="#000080">.</font>CX<font color="#000080">:=</font><font color="#800000">$254</font><font color="#000080">; </font><font color="#008000"><i>{how many chars}
      </i></font>regs<font color="#000080">.</font>DX<font color="#000080">:=</font><font color="#800000">$0</font><font color="#000080">; </font><font color="#008000"><i>{start at char code}
      </i></font>regs<font color="#000080">.</font>ES<font color="#000080">:=</font>seg<font color="#000080">(</font>font<font color="#000080">);
      </font>regs<font color="#000080">.</font>BP<font color="#000080">:=</font>ofs<font color="#000080">(</font>font<font color="#000080">);
      </font>Intr <font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">, </font>Regs<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>SetMode <font color="#000080">(</font>Mode <font color="#000080">: </font>word<font color="#000080">);
</font><font color="#FF0000"><b>begin
  asm
    </b></font><font color="#FF00FF">mov ax,Mode;
    int 10h
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Function </b></font>Getmode<font color="#000080">:</font>word<font color="#000080">;
</font><font color="#FF0000"><b>begin
</b></font>getmode<font color="#000080">:=</font>Mem<font color="#000080">[</font><font color="#800000">$0040</font><font color="#000080">:</font><font color="#800000">$0049</font><font color="#000080">];
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>END</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0280.PAS">Original</a><b>]</b></p></body>
</html>
