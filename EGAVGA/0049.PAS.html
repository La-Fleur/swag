<html>
<head><title> "Dispaly PIC,PCX,SCI,GIF" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0049.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt;Does anyone know of any way to display a single screen of Graphics on EGA
&gt;640x350 mode *quickly*.  It can be VGA as well; I'm just trying to display t
&gt;screen *fast* from a disk File.  I know, I could have used the GIF or PCX

This would restore a .PIC format File, uncompressed, For 320x200x256
mode $13, With a prepended 256*3 Byte palette entry header.  It should
work- I just wrote this code yesterday to display some unknown .PIC
Files.
}

</i></font><font color="#FF0000"><b>Program </b></font>dispic<font color="#000080">;
</font><font color="#FF0000"><b>Const
  </b></font>maxpicsize <font color="#000080">= </font><font color="#800000">320</font><font color="#000080">*</font><font color="#800000">200</font><font color="#000080">;
</font><font color="#FF0000"><b>Type
  </b></font>pbuf <font color="#000080">= ^</font>abuf<font color="#000080">;
  </font>abuf<font color="#000080">=</font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font>maxPICSIZE<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte<font color="#000080">;
  </font>palbuf <font color="#000080">= ^</font>apalbuf<font color="#000080">;
  </font>apalbuf<font color="#000080">=</font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">256</font><font color="#000080">*</font><font color="#800000">3</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte<font color="#000080">;
  </font>headerbuf<font color="#000080">=^</font>aheaderbuf<font color="#000080">;
  </font>aheaderbuf<font color="#000080">=</font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">32</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>f <font color="#000080">: </font><font color="#FF0000"><b>File</b></font><font color="#000080">;
  </font>i <font color="#000080">: </font>Byte<font color="#000080">;
  </font>buf <font color="#000080">: </font>pbuf<font color="#000080">;
  </font>pal <font color="#000080">: </font>palbuf<font color="#000080">;
  </font>header <font color="#000080">: </font>headerbuf<font color="#000080">;
  </font>hsize<font color="#000080">,</font>vsize<font color="#000080">,</font>picsize<font color="#000080">,</font>headersize<font color="#000080">,</font>palettesize<font color="#000080">:</font>Word<font color="#000080">;
  </font>_r<font color="#000080">,</font>_g<font color="#000080">,</font>_b<font color="#000080">,
  </font>cr <font color="#000080">: </font>Byte<font color="#000080">;
  </font>nr<font color="#000080">,</font>ctr <font color="#000080">: </font>Word<font color="#000080">;
  </font>fs<font color="#000080">,</font>overflow <font color="#000080">: </font>LongInt<font color="#000080">;
  </font>Filename <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Procedure </b></font>setcolreg<font color="#000080">(</font>p<font color="#000080">:</font>Pointer<font color="#000080">;</font>start<font color="#000080">,</font>num<font color="#000080">:</font>Word<font color="#000080">);
</font><font color="#FF0000"><b>begin
  Asm
    </b></font><font color="#FF00FF">mov  ah,10h
    mov  al,12h           </font><font color="#008000"><i>{ seg block of color Registers }
    </i></font><font color="#FF00FF">mov  bx,start
    mov  cx,num
    mov  dx,Word ptr p+2  </font><font color="#008000"><i>{ get high Word of p (seg) }
    </i></font><font color="#FF00FF">mov  es,dx
    mov  dx,Word ptr p    </font><font color="#008000"><i>{ get low Word of p (ofs) }
    </i></font><font color="#FF00FF">int  $10
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>stop<font color="#000080">(</font>s<font color="#000080">:</font><font color="#FF0000"><b>String</b></font><font color="#000080">);
</font><font color="#FF0000"><b>begin
  </b></font>Writeln<font color="#000080">(</font>s<font color="#000080">);
  </font>halt<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>Writeln<font color="#000080">(</font><font color="#800000">'DISPIC v0.01&aacute; (c)1993 Brian Pape/Jagaer Technologies'</font><font color="#000080">+</font><font color="#800000">#10#13</font><font color="#000080">);
  </font>Writeln<font color="#000080">(</font>maxavail<font color="#000080">,</font><font color="#800000">' Bytes available.'</font><font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>paramcount <font color="#000080">&lt; </font><font color="#800000">1 </font><font color="#FF0000"><b>then
    </b></font>stop<font color="#000080">(</font><font color="#800000">'no .PIC File specified.'</font><font color="#000080">);
  </font>Filename <font color="#000080">:= </font>paramstr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
  </font>assign<font color="#000080">(</font>f<font color="#000080">,</font>Filename<font color="#000080">);
  </font><font color="#008000"><i>{$I-} </i></font>reset<font color="#000080">(</font>f<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">); </font><font color="#008000"><i>{$I+}
  </i></font><font color="#FF0000"><b>if </b></font>ioresult <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
    begin
      </b></font>Writeln<font color="#000080">(</font><font color="#800000">'File '</font><font color="#000080">+</font>Filename<font color="#000080">+</font><font color="#800000">' not found.'</font><font color="#000080">);
      </font>halt<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>new<font color="#000080">(</font>header<font color="#000080">);
  </font>Writeln<font color="#000080">(</font>maxavail<font color="#000080">,</font><font color="#800000">' Bytes available after header allocate.'</font><font color="#000080">);
  </font>palettesize <font color="#000080">:= </font>sizeof<font color="#000080">(</font>pal<font color="#000080">^);
  </font>headersize <font color="#000080">:= </font>sizeof<font color="#000080">(</font>header<font color="#000080">^);

  </font><font color="#FF0000"><b>if </b></font>Filesize<font color="#000080">(</font>f<font color="#000080">) &lt; </font>headersize<font color="#000080">+</font>palettesize <font color="#FF0000"><b>then </b></font>stop<font color="#000080">(</font><font color="#800000">'invalid .pic File.'</font><font color="#000080">);

  </font>blockread<font color="#000080">(</font>f<font color="#000080">,</font>header<font color="#000080">^,</font>headersize<font color="#000080">,</font>nr<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>nr <font color="#000080">&lt; </font>sizeof<font color="#000080">(</font>headersize<font color="#000080">) </font><font color="#FF0000"><b>then
    </b></font>stop<font color="#000080">(</font><font color="#800000">'insufficient header information.'</font><font color="#000080">)
  </font><font color="#FF0000"><b>else
    </b></font>Writeln<font color="#000080">(</font><font color="#800000">'header: '</font><font color="#000080">,</font>nr<font color="#000080">,</font><font color="#800000">' Bytes read.'</font><font color="#000080">);
  </font>hsize <font color="#000080">:= (</font>Word<font color="#000080">(</font>header<font color="#000080">^[</font><font color="#800000">4</font><font color="#000080">]) </font><font color="#FF0000"><b>shl </b></font><font color="#800000">8</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font>header<font color="#000080">^[</font><font color="#800000">3</font><font color="#000080">];
  </font>vsize <font color="#000080">:= (</font>Word<font color="#000080">(</font>header<font color="#000080">^[</font><font color="#800000">6</font><font color="#000080">]) </font><font color="#FF0000"><b>shl </b></font><font color="#800000">8</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font>header<font color="#000080">^[</font><font color="#800000">5</font><font color="#000080">];

  </font>picsize <font color="#000080">:= (</font>Word<font color="#000080">(</font>header<font color="#000080">^[</font><font color="#800000">14</font><font color="#000080">]) </font><font color="#FF0000"><b>shl </b></font><font color="#800000">8</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font>header<font color="#000080">^[</font><font color="#800000">13</font><font color="#000080">];
  </font>Writeln<font color="#000080">(</font><font color="#800000">'picsize: '</font><font color="#000080">,</font>picsize<font color="#000080">,</font><font color="#800000">' Bytes.'</font><font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>picsize <font color="#000080">&gt; </font>maxpicsize <font color="#FF0000"><b>then
    begin
      </b></font>picsize <font color="#000080">:= </font>maxpicsize<font color="#000080">;
      </font>Writeln<font color="#000080">(</font><font color="#800000">'picture size read overflow. resetting to maxpicsize.'</font><font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>dispose<font color="#000080">(</font>header<font color="#000080">);
  </font>new<font color="#000080">(</font>pal<font color="#000080">);
  </font>Writeln<font color="#000080">(</font>maxavail<font color="#000080">,</font><font color="#800000">' Bytes available after palette allocate.'</font><font color="#000080">);

  </font>blockread<font color="#000080">(</font>f<font color="#000080">,</font>pal<font color="#000080">^,</font>palettesize<font color="#000080">,</font>nr<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>nr <font color="#000080">&lt; </font>palettesize <font color="#FF0000"><b>then
    </b></font>stop<font color="#000080">(</font><font color="#800000">'insufficient palette information.'</font><font color="#000080">)
  </font><font color="#FF0000"><b>else
    </b></font>Writeln<font color="#000080">(</font><font color="#800000">'palette: '</font><font color="#000080">,</font>nr<font color="#000080">,</font><font color="#800000">' Bytes read.'</font><font color="#000080">);

  </font>new<font color="#000080">(</font>buf<font color="#000080">);
  </font>Writeln<font color="#000080">(</font>maxavail<font color="#000080">,</font><font color="#800000">' Bytes available after buffer allocate.'</font><font color="#000080">);
  </font><font color="#008000"><i>{$I-} </i></font>blockread<font color="#000080">(</font>f<font color="#000080">,</font>buf<font color="#000080">^,</font>sizeof<font color="#000080">(</font>buf<font color="#000080">^),</font>nr<font color="#000080">); </font><font color="#008000"><i>{$I+}
  </i></font><font color="#FF0000"><b>if </b></font>ioresult <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then</b></font><font color="#000080">;
  </font>Writeln<font color="#000080">(</font><font color="#800000">'picture: '</font><font color="#000080">,</font>nr<font color="#000080">,</font><font color="#800000">' Bytes read.'</font><font color="#000080">);
  </font>Writeln<font color="#000080">(</font><font color="#800000">'hsize: '</font><font color="#000080">,</font>hsize<font color="#000080">);
  </font>Writeln<font color="#000080">(</font><font color="#800000">'vsize: '</font><font color="#000080">,</font>vsize<font color="#000080">);
  </font>Writeln<font color="#000080">(</font><font color="#800000">'press enter.'</font><font color="#000080">);
  </font>readln<font color="#000080">;
  </font>close<font color="#000080">(</font>f<font color="#000080">);
  </font><font color="#FF0000"><b>Asm
    </b></font><font color="#FF00FF">mov ah,00
    mov al,$13
    int $10
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>move<font color="#000080">(</font>buf<font color="#000080">^,</font>ptr<font color="#000080">(</font><font color="#800000">$a000</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">)^,</font>nr<font color="#000080">);

  </font>setcolreg<font color="#000080">(</font>pal<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">256</font><font color="#000080">);

  </font>dispose<font color="#000080">(</font>buf<font color="#000080">);
  </font>dispose<font color="#000080">(</font>pal<font color="#000080">);
  </font>readln<font color="#000080">;
  </font><font color="#FF0000"><b>Asm
    </b></font><font color="#FF00FF">mov ah,00
    mov al,03
    int $10
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font><font color="#008000"><i>{
&gt; Hello is somebody there that knows how to use pictures that I
&gt; made in Deluxe paint (.lbm)

First, convert the LBM File to a SCI using For instance VPIC.
I assume you are using VGA/MCGA 320x200x256.. In Case you don't,
this won't work...:
}
</i></font><font color="#FF0000"><b>Uses
  </b></font>Crt<font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>SCIFile <font color="#000080">: </font><font color="#FF0000"><b>File</b></font><font color="#000080">;
  </font>r<font color="#000080">, </font>g<font color="#000080">, </font>b <font color="#000080">: </font>Byte<font color="#000080">;
  </font>i       <font color="#000080">: </font>Integer<font color="#000080">;
  </font>VideoM  <font color="#000080">: </font>Byte <font color="#FF0000"><b>Absolute </b></font><font color="#800000">$A000</font><font color="#000080">:</font><font color="#800000">0000</font><font color="#000080">;
</font><font color="#FF0000"><b>begin
  Asm
    </b></font><font color="#FF00FF">mov ax,0013h
    int 10h
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>Assign<font color="#000080">(</font>SCIFile<font color="#000080">, </font><font color="#800000">'MYSCI.SCI'</font><font color="#000080">);   </font><font color="#008000"><i>{ Put your own Filename there }
  </i></font>Reset<font color="#000080">(</font>SCIFile<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);

  </font><font color="#FF0000"><b>For </b></font>i <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do begin
    </b></font>Port<font color="#000080">[</font><font color="#800000">$3C8</font><font color="#000080">] := </font>i<font color="#000080">;
    </font>BlockRead<font color="#000080">(</font>SCIFile<font color="#000080">,</font>r<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
    </font>BlockRead<font color="#000080">(</font>SCIFile<font color="#000080">,</font>g<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
    </font>BlockRead<font color="#000080">(</font>SCIFile<font color="#000080">,</font>b<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
    </font>Port<font color="#000080">[</font><font color="#800000">$3C9</font><font color="#000080">] := </font>r<font color="#000080">;
    </font>Port<font color="#000080">[</font><font color="#800000">$3C9</font><font color="#000080">] := </font>g<font color="#000080">;
    </font>Port<font color="#000080">[</font><font color="#800000">$3C9</font><font color="#000080">] := </font>b<font color="#000080">;              </font><font color="#008000"><i>{ Set palette }
   </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>BlockRead<font color="#000080">(</font>SCIFile<font color="#000080">,</font>VideoM<font color="#000080">,</font><font color="#800000">64000</font><font color="#000080">);
  </font><font color="#FF0000"><b>Repeat Until </b></font>Port<font color="#000080">[</font><font color="#800000">$60</font><font color="#000080">] = </font><font color="#800000">1</font><font color="#000080">;     </font><font color="#008000"><i>{ Wait For ESC }

  </i></font><font color="#FF0000"><b>Asm
    </b></font><font color="#FF00FF">mov ax,0003h
    int 10h
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font><font color="#008000"><i>{
&gt; I am looking to create a simple utility to report the size, color, etc
&gt; of GIFs.
}

</i></font><font color="#FF0000"><b>Program </b></font>GI<font color="#000080">;
</font><font color="#FF0000"><b>Uses
  </b></font>Dos<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>ExtractGIFInfo <font color="#000080">(</font>Name <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">);

</font><font color="#FF0000"><b>Const
  </b></font>ColorRez <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">8</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte<font color="#000080">=(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">7</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">31</font><font color="#000080">,</font><font color="#800000">63</font><font color="#000080">,</font><font color="#800000">127</font><font color="#000080">,</font><font color="#800000">255</font><font color="#000080">);

</font><font color="#FF0000"><b>Type
  </b></font>GifSigRec <font color="#000080">= </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">6</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Char<font color="#000080">;

  </font>ScreenDiscRec <font color="#000080">= </font><font color="#FF0000"><b>Record
    </b></font>Width<font color="#000080">,
    </font>Height<font color="#000080">:</font>Word<font color="#000080">;
    </font>GenInfo<font color="#000080">:</font>Byte<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Var
  </b></font>F       <font color="#000080">: </font><font color="#FF0000"><b>File</b></font><font color="#000080">;
  </font>Sig     <font color="#000080">: </font>GIFSigRec<font color="#000080">;
  </font>Screen  <font color="#000080">: </font>ScreenDiscRec<font color="#000080">;
  </font>Result  <font color="#000080">: </font>Word<font color="#000080">;
  </font>Diver<font color="#000080">,
  </font>X       <font color="#000080">: </font>Byte<font color="#000080">;
  </font>Y       <font color="#000080">: </font>LongInt<font color="#000080">;
  </font>DirInfo <font color="#000080">: </font>SearchRec<font color="#000080">;
  </font>Ratio   <font color="#000080">: </font>Byte<font color="#000080">;
  </font>Res     <font color="#000080">: </font>Word<font color="#000080">;
  </font>RReal   <font color="#000080">: </font>Real<font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>Assign<font color="#000080">(</font>F<font color="#000080">, </font>Name<font color="#000080">);
  </font>Reset<font color="#000080">(</font>F<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
  </font>BlockRead<font color="#000080">(</font>F<font color="#000080">, </font>Sig<font color="#000080">, </font>SizeOF<font color="#000080">(</font>Sig<font color="#000080">), </font>Result<font color="#000080">);
  </font>BlockRead<font color="#000080">(</font>F<font color="#000080">, </font>Screen<font color="#000080">, </font>SizeOf<font color="#000080">(</font>Screen<font color="#000080">), </font>Result<font color="#000080">);
  </font>Close<font color="#000080">(</font>F<font color="#000080">);

  </font><font color="#FF0000"><b>If </b></font><font color="#000080">(</font>Sig<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] + </font>Sig<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">] + </font>Sig<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">] &lt;&gt; </font><font color="#800000">'GIF'</font><font color="#000080">) </font><font color="#FF0000"><b>Then
  begin
    </b></font>WriteLn<font color="#000080">(</font><font color="#800000">'Not a Valid .GIF File!'</font><font color="#000080">);
    </font>Exit<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>For </b></font>X <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">6 </font><font color="#FF0000"><b>do
    </b></font>Write<font color="#000080">(</font>Sig<font color="#000080">[</font>X<font color="#000080">]);
  </font>Write<font color="#000080">(</font><font color="#800000">', '</font><font color="#000080">, </font>Screen<font color="#000080">.</font>Width<font color="#000080">, </font><font color="#800000">'x'</font><font color="#000080">, </font>Screen<font color="#000080">.</font>Height<font color="#000080">, </font><font color="#800000">'x'</font><font color="#000080">);
  </font>Screen<font color="#000080">.</font>GenInfo <font color="#000080">:= (</font>Screen<font color="#000080">.</font>GenInfo <font color="#FF0000"><b>and </b></font><font color="#800000">7</font><font color="#000080">) + </font><font color="#800000">1</font><font color="#000080">;
  </font>Res <font color="#000080">:= </font>ColorRez<font color="#000080">[</font>Screen<font color="#000080">.</font>GenInfo<font color="#000080">] + </font><font color="#800000">1</font><font color="#000080">;
  </font>WriteLn<font color="#000080">(</font>Res<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Var
  </b></font>Count <font color="#000080">: </font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
  If </b></font>ParamCount <font color="#000080">&gt;= </font><font color="#800000">1 </font><font color="#FF0000"><b>then
    For </b></font>Count <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>ParamCount <font color="#FF0000"><b>do
      </b></font>ExtractGIFInfo <font color="#000080">(</font>ParamStr<font color="#000080">(</font>Count<font color="#000080">))
  </font><font color="#FF0000"><b>else
    </b></font>WriteLn<font color="#000080">(</font><font color="#800000">' Use a Filename geek!'</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>Had the PCX info<font color="#000080">:

</font>ZSoft <font color="#000080">.</font>PCX <font color="#FF0000"><b>File </b></font>HEADER ForMAT

Byte Item         Size Description<font color="#000080">/</font>Comments

<font color="#800000">0    </font>Manufacturer  <font color="#800000">1    </font>Constant Flag<font color="#000080">, </font><font color="#800000">10 </font><font color="#000080">= </font>ZSoft <font color="#000080">.</font>pcx

<font color="#800000">1    </font>Version       <font color="#800000">1    </font>Version inFormation
            <font color="#800000">0 </font><font color="#000080">= </font>Version <font color="#800000">2.5 </font><font color="#FF0000"><b>of </b></font>PC Paintbrush
            <font color="#800000">2 </font><font color="#000080">= </font>Version <font color="#800000">2.8 </font>w<font color="#000080">/</font>palette inFormation
            <font color="#800000">3 </font><font color="#000080">= </font>Version <font color="#800000">2.8 </font>w<font color="#000080">/</font>o palette inFormation
            <font color="#800000">4 </font><font color="#000080">= </font>PC Paintbrush <font color="#FF0000"><b>For </b></font>Windows<font color="#000080">(</font>Plus <font color="#FF0000"><b>For </b></font>Windows
                <font color="#FF0000"><b>Uses </b></font>Ver <font color="#800000">5</font><font color="#000080">)
            </font><font color="#800000">5 </font><font color="#000080">= </font>Version <font color="#800000">3.0 </font><font color="#FF0000"><b>and </b></font><font color="#000080">&gt; </font><font color="#FF0000"><b>of </b></font>PC Paintbrush <font color="#FF0000"><b>and
                </b></font>PC Paintbrush <font color="#000080">+, </font>includes Publisher<font color="#800000">'s Paintbrush

2    </font>Encoding       <font color="#800000">1   1 </font><font color="#000080">= .</font>PCX run length encoding

<font color="#800000">3    </font>BitsPerPixel   <font color="#800000">1   </font>Number <font color="#FF0000"><b>of </b></font>bits <font color="#FF0000"><b>to </b></font>represent a pixel <font color="#000080">(</font>per
                                Plane<font color="#000080">)- </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">, </font><font color="#800000">4</font><font color="#000080">, </font><font color="#FF0000"><b>or </b></font><font color="#800000">8

4    </font>Window         <font color="#800000">8   </font>Image Dimensions<font color="#000080">: </font>Xmin<font color="#000080">,</font>Ymin<font color="#000080">,</font>Xmax<font color="#000080">,</font>Ymax

<font color="#800000">12   </font>HDpi           <font color="#800000">2   </font>Horizontal Resolution <font color="#FF0000"><b>of </b></font>image <font color="#FF0000"><b>in </b></font>DPI<font color="#000080">*

</font><font color="#800000">14   </font>VDpi           <font color="#800000">2   </font>Vertical Resolution <font color="#FF0000"><b>of </b></font>image <font color="#FF0000"><b>in </b></font>DPI<font color="#000080">*

</font><font color="#800000">16   </font>Colormap       <font color="#800000">48  </font>Color palette setting<font color="#000080">, </font>see Text

<font color="#800000">64   </font>Reserved       <font color="#800000">1   </font>Should be <font color="#FF0000"><b>set to </b></font><font color="#800000">0.

65   </font>NPlanes        <font color="#800000">1   </font>Number <font color="#FF0000"><b>of </b></font>color planes

<font color="#800000">66   </font>BytesPerLine   <font color="#800000">2   </font>Number <font color="#FF0000"><b>of </b></font>Bytes <font color="#FF0000"><b>to </b></font>allocate <font color="#FF0000"><b>For </b></font>a scanline
                        plane<font color="#000080">.  </font>MUST be an EVEN number<font color="#000080">.  </font><font color="#FF0000"><b>Do not
                        </b></font>calculate from Xmax<font color="#000080">-</font>Xmin<font color="#000080">.

</font><font color="#800000">68   </font>PaletteInfo    <font color="#800000">2   </font>How <font color="#FF0000"><b>to </b></font>interpret palette<font color="#000080">- </font><font color="#800000">1 </font><font color="#000080">= </font>Color<font color="#000080">/</font>BW<font color="#000080">, </font><font color="#800000">2 </font><font color="#000080">=
                                </font>Grayscale <font color="#000080">(</font>ignored <font color="#FF0000"><b>in </b></font>PB IV<font color="#000080">/ </font>IV <font color="#000080">+)

</font><font color="#800000">70   </font>HscreenSize    <font color="#800000">2   </font>Horizontal screen size <font color="#FF0000"><b>in </b></font>pixels<font color="#000080">.

</font>New field found only <font color="#FF0000"><b>in </b></font>PB IV<font color="#000080">/</font>IV Plus

<font color="#800000">72   </font>VscreenSize    <font color="#800000">2   </font>Vertical screen size <font color="#FF0000"><b>in </b></font>pixels<font color="#000080">.

</font>New field found only <font color="#FF0000"><b>in </b></font>PB IV<font color="#000080">/</font>IV Plus

<font color="#800000">74   </font>Filler         <font color="#800000">54  </font>Blank <font color="#FF0000"><b>to </b></font>fill <font color="#FF0000"><b>out </b></font><font color="#800000">128 </font>Byte header<font color="#000080">.  </font><font color="#FF0000"><b>Set </b></font>all
                        Bytes <font color="#FF0000"><b>to </b></font><font color="#800000">0

</font>notES<font color="#000080">:

</font>All sizes are measured <font color="#FF0000"><b>in </b></font>ByteS<font color="#000080">.

</font>All Variables <font color="#FF0000"><b>of </b></font>SIZE <font color="#800000">2 </font>are Integers<font color="#000080">.

*</font>HDpi <font color="#FF0000"><b>and </b></font>VDpi represent the Horizontal <font color="#FF0000"><b>and </b></font>Vertical resolutions
which the image was created <font color="#000080">(</font>either Printer <font color="#FF0000"><b>or </b></font>scanner<font color="#000080">); </font>i<font color="#000080">.</font>e<font color="#000080">. </font>an
image which was scanned might have <font color="#800000">300 </font><font color="#FF0000"><b>and </b></font><font color="#800000">300 </font><font color="#FF0000"><b>in </b></font>each <font color="#FF0000"><b>of </b></font>these
fields<font color="#000080">.
</font><font color="#008000"><i>{
&gt; Does anyone have the format structure For PCX format? I had it
&gt; once but I lost it... It had a header (big surprise), and used
&gt; run-length compression (HAHAHAHAHA!!!!), but it seems the easiest major
&gt; format to code.

  Here's the header, I haven't fooled much With coding/decoding PCX
but if I remember right (At least For 256c images) the run
length-Byte is up to 64 since the most-significant bits signify the
end of a line in the image.  And in 256c images, the last 768 Bytes
should be the palette.
}

</i></font>PCXHeader   <font color="#000080">=  </font><font color="#FF0000"><b>Record
  </b></font>Signature      <font color="#000080">:  </font>Char<font color="#000080">;
  </font>Version        <font color="#000080">:  </font>Char<font color="#000080">;
  </font>Encoding       <font color="#000080">:  </font>Char<font color="#000080">;
  </font>BitsPerPixel   <font color="#000080">:  </font>Char<font color="#000080">;
  </font>XMin<font color="#000080">,</font>YMin<font color="#000080">,
  </font>XMax<font color="#000080">,</font>YMax      <font color="#000080">:  </font>Integer<font color="#000080">;
  </font>HRes<font color="#000080">,</font>VRes      <font color="#000080">:  </font>Integer<font color="#000080">;
  </font>Palette        <font color="#000080">:  </font><font color="#FF0000"><b>Array </b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">47</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte<font color="#000080">;
  </font>Reserved       <font color="#000080">:  </font>Char<font color="#000080">;
  </font>Planes         <font color="#000080">:  </font>Char<font color="#000080">;
  </font>BytesPerLine   <font color="#000080">:  </font>Integer<font color="#000080">;
  </font>PaletteType    <font color="#000080">:  </font>Integer<font color="#000080">;
  </font>Filler         <font color="#000080">:  </font><font color="#FF0000"><b>Array </b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">57</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0049.PAS">Original</a><b>]</b></p></body>
</html>
