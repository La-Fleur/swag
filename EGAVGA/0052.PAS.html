<html>
<head><title> "Access Video Bios Fonts" by SEAN PALMER</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0052.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#000080">===========================================================================
 </font>BBS<font color="#000080">: </font>Canada Remote Systems
Date<font color="#000080">: </font><font color="#800000">07</font><font color="#000080">-</font><font color="#800000">02</font><font color="#000080">-</font><font color="#800000">93 </font><font color="#000080">(</font><font color="#800000">14</font><font color="#000080">:</font><font color="#800000">00</font><font color="#000080">)             </font>Number<font color="#000080">: </font><font color="#800000">29054
</font>From<font color="#000080">: </font>SEAN PALMER                  Refer<font color="#800000">#</font><font color="#000080">: </font>NONE
  <font color="#FF0000"><b>To</b></font><font color="#000080">: </font>FRANCIS BURIANEK              Recvd<font color="#000080">: </font>NO  
Subj<font color="#000080">: </font>DOS FONT                       Conf<font color="#000080">: (</font><font color="#800000">1221</font><font color="#000080">) </font>F<font color="#000080">-</font><font color="#FF0000"><b>PASCAL
</b></font><font color="#000080">---------------------------------------------------------------------------
</font>FB<font color="#000080">&gt;</font>Would You know<font color="#000080">, </font>where the Video Bios Fonts are located at<font color="#000080">? (</font>address<font color="#000080">),
</font>FB<font color="#000080">&gt;</font><font color="#FF0000"><b>or </b></font>a way <font color="#FF0000"><b>to </b></font>access using an interrupt<font color="#000080">?

</font>I pulled this off the echo a <font color="#FF0000"><b>while </b></font>back<font color="#000080">...

</font><font color="#FF0000"><b>Type
  </b></font>FontBlock    <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">7</font><font color="#000080">;
  </font>CharSetType  <font color="#000080">= (</font>INT1F<font color="#000080">, </font>INT43<font color="#000080">, </font>ROM8x14<font color="#000080">, </font>ROM8x8lo<font color="#000080">, </font>ROM8x8hi<font color="#000080">, </font>ROM9x14<font color="#000080">,
                 </font>ROM8x16<font color="#000080">, </font>ROM9x16<font color="#000080">);

</font><font color="#008000"><i>{ Get a pointer to one of the eight resident VGA fonts }

</i></font><font color="#FF0000"><b>Function </b></font>GetFontPtr<font color="#000080">(</font>charset <font color="#000080">: </font>CharSetType<font color="#000080">) : </font>Pointer<font color="#000080">; </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;</font><font color="#FF0000"><b>ASM
        </b></font><font color="#FF00FF">MOV    BH, charset
        MOV    AX,$1130
        INT    $10
        MOV    DX, ES
        XCHG   AX, BP
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ Get font block index of current (resident) and alternate character set.
  Up to two fonts can be active at the same time }

</i></font><font color="#FF0000"><b>Procedure </b></font>GetFontBlock<font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>primary<font color="#000080">, </font>secondary <font color="#000080">: </font>FontBlock<font color="#000080">); </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;</font><font color="#FF0000"><b>ASM
  </b></font><font color="#008000"><i>{ Get character map select register:
    (VGA sequencer port 3C4h/3C5h index 3)

    7  6  5  4  3  2  1  0
          |  |  |  |  |  |
          |  |  |  |  +--+--   Primary font   (lower 2 bits)
          |  |  +--+--------   Secondary font (lower 2 bits)
          |  +--------------   Primary font   (high bit)
          +-----------------   Secondary font (high bit)     }

        </i></font><font color="#FF00FF">MOV     AL, 3
        MOV     DX,$3C4
        OUT     DX, AL
        INC     DX
        IN      AL, DX
        MOV     BL, AL
        PUSH    AX
  </font><font color="#008000"><i>{ Get secondary font number: add up bits 5, 3 and 2 }
        </i></font><font color="#FF00FF">SHR     AL, 1
        SHR     AL, 1
        AND     AL, 3
        TEST    BL,$20
        JZ      @1
        ADD     AL, 4
@1:     LES     DI, secondary
        STOSB
  </font><font color="#008000"><i>{ Get primary font number: add up bits 4, 1 and 0 }
        </i></font><font color="#FF00FF">POP     AX
        AND     AL, 3
        TEST    BL,$10
        JZ      @2
        ADD     AL, 4
@2:     LES     DI, primary
        STOSB
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ Store the font block index }

</i></font><font color="#FF0000"><b>Procedure </b></font>SetFontBlock<font color="#000080">(</font>primary<font color="#000080">, </font>secondary <font color="#000080">: </font>FontBlock<font color="#000080">); </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Const
  </b></font>MapPrimTable <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">7</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte <font color="#000080">= (</font><font color="#800000">$00</font><font color="#000080">, </font><font color="#800000">$01</font><font color="#000080">, </font><font color="#800000">$02</font><font color="#000080">, </font><font color="#800000">$03</font><font color="#000080">,</font><font color="#800000">$10</font><font color="#000080">, </font><font color="#800000">$11</font><font color="#000080">, </font><font color="#800000">$12</font><font color="#000080">, </font><font color="#800000">$13</font><font color="#000080">);
  </font>MapSecTable  <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">7</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte <font color="#000080">= (</font><font color="#800000">$00</font><font color="#000080">, </font><font color="#800000">$04</font><font color="#000080">, </font><font color="#800000">$08</font><font color="#000080">, </font><font color="#800000">$0C</font><font color="#000080">,</font><font color="#800000">$20</font><font color="#000080">, </font><font color="#800000">$24</font><font color="#000080">, </font><font color="#800000">$28</font><font color="#000080">, </font><font color="#800000">$2C</font><font color="#000080">);
</font><font color="#FF0000"><b>ASM
        </b></font><font color="#FF00FF">MOV     AL, primary
        LEA     BX, MapPrimTable
        XLAT
        MOV     AH, AL
        MOV     AL, secondary
        LEA     BX, MapSecTable
        XLAT
        ADD     AL, AH
        MOV     BL, AL
</font><font color="#008000"><i>{ Set block specifier }
        </i></font><font color="#FF00FF">MOV     AX,$1103
        INT     $10
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


 * </font>OLX <font color="#800000">2.2 </font><font color="#000080">* </font><font color="#FF0000"><b>If </b></font>at first you succeed<font color="#000080">, </font>hide your astonishment<font color="#000080">...

--- </font>Maximus <font color="#800000">2.01</font>wb
 <font color="#000080">* </font>Origin<font color="#000080">: &gt;&gt;&gt; </font>Sun Mountain BBS <font color="#000080">&lt;&lt;&lt; (</font><font color="#800000">303</font><font color="#000080">)-</font><font color="#800000">665</font><font color="#000080">-</font><font color="#800000">6922 </font><font color="#000080">(</font><font color="#800000">1</font><font color="#000080">:</font><font color="#800000">104</font><font color="#000080">/</font><font color="#800000">123</font><font color="#000080">)
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0052.PAS">Original</a><b>]</b></p></body>
</html>
