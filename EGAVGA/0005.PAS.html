<html>
<head><title> "Drawing a Circle" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0005.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{ SC&gt; I had some free time the other day so I decided to play around
 SC&gt; With some Graphics.  I am using TRIG Functions to draw a
 SC&gt; circle.  But it's not too fast.  I understand that using
 SC&gt; Shift operators to multiply and divide will be faster.  But
 SC&gt; am not sure how to do numbers which are not powers of 2.
 SC&gt; Here is the code; how else can we make it faster?

Using shifts to multiply things is one way to speed it up but that's difficult
For generic multiplies and only applies to Integer multiplies.  There's an even
faster way to draw a circle if you are interested. &lt;YES he says&gt;  OK, first it
is called the &quot;Bresenham Circle Algorithm&quot; and Uses symmetry about the eight
octants to plot the circle and Uses only Integer arithmetic throughout.  Here
is the code.
}
</i></font><font color="#FF0000"><b>Uses
  </b></font>Graph<font color="#000080">, </font>KASUtils<font color="#000080">;

</font><font color="#FF0000"><b>Var
  </b></font>Gd<font color="#000080">, </font>Gm <font color="#000080">: </font>Integer<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>DrawCircle<font color="#000080">(</font>X<font color="#000080">, </font>Y<font color="#000080">, </font>Radius<font color="#000080">:</font>Word<font color="#000080">; </font>Color<font color="#000080">:</font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Var
   </b></font>Xs<font color="#000080">, </font>Ys    <font color="#000080">: </font>Integer<font color="#000080">;
   </font>Da<font color="#000080">, </font>Db<font color="#000080">, </font>S <font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
     if </b></font><font color="#000080">(</font>Radius <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
          </b></font>Exit<font color="#000080">;

     </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>Radius <font color="#000080">= </font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>then
     begin
          </b></font>PutPixel<font color="#000080">(</font>X<font color="#000080">, </font>Y<font color="#000080">, </font>Color<font color="#000080">);
          </font>Exit<font color="#000080">;
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

     </font>Xs <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
     </font>Ys <font color="#000080">:= </font>Radius<font color="#000080">;

     </font><font color="#FF0000"><b>Repeat
           </b></font>Da <font color="#000080">:= </font>Sqr<font color="#000080">(</font>Xs<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">) + </font>Sqr<font color="#000080">(</font>Ys<font color="#000080">) - </font>Sqr<font color="#000080">(</font>Radius<font color="#000080">);
           </font>Db <font color="#000080">:= </font>Sqr<font color="#000080">(</font>Xs<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">) + </font>Sqr<font color="#000080">(</font>Ys <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">) - </font>Sqr<font color="#000080">(</font>Radius<font color="#000080">);
           </font>S  <font color="#000080">:= </font>Da <font color="#000080">+ </font>Db<font color="#000080">;

           </font>Xs <font color="#000080">:= </font>Xs<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">;
           </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>S <font color="#000080">&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
                </b></font>Ys <font color="#000080">:= </font>Ys <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;

           </font>PutPixel<font color="#000080">(</font>X<font color="#000080">+</font>Xs<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">, </font>Y<font color="#000080">-</font>Ys<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">, </font>Color<font color="#000080">);
           </font>PutPixel<font color="#000080">(</font>X<font color="#000080">-</font>Xs<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">, </font>Y<font color="#000080">-</font>Ys<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">, </font>Color<font color="#000080">);
           </font>PutPixel<font color="#000080">(</font>X<font color="#000080">+</font>Ys<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">, </font>Y<font color="#000080">-</font>Xs<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">, </font>Color<font color="#000080">);
           </font>PutPixel<font color="#000080">(</font>X<font color="#000080">-</font>Ys<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">, </font>Y<font color="#000080">-</font>Xs<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">, </font>Color<font color="#000080">);
           </font>PutPixel<font color="#000080">(</font>X<font color="#000080">+</font>Xs<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">, </font>Y<font color="#000080">+</font>Ys<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">, </font>Color<font color="#000080">);
           </font>PutPixel<font color="#000080">(</font>X<font color="#000080">-</font>Xs<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">, </font>Y<font color="#000080">+</font>Ys<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">, </font>Color<font color="#000080">);
           </font>PutPixel<font color="#000080">(</font>X<font color="#000080">+</font>Ys<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">, </font>Y<font color="#000080">+</font>Xs<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">, </font>Color<font color="#000080">);
           </font>PutPixel<font color="#000080">(</font>X<font color="#000080">-</font>Ys<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">, </font>Y<font color="#000080">+</font>Xs<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">, </font>Color<font color="#000080">);
     </font><font color="#FF0000"><b>Until </b></font><font color="#000080">(</font>Xs <font color="#000080">&gt;= </font>Ys<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{It Uses Sqr at the moment, but you could code it to use X * X instead of Sqr(X)
if you like since it will probably speed it up.  I haven't had time to optimise
it yet since it will ultimately be in Assembler.

Hope this comes in handy For what you're doing. :-) Oh BTW it assumes you have
a PlotDot routine which takes the obvious parameters.
}

</i></font><font color="#FF0000"><b>begin
  </b></font>EGAVGA_Exe<font color="#000080">;
  </font>gd <font color="#000080">:= </font>detect<font color="#000080">;
  </font>InitGraph<font color="#000080">(</font>gd<font color="#000080">,</font>gm<font color="#000080">,</font><font color="#800000">''</font><font color="#000080">);
  </font>clearviewport<font color="#000080">;

  </font>drawcircle<font color="#000080">(</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">150</font><font color="#000080">,</font>yellow<font color="#000080">);
  </font>readln<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0005.PAS">Original</a><b>]</b></p></body>
</html>
