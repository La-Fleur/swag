<html>
<head><title> "ROM Font in $13" by GREG ESTABROOKS</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0103.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
 The following does not use assembly but it should do what you want,
 and should give you an idea about how its done incase you want to
 translate it to BASM later. It uses the ROM text font information
 for its screen writes.

{***********************************************************************}
</i></font><font color="#FF0000"><b>PROGRAM </b></font>RomFontDemo<font color="#000080">;            </font><font color="#008000"><i>{ May 08/94, Greg Estabrooks.           }
</i></font><font color="#FF0000"><b>VAR
   </b></font>Colors <font color="#000080">:</font>BYTE<font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>SetVidMode<font color="#000080">( </font>Mode <font color="#000080">:</font>BYTE <font color="#000080">); </font><font color="#FF0000"><b>ASSEMBLER</b></font><font color="#000080">;
                </font><font color="#008000"><i>{  Routine to set video mode                            }
</i></font><font color="#FF0000"><b>ASM
  </b></font><font color="#FF00FF">Mov AH,00                     </font><font color="#008000"><i>{  Function to set mode                 }
  </i></font><font color="#FF00FF">Mov AL,Mode                   </font><font color="#008000"><i>{  Mode to change to                    }
  </i></font><font color="#FF00FF">Int $10                       </font><font color="#008000"><i>{  Call dos                             }
</i></font><font color="#FF0000"><b>END</b></font><font color="#000080">;</font><font color="#008000"><i>{SetVidMode}

</i></font><font color="#FF0000"><b>PROCEDURE </b></font>PutPixel<font color="#000080">( </font>X<font color="#000080">,</font>Y <font color="#000080">:</font>WORD<font color="#000080">; </font>Color <font color="#000080">:</font>BYTE <font color="#000080">);
</font><font color="#FF0000"><b>BEGIN
  </b></font>Mem<font color="#000080">[</font><font color="#800000">$A000</font><font color="#000080">:(</font><font color="#800000">320</font><font color="#000080">*</font>Y<font color="#000080">)+</font>X<font color="#000080">]:= </font>Color<font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>WriteXY<font color="#000080">( </font>X<font color="#000080">,</font>Y <font color="#000080">:</font>WORD<font color="#000080">; </font>Color <font color="#000080">:</font>BYTE<font color="#000080">; </font>Str <font color="#000080">:</font><font color="#FF0000"><b>STRING </b></font><font color="#000080">);
</font><font color="#FF0000"><b>VAR
   </b></font>OldX <font color="#000080">:</font>WORD<font color="#000080">;                  </font><font color="#008000"><i>{ Holds Original Column.                }
   </i></font>OldY <font color="#000080">:</font>WORD<font color="#000080">;
   </font>StrPos <font color="#000080">:</font>BYTE<font color="#000080">;                </font><font color="#008000"><i>{ Character pos in string to write.     }
   </i></font>FontChr<font color="#000080">:</font>BYTE<font color="#000080">;                </font><font color="#008000"><i>{ ROM font info.                        }
   </i></font>FontPos<font color="#000080">:</font>BYTE<font color="#000080">;
   </font>BitPos <font color="#000080">:</font>BYTE<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>OldY <font color="#000080">:= </font>Y<font color="#000080">;                    </font><font color="#008000"><i>{ Save Starting Row.                    }
  </i></font><font color="#FF0000"><b>FOR </b></font>StrPos <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>TO </b></font>Length<font color="#000080">(</font>Str<font color="#000080">) </font><font color="#FF0000"><b>DO
  BEGIN                         </b></font><font color="#008000"><i>{ Loop through every character.         }
   </i></font>OldX <font color="#000080">:= </font>X<font color="#000080">;                   </font><font color="#008000"><i>{ Save Current Column.                  }
   </i></font>Y <font color="#000080">:= </font>OldY<font color="#000080">;                   </font><font color="#008000"><i>{ Restore starting row.                 }
   </i></font><font color="#FF0000"><b>FOR </b></font>FontPos <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>TO </b></font><font color="#800000">7 </font><font color="#FF0000"><b>DO
   BEGIN                        </b></font><font color="#008000"><i>{ Scroll through all 8 BYTES of font.   }
    </i></font>FontChr <font color="#000080">:= </font>MEM<font color="#000080">[</font><font color="#800000">$FFA6</font><font color="#000080">:</font><font color="#800000">$E</font><font color="#000080">+(</font>ORD<font color="#000080">(</font>Str<font color="#000080">[</font>StrPos<font color="#000080">]) </font><font color="#FF0000"><b>SHL </b></font><font color="#800000">3</font><font color="#000080">) + </font>FontPos<font color="#000080">];
    </font><font color="#FF0000"><b>FOR </b></font>BitPos <font color="#000080">:= </font><font color="#800000">7 </font><font color="#FF0000"><b>DOWNTO </b></font><font color="#800000">0 </font><font color="#FF0000"><b>DO
    BEGIN                       </b></font><font color="#008000"><i>{ Scroll through all 8 BITS of each BYTE.}
     </i></font><font color="#FF0000"><b>IF </b></font><font color="#000080">(</font>FontChr <font color="#FF0000"><b>AND </b></font><font color="#000080">(</font><font color="#800000">1 </font><font color="#FF0000"><b>SHL </b></font>BitPos<font color="#000080">)) &lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>THEN
      </b></font>PutPixel<font color="#000080">(</font>X<font color="#000080">,</font>Y<font color="#000080">,</font>Color<font color="#000080">);      </font><font color="#008000"><i>{ IF bit is set then draw pixel.        }
     </i></font>INC<font color="#000080">(</font>X<font color="#000080">);                    </font><font color="#008000"><i>{ point to next column.                 }
    </i></font><font color="#FF0000"><b>END</b></font><font color="#000080">;
    </font>INC<font color="#000080">(</font>Y<font color="#000080">);                     </font><font color="#008000"><i>{ point to next row.                    }
    </i></font>X <font color="#000080">:= </font>OldX<font color="#000080">;                  </font><font color="#008000"><i>{ Restore old column for next line.     }
   </i></font><font color="#FF0000"><b>END</b></font><font color="#000080">;
   </font>X <font color="#000080">:= </font>X <font color="#000080">+ </font><font color="#800000">8</font><font color="#000080">;                  </font><font color="#008000"><i>{ Move 9 columns ahead.                 }
  </i></font><font color="#FF0000"><b>END</b></font><font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;</font><font color="#008000"><i>{WriteXY}

</i></font><font color="#FF0000"><b>BEGIN
  </b></font>SetVidMode<font color="#000080">(</font><font color="#800000">$13</font><font color="#000080">);
  </font><font color="#FF0000"><b>FOR </b></font>Colors <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>TO </b></font><font color="#800000">19 </font><font color="#FF0000"><b>DO
   </b></font>WriteXY<font color="#000080">(</font>Colors<font color="#000080">*</font><font color="#800000">10</font><font color="#000080">,</font>Colors<font color="#000080">*</font><font color="#800000">10</font><font color="#000080">,</font>Colors<font color="#000080">,</font><font color="#800000">'Greg Estabrooks'</font><font color="#000080">);
  </font>Readln<font color="#000080">;
  </font>SetVidMode<font color="#000080">(</font><font color="#800000">$03</font><font color="#000080">);
</font><font color="#FF0000"><b>END</b></font><font color="#000080">.
</font><font color="#008000"><i>{***********************************************************************}
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0103.PAS">Original</a><b>]</b></p></body>
</html>
