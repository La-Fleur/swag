<html>
<head><title> "BASM Display String with font" by J.A.M. DE GREEF</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0262.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#008000"><i>{$G+}
</i></font><font color="#FF0000"><b>const
  </b></font>screen<font color="#000080">=</font>ptr<font color="#000080">(</font><font color="#800000">$A000</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
  </font>font<font color="#000080">=</font>ptr<font color="#000080">(</font><font color="#800000">$F0A0</font><font color="#000080">,</font><font color="#800000">$F06E</font><font color="#000080">);
 
</font><font color="#FF0000"><b>Function </b></font>ReadKey<font color="#000080">:</font>Char<font color="#000080">;</font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm
  </b></font><font color="#FF00FF">mov ah,00h;       int 16h
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
 
</font><font color="#FF0000"><b>Procedure </b></font>DispStr<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">:</font>Word<font color="#000080">;</font>color<font color="#000080">:</font>Byte<font color="#000080">;</font>page<font color="#000080">,</font>font<font color="#000080">:</font>Pointer<font color="#000080">;</font>s<font color="#000080">:</font><font color="#FF0000"><b>String</b></font><font color="#000080">);</font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm
  </b></font><font color="#FF00FF">les di,s;         mov al,es:[di];    push ax;           push es;
  push di;          @begin:;           les di,s;          mov al,es:[di];
  cmp al,0;         je @exit;          dec al;            mov es:[di],al;
  inc al;           xor ah,ah;         mov dx,ax;         add di,ax;
  mov al,es:[di];   shl ax,3;          les di,font;       add di,ax;
  mov bx,di;        mov cx,es;         les di,page;       mov ax,y;
  mov dh,al;        shl ax,6;          add ah,dh;         xor dh,dh;
  shl dx,3;         add ax,dx;         add ax,x;          add di,ax;
  mov ah,color;     xchg di,bx;        mov si,es;         mov es,cx;
  mov cx,si;        mov dx,0880h;      @loop1:;           mov al,es:[di];
  xchg di,bx;       mov si,es;         mov es,cx;         mov cx,si;
  @loop2:;          cmp al,dl;         jb @loop3;         sub al,dl;
  mov es:[di],ah;   @loop3:;           inc di;            cmp dl,0;
  shr dl,1;         jne @loop2;        mov dl,80h;        add di,312;
  xchg di,bx;       mov si,es;         mov es,cx;         mov cx,si;
  inc di;           dec dh;            cmp dh,0;          jne @loop1;
  jmp @begin;       @exit:;            pop di;            pop es;
  pop ax;           mov es:[di],al;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
 
</font><font color="#FF0000"><b>begin
  asm</b></font><font color="#FF00FF">; mov ax,13h; int 10h; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>dispstr<font color="#000080">(</font><font color="#800000">10</font><font color="#000080">,</font><font color="#800000">10</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font>screen<font color="#000080">,</font>font<font color="#000080">,</font><font color="#800000">'does it work?'</font><font color="#000080">);
  </font>readkey<font color="#000080">;
  </font><font color="#FF0000"><b>asm</b></font><font color="#FF00FF">; mov ax,03h; int 10h; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0262.PAS">Original</a><b>]</b></p></body>
</html>
