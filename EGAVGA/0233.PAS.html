<html>
<head><title> "Mode 12h Unit" by WIL BARATH</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0233.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>Unit </b></font>tgr12<font color="#000080">; </font><font color="#008000"><i>{tiny Graph 12- Oct 4/1994 by Wil Barath}
 { (C) 1994, persission granted for free use in freeware programs, and
   licensed for use in any other program that gives me visible credit }
</i></font><font color="#FF0000"><b>Interface</b></font><font color="#008000"><i>{} </i></font><font color="#FF0000"><b>Const </b></font>FBold<font color="#000080">=</font><font color="#800000">$01</font><font color="#000080">;</font>FItalic<font color="#000080">=</font><font color="#800000">$02</font><font color="#000080">;</font>FULine<font color="#000080">=</font><font color="#800000">$04</font><font color="#000080">;</font>FShadow<font color="#000080">=</font><font color="#800000">$08</font><font color="#000080">;
  </font>FOLine<font color="#000080">=</font><font color="#800000">$10</font><font color="#000080">;</font>FTiny<font color="#000080">=</font><font color="#800000">$20</font><font color="#000080">;</font>Shadow<font color="#000080">:</font>Byte<font color="#000080">=</font><font color="#800000">$08</font><font color="#000080">;</font>OutLine<font color="#000080">:</font>Byte<font color="#000080">=</font><font color="#800000">$00</font><font color="#000080">;
  </font>FontScaleS<font color="#000080">:</font>Byte<font color="#000080">=</font><font color="#800000">$11</font><font color="#000080">;</font>PageOffset<font color="#000080">:</font>Word<font color="#000080">=</font><font color="#800000">0</font><font color="#000080">;
</font><font color="#FF0000"><b>Type </b></font>pFntArray <font color="#000080">= ^</font>FntArray<font color="#000080">;</font>FntArray <font color="#000080">= </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">1</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
</font><font color="#FF0000"><b>Type </b></font>Fixed<font color="#000080">= </font><font color="#FF0000"><b>Record </b></font>F<font color="#000080">:</font>Word<font color="#000080">;</font>W<font color="#000080">:</font>Integer<font color="#000080">;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Var </b></font>F8x8<font color="#000080">:</font>FntArray <font color="#FF0000"><b>absolute </b></font><font color="#800000">$f000</font><font color="#000080">:</font><font color="#800000">$fa6e</font><font color="#000080">;</font>time<font color="#000080">:</font>Word <font color="#FF0000"><b>Absolute </b></font><font color="#800000">$0040</font><font color="#000080">:</font><font color="#800000">$006c</font><font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>VideoMode<font color="#000080">(</font>mode<font color="#000080">:</font>word<font color="#000080">); </font><font color="#FF0000"><b>procedure </b></font>SetRGB<font color="#000080">(</font>n<font color="#000080">,</font>r<font color="#000080">,</font>g<font color="#000080">,</font>b<font color="#000080">:</font>byte<font color="#000080">);
</font><font color="#FF0000"><b>procedure </b></font>SetStart<font color="#000080">(</font>p<font color="#000080">:</font>word<font color="#000080">);     </font><font color="#FF0000"><b>Function </b></font>AllocMem<font color="#000080">(</font>pages<font color="#000080">:</font>Word<font color="#000080">):</font>Word<font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>FreeMem<font color="#000080">(</font>s<font color="#000080">:</font>Word<font color="#000080">);      </font><font color="#FF0000"><b>Function </b></font>MouseStatus<font color="#000080">:</font>LongInt<font color="#000080">;
</font><font color="#FF0000"><b>Function </b></font>MouseAt<font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>X<font color="#000080">:</font>Word<font color="#000080">;</font><font color="#FF0000"><b>Var </b></font>y<font color="#000080">:</font>Word<font color="#000080">):</font>Word<font color="#000080">;
</font><font color="#FF0000"><b>Function </b></font>Readkey<font color="#000080">:</font>Char<font color="#000080">;          </font><font color="#FF0000"><b>Function </b></font>Keypressed<font color="#000080">:</font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>WaitHBL<font color="#000080">;              </font><font color="#FF0000"><b>Procedure </b></font>WaitVBL<font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>setColor<font color="#000080">(</font>c<font color="#000080">:</font>Word<font color="#000080">);     </font><font color="#FF0000"><b>procedure </b></font>pset<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">:</font>word<font color="#000080">);
</font><font color="#FF0000"><b>procedure </b></font>Vline<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>dy<font color="#000080">:</font>word<font color="#000080">);   </font><font color="#FF0000"><b>procedure </b></font>Hline<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>d<font color="#000080">:</font>Word<font color="#000080">);
</font><font color="#FF0000"><b>Procedure </b></font>Line<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">:</font>Integer<font color="#000080">);
</font><font color="#FF0000"><b>procedure </b></font>circle<font color="#000080">(</font>cx<font color="#000080">,</font>cy<font color="#000080">,</font>r<font color="#000080">:</font>Integer<font color="#000080">);
</font><font color="#FF0000"><b>procedure </b></font>Disc<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>r<font color="#000080">:</font>Integer<font color="#000080">);
</font><font color="#FF0000"><b>procedure </b></font>clrgraph<font color="#000080">(</font>c<font color="#000080">:</font>Word<font color="#000080">);
</font><font color="#FF0000"><b>Procedure </b></font>OutTextXY<font color="#000080">(</font>s<font color="#000080">:</font><font color="#FF0000"><b>String</b></font><font color="#000080">;</font>x<font color="#000080">,</font>y<font color="#000080">:</font>Integer<font color="#000080">;</font>C<font color="#000080">:</font>Byte<font color="#000080">;</font>Style<font color="#000080">:</font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Function </b></font>SQRoot<font color="#000080">(</font>n<font color="#000080">:</font>LongInt<font color="#000080">):</font>Word<font color="#000080">;</font><font color="#FF0000"><b>Procedure </b></font>CharSet_5P<font color="#000080">;
</font><font color="#FF0000"><b>Implementation</b></font><font color="#008000"><i>{}
</i></font><font color="#FF0000"><b>Procedure </b></font>CharSet_5P<font color="#000080">;</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;</font><font color="#FF0000"><b>asm
</b></font><font color="#FF00FF">db 00100000b,00100000b,00100000b,00000000b,00100000b</font><font color="#008000"><i>{!}
</i></font><font color="#FF00FF">db 01010000b,01010000b,00000000b,00000000b,00000000b</font><font color="#008000"><i>{&quot;}
</i></font><font color="#FF00FF">db 01010000b,11111000b,01010000b,11111000b,01010000b</font><font color="#008000"><i>{#}
</i></font><font color="#FF00FF">db 00100000b,01110000b,01100000b,00110000b,01110000b</font><font color="#008000"><i>{etc.}
</i></font><font color="#FF00FF">db 11001000b,11010000b,00100000b,01011000b,10011000b
db 01100000b,01101000b,01110000b,10010000b,01101000b
db 00100000b,00100000b,00000000b,00000000b,00000000b
db 00010000b,00100000b,00100000b,00100000b,00010000b
db 01000000b,00100000b,00100000b,00100000b,01000000b
db 10101000b,01110000b,00100000b,01110000b,10101000b
db 00100000b,00100000b,11111000b,00100000b,00100000b
db 00000000b,00000000b,00000000b,00100000b,01000000b
db 00000000b,00000000b,11111000b,00000000b,00000000b
db 00000000b,00000000b,00000000b,00000000b,00100000b
db 00001000b,00010000b,00100000b,01000000b,10000000b
db 01110000b,10001000b,10001000b,10001000b,01110000b
db 00010000b,00110000b,00010000b,00010000b,00111000b
db 01110000b,00001000b,01110000b,10000000b,11111000b
db 11110000b,00001000b,01110000b,00001000b,11110000b
db 00010000b,10010000b,11110000b,00010000b,00010000b
db 11110000b,10000000b,11110000b,00001000b,11110000b
db 01110000b,10000000b,11110000b,10001000b,01110000b
db 01111000b,00001000b,00010000b,00100000b,00100000b
db 01110000b,10001000b,01110000b,10001000b,01110000b
db 01110000b,10001000b,01111000b,00001000b,01110000b
db 00000000b,00100000b,00000000b,00100000b,00000000b
db 00000000b,00100000b,00000000b,00100000b,01000000b
db 00010000b,00100000b,01000000b,00100000b,00010000b
db 00000000b,11111000b,00000000b,11111000b,00000000b
db 01000000b,00100000b,00010000b,00100000b,01000000b
db 01110000b,00001000b,00110000b,00000000b,00100000b
db 01110000b,10111000b,10111000b,10000000b,01110000b
db 01110000b,10001000b,11111000b,10001000b,10001000b</font><font color="#008000"><i>{A}
</i></font><font color="#FF00FF">db 11110000b,10001000b,11110000b,10001000b,11110000b</font><font color="#008000"><i>{B}
</i></font><font color="#FF00FF">db 01110000b,10000000b,10000000b,10000000b,01110000b</font><font color="#008000"><i>{C}
</i></font><font color="#FF00FF">db 11110000b,10001000b,10001000b,10001000b,11110000b</font><font color="#008000"><i>{etc.}
</i></font><font color="#FF00FF">db 11111000b,10000000b,11110000b,10000000b,11111000b
db 11111000b,10000000b,11110000b,10000000b,10000000b
db 01111000b,10000000b,10111000b,10001000b,01111000b
db 10001000b,10001000b,11111000b,10001000b,10001000b
db 11111000b,00100000b,00100000b,00100000b,11111000b
db 01111000b,00010000b,00010000b,10010000b,01100000b
db 10001000b,10010000b,11100000b,10010000b,10001000b
db 10000000b,10000000b,10000000b,10000000b,11111000b
db 10001000b,11011000b,10101000b,10001000b,10001000b
db 10001000b,11001000b,10101000b,10011000b,10001000b
db 01110000b,10001000b,10001000b,10001000b,01110000b
db 11110000b,10001000b,11110000b,10000000b,10000000b
db 01110000b,10001000b,10101000b,10011000b,01111000b
db 11110000b,10001000b,11110000b,10010000b,10001000b
db 01110000b,10000000b,01110000b,00001000b,01110000b
db 11111000b,00100000b,00100000b,00100000b,00100000b
db 10001000b,10001000b,10001000b,10001000b,01110000b
db 10001000b,10001000b,01010000b,01010000b,00100000b
db 10001000b,10001000b,10101000b,11011000b,10001000b
db 10001000b,01010000b,00100000b,01010000b,10001000b
db 10001000b,10001000b,01111000b,00001000b,01110000b
db 11111000b,00010000b,00100000b,01000000b,11111000b
db 01110000b,01000000b,01000000b,01000000b,01110000b
db 10000000b,01000000b,00100000b,00010000b,00001000b
db 01110000b,00010000b,00010000b,00010000b,01110000b
db 00100000b,01010000b,00000000b,00000000b,00000000b
db 00000000b,00000000b,00000000b,00000000b,11111100b;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>VideoMode<font color="#000080">(</font>mode<font color="#000080">:</font>word<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;</font><font color="#FF0000"><b>Asm </b></font><font color="#FF00FF">Mov ax,mode;Int 10h;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>SetRGB<font color="#000080">(</font>n<font color="#000080">,</font>r<font color="#000080">,</font>g<font color="#000080">,</font>b<font color="#000080">:</font>byte<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;</font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">Mov dx,03c8h;Mov al,n;
Out dx,al;Inc dx;Mov al,r;Out dx,al;Mov al,g;Out dx,al;Mov al,b;Out dx,al;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>SetStart<font color="#000080">(</font>p<font color="#000080">:</font>word<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;</font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">Mov dx,$3d4;Mov bx,p;Mov al,$c;
Mov ah,bh;Out dx,ax;Inc al;Mov ah,bl;Out dx,ax;Mov PageOffset,bx;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Function </b></font>AllocMem<font color="#000080">(</font>pages<font color="#000080">:</font>Word<font color="#000080">):</font>Word<font color="#000080">;</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;</font><font color="#008000"><i>{allocates pages*16 bytes}
</i></font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">mov ah,$48;mov bx,pages;int $21;jnc @ok;xor ax,ax;@ok:</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>FreeMem<font color="#000080">(</font>s<font color="#000080">:</font>Word<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;</font><font color="#008000"><i>{frees mem at Ptr(s:$00)}
</i></font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">mov ah,$49;mov es,s;int $21; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Function </b></font>MouseStatus<font color="#000080">:</font>LongInt<font color="#000080">;</font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;</font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">Xor ax,ax;Int 33h;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Function </b></font>MouseAt<font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>X<font color="#000080">:</font>Word<font color="#000080">;</font><font color="#FF0000"><b>Var </b></font>y<font color="#000080">:</font>Word<font color="#000080">):</font>Word<font color="#000080">;</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;</font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">Mov ax,03h;
Int 33h;Les di,x;Mov ES:[DI],cx;Les di,y;Mov ES:[DI],dx;Mov ax,bx;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Function </b></font>Readkey<font color="#000080">:</font>Char<font color="#000080">;</font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;</font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">Xor ax,ax;Int 16h;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Function </b></font>Keypressed<font color="#000080">:</font>Boolean<font color="#000080">;</font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;</font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">Mov ax,0100h;int 16h;Jnz @1;
Xor ax,ax;@1:</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>WaitHBL<font color="#000080">;</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;</font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">Mov dx,03dah;@1:In al,dx;test al,01h;
Jnz @1;@2:In al,dx;test al,01h;Jz @2;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>WaitVBL<font color="#000080">;</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;</font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">Mov dx,03dah;@1:In al,dx;test al,08h;
Jz @1;@2:In al,dx;test al,08h;Jnz @2;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>SetColor<font color="#000080">(</font>c<font color="#000080">:</font>Word<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;</font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">Mov dx,$3ce;Xor al,al;Mov ah,c.byte;
And ah,$0f;Out dx,ax;Mov ax,$0f01;Out dx,ax;Mov al,$08;Out dx,al;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>PSET<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">:</font>Word<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;</font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">Mov es,SegA000;Mov bx,x;Mov cx,bx;
Mov ax,80;Mul Y;SHR bx,3;Add bx,ax;And cl,$07;Mov al,$80;Shr al,cl;
Mov dx,$3cf;Out dx,al;Mov ah,$ff;Add bx,pageoffset;Or es:[bx],ah;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>Vline<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>dy<font color="#000080">:</font>Word<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;</font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">Push x;Push y;Call PSet;
Mov cx,dy;Mov di,80;@Loop:Add bx,di;Or es:[bx],ah;Loop @Loop;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>Hline<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>d<font color="#000080">:</font>Word<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">@loop:Push x;Push y;Call Pset;Inc x;Dec d;Jnz @loop;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>Line<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">:</font>Integer<font color="#000080">);
</font><font color="#FF0000"><b>Var </b></font>dx<font color="#000080">,</font>dy<font color="#000080">,</font>px<font color="#000080">,</font>py<font color="#000080">:</font>LongInt<font color="#000080">;
</font><font color="#FF0000"><b>Begin  </b></font>dx<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;</font>dy<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;</font>px<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;</font>py<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font>Fixed<font color="#000080">(</font>px<font color="#000080">).</font>W<font color="#000080">:=</font>x1<font color="#000080">;</font>Fixed<font color="#000080">(</font>dx<font color="#000080">).</font>W<font color="#000080">:=(</font>x2<font color="#000080">-</font>x1<font color="#000080">);
  </font>Fixed<font color="#000080">(</font>py<font color="#000080">).</font>W<font color="#000080">:=</font>y1<font color="#000080">;</font>Fixed<font color="#000080">(</font>dy<font color="#000080">).</font>W<font color="#000080">:=(</font>y2<font color="#000080">-</font>y1<font color="#000080">);
  </font>x1<font color="#000080">:=</font>abs<font color="#000080">(</font>Fixed<font color="#000080">(</font>dx<font color="#000080">).</font>w<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>abs<font color="#000080">(</font>Fixed<font color="#000080">(</font>dy<font color="#000080">).</font>w<font color="#000080">)&gt;</font>x1 <font color="#FF0000"><b>then </b></font>x1<font color="#000080">:=</font>abs<font color="#000080">(</font>Fixed<font color="#000080">(</font>dy<font color="#000080">).</font>w<font color="#000080">);
  </font><font color="#FF0000"><b>If </b></font>x1<font color="#000080">=</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>PSet<font color="#000080">(</font>x2<font color="#000080">,</font>y2<font color="#000080">) </font><font color="#FF0000"><b>else
  Begin </b></font>dx<font color="#000080">:=</font>dx <font color="#FF0000"><b>div </b></font>x1<font color="#000080">;</font>dy<font color="#000080">:=</font>dy <font color="#FF0000"><b>div </b></font>x1<font color="#000080">;
    </font><font color="#FF0000"><b>Repeat </b></font>PSet<font color="#000080">(</font>Fixed<font color="#000080">(</font>px<font color="#000080">).</font>W<font color="#000080">,</font>Fixed<font color="#000080">(</font>py<font color="#000080">).</font>W<font color="#000080">);
      </font>Inc<font color="#000080">(</font>px<font color="#000080">,</font>dx<font color="#000080">);</font>Inc<font color="#000080">(</font>py<font color="#000080">,</font>dy<font color="#000080">);</font>Dec<font color="#000080">(</font>x1<font color="#000080">);</font><font color="#FF0000"><b>Until </b></font>x1<font color="#000080">=</font><font color="#800000">0</font><font color="#000080">;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>clrgraph<font color="#000080">(</font>c<font color="#000080">:</font>Word<font color="#000080">);</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;</font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">Push C;Call SetColor;Inc dx;
Mov al,-1;out dx,al;mov es,sega000;Xor di,di;Mov ax,-1;mov cx,80*800/2;
rep stosw;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Function </b></font>SQRoot<font color="#000080">(</font>N<font color="#000080">:</font>LongInt<font color="#000080">):</font>Word<font color="#000080">;</font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">Mov si,-1;Mov cx,n+2.word;Test ch,$80;JNZ @Error;Mov bx,n.word;
Mov di,32768;Xor si,si;@DoSqrt:Mov ax,si;Or ax,di;Mul ax;Cmp dx,cx;
Ja @NoSet;Jnz @Set;Cmp ax,bx;Ja @Noset;@Set:Or si,di;@Noset:Shr di,1;
Jnz @DoSqrt;@Error:Mov ax,si;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>Circle<font color="#000080">(</font>cx<font color="#000080">,</font>cy<font color="#000080">,</font>r<font color="#000080">:</font>Integer<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>x<font color="#000080">,</font>y<font color="#000080">,</font>rr<font color="#000080">,</font>xx<font color="#000080">,</font>yy<font color="#000080">:</font>longint<font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>Cursors<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>Pset<font color="#000080">(</font>cx<font color="#000080">+</font>x<font color="#000080">,</font>cy<font color="#000080">+</font>y<font color="#000080">);</font>Pset<font color="#000080">(</font>cx<font color="#000080">-</font>x<font color="#000080">,</font>cy<font color="#000080">+</font>y<font color="#000080">);</font>Pset<font color="#000080">(</font>cx<font color="#000080">+</font>x<font color="#000080">,</font>cy<font color="#000080">-</font>y<font color="#000080">);</font>Pset<font color="#000080">(</font>cx<font color="#000080">-</font>x<font color="#000080">,</font>cy<font color="#000080">-</font>y<font color="#000080">);
  </font>Pset<font color="#000080">(</font>cx<font color="#000080">+</font>y<font color="#000080">,</font>cy<font color="#000080">+</font>x<font color="#000080">);</font>Pset<font color="#000080">(</font>cx<font color="#000080">-</font>y<font color="#000080">,</font>cy<font color="#000080">+</font>x<font color="#000080">);</font>Pset<font color="#000080">(</font>cx<font color="#000080">+</font>y<font color="#000080">,</font>cy<font color="#000080">-</font>x<font color="#000080">);</font>Pset<font color="#000080">(</font>cx<font color="#000080">-</font>y<font color="#000080">,</font>cy<font color="#000080">-</font>x<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>x<font color="#000080">:=</font>r<font color="#000080">;</font>y<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;</font>rr<font color="#000080">:=</font>x<font color="#000080">*</font>x<font color="#000080">;</font>xx<font color="#000080">:=</font>rr<font color="#000080">-</font>x<font color="#000080">;</font>yy<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>Repeat
    </b></font>Cursors<font color="#000080">;</font>Inc<font color="#000080">(</font>yy<font color="#000080">,</font>y<font color="#000080">+</font>y<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">);</font>inc<font color="#000080">(</font>y<font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font>xx<font color="#000080">&gt;(</font>rr<font color="#000080">-</font>yy<font color="#000080">) </font><font color="#FF0000"><b>then begin </b></font>Inc<font color="#000080">(</font>xx<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">-</font>x<font color="#000080">-</font>x<font color="#000080">);</font>dec<font color="#000080">(</font>x<font color="#000080">);</font>Cursors<font color="#000080">;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>Until </b></font>x<font color="#000080">&lt;</font>y<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>Disc<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>r<font color="#000080">:</font>Integer<font color="#000080">);</font><font color="#FF0000"><b>Var </b></font>d<font color="#000080">,</font>rr<font color="#000080">,</font>Loop<font color="#000080">:</font>LongInt<font color="#000080">;
</font><font color="#FF0000"><b>Begin </b></font>rr<font color="#000080">:=</font>r<font color="#000080">;</font>rr<font color="#000080">:=</font>rr<font color="#000080">*</font>rr<font color="#000080">;</font><font color="#FF0000"><b>For </b></font>Loop<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>Pred<font color="#000080">(</font>r<font color="#000080">) </font><font color="#FF0000"><b>do Begin
  </b></font>d<font color="#000080">:=</font>sqroot<font color="#000080">(</font>rr<font color="#000080">-</font>Loop<font color="#000080">*</font>Loop<font color="#000080">);</font>vline<font color="#000080">(</font>x<font color="#000080">-</font>Loop<font color="#000080">,</font>y<font color="#000080">-</font>d<font color="#000080">,</font>d<font color="#000080">+</font>d<font color="#000080">);</font>vline<font color="#000080">(</font>x<font color="#000080">+</font>loop<font color="#000080">,</font>y<font color="#000080">-</font>d<font color="#000080">,</font>d<font color="#000080">+</font>d<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>OutTextXY<font color="#000080">(</font>s<font color="#000080">:</font><font color="#FF0000"><b>String</b></font><font color="#000080">;</font>x<font color="#000080">,</font>y<font color="#000080">:</font>Integer<font color="#000080">;</font>C<font color="#000080">:</font>Byte<font color="#000080">;</font>Style<font color="#000080">:</font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Var </b></font>xlp<font color="#000080">,</font>ylp<font color="#000080">,</font>pos<font color="#000080">,</font>size<font color="#000080">,</font>width<font color="#000080">,</font>italic<font color="#000080">,</font>xd<font color="#000080">,</font>yp<font color="#000080">,</font>d<font color="#000080">,</font>p<font color="#000080">,</font>sx<font color="#000080">,</font>sy<font color="#000080">:</font>integer<font color="#000080">;
    </font>f<font color="#000080">:</font>pFntArray<font color="#000080">;</font>us<font color="#000080">:</font><font color="#FF0000"><b>String</b></font><font color="#000080">;
</font><font color="#FF0000"><b>begin If </b></font><font color="#000080">(@</font>PSET<font color="#000080">=</font><font color="#FF0000"><b>Nil</b></font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(@</font>SetColor<font color="#000080">=</font><font color="#FF0000"><b>Nil</b></font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font>exit<font color="#000080">;
  </font>sx<font color="#000080">:=</font>FontScales <font color="#FF0000"><b>AND </b></font><font color="#800000">$f</font><font color="#000080">; </font>sy<font color="#000080">:=</font>FontScales <font color="#FF0000"><b>SHR </b></font><font color="#800000">4</font><font color="#000080">;
  </font><font color="#FF0000"><b>If </b></font>Boolean<font color="#000080">(</font>style <font color="#FF0000"><b>AND </b></font>FShadow<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>OutTextXY<font color="#000080">(</font>s<font color="#000080">,</font>x<font color="#000080">+</font>sx<font color="#000080">,</font>y<font color="#000080">+</font>sy<font color="#000080">,</font>shadow<font color="#000080">,
     </font>style <font color="#FF0000"><b>AND </b></font><font color="#000080">(</font><font color="#FF0000"><b>Not </b></font><font color="#000080">(</font>FShadow<font color="#000080">)));
  </font><font color="#FF0000"><b>If </b></font>Boolean<font color="#000080">(</font>Style <font color="#FF0000"><b>And </b></font>FULine<font color="#000080">) </font><font color="#FF0000"><b>then
  Begin </b></font>FillChar<font color="#000080">(</font>us<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">],</font>Length<font color="#000080">(</font>s<font color="#000080">),</font><font color="#800000">'_'</font><font color="#000080">);</font>us<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]:=</font>s<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">];
    </font>OutTextXY<font color="#000080">(</font>us<font color="#000080">,</font>x<font color="#000080">,</font>y<font color="#000080">+(</font>sy<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">)</font><font color="#FF0000"><b>Div </b></font><font color="#800000">2</font><font color="#000080">,</font>c<font color="#000080">,</font>Style <font color="#FF0000"><b>AND Not</b></font><font color="#000080">(</font>FUline<font color="#000080">+</font>FShadow<font color="#000080">));</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>If </b></font>Boolean<font color="#000080">(</font>style <font color="#FF0000"><b>AND </b></font>FOLine<font color="#000080">) </font><font color="#FF0000"><b>then
  Begin If </b></font>c<font color="#000080">= </font>Shadow <font color="#FF0000"><b>then </b></font>Pos<font color="#000080">:=</font>c <font color="#FF0000"><b>else </b></font>Pos<font color="#000080">:=</font>OutLine<font color="#000080">;
    </font><font color="#FF0000"><b>For </b></font>xlp<font color="#000080">:=-</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">1 </font><font color="#FF0000"><b>do For </b></font>ylp<font color="#000080">:=-</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">1 </font><font color="#FF0000"><b>do
    Begin If </b></font><font color="#000080">(</font>Style <font color="#FF0000"><b>and </b></font>FItalic<font color="#000080">)&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>Italic<font color="#000080">:=(</font>ylp<font color="#000080">*(</font>sy<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">)) </font><font color="#FF0000"><b>Div </b></font><font color="#800000">4
    </font><font color="#FF0000"><b>else </b></font>italic<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
    </font>OutTextXY<font color="#000080">(</font>s<font color="#000080">,</font>x<font color="#000080">+</font>xlp<font color="#000080">*(</font>sx<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">)</font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">-</font>italic<font color="#000080">,</font>y<font color="#000080">+</font>ylp<font color="#000080">*(</font>sy<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">)</font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">,</font>pos<font color="#000080">,
    </font>style <font color="#FF0000"><b>and </b></font><font color="#000080">(</font><font color="#FF0000"><b>Not </b></font><font color="#000080">(</font>FOLine<font color="#000080">+</font>FULine<font color="#000080">+</font>FShadow<font color="#000080">)));
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>If </b></font>Boolean<font color="#000080">(</font>Style <font color="#FF0000"><b>AND </b></font>FBold<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>OutTextXY<font color="#000080">(</font>s<font color="#000080">,</font>x<font color="#000080">+(</font>sx<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">) </font><font color="#FF0000"><b>div </b></font><font color="#800000">3</font><font color="#000080">,</font>y<font color="#000080">,</font>c<font color="#000080">,
     </font>style <font color="#FF0000"><b>AND </b></font><font color="#000080">(</font><font color="#FF0000"><b>Not </b></font><font color="#000080">(</font>FBold<font color="#000080">+</font>FOLine<font color="#000080">+</font>FShadow<font color="#000080">+</font>FULine<font color="#000080">)));
  </font><font color="#FF0000"><b>If </b></font>Boolean<font color="#000080">(</font>Style <font color="#FF0000"><b>AND </b></font>FTiny<font color="#000080">)</font><font color="#FF0000"><b>then Begin </b></font>size<font color="#000080">:=</font><font color="#800000">5</font><font color="#000080">;</font>Width<font color="#000080">:=</font><font color="#800000">6</font><font color="#000080">;</font>f<font color="#000080">:=@</font>CharSet_5p<font color="#000080">;</font><font color="#FF0000"><b>end
  Else Begin </b></font>size<font color="#000080">:=</font><font color="#800000">8</font><font color="#000080">;</font>Width<font color="#000080">:=</font><font color="#800000">8</font><font color="#000080">;</font>f<font color="#000080">:=@</font>F8x8<font color="#000080">;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;</font>SetColor<font color="#000080">(</font>c<font color="#000080">);</font>Width<font color="#000080">:=</font>Width<font color="#000080">*</font>sx<font color="#000080">;
  </font><font color="#FF0000"><b>If </b></font><font color="#000080">(</font>Style <font color="#FF0000"><b>AND </b></font>FItalic<font color="#000080">)&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>Inc <font color="#000080">(</font>x<font color="#000080">,</font>Width <font color="#FF0000"><b>Div </b></font><font color="#800000">4</font><font color="#000080">);
  </font><font color="#FF0000"><b>For </b></font>pos<font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>Byte<font color="#000080">(</font>s<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]) </font><font color="#FF0000"><b>do
    Begin </b></font>p<font color="#000080">:=</font>byte<font color="#000080">(</font>s<font color="#000080">[</font>pos<font color="#000080">]);</font><font color="#FF0000"><b>If </b></font>f<font color="#000080">=@</font>Charset_5p <font color="#FF0000"><b>then Begin
      </b></font>Dec <font color="#000080">(</font>p<font color="#000080">,</font><font color="#800000">33</font><font color="#000080">); </font><font color="#FF0000"><b>if </b></font>p<font color="#000080">&lt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>continue<font color="#000080">;</font><font color="#FF0000"><b>If </b></font>p<font color="#000080">&gt;</font><font color="#800000">62 </font><font color="#FF0000"><b>then </b></font>dec<font color="#000080">(</font>p<font color="#000080">,</font><font color="#800000">32</font><font color="#000080">);
      </font><font color="#FF0000"><b>If </b></font>p<font color="#000080">&gt;</font><font color="#800000">95 </font><font color="#FF0000"><b>then </b></font>continue<font color="#000080">; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;</font><font color="#FF0000"><b>For </b></font>ylp<font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>Pred<font color="#000080">(</font>size<font color="#000080">*</font>SY<font color="#000080">) </font><font color="#FF0000"><b>do
        Begin
          If </b></font><font color="#000080">(</font>Style <font color="#FF0000"><b>and </b></font>FItalic<font color="#000080">)&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>Italic<font color="#000080">:=</font>ylp <font color="#FF0000"><b>SHR </b></font><font color="#800000">1 </font><font color="#FF0000"><b>else </b></font>italic<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
          </font>d<font color="#000080">:=</font>f<font color="#000080">^[</font>p<font color="#000080">*</font>size<font color="#000080">+</font>Ylp <font color="#FF0000"><b>Div </b></font>SY<font color="#000080">];</font>xd<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;</font>yp<font color="#000080">:=</font>y<font color="#000080">+</font>ylp<font color="#000080">;
          </font><font color="#FF0000"><b>for </b></font>xlp<font color="#000080">:=</font>x<font color="#000080">+</font>Pred<font color="#000080">(</font>pos<font color="#000080">)*</font>Width<font color="#000080">-</font>Italic <font color="#FF0000"><b>to </b></font>x<font color="#000080">+</font>pos<font color="#000080">*</font>Width<font color="#000080">-</font>italic <font color="#FF0000"><b>do
            Begin If </b></font>Boolean<font color="#000080">(</font>d <font color="#FF0000"><b>AND </b></font><font color="#800000">$80</font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font>pset<font color="#000080">(</font>xlp<font color="#000080">,</font>yp<font color="#000080">);
              </font>Inc <font color="#000080">(</font>xd<font color="#000080">); </font><font color="#FF0000"><b>if </b></font>xd<font color="#000080">=</font>SX <font color="#FF0000"><b>then Begin </b></font>Inc<font color="#000080">(</font>d<font color="#000080">,</font>d<font color="#000080">);</font>xd<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{OutTextXY}
{for a little demo, uncomment the next section and 'Use' it!}
{Var lp,n,m:longInt;
Begin VideoMode($12);ClrGraph(1);SetColor(3);
  For n:=0 to 639 do For m:=0 to 799 do
  Begin SetColor(m*n Div 40);PSET(n,m);end;
  For lp:=0 to 255 do
  Begin SetColor((lp XOR $3)div 20);Circle(319,400,lp XOR $15);end;
  OutLine:=0;FontScales:=$76;
  OutTextXY('Fonts:',200,80,14,FShadow+fUline+fOLine+FItalic+FBold);
  Shadow:=0;FontScales:=$11; For lp:=0 to 31 do
  OutTextXY('This is a test!',20,30+lp*12,14,lp);
  SetStart(0); FontScales:=$53; For m:=1 to 4 do
    OutTextXY('Wow- 3D!',200+m*3,300+m*2,14,fOLine+fULine);
  FontScales:=$11;
  For m:=0 to 80*5 do Begin WaitVBL;SetStart(m Mod 80);end;
  For n:= 2 to 5 do For lp:=-320 to 320 do
  Begin
    WaitVBL;SetStart((320-ABS(lp))*80);Inc(lp,abs((abs(lp)-320) div 
(n*n)));
  end;
  Lp:=1000;For n:=0 to 1000 do
  Begin Dec(Lp,2);m:=(1000-ABS(Lp))Div 6;
    SetStart(Round(m*(1+Sin(n/14)))*80+Round((m div 8)*cos(n/14)));
    WaitVBL;end;
  ReadKey;VideoMode($03);{end of demo}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0233.PAS">Original</a><b>]</b></p></body>
</html>
