<html>
<head><title> "Split Screen VGA" by MARIO VAN DEN ANCKER</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0252.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
Mario van den Ancker,
Amsterdam, The Netherlands.
E-mail: mario@astro.uva.nl
WWW: http://www.astro.uva.nl/mario/

----8&lt;---------8&lt;---------8&lt;---------8&lt;---------8&lt;---------8&lt;---------8&lt;----
}
</i></font><font color="#FF0000"><b>Program </b></font>SplitScreen<font color="#000080">;

</font><font color="#008000"><i>{ SplitScrn.pas - by Mario van den Ancker
                  E-Mail: mario@astro.uva.nl
                  WWW: http://www.astro.uva.nl/mario/
  Program to demonstrate how to split the screen using the VGA hardware
  in 320x240x256 ModeX. Requires TP 6.0 or higher. Donated to the public
  domain. }

</i></font><font color="#FF0000"><b>Uses </b></font>Crt<font color="#000080">;

</font><font color="#FF0000"><b>type
  </b></font>RGB <font color="#000080">= </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">3</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte<font color="#000080">;
  </font>TPalette <font color="#000080">= </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>RGB<font color="#000080">;

</font><font color="#FF0000"><b>const
  </b></font>MaxX <font color="#000080">= </font><font color="#800000">319</font><font color="#000080">;       </font><font color="#008000"><i>{ dimensions of screen. }
  </i></font>MaxY <font color="#000080">= </font><font color="#800000">239</font><font color="#000080">;

  </font>SEGA000<font color="#000080">: </font>Word <font color="#000080">= </font><font color="#800000">$A000</font><font color="#000080">;

  </font>Palette<font color="#000080">: </font>TPalette <font color="#000080">= (
        (</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">), (</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">63</font><font color="#000080">), (</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">62</font><font color="#000080">), (</font><font color="#800000">3</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">60</font><font color="#000080">), 
        (</font><font color="#800000">5</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">58</font><font color="#000080">), (</font><font color="#800000">7</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">56</font><font color="#000080">), (</font><font color="#800000">9</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">54</font><font color="#000080">), (</font><font color="#800000">10</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">53</font><font color="#000080">), 
        (</font><font color="#800000">11</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">52</font><font color="#000080">), (</font><font color="#800000">13</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">50</font><font color="#000080">), (</font><font color="#800000">14</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">49</font><font color="#000080">), (</font><font color="#800000">15</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">48</font><font color="#000080">), 
        (</font><font color="#800000">16</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">47</font><font color="#000080">), (</font><font color="#800000">17</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">46</font><font color="#000080">), (</font><font color="#800000">18</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">45</font><font color="#000080">), (</font><font color="#800000">19</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">44</font><font color="#000080">), 
        (</font><font color="#800000">19</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">44</font><font color="#000080">), (</font><font color="#800000">20</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">43</font><font color="#000080">), (</font><font color="#800000">21</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">42</font><font color="#000080">), (</font><font color="#800000">21</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">42</font><font color="#000080">), 
        (</font><font color="#800000">22</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">41</font><font color="#000080">), (</font><font color="#800000">23</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">40</font><font color="#000080">), (</font><font color="#800000">23</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">40</font><font color="#000080">), (</font><font color="#800000">24</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">39</font><font color="#000080">), 
        (</font><font color="#800000">25</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">38</font><font color="#000080">), (</font><font color="#800000">25</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">38</font><font color="#000080">), (</font><font color="#800000">26</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">37</font><font color="#000080">), (</font><font color="#800000">26</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">37</font><font color="#000080">), 
        (</font><font color="#800000">27</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">36</font><font color="#000080">), (</font><font color="#800000">27</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">, </font><font color="#800000">36</font><font color="#000080">), (</font><font color="#800000">28</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">, </font><font color="#800000">35</font><font color="#000080">), (</font><font color="#800000">28</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">, </font><font color="#800000">35</font><font color="#000080">), 
        (</font><font color="#800000">29</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">, </font><font color="#800000">34</font><font color="#000080">), (</font><font color="#800000">29</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">, </font><font color="#800000">34</font><font color="#000080">), (</font><font color="#800000">30</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">, </font><font color="#800000">33</font><font color="#000080">), (</font><font color="#800000">30</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">, </font><font color="#800000">33</font><font color="#000080">), 
        (</font><font color="#800000">31</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">, </font><font color="#800000">32</font><font color="#000080">), (</font><font color="#800000">31</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">, </font><font color="#800000">32</font><font color="#000080">), (</font><font color="#800000">32</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">, </font><font color="#800000">31</font><font color="#000080">), (</font><font color="#800000">32</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">, </font><font color="#800000">31</font><font color="#000080">), 
        (</font><font color="#800000">32</font><font color="#000080">, </font><font color="#800000">3</font><font color="#000080">, </font><font color="#800000">31</font><font color="#000080">), (</font><font color="#800000">33</font><font color="#000080">, </font><font color="#800000">3</font><font color="#000080">, </font><font color="#800000">30</font><font color="#000080">), (</font><font color="#800000">33</font><font color="#000080">, </font><font color="#800000">3</font><font color="#000080">, </font><font color="#800000">30</font><font color="#000080">), (</font><font color="#800000">34</font><font color="#000080">, </font><font color="#800000">3</font><font color="#000080">, </font><font color="#800000">29</font><font color="#000080">), 
        (</font><font color="#800000">34</font><font color="#000080">, </font><font color="#800000">3</font><font color="#000080">, </font><font color="#800000">29</font><font color="#000080">), (</font><font color="#800000">34</font><font color="#000080">, </font><font color="#800000">3</font><font color="#000080">, </font><font color="#800000">29</font><font color="#000080">), (</font><font color="#800000">35</font><font color="#000080">, </font><font color="#800000">3</font><font color="#000080">, </font><font color="#800000">28</font><font color="#000080">), (</font><font color="#800000">35</font><font color="#000080">, </font><font color="#800000">3</font><font color="#000080">, </font><font color="#800000">28</font><font color="#000080">), 
        (</font><font color="#800000">35</font><font color="#000080">, </font><font color="#800000">3</font><font color="#000080">, </font><font color="#800000">28</font><font color="#000080">), (</font><font color="#800000">35</font><font color="#000080">, </font><font color="#800000">3</font><font color="#000080">, </font><font color="#800000">28</font><font color="#000080">), (</font><font color="#800000">36</font><font color="#000080">, </font><font color="#800000">3</font><font color="#000080">, </font><font color="#800000">27</font><font color="#000080">), (</font><font color="#800000">36</font><font color="#000080">, </font><font color="#800000">3</font><font color="#000080">, </font><font color="#800000">27</font><font color="#000080">), 
        (</font><font color="#800000">37</font><font color="#000080">, </font><font color="#800000">4</font><font color="#000080">, </font><font color="#800000">26</font><font color="#000080">), (</font><font color="#800000">37</font><font color="#000080">, </font><font color="#800000">4</font><font color="#000080">, </font><font color="#800000">26</font><font color="#000080">), (</font><font color="#800000">37</font><font color="#000080">, </font><font color="#800000">4</font><font color="#000080">, </font><font color="#800000">26</font><font color="#000080">), (</font><font color="#800000">37</font><font color="#000080">, </font><font color="#800000">4</font><font color="#000080">, </font><font color="#800000">26</font><font color="#000080">), 
        (</font><font color="#800000">38</font><font color="#000080">, </font><font color="#800000">4</font><font color="#000080">, </font><font color="#800000">25</font><font color="#000080">), (</font><font color="#800000">38</font><font color="#000080">, </font><font color="#800000">4</font><font color="#000080">, </font><font color="#800000">25</font><font color="#000080">), (</font><font color="#800000">38</font><font color="#000080">, </font><font color="#800000">4</font><font color="#000080">, </font><font color="#800000">25</font><font color="#000080">), (</font><font color="#800000">38</font><font color="#000080">, </font><font color="#800000">4</font><font color="#000080">, </font><font color="#800000">25</font><font color="#000080">), 
        (</font><font color="#800000">39</font><font color="#000080">, </font><font color="#800000">4</font><font color="#000080">, </font><font color="#800000">24</font><font color="#000080">), (</font><font color="#800000">39</font><font color="#000080">, </font><font color="#800000">4</font><font color="#000080">, </font><font color="#800000">24</font><font color="#000080">), (</font><font color="#800000">39</font><font color="#000080">, </font><font color="#800000">4</font><font color="#000080">, </font><font color="#800000">24</font><font color="#000080">), (</font><font color="#800000">40</font><font color="#000080">, </font><font color="#800000">5</font><font color="#000080">, </font><font color="#800000">23</font><font color="#000080">), 
        (</font><font color="#800000">40</font><font color="#000080">, </font><font color="#800000">5</font><font color="#000080">, </font><font color="#800000">23</font><font color="#000080">), (</font><font color="#800000">40</font><font color="#000080">, </font><font color="#800000">5</font><font color="#000080">, </font><font color="#800000">23</font><font color="#000080">), (</font><font color="#800000">40</font><font color="#000080">, </font><font color="#800000">5</font><font color="#000080">, </font><font color="#800000">23</font><font color="#000080">), (</font><font color="#800000">41</font><font color="#000080">, </font><font color="#800000">5</font><font color="#000080">, </font><font color="#800000">22</font><font color="#000080">), 
        (</font><font color="#800000">41</font><font color="#000080">, </font><font color="#800000">5</font><font color="#000080">, </font><font color="#800000">22</font><font color="#000080">), (</font><font color="#800000">41</font><font color="#000080">, </font><font color="#800000">5</font><font color="#000080">, </font><font color="#800000">22</font><font color="#000080">), (</font><font color="#800000">41</font><font color="#000080">, </font><font color="#800000">5</font><font color="#000080">, </font><font color="#800000">22</font><font color="#000080">), (</font><font color="#800000">41</font><font color="#000080">, </font><font color="#800000">5</font><font color="#000080">, </font><font color="#800000">22</font><font color="#000080">), 
        (</font><font color="#800000">42</font><font color="#000080">, </font><font color="#800000">5</font><font color="#000080">, </font><font color="#800000">21</font><font color="#000080">), (</font><font color="#800000">42</font><font color="#000080">, </font><font color="#800000">6</font><font color="#000080">, </font><font color="#800000">21</font><font color="#000080">), (</font><font color="#800000">42</font><font color="#000080">, </font><font color="#800000">6</font><font color="#000080">, </font><font color="#800000">21</font><font color="#000080">), (</font><font color="#800000">42</font><font color="#000080">, </font><font color="#800000">6</font><font color="#000080">, </font><font color="#800000">21</font><font color="#000080">), 
        (</font><font color="#800000">43</font><font color="#000080">, </font><font color="#800000">6</font><font color="#000080">, </font><font color="#800000">20</font><font color="#000080">), (</font><font color="#800000">43</font><font color="#000080">, </font><font color="#800000">6</font><font color="#000080">, </font><font color="#800000">20</font><font color="#000080">), (</font><font color="#800000">43</font><font color="#000080">, </font><font color="#800000">6</font><font color="#000080">, </font><font color="#800000">20</font><font color="#000080">), (</font><font color="#800000">43</font><font color="#000080">, </font><font color="#800000">6</font><font color="#000080">, </font><font color="#800000">20</font><font color="#000080">), 
        (</font><font color="#800000">43</font><font color="#000080">, </font><font color="#800000">6</font><font color="#000080">, </font><font color="#800000">20</font><font color="#000080">), (</font><font color="#800000">43</font><font color="#000080">, </font><font color="#800000">6</font><font color="#000080">, </font><font color="#800000">20</font><font color="#000080">), (</font><font color="#800000">44</font><font color="#000080">, </font><font color="#800000">7</font><font color="#000080">, </font><font color="#800000">19</font><font color="#000080">), (</font><font color="#800000">44</font><font color="#000080">, </font><font color="#800000">7</font><font color="#000080">, </font><font color="#800000">19</font><font color="#000080">), 
        (</font><font color="#800000">44</font><font color="#000080">, </font><font color="#800000">7</font><font color="#000080">, </font><font color="#800000">19</font><font color="#000080">), (</font><font color="#800000">44</font><font color="#000080">, </font><font color="#800000">7</font><font color="#000080">, </font><font color="#800000">19</font><font color="#000080">), (</font><font color="#800000">44</font><font color="#000080">, </font><font color="#800000">7</font><font color="#000080">, </font><font color="#800000">19</font><font color="#000080">), (</font><font color="#800000">45</font><font color="#000080">, </font><font color="#800000">7</font><font color="#000080">, </font><font color="#800000">18</font><font color="#000080">), 
        (</font><font color="#800000">45</font><font color="#000080">, </font><font color="#800000">7</font><font color="#000080">, </font><font color="#800000">18</font><font color="#000080">), (</font><font color="#800000">45</font><font color="#000080">, </font><font color="#800000">8</font><font color="#000080">, </font><font color="#800000">18</font><font color="#000080">), (</font><font color="#800000">45</font><font color="#000080">, </font><font color="#800000">8</font><font color="#000080">, </font><font color="#800000">18</font><font color="#000080">), (</font><font color="#800000">45</font><font color="#000080">, </font><font color="#800000">8</font><font color="#000080">, </font><font color="#800000">18</font><font color="#000080">), 
        (</font><font color="#800000">45</font><font color="#000080">, </font><font color="#800000">8</font><font color="#000080">, </font><font color="#800000">18</font><font color="#000080">), (</font><font color="#800000">46</font><font color="#000080">, </font><font color="#800000">8</font><font color="#000080">, </font><font color="#800000">17</font><font color="#000080">), (</font><font color="#800000">46</font><font color="#000080">, </font><font color="#800000">8</font><font color="#000080">, </font><font color="#800000">17</font><font color="#000080">), (</font><font color="#800000">46</font><font color="#000080">, </font><font color="#800000">8</font><font color="#000080">, </font><font color="#800000">17</font><font color="#000080">), 
        (</font><font color="#800000">46</font><font color="#000080">, </font><font color="#800000">9</font><font color="#000080">, </font><font color="#800000">17</font><font color="#000080">), (</font><font color="#800000">47</font><font color="#000080">, </font><font color="#800000">9</font><font color="#000080">, </font><font color="#800000">16</font><font color="#000080">), (</font><font color="#800000">47</font><font color="#000080">, </font><font color="#800000">9</font><font color="#000080">, </font><font color="#800000">16</font><font color="#000080">), (</font><font color="#800000">47</font><font color="#000080">, </font><font color="#800000">9</font><font color="#000080">, </font><font color="#800000">16</font><font color="#000080">), 
        (</font><font color="#800000">47</font><font color="#000080">, </font><font color="#800000">9</font><font color="#000080">, </font><font color="#800000">16</font><font color="#000080">), (</font><font color="#800000">47</font><font color="#000080">, </font><font color="#800000">9</font><font color="#000080">, </font><font color="#800000">16</font><font color="#000080">), (</font><font color="#800000">47</font><font color="#000080">, </font><font color="#800000">9</font><font color="#000080">, </font><font color="#800000">16</font><font color="#000080">), (</font><font color="#800000">47</font><font color="#000080">, </font><font color="#800000">9</font><font color="#000080">, </font><font color="#800000">16</font><font color="#000080">), 
        (</font><font color="#800000">48</font><font color="#000080">, </font><font color="#800000">10</font><font color="#000080">, </font><font color="#800000">15</font><font color="#000080">), (</font><font color="#800000">48</font><font color="#000080">, </font><font color="#800000">10</font><font color="#000080">, </font><font color="#800000">15</font><font color="#000080">), (</font><font color="#800000">48</font><font color="#000080">, </font><font color="#800000">10</font><font color="#000080">, </font><font color="#800000">15</font><font color="#000080">), (</font><font color="#800000">48</font><font color="#000080">, </font><font color="#800000">10</font><font color="#000080">, </font><font color="#800000">15</font><font color="#000080">), 
        (</font><font color="#800000">48</font><font color="#000080">, </font><font color="#800000">10</font><font color="#000080">, </font><font color="#800000">15</font><font color="#000080">), (</font><font color="#800000">48</font><font color="#000080">, </font><font color="#800000">10</font><font color="#000080">, </font><font color="#800000">15</font><font color="#000080">), (</font><font color="#800000">48</font><font color="#000080">, </font><font color="#800000">11</font><font color="#000080">, </font><font color="#800000">15</font><font color="#000080">), (</font><font color="#800000">49</font><font color="#000080">, </font><font color="#800000">11</font><font color="#000080">, </font><font color="#800000">14</font><font color="#000080">), 
        (</font><font color="#800000">49</font><font color="#000080">, </font><font color="#800000">11</font><font color="#000080">, </font><font color="#800000">14</font><font color="#000080">), (</font><font color="#800000">49</font><font color="#000080">, </font><font color="#800000">11</font><font color="#000080">, </font><font color="#800000">14</font><font color="#000080">), (</font><font color="#800000">49</font><font color="#000080">, </font><font color="#800000">11</font><font color="#000080">, </font><font color="#800000">14</font><font color="#000080">), (</font><font color="#800000">49</font><font color="#000080">, </font><font color="#800000">11</font><font color="#000080">, </font><font color="#800000">14</font><font color="#000080">), 
        (</font><font color="#800000">50</font><font color="#000080">, </font><font color="#800000">11</font><font color="#000080">, </font><font color="#800000">13</font><font color="#000080">), (</font><font color="#800000">50</font><font color="#000080">, </font><font color="#800000">12</font><font color="#000080">, </font><font color="#800000">13</font><font color="#000080">), (</font><font color="#800000">50</font><font color="#000080">, </font><font color="#800000">12</font><font color="#000080">, </font><font color="#800000">13</font><font color="#000080">), (</font><font color="#800000">50</font><font color="#000080">, </font><font color="#800000">12</font><font color="#000080">, </font><font color="#800000">13</font><font color="#000080">), 
        (</font><font color="#800000">50</font><font color="#000080">, </font><font color="#800000">12</font><font color="#000080">, </font><font color="#800000">13</font><font color="#000080">), (</font><font color="#800000">50</font><font color="#000080">, </font><font color="#800000">13</font><font color="#000080">, </font><font color="#800000">13</font><font color="#000080">), (</font><font color="#800000">50</font><font color="#000080">, </font><font color="#800000">13</font><font color="#000080">, </font><font color="#800000">13</font><font color="#000080">), (</font><font color="#800000">50</font><font color="#000080">, </font><font color="#800000">13</font><font color="#000080">, </font><font color="#800000">13</font><font color="#000080">), 
        (</font><font color="#800000">51</font><font color="#000080">, </font><font color="#800000">13</font><font color="#000080">, </font><font color="#800000">12</font><font color="#000080">), (</font><font color="#800000">51</font><font color="#000080">, </font><font color="#800000">13</font><font color="#000080">, </font><font color="#800000">12</font><font color="#000080">), (</font><font color="#800000">51</font><font color="#000080">, </font><font color="#800000">13</font><font color="#000080">, </font><font color="#800000">12</font><font color="#000080">), (</font><font color="#800000">51</font><font color="#000080">, </font><font color="#800000">14</font><font color="#000080">, </font><font color="#800000">12</font><font color="#000080">), 
        (</font><font color="#800000">51</font><font color="#000080">, </font><font color="#800000">14</font><font color="#000080">, </font><font color="#800000">12</font><font color="#000080">), (</font><font color="#800000">51</font><font color="#000080">, </font><font color="#800000">14</font><font color="#000080">, </font><font color="#800000">12</font><font color="#000080">), (</font><font color="#800000">51</font><font color="#000080">, </font><font color="#800000">14</font><font color="#000080">, </font><font color="#800000">12</font><font color="#000080">), (</font><font color="#800000">51</font><font color="#000080">, </font><font color="#800000">14</font><font color="#000080">, </font><font color="#800000">12</font><font color="#000080">), 
        (</font><font color="#800000">52</font><font color="#000080">, </font><font color="#800000">15</font><font color="#000080">, </font><font color="#800000">11</font><font color="#000080">), (</font><font color="#800000">52</font><font color="#000080">, </font><font color="#800000">15</font><font color="#000080">, </font><font color="#800000">11</font><font color="#000080">), (</font><font color="#800000">52</font><font color="#000080">, </font><font color="#800000">15</font><font color="#000080">, </font><font color="#800000">11</font><font color="#000080">), (</font><font color="#800000">52</font><font color="#000080">, </font><font color="#800000">15</font><font color="#000080">, </font><font color="#800000">11</font><font color="#000080">), 
        (</font><font color="#800000">52</font><font color="#000080">, </font><font color="#800000">15</font><font color="#000080">, </font><font color="#800000">11</font><font color="#000080">), (</font><font color="#800000">52</font><font color="#000080">, </font><font color="#800000">15</font><font color="#000080">, </font><font color="#800000">11</font><font color="#000080">), (</font><font color="#800000">53</font><font color="#000080">, </font><font color="#800000">16</font><font color="#000080">, </font><font color="#800000">10</font><font color="#000080">), (</font><font color="#800000">53</font><font color="#000080">, </font><font color="#800000">16</font><font color="#000080">, </font><font color="#800000">10</font><font color="#000080">), 
        (</font><font color="#800000">53</font><font color="#000080">, </font><font color="#800000">16</font><font color="#000080">, </font><font color="#800000">10</font><font color="#000080">), (</font><font color="#800000">53</font><font color="#000080">, </font><font color="#800000">16</font><font color="#000080">, </font><font color="#800000">10</font><font color="#000080">), (</font><font color="#800000">53</font><font color="#000080">, </font><font color="#800000">17</font><font color="#000080">, </font><font color="#800000">10</font><font color="#000080">), (</font><font color="#800000">53</font><font color="#000080">, </font><font color="#800000">17</font><font color="#000080">, </font><font color="#800000">10</font><font color="#000080">), 
        (</font><font color="#800000">53</font><font color="#000080">, </font><font color="#800000">17</font><font color="#000080">, </font><font color="#800000">10</font><font color="#000080">), (</font><font color="#800000">53</font><font color="#000080">, </font><font color="#800000">17</font><font color="#000080">, </font><font color="#800000">10</font><font color="#000080">), (</font><font color="#800000">53</font><font color="#000080">, </font><font color="#800000">18</font><font color="#000080">, </font><font color="#800000">10</font><font color="#000080">), (</font><font color="#800000">54</font><font color="#000080">, </font><font color="#800000">18</font><font color="#000080">, </font><font color="#800000">9</font><font color="#000080">), 
        (</font><font color="#800000">54</font><font color="#000080">, </font><font color="#800000">18</font><font color="#000080">, </font><font color="#800000">9</font><font color="#000080">), (</font><font color="#800000">54</font><font color="#000080">, </font><font color="#800000">18</font><font color="#000080">, </font><font color="#800000">9</font><font color="#000080">), (</font><font color="#800000">54</font><font color="#000080">, </font><font color="#800000">19</font><font color="#000080">, </font><font color="#800000">9</font><font color="#000080">), (</font><font color="#800000">54</font><font color="#000080">, </font><font color="#800000">19</font><font color="#000080">, </font><font color="#800000">9</font><font color="#000080">), 
        (</font><font color="#800000">54</font><font color="#000080">, </font><font color="#800000">19</font><font color="#000080">, </font><font color="#800000">9</font><font color="#000080">), (</font><font color="#800000">54</font><font color="#000080">, </font><font color="#800000">19</font><font color="#000080">, </font><font color="#800000">9</font><font color="#000080">), (</font><font color="#800000">54</font><font color="#000080">, </font><font color="#800000">19</font><font color="#000080">, </font><font color="#800000">9</font><font color="#000080">), (</font><font color="#800000">54</font><font color="#000080">, </font><font color="#800000">20</font><font color="#000080">, </font><font color="#800000">9</font><font color="#000080">), 
        (</font><font color="#800000">54</font><font color="#000080">, </font><font color="#800000">20</font><font color="#000080">, </font><font color="#800000">9</font><font color="#000080">), (</font><font color="#800000">55</font><font color="#000080">, </font><font color="#800000">20</font><font color="#000080">, </font><font color="#800000">8</font><font color="#000080">), (</font><font color="#800000">55</font><font color="#000080">, </font><font color="#800000">20</font><font color="#000080">, </font><font color="#800000">8</font><font color="#000080">), (</font><font color="#800000">55</font><font color="#000080">, </font><font color="#800000">21</font><font color="#000080">, </font><font color="#800000">8</font><font color="#000080">), 
        (</font><font color="#800000">55</font><font color="#000080">, </font><font color="#800000">21</font><font color="#000080">, </font><font color="#800000">8</font><font color="#000080">), (</font><font color="#800000">55</font><font color="#000080">, </font><font color="#800000">21</font><font color="#000080">, </font><font color="#800000">8</font><font color="#000080">), (</font><font color="#800000">55</font><font color="#000080">, </font><font color="#800000">21</font><font color="#000080">, </font><font color="#800000">8</font><font color="#000080">), (</font><font color="#800000">55</font><font color="#000080">, </font><font color="#800000">22</font><font color="#000080">, </font><font color="#800000">8</font><font color="#000080">), 
        (</font><font color="#800000">56</font><font color="#000080">, </font><font color="#800000">22</font><font color="#000080">, </font><font color="#800000">7</font><font color="#000080">), (</font><font color="#800000">56</font><font color="#000080">, </font><font color="#800000">22</font><font color="#000080">, </font><font color="#800000">7</font><font color="#000080">), (</font><font color="#800000">56</font><font color="#000080">, </font><font color="#800000">22</font><font color="#000080">, </font><font color="#800000">7</font><font color="#000080">), (</font><font color="#800000">56</font><font color="#000080">, </font><font color="#800000">23</font><font color="#000080">, </font><font color="#800000">7</font><font color="#000080">), 
        (</font><font color="#800000">56</font><font color="#000080">, </font><font color="#800000">23</font><font color="#000080">, </font><font color="#800000">7</font><font color="#000080">), (</font><font color="#800000">56</font><font color="#000080">, </font><font color="#800000">23</font><font color="#000080">, </font><font color="#800000">7</font><font color="#000080">), (</font><font color="#800000">56</font><font color="#000080">, </font><font color="#800000">24</font><font color="#000080">, </font><font color="#800000">7</font><font color="#000080">), (</font><font color="#800000">56</font><font color="#000080">, </font><font color="#800000">24</font><font color="#000080">, </font><font color="#800000">7</font><font color="#000080">), 
        (</font><font color="#800000">56</font><font color="#000080">, </font><font color="#800000">24</font><font color="#000080">, </font><font color="#800000">7</font><font color="#000080">), (</font><font color="#800000">56</font><font color="#000080">, </font><font color="#800000">24</font><font color="#000080">, </font><font color="#800000">7</font><font color="#000080">), (</font><font color="#800000">56</font><font color="#000080">, </font><font color="#800000">25</font><font color="#000080">, </font><font color="#800000">7</font><font color="#000080">), (</font><font color="#800000">57</font><font color="#000080">, </font><font color="#800000">25</font><font color="#000080">, </font><font color="#800000">6</font><font color="#000080">), 
        (</font><font color="#800000">57</font><font color="#000080">, </font><font color="#800000">25</font><font color="#000080">, </font><font color="#800000">6</font><font color="#000080">), (</font><font color="#800000">57</font><font color="#000080">, </font><font color="#800000">26</font><font color="#000080">, </font><font color="#800000">6</font><font color="#000080">), (</font><font color="#800000">57</font><font color="#000080">, </font><font color="#800000">26</font><font color="#000080">, </font><font color="#800000">6</font><font color="#000080">), (</font><font color="#800000">57</font><font color="#000080">, </font><font color="#800000">26</font><font color="#000080">, </font><font color="#800000">6</font><font color="#000080">), 
        (</font><font color="#800000">57</font><font color="#000080">, </font><font color="#800000">27</font><font color="#000080">, </font><font color="#800000">6</font><font color="#000080">), (</font><font color="#800000">57</font><font color="#000080">, </font><font color="#800000">27</font><font color="#000080">, </font><font color="#800000">6</font><font color="#000080">), (</font><font color="#800000">57</font><font color="#000080">, </font><font color="#800000">27</font><font color="#000080">, </font><font color="#800000">6</font><font color="#000080">), (</font><font color="#800000">57</font><font color="#000080">, </font><font color="#800000">28</font><font color="#000080">, </font><font color="#800000">6</font><font color="#000080">), 
        (</font><font color="#800000">57</font><font color="#000080">, </font><font color="#800000">28</font><font color="#000080">, </font><font color="#800000">6</font><font color="#000080">), (</font><font color="#800000">57</font><font color="#000080">, </font><font color="#800000">28</font><font color="#000080">, </font><font color="#800000">6</font><font color="#000080">), (</font><font color="#800000">58</font><font color="#000080">, </font><font color="#800000">29</font><font color="#000080">, </font><font color="#800000">5</font><font color="#000080">), (</font><font color="#800000">58</font><font color="#000080">, </font><font color="#800000">29</font><font color="#000080">, </font><font color="#800000">5</font><font color="#000080">), 
        (</font><font color="#800000">58</font><font color="#000080">, </font><font color="#800000">29</font><font color="#000080">, </font><font color="#800000">5</font><font color="#000080">), (</font><font color="#800000">58</font><font color="#000080">, </font><font color="#800000">30</font><font color="#000080">, </font><font color="#800000">5</font><font color="#000080">), (</font><font color="#800000">58</font><font color="#000080">, </font><font color="#800000">30</font><font color="#000080">, </font><font color="#800000">5</font><font color="#000080">), (</font><font color="#800000">58</font><font color="#000080">, </font><font color="#800000">30</font><font color="#000080">, </font><font color="#800000">5</font><font color="#000080">), 
        (</font><font color="#800000">58</font><font color="#000080">, </font><font color="#800000">31</font><font color="#000080">, </font><font color="#800000">5</font><font color="#000080">), (</font><font color="#800000">58</font><font color="#000080">, </font><font color="#800000">31</font><font color="#000080">, </font><font color="#800000">5</font><font color="#000080">), (</font><font color="#800000">58</font><font color="#000080">, </font><font color="#800000">32</font><font color="#000080">, </font><font color="#800000">5</font><font color="#000080">), (</font><font color="#800000">59</font><font color="#000080">, </font><font color="#800000">32</font><font color="#000080">, </font><font color="#800000">4</font><font color="#000080">), 
        (</font><font color="#800000">59</font><font color="#000080">, </font><font color="#800000">32</font><font color="#000080">, </font><font color="#800000">4</font><font color="#000080">), (</font><font color="#800000">59</font><font color="#000080">, </font><font color="#800000">33</font><font color="#000080">, </font><font color="#800000">4</font><font color="#000080">), (</font><font color="#800000">59</font><font color="#000080">, </font><font color="#800000">33</font><font color="#000080">, </font><font color="#800000">4</font><font color="#000080">), (</font><font color="#800000">59</font><font color="#000080">, </font><font color="#800000">33</font><font color="#000080">, </font><font color="#800000">4</font><font color="#000080">), 
        (</font><font color="#800000">59</font><font color="#000080">, </font><font color="#800000">34</font><font color="#000080">, </font><font color="#800000">4</font><font color="#000080">), (</font><font color="#800000">59</font><font color="#000080">, </font><font color="#800000">34</font><font color="#000080">, </font><font color="#800000">4</font><font color="#000080">), (</font><font color="#800000">59</font><font color="#000080">, </font><font color="#800000">35</font><font color="#000080">, </font><font color="#800000">4</font><font color="#000080">), (</font><font color="#800000">59</font><font color="#000080">, </font><font color="#800000">35</font><font color="#000080">, </font><font color="#800000">4</font><font color="#000080">), 
        (</font><font color="#800000">59</font><font color="#000080">, </font><font color="#800000">35</font><font color="#000080">, </font><font color="#800000">4</font><font color="#000080">), (</font><font color="#800000">59</font><font color="#000080">, </font><font color="#800000">36</font><font color="#000080">, </font><font color="#800000">4</font><font color="#000080">), (</font><font color="#800000">59</font><font color="#000080">, </font><font color="#800000">36</font><font color="#000080">, </font><font color="#800000">4</font><font color="#000080">), (</font><font color="#800000">59</font><font color="#000080">, </font><font color="#800000">37</font><font color="#000080">, </font><font color="#800000">4</font><font color="#000080">), 
        (</font><font color="#800000">60</font><font color="#000080">, </font><font color="#800000">37</font><font color="#000080">, </font><font color="#800000">3</font><font color="#000080">), (</font><font color="#800000">60</font><font color="#000080">, </font><font color="#800000">38</font><font color="#000080">, </font><font color="#800000">3</font><font color="#000080">), (</font><font color="#800000">60</font><font color="#000080">, </font><font color="#800000">38</font><font color="#000080">, </font><font color="#800000">3</font><font color="#000080">), (</font><font color="#800000">60</font><font color="#000080">, </font><font color="#800000">38</font><font color="#000080">, </font><font color="#800000">3</font><font color="#000080">), 
        (</font><font color="#800000">60</font><font color="#000080">, </font><font color="#800000">39</font><font color="#000080">, </font><font color="#800000">3</font><font color="#000080">), (</font><font color="#800000">60</font><font color="#000080">, </font><font color="#800000">39</font><font color="#000080">, </font><font color="#800000">3</font><font color="#000080">), (</font><font color="#800000">60</font><font color="#000080">, </font><font color="#800000">40</font><font color="#000080">, </font><font color="#800000">3</font><font color="#000080">), (</font><font color="#800000">60</font><font color="#000080">, </font><font color="#800000">40</font><font color="#000080">, </font><font color="#800000">3</font><font color="#000080">), 
        (</font><font color="#800000">60</font><font color="#000080">, </font><font color="#800000">41</font><font color="#000080">, </font><font color="#800000">3</font><font color="#000080">), (</font><font color="#800000">60</font><font color="#000080">, </font><font color="#800000">41</font><font color="#000080">, </font><font color="#800000">3</font><font color="#000080">), (</font><font color="#800000">60</font><font color="#000080">, </font><font color="#800000">42</font><font color="#000080">, </font><font color="#800000">3</font><font color="#000080">), (</font><font color="#800000">60</font><font color="#000080">, </font><font color="#800000">42</font><font color="#000080">, </font><font color="#800000">3</font><font color="#000080">), 
        (</font><font color="#800000">60</font><font color="#000080">, </font><font color="#800000">42</font><font color="#000080">, </font><font color="#800000">3</font><font color="#000080">), (</font><font color="#800000">61</font><font color="#000080">, </font><font color="#800000">43</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">), (</font><font color="#800000">61</font><font color="#000080">, </font><font color="#800000">43</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">), (</font><font color="#800000">61</font><font color="#000080">, </font><font color="#800000">44</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">), 
        (</font><font color="#800000">61</font><font color="#000080">, </font><font color="#800000">44</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">), (</font><font color="#800000">61</font><font color="#000080">, </font><font color="#800000">45</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">), (</font><font color="#800000">61</font><font color="#000080">, </font><font color="#800000">45</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">), (</font><font color="#800000">61</font><font color="#000080">, </font><font color="#800000">46</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">), 
        (</font><font color="#800000">61</font><font color="#000080">, </font><font color="#800000">46</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">), (</font><font color="#800000">61</font><font color="#000080">, </font><font color="#800000">47</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">), (</font><font color="#800000">61</font><font color="#000080">, </font><font color="#800000">47</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">), (</font><font color="#800000">61</font><font color="#000080">, </font><font color="#800000">48</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">), 
        (</font><font color="#800000">61</font><font color="#000080">, </font><font color="#800000">49</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">), (</font><font color="#800000">61</font><font color="#000080">, </font><font color="#800000">49</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">), (</font><font color="#800000">61</font><font color="#000080">, </font><font color="#800000">50</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">), (</font><font color="#800000">62</font><font color="#000080">, </font><font color="#800000">50</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">), 
        (</font><font color="#800000">62</font><font color="#000080">, </font><font color="#800000">51</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">), (</font><font color="#800000">62</font><font color="#000080">, </font><font color="#800000">51</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">), (</font><font color="#800000">62</font><font color="#000080">, </font><font color="#800000">52</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">), (</font><font color="#800000">62</font><font color="#000080">, </font><font color="#800000">52</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">), 
        (</font><font color="#800000">62</font><font color="#000080">, </font><font color="#800000">53</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">), (</font><font color="#800000">62</font><font color="#000080">, </font><font color="#800000">54</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">), (</font><font color="#800000">62</font><font color="#000080">, </font><font color="#800000">54</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">), (</font><font color="#800000">62</font><font color="#000080">, </font><font color="#800000">55</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">), 
        (</font><font color="#800000">62</font><font color="#000080">, </font><font color="#800000">55</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">), (</font><font color="#800000">62</font><font color="#000080">, </font><font color="#800000">56</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">), (</font><font color="#800000">63</font><font color="#000080">, </font><font color="#800000">57</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">), (</font><font color="#800000">63</font><font color="#000080">, </font><font color="#800000">57</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">), 
        (</font><font color="#800000">63</font><font color="#000080">, </font><font color="#800000">58</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">), (</font><font color="#800000">63</font><font color="#000080">, </font><font color="#800000">59</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">), (</font><font color="#800000">63</font><font color="#000080">, </font><font color="#800000">59</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">), (</font><font color="#800000">63</font><font color="#000080">, </font><font color="#800000">60</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">), 
        (</font><font color="#800000">63</font><font color="#000080">, </font><font color="#800000">61</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">), (</font><font color="#800000">63</font><font color="#000080">, </font><font color="#800000">61</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">), (</font><font color="#800000">63</font><font color="#000080">, </font><font color="#800000">62</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">), (</font><font color="#800000">63</font><font color="#000080">, </font><font color="#800000">63</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">));

</font><font color="#FF0000"><b>var
  </b></font>x<font color="#000080">, </font>y<font color="#000080">: </font>Integer<font color="#000080">;
  </font>i<font color="#000080">: </font>Byte<font color="#000080">;


</font><font color="#008000"><i>{ Waits for VGA's vertical retrace. }
</i></font><font color="#FF0000"><b>procedure </b></font>WaitVRetrace<font color="#000080">; </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm
  </b></font><font color="#FF00FF">mov  dx, 3dah
@@1:
  in   al, dx
  and  al, 08h
  jnz  @@1
@@2:
  in   al, dx
  and  al, 08h
  jz   @@2
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ Sets a complete palette. }
</i></font><font color="#FF0000"><b>procedure </b></font>SetPal<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>Palet<font color="#000080">: </font>TPalette<font color="#000080">); </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm
  </b></font><font color="#FF00FF">call  WaitVRetrace
  push  ds
  lds   si, Palet
  mov   dx, 3c8h
  mov   al, 0
  out   dx, al
  inc   dx
  mov   cx, 768
  rep   outsb
  pop   ds
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ Initializes 320x240x256 ModeX. Virtual screen is 320x800x256. }
</i></font><font color="#FF0000"><b>procedure </b></font>SetModeX<font color="#000080">; </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm
  </b></font><font color="#008000"><i>{ First get in MCGA mode. }
  </i></font><font color="#FF00FF">mov    ax, 13h
  int    10h

  </font><font color="#008000"><i>{ Unchain. }
  </i></font><font color="#FF00FF">cli
  mov    dx, 3c4h
  mov    ax, 0604h
  out    dx, ax
  mov    ax, 0f02h
  out    dx, ax

  </font><font color="#008000"><i>{ Clear complete VGA memory. }
  </i></font><font color="#FF00FF">mov    ax, 0f02h           </font><font color="#008000"><i>{ Select all bitplanes. }
  </i></font><font color="#FF00FF">out    dx, ax
  mov    es, SEGA000
  xor    di, di              </font><font color="#008000"><i>{ Clear di }
  </i></font><font color="#FF00FF">xor    ax, ax              </font><font color="#008000"><i>{ Clear ax }
  </i></font><font color="#FF00FF">mov    cx, 7fffh
  cld
  rep    stosw               </font><font color="#008000"><i>{ Clear garbage off the screen. }

  { Now setup 320x240x256 ModeX. }
  </i></font><font color="#FF00FF">mov    dx, 03c2h
  mov    al, 0e3h
  out    dx, al
  mov    dx, 03d4h
  mov    ax, 02c11h
  out    dx, ax
  mov    ax, 0d06h
  out    dx, ax
  mov    ax, 3e07h
  out    dx, ax
  mov    ax, 0ea10h
  out    dx, ax
  mov    ax, 0ac11h
  out    dx, ax
  mov    ax, 0df12h
  out    dx, ax
  mov    ax, 0e715h
  out    dx, ax
  mov    ax, 0616h
  out    dx, ax
  sti
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ Flips screen back to text mode. }
</i></font><font color="#FF0000"><b>procedure </b></font>SetTextMode<font color="#000080">; </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">mov ax, 0003h
  int 10h
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#008000"><i>{ Moves offset of screen to (x, y). }
</i></font><font color="#FF0000"><b>procedure </b></font>ScreenOffset<font color="#000080">(</font>x<font color="#000080">, </font>y<font color="#000080">: </font>Word<font color="#000080">); </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm
  </b></font><font color="#FF00FF">cli
  mov    ax, y
  mov    bx, ax
  shl    bx, 6
  shl    ax, 4
  add    bx, ax              </font><font color="#008000"><i>{ bx = y*80 }
  </i></font><font color="#FF00FF">mov    ax, x
  add    bx, ax              </font><font color="#008000"><i>{ bx = y*80 + x }
  </i></font><font color="#FF00FF">mov    ah, bh
  mov    al, 0ch

  mov    dx, 3d4h
  out    dx, ax

  mov    ah, bl
  mov    al, 0dh
  out    dx, ax
  sti
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ Splits the screen. The offset of this split screen in VGA memory is always
  0. The split screen can be hidden by setting it to a line &gt; MaxY. }
</i></font><font color="#FF0000"><b>procedure </b></font>SetSplitscreen<font color="#000080">(</font>Line<font color="#000080">: </font>Word<font color="#000080">); </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm
  </b></font><font color="#FF00FF">mov    bx, Line
  shl    bx, 1
  dec    bx

  cli
  mov    dx, 3d4h            </font><font color="#008000"><i>{ CRTC base address }
  </i></font><font color="#FF00FF">mov    ah, bl
  mov    al, 18h             </font><font color="#008000"><i>{ CRTC line compare reg. index  }
  </i></font><font color="#FF00FF">out    dx, ax
  mov    ah, bh
  and    ah, 1
  shl    ah, 4
  mov    al, 07h             </font><font color="#008000"><i>{ CRTC overflow register index }
  </i></font><font color="#FF00FF">out    dx, al
  inc    dx
  in     al, dx
  and    al, not 10h
  or     al, ah
  out    dx, al
  dec    dx
  mov    ah, bh
  and    ah, 2
  ror    ah, 3
  mov    al, 09h             </font><font color="#008000"><i>{ CRTC maximum scan line register index }
  </i></font><font color="#FF00FF">out    dx, al
  inc    dx
  in     al, dx
  and    al, not 40h
  or     al, ah
  out    dx, al
  sti
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ Puts a pixel on the screen in ModeX. x should be between 0 and 319. y 
  should be between 0 and 799. Whether or not the pixel is visible on the 
  screen is determined by what part of the VGA memory we are displaying, as 
  can be set by ScreenOffset and SplitScreen. }
</i></font><font color="#FF0000"><b>procedure </b></font>PutPixel<font color="#000080">(</font>x<font color="#000080">, </font>y<font color="#000080">: </font>Word<font color="#000080">; </font>Color<font color="#000080">: </font>Byte<font color="#000080">); </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm
  </b></font><font color="#FF00FF">mov    ax, y
  mov    bx, ax
  shl    bx, 4
  shl    ax, 6
  add    bx, ax              </font><font color="#008000"><i>{ bx = y*80 }
  </i></font><font color="#FF00FF">mov    ax, x
  mov    cl, al
  and    cl, 03h
  shr    ax, 2
  add    bx, ax
  mov    ah, 1
  shl    ah, cl
  mov    dx, 3c4h            </font><font color="#008000"><i>{ Sequencer Register    }
  </i></font><font color="#FF00FF">mov    al, 2               </font><font color="#008000"><i>{ Map Mask Index        }
  </i></font><font color="#FF00FF">out    dx, ax

  mov    es, SEGA000
  mov    al, Color
  mov    es:[bx], al
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ Simple 'n slow rectangle drawing routine. }
</i></font><font color="#FF0000"><b>procedure </b></font>Rect<font color="#000080">(</font>x1<font color="#000080">, </font>y1<font color="#000080">, </font>x2<font color="#000080">, </font>y2<font color="#000080">: </font>Word<font color="#000080">; </font>Color<font color="#000080">: </font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>var
  </b></font>i<font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  for </b></font>i <font color="#000080">:= </font>x1 <font color="#FF0000"><b>to </b></font>x2 <font color="#FF0000"><b>do
  begin
    </b></font>PutPixel<font color="#000080">(</font>i<font color="#000080">, </font>y1<font color="#000080">, </font>Color<font color="#000080">);
    </font>PutPixel<font color="#000080">(</font>i<font color="#000080">, </font>y2<font color="#000080">, </font>Color<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font>y1 <font color="#FF0000"><b>to </b></font>y2 <font color="#FF0000"><b>do
  begin
    </b></font>PutPixel<font color="#000080">(</font>x1<font color="#000080">, </font>i<font color="#000080">, </font>Color<font color="#000080">);
    </font>PutPixel<font color="#000080">(</font>x2<font color="#000080">, </font>i<font color="#000080">, </font>Color<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ Puts a character on the screen using the VGA ROM font. }
</i></font><font color="#FF0000"><b>procedure </b></font>PutChar<font color="#000080">(</font>x<font color="#000080">, </font>y<font color="#000080">: </font>Word<font color="#000080">; </font>Color<font color="#000080">: </font>Byte<font color="#000080">; </font>ch<font color="#000080">: </font>Char<font color="#000080">);
</font><font color="#FF0000"><b>var
  </b></font>i<font color="#000080">, </font>j<font color="#000080">: </font>Byte<font color="#000080">;
  </font>pre<font color="#000080">: </font>Word<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>pre <font color="#000080">:= </font><font color="#800000">$FA6E </font><font color="#000080">+ (</font>Ord<font color="#000080">(</font>ch<font color="#000080">) </font><font color="#FF0000"><b>shl </b></font><font color="#800000">3</font><font color="#000080">);
  </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">7 </font><font color="#FF0000"><b>do
    for </b></font>j <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">7 </font><font color="#FF0000"><b>do
      if </b></font><font color="#000080">(((</font>Mem<font color="#000080">[</font><font color="#800000">$F000</font><font color="#000080">:</font>pre<font color="#000080">+</font>i<font color="#000080">] </font><font color="#FF0000"><b>shl </b></font>j<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#800000">128</font><font color="#000080">) &lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
        </b></font>PutPixel<font color="#000080">(</font>x<font color="#000080">+</font>j<font color="#000080">, </font>y<font color="#000080">+</font>i<font color="#000080">, </font>Color<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ Puts a string on the screen using the VGA ROM font. }
</i></font><font color="#FF0000"><b>procedure </b></font>PutString<font color="#000080">(</font>x<font color="#000080">, </font>y<font color="#000080">: </font>Word<font color="#000080">; </font>Color<font color="#000080">: </font>Byte<font color="#000080">; </font>Str<font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">);
</font><font color="#FF0000"><b>var
  </b></font>i<font color="#000080">: </font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
  for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>length<font color="#000080">(</font>Str<font color="#000080">) </font><font color="#FF0000"><b>do
    </b></font>PutChar<font color="#000080">(</font>x <font color="#000080">+ ((</font>i<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>shl </b></font><font color="#800000">3</font><font color="#000080">), </font>y<font color="#000080">, </font>Color<font color="#000080">, </font>Str<font color="#000080">[</font>i<font color="#000080">]);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>begin
  </b></font><font color="#008000"><i>{ Initialize display and palette. }
  </i></font>SetModeX<font color="#000080">;
  </font>SetPal<font color="#000080">(</font>Palette<font color="#000080">);

  </font><font color="#008000"><i>{ Set virtual screen to start at line 64 and put simple background
    pattern on screen. }
  </i></font>ScreenOffset<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">64</font><font color="#000080">);
  </font><font color="#FF0000"><b>for </b></font>x <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>MaxX <font color="#FF0000"><b>do
    for </b></font>y <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>MaxY <font color="#FF0000"><b>do
    begin
      </b></font>i <font color="#000080">:= </font>x <font color="#FF0000"><b>xor </b></font>y<font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>i <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font>i <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;    </font><font color="#008000"><i>{ Using colour 0 (black) looks ugly... }
      </i></font>PutPixel<font color="#000080">(</font>x<font color="#000080">, </font>y<font color="#000080">+</font><font color="#800000">64</font><font color="#000080">, </font>i<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ We're gonna use lines 0-63 in VGA memory for our split screen.
    Let's write a background pattern and some text to that region. }
  </i></font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">31 </font><font color="#FF0000"><b>do
    </b></font>Rect<font color="#000080">(</font>i<font color="#000080">, </font>i<font color="#000080">, </font>MaxX<font color="#000080">-</font>i<font color="#000080">, </font><font color="#800000">63</font><font color="#000080">-</font>i<font color="#000080">, </font>i <font color="#FF0000"><b>shl </b></font><font color="#800000">2</font><font color="#000080">);
  </font>PutString<font color="#000080">(</font><font color="#800000">24</font><font color="#000080">, </font><font color="#800000">23</font><font color="#000080">, </font><font color="#800000">255</font><font color="#000080">, </font><font color="#800000">'Split Screen in 320x240x256 ModeX!'</font><font color="#000080">);
  </font>PutString<font color="#000080">(</font><font color="#800000">52</font><font color="#000080">, </font><font color="#800000">35</font><font color="#000080">, </font><font color="#800000">255</font><font color="#000080">, </font><font color="#800000">'Press any key to continue...'</font><font color="#000080">);

  </font><font color="#008000"><i>{ Now scroll the split screen on the display.... }
  </i></font><font color="#FF0000"><b>for </b></font>y <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">63 </font><font color="#FF0000"><b>do
  begin
    </b></font>SetSplitScreen<font color="#000080">(</font>MaxY<font color="#000080">-</font>y<font color="#000080">);
    </font>WaitVRetrace<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>Repeat Until </b></font>KeyPressed<font color="#000080">;

  </font><font color="#008000"><i>{ And scroll the split screen off the display... }
  </i></font><font color="#FF0000"><b>for </b></font>y <font color="#000080">:= </font><font color="#800000">63 </font><font color="#FF0000"><b>downto </b></font><font color="#800000">0 </font><font color="#FF0000"><b>do
  begin
    </b></font>SetSplitScreen<font color="#000080">(</font>MaxY<font color="#000080">-</font>y<font color="#000080">);
    </font>WaitVRetrace<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ Finito: back to Text mode! }
  </i></font>SetTextMode<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0252.PAS">Original</a><b>]</b></p></body>
</html>
