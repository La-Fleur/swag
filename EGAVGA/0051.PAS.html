<html>
<head><title> "Scale Bitmats" by SEAN PALMER</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0051.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
===========================================================================
 BBS: Canada Remote Systems
Date: 05-26-93 (00:24)             Number: 24154
From: SEAN PALMER                  Refer#: NONE
  To: ALL                           Recvd: NO
Subj: SCALING BITMAPS                Conf: (1221) F-PASCAL
---------------------------------------------------------------------------
Don't know if anyone is interested, but here is some code to scale
bitmaps. I JUST now wrote it, and it's tested, but it hasn't even begun
to be optimized yet (that's why it's still postable in the Pascal Echo,
no .ASM stuff yet)  8)

works with VGA mode $13. }

</i></font><font color="#FF0000"><b>type
 </b></font>fixed<font color="#000080">=</font><font color="#FF0000"><b>record case </b></font>boolean <font color="#FF0000"><b>of
        </b></font>true<font color="#000080">:(</font>l<font color="#000080">:</font>longint<font color="#000080">);
        </font>false<font color="#000080">:(</font>f<font color="#000080">:</font>word<font color="#000080">;</font>i<font color="#000080">:</font>integer<font color="#000080">);
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>scaleBitmap<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>bitmap<font color="#000080">;</font>x<font color="#000080">,</font>y<font color="#000080">:</font>word<font color="#000080">;</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">:</font>word<font color="#000080">);
</font><font color="#FF0000"><b>var
 </b></font>a<font color="#000080">,</font>i<font color="#000080">:</font>word<font color="#000080">;
 </font>sx<font color="#000080">,</font>sy<font color="#000080">,</font>cy<font color="#000080">,</font>s<font color="#000080">:</font>fixed<font color="#000080">;
 </font>map<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">65521</font><font color="#000080">]</font><font color="#FF0000"><b>of </b></font>byte <font color="#FF0000"><b>absolute </b></font>bitmap<font color="#000080">;
</font><font color="#FF0000"><b>begin
 </b></font>sx<font color="#000080">.</font>l<font color="#000080">:=(</font>x<font color="#000080">*</font><font color="#800000">$10000</font><font color="#000080">)</font><font color="#FF0000"><b>div </b></font>succ<font color="#000080">(</font>x2<font color="#000080">-</font>x1<font color="#000080">); </font>sy<font color="#000080">.</font>l<font color="#000080">:=(</font>y<font color="#000080">*</font><font color="#800000">$10000</font><font color="#000080">)</font><font color="#FF0000"><b>div </b></font>succ<font color="#000080">(</font>y2<font color="#000080">-</font>y1<font color="#000080">);
 </font>cy<font color="#000080">.</font>i<font color="#000080">:=</font>pred<font color="#000080">(</font>y<font color="#000080">); </font>cy<font color="#000080">.</font>f<font color="#000080">:=</font><font color="#800000">$FFFF</font><font color="#000080">;
 </font><font color="#FF0000"><b>while </b></font>cy<font color="#000080">.</font>i<font color="#000080">&gt;=</font><font color="#800000">0 </font><font color="#FF0000"><b>do begin
  </b></font>a<font color="#000080">:=</font>y2<font color="#000080">*</font><font color="#800000">320</font><font color="#000080">+</font>x1<font color="#000080">;
  </font>s<font color="#000080">.</font>l<font color="#000080">:=(</font>cy<font color="#000080">.</font>i<font color="#000080">*</font>x<font color="#000080">)*</font><font color="#800000">$10000</font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font>x2<font color="#000080">-</font>x1 <font color="#FF0000"><b>downto </b></font><font color="#800000">0 </font><font color="#FF0000"><b>do begin
   </b></font>mem<font color="#000080">[</font><font color="#800000">$A000</font><font color="#000080">:</font>a<font color="#000080">]:=</font>map<font color="#000080">[</font>s<font color="#000080">.</font>i<font color="#000080">];
   </font>inc<font color="#000080">(</font>a<font color="#000080">);
   </font>inc<font color="#000080">(</font>s<font color="#000080">.</font>l<font color="#000080">,</font>sx<font color="#000080">.</font>l<font color="#000080">);
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>dec<font color="#000080">(</font>cy<font color="#000080">.</font>l<font color="#000080">,</font>sy<font color="#000080">.</font>l<font color="#000080">); </font>dec<font color="#000080">(</font>y2<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>const
 </b></font>bmp<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">3</font><font color="#000080">]</font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">=
  ((</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">),
   (</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">4</font><font color="#000080">),
   (</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">),
   (</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">6</font><font color="#000080">));
</font><font color="#FF0000"><b>var </b></font>i<font color="#000080">:</font>integer<font color="#000080">;

</font><font color="#FF0000"><b>begin
 asm </b></font><font color="#FF00FF">mov ax,$13; int $10; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">99 </font><font color="#FF0000"><b>do
  </b></font>scaleBitMap<font color="#000080">(</font>bmp<font color="#000080">,</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>i<font color="#000080">*</font><font color="#800000">2</font><font color="#000080">,</font>i<font color="#000080">*</font><font color="#800000">2</font><font color="#000080">);
 </font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">mov ax,$3; int $10; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0051.PAS">Original</a><b>]</b></p></body>
</html>
