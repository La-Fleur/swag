<html>
<head><title> "VGA COLOR Unit" by PETER WOKKE</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0058.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
PETER WOKKE

&gt; anyone know a way to set the DAC registers that's faster than int $10?
}

</i></font><font color="#FF0000"><b>PROGRAM </b></font>vga_in_mode_13<font color="#000080">;

</font><font color="#008000"><i>{ VGA in Mode $13  320 x 200 and 256 Colors for Turbo Pascal 6.0 }

</i></font><font color="#FF0000"><b>USES
  </b></font>Dos<font color="#000080">, </font>Crt<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Plot<font color="#000080">(</font>x<font color="#000080">, </font>y <font color="#000080">: </font>Integer<font color="#000080">; </font>color <font color="#000080">: </font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Begin
  </b></font>Mem<font color="#000080">[</font><font color="#800000">$A000 </font><font color="#000080">: </font>word<font color="#000080">(</font>y <font color="#000080">* </font><font color="#800000">320 </font><font color="#000080">+ </font>x<font color="#000080">)] := </font>color<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>set_rgb<font color="#000080">(</font>reg<font color="#000080">, </font>Red<font color="#000080">, </font>Green<font color="#000080">, </font>Blue <font color="#000080">: </font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Begin
  </b></font>Port<font color="#000080">[</font><font color="#800000">$3C8</font><font color="#000080">] := </font>reg<font color="#000080">;
  </font><font color="#FF0000"><b>Inline</b></font><font color="#000080">(</font><font color="#800000">$FA</font><font color="#000080">);
  </font>Port<font color="#000080">[</font><font color="#800000">$3C9</font><font color="#000080">] := </font>Red<font color="#000080">;
  </font>Port<font color="#000080">[</font><font color="#800000">$3C9</font><font color="#000080">] := </font>Green<font color="#000080">;
  </font>Port<font color="#000080">[</font><font color="#800000">$3C9</font><font color="#000080">] := </font>Blue<font color="#000080">;
  </font><font color="#FF0000"><b>Inline</b></font><font color="#000080">(</font><font color="#800000">$FB</font><font color="#000080">);
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Var
  </b></font>x<font color="#000080">, </font>y     <font color="#000080">: </font>Integer<font color="#000080">;
  </font>reg      <font color="#000080">: </font>Registers<font color="#000080">;
  </font>savemode <font color="#000080">: </font>Byte<font color="#000080">;
  </font>n        <font color="#000080">: </font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>reg<font color="#000080">.</font>AX <font color="#000080">:= </font><font color="#800000">$0F00</font><font color="#000080">;
  </font>Intr<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">, </font>reg<font color="#000080">);
  </font>savemode <font color="#000080">:= </font>reg<font color="#000080">.</font>al<font color="#000080">;

  </font>reg<font color="#000080">.</font>AX <font color="#000080">:= </font><font color="#800000">$0013</font><font color="#000080">;
  </font>Intr<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">, </font>reg<font color="#000080">);

  </font><font color="#FF0000"><b>For </b></font>n <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>TO </b></font><font color="#800000">63 </font><font color="#FF0000"><b>Do
    </b></font>set_rgb<font color="#000080">(</font>n<font color="#000080">, </font>n<font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">);
  </font><font color="#FF0000"><b>For </b></font>n <font color="#000080">:= </font><font color="#800000">63 </font><font color="#FF0000"><b>Downto </b></font><font color="#800000">0 </font><font color="#FF0000"><b>Do
    </b></font>set_rgb<font color="#000080">(</font><font color="#800000">127 </font><font color="#000080">- </font>n<font color="#000080">, </font>n<font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">);
  </font><font color="#FF0000"><b>For </b></font>n <font color="#000080">:= </font><font color="#800000">128 </font><font color="#FF0000"><b>TO </b></font><font color="#800000">191 </font><font color="#FF0000"><b>Do
    </b></font>set_rgb<font color="#000080">(</font>n<font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font>n<font color="#000080">);

  </font><font color="#FF0000"><b>For </b></font>y <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>TO </b></font><font color="#800000">191 </font><font color="#FF0000"><b>Do
     For </b></font>x <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>TO </b></font><font color="#800000">319 </font><font color="#FF0000"><b>Do
        </b></font>Plot<font color="#000080">(</font>x<font color="#000080">, </font>y<font color="#000080">, </font>y<font color="#000080">);
  </font>Readln<font color="#000080">;

  </font>reg<font color="#000080">.</font>AX <font color="#000080">:= </font>savemode<font color="#000080">;
  </font>Intr<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">, </font>reg<font color="#000080">);
</font><font color="#FF0000"><b>END</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0058.PAS">Original</a><b>]</b></p></body>
</html>
