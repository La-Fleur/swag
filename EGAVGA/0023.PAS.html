<html>
<head><title> "READLNXY" by ERIC MILLER</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0023.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
ERIC MILLER

&gt; My question is this: In TP, the outtextxy is supposed to change the
&gt; CP (current pointer) to the location given in x,y. When you execute a
&gt; readln after a outtextxy or even and outtext, the program always
&gt; starts at 0,0.. Is there a way to set the CP where the readln will
&gt; recognize it?

  Here's a demo of a procedure called ReadlnXY; it reads
  a string in graphics mode using BGI support.
}

</i></font><font color="#FF0000"><b>PROGRAM </b></font>Graphics_Readln<font color="#000080">;

</font><font color="#FF0000"><b>Uses
  </b></font>Crt<font color="#000080">, </font>Graph<font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>ReadlnXY<font color="#000080">(</font>X<font color="#000080">, </font>Y<font color="#000080">: </font>Integer<font color="#000080">; </font><font color="#FF0000"><b>VAR </b></font>S<font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">);
</font><font color="#FF0000"><b>VAR
  </b></font>Ch       <font color="#000080">: </font>Char<font color="#000080">;    </font><font color="#008000"><i>{ key from keyboard }
  </i></font>Done     <font color="#000080">: </font>boolean<font color="#000080">; </font><font color="#008000"><i>{ our flag for quiting }
  </i></font>CurColor <font color="#000080">: </font>word<font color="#000080">;    </font><font color="#008000"><i>{ color to write text in }
  </i></font>OldX     <font color="#000080">: </font>Integer<font color="#000080">; </font><font color="#008000"><i>{ old x }

</i></font><font color="#FF0000"><b>BEGIN
  </b></font>S <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
  </font>CurColor <font color="#000080">:= </font>GetColor<font color="#000080">;
  </font>MoveTo<font color="#000080">(</font>X<font color="#000080">, </font>Y<font color="#000080">);
  </font>Done <font color="#000080">:= </font>False<font color="#000080">;
  </font><font color="#FF0000"><b>WHILE NOT </b></font>Done  <font color="#FF0000"><b>DO
  BEGIN
    </b></font>Ch <font color="#000080">:= </font>Readkey<font color="#000080">;  </font><font color="#008000"><i>{ get a single key }

    </i></font><font color="#FF0000"><b>CASE </b></font>Ch <font color="#FF0000"><b>of
      </b></font><font color="#800000">#0  </font><font color="#000080">: </font><font color="#008000"><i>{ extra key - two chars - let's ignore them }
        </i></font>Ch <font color="#000080">:= </font>Readkey<font color="#000080">;

      </font><font color="#800000">#13 </font><font color="#000080">: </font><font color="#008000"><i>{ return key }
        </i></font>Done <font color="#000080">:= </font>true<font color="#000080">; </font><font color="#008000"><i>{ we got our string, let's go }

      </i></font><font color="#800000">#32</font><font color="#000080">..</font><font color="#800000">#126</font><font color="#000080">:  </font><font color="#008000"><i>{ ASCII 32 (space) through 126 (tilde) }
        </i></font><font color="#FF0000"><b>BEGIN
          </b></font>OutText<font color="#000080">(</font>Ch<font color="#000080">);
          </font>S <font color="#000080">:= </font>Concat<font color="#000080">(</font>S<font color="#000080">, </font>Ch<font color="#000080">);
        </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

      </font><font color="#800000">#8  </font><font color="#000080">: </font><font color="#FF0000"><b>IF </b></font>Length<font color="#000080">(</font>S<font color="#000080">) &gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>THEN
        BEGIN
          </b></font><font color="#008000"><i>{ move back to last character }
          </i></font>OldX <font color="#000080">:= </font>GetX <font color="#000080">- </font>TextHeight<font color="#000080">(</font>S<font color="#000080">[</font>Length<font color="#000080">(</font>S<font color="#000080">)]);
          </font>MoveTo<font color="#000080">(</font>OldX<font color="#000080">, </font>GetY<font color="#000080">);
          </font><font color="#008000"><i>{ over write last character }
          </i></font>SetColor<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
          </font>OutText<font color="#000080">(</font>S<font color="#000080">[</font>Length<font color="#000080">(</font>S<font color="#000080">)]);
          </font>SetColor<font color="#000080">(</font>CurColor<font color="#000080">);
          </font>MoveTo<font color="#000080">(</font>OldX<font color="#000080">, </font>GetY<font color="#000080">);
          </font><font color="#008000"><i>{ remove last character from the string }
          </i></font>Delete<font color="#000080">(</font>S<font color="#000080">, </font>Length<font color="#000080">(</font>S<font color="#000080">), </font><font color="#800000">1</font><font color="#000080">);
        </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

    </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">; </font><font color="#008000"><i>{ ReadlnXY }



</i></font><font color="#FF0000"><b>VAR
  </b></font>GraphMode<font color="#000080">, </font>GraphDriver<font color="#000080">: </font>Integer<font color="#000080">;
  </font>Name<font color="#000080">, </font>PathToDriver<font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">;

</font><font color="#FF0000"><b>BEGIN

  </b></font>GraphDriver <font color="#000080">:= </font>VGA<font color="#000080">;            </font><font color="#008000"><i>{ VGA }
  </i></font>GraphMode <font color="#000080">:= </font>VGAHi<font color="#000080">;            </font><font color="#008000"><i>{ 640x480x16 }
  </i></font>PathToDriver <font color="#000080">:= </font><font color="#800000">'D:\BP\BGI'</font><font color="#000080">;   </font><font color="#008000"><i>{ path to EGAVGA.BGI }
     { you can make this program work with EGA 640x350x16 -
       it  requires 640 wide and 16 colors to work for this
       example, but ReadlnXY should work in any graphics mode }
  </i></font>InitGraph<font color="#000080">(</font>GraphDriver<font color="#000080">, </font>GraphMode<font color="#000080">, </font>PathToDriver<font color="#000080">); </font><font color="#008000"><i>{ set graphics mode }

  </i></font>SetTextStyle<font color="#000080">(</font>DefaultFont<font color="#000080">, </font>HorizDir<font color="#000080">, </font><font color="#800000">2</font><font color="#000080">);

  </font>SetColor<font color="#000080">(</font><font color="#800000">12</font><font color="#000080">);

  </font>OutTextXY<font color="#000080">(</font><font color="#800000">63</font><font color="#000080">, </font><font color="#800000">63</font><font color="#000080">, </font><font color="#800000">'Please enter your name: '</font><font color="#000080">);
  </font>SetColor<font color="#000080">(</font><font color="#800000">13</font><font color="#000080">);
  </font>ReadlnXY<font color="#000080">(</font><font color="#800000">63 </font><font color="#000080">,</font><font color="#800000">95</font><font color="#000080">, </font>Name<font color="#000080">);
  </font>CloseGraph<font color="#000080">;
  </font>Write<font color="#000080">(</font><font color="#800000">'The name you entered was: '</font><font color="#000080">);
  </font>Writeln<font color="#000080">(</font>Name<font color="#000080">);
</font><font color="#FF0000"><b>END</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0023.PAS">Original</a><b>]</b></p></body>
</html>
