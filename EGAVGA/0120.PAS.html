<html>
<head><title> "VGA Palette Code" by RODNEY JOHNSON</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0120.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#008000"><i>{ Here is the VGA palette changing code. }

</i></font><font color="#FF0000"><b>Unit </b></font>PalChg<font color="#000080">;
</font><font color="#FF0000"><b>Interface
USES </b></font>DOS<font color="#000080">;
</font><font color="#FF0000"><b>Type
  </b></font>TPalette16 <font color="#000080">= </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">15</font><font color="#000080">] </font><font color="#FF0000"><b>of array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">2</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte<font color="#000080">;
  </font>TPalette256 <font color="#000080">= </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">] </font><font color="#FF0000"><b>of array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">2</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>SetVGAPalette16<font color="#000080">(</font>PalBuf <font color="#000080">: </font>TPalette16<font color="#000080">);
</font><font color="#FF0000"><b>procedure </b></font>SetVGAPalette256<font color="#000080">(</font>PalBuf <font color="#000080">: </font>TPalette256<font color="#000080">);
</font><font color="#FF0000"><b>Implementation
procedure </b></font>SetVGAPalette16<font color="#000080">(</font>PalBuf <font color="#000080">: </font>TPalette16<font color="#000080">);
</font><font color="#FF0000"><b>var
  </b></font>Reg<font color="#000080">:</font>Registers<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>reg<font color="#000080">.</font>ax<font color="#000080">:=</font><font color="#800000">$1012</font><font color="#000080">;       </font><font color="#008000"><i>{Code for chg. palette}
  </i></font>reg<font color="#000080">.</font>bx<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;           </font><font color="#008000"><i>{start with color 0}
  </i></font>reg<font color="#000080">.</font>cx<font color="#000080">:=</font><font color="#800000">16</font><font color="#000080">;          </font><font color="#008000"><i>{change 16 colors}
  </i></font>reg<font color="#000080">.</font>es<font color="#000080">:=</font>Seg<font color="#000080">(</font>PalBuf<font color="#000080">); </font><font color="#008000"><i>{address: segment}
  </i></font>reg<font color="#000080">.</font>dx<font color="#000080">:=</font>Ofs<font color="#000080">(</font>PalBuf<font color="#000080">); </font><font color="#008000"><i>{address: offset}
  </i></font>intr<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">, </font>reg<font color="#000080">);      </font><font color="#008000"><i>{interrupt call}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>SetVGAPalette256<font color="#000080">(</font>PalBuf <font color="#000080">: </font>TPalette256<font color="#000080">);
</font><font color="#FF0000"><b>var
  </b></font>Reg<font color="#000080">:                                  </font>Registers<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>reg<font color="#000080">.</font>ax<font color="#000080">:=</font><font color="#800000">$1012</font><font color="#000080">;       </font><font color="#008000"><i>{code for chg. palette}
  </i></font>reg<font color="#000080">.</font>bx<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;           </font><font color="#008000"><i>{start with color 0}
  </i></font>reg<font color="#000080">.</font>cx<font color="#000080">:=</font><font color="#800000">256</font><font color="#000080">;         </font><font color="#008000"><i>{change 256 colors}
  </i></font>reg<font color="#000080">.</font>es<font color="#000080">:=</font>Seg<font color="#000080">(</font>PalBuf<font color="#000080">); </font><font color="#008000"><i>{address: segment}
  </i></font>reg<font color="#000080">.</font>dx<font color="#000080">:=</font>Ofs<font color="#000080">(</font>PalBuf<font color="#000080">); </font><font color="#008000"><i>{address: offset}
  </i></font>intr<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">, </font>reg<font color="#000080">);      </font><font color="#008000"><i>{interrupt call}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0120.PAS">Original</a><b>]</b></p></body>
</html>
