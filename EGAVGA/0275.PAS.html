<html>
<head><title> "Detect the DAC values" by ARNE DE BRUIJN</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0275.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#008000"><i>{ Display EGA palette (works only on VGA), Arne de Bruijn, Public Domain }
</i></font><font color="#FF0000"><b>function </b></font>EgaPal<font color="#000080">(</font>I<font color="#000080">:</font>byte<font color="#000080">):</font>byte<font color="#000080">; </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm
 </b></font><font color="#FF00FF">mov dx,3dah
 in al,dx         </font><font color="#008000"><i>{ Clear 3c0h flipflop }
 </i></font><font color="#FF00FF">mov dl,0c0h      </font><font color="#008000"><i>{ Set port no to 3c0h }
 </i></font><font color="#FF00FF">mov al,I
 out dx,al        </font><font color="#008000"><i>{ Write palette no to read, turns off screen }
 </i></font><font color="#FF00FF">inc dx           </font><font color="#008000"><i>{ Port 3c1h }
 </i></font><font color="#FF00FF">in al,dx         </font><font color="#008000"><i>{ Read color }
 </i></font><font color="#FF00FF">push ax          </font><font color="#008000"><i>{ Save }
 </i></font><font color="#FF00FF">mov dl,0dah      </font><font color="#008000"><i>{ Again clear flipflop }
 </i></font><font color="#FF00FF">in al,dx
 mov dl,0c0h
 mov al,32        </font><font color="#008000"><i>{ And turn on screen }
 </i></font><font color="#FF00FF">out dx,al
 pop ax           </font><font color="#008000"><i>{ Restore color }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>var
 </b></font>I<font color="#000080">:</font>byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
 for </b></font>I<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">15 </font><font color="#FF0000"><b>do
  </b></font>WriteLn<font color="#000080">(</font>I<font color="#000080">:</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">'. '</font><font color="#000080">,</font>EgaPal<font color="#000080">(</font>I<font color="#000080">));
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0275.PAS">Original</a><b>]</b></p></body>
</html>
