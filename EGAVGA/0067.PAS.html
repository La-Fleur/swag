<html>
<head><title> "Setting Video Mode" by MARC BIR</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0067.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
MARC BIR

&gt;My second problem is the video memory.  From my technical
&gt;reference manual, it tells me that the address starts at segment A000H,
&gt;offset 0000H.  I've been Programming the VGA 320x200x256 mode quite alot,
&gt;but in the EGA address, whenever I Write to video memory, all I see is
&gt;black and white, like monochrome.  if I will be happy if I get information
&gt;about that.  Another thing that actually question me is that when I'm
&gt;using the BIOS block palette to create a fade in/out, it makes the screen
&gt;flicker, which is quite disturbing.  What Info I need is how the VGA port
JS&gt;works on setting up the RGB palette.  Thanks.

How do you init. the mode?  Call int 10h With 13h?  if so then using
A000:0000 is correct.  As far as fading, use the following.
}

</i></font><font color="#FF0000"><b>Type
 </b></font>PalType <font color="#000080">= </font><font color="#FF0000"><b>Array </b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">2</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>SetPalette<font color="#000080">(</font>Color<font color="#000080">, </font>Count <font color="#000080">: </font>Byte<font color="#000080">; </font>Palette <font color="#000080">: </font>PalType<font color="#000080">);
</font><font color="#FF0000"><b>Var
  </b></font>Ct<font color="#000080">, </font>Col <font color="#000080">: </font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Port<font color="#000080">[</font><font color="#800000">$3C8</font><font color="#000080">] := </font>Color<font color="#000080">;     </font><font color="#008000"><i>{ First color to set, Change this to $3C7 to
                             read.  And switch the Port=Pal at bottom }
  </i></font><font color="#FF0000"><b>For </b></font>Ct <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>Count <font color="#FF0000"><b>Do  </b></font><font color="#008000"><i>{ Count is the total number of DACs to set }
  </i></font><font color="#FF0000"><b>For </b></font>Col <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">2 </font><font color="#FF0000"><b>Do     </b></font><font color="#008000"><i>{ Sets the Red, Green and Blue }
    </i></font>Port<font color="#000080">[</font><font color="#800000">$3C9</font><font color="#000080">] :=  </font>Palette<font color="#000080">[</font>Ct<font color="#000080">, </font>Col<font color="#000080">];
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>SetMode<font color="#000080">(</font>Mode <font color="#000080">: </font>Byte<font color="#000080">); </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm
  </b></font><font color="#FF00FF">Mov AH, 0
  Mov AL, Mode
  Int 10h
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{You can test your mode set With this }
</i></font><font color="#FF0000"><b>Procedure </b></font>TestScreen<font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>X<font color="#000080">, </font>Y <font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
 For </b></font>X <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">319 </font><font color="#FF0000"><b>Do
   For </b></font>Y <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">199 </font><font color="#FF0000"><b>Do
     </b></font>Mem<font color="#000080">[</font><font color="#800000">$A000 </font><font color="#000080">: </font>Y <font color="#000080">* </font><font color="#800000">320 </font><font color="#000080">+ </font>X<font color="#000080">] := (</font>X <font color="#000080">* </font>Y<font color="#000080">) </font><font color="#FF0000"><b>Mod </b></font><font color="#800000">256</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>SetMode<font color="#000080">(</font><font color="#800000">$13</font><font color="#000080">);
  </font>TestScreen<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0067.PAS">Original</a><b>]</b></p></body>
</html>
