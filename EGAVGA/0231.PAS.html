<html>
<head><title> "Texture Mapping" by ALEX CHALFIN & KRIS VERBEECK</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0231.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt; I'm hoping that some kind soul, possibly even the author, might be
&gt; willing to repost this valuable source (that we can ALL learn off of),
&gt; or lead me in the right direction to find it.

I don't know whether we have the same piece of code in mind, but I also read
that message and copied it.  But I did some altering.  If you would settle with
my (altered) source code, then here it is:
}
{===========================================================================}
{                                                                           }
{ Name         TEXTMAP.TPU                                                  }
{ Description  Unit used for texture mapping.                               }
{ Version      1.0                                                          }
{                                                                           }
{ Author       Alex Chalfin 1:108/180 (adapted by Kris Verbeeck)            }
{ Last update  9th Sep, 1994                                                }
{                                                                           }
{===========================================================================}


</i></font><font color="#FF0000"><b>UNIT </b></font>TextMap<font color="#000080">;


</font><font color="#008000"><i>{$N+}


{===[ Interface part ]======================================================}


</i></font><font color="#FF0000"><b>INTERFACE


</b></font><font color="#008000"><i>{---[ Units used in interface part ]----------------------------------------}


 </i></font><font color="#FF0000"><b>USES
  </b></font>VGA<font color="#000080">;


</font><font color="#008000"><i>{---[ Global constants ]----------------------------------------------------}


 </i></font><font color="#FF0000"><b>CONST
  </b></font>_TOP   <font color="#000080">=  </font><font color="#800000">1</font><font color="#000080">;
  </font>_BOTTOM  <font color="#000080">=  </font><font color="#800000">2</font><font color="#000080">;
  </font>_LEFT  <font color="#000080">=  </font><font color="#800000">3</font><font color="#000080">;
  </font>_RIGHT  <font color="#000080">=  </font><font color="#800000">4</font><font color="#000080">;


</font><font color="#008000"><i>{---[ Global Types ]--------------------------------------------------------}


 </i></font><font color="#FF0000"><b>TYPE
  </b></font>Corners <font color="#000080">= </font><font color="#FF0000"><b>ARRAY</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">3</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Point2D<font color="#000080">;

  </font>Bitmap <font color="#000080">= </font><font color="#FF0000"><b>RECORD
       </b></font>xs<font color="#000080">, </font>ys <font color="#000080">: </font>INTEGER<font color="#000080">;
       </font>image  <font color="#000080">: </font>POINTER<font color="#000080">;
      </font><font color="#FF0000"><b>END</b></font><font color="#000080">;


</font><font color="#008000"><i>{---[ Global Variables ]----------------------------------------------------}


 { VAR
   none }


{---[ Global Routines ]-----------------------------------------------------}


 </i></font><font color="#FF0000"><b>PROCEDURE </b></font>TextureMap<font color="#000080">( </font>fp<font color="#000080">, </font>tp <font color="#000080">: </font>Corners<font color="#000080">; </font>b <font color="#000080">: </font>Bitmap <font color="#000080">);
 </font><font color="#008000"><i>{ -- Maps the 4 point polygon bitmap 'fp' to another 4 point
      polygon 'tp' }


{===[ Implementation part ]=================================================}


</i></font><font color="#FF0000"><b>IMPLEMENTATION


</b></font><font color="#008000"><i>{---[ Units used in implementation part ]-----------------------------------}


 { USES
   none }


{---[ Local constants ]-----------------------------------------------------}


 { CONST
   none }


{---[ Local Types ]---------------------------------------------------------}


 { TyPE
   none; }


{---[ Local Variables ]-----------------------------------------------------}


 </i></font><font color="#FF0000"><b>VAR
  </b></font>LeftTable<font color="#000080">, </font>RightTable  <font color="#000080">:  </font><font color="#FF0000"><b>ARRAY</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">199</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">2</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>INTEGER<font color="#000080">;

  </font>Max_y<font color="#000080">, </font>Min_y     <font color="#000080">:  </font>INTEGER<font color="#000080">;
  </font>LineHeight      <font color="#000080">:  </font>INTEGER<font color="#000080">;

  </font>PWidth<font color="#000080">, </font>PHeight   <font color="#000080">: </font>INTEGER<font color="#000080">;
  </font>Px0<font color="#000080">, </font>Py0      <font color="#000080">: </font>INTEGER<font color="#000080">;


</font><font color="#008000"><i>{---[ Local Routines ]------------------------------------------------------}


 </i></font><font color="#FF0000"><b>PROCEDURE </b></font>Swap<font color="#000080">( </font><font color="#FF0000"><b>VAR </b></font>a<font color="#000080">, </font>b <font color="#000080">: </font>INTEGER<font color="#000080">);
 </font><font color="#FF0000"><b>VAR
  </b></font>aux <font color="#000080">: </font>INTEGER<font color="#000080">;
 </font><font color="#FF0000"><b>BEGIN
  </b></font>aux <font color="#000080">:= </font>a<font color="#000080">;
  </font>a   <font color="#000080">:= </font>b<font color="#000080">;
  </font>b   <font color="#000080">:= </font>aux<font color="#000080">;
 </font><font color="#FF0000"><b>END</b></font><font color="#000080">;


 </font><font color="#FF0000"><b>PROCEDURE </b></font>FindMaxMin<font color="#000080">( </font>p <font color="#000080">: </font>Corners <font color="#000080">); </font><font color="#008000"><i>{ASSEMBLER;}
 </i></font><font color="#FF0000"><b>VAR
  </b></font>i <font color="#000080">: </font>INTEGER<font color="#000080">;
 </font><font color="#FF0000"><b>BEGIN
  </b></font>Min_y <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>Max_y <font color="#000080">:= </font><font color="#800000">32000</font><font color="#000080">;
  </font><font color="#FF0000"><b>FOR </b></font>i <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>TO </b></font><font color="#800000">3 </font><font color="#FF0000"><b>DO BEGIN
   IF </b></font><font color="#000080">(</font>p<font color="#000080">[</font>i<font color="#000080">].</font>y <font color="#000080">&lt; </font>Min_y<font color="#000080">) </font><font color="#FF0000"><b>THEN
    </b></font>Min_y <font color="#000080">:= </font>p<font color="#000080">[</font>i<font color="#000080">].</font>y<font color="#000080">;
   </font><font color="#FF0000"><b>IF </b></font><font color="#000080">(</font>p<font color="#000080">[</font>i<font color="#000080">].</font>y <font color="#000080">&gt; </font>Max_y<font color="#000080">) </font><font color="#FF0000"><b>THEN
    </b></font>Max_y <font color="#000080">:= </font>p<font color="#000080">[</font>i<font color="#000080">].</font>y<font color="#000080">;
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
</font><font color="#008000"><i>(* ASM
   mov   Max_y,0000h
   mov Min_y,7FFFh
   les bx,p
   add bx,2       { Point to first y-coord }
   mov cx,0004h                { Check 4 coords }
  @Loop:
   mov ax,es:[bx]     { Get first y-coord }
   cmp ax,Min_y
   ja  @NotLower
   mov Min_y,ax
  @NotLower:
   cmp ax,Max_y
   jb  @NotHigher
   mov Max_y,ax
  @NotHigher:
   add bx,4       { Point to next y-coord }
   loop @Loop
 END;*)

 </i></font><font color="#FF0000"><b>PROCEDURE </b></font>ScanLeft<font color="#000080">( </font>x1<font color="#000080">, </font>x2<font color="#000080">, </font>y1<font color="#000080">, </font>lh<font color="#000080">, </font>side <font color="#000080">: </font>INTEGER <font color="#000080">);
 </font><font color="#FF0000"><b>VAR
  </b></font>y           <font color="#000080">: </font>INTEGER<font color="#000080">;
  </font>xAdd<font color="#000080">, </font>Px<font color="#000080">, </font>Py<font color="#000080">, </font>PxAdd<font color="#000080">, </font>PyAdd<font color="#000080">, </font>x <font color="#000080">: </font>SINGLE<font color="#000080">;
 </font><font color="#FF0000"><b>BEGIN
  </b></font>lh <font color="#000080">:= </font>lh <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
  </font>xAdd <font color="#000080">:= (</font>x2<font color="#000080">-</font>x1<font color="#000080">)/</font>lh<font color="#000080">;
  </font><font color="#FF0000"><b>CASE </b></font>side <font color="#FF0000"><b>OF
   </b></font>_TOP  <font color="#000080">: </font><font color="#FF0000"><b>BEGIN
        </b></font>Px <font color="#000080">:= </font>PWidth<font color="#000080">;
        </font>Py <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
        </font>PxAdd <font color="#000080">:= -</font>PWidth<font color="#000080">/</font>lh<font color="#000080">;
        </font>PyAdd <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
       </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
   </font>_RIGHT <font color="#000080">: </font><font color="#FF0000"><b>BEGIN
        </b></font>Px <font color="#000080">:= </font>PWidth<font color="#000080">;
        </font>Py <font color="#000080">:= </font>PHeight<font color="#000080">;
        </font>PxAdd <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
        </font>PyAdd <font color="#000080">:= -</font>PHeight<font color="#000080">/</font>lh<font color="#000080">;
       </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
   </font>_BOTTOM <font color="#000080">: </font><font color="#FF0000"><b>BEGIN
        </b></font>Px <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
        </font>Py <font color="#000080">:= </font>PHeight<font color="#000080">;
        </font>PxAdd <font color="#000080">:= </font>PWidth<font color="#000080">/</font>lh<font color="#000080">;
        </font>PyAdd <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
       </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
   </font>_LEFT  <font color="#000080">: </font><font color="#FF0000"><b>BEGIN
        </b></font>Px <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
        </font>Py <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
        </font>PxAdd <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
        </font>PyAdd <font color="#000080">:= </font>PHeight<font color="#000080">/</font>lh<font color="#000080">;
       </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
  </font>x <font color="#000080">:= </font>x1<font color="#000080">;
  </font><font color="#FF0000"><b>FOR </b></font>y <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>TO </b></font>lh <font color="#FF0000"><b>DO BEGIN
   </b></font>LeftTable<font color="#000080">[</font>y1<font color="#000080">+</font>y<font color="#000080">, </font><font color="#800000">0</font><font color="#000080">] := </font>Round<font color="#000080">(</font>x<font color="#000080">);
   </font>LeftTable<font color="#000080">[</font>y1<font color="#000080">+</font>y<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">] := </font>Round<font color="#000080">(</font>Px<font color="#000080">);
   </font>LeftTable<font color="#000080">[</font>y1<font color="#000080">+</font>y<font color="#000080">, </font><font color="#800000">2</font><font color="#000080">] := </font>Round<font color="#000080">(</font>Py<font color="#000080">);
   </font>x <font color="#000080">:= </font>x <font color="#000080">+ </font>xAdd<font color="#000080">;
   </font>Px <font color="#000080">:= </font>Px <font color="#000080">+ </font>PxAdd<font color="#000080">;
   </font>Py <font color="#000080">:= </font>Py <font color="#000080">+ </font>PyAdd<font color="#000080">;
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>END</b></font><font color="#000080">;


 </font><font color="#FF0000"><b>PROCEDURE </b></font>ScanRight<font color="#000080">( </font>x1<font color="#000080">, </font>x2<font color="#000080">, </font>y1<font color="#000080">, </font>lh<font color="#000080">, </font>side <font color="#000080">: </font>INTEGER <font color="#000080">);
 </font><font color="#FF0000"><b>VAR
  </b></font>y           <font color="#000080">: </font>INTEGER<font color="#000080">;
  </font>xAdd<font color="#000080">, </font>Px<font color="#000080">, </font>Py<font color="#000080">, </font>PxAdd<font color="#000080">, </font>PyAdd<font color="#000080">, </font>x <font color="#000080">: </font>SINGLE<font color="#000080">;
 </font><font color="#FF0000"><b>BEGIN
  </b></font>lh <font color="#000080">:= </font>lh <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
  </font>xAdd <font color="#000080">:= (</font>x2<font color="#000080">-</font>x1<font color="#000080">)/</font>lh<font color="#000080">;
  </font><font color="#FF0000"><b>CASE </b></font>side <font color="#FF0000"><b>OF
   </b></font>_TOP  <font color="#000080">: </font><font color="#FF0000"><b>BEGIN
        </b></font>Px <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
        </font>Py <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
        </font>PxAdd <font color="#000080">:= </font>PWidth<font color="#000080">/</font>lh<font color="#000080">;
        </font>PyAdd <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
       </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
   </font>_RIGHT <font color="#000080">: </font><font color="#FF0000"><b>BEGIN
        </b></font>Px <font color="#000080">:= </font>PWidth<font color="#000080">;
        </font>Py <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
        </font>PxAdd <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
        </font>PyAdd <font color="#000080">:= </font>PHeight<font color="#000080">/</font>lh<font color="#000080">;
       </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
   </font>_BOTTOM <font color="#000080">: </font><font color="#FF0000"><b>BEGIN
        </b></font>Px <font color="#000080">:= </font>PWidth<font color="#000080">;
        </font>Py <font color="#000080">:= </font>PHeight<font color="#000080">;
        </font>PxAdd <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
        </font>PyAdd <font color="#000080">:= -</font>PHeight<font color="#000080">/</font>lh<font color="#000080">;
       </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
   </font>_LEFT  <font color="#000080">: </font><font color="#FF0000"><b>BEGIN
        </b></font>Px <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
        </font>Py <font color="#000080">:= </font>PHeight<font color="#000080">;
        </font>PxAdd <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
        </font>PyAdd <font color="#000080">:= -</font>PHeight<font color="#000080">/</font>lh<font color="#000080">;
       </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
  </font>x <font color="#000080">:= </font>x1<font color="#000080">;
  </font><font color="#FF0000"><b>FOR </b></font>y <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>TO </b></font>lh <font color="#FF0000"><b>DO BEGIN
   </b></font>RightTable<font color="#000080">[</font>y1<font color="#000080">+</font>y<font color="#000080">, </font><font color="#800000">0</font><font color="#000080">] := </font>Round<font color="#000080">(</font>x<font color="#000080">);
   </font>RightTable<font color="#000080">[</font>y1<font color="#000080">+</font>y<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">] := </font>Round<font color="#000080">(</font>Px<font color="#000080">);
   </font>RightTable<font color="#000080">[</font>y1<font color="#000080">+</font>y<font color="#000080">, </font><font color="#800000">2</font><font color="#000080">] := </font>Round<font color="#000080">(</font>Py<font color="#000080">);
   </font>x <font color="#000080">:= </font>x <font color="#000080">+ </font>xAdd<font color="#000080">;
   </font>Px <font color="#000080">:= </font>Px <font color="#000080">+ </font>PxAdd<font color="#000080">;
   </font>Py <font color="#000080">:= </font>Py <font color="#000080">+ </font>PyAdd<font color="#000080">;
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

 </font><font color="#FF0000"><b>PROCEDURE </b></font>ScanConvert<font color="#000080">( </font>x1<font color="#000080">, </font>y1<font color="#000080">, </font>x2<font color="#000080">, </font>y2<font color="#000080">, </font>PLoc <font color="#000080">: </font>INTEGER <font color="#000080">);
 </font><font color="#FF0000"><b>BEGIN
  IF </b></font><font color="#000080">(</font>y2 <font color="#000080">&lt; </font>y1<font color="#000080">) </font><font color="#FF0000"><b>THEN BEGIN
   </b></font>Swap<font color="#000080">( </font>x1<font color="#000080">, </font>x2 <font color="#000080">);
   </font>Swap<font color="#000080">( </font>y1<font color="#000080">, </font>y2 <font color="#000080">);
   </font>LineHeight <font color="#000080">:= </font>y2 <font color="#000080">- </font>y1<font color="#000080">;
   </font>ScanLeft<font color="#000080">( </font>x1<font color="#000080">, </font>x2<font color="#000080">, </font>y1<font color="#000080">, </font>LineHeight<font color="#000080">, </font>PLoc <font color="#000080">);
  </font><font color="#FF0000"><b>END ELSE BEGIN
   </b></font>LineHeight <font color="#000080">:= </font>y2 <font color="#000080">- </font>y1<font color="#000080">;
   </font>ScanRight<font color="#000080">( </font>x1<font color="#000080">, </font>x2<font color="#000080">, </font>y1<font color="#000080">, </font>LineHeight<font color="#000080">, </font>PLoc <font color="#000080">);
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

 </font><font color="#FF0000"><b>PROCEDURE </b></font>DoMapping<font color="#000080">( </font>b <font color="#000080">: </font>Bitmap <font color="#000080">);
 </font><font color="#FF0000"><b>VAR
  </b></font>lw<font color="#000080">, </font>x<font color="#000080">, </font>y<font color="#000080">, </font>Px<font color="#000080">, </font>Py          <font color="#000080">: </font>INTEGER<font color="#000080">;
  </font>Polyx1<font color="#000080">, </font>Polyx2<font color="#000080">, </font>Px1<font color="#000080">, </font>Px2<font color="#000080">, </font>Py1<font color="#000080">, </font>Py2<font color="#000080">, </font>PxA<font color="#000080">, </font>PyA <font color="#000080">: </font>SINGLE<font color="#000080">;
  </font>color              <font color="#000080">: </font>BYTE<font color="#000080">;
 </font><font color="#FF0000"><b>BEGIN
  FOR </b></font>y <font color="#000080">:= </font>Min_y <font color="#FF0000"><b>TO </b></font>Max_y <font color="#FF0000"><b>DO BEGIN
   </b></font>Polyx1 <font color="#000080">:= </font>LeftTable<font color="#000080">[</font>y<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">];
   </font>Px1 <font color="#000080">:= </font>LeftTable<font color="#000080">[</font>y<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">];
   </font>Py1 <font color="#000080">:= </font>LeftTable<font color="#000080">[</font>y<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">];

   </font>Polyx2 <font color="#000080">:= </font>RightTable<font color="#000080">[</font>y<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">];
   </font>Px2 <font color="#000080">:= </font>RightTable<font color="#000080">[</font>y<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">];
   </font>Py2 <font color="#000080">:= </font>RightTable<font color="#000080">[</font>y<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">];

   </font>lw <font color="#000080">:= </font>Round<font color="#000080">(</font>Polyx2<font color="#000080">-</font>Polyx1<font color="#000080">);
   </font>lw <font color="#000080">:= </font>lw <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;

   </font>PxA <font color="#000080">:= (</font>Px2<font color="#000080">-</font>Px1<font color="#000080">)/</font>lw<font color="#000080">;
   </font>PyA <font color="#000080">:= (</font>Py2<font color="#000080">-</font>Py1<font color="#000080">)/</font>lw<font color="#000080">;

   </font><font color="#FF0000"><b>FOR </b></font>x <font color="#000080">:= </font>Round<font color="#000080">(</font>Polyx1<font color="#000080">) </font><font color="#FF0000"><b>TO </b></font>Round<font color="#000080">(</font>Polyx2<font color="#000080">) </font><font color="#FF0000"><b>DO BEGIN

    </b></font>Px <font color="#000080">:= </font>Round<font color="#000080">(</font>Px1<font color="#000080">);
    </font>Py <font color="#000080">:= </font>Round<font color="#000080">(</font>Py1<font color="#000080">);
    </font><font color="#FF0000"><b>ASM
      </b></font><font color="#FF00FF">push ds

      mov ax,Py0
      add ax,Py
      mul b.xs
      add ax,Px0
      add ax,Px
      lds si,b.image
      add si,ax

      mov ax,y
      mov bx,ax
      shl ax,8
      shl bx,6
      add ax,bx
      add ax,x
      mov di,VSEG
      mov es,di
      mov di,ax

      movsb

      pop ds
    </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
    </font>Px1 <font color="#000080">:= </font>Px1 <font color="#000080">+ </font>PxA<font color="#000080">;
    </font>Py1 <font color="#000080">:= </font>Py1 <font color="#000080">+ </font>PyA<font color="#000080">;
   </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>END</b></font><font color="#000080">;


</font><font color="#008000"><i>{---[ Implementation of Global routines ]-----------------------------------}


 </i></font><font color="#FF0000"><b>PROCEDURE </b></font>TextureMap<font color="#000080">( </font>fp<font color="#000080">, </font>tp <font color="#000080">: </font>Corners<font color="#000080">; </font>b <font color="#000080">: </font>Bitmap <font color="#000080">);
 </font><font color="#FF0000"><b>BEGIN
  </b></font>FindMaxMin<font color="#000080">( </font>tp <font color="#000080">);

  </font>PWidth <font color="#000080">:= </font>fp<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>x <font color="#000080">- </font>fp<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">].</font>x<font color="#000080">;
  </font>PHeight <font color="#000080">:= </font>fp<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">].</font>y <font color="#000080">- </font>fp<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>y<font color="#000080">;

  </font>Px0 <font color="#000080">:= </font>fp<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">].</font>x<font color="#000080">;
  </font>Py0 <font color="#000080">:= </font>fp<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">].</font>y<font color="#000080">;

  </font>ScanConvert<font color="#000080">( </font>tp<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">].</font>x<font color="#000080">, </font>tp<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">].</font>y<font color="#000080">, </font>tp<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>x<font color="#000080">, </font>tp<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>y<font color="#000080">, </font>_TOP <font color="#000080">);
  </font>ScanConvert<font color="#000080">( </font>tp<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>x<font color="#000080">, </font>tp<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">].</font>y<font color="#000080">, </font>tp<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">].</font>x<font color="#000080">, </font>tp<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">].</font>y<font color="#000080">, </font>_RIGHT <font color="#000080">);
  </font>ScanConvert<font color="#000080">( </font>tp<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">].</font>x<font color="#000080">, </font>tp<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">].</font>y<font color="#000080">, </font>tp<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">].</font>x<font color="#000080">, </font>tp<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">].</font>y<font color="#000080">, </font>_BOTTOM <font color="#000080">);
  </font>ScanConvert<font color="#000080">( </font>tp<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">].</font>x<font color="#000080">, </font>tp<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">].</font>y<font color="#000080">, </font>tp<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">].</font>x<font color="#000080">, </font>tp<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">].</font>y<font color="#000080">, </font>_LEFT <font color="#000080">);

  </font>DoMapping<font color="#000080">( </font>b <font color="#000080">);
 </font><font color="#FF0000"><b>END</b></font><font color="#000080">;


</font><font color="#008000"><i>{===[ Unit initialization part ]============================================}


 { none }

</i></font><font color="#FF0000"><b>END</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0231.PAS">Original</a><b>]</b></p></body>
</html>
