<html>
<head><title> "VESA point routine 640x480x16 Plot" by OLAF BARTELT</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0135.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#008000"><i>{
&gt; I don't see the need for Ystart.  Offset address =
well, Ystart is needed basically because I'm using two pages, and depending
on which page is visible at the time, ystart varies...

&gt; (BytesPerScanLine * y)+x. Point_VESA should not XOR AX,AX after
&gt; @skip.  The AH contains the error return from $4f05 function.
&gt; AH=00h is success.

ok, but this doesn't solve my problem...  my problem is that I always get to
'see' the wrong colors - I don't mind which error codes there are :-))

&gt; P.S.  Can you show me how to VESA PutPixel to 640x480x16 without using BGI?
sure, but 640x480x16 still is a normal VGA and not a VESA mode:
}

</i></font><font color="#FF0000"><b>PROCEDURE </b></font>plot_640x480x16<font color="#000080">; </font><font color="#FF0000"><b>ASSEMBLER</b></font><font color="#000080">;
</font><font color="#FF0000"><b>ASM
  </b></font><font color="#FF00FF">MOV ES, SEGA000
  MOV DI, px
  MOV CX, DI
  SHR DI, 3
  MOV AX, py
  SHL AX, 4
  ADD DI, AX
  SHL AX, 2
  ADD DI, AX
  AND CL, $07
  MOV AH, $80
  SHR AH, CL
  MOV AL, $08
  MOV DX, $03CE
  OUT DX, AX
  MOV AX, pc
  MOV AH, [ES:DI]
  MOV [ES:DI], AL
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#008000"><i>{
this should work (as always: px,py are the coordinates and pc is the color
(all global INTEGERs)
}</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0135.PAS">Original</a><b>]</b></p></body>
</html>
