<html>
<head><title> "Initialize BGI Interface" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0015.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
The following Unit contains one Function.  This Function will initialize the
Borland BGI Interface in a Turbo Pascal Program.  I wrote this Unit in TP
5.5, but it should work For all versions of TP after 4.0.

The Function performs two actions which I think can help Graphics Programs
immensely.  The first is to obtain the path For the BGI (and CHR) drivers
from an environmental Variable BGIDIR.  The second action is to edit the
driver and mode passed to the initialization Unit against what is detected
by TP.  The Function returns a Boolean to say if it was able to successfully
initialize the driver.

I hope this helps someone.
}

</i></font><font color="#FF0000"><b>Unit </b></font>GrphInit<font color="#000080">;

</font><font color="#FF0000"><b>Interface

Uses
        </b></font>Dos<font color="#000080">,
        </font>Graph<font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Init_Graphics <font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>GraphDriver<font color="#000080">, </font>GraphMode <font color="#000080">: </font>Integer<font color="#000080">) : </font>Boolean<font color="#000080">;
</font><font color="#008000"><i>{        This Function will initialize the Turbo Graphics For the requested
        Graphics mode if and only if the requested mode is valid For the
        machine the Function is run in.  Another feature of this Function is
        that it will look For an environmental Variable named 'BGIDIR'.  If
        this Variable is found, it will attempt to initialize the Graphics
        mode looking For the BGI driver using the String associated With BGIDIR
        as the path.  If the correct BGI driver is not available, or if there is
        not BGIDIR Variable in the environment, it will attempt to initialize
        using the current directory. }


</i></font><font color="#FF0000"><b>Implementation

Function </b></font>Init_Graphics <font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>GraphDriver<font color="#000080">, </font>GraphMode <font color="#000080">: </font>Integer<font color="#000080">) : </font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>Const
        </b></font>ENV_BGI_PATH <font color="#000080">= </font><font color="#800000">'BGIDIR'</font><font color="#000080">;
</font><font color="#FF0000"><b>Var
        </b></font>BGI_Path        <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
        </b></font><font color="#008000"><i>{ Default to not work }
        </i></font>Init_Graphics <font color="#000080">:= </font>False<font color="#000080">;
  </font>BGI_Path <font color="#000080">:= </font>GetEnv<font color="#000080">(</font>ENV_BGI_PATH<font color="#000080">);
        </font>InitGraph<font color="#000080">(</font>GraphDriver<font color="#000080">,</font>GraphMode<font color="#000080">,</font>BGI_Path<font color="#000080">);
        </font><font color="#FF0000"><b>if </b></font>GraphResult <font color="#000080">= </font>grOk <font color="#FF0000"><b>then
                 </b></font>Init_Graphics <font color="#000080">:= </font>True
        <font color="#FF0000"><b>Else
  begin </b></font><font color="#008000"><i>{ Try current Directory }
                </i></font>InitGraph<font color="#000080">(</font>GraphDriver<font color="#000080">,</font>GraphMode<font color="#000080">,</font><font color="#800000">''</font><font color="#000080">);
                </font><font color="#FF0000"><b>if </b></font>GraphResult <font color="#000080">= </font>grOk <font color="#FF0000"><b>then
                        </b></font>Init_Graphics <font color="#000080">:= </font>True<font color="#000080">;
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ Try current Directory }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ Function Init_Graphics }

</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">.


</font><font color="#008000"><i>{
 Example File :

Uses
  Graph, GrphInit;

Const
  Gd     : Integer = 0;
  Gm     : Integer = 0;
begin
  Init_Graphics(Gd, Gm);
  Line(10,10,40,40);
  Readln;
end.
}</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0015.PAS">Original</a><b>]</b></p></body>
</html>
