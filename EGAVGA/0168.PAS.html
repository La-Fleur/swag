<html>
<head><title> "ANIVGA Wormhole" by JOHN HOWARD</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0168.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#008000"><i>{$A+,B-,D+,L+,N-,E-,O-,Q-,R-,S-,V-,G-,F-,I-,X-}   {Borland Pascal 7.0}
{$M 16384,0,655360}
{ File: HI_Worm.pas
  Version: 1.0
  Date: 27-AUGUST-94
  Author: John Howard  jh
  ANIVGA v1.2 implementation of Wormhole from Bas van Gaalen.  Demonstrates
  Pascal routines needed for 320x200x256x4.  I have modified ANIVGA v1.2 to
  provide 320x240x256x4 (not shown here).  The TeleGame (tm) software
  development kit (SDK) utilizes both modes.  TeleGame SDK combines enhanced
  ANIVGA with a multi-user communication protocol and some utilities.  The SDK
  provides a Turbo Pascal development system for VGA game developers.  Release
  date is October 1.

  TeleGame (tm) products are available exclusively via:
                            Howard International
                            P.O. BOX 34633
                            North Kansas City, Missouri 64116  USA
}
</i></font><font color="#FF0000"><b>program </b></font>Hi_Worm<font color="#000080">;
</font><font color="#FF0000"><b>USES
    </b></font>ANIVGA<font color="#000080">,                       </font><font color="#008000"><i>{v1.2}
    </i></font>CRT<font color="#000080">;

</font><font color="#FF0000"><b>const
    </b></font>divd<font color="#000080">=</font><font color="#800000">128</font><font color="#000080">;
    </font>astep<font color="#000080">=</font><font color="#800000">5</font><font color="#000080">;
    </font>xst<font color="#000080">=</font><font color="#800000">3</font><font color="#000080">;
    </font>yst<font color="#000080">=</font><font color="#800000">5</font><font color="#000080">;

</font><font color="#FF0000"><b>var
  </b></font>sintab <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">449</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>integer<font color="#000080">;
  </font>stab<font color="#000080">,</font>ctab <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>integer<font color="#000080">;
  </font>lstep <font color="#000080">: </font>byte<font color="#000080">;


</font><font color="#FF0000"><b>procedure </b></font>drawpolar<font color="#000080">(</font>xo<font color="#000080">,</font>yo<font color="#000080">,</font>r<font color="#000080">,</font>a <font color="#000080">: </font>word<font color="#000080">; </font>c <font color="#000080">: </font>byte<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>x<font color="#000080">,</font>y <font color="#000080">: </font>word<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>x<font color="#000080">:=</font><font color="#800000">160</font><font color="#000080">+</font>xo<font color="#000080">+(</font>r<font color="#000080">*</font>sintab<font color="#000080">[</font><font color="#800000">90</font><font color="#000080">+</font>a<font color="#000080">]) </font><font color="#FF0000"><b>div </b></font><font color="#000080">(</font>divd<font color="#000080">-</font><font color="#800000">20</font><font color="#000080">);
  </font>y<font color="#000080">:=</font><font color="#800000">100</font><font color="#000080">+</font>yo<font color="#000080">+(</font>r<font color="#000080">*</font>sintab<font color="#000080">[</font>a<font color="#000080">]) </font><font color="#FF0000"><b>div </b></font>divd<font color="#000080">;
  </font>PutPixel<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>c<font color="#000080">);
  </font><font color="#008000"><i>{ if (x&lt;320) and (y&lt;200) then mem[lvseg:320*y+x] := c; }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>VAR
    </b></font>x<font color="#000080">,</font>y<font color="#000080">,</font>i<font color="#000080">,</font>j <font color="#000080">: </font>word<font color="#000080">;
    </font>c <font color="#000080">: </font>byte<font color="#000080">;
    </font>ch <font color="#000080">: </font>char<font color="#000080">;

</font><font color="#FF0000"><b>BEGIN  </b></font><font color="#008000"><i>{PROGRAM}
  </i></font>InitGraph<font color="#000080">;
  </font>Animate<font color="#000080">; </font><font color="#008000"><i>{just to initialize pages, eventually placed sprites}

  </i></font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do begin
    </b></font>ctab<font color="#000080">[</font>i<font color="#000080">]:=</font>round<font color="#000080">(</font>cos<font color="#000080">(</font>pi<font color="#000080">*</font>i<font color="#000080">/</font><font color="#800000">128</font><font color="#000080">)*</font><font color="#800000">60</font><font color="#000080">);
    </font>stab<font color="#000080">[</font>i<font color="#000080">]:=</font>round<font color="#000080">(</font>sin<font color="#000080">(</font>pi<font color="#000080">*</font>i<font color="#000080">/</font><font color="#800000">128</font><font color="#000080">)*</font><font color="#800000">45</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">449 </font><font color="#FF0000"><b>do </b></font>sintab<font color="#000080">[</font>i<font color="#000080">]:=</font>round<font color="#000080">(</font>sin<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">*</font>pi<font color="#000080">*</font>i<font color="#000080">/</font><font color="#800000">360</font><font color="#000080">)*</font>divd<font color="#000080">);

  </font><font color="#008000"><i>{clearscreen(page);}
  </i></font>x<font color="#000080">:=</font><font color="#800000">30</font><font color="#000080">; </font>y<font color="#000080">:=</font><font color="#800000">90</font><font color="#000080">;
  </font><font color="#FF0000"><b>repeat
    </b></font>c<font color="#000080">:=</font><font color="#800000">19</font><font color="#000080">; </font>lstep<font color="#000080">:=</font><font color="#800000">2</font><font color="#000080">; </font>j<font color="#000080">:=</font><font color="#800000">10</font><font color="#000080">;
    </font><font color="#FF0000"><b>while </b></font>j<font color="#000080">&lt;</font><font color="#800000">220 </font><font color="#FF0000"><b>do begin
      </b></font>i<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
      </font><font color="#FF0000"><b>while </b></font>i<font color="#000080">&lt;</font><font color="#800000">360 </font><font color="#FF0000"><b>do begin
        </b></font>drawpolar<font color="#000080">(</font>ctab<font color="#000080">[(</font>x<font color="#000080">+(</font><font color="#800000">200</font><font color="#000080">-</font>j<font color="#000080">)) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">],</font>stab<font color="#000080">[(</font>y<font color="#000080">+(</font><font color="#800000">200</font><font color="#000080">-</font>j<font color="#000080">)) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">],</font>j<font color="#000080">,</font>i<font color="#000080">,</font>c<font color="#000080">);
        </font>inc<font color="#000080">(</font>i<font color="#000080">,</font>astep<font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font>inc<font color="#000080">(</font>j<font color="#000080">,</font>lstep<font color="#000080">);
      </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>j <font color="#FF0000"><b>mod </b></font><font color="#800000">3</font><font color="#000080">)=</font><font color="#800000">0 </font><font color="#FF0000"><b>then
      begin
        </b></font>inc<font color="#000080">(</font>lstep<font color="#000080">);
        </font>inc<font color="#000080">(</font>c<font color="#000080">);
        </font><font color="#FF0000"><b>if </b></font>c<font color="#000080">&gt;</font><font color="#800000">31 </font><font color="#FF0000"><b>then </b></font>c<font color="#000080">:=</font><font color="#800000">31</font><font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>x<font color="#000080">:=</font>xst<font color="#000080">+</font>x <font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">;
    </font>y<font color="#000080">:=</font>yst<font color="#000080">+</font>y <font color="#FF0000"><b>mod </b></font><font color="#800000">255</font><font color="#000080">;
    </font>ANIMATE<font color="#000080">;
  </font><font color="#FF0000"><b>until </b></font>keypressed<font color="#000080">;
  </font><font color="#FF0000"><b>while </b></font>keypressed <font color="#FF0000"><b>do </b></font>ch<font color="#000080">:=</font>readkey<font color="#000080">;
  </font>CloseRoutines<font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">.   </font><font color="#008000"><i>{PROGRAM}
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0168.PAS">Original</a><b>]</b></p></body>
</html>
