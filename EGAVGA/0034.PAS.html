<html>
<head><title> "STARS2.PAS" by DANIEL SCHLENZIG</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0034.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{ DANIEL SCHLENZIG }

</i></font><font color="#FF0000"><b>Program </b></font>stars<font color="#000080">;

</font><font color="#FF0000"><b>Const
  </b></font>maxstars <font color="#000080">= </font><font color="#800000">200</font><font color="#000080">;

</font><font color="#FF0000"><b>Var
  </b></font>star  <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font>maxstars<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Word<font color="#000080">;
  </font>speed <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font>maxstars<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte<font color="#000080">;
  </font>i     <font color="#000080">: </font>Word<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>create<font color="#000080">;
</font><font color="#FF0000"><b>begin
  For </b></font>i <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>maxstars <font color="#FF0000"><b>do
  begin
    </b></font>star<font color="#000080">[</font>i<font color="#000080">]  := </font>random<font color="#000080">(</font><font color="#800000">320</font><font color="#000080">) + </font>random<font color="#000080">(</font><font color="#800000">200</font><font color="#000080">) * </font><font color="#800000">320</font><font color="#000080">;
    </font>speed<font color="#000080">[</font>i<font color="#000080">] := </font>random<font color="#000080">(</font><font color="#800000">3</font><font color="#000080">) + </font><font color="#800000">1</font><font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font>mem<font color="#000080">[</font><font color="#800000">$a000 </font><font color="#000080">: </font>star<font color="#000080">[</font>i<font color="#000080">]] = </font><font color="#800000">0 </font><font color="#FF0000"><b>then
      </b></font>mem<font color="#000080">[</font><font color="#800000">$a000 </font><font color="#000080">: </font>star<font color="#000080">[</font>i<font color="#000080">]] := </font><font color="#800000">100</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>moveit<font color="#000080">; </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm
  </b></font><font color="#FF00FF">xor   bp,bp
  mov   ax,0a000h
  mov   es,ax
  lea   bx,star
  lea   si,speed
  mov   cx,320

 @l1:
  mov   di,[bx]
  mov   al,es:[di]
  cmp   al,100
  jne   @j1
  xor   al,al
  stosb
 @j1:
  mov   al,[si]
  xor   ah,ah
  add   [bx],ax
  mov   ax,bx
  xor   dx,dx
  div   cx
  mul   cx
  mov   dx,bx
  sub   dx,ax
  cmp   dx,319
  jle   @j3
  sub   [bx],cx
 @j3:
  mov   di,[bx]
  mov   al,es:[di]
  or    al,al
  jnz   @j2
  mov   al,100
  stosb
 @j2:
  add   bx,2
  inc   si
  inc   bp
  cmp   bp,maxstars
  jle   @l1
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  Asm
    </b></font><font color="#FF00FF">mov   ax,13h
    int   10h
    call  create

   @l1:
    mov   dx,3dah
   @r1:
    in    al,dx
    test  al,8
    je    @r1

    call moveit
    in   al,60h
    cmp  al,1
    jne  @l1;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0034.PAS">Original</a><b>]</b></p></body>
</html>
