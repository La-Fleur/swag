<html>
<head><title> "High Intensity Background" by DARRYL FRIESEN</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0094.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>UNIT </b></font>Lite<font color="#000080">;
</font><font color="#008000"><i>{***************************************************************************}
{*                                                                         *}
{*  Unit Lite - Routines to produce high intensity backgrounds             *}
{*                                                                         *}
{*                         AUTHOR:  Darryl Friesen                         *}
{*                        CREATED:  01-JUN-1991                            *}
{*                  LAST MODIFIED:  06-JAN-1992                            *}
{*                CURRENT VERSION:  Version 1.0.1                          *}
{*                 COMPILED USING:  Turbo Pascal 6.0                       *}
{*                                                                         *}
{*                                                                         *}
{*  UNIT DEPENDANCIES:                                                     *}
{*                                                                         *}
{*           INTERFACE:  [none]                                            *}
{*      IMPLEMENTATION:  DOS                                               *}
{*                                                                         *}
{***************************************************************************}
{*                                                                         *}
{*  REVISION HISTORY                                                       *}
{*  ----------------                                                       *}
{*  01-JUN-1991  - Creation of VERSION 1.00                                *}
{*  06-JAN-1992  - Version 1.0.1                                           *}
{*                   Fixed a bug in the BlinkOn routine.  On a VGA machine *}
{*                   the blink state was turned off instead of on.         *}
{*                                                                         *}
{***************************************************************************}

{=========================================================================}
</i></font><font color="#FF0000"><b>INTERFACE
</b></font><font color="#008000"><i>{=========================================================================}

</i></font><font color="#FF0000"><b>Procedure </b></font>BlinkOff<font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>BlinkOn<font color="#000080">;
</font><font color="#FF0000"><b>Function  </b></font>EGA<font color="#000080">: </font>Boolean<font color="#000080">;


</font><font color="#008000"><i>{=========================================================================}
</i></font><font color="#FF0000"><b>IMPLEMENTATION
</b></font><font color="#008000"><i>{=========================================================================}

</i></font><font color="#FF0000"><b>USES </b></font>DOS<font color="#000080">;


</font><font color="#008000"><i>{================================================================}
</i></font><font color="#FF0000"><b>PROCEDURE </b></font>SetBlinkState<font color="#000080">(</font>State <font color="#000080">: </font>BOOLEAN<font color="#000080">);
</font><font color="#008000"><i>{================================================================}
{================================================================}

</i></font><font color="#FF0000"><b>VAR
  </b></font>ModeReg     <font color="#000080">: </font>BYTE<font color="#000080">;
  </font>ModeRegPort <font color="#000080">: </font>WORD<font color="#000080">;

</font><font color="#FF0000"><b>Begin
   INLINE</b></font><font color="#000080">(</font><font color="#800000">$FA</font><font color="#000080">); </font><font color="#008000"><i>{ CLI }
   </i></font>ModeRegPort<font color="#000080">:=</font>MEMW<font color="#000080">[</font><font color="#800000">$0040</font><font color="#000080">:</font><font color="#800000">$0063</font><font color="#000080">]+</font><font color="#800000">4</font><font color="#000080">;
   </font>ModeReg<font color="#000080">:=</font>MEM<font color="#000080">[</font><font color="#800000">$0040</font><font color="#000080">:</font><font color="#800000">$0065</font><font color="#000080">];
   </font><font color="#FF0000"><b>If </b></font>State <font color="#FF0000"><b>Then
     </b></font>ModeReg<font color="#000080">:=</font>ModeReg <font color="#FF0000"><b>OR </b></font><font color="#800000">$20
   </font><font color="#FF0000"><b>Else
     </b></font>ModeReg<font color="#000080">:=</font>ModeReg <font color="#FF0000"><b>AND </b></font><font color="#800000">$DF</font><font color="#000080">;

   </font>Port<font color="#000080">[</font>ModeRegPort<font color="#000080">] := </font>ModeReg<font color="#000080">;
   </font>MEM<font color="#000080">[</font><font color="#800000">$0040</font><font color="#000080">:</font><font color="#800000">$0065</font><font color="#000080">]:= </font>ModeReg<font color="#000080">;
   </font><font color="#FF0000"><b>INLINE</b></font><font color="#000080">(</font><font color="#800000">$FB</font><font color="#000080">) </font><font color="#008000"><i>{ STI }
</i></font><font color="#FF0000"><b>END</b></font><font color="#000080">;


</font><font color="#008000"><i>{================================================================}
</i></font><font color="#FF0000"><b>FUNCTION </b></font>EGA <font color="#000080">: </font>BOOLEAN<font color="#000080">;
</font><font color="#008000"><i>{================================================================}
{================================================================}

</i></font><font color="#FF0000"><b>VAR
  </b></font>Regs <font color="#000080">: </font>Registers<font color="#000080">;

</font><font color="#FF0000"><b>Begin
  </b></font>Regs<font color="#000080">.</font>AH<font color="#000080">:=</font><font color="#800000">$12</font><font color="#000080">;
  </font>Regs<font color="#000080">.</font>BX<font color="#000080">:=</font><font color="#800000">$FF10</font><font color="#000080">;
  </font>INTR<font color="#000080">( </font><font color="#800000">$10</font><font color="#000080">, </font>Regs <font color="#000080">);
  </font>EGA <font color="#000080">:= (</font>Regs<font color="#000080">.</font>BX <font color="#FF0000"><b>AND </b></font><font color="#800000">$FEFC</font><font color="#000080">=</font><font color="#800000">0</font><font color="#000080">)
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;


</font><font color="#008000"><i>{================================================================}
</i></font><font color="#FF0000"><b>PROCEDURE </b></font>SetEGABlinkState<font color="#000080">(</font>State <font color="#000080">: </font>BOOLEAN<font color="#000080">);
</font><font color="#008000"><i>{================================================================}
{================================================================}

</i></font><font color="#FF0000"><b>VAR
  </b></font>Regs<font color="#000080">: </font>Registers<font color="#000080">;

</font><font color="#FF0000"><b>Begin
  </b></font>Regs<font color="#000080">.</font>AX <font color="#000080">:= </font><font color="#800000">$1003</font><font color="#000080">;
  </font>Regs<font color="#000080">.</font>BL <font color="#000080">:= </font>ORD<font color="#000080">(</font>State<font color="#000080">);
  </font>INTR<font color="#000080">( </font><font color="#800000">$10</font><font color="#000080">, </font>Regs <font color="#000080">)
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;


</font><font color="#008000"><i>{================================================================}
</i></font><font color="#FF0000"><b>PROCEDURE </b></font>BlinkOn<font color="#000080">;
</font><font color="#008000"><i>{================================================================}
{================================================================}

</i></font><font color="#FF0000"><b>Begin
  If </b></font>EGA <font color="#FF0000"><b>Then
    </b></font>SetEGABlinkState<font color="#000080">(</font>TRUE<font color="#000080">)
  </font><font color="#FF0000"><b>Else
    </b></font>SetBlinkState<font color="#000080">(</font>TRUE<font color="#000080">)
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;


</font><font color="#008000"><i>{================================================================}
</i></font><font color="#FF0000"><b>PROCEDURE </b></font>BlinkOff<font color="#000080">;
</font><font color="#008000"><i>{================================================================}
{================================================================}

</i></font><font color="#FF0000"><b>Begin
  If </b></font>EGA <font color="#FF0000"><b>Then
    </b></font>SetEGABlinkState<font color="#000080">(</font>FALSE<font color="#000080">)
  </font><font color="#FF0000"><b>Else
    </b></font>SetBlinkState<font color="#000080">(</font>FALSE<font color="#000080">)
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;


</font><font color="#008000"><i>{=========================================================================}

</i></font><font color="#FF0000"><b>End</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0094.PAS">Original</a><b>]</b></p></body>
</html>
