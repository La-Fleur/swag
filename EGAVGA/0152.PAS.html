<html>
<head><title> "Graphics Readln/ReadKey etc." by KANDA'JALEN EIRSIE</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0152.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt; I wrote a procedure that read a string input from the keyboard and
&gt; returns an integer value. But how can I limit the length of the string
&gt; to be inputed? And can any one please provide a source code that does
&gt; the same thing in graphic mode? Thanx in advance.

   This is old Code, Written originally for a Hercules card, but with a
 little twiddling it should work just fine.  Improvements I can think
 of, Making the cursor blink, Making the cursor the correct size...

    Anyway, here goes.   Hang on this is pretty long!
}

{****************************************************************************}
{                  Unit to Compute in a Very Pascal Way                      }
{****************************************************************************}
{                     Incredible Graphix Utilities                           }
{****************************************************************************}
{****************************************************************************}
{     Version : 3.0                                         JUL  1993        }
{****************************************************************************}
</i></font><font color="#FF0000"><b>Unit </b></font>Grfxutil <font color="#000080">;
</font><font color="#008000"><i>{****************************************************************************}
</i></font><font color="#FF0000"><b>Interface
</b></font><font color="#008000"><i>{****************************************************************************}
</i></font><font color="#FF0000"><b>type
     </b></font>commands <font color="#000080">= (</font>NON<font color="#000080">,</font>F1<font color="#000080">,</font>F2<font color="#000080">,</font>F3<font color="#000080">,</font>F4<font color="#000080">,</font>F5<font color="#000080">,</font>F6<font color="#000080">,</font>F7<font color="#000080">,</font>F8<font color="#000080">,</font>F9<font color="#000080">,</font>F10<font color="#000080">,</font>F11<font color="#000080">,</font>F12<font color="#000080">,</font>F13<font color="#000080">,</font>F14<font color="#000080">,</font>F15<font color="#000080">,</font>F16<font color="#000080">,
        </font>F17<font color="#000080">,</font>F18<font color="#000080">,</font>F19<font color="#000080">,</font>F20<font color="#000080">,</font>F21<font color="#000080">,</font>F22<font color="#000080">,</font>F23<font color="#000080">,</font>F24<font color="#000080">,</font>F25<font color="#000080">,</font>F26<font color="#000080">,</font>F27<font color="#000080">,</font>F28<font color="#000080">,</font>F29<font color="#000080">,</font>F30<font color="#000080">,</font>F31<font color="#000080">,</font>F32<font color="#000080">,</font>F33<font color="#000080">,
        </font>F34<font color="#000080">,</font>F35<font color="#000080">,</font>F36<font color="#000080">,</font>F37<font color="#000080">,</font>F38<font color="#000080">,</font>F39<font color="#000080">,</font>F40<font color="#000080">,</font>HOME<font color="#000080">,</font>UP<font color="#000080">,</font>PGUP<font color="#000080">,</font>LFT<font color="#000080">,</font>RGHT<font color="#000080">,</font>END1<font color="#000080">,</font>DWN<font color="#000080">,</font>PGDN<font color="#000080">,</font>INS<font color="#000080">,
        </font>DEL<font color="#000080">,</font>PRTSRN<font color="#000080">,</font>ENT<font color="#000080">,</font>TAB<font color="#000080">,</font>SPACE<font color="#000080">,</font>BKSPAC<font color="#000080">,</font>ESC<font color="#000080">,</font>SHTAB<font color="#000080">,</font>CTRLLFT<font color="#000080">,</font>CTRLRGHT<font color="#000080">,</font>CTRLUP<font color="#000080">,
        </font>CTRLDWN<font color="#000080">,</font>CTRLHOME<font color="#000080">,</font>CTRLEND1<font color="#000080">,</font>CTRLPGUP<font color="#000080">,</font>CTRLPGDN<font color="#000080">) ;
</font><font color="#FF0000"><b>var
   </b></font>Greypic     <font color="#000080">: </font>pointer <font color="#000080">;              </font><font color="#008000"><i>{ The Grey Picture                   }
   </i></font>comm        <font color="#000080">: </font>commands <font color="#000080">;             </font><font color="#008000"><i>{ The Command from the keyboard      }
   </i></font>NoEcho      <font color="#000080">: </font>Boolean <font color="#000080">;              </font><font color="#008000"><i>{ If Characters are echoed.          }
   </i></font>Cwn         <font color="#000080">: </font><font color="#FF0000"><b>String </b></font><font color="#000080">;
</font><font color="#008000"><i>{****************************************************************************}
</i></font><font color="#FF0000"><b>Function </b></font>Testbit<font color="#000080">(</font>testin <font color="#000080">: </font>longint <font color="#000080">; </font>position <font color="#000080">: </font>byte<font color="#000080">) : </font>boolean <font color="#000080">;
</font><font color="#FF0000"><b>Function </b></font>SetBit<font color="#000080">(</font>Testin <font color="#000080">: </font>longint <font color="#000080">; </font>Position <font color="#000080">: </font>byte<font color="#000080">) : </font>longint <font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>Report_Mouse_Position <font color="#000080">;  </font><font color="#008000"><i>{ A Debuging and design tool }
</i></font><font color="#FF0000"><b>Procedure </b></font>Register_Graphics
             <font color="#000080">(</font>videodriver<font color="#000080">,</font>videomode <font color="#000080">: </font>integer <font color="#000080">; </font><font color="#FF0000"><b>var </b></font>videographicsmode <font color="#000080">: </font>byte<font color="#000080">) ;
</font><font color="#FF0000"><b>Procedure </b></font>clrvp<font color="#000080">(</font>l1<font color="#000080">,</font>l2<font color="#000080">,</font>l3<font color="#000080">,</font>l4 <font color="#000080">: </font>integer <font color="#000080">) ;
</font><font color="#FF0000"><b>Procedure </b></font>SAP<font color="#000080">( </font>P <font color="#000080">: </font>byte <font color="#000080">) ;
</font><font color="#FF0000"><b>Procedure </b></font>clrpage <font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>DblBox <font color="#000080">(</font>X1<font color="#000080">,</font>Y1<font color="#000080">,</font>X2<font color="#000080">,</font>Y2 <font color="#000080">: </font>Integer<font color="#000080">) ;
</font><font color="#FF0000"><b>Procedure </b></font>Dblwindowbox<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2 <font color="#000080">: </font>integer <font color="#000080">; </font>boxheader <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">) ;
</font><font color="#FF0000"><b>Procedure </b></font>WindowBox<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2 <font color="#000080">: </font>integer <font color="#000080">; </font>boxheader <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">) ;
</font><font color="#FF0000"><b>Function  </b></font>Roll<font color="#000080">(</font>faces <font color="#000080">: </font>integer<font color="#000080">) : </font>integer <font color="#000080">;
</font><font color="#FF0000"><b>Function  </b></font>Getcommand<font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>ch <font color="#000080">: </font>char<font color="#000080">) : </font>commands <font color="#000080">;



</font><font color="#008000"><i>{ These are the ones you are interested in. }
 
</i></font><font color="#FF0000"><b>Procedure </b></font>Readxy <font color="#000080">(</font>X<font color="#000080">,</font>Y<font color="#000080">:</font>integer<font color="#000080">; </font><font color="#FF0000"><b>Var </b></font>S <font color="#000080">: </font><font color="#FF0000"><b>string </b></font><font color="#000080">; </font>L <font color="#000080">: </font>integer<font color="#000080">) ;
</font><font color="#FF0000"><b>Function  </b></font>GetReal<font color="#000080">(</font>X<font color="#000080">,</font>Y <font color="#000080">: </font>integer<font color="#000080">; </font>am <font color="#000080">: </font>real<font color="#000080">; </font>w <font color="#000080">: </font>integer<font color="#000080">) : </font>real <font color="#000080">;
</font><font color="#FF0000"><b>Function  </b></font>getInteger<font color="#000080">(</font>X<font color="#000080">,</font>Y<font color="#000080">,</font>N<font color="#000080">,</font>W <font color="#000080">: </font>integer<font color="#000080">) : </font>integer  <font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>Greyoutxy<font color="#000080">(</font>x<font color="#000080">,</font>y <font color="#000080">: </font>integer <font color="#000080">; </font>textstring <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">) ;
</font><font color="#FF0000"><b>Function </b></font>YesNoDialog <font color="#000080">: </font>boolean <font color="#000080">;
</font><font color="#008000"><i>{****************************************************************************}
</i></font><font color="#FF0000"><b>implementation uses </b></font>crt<font color="#000080">,</font>dos<font color="#000080">,</font>Graph<font color="#000080">,</font>bgidriv<font color="#000080">,</font>bgifont<font color="#000080">,</font>mousutil<font color="#000080">;
</font><font color="#008000"><i>{****************************************************************************}
</i></font><font color="#FF0000"><b>Function </b></font>TestBit <font color="#000080">;
</font><font color="#FF0000"><b>var
   </b></font>maskbit <font color="#000080">: </font>longint <font color="#000080">;
</font><font color="#FF0000"><b>begin
     case </b></font>position <font color="#FF0000"><b>of
     </b></font><font color="#800000">1   </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">1 </font><font color="#000080">;
     </font><font color="#800000">2   </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">2 </font><font color="#000080">;
     </font><font color="#800000">3   </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">4 </font><font color="#000080">;
     </font><font color="#800000">4   </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">8 </font><font color="#000080">;
     </font><font color="#800000">5   </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">16 </font><font color="#000080">;
     </font><font color="#800000">6   </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">32 </font><font color="#000080">;
     </font><font color="#800000">7   </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">64 </font><font color="#000080">;
     </font><font color="#800000">8   </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">128 </font><font color="#000080">;
     </font><font color="#800000">9   </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">256 </font><font color="#000080">;
     </font><font color="#800000">10  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">512 </font><font color="#000080">;
     </font><font color="#800000">11  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">1024 </font><font color="#000080">;
     </font><font color="#800000">12  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">2048 </font><font color="#000080">;
     </font><font color="#800000">13  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">4096 </font><font color="#000080">;
     </font><font color="#800000">14  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">8192 </font><font color="#000080">;
     </font><font color="#800000">15  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">16384 </font><font color="#000080">;
     </font><font color="#800000">16  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">32768 </font><font color="#000080">;
     </font><font color="#800000">17  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">65536 </font><font color="#000080">;
     </font><font color="#800000">18  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">131072 </font><font color="#000080">;
     </font><font color="#800000">19  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">262144 </font><font color="#000080">;
     </font><font color="#800000">20  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">524288 </font><font color="#000080">;
     </font><font color="#800000">21  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">1048576 </font><font color="#000080">;
     </font><font color="#800000">22  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">2097152 </font><font color="#000080">;
     </font><font color="#800000">23  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">4194304 </font><font color="#000080">;
     </font><font color="#800000">24  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">8388608 </font><font color="#000080">;
     </font><font color="#800000">25  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">16777216 </font><font color="#000080">;
     </font><font color="#800000">26  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">33554432 </font><font color="#000080">;
     </font><font color="#800000">27  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">67108864 </font><font color="#000080">;
     </font><font color="#800000">28  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">134217728 </font><font color="#000080">;
     </font><font color="#800000">29  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">268435456 </font><font color="#000080">;
     </font><font color="#800000">30  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">536870912 </font><font color="#000080">;
     </font><font color="#800000">31  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">1073741824 </font><font color="#000080">;
     </font><font color="#FF0000"><b>end </b></font><font color="#000080">;
     </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>testin <font color="#FF0000"><b>and </b></font>maskbit<font color="#000080">) = </font>maskbit <font color="#FF0000"><b>then </b></font>testbit <font color="#000080">:= </font>true
     <font color="#FF0000"><b>else </b></font>testbit <font color="#000080">:= </font>false <font color="#000080">;
</font><font color="#FF0000"><b>end </b></font><font color="#000080">;

</font><font color="#008000"><i>{****************************************************************************}
{ This function sets the state of a bit in a variable as large as a longint.
You call it with the value of the variable and the position (counting from
right to left naturally).  If the bit is already set, then it will turn it
off, if it is off then it will turn it on. }
</i></font><font color="#FF0000"><b>Function </b></font>setBit <font color="#000080">;
</font><font color="#FF0000"><b>var
   </b></font>maskbit <font color="#000080">: </font>longint <font color="#000080">;
</font><font color="#FF0000"><b>begin
     case </b></font>position <font color="#FF0000"><b>of
     </b></font><font color="#800000">1   </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">1 </font><font color="#000080">;
     </font><font color="#800000">2   </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">2 </font><font color="#000080">;
     </font><font color="#800000">3   </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">4 </font><font color="#000080">;
     </font><font color="#800000">4   </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">8 </font><font color="#000080">;
     </font><font color="#800000">5   </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">16 </font><font color="#000080">;
     </font><font color="#800000">6   </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">32 </font><font color="#000080">;
     </font><font color="#800000">7   </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">64 </font><font color="#000080">;
     </font><font color="#800000">8   </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">128 </font><font color="#000080">;
     </font><font color="#800000">9   </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">256 </font><font color="#000080">;
     </font><font color="#800000">10  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">512 </font><font color="#000080">;
     </font><font color="#800000">11  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">1024 </font><font color="#000080">;
     </font><font color="#800000">12  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">2048 </font><font color="#000080">;
     </font><font color="#800000">13  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">4096 </font><font color="#000080">;
     </font><font color="#800000">14  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">8192 </font><font color="#000080">;
     </font><font color="#800000">15  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">16384 </font><font color="#000080">;
     </font><font color="#800000">16  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">32768 </font><font color="#000080">;
     </font><font color="#800000">17  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">65536 </font><font color="#000080">;
     </font><font color="#800000">18  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">131072 </font><font color="#000080">;
     </font><font color="#800000">19  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">262144 </font><font color="#000080">;
     </font><font color="#800000">20  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">524288 </font><font color="#000080">;
     </font><font color="#800000">21  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">1048576 </font><font color="#000080">;
     </font><font color="#800000">22  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">2097152 </font><font color="#000080">;
     </font><font color="#800000">23  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">4194304 </font><font color="#000080">;
     </font><font color="#800000">24  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">8388608 </font><font color="#000080">;
     </font><font color="#800000">25  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">16777216 </font><font color="#000080">;
     </font><font color="#800000">26  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">33554432 </font><font color="#000080">;
     </font><font color="#800000">27  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">67108864 </font><font color="#000080">;
     </font><font color="#800000">28  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">134217728 </font><font color="#000080">;
     </font><font color="#800000">29  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">268435456 </font><font color="#000080">;
     </font><font color="#800000">30  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">536870912 </font><font color="#000080">;
     </font><font color="#800000">31  </font><font color="#000080">: </font>maskbit <font color="#000080">:= </font><font color="#800000">1073741824 </font><font color="#000080">;
     </font><font color="#FF0000"><b>end </b></font><font color="#000080">;
     </font>setbit <font color="#000080">:= </font>testin <font color="#FF0000"><b>xor </b></font>maskbit <font color="#000080">;
</font><font color="#FF0000"><b>end </b></font><font color="#000080">;

</font><font color="#008000"><i>{****************************************************************************}

</i></font><font color="#FF0000"><b>Procedure </b></font>Report_Mouse_position <font color="#000080">;
</font><font color="#008000"><i>{ This is a debugging and Designing tool, it reports the X,Y position of the
mouse and shows free memory in the upper right corner of the screen. }
</i></font><font color="#FF0000"><b>var
   </b></font>msxstr<font color="#000080">,</font>msystr <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">6</font><font color="#000080">] ;
   </font>Memstr <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">10</font><font color="#000080">] ;

</font><font color="#FF0000"><b>Begin
     </b></font>str<font color="#000080">(</font>memavail<font color="#000080">,</font>memstr<font color="#000080">) ;
     </font>str<font color="#000080">(</font>getmousex<font color="#000080">,</font>msxstr<font color="#000080">) ;
     </font>str<font color="#000080">(</font>getmouseY<font color="#000080">,</font>msystr<font color="#000080">) ;
     </font>msxstr <font color="#000080">:= </font><font color="#800000">'X: ' </font><font color="#000080">+ </font>msxstr <font color="#000080">;
     </font>msystr <font color="#000080">:= </font><font color="#800000">'Y: ' </font><font color="#000080">+ </font>msystr <font color="#000080">;
     </font>settextstyle<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">) ;
     </font>setfillstyle<font color="#000080">(</font>solidfill<font color="#000080">,</font>darkgray<font color="#000080">) ;
     </font>bar<font color="#000080">(</font>getmaxx<font color="#000080">-</font><font color="#800000">30</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">,</font>getmaxx<font color="#000080">-</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">20</font><font color="#000080">) ;
     </font>bar<font color="#000080">(</font><font color="#800000">530</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">580</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">) ;
     </font>setcolor<font color="#000080">(</font>white<font color="#000080">) ;
     </font>outtextxy<font color="#000080">(</font><font color="#800000">530</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font>memstr<font color="#000080">);
     </font>outtextxy<font color="#000080">(</font>getmaxx<font color="#000080">-</font><font color="#800000">53</font><font color="#000080">,</font><font color="#800000">4</font><font color="#000080">,</font>msxstr<font color="#000080">) ;
     </font>outtextxy<font color="#000080">(</font>getmaxx<font color="#000080">-</font><font color="#800000">53</font><font color="#000080">,</font><font color="#800000">13</font><font color="#000080">,</font>msystr<font color="#000080">) ;
</font><font color="#FF0000"><b>end </b></font><font color="#000080">;
</font><font color="#008000"><i>{****************************************************************************}
{ Loads and registers the graphics driver }
</i></font><font color="#FF0000"><b>Procedure </b></font>Register_Graphics
<font color="#000080">(</font>videodriver<font color="#000080">,</font>videomode <font color="#000080">: </font>integer <font color="#000080">; </font><font color="#FF0000"><b>var </b></font>videographicsmode <font color="#000080">: </font>byte<font color="#000080">) ;
</font><font color="#FF0000"><b>var
  </b></font>GraphDriver<font color="#000080">, </font>GraphMode<font color="#000080">, </font>Error <font color="#000080">: </font>integer<font color="#000080">;
  </font>gotgrafix <font color="#000080">: </font>boolean <font color="#000080">;
  </font>mode <font color="#000080">: </font>byte <font color="#000080">;
  </font>regs <font color="#000080">: </font>registers <font color="#000080">;
</font><font color="#008000"><i>{*************************************************}
</i></font><font color="#FF0000"><b>procedure </b></font>Abort<font color="#000080">(</font>Msg <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">);
</font><font color="#FF0000"><b>begin
  </b></font>Writeln<font color="#000080">(</font>Msg<font color="#000080">, </font><font color="#800000">': '</font><font color="#000080">, </font>GraphErrorMsg<font color="#000080">(</font>GraphResult<font color="#000080">));
  </font>Halt<font color="#000080">(</font><font color="#800000">4</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{*************************************************}
</i></font><font color="#FF0000"><b>begin   </b></font><font color="#008000"><i>{ Register Graphix  }
     </i></font><font color="#FF0000"><b>if </b></font>RegisterBGIdriver<font color="#000080">(@</font>EGAVGADriverProc<font color="#000080">) &lt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>Abort<font color="#000080">(</font><font color="#800000">'EGA/VGA'</font><font color="#000080">);
</font><font color="#008000"><i>{     if RegisterBGIdriver(@HercDriverProc) &lt; 0 then Abort('Herc');
     if RegisterBGIdriver(@ATTDriverProc) &lt; 0 then Abort('AT&amp;T');
     if RegisterBGIdriver(@PC3270DriverProc) &lt; 0 then Abort('PC 3270');
}
                           { Register all the fonts }
{     if RegisterBGIfont(@GothicFontProc) &lt; 0 then Abort('Gothic');
     if RegisterBGIfont(@SansSerifFontProc) &lt; 0 then Abort('SansSerif');
     if RegisterBGIfont(@SmallFontProc) &lt; 0 then Abort('Small');
     if RegisterBGIfont(@TriplexFontProc) &lt; 0 then Abort('Triplex');
}     </i></font>graphdriver <font color="#000080">:= </font>videodriver <font color="#000080">;
     </font>graphmode <font color="#000080">:= </font>videomode <font color="#000080">;

     </font>initgraph<font color="#000080">(</font>graphdriver<font color="#000080">,</font>graphmode<font color="#000080">,</font><font color="#800000">''</font><font color="#000080">) ;
     </font><font color="#FF0000"><b>if </b></font>GraphResult <font color="#000080">&lt;&gt; </font>grOk <font color="#FF0000"><b>then             </b></font><font color="#008000"><i>{ any errors? }
     </i></font><font color="#FF0000"><b>begin
          </b></font>Writeln<font color="#000080">(</font><font color="#800000">'Graphics init error: '</font><font color="#000080">, </font>GraphErrorMsg<font color="#000080">(</font>GraphDriver<font color="#000080">));
          </font>Halt<font color="#000080">(</font><font color="#800000">4</font><font color="#000080">);
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>End </b></font><font color="#000080">; </font><font color="#008000"><i>{ Register Graphics }

{****************************************************************************}
{ Clears a viewport passed to it and resets the viewport }
{ instead of writing it so many times!! }
</i></font><font color="#FF0000"><b>Procedure </b></font>clrvp<font color="#000080">(</font>l1<font color="#000080">,</font>l2<font color="#000080">,</font>l3<font color="#000080">,</font>l4 <font color="#000080">: </font>integer <font color="#000080">) ;
</font><font color="#FF0000"><b>var
   </b></font>vp <font color="#000080">: </font>viewporttype <font color="#000080">;
</font><font color="#FF0000"><b>begin
     </b></font>getviewsettings<font color="#000080">(</font>vp<font color="#000080">) ;
     </font>setviewport<font color="#000080">(</font>l1<font color="#000080">,</font>l2<font color="#000080">,</font>l3<font color="#000080">,</font>l4<font color="#000080">,</font>clipon<font color="#000080">) ;
     </font>clearviewport <font color="#000080">;
     </font>setviewport<font color="#000080">(</font>vp<font color="#000080">.</font>x1<font color="#000080">,</font>vp<font color="#000080">.</font>y1<font color="#000080">,</font>vp<font color="#000080">.</font>x2<font color="#000080">,</font>vp<font color="#000080">.</font>y2<font color="#000080">,</font>vp<font color="#000080">.</font>clip<font color="#000080">) ; </font><font color="#008000"><i>{ Restore the viewport }
</i></font><font color="#FF0000"><b>end </b></font><font color="#000080">;
</font><font color="#008000"><i>{****************************************************************************}
{ Sets Apage, activepage, visualpage }
</i></font><font color="#FF0000"><b>Procedure </b></font>SAP <font color="#000080">;

</font><font color="#FF0000"><b>begin   </b></font><font color="#008000"><i>{ SAP }
     </i></font>setactivepage<font color="#000080">(</font>p<font color="#000080">) ; </font>setvisualpage<font color="#000080">(</font>p<font color="#000080">) ;
</font><font color="#FF0000"><b>end </b></font><font color="#000080">;   </font><font color="#008000"><i>{ SAP }
{****************************************************************************}
{ Clears the current page number }
</i></font><font color="#FF0000"><b>Procedure </b></font>clrpage <font color="#000080">;

</font><font color="#FF0000"><b>begin   </b></font><font color="#008000"><i>{ Clrpage }
     </i></font>clrvp<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>getmaxx<font color="#000080">,</font>getmaxy<font color="#000080">) ;
</font><font color="#FF0000"><b>end </b></font><font color="#000080">;   </font><font color="#008000"><i>{ Clrpage }
{****************************************************************************}
{ Puts down a double Lined Box }
</i></font><font color="#FF0000"><b>procedure </b></font>DblBox <font color="#000080">;

</font><font color="#FF0000"><b>begin   </b></font><font color="#008000"><i>{ DblBox }
     </i></font>line<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y1<font color="#000080">) ; </font>line<font color="#000080">(</font>x1 <font color="#000080">+ </font><font color="#800000">2</font><font color="#000080">,</font>y1 <font color="#000080">+ </font><font color="#800000">2</font><font color="#000080">,</font>x2 <font color="#000080">- </font><font color="#800000">2</font><font color="#000080">,</font>y1 <font color="#000080">+ </font><font color="#800000">2</font><font color="#000080">) ;
     </font>line<font color="#000080">(</font>x1<font color="#000080">,</font>y2<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">) ; </font>line<font color="#000080">(</font>x1 <font color="#000080">+ </font><font color="#800000">2</font><font color="#000080">,</font>y2 <font color="#000080">- </font><font color="#800000">2</font><font color="#000080">,</font>x2 <font color="#000080">- </font><font color="#800000">2</font><font color="#000080">,</font>y2 <font color="#000080">- </font><font color="#800000">2</font><font color="#000080">) ;
     </font>line<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x1<font color="#000080">,</font>y2<font color="#000080">) ; </font>line<font color="#000080">(</font>x1 <font color="#000080">+ </font><font color="#800000">3</font><font color="#000080">,</font>y1 <font color="#000080">+ </font><font color="#800000">3</font><font color="#000080">,</font>x1 <font color="#000080">+ </font><font color="#800000">3</font><font color="#000080">,</font>y2 <font color="#000080">- </font><font color="#800000">3</font><font color="#000080">) ;
     </font>line<font color="#000080">(</font>x2<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">) ; </font>line<font color="#000080">(</font>x2 <font color="#000080">- </font><font color="#800000">3</font><font color="#000080">,</font>y1 <font color="#000080">+ </font><font color="#800000">3</font><font color="#000080">,</font>x2 <font color="#000080">- </font><font color="#800000">3</font><font color="#000080">, </font>y2 <font color="#000080">- </font><font color="#800000">3</font><font color="#000080">) ;
</font><font color="#FF0000"><b>end </b></font><font color="#000080">;   </font><font color="#008000"><i>{ DblBox }
{****************************************************************************}
{ Creates a double lined box with an optional header }
</i></font><font color="#FF0000"><b>Procedure </b></font>Dblwindowbox<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2 <font color="#000080">: </font>integer <font color="#000080">; </font>boxheader <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">) ;
</font><font color="#FF0000"><b>var
   </b></font>oldstyle <font color="#000080">: </font>textsettingstype <font color="#000080">;
</font><font color="#FF0000"><b>begin
     </b></font>line<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y1<font color="#000080">) ;
     </font><font color="#FF0000"><b>if </b></font>length<font color="#000080">(</font>boxheader<font color="#000080">) = </font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>line<font color="#000080">(</font>x1 <font color="#000080">+ </font><font color="#800000">2</font><font color="#000080">,</font>y1 <font color="#000080">+ </font><font color="#800000">2</font><font color="#000080">,</font>x2 <font color="#000080">- </font><font color="#800000">2</font><font color="#000080">,</font>y1 <font color="#000080">+ </font><font color="#800000">2</font><font color="#000080">)
     </font><font color="#FF0000"><b>else </b></font>line<font color="#000080">(</font>x1<font color="#000080">,</font>y1 <font color="#000080">+ </font>textheight<font color="#000080">(</font><font color="#800000">'H'</font><font color="#000080">) + </font><font color="#800000">2</font><font color="#000080">,</font>x2<font color="#000080">,</font>y1 <font color="#000080">+ </font>textheight<font color="#000080">(</font><font color="#800000">'H'</font><font color="#000080">) + </font><font color="#800000">2</font><font color="#000080">) ;
     </font>line<font color="#000080">(</font>x1<font color="#000080">,</font>y2<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">) ;
     </font>line<font color="#000080">(</font>x1 <font color="#000080">+ </font><font color="#800000">2</font><font color="#000080">,</font>y2 <font color="#000080">- </font><font color="#800000">2</font><font color="#000080">,</font>x2 <font color="#000080">- </font><font color="#800000">2</font><font color="#000080">,</font>y2 <font color="#000080">- </font><font color="#800000">2</font><font color="#000080">) ;
     </font>line<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x1<font color="#000080">,</font>y2<font color="#000080">) ;
     </font>line<font color="#000080">(</font>x1 <font color="#000080">+ </font><font color="#800000">2</font><font color="#000080">,</font>y1 <font color="#000080">+ </font><font color="#800000">2</font><font color="#000080">,</font>x1 <font color="#000080">+ </font><font color="#800000">2</font><font color="#000080">,</font>y2 <font color="#000080">- </font><font color="#800000">2</font><font color="#000080">) ;
     </font>line<font color="#000080">(</font>x2<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">) ;
     </font>line<font color="#000080">(</font>x2 <font color="#000080">- </font><font color="#800000">2</font><font color="#000080">,</font>y1 <font color="#000080">+ </font><font color="#800000">2</font><font color="#000080">,</font>x2 <font color="#000080">- </font><font color="#800000">2</font><font color="#000080">, </font>y2 <font color="#000080">- </font><font color="#800000">2</font><font color="#000080">) ;
     </font>line<font color="#000080">(</font>x1<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">,</font>y1<font color="#000080">,</font>x1<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">,</font>y1<font color="#000080">+</font><font color="#800000">10</font><font color="#000080">) ;
     </font>line<font color="#000080">(</font>x2<font color="#000080">-</font><font color="#800000">2</font><font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">-</font><font color="#800000">2</font><font color="#000080">,</font>y1<font color="#000080">+</font><font color="#800000">10</font><font color="#000080">) ;
     </font><font color="#FF0000"><b>if </b></font>length<font color="#000080">(</font>boxheader<font color="#000080">) &gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then
     begin
          </b></font>gettextsettings<font color="#000080">(</font>oldstyle<font color="#000080">);
          </font>settextjustify<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">) ;
          </font>outtextxy<font color="#000080">(</font>x1<font color="#000080">+ ((</font>x2<font color="#000080">-</font>x1<font color="#000080">) </font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">),</font>y1<font color="#000080">+ </font>textheight<font color="#000080">(</font><font color="#800000">'H'</font><font color="#000080">) + </font><font color="#800000">2</font><font color="#000080">,</font>boxheader<font color="#000080">) ;
          </font><font color="#FF0000"><b>with </b></font>oldstyle <font color="#FF0000"><b>do
          begin
               </b></font>settextjustify<font color="#000080">(</font>horiz<font color="#000080">,</font>vert<font color="#000080">) ;
               </font>settextstyle<font color="#000080">(</font>font<font color="#000080">,</font>direction<font color="#000080">,</font>charsize<font color="#000080">) ;
          </font><font color="#FF0000"><b>end </b></font><font color="#000080">;
     </font><font color="#FF0000"><b>end </b></font><font color="#000080">;
</font><font color="#FF0000"><b>end </b></font><font color="#000080">;
</font><font color="#008000"><i>{****************************************************************************}
{ Creates a Single lined box with an optional header }
</i></font><font color="#FF0000"><b>Procedure </b></font>windowbox<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2 <font color="#000080">: </font>integer <font color="#000080">; </font>boxheader <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">) ;
</font><font color="#FF0000"><b>var
   </b></font>oldstyle <font color="#000080">: </font>textsettingstype <font color="#000080">;
</font><font color="#FF0000"><b>begin
     </b></font>line<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y1<font color="#000080">) ;
     </font><font color="#FF0000"><b>if </b></font>length<font color="#000080">(</font>boxheader<font color="#000080">) &gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
      </b></font>line<font color="#000080">(</font>x1<font color="#000080">,</font>y1 <font color="#000080">+ </font>textheight<font color="#000080">(</font><font color="#800000">'H'</font><font color="#000080">) + </font><font color="#800000">2</font><font color="#000080">,</font>x2<font color="#000080">,</font>y1 <font color="#000080">+ </font>textheight<font color="#000080">(</font><font color="#800000">'H'</font><font color="#000080">) + </font><font color="#800000">2</font><font color="#000080">) ;
     </font>line<font color="#000080">(</font>x1<font color="#000080">,</font>y2<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">) ;
     </font>line<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x1<font color="#000080">,</font>y2<font color="#000080">) ;
     </font>line<font color="#000080">(</font>x2<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">) ;
     </font><font color="#FF0000"><b>if </b></font>length<font color="#000080">(</font>boxheader<font color="#000080">) &gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then
     begin
          </b></font>gettextsettings<font color="#000080">(</font>oldstyle<font color="#000080">);
          </font>settextjustify<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">) ;
          </font>outtextxy<font color="#000080">(</font>x1<font color="#000080">+((</font>x2<font color="#000080">-</font>x1<font color="#000080">) </font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">),</font>y1<font color="#000080">+</font>textheight<font color="#000080">(</font><font color="#800000">'H'</font><font color="#000080">) + </font><font color="#800000">1</font><font color="#000080">,</font>boxheader<font color="#000080">) ;
          </font><font color="#FF0000"><b>with </b></font>oldstyle <font color="#FF0000"><b>do
          begin
               </b></font>settextjustify<font color="#000080">(</font>horiz<font color="#000080">,</font>vert<font color="#000080">) ;
               </font>settextstyle<font color="#000080">(</font>font<font color="#000080">,</font>direction<font color="#000080">,</font>charsize<font color="#000080">) ;
          </font><font color="#FF0000"><b>end </b></font><font color="#000080">;
     </font><font color="#FF0000"><b>end </b></font><font color="#000080">;
</font><font color="#FF0000"><b>end </b></font><font color="#000080">;

</font><font color="#008000"><i>{****************************************************************************}
{ An Any sided Die }
</i></font><font color="#FF0000"><b>Function </b></font>Roll<font color="#000080">(</font>faces <font color="#000080">: </font>integer<font color="#000080">) : </font>integer <font color="#000080">;
</font><font color="#FF0000"><b>begin
     </b></font>roll <font color="#000080">:= </font>random<font color="#000080">(</font>faces<font color="#000080">) + </font><font color="#800000">1 </font><font color="#000080">;
</font><font color="#FF0000"><b>end </b></font><font color="#000080">;
</font><font color="#008000"><i>{****************************************************************************}
{ Returns A Commandkey From A Keypress or a Character }
{ The Function will return a command and it will  record the key in
the variable parameter.  So you can use it to find any key pressed on
the keyboard.}
</i></font><font color="#FF0000"><b>Function  </b></font>Getcommand<font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>ch <font color="#000080">: </font>char<font color="#000080">) : </font>commands <font color="#000080">;
</font><font color="#FF0000"><b>Var
     </b></font>C <font color="#000080">: </font>Commands <font color="#000080">;
     </font>funckey <font color="#000080">: </font>boolean <font color="#000080">;
     </font>newcommand <font color="#000080">: </font>boolean <font color="#000080">;

</font><font color="#FF0000"><b>Begin  </b></font><font color="#008000"><i>{ Get Command }
     </i></font>newcommand <font color="#000080">:= </font>false <font color="#000080">;
     </font>C <font color="#000080">:= </font>NON <font color="#000080">;
     </font><font color="#FF0000"><b>if </b></font>keypressed <font color="#FF0000"><b>then
     begin
          </b></font>newcommand <font color="#000080">:= </font>true <font color="#000080">;
          </font>Ch <font color="#000080">:= </font>Readkey <font color="#000080">;
     </font><font color="#FF0000"><b>end </b></font><font color="#000080">;
     </font><font color="#FF0000"><b>if </b></font>newcommand <font color="#FF0000"><b>then
     begin  </b></font><font color="#008000"><i>{ get the command }
     </i></font><font color="#FF0000"><b>If </b></font>Ch <font color="#000080">&lt;&gt; </font><font color="#800000">#0 </font><font color="#FF0000"><b>Then </b></font>Funckey <font color="#000080">:= </font>False
     <font color="#FF0000"><b>Else
     Begin
          </b></font>Funckey <font color="#000080">:= </font>True <font color="#000080">;
          </font>Ch <font color="#000080">:= </font>Readkey <font color="#000080">;
     </font><font color="#FF0000"><b>End </b></font><font color="#000080">;
     </font><font color="#FF0000"><b>If </b></font>Funckey <font color="#FF0000"><b>Then
     Case </b></font>Ch <font color="#FF0000"><b>Of
 </b></font><font color="#008000"><i>{ The Normal Function Keys }
     </i></font><font color="#800000">#59 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F1 <font color="#000080">;        </font><font color="#008000"><i>{F1}
     </i></font><font color="#800000">#60 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F2 <font color="#000080">;        </font><font color="#008000"><i>{F2}
     </i></font><font color="#800000">#61 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F3 <font color="#000080">;        </font><font color="#008000"><i>{F3}
     </i></font><font color="#800000">#62 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F4 <font color="#000080">;        </font><font color="#008000"><i>{F4}
     </i></font><font color="#800000">#63 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F5 <font color="#000080">;        </font><font color="#008000"><i>{F5}
     </i></font><font color="#800000">#64 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F6 <font color="#000080">;        </font><font color="#008000"><i>{F6}
     </i></font><font color="#800000">#65 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F7 <font color="#000080">;        </font><font color="#008000"><i>{F7}
     </i></font><font color="#800000">#66 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F8 <font color="#000080">;        </font><font color="#008000"><i>{F8}
     </i></font><font color="#800000">#67 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F9 <font color="#000080">;        </font><font color="#008000"><i>{F9}
     </i></font><font color="#800000">#68 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F10 <font color="#000080">;       </font><font color="#008000"><i>{F10}
   { Shifted Function Keys }
     </i></font><font color="#800000">#133</font><font color="#000080">,</font><font color="#800000">#84 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F11 <font color="#000080">;  </font><font color="#008000"><i>{F11}
     </i></font><font color="#800000">#134</font><font color="#000080">,</font><font color="#800000">#85 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F12 <font color="#000080">;  </font><font color="#008000"><i>{F12}
     </i></font><font color="#800000">#86 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F13 <font color="#000080">;       </font><font color="#008000"><i>{F13}
     </i></font><font color="#800000">#87 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F14 <font color="#000080">;       </font><font color="#008000"><i>{F14}
     </i></font><font color="#800000">#88 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F15 <font color="#000080">;       </font><font color="#008000"><i>{F15}
     </i></font><font color="#800000">#89 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F16 <font color="#000080">;       </font><font color="#008000"><i>{F16}
     </i></font><font color="#800000">#90 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F17 <font color="#000080">;       </font><font color="#008000"><i>{F17}
     </i></font><font color="#800000">#91 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F18 <font color="#000080">;       </font><font color="#008000"><i>{F18}
     </i></font><font color="#800000">#92 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F19 <font color="#000080">;       </font><font color="#008000"><i>{F19}
     </i></font><font color="#800000">#93 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F20 <font color="#000080">;       </font><font color="#008000"><i>{F20}
   { Cntl Function Keys }
     </i></font><font color="#800000">#94 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F21 <font color="#000080">;       </font><font color="#008000"><i>{F21}
     </i></font><font color="#800000">#95 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F22 <font color="#000080">;       </font><font color="#008000"><i>{F22}
     </i></font><font color="#800000">#96 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F23 <font color="#000080">;       </font><font color="#008000"><i>{F23}
     </i></font><font color="#800000">#97 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F24 <font color="#000080">;       </font><font color="#008000"><i>{F24}
     </i></font><font color="#800000">#98 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F25 <font color="#000080">;       </font><font color="#008000"><i>{F25}
     </i></font><font color="#800000">#99 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F26 <font color="#000080">;       </font><font color="#008000"><i>{F26}
     </i></font><font color="#800000">#100 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F27 <font color="#000080">;      </font><font color="#008000"><i>{F27}
     </i></font><font color="#800000">#101 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F28 <font color="#000080">;      </font><font color="#008000"><i>{F28}
     </i></font><font color="#800000">#102 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F29 <font color="#000080">;      </font><font color="#008000"><i>{F29}
     </i></font><font color="#800000">#103 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F30 <font color="#000080">;      </font><font color="#008000"><i>{F30}

   { Alt Function Keys }
     </i></font><font color="#800000">#104 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F31 <font color="#000080">;      </font><font color="#008000"><i>{F31}
     </i></font><font color="#800000">#105 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F32 <font color="#000080">;      </font><font color="#008000"><i>{F32}
     </i></font><font color="#800000">#106 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F33 <font color="#000080">;      </font><font color="#008000"><i>{F33}
     </i></font><font color="#800000">#107 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F34 <font color="#000080">;      </font><font color="#008000"><i>{F34}
     </i></font><font color="#800000">#108 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F35 <font color="#000080">;      </font><font color="#008000"><i>{F35}
     </i></font><font color="#800000">#109 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F36 <font color="#000080">;      </font><font color="#008000"><i>{F36}
     </i></font><font color="#800000">#110 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F37 <font color="#000080">;      </font><font color="#008000"><i>{F37}
     </i></font><font color="#800000">#111 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F38 <font color="#000080">;      </font><font color="#008000"><i>{F38}
     </i></font><font color="#800000">#112 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F39 <font color="#000080">;      </font><font color="#008000"><i>{F39}
     </i></font><font color="#800000">#113 </font><font color="#000080">: </font>C <font color="#000080">:= </font>F40 <font color="#000080">;      </font><font color="#008000"><i>{F40}
         { The Keypad }
     </i></font><font color="#800000">#71 </font><font color="#000080">: </font>C <font color="#000080">:= </font>HOME<font color="#000080">;   </font><font color="#008000"><i>{HOME}
     </i></font><font color="#800000">#72 </font><font color="#000080">: </font>C <font color="#000080">:= </font>UP <font color="#000080">;   </font><font color="#008000"><i>{UP}
     </i></font><font color="#800000">#73 </font><font color="#000080">: </font>C <font color="#000080">:= </font>PGUP <font color="#000080">;   </font><font color="#008000"><i>{PGUP}
     </i></font><font color="#800000">#75 </font><font color="#000080">: </font>C <font color="#000080">:= </font>LFT <font color="#000080">;   </font><font color="#008000"><i>{LEFT}
     </i></font><font color="#800000">#77 </font><font color="#000080">: </font>C <font color="#000080">:= </font>RGHT <font color="#000080">;   </font><font color="#008000"><i>{RIGHT}
     </i></font><font color="#800000">#79 </font><font color="#000080">: </font>C <font color="#000080">:= </font>END1 <font color="#000080">;   </font><font color="#008000"><i>{END}
     </i></font><font color="#800000">#80 </font><font color="#000080">: </font>C <font color="#000080">:= </font>DWN <font color="#000080">;   </font><font color="#008000"><i>{DOWN}
     </i></font><font color="#800000">#81 </font><font color="#000080">: </font>C <font color="#000080">:= </font>PGDN <font color="#000080">;   </font><font color="#008000"><i>{PGDN}
     </i></font><font color="#800000">#82 </font><font color="#000080">: </font>C <font color="#000080">:= </font>INS <font color="#000080">;   </font><font color="#008000"><i>{INS}
     </i></font><font color="#800000">#83 </font><font color="#000080">: </font>C <font color="#000080">:= </font>DEL <font color="#000080">;   </font><font color="#008000"><i>{DEL}
     </i></font><font color="#800000">#114 </font><font color="#000080">: </font>C <font color="#000080">:= </font>PRTSRN <font color="#000080">; </font><font color="#008000"><i>{ Cntl - PrtSc }
     </i></font><font color="#800000">#15 </font><font color="#000080">: </font>C <font color="#000080">:= </font>SHTAB <font color="#000080">;  </font><font color="#008000"><i>{ Shft Tab }
     </i></font><font color="#FF0000"><b>End  </b></font><font color="#008000"><i>{ Case }
     </i></font><font color="#FF0000"><b>else    </b></font><font color="#008000"><i>{ Not a function Key }
     </i></font><font color="#FF0000"><b>case </b></font>ch <font color="#FF0000"><b>of
     </b></font><font color="#800000">#13 </font><font color="#000080">: </font>C <font color="#000080">:= </font>ENT <font color="#000080">;    </font><font color="#008000"><i>{ Return }
     </i></font><font color="#800000">#27 </font><font color="#000080">: </font>C <font color="#000080">:= </font>ESC <font color="#000080">;    </font><font color="#008000"><i>{ Escape }
     </i></font><font color="#800000">#32 </font><font color="#000080">: </font>C <font color="#000080">:= </font>SPACE <font color="#000080">;  </font><font color="#008000"><i>{ Space Bar }
     </i></font><font color="#800000">#9  </font><font color="#000080">: </font>C <font color="#000080">:= </font>TAB <font color="#000080">;    </font><font color="#008000"><i>{ Tab }
     </i></font><font color="#800000">#8  </font><font color="#000080">: </font>C <font color="#000080">:= </font>BKSPAC <font color="#000080">; </font><font color="#008000"><i>{ Back Space }
     </i></font><font color="#FF0000"><b>end </b></font><font color="#000080">;   </font><font color="#008000"><i>{ Case }
     </i></font><font color="#FF0000"><b>end </b></font><font color="#000080">;
     </font>Getcommand <font color="#000080">:= </font>C <font color="#000080">;
</font><font color="#FF0000"><b>End </b></font><font color="#000080">;  </font><font color="#008000"><i>{Getcommand}
{****************************************************************************}
</i></font><font color="#FF0000"><b>Procedure </b></font>readxy <font color="#000080">;

</font><font color="#FF0000"><b>Var
     </b></font>Ch <font color="#000080">: </font>Char <font color="#000080">;
     </font>Done<font color="#000080">,</font>Nomore<font color="#000080">,</font>Inson<font color="#000080">,</font>Funckey<font color="#000080">,</font>curson <font color="#000080">: </font>Boolean <font color="#000080">;
     </font>Curp<font color="#000080">,</font>Cx<font color="#000080">,</font>Cy<font color="#000080">,</font>Sx<font color="#000080">,</font>Sy<font color="#000080">,</font>StrCnt<font color="#000080">,</font>I<font color="#000080">,</font>x1<font color="#000080">,</font>x2<font color="#000080">,</font>y1<font color="#000080">,</font>y2 <font color="#000080">: </font>Integer <font color="#000080">;
     </font>Outstr <font color="#000080">: </font><font color="#FF0000"><b>string </b></font><font color="#000080">;
     </font>cmmd <font color="#000080">: </font>commands <font color="#000080">;
     </font>Spac <font color="#000080">: </font>integer <font color="#000080">;
</font><font color="#008000"><i>{*******************************************}
{ Place the Cursor and update the cursor on flag }
{ With I we can force the cursor on or off or let it operate automaticly
if I = 0 then turn the cursor off, if 1 then automatic, if 2 then on. }
</i></font><font color="#FF0000"><b>Procedure </b></font>PpCur<font color="#000080">(</font>I <font color="#000080">: </font>integer<font color="#000080">) ;
</font><font color="#FF0000"><b>var
   </b></font>udc <font color="#000080">: </font>boolean <font color="#000080">;
</font><font color="#FF0000"><b>begin   </b></font><font color="#008000"><i>{ ppcur }
     </i></font>udc <font color="#000080">:= </font>false <font color="#000080">;
     </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>cx <font color="#000080">&gt;= </font>x1<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>cx <font color="#000080">&lt; </font>x2<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>udc <font color="#000080">:= </font>true <font color="#000080">;
     </font><font color="#FF0000"><b>if </b></font>udc <font color="#FF0000"><b>then
     begin
          case </b></font>I <font color="#FF0000"><b>of
          </b></font><font color="#800000">0 </font><font color="#000080">: </font>setcolor<font color="#000080">(</font>black<font color="#000080">) ;
          </font><font color="#800000">1 </font><font color="#000080">: </font><font color="#FF0000"><b>if </b></font>curson <font color="#FF0000"><b>then </b></font>setcolor<font color="#000080">(</font>black<font color="#000080">) </font><font color="#FF0000"><b>else </b></font>setcolor<font color="#000080">(</font>white<font color="#000080">) ;
          </font><font color="#800000">2 </font><font color="#000080">: </font>setcolor<font color="#000080">(</font>white<font color="#000080">) ;
          </font><font color="#FF0000"><b>end </b></font><font color="#000080">;
          </font><font color="#FF0000"><b>if </b></font>inson <font color="#FF0000"><b>then </b></font>setlinestyle<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">$FFFF</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">) </font><font color="#FF0000"><b>else </b></font>setlinestyle<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">$FFFF</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">) ;
          </font>line<font color="#000080">(</font>cx<font color="#000080">,</font>cy<font color="#000080">+</font>textheight<font color="#000080">(</font><font color="#800000">'H'</font><font color="#000080">)+</font><font color="#800000">1</font><font color="#000080">,</font>cx<font color="#000080">+</font>textwidth<font color="#000080">(</font><font color="#800000">'X'</font><font color="#000080">),</font>cy<font color="#000080">+</font>textheight<font color="#000080">(</font><font color="#800000">'H'</font><font color="#000080">)+</font><font color="#800000">1</font><font color="#000080">)
;          </font>curson <font color="#000080">:= </font><font color="#FF0000"><b>not</b></font><font color="#000080">(</font>curson<font color="#000080">) ;
          </font><font color="#FF0000"><b>if </b></font>I <font color="#000080">= </font><font color="#800000">2 </font><font color="#FF0000"><b>then </b></font>curson <font color="#000080">:= </font>true <font color="#000080">;
          </font><font color="#FF0000"><b>if </b></font>I <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>curson <font color="#000080">:= </font>false <font color="#000080">;
     </font><font color="#FF0000"><b>end </b></font><font color="#000080">;
     </font>setcolor<font color="#000080">(</font>white<font color="#000080">) ;
</font><font color="#FF0000"><b>end </b></font><font color="#000080">;   </font><font color="#008000"><i>{ ppcur }

{*******************************************}
{ Go to the end of the line, wherever it may be... }
</i></font><font color="#FF0000"><b>Procedure </b></font>Goend <font color="#000080">;
</font><font color="#FF0000"><b>Begin
     </b></font>ppcur<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">) ; </font><font color="#008000"><i>{ Erase the old cursor }
     </i></font>Cx <font color="#000080">:= </font>Sx <font color="#000080">+ </font>Length<font color="#000080">(</font>S<font color="#000080">) * </font>Spac <font color="#000080">;
     </font>Strcnt <font color="#000080">:= </font>Length<font color="#000080">(</font>S<font color="#000080">) + </font><font color="#800000">1 </font><font color="#000080">;
     </font>ppcur<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">) ; </font><font color="#008000"><i>{ Place the new cursor }
</i></font><font color="#FF0000"><b>End </b></font><font color="#000080">;


</font><font color="#008000"><i>{*******************************************}
</i></font><font color="#FF0000"><b>Begin   </b></font><font color="#008000"><i>{ Readpgrf }
     </i></font>curson <font color="#000080">:= </font>false <font color="#000080">; </font>Strcnt <font color="#000080">:= </font><font color="#800000">1 </font><font color="#000080">; </font>Inson <font color="#000080">:= </font>False <font color="#000080">;
     </font>Outstr <font color="#000080">:= </font><font color="#800000">'' </font><font color="#000080">; </font>Nomore <font color="#000080">:= </font>False <font color="#000080">;
     </font>spac <font color="#000080">:= </font>textwidth<font color="#000080">(</font><font color="#800000">'X'</font><font color="#000080">) ;
     </font>Sx <font color="#000080">:= </font>X <font color="#000080">;
     </font>Sy <font color="#000080">:= </font>Y <font color="#000080">;
     </font>Cx <font color="#000080">:= </font>Sx <font color="#000080">;
     </font>Cy <font color="#000080">:= </font>Sy <font color="#000080">;    </font><font color="#008000"><i>{ Set the Current x &amp; y }

     </i></font>y2 <font color="#000080">:= </font>y <font color="#000080">+ </font>spac <font color="#000080">;
     </font>x1 <font color="#000080">:= </font>x <font color="#000080">;
     </font>x2 <font color="#000080">:= </font>x1 <font color="#000080">+ </font>L <font color="#000080">* </font>spac <font color="#000080">;
     </font>y1 <font color="#000080">:= </font>y <font color="#000080">;
     </font>moveto<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">) ;
     </font>outtext<font color="#000080">(</font>S<font color="#000080">) ;
     </font>ppcur<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">) ;
     </font>Done <font color="#000080">:= </font>False <font color="#000080">; </font><font color="#FF0000"><b>While Not </b></font>Done <font color="#FF0000"><b>Do
     Begin
          </b></font>ch <font color="#000080">:= </font>chr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">) ; </font><font color="#008000"><i>{ Clears the char }
          </i></font>cmmd <font color="#000080">:= </font>getcommand<font color="#000080">(</font>ch<font color="#000080">) ;
          </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>cmmd <font color="#000080">&lt;&gt; </font>NON<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>cmmd <font color="#000080">&lt;&gt; </font>SPACE<font color="#000080">) </font><font color="#FF0000"><b>then
          Case </b></font>CMMD <font color="#FF0000"><b>Of
          </b></font>HOME <font color="#000080">: </font><font color="#FF0000"><b>Begin   </b></font><font color="#008000"><i>{HOME}
                      </i></font>Strcnt <font color="#000080">:= </font><font color="#800000">1 </font><font color="#000080">;
                      </font>ppcur<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">) ;
                      </font>Cx <font color="#000080">:= </font>Sx <font color="#000080">;
                      </font>Cy <font color="#000080">:= </font>Sy <font color="#000080">;
                      </font>ppcur<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">) ;
                 </font><font color="#FF0000"><b>End </b></font><font color="#000080">;
          </font>LFT  <font color="#000080">: </font><font color="#FF0000"><b>Begin   </b></font><font color="#008000"><i>{ Left }
                      </i></font><font color="#FF0000"><b>If </b></font>Cx <font color="#000080">&gt;= </font>X1 <font color="#000080">+ </font>Spac <font color="#FF0000"><b>Then
                      Begin
                           if </b></font>cx <font color="#000080">&lt;= </font>x2 <font color="#000080">- </font>spac <font color="#FF0000"><b>then </b></font>ppcur<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">) ;
                           </font>Cx <font color="#000080">:= </font>Cx <font color="#000080">- </font>Spac <font color="#000080">;
                           </font>ppcur<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">) ;
                           </font>Dec<font color="#000080">(</font>Strcnt<font color="#000080">) ;
                           </font><font color="#FF0000"><b>If </b></font>Strcnt <font color="#000080">&lt; </font><font color="#800000">1 </font><font color="#FF0000"><b>Then </b></font>Strcnt <font color="#000080">:= </font><font color="#800000">1 </font><font color="#000080">;
                      </font><font color="#FF0000"><b>End </b></font><font color="#000080">;
                 </font><font color="#FF0000"><b>End </b></font><font color="#000080">;  </font><font color="#008000"><i>{ UP }
          </i></font>RGHT <font color="#000080">: </font><font color="#FF0000"><b>Begin   </b></font><font color="#008000"><i>{ Right }
                      </i></font><font color="#FF0000"><b>If </b></font>Cx <font color="#000080">&lt; </font>X2 <font color="#000080">- </font>Spac <font color="#FF0000"><b>Then
                      Begin
                           </b></font>ppcur<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">) ;
                           </font>Cx <font color="#000080">:= </font>Cx <font color="#000080">+ </font>Spac <font color="#000080">;
                           </font>ppcur<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">) ;
                           </font><font color="#FF0000"><b>If </b></font>Strcnt <font color="#000080">= </font>Length<font color="#000080">(</font>S<font color="#000080">) + </font><font color="#800000">1 </font><font color="#FF0000"><b>Then
                           Begin
                                </b></font>Insert<font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">,</font>S<font color="#000080">,</font>Strcnt<font color="#000080">) ;
                                </font>outtextxy<font color="#000080">(</font>Cx<font color="#000080">,</font>Cy<font color="#000080">,</font><font color="#800000">' '</font><font color="#000080">) ;
                                </font>Inc<font color="#000080">(</font>Strcnt<font color="#000080">) ;
                           </font><font color="#FF0000"><b>End
                           Else </b></font>Inc<font color="#000080">(</font>Strcnt<font color="#000080">) ;
                      </font><font color="#FF0000"><b>end </b></font><font color="#000080">;
                 </font><font color="#FF0000"><b>End </b></font><font color="#000080">;   </font><font color="#008000"><i>{RIGHT}
          </i></font>END1 <font color="#000080">: </font>Goend <font color="#000080">;
          </font>INS  <font color="#000080">: </font><font color="#FF0000"><b>Begin   </b></font><font color="#008000"><i>{ INS }

                      </i></font><font color="#FF0000"><b>If </b></font>Inson <font color="#000080">= </font>False <font color="#FF0000"><b>Then
                      begin
                      If </b></font>Integer<font color="#000080">(</font>Length<font color="#000080">(</font>S<font color="#000080">) * </font>Spac<font color="#000080">)
                       &lt; </font>Integer<font color="#000080">(</font>X2 <font color="#000080">- </font>X1 <font color="#000080">- </font>Spac<font color="#000080">) </font><font color="#FF0000"><b>Then </b></font>Inson <font color="#000080">:= </font>True <font color="#000080">;
                      </font><font color="#FF0000"><b>end else
                      begin
                           </b></font>ppcur<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">) ;
                           </font>Inson <font color="#000080">:= </font>False <font color="#000080">;
                      </font><font color="#FF0000"><b>end </b></font><font color="#000080">;
                      </font>ppcur<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">) ;
                 </font><font color="#FF0000"><b>End </b></font><font color="#000080">;   </font><font color="#008000"><i>{ INS }
          </i></font>DEL  <font color="#000080">: </font><font color="#FF0000"><b>If </b></font>Strcnt <font color="#000080">&lt; </font>Length<font color="#000080">(</font>S<font color="#000080">) + </font><font color="#800000">1 </font><font color="#FF0000"><b>Then
                 Begin
                      </b></font>Delete<font color="#000080">(</font>S<font color="#000080">,</font>Strcnt<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">) ;
                      </font>Moveto<font color="#000080">(</font>Cx<font color="#000080">,</font>Cy<font color="#000080">) ;
                      </font><font color="#FF0000"><b>For </b></font>I <font color="#000080">:= </font>Strcnt <font color="#FF0000"><b>To </b></font>Length<font color="#000080">(</font>S<font color="#000080">) </font><font color="#FF0000"><b>Do
                       if </b></font>noecho <font color="#FF0000"><b>then </b></font>Outstr <font color="#000080">:= </font>outstr <font color="#000080">+ </font><font color="#800000">'.'
                        </font><font color="#FF0000"><b>else </b></font>outstr <font color="#000080">:= </font>Outstr <font color="#000080">+ </font>S<font color="#000080">[</font>I<font color="#000080">] ;
                      </font>clrvp<font color="#000080">(</font>Cx<font color="#000080">,</font>Cy<font color="#000080">,</font>X2<font color="#000080">,</font>Y2<font color="#000080">) ;
                      </font>Outtextxy<font color="#000080">(</font>cx<font color="#000080">,</font>cy<font color="#000080">,</font>Outstr<font color="#000080">) ;
                      </font>Outstr <font color="#000080">:= </font><font color="#800000">'' </font><font color="#000080">;
                      </font>ppcur<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">) ;
                 </font><font color="#FF0000"><b>End </b></font><font color="#000080">;
          </font>BKSPAC <font color="#000080">: </font><font color="#FF0000"><b>If </b></font>Strcnt <font color="#000080">&gt; </font><font color="#800000">1 </font><font color="#FF0000"><b>Then
                 Begin
                      If </b></font>Cx <font color="#000080">&lt;= </font>X2 <font color="#000080">- </font>Spac <font color="#FF0000"><b>Then
                      </b></font>ppcur<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">) ;
                      </font>dec<font color="#000080">(</font>Cx<font color="#000080">,</font>Spac<font color="#000080">) ;   </font><font color="#008000"><i>{ Right - Normal   }
                      </i></font><font color="#FF0000"><b>If </b></font>Cx <font color="#000080">&lt; </font><font color="#800000">0 </font><font color="#FF0000"><b>Then </b></font>Cx <font color="#000080">:= </font><font color="#800000">0 </font><font color="#000080">;
                      </font>Nomore <font color="#000080">:= </font>False <font color="#000080">;
                      </font>Dec<font color="#000080">(</font>Strcnt<font color="#000080">) ;
                      </font><font color="#FF0000"><b>If </b></font>Strcnt <font color="#000080">&lt; </font>Length<font color="#000080">(</font>S<font color="#000080">) </font><font color="#FF0000"><b>Then
                      Begin
                           </b></font>Moveto<font color="#000080">(</font>Cx<font color="#000080">,</font>Cy<font color="#000080">) ;
                           </font>Delete<font color="#000080">(</font>S<font color="#000080">,</font>Strcnt<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">) ;
                           </font><font color="#FF0000"><b>For </b></font>I <font color="#000080">:= </font>Strcnt <font color="#FF0000"><b>To </b></font>Length<font color="#000080">(</font>S<font color="#000080">) </font><font color="#FF0000"><b>Do
                            if </b></font>noecho <font color="#FF0000"><b>then </b></font>Outstr <font color="#000080">:= </font>outstr <font color="#000080">+ </font><font color="#800000">'.'
                            </font><font color="#FF0000"><b>else </b></font>Outstr <font color="#000080">:= </font>Outstr <font color="#000080">+ </font>S<font color="#000080">[</font>I<font color="#000080">] ;
                           </font>clrvp<font color="#000080">(</font>Cx<font color="#000080">,</font>cy<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">) ;
                           </font>Outtextxy<font color="#000080">(</font>cx<font color="#000080">,</font>cy<font color="#000080">,</font>Outstr<font color="#000080">) ;
                           </font>Outstr <font color="#000080">:= </font><font color="#800000">'' </font><font color="#000080">;
                           </font>ppcur<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">) ;
                      </font><font color="#FF0000"><b>End
                      Else
                      Begin
                           </b></font>ppcur<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">) ;
                           </font><font color="#FF0000"><b>If </b></font>Length<font color="#000080">(</font>S<font color="#000080">) &lt;= </font><font color="#800000">1 </font><font color="#FF0000"><b>Then
                            </b></font>S<font color="#000080">:= </font><font color="#800000">'' </font><font color="#FF0000"><b>Else </b></font>Delete<font color="#000080">(</font>S<font color="#000080">,</font>Strcnt<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">) ;
                            </font>clrvp<font color="#000080">(</font>cx<font color="#000080">,</font>cy<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">) ;
                            </font>ppcur<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">) ;
                      </font><font color="#FF0000"><b>End </b></font><font color="#000080">;
                 </font><font color="#FF0000"><b>End </b></font><font color="#000080">;
          </font>ESC <font color="#000080">:  </font><font color="#FF0000"><b>Begin  </b></font><font color="#008000"><i>{ ESC }
                      </i></font>ppcur<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">) ;
                      </font>S <font color="#000080">:= </font><font color="#800000">'' </font><font color="#000080">;
                      </font>clrvp<font color="#000080">(</font>X1<font color="#000080">,</font>Y1<font color="#000080">,</font>X2<font color="#000080">,</font>Y2<font color="#000080">) ;
                      </font>Cx <font color="#000080">:= </font>Sx <font color="#000080">; </font>Cy <font color="#000080">:= </font>Sy <font color="#000080">;
                      </font>ppcur<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">) ;
                      </font>nomore <font color="#000080">:= </font>false <font color="#000080">;
                      </font>Strcnt <font color="#000080">:= </font><font color="#800000">1 </font><font color="#000080">;
                 </font><font color="#FF0000"><b>End </b></font><font color="#000080">;
          </font>ENT   <font color="#000080">: </font>Done <font color="#000080">:= </font>True <font color="#000080">;      </font><font color="#008000"><i>{ Return }
          </i></font><font color="#FF0000"><b>end  </b></font><font color="#008000"><i>{ Case cmmd }
          </i></font><font color="#FF0000"><b>Else   </b></font><font color="#008000"><i>{ Not a command But A Key }
          </i></font><font color="#FF0000"><b>case </b></font>ch <font color="#FF0000"><b>of
          </b></font><font color="#800000">' '</font><font color="#000080">..</font><font color="#800000">'~'</font><font color="#000080">:     </font><font color="#FF0000"><b>Begin
                         If </b></font>Integer<font color="#000080">(</font>Length<font color="#000080">(</font>S<font color="#000080">) * </font>Spac<font color="#000080">) &gt;
                               (</font>x2 <font color="#000080">- </font>X1 <font color="#000080">- </font>Spac<font color="#000080">) </font><font color="#FF0000"><b>Then </b></font>Nomore <font color="#000080">:= </font>True <font color="#000080">;
                         </font><font color="#FF0000"><b>If </b></font><font color="#000080">(</font>Inson <font color="#000080">= </font>False<font color="#000080">)
                                  </font><font color="#FF0000"><b>And
                            </b></font><font color="#000080">(</font>Strcnt <font color="#000080">&lt; </font>Length<font color="#000080">(</font>S<font color="#000080">) + </font><font color="#800000">1</font><font color="#000080">)
                            </font><font color="#FF0000"><b>Then </b></font>Nomore <font color="#000080">:= </font>False <font color="#000080">;
                         </font><font color="#FF0000"><b>If Not </b></font>Nomore <font color="#FF0000"><b>Then
                         Begin </b></font><font color="#008000"><i>{ Not Nomore }
                              </i></font>ppcur<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">) ;
                              </font><font color="#FF0000"><b>If </b></font>Inson <font color="#FF0000"><b>Then
                              Begin  </b></font><font color="#008000"><i>{ Inson }
                                   </i></font>Insert<font color="#000080">(</font>Ch<font color="#000080">,</font>S<font color="#000080">,</font>Strcnt<font color="#000080">) ;
                                   </font><font color="#FF0000"><b>If </b></font>Strcnt <font color="#000080">&lt; </font>Length<font color="#000080">(</font>S<font color="#000080">) </font><font color="#FF0000"><b>Then
                                   Begin  </b></font><font color="#008000"><i>{ &lt; Length }
                                   </i></font>clrvp<font color="#000080">(</font>Cx<font color="#000080">,</font>Cy<font color="#000080">,</font>X2<font color="#000080">,</font>Y2<font color="#000080">) ;
                                        </font>Moveto<font color="#000080">(</font>Cx<font color="#000080">,</font>Cy<font color="#000080">) ;
                                        </font><font color="#FF0000"><b>For </b></font>I <font color="#000080">:= </font>Strcnt <font color="#FF0000"><b>To </b></font>Length<font color="#000080">(</font>S<font color="#000080">) </font><font color="#FF0000"><b>Do
                                         if </b></font>noecho <font color="#FF0000"><b>then </b></font>Outstr <font color="#000080">:= </font>outstr <font color="#000080">+ </font><font color="#800000">'.'
                                         </font><font color="#FF0000"><b>else </b></font>Outstr <font color="#000080">:= </font>Outstr <font color="#000080">+ </font>S<font color="#000080">[</font>I<font color="#000080">] ;
                                        </font>Outtext<font color="#000080">(</font>Outstr<font color="#000080">) ;
                                        </font>Outstr <font color="#000080">:= </font><font color="#800000">'' </font><font color="#000080">;
                                        </font>Inc<font color="#000080">(</font>Strcnt<font color="#000080">) ;
                                   </font><font color="#FF0000"><b>End  </b></font><font color="#008000"><i>{ &lt; Length }
                                   </i></font><font color="#FF0000"><b>Else
                                   Begin  </b></font><font color="#008000"><i>{ = Length }
                                        </i></font><font color="#FF0000"><b>if </b></font>noecho <font color="#FF0000"><b>then </b></font>outtextxy<font color="#000080">(</font>cx<font color="#000080">,</font>cy<font color="#000080">,</font><font color="#800000">'.'</font><font color="#000080">)
                                        </font><font color="#FF0000"><b>else </b></font>outtextxy<font color="#000080">(</font>Cx<font color="#000080">,</font>Cy<font color="#000080">,</font>ch<font color="#000080">) ;
                                        </font>curson <font color="#000080">:= </font>false <font color="#000080">;
                                        </font>Inc<font color="#000080">(</font>Strcnt<font color="#000080">) ;
                                   </font><font color="#FF0000"><b>End </b></font><font color="#000080">;  </font><font color="#008000"><i>{ = Length }
                              </i></font><font color="#FF0000"><b>End </b></font><font color="#008000"><i>{ Inson }
                              </i></font><font color="#FF0000"><b>Else
                              Begin  </b></font><font color="#008000"><i>{ Ins Off }
                                   </i></font>Delete<font color="#000080">(</font>S<font color="#000080">,</font>Strcnt<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">) ;
                                   </font>Insert<font color="#000080">(</font>Ch<font color="#000080">,</font>S<font color="#000080">,</font>Strcnt<font color="#000080">) ;
                                   </font>Inc<font color="#000080">(</font>Strcnt<font color="#000080">) ;

</font>clrvp<font color="#000080">(</font>cx<font color="#000080">,</font>cy<font color="#000080">,</font>cx<font color="#000080">+</font>textwidth<font color="#000080">(</font>ch<font color="#000080">),</font>cy<font color="#000080">+</font>textheight<font color="#000080">(</font>ch<font color="#000080">)) ;
</font><font color="#FF0000"><b>if </b></font>noecho <font color="#FF0000"><b>then </b></font>outtextxy<font color="#000080">(</font>cx<font color="#000080">,</font>cy<font color="#000080">,</font><font color="#800000">'.'</font><font color="#000080">)                                   </font><font color="#FF0000"><b>else
</b></font>outtextxy<font color="#000080">(</font>Cx<font color="#000080">,</font>Cy<font color="#000080">,</font>ch<font color="#000080">) ;                                   </font><font color="#FF0000"><b>if </b></font>strcnt <font color="#000080">&lt;= </font>length<font color="#000080">(</font>s<font color="#000080">)
</font><font color="#FF0000"><b>then                                       begin
                                            </b></font>ch <font color="#000080">:= </font>s<font color="#000080">[</font>strcnt<font color="#000080">] ;
                                            </font><font color="#FF0000"><b>if </b></font>noecho <font color="#FF0000"><b>then </b></font>outtextxy<font color="#000080">(</font>cx<font color="#000080">,</font>cy<font color="#000080">,</font><font color="#800000">'.'</font><font color="#000080">)
                                            </font><font color="#FF0000"><b>else </b></font>outtextxy<font color="#000080">(</font>Cx <font color="#000080">+ </font>spac<font color="#000080">,</font>Cy<font color="#000080">,</font>ch<font color="#000080">) ;
                                       </font><font color="#FF0000"><b>end </b></font><font color="#000080">;
                                   </font>curson <font color="#000080">:= </font>false <font color="#000080">;
                              </font><font color="#FF0000"><b>End </b></font><font color="#000080">;  </font><font color="#008000"><i>{ Ins Off }
                              </i></font>Cx <font color="#000080">:= </font>Cx <font color="#000080">+ </font>Spac <font color="#000080">;
                              </font><font color="#FF0000"><b>If </b></font>Cx <font color="#000080">&lt;= </font>X2 <font color="#000080">- </font>Spac <font color="#FF0000"><b>Then </b></font>ppcur<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">) ;
                         </font><font color="#FF0000"><b>End    </b></font><font color="#008000"><i>{ Not Nomore }
                    </i></font><font color="#FF0000"><b>End </b></font><font color="#000080">;   </font><font color="#008000"><i>{ Real Chars }
          </i></font><font color="#FF0000"><b>End </b></font><font color="#000080">; </font><font color="#008000"><i>{ Case }
     </i></font><font color="#FF0000"><b>End </b></font><font color="#000080">;    </font><font color="#008000"><i>{ Not Done  }
     </i></font>S<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">] := </font>chr<font color="#000080">(</font>length<font color="#000080">(</font>s<font color="#000080">)) ;
     </font><font color="#FF0000"><b>if </b></font>curson <font color="#FF0000"><b>then </b></font>ppcur<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">) ;
</font><font color="#FF0000"><b>End </b></font><font color="#000080">;  </font><font color="#008000"><i>{readxy}
{****************************************************************************}
{ Get an Amount of Type Real from a Location }
</i></font><font color="#FF0000"><b>Function </b></font>Getreal <font color="#000080">;
</font><font color="#FF0000"><b>var
   </b></font>istr <font color="#000080">: </font><font color="#FF0000"><b>string </b></font><font color="#000080">;
   </font>cod <font color="#000080">: </font>integer <font color="#000080">;
</font><font color="#FF0000"><b>begin   </b></font><font color="#008000"><i>{ get Amount }
     </i></font>str<font color="#000080">(</font>am<font color="#000080">:</font><font color="#800000">1</font><font color="#000080">:</font><font color="#800000">2</font><font color="#000080">,</font>istr<font color="#000080">) ;
     </font><font color="#FF0000"><b>repeat
          </b></font>readxy<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>istr<font color="#000080">,</font>w<font color="#000080">) ; </font>val<font color="#000080">(</font>istr<font color="#000080">,</font>am<font color="#000080">,</font>cod<font color="#000080">) ;
     </font><font color="#FF0000"><b>until </b></font>cod <font color="#000080">= </font><font color="#800000">0 </font><font color="#000080">;
     </font>getreal <font color="#000080">:= </font>am <font color="#000080">;
</font><font color="#FF0000"><b>end </b></font><font color="#000080">;   </font><font color="#008000"><i>{ get Amount }
{****************************************************************************}
{ Get an Amount of type integer from a location x,y  }
</i></font><font color="#FF0000"><b>Function </b></font>getinteger  <font color="#000080">;
</font><font color="#FF0000"><b>var
   </b></font>istr <font color="#000080">: </font><font color="#FF0000"><b>string </b></font><font color="#000080">;
   </font>cod <font color="#000080">: </font>integer <font color="#000080">;
</font><font color="#FF0000"><b>begin   </b></font><font color="#008000"><i>{ Getinteger }
     </i></font>str<font color="#000080">(</font>n<font color="#000080">,</font>istr<font color="#000080">) ;
     </font><font color="#FF0000"><b>repeat
          </b></font>readxy<font color="#000080">(</font>X<font color="#000080">,</font>y<font color="#000080">,</font>istr<font color="#000080">,</font>w<font color="#000080">) ; </font>val<font color="#000080">(</font>istr<font color="#000080">,</font>n<font color="#000080">,</font>cod<font color="#000080">) ;
     </font><font color="#FF0000"><b>until </b></font>cod <font color="#000080">= </font><font color="#800000">0 </font><font color="#000080">;
     </font>getinteger <font color="#000080">:= </font>n <font color="#000080">;
</font><font color="#FF0000"><b>end </b></font><font color="#000080">;   </font><font color="#008000"><i>{ Getinteger }
{****************************************************************************}
{ Outputs using Outtextxy then GREY's out the text }
</i></font><font color="#FF0000"><b>Procedure </b></font>Greyoutxy<font color="#000080">(</font>x<font color="#000080">,</font>y <font color="#000080">: </font>integer <font color="#000080">; </font>textstring <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">) ;
</font><font color="#FF0000"><b>var
   </b></font>size<font color="#000080">,</font>I <font color="#000080">: </font>integer <font color="#000080">;

</font><font color="#FF0000"><b>begin
     </b></font>size <font color="#000080">:= </font>textwidth<font color="#000080">(</font>textstring<font color="#000080">) </font><font color="#FF0000"><b>div </b></font>length<font color="#000080">(</font>textstring<font color="#000080">) ;
     </font>outtextxy<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>textstring<font color="#000080">) ;
     </font><font color="#FF0000"><b>for </b></font>I <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>length<font color="#000080">(</font>textstring<font color="#000080">)-</font><font color="#800000">1 </font><font color="#FF0000"><b>do
        </b></font>putimage<font color="#000080">(</font>x <font color="#000080">+ </font>size<font color="#000080">*</font>I<font color="#000080">,</font>y<font color="#000080">,</font>greypic<font color="#000080">^,</font>andput<font color="#000080">) ;  </font><font color="#008000"><i>{ Greyout }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{****************************************************************************}
</i></font><font color="#FF0000"><b>Function </b></font>YesNoDialog <font color="#000080">: </font>boolean <font color="#000080">;
</font><font color="#FF0000"><b>const
     </b></font>boxx <font color="#000080">= </font><font color="#800000">150 </font><font color="#000080">;
     </font>Boxy <font color="#000080">= </font><font color="#800000">150 </font><font color="#000080">;
</font><font color="#FF0000"><b>Var
   </b></font>menudone<font color="#000080">,</font>Yesno <font color="#000080">: </font>Boolean <font color="#000080">;
   </font>oldstyle <font color="#000080">: </font>textsettingstype <font color="#000080">;
   </font>boxheight<font color="#000080">,</font>boxwidth<font color="#000080">,</font>oldcolor<font color="#000080">,</font>numpressed <font color="#000080">: </font>word <font color="#000080">;
   </font>msx<font color="#000080">,</font>msy <font color="#000080">: </font>word <font color="#000080">;
   </font>Imagebuffer <font color="#000080">: </font>pointer <font color="#000080">;
   </font>Size <font color="#000080">: </font>word <font color="#000080">;

</font><font color="#FF0000"><b>begin  </b></font><font color="#008000"><i>{ YesNo Dialog }
     </i></font>Yesno <font color="#000080">:= </font>false <font color="#000080">;
     </font>menudone <font color="#000080">:= </font>false <font color="#000080">;
     </font>hidemousecursor <font color="#000080">;
     </font><font color="#008000"><i>{ Save what is under the window before opening it. Also save
        the old textstyle }
     </i></font>gettextsettings<font color="#000080">(</font>oldstyle<font color="#000080">) ;
     </font>oldcolor <font color="#000080">:= </font>getcolor <font color="#000080">;
     </font>settextstyle<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">) ;
     </font>boxheight <font color="#000080">:= </font>textheight<font color="#000080">(</font><font color="#800000">'H'</font><font color="#000080">) * </font><font color="#800000">3 </font><font color="#000080">;
     </font>Boxwidth <font color="#000080">:= </font>textwidth<font color="#000080">(</font><font color="#800000">'H'</font><font color="#000080">) * </font><font color="#800000">15</font><font color="#000080">;
     </font>size <font color="#000080">:= </font>imagesize<font color="#000080">(</font>boxx<font color="#000080">,</font>boxy<font color="#000080">,</font>boxx <font color="#000080">+ </font>boxwidth<font color="#000080">,</font>boxy <font color="#000080">+ </font>boxheight<font color="#000080">) ;
     </font>getmem<font color="#000080">(</font>imagebuffer<font color="#000080">,</font>size<font color="#000080">) ;
     </font>getimage<font color="#000080">(</font>boxx<font color="#000080">,</font>boxy<font color="#000080">,</font>boxx <font color="#000080">+ </font>boxwidth<font color="#000080">,</font>boxy <font color="#000080">+ </font>boxheight<font color="#000080">,</font>imagebuffer<font color="#000080">^) ;

     </font><font color="#008000"><i>{ Now we put the image of the menu down. }
     </i></font>setfillstyle<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font>lightgray<font color="#000080">) ;
     </font>bar<font color="#000080">(</font>boxx<font color="#000080">+</font><font color="#800000">3</font><font color="#000080">,</font>boxy<font color="#000080">+</font><font color="#800000">3</font><font color="#000080">,</font>boxx <font color="#000080">+ </font>boxwidth<font color="#000080">-</font><font color="#800000">3</font><font color="#000080">,</font>boxy <font color="#000080">+ </font>boxheight<font color="#000080">-</font><font color="#800000">3</font><font color="#000080">) ;
     </font>setcolor<font color="#000080">(</font>green<font color="#000080">) ;
     </font>dblbox<font color="#000080">(</font>boxx<font color="#000080">,</font>boxy<font color="#000080">,</font>boxx <font color="#000080">+ </font>boxwidth<font color="#000080">,</font>boxy <font color="#000080">+ </font>boxheight<font color="#000080">) ;
     </font>setcolor<font color="#000080">(</font>brown<font color="#000080">) ;
     </font>outtextxy<font color="#000080">(</font>boxx<font color="#000080">+</font><font color="#800000">8</font><font color="#000080">,</font>boxy<font color="#000080">+</font>textheight<font color="#000080">(</font><font color="#800000">'H'</font><font color="#000080">),</font><font color="#800000">' Yes  |  No'</font><font color="#000080">) ;
     </font>setcolor<font color="#000080">(</font>oldcolor<font color="#000080">) ;
     </font>showmousecursor <font color="#000080">;
     </font><font color="#FF0000"><b>repeat
          if </b></font><font color="#000080">(</font>getmousex <font color="#000080">&lt;&gt; </font>msx<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>getmousey <font color="#000080">&lt;&gt; </font>msy<font color="#000080">) </font><font color="#FF0000"><b>then
          begin
               </b></font>msx <font color="#000080">:= </font>getmousex <font color="#000080">;
               </font>msy <font color="#000080">:= </font>getmousey <font color="#000080">;
          </font><font color="#FF0000"><b>end </b></font><font color="#000080">;
          </font><font color="#FF0000"><b>if </b></font>buttonpressed <font color="#FF0000"><b>then
          </b></font><font color="#008000"><i>{ where was the button pressed?}
          </i></font><font color="#FF0000"><b>begin
               </b></font>msx <font color="#000080">:= </font>getmousex <font color="#000080">;
               </font>msy <font color="#000080">:= </font>getmousey <font color="#000080">;
               </font><font color="#FF0000"><b>if </b></font><font color="#000080">((</font>msx <font color="#000080">&gt; </font>boxx<font color="#000080">+</font><font color="#800000">4</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>msx <font color="#000080">&lt; </font>boxx<font color="#000080">+</font>boxwidth<font color="#000080">))
                  </font><font color="#FF0000"><b>and
                  </b></font><font color="#000080">((</font>msy <font color="#000080">&gt; </font>boxy<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>msy <font color="#000080">&lt; </font>boxy<font color="#000080">+</font>boxheight<font color="#000080">)) </font><font color="#FF0000"><b>then
                  </b></font><font color="#008000"><i>{ it's in the menu box }
               </i></font><font color="#FF0000"><b>begin
                    </b></font><font color="#008000"><i>{ where in the menu Box? }
                    </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>msx <font color="#000080">&gt; </font>boxx<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>msx <font color="#000080">&lt; </font>boxx<font color="#000080">+ (</font>boxwidth <font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">))
                    </font><font color="#FF0000"><b>then </b></font>yesno <font color="#000080">:= </font>true <font color="#000080">;
                    </font>menudone <font color="#000080">:= </font>true <font color="#000080">;
               </font><font color="#FF0000"><b>end </b></font><font color="#000080">;
          </font><font color="#FF0000"><b>end </b></font><font color="#000080">;
     </font><font color="#FF0000"><b>until </b></font>menudone <font color="#000080">;
     </font><font color="#008000"><i>{ when we are done we want to restore all the old settings. }
     </i></font><font color="#FF0000"><b>with </b></font>oldstyle <font color="#FF0000"><b>do
     begin
          </b></font>settextjustify<font color="#000080">(</font>horiz<font color="#000080">,</font>vert<font color="#000080">) ;
          </font>settextstyle<font color="#000080">(</font>font<font color="#000080">,</font>direction<font color="#000080">,</font>charsize<font color="#000080">) ;
     </font><font color="#FF0000"><b>end </b></font><font color="#000080">;
     </font><font color="#008000"><i>{ and put the screen back to what it was.. }
     </i></font>hidemousecursor <font color="#000080">;
     </font>putimage<font color="#000080">(</font>boxx<font color="#000080">,</font>boxy<font color="#000080">,</font>imagebuffer<font color="#000080">^,</font>normalput<font color="#000080">) ;
     </font>freemem<font color="#000080">(</font>imagebuffer<font color="#000080">,</font>size<font color="#000080">) ;
     </font>showmousecursor <font color="#000080">;
     </font>setcolor<font color="#000080">(</font>oldcolor<font color="#000080">) ;
     </font>yesnodialog <font color="#000080">:= </font>yesno <font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{****************************************************************************}
</i></font><font color="#FF0000"><b>End</b></font><font color="#000080">.   </font><font color="#008000"><i>{ End of grfxutil }
{
    The routines you might be interested in are in the later half of
 that unit In the previous posts.  It provided a fully editable
 Graphical Data Entry (either string, real, or integer) line.  It
 supports the arrow keys, Home, end, backspace, del, insert, and escape
 clears the whole line.  Enter accepts the input.  You can specify how
 many characters wide the input field should be, and the numerical input
 routines, Getreal, and getinteger do some primitive checking to make
 sure that input is correct.  Also, (it's been a long time since I've
 used this so bear with my bad memory) I believe you call them with the
 value of an already initialized variable so that if the user just hits
 enter it doesn't change the value.  I've used it in conjunction with a
 mouse pointer and since the readxy routine is command driven (using the
 getcommand supplied in there too,) you can issue it an enter with the
 mouse buttons.  So you can click around in various fields with your
 mouse.  Of course you have to make that routine yourself!

    Oh!  I should tell you, delete the refferences to mouseutil and the
 single mouse function, sorry, I shouldn't have included that one with
 it.. You might not have mousutil!
}
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0152.PAS">Original</a><b>]</b></p></body>
</html>
