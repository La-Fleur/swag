<html>
<head><title> "SETMODE5.PAS" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0029.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{CD&gt;     Can someone tell me how to get 320x200x256 screen mode in Turbo
CD&gt;Pascal 5.5.

Yes.
}
</i></font><font color="#FF0000"><b>Program </b></font>DemoMode13<font color="#000080">;
</font><font color="#FF0000"><b>Uses </b></font>Dos<font color="#000080">,</font>Crt<font color="#000080">;
</font><font color="#FF0000"><b>Var
 </b></font>LM <font color="#000080">: </font>Word<font color="#000080">;
 </font>CD <font color="#000080">: </font>Word<font color="#000080">;

</font><font color="#008000"><i>{
; Enable 320*200*256, return True if successful, otherwise False
;
; Reasons For False return : Already in mode 13, mode 13 unsupported.
}
</i></font><font color="#FF0000"><b>Function </b></font>Enable13<font color="#000080">:</font>Boolean<font color="#000080">;
 </font><font color="#FF0000"><b>Var
  </b></font>Regs <font color="#000080">: </font>Registers<font color="#000080">;
 </font><font color="#FF0000"><b>begin
  </b></font>LM<font color="#000080">:=</font>LastMode<font color="#000080">;
  </font>Regs<font color="#000080">.</font>AH<font color="#000080">:=</font><font color="#800000">$0F</font><font color="#000080">;
  </font>intr<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">,</font>Regs<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>Regs<font color="#000080">.</font>AL<font color="#000080">&lt;&gt;</font><font color="#800000">$13 </font><font color="#FF0000"><b>then begin
   </b></font>Regs<font color="#000080">.</font>AH<font color="#000080">:=</font><font color="#800000">$03</font><font color="#000080">;
   </font>intr<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">,</font>Regs<font color="#000080">);
   </font>CD<font color="#000080">:=</font>Regs<font color="#000080">.</font>CX<font color="#000080">;
   </font>Regs<font color="#000080">.</font>AX<font color="#000080">:=</font><font color="#800000">$0013</font><font color="#000080">;
   </font>intr<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">,</font>Regs<font color="#000080">);
   </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>Regs<font color="#000080">.</font>Flags <font color="#FF0000"><b>and </b></font><font color="#800000">1</font><font color="#000080">)=</font><font color="#800000">0 </font><font color="#FF0000"><b>then begin
    </b></font>Enable13<font color="#000080">:=</font>True<font color="#000080">;
   </font><font color="#FF0000"><b>end else begin
    </b></font>Enable13<font color="#000080">:=</font>False<font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end else begin
   </b></font>Enable13<font color="#000080">:=</font>False<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{
; Exit 310*200*256 mode, True if successful, False if not
;
; Reasons For False return : not in mode 13.
}
</i></font><font color="#FF0000"><b>Function </b></font>Release13<font color="#000080">:</font>Boolean<font color="#000080">;
 </font><font color="#FF0000"><b>Var
  </b></font>Regs <font color="#000080">: </font>Registers<font color="#000080">;
 </font><font color="#FF0000"><b>begin
  </b></font>Regs<font color="#000080">.</font>AH<font color="#000080">:=</font><font color="#800000">$0F</font><font color="#000080">;
  </font>intr<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">,</font>Regs<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>Regs<font color="#000080">.</font>AL<font color="#000080">=</font><font color="#800000">$13 </font><font color="#FF0000"><b>then begin
   </b></font>TextMode<font color="#000080">(</font>LM<font color="#000080">);
   </font>Regs<font color="#000080">.</font>AH<font color="#000080">:=</font><font color="#800000">$01</font><font color="#000080">;
   </font>Regs<font color="#000080">.</font>CX<font color="#000080">:=</font>CD<font color="#000080">;
   </font>intr<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">,</font>Regs<font color="#000080">);
   </font>Release13<font color="#000080">:=</font>True<font color="#000080">;
  </font><font color="#FF0000"><b>end else begin
   </b></font>Release13<font color="#000080">:=</font>False<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{
; Plot a pixel in 320*200*256 mode.
;
; This may appear quite obvious at first, but take a closer look if you think
; it is Really simple.  if you read your Turbo Pascal book, though, you are
; required to only ponder the usage of `Absolute' For a moment.
}
</i></font><font color="#FF0000"><b>Procedure </b></font>DrawPixel<font color="#000080">(</font>X<font color="#000080">,</font>Y<font color="#000080">:</font>Word<font color="#000080">;</font>Colour<font color="#000080">:</font>Byte<font color="#000080">);
 </font><font color="#FF0000"><b>Var
  </b></font>Screen <font color="#000080">: </font><font color="#FF0000"><b>Array </b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">319</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">199</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte <font color="#FF0000"><b>Absolute </b></font><font color="#800000">$A000</font><font color="#000080">:</font><font color="#800000">$0000</font><font color="#000080">;
 </font><font color="#FF0000"><b>begin
  </b></font>Screen<font color="#000080">[</font>Y<font color="#000080">,</font>X<font color="#000080">]:=</font>Colour<font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{
; Main Program.  Draws points in four corners in random colours, reads a like
; of Text (odd, but it displays it!) then returns to Text mode and quits.
}
</i></font><font color="#FF0000"><b>begin
 </b></font>Writeln<font color="#000080">;
 </font>CheckBreak<font color="#000080">:=</font>False<font color="#000080">;
 </font>CheckSnow<font color="#000080">:=</font>False<font color="#000080">;
 </font>DirectVideo<font color="#000080">:=</font>False<font color="#000080">;
 </font><font color="#FF0000"><b>if </b></font>Enable13 <font color="#FF0000"><b>then begin
  </b></font>Randomize<font color="#000080">;
  </font>DrawPixel<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>Random<font color="#000080">(</font><font color="#800000">255</font><font color="#000080">));
  </font>DrawPixel<font color="#000080">(</font><font color="#800000">319</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font>Random<font color="#000080">(</font><font color="#800000">255</font><font color="#000080">));
  </font>DrawPixel<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">199</font><font color="#000080">,</font>Random<font color="#000080">(</font><font color="#800000">255</font><font color="#000080">));
  </font>DrawPixel<font color="#000080">(</font><font color="#800000">319</font><font color="#000080">,</font><font color="#800000">199</font><font color="#000080">,</font>Random<font color="#000080">(</font><font color="#800000">255</font><font color="#000080">));
  </font>GotoXY<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">);
  </font>Writeln<font color="#000080">(</font><font color="#800000">'Type something then press [Enter]'</font><font color="#000080">);
  </font>readln<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font><font color="#FF0000"><b>not </b></font>enable13<font color="#000080">) </font><font color="#FF0000"><b>then begin
   </b></font>ClrScr<font color="#000080">;
  </font><font color="#FF0000"><b>end else begin
   </b></font>Writeln<font color="#000080">;
   </font>Writeln<font color="#000080">(</font><font color="#800000">'Error Exiting mode 13.'</font><font color="#000080">);
   </font>Writeln<font color="#000080">(</font><font color="#800000">'Enter MODE CO80 or MODE MONO to'</font><font color="#000080">);
   </font>Writeln<font color="#000080">(</font><font color="#800000">'restore your screen to Text mode.'</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>end else begin
  </b></font>Writeln<font color="#000080">(</font><font color="#800000">'Error invoking mode 13'</font><font color="#000080">);
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font>Writeln<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0029.PAS">Original</a><b>]</b></p></body>
</html>
