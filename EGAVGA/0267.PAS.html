<html>
<head><title> "Show info on Targa file" by GARY C. KING</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0267.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>uses </b></font>crt<font color="#000080">,</font>dos<font color="#000080">;
</font><font color="#FF0000"><b>type
</b></font>pal       <font color="#000080">= </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">2</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
</font><font color="#FF0000"><b>var
</b></font>tgaheader <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">18</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
</font>tgapal    <font color="#000080">: </font>pal<font color="#000080">;
</font>tgatype<font color="#000080">,</font>storage<font color="#000080">,</font>bpp<font color="#000080">: </font>byte<font color="#000080">;
</font>fil       <font color="#000080">: </font><font color="#FF0000"><b>file</b></font><font color="#000080">;
</font>i         <font color="#000080">: </font>byte<font color="#000080">;
</font>xsize<font color="#000080">,</font>ysize <font color="#000080">: </font>word<font color="#000080">;
</font><font color="#FF0000"><b>begin
</b></font>clrscr<font color="#000080">;
</font>assign<font color="#000080">(</font>fil<font color="#000080">,</font><font color="#800000">'inf\vlagold.tga'</font><font color="#000080">);
</font>reset<font color="#000080">(</font>fil<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
</font>seek<font color="#000080">(</font>fil<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">);
</font>blockreaD<font color="#000080">(</font>fil<font color="#000080">,</font>tgatype<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
</font>seek<font color="#000080">(</font>fil<font color="#000080">,</font><font color="#800000">12</font><font color="#000080">);
</font>blockread<font color="#000080">(</font>fil<font color="#000080">,</font>xsize<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">);
</font>blockread<font color="#000080">(</font>fil<font color="#000080">,</font>ysize<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">);
</font>seek<font color="#000080">(</font>fil<font color="#000080">,</font><font color="#800000">16</font><font color="#000080">);
</font>blockread<font color="#000080">(</font>fil<font color="#000080">,</font>bpp<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
</font>blockread<font color="#000080">(</font>fil<font color="#000080">,</font>storage<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
</font>writeln<font color="#000080">;
</font>writeln<font color="#000080">(</font><font color="#800000">'&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute; TARGA Information &Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;'</font><font color="#000080">);
</font>writeln<font color="#000080">;
</font>writeln<font color="#000080">(</font><font color="#800000">'&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute; Misc. Information &Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;'</font><font color="#000080">);
</font><font color="#FF0000"><b>case </b></font>tgatype <font color="#FF0000"><b>of
</b></font><font color="#800000">3 </font><font color="#000080">:</font>writeln<font color="#000080">(</font><font color="#800000">'Type           : 8-bit grayscale uncompressed (3)'</font><font color="#000080">);
</font><font color="#800000">2 </font><font color="#000080">:</font>writeln<font color="#000080">(</font><font color="#800000">'Type           : 24-bit true color uncompressed (2)'</font><font color="#000080">);
</font><font color="#800000">1 </font><font color="#000080">:</font>writeln<font color="#000080">(</font><font color="#800000">'Type           : 8-bit with palette (1)'</font><font color="#000080">);
</font><font color="#FF0000"><b>else </b></font>writeln<font color="#000080">(</font><font color="#800000">'Type           : Unknown ('</font><font color="#000080">,</font>tgatype<font color="#000080">,</font><font color="#800000">')'</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>case </b></font>storage <font color="#FF0000"><b>of
</b></font><font color="#800000">32 </font><font color="#000080">: </font>writeln<font color="#000080">(</font><font color="#800000">'Storing method : Top-down'</font><font color="#000080">);
</font><font color="#800000">0  </font><font color="#000080">: </font>writeln<font color="#000080">(</font><font color="#800000">'Storing method : Bottom-up'</font><font color="#000080">);
</font><font color="#FF0000"><b>else </b></font>writeln<font color="#000080">(</font><font color="#800000">'Storing method : unknown ('</font><font color="#000080">,</font>storage<font color="#000080">,</font><font color="#800000">')'</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font>writeln<font color="#000080">;
</font>writeln<font color="#000080">(</font><font color="#800000">'&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute; Color Information &Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;'</font><font color="#000080">);
</font>writeln<font color="#000080">(</font><font color="#800000">'BPP    : '</font><font color="#000080">,</font>bpp<font color="#000080">);
</font>writeln<font color="#000080">(</font><font color="#800000">'Colors : '</font><font color="#000080">,</font><font color="#800000">256</font><font color="#000080">*(</font>bpp <font color="#FF0000"><b>div </b></font><font color="#800000">8</font><font color="#000080">));
</font>writeln<font color="#000080">;
</font>writeln<font color="#000080">(</font><font color="#800000">'&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;  Size Information &Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;'</font><font color="#000080">);
</font>writeln<font color="#000080">(</font><font color="#800000">'X-Size : '</font><font color="#000080">,</font>xsize<font color="#000080">);
</font>writeln<font color="#000080">(</font><font color="#800000">'Y-Size : '</font><font color="#000080">,</font>ysize<font color="#000080">);
</font>readln<font color="#000080">;
</font>clrscr<font color="#000080">;
</font><font color="#FF0000"><b>asm
</b></font><font color="#FF00FF">mov ax,$13
int 10h
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>if </b></font>tgatype<font color="#000080">&lt;</font><font color="#800000">3 </font><font color="#FF0000"><b>then begin
                  </b></font>blockread<font color="#000080">(</font>fil<font color="#000080">,</font>tgapal<font color="#000080">,</font>sizeof<font color="#000080">(</font>tgapal<font color="#000080">));
                  </font>port<font color="#000080">[</font><font color="#800000">$3c8</font><font color="#000080">]:=</font><font color="#800000">0</font><font color="#000080">;
                  </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do begin
                  </b></font>port<font color="#000080">[</font><font color="#800000">$3c9</font><font color="#000080">]:=</font>tgapal<font color="#000080">[</font>i<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">] </font><font color="#FF0000"><b>shr </b></font><font color="#800000">2</font><font color="#000080">;
                  </font>port<font color="#000080">[</font><font color="#800000">$3c9</font><font color="#000080">]:=</font>tgapal<font color="#000080">[</font>i<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">] </font><font color="#FF0000"><b>shr </b></font><font color="#800000">2</font><font color="#000080">;
                  </font>port<font color="#000080">[</font><font color="#800000">$3c9</font><font color="#000080">]:=</font>tgapal<font color="#000080">[</font>i<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">] </font><font color="#FF0000"><b>shr </b></font><font color="#800000">2</font><font color="#000080">;
                  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
                  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>ysize<font color="#000080">-</font><font color="#800000">1 </font><font color="#FF0000"><b>do
</b></font>blockread<font color="#000080">(</font>fil<font color="#000080">,</font>mem<font color="#000080">[</font><font color="#800000">$A000</font><font color="#000080">:</font><font color="#800000">320</font><font color="#000080">*</font>i<font color="#000080">],</font>xsize<font color="#000080">);
</font>sound<font color="#000080">(</font><font color="#800000">200</font><font color="#000080">);
</font>delay<font color="#000080">(</font><font color="#800000">20</font><font color="#000080">);
</font>nosound<font color="#000080">;
</font><font color="#FF0000"><b>repeat until </b></font>keypressed<font color="#000080">; </font><font color="#FF0000"><b>while </b></font>keypressed <font color="#FF0000"><b>do </b></font>readkey<font color="#000080">;
</font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">mov ax,3; int 10h; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font>close<font color="#000080">(</font>fil<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0267.PAS">Original</a><b>]</b></p></body>
</html>
