<html>
<head><title> "Determine if VGA Availabel" by JOHN HOWARD</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0219.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt; How would one find the diffrence between a 43 line monitor and a 50
&gt; line monitor?

At least VGA is required for 50 lines of 16-color text.  At least EGA is
required for the 43 lines.  Simply test the video BIOS to identify a VGA.

Those displays use an 8x8 font so multiply the number of lines by 8. VGA 50*8
= 400 lines which is greater than EGA vertical resolution of 350. For 25 line
display, VGA uses 8x16y font and EGA uses 8x14y font.
}

</i></font><font color="#FF0000"><b>procedure </b></font>OnlyVGA<font color="#000080">; </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">@CheckForVga: </font><font color="#008000"><i>{push    es}
                </i></font><font color="#FF00FF">mov     AH,1ah       </font><font color="#008000"><i>{Get Display Combination Code}
                </i></font><font color="#FF00FF">mov     AL,00h       </font><font color="#008000"><i>{AX := $1A00;}
                </i></font><font color="#FF00FF">int     10h          </font><font color="#008000"><i>{Intr($10, Regs);}
                </i></font><font color="#FF00FF">cmp     AL,1ah       </font><font color="#008000"><i>{IsVGA:= (AL=$1A) AND((BL=7) OR(BL=8))}
                </i></font><font color="#FF00FF">jne     @NoVGA
                cmp     BL,07h       </font><font color="#008000"><i>{VGA w/ monochrome analog display}
                </i></font><font color="#FF00FF">je      @VgaPresent
                cmp     BL,08h       </font><font color="#008000"><i>{VGA w/ color analog display}
                </i></font><font color="#FF00FF">je      @VgaPresent
  @NoVGA:
                mov     ax,0003h     </font><font color="#008000"><i>{text mode}
                </i></font><font color="#FF00FF">int     10h
                push    cs
                pop     ds
                lea     dx,@message
                mov     ah,9
                int     21h          </font><font color="#008000"><i>{print $ terminated string}
                </i></font><font color="#FF00FF">mov     ax,4c00h
                int     21h          </font><font color="#008000"><i>{terminate}
  </i></font><font color="#FF00FF">@message:     db      'Sorry, but you need a VGA to see this!',10,13,24h
  @VgaPresent:  </font><font color="#008000"><i>{pop     es}
  {After here is where your VGA code can execute}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{OnlyVGA}

</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0219.PAS">Original</a><b>]</b></p></body>
</html>
