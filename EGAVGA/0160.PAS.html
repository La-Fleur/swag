<html>
<head><title> "ET4000 video card" by BAS VAN GAALEN</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0160.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
 HK&gt; I have one little question: how do I program my ET4000
 HK&gt; graphics card in SVGA modes??? Without using some sort of
 HK&gt; BGI or unit!

Check this:

&gt;--- cut here
}
</i></font><font color="#FF0000"><b>program </b></font>tsenglabs_et4000_640x480x256_mode<font color="#000080">;
</font><font color="#008000"><i>{ Direct screen writing in SuperVGA mode 640x480x256 on a TsengLabs ET4000 }
{ By Bas van Gaalen, Holland, PD }
</i></font><font color="#FF0000"><b>uses </b></font>crt<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>x<font color="#000080">,</font>y<font color="#000080">:</font>word<font color="#000080">; </font>i<font color="#000080">,</font>page<font color="#000080">:</font>byte<font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>setvideo<font color="#000080">(</font>md<font color="#000080">:</font>word<font color="#000080">); </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#008000"><i>{ 02dh - 630x350
  02eh - 640x480
  02fh - 640x400 }
</i></font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">mov ax,md
  int 10h
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>setpal<font color="#000080">(</font>col<font color="#000080">,</font>r<font color="#000080">,</font>g<font color="#000080">,</font>b <font color="#000080">: </font>byte<font color="#000080">); </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">mov dx,03c8h
  mov al,col
  out dx,al
  inc dx
  mov al,r
  out dx,al
  mov al,g
  out dx,al
  mov al,b
  out dx,al
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>writescreen<font color="#000080">; </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">mov es,sega000
  mov x,0
  mov y,0
 @l1:
  mov ax,y
  mov dx,640
  mul dx
  add ax,x
  adc dx,0
  mov di,ax
  cmp dl,page
  je @skip
  mov page,dl
  mov al,dl
  mov dx,03cdh
  out dx,al
 @skip:
  mov ax,x
  add ax,y
  mov [es:di],al
  inc y
  cmp y,480
  jne @l1
  mov y,0
  inc x
  cmp x,640
  jne @l1
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>setvideo<font color="#000080">(</font><font color="#800000">$2e</font><font color="#000080">);
  </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do </b></font>setpal<font color="#000080">(</font>i<font color="#000080">,</font><font color="#800000">255</font><font color="#000080">-</font>i <font color="#FF0000"><b>div </b></font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">255</font><font color="#000080">-</font>i <font color="#FF0000"><b>div </b></font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">30</font><font color="#000080">);
  </font>writescreen<font color="#000080">;
  </font><font color="#FF0000"><b>repeat until </b></font>keypressed<font color="#000080">;
  </font>textmode<font color="#000080">(</font>lastmode<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0160.PAS">Original</a><b>]</b></p></body>
</html>
