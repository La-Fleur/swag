<html>
<head><title> "Text Screen Fading" by DAVE JARVIS</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0117.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
I recently found out that you can adjust the colours regardless of what
video mode you happen to be in.  Play around with this program ...

------------------- 8&lt; ------------------------------------
{ Simple little program to &quot;fade&quot; out text on the screen.

  Feel free to play around with it ...

  Doesn't fully work, but should give you a good idea.  Note that it requires
  a VGA (or better) graphics card. }

</i></font><font color="#FF0000"><b>USES </b></font>CRT<font color="#000080">;
 
</font><font color="#FF0000"><b>CONST 
  </b></font><font color="#008000"><i>{ Colour of DOS text. } 
  </i></font>DOS_COLOUR <font color="#000080">= </font>LIGHTGRAY<font color="#000080">; 
 
</font><font color="#FF0000"><b>TYPE 
  </b></font>PaletteType <font color="#000080">= </font><font color="#FF0000"><b>RECORD 
                  </b></font>R<font color="#000080">, </font>G<font color="#000080">, </font>B <font color="#000080">: </font>BYTE<font color="#000080">; 
                </font><font color="#FF0000"><b>End</b></font><font color="#000080">; 
 
</font><font color="#FF0000"><b>VAR 
  </b></font>Colour<font color="#000080">, 
  </font>ColourCnt  <font color="#000080">: </font>BYTE<font color="#000080">; 
  </font>AllColours <font color="#000080">: </font><font color="#FF0000"><b>ARRAY</b></font><font color="#000080">[ </font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">63 </font><font color="#000080">] </font><font color="#FF0000"><b>OF </b></font>PaletteType<font color="#000080">; 
 
</font><font color="#FF0000"><b>BEGIN 
  FOR </b></font>Colour <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>TO </b></font><font color="#800000">16 </font><font color="#FF0000"><b>DO 
  Begin 
    </b></font>TextColor<font color="#000080">( </font>Colour <font color="#000080">); 
    </font>WriteLn<font color="#000080">( </font><font color="#800000">'This is some text' </font><font color="#000080">);
  </font><font color="#FF0000"><b>End</b></font><font color="#000080">; 
 
  </font><font color="#008000"><i>{ Read in all the colours of the palette into an array. } 
  </i></font><font color="#FF0000"><b>FOR </b></font>Colour <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>TO </b></font><font color="#800000">63 </font><font color="#FF0000"><b>DO 
  Begin 
    </b></font><font color="#008000"><i>{ Indicate that the palette registers are going to be read } 
    </i></font>Port<font color="#000080">[ </font><font color="#800000">$3C7 </font><font color="#000080">] := </font><font color="#800000">0</font><font color="#000080">; 
 
    </font>AllColours<font color="#000080">[ </font>Colour <font color="#000080">].</font>R <font color="#000080">:= </font>Port<font color="#000080">[ </font><font color="#800000">$3C9 </font><font color="#000080">]; 
    </font>AllColours<font color="#000080">[ </font>Colour <font color="#000080">].</font>G <font color="#000080">:= </font>Port<font color="#000080">[ </font><font color="#800000">$3C9 </font><font color="#000080">]; 
    </font>AllColours<font color="#000080">[ </font>Colour <font color="#000080">].</font>B <font color="#000080">:= </font>Port<font color="#000080">[ </font><font color="#800000">$3C9 </font><font color="#000080">]; 
  </font><font color="#FF0000"><b>End</b></font><font color="#000080">; 
 
  </font><font color="#008000"><i>{ Fade out any text that is on the screen. } 
  </i></font><font color="#FF0000"><b>WHILE </b></font>AllColours<font color="#000080">[ </font><font color="#800000">61 </font><font color="#000080">].</font>B <font color="#000080">&gt; </font><font color="#800000">1 </font><font color="#FF0000"><b>DO 
    FOR </b></font>Colour <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>TO </b></font><font color="#800000">63 </font><font color="#FF0000"><b>DO 
    Begin 
      </b></font>Port<font color="#000080">[ </font><font color="#800000">$3C8 </font><font color="#000080">] := </font>Colour<font color="#000080">; 
 
      </font><font color="#FF0000"><b>IF </b></font>AllColours<font color="#000080">[ </font>Colour <font color="#000080">].</font>R <font color="#000080">&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>THEN
        </b></font>DEC<font color="#000080">( </font>AllColours<font color="#000080">[ </font>Colour <font color="#000080">].</font>R <font color="#000080">); 
 
      </font><font color="#FF0000"><b>IF </b></font>AllColours<font color="#000080">[ </font>Colour <font color="#000080">].</font>G <font color="#000080">&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>THEN 
        </b></font>DEC<font color="#000080">( </font>AllColours<font color="#000080">[ </font>Colour <font color="#000080">].</font>G <font color="#000080">); 
 
      </font><font color="#FF0000"><b>IF </b></font>AllColours<font color="#000080">[ </font>Colour <font color="#000080">].</font>B <font color="#000080">&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>THEN 
        </b></font>DEC<font color="#000080">( </font>AllColours<font color="#000080">[ </font>Colour <font color="#000080">].</font>B <font color="#000080">); 
 
      </font>Port<font color="#000080">[ </font><font color="#800000">$3C9 </font><font color="#000080">] := </font>AllColours<font color="#000080">[ </font>Colour <font color="#000080">].</font>R<font color="#000080">; 
      </font>Port<font color="#000080">[ </font><font color="#800000">$3C9 </font><font color="#000080">] := </font>AllColours<font color="#000080">[ </font>Colour <font color="#000080">].</font>G<font color="#000080">; 
      </font>Port<font color="#000080">[ </font><font color="#800000">$3C9 </font><font color="#000080">] := </font>AllColours<font color="#000080">[ </font>Colour <font color="#000080">].</font>B<font color="#000080">; 
 
      </font>Delay<font color="#000080">( </font><font color="#800000">10 </font><font color="#000080">); 
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">; 
 
  </font>TextColor<font color="#000080">( </font>DOS_COLOUR <font color="#000080">); 
 
  </font>ClrScr<font color="#000080">; 
  </font>WriteLn<font color="#000080">( </font><font color="#800000">'Watch me fade back in ...' </font><font color="#000080">); 

  </font><font color="#FF0000"><b>FOR </b></font>ColourCnt <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>TO </b></font><font color="#800000">42 </font><font color="#FF0000"><b>DO 
  Begin 
    </b></font>Port<font color="#000080">[ </font><font color="#800000">$3C8 </font><font color="#000080">] := </font>DOS_COLOUR<font color="#000080">; 
 
    </font>Port<font color="#000080">[ </font><font color="#800000">$3C9 </font><font color="#000080">] := </font>ColourCnt<font color="#000080">; 
    </font>Port<font color="#000080">[ </font><font color="#800000">$3C9 </font><font color="#000080">] := </font>ColourCnt<font color="#000080">; 
    </font>Port<font color="#000080">[ </font><font color="#800000">$3C9 </font><font color="#000080">] := </font>ColourCnt<font color="#000080">; 
 
    </font>Delay<font color="#000080">( </font><font color="#800000">20 </font><font color="#000080">); 
  </font><font color="#FF0000"><b>End</b></font><font color="#000080">; 
</font><font color="#FF0000"><b>END</b></font><font color="#000080">. 
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0117.PAS">Original</a><b>]</b></p></body>
</html>
