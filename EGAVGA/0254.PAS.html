<html>
<head><title> "132 Column VGA Mode" by ZBIGNIEW SZUSZKIEWICZ</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0254.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
Date: 06-06-95
From: Zbigniew Szuszkiewicz Krak&cent;w POLSKA
Subj: VGA 132 kolumn
}
</i></font><font color="#FF0000"><b>PROGRAM </b></font>VGA_132k<font color="#000080">;
</font><font color="#008000"><i>{
  It's best procedure to automatic seeking condensed text mode, where
  horizontal characters in line is constans = 132
  but lines per monitor is unknown; first seek 28 lines !
  Array tryb_video_132x28 contains 4 numbers of &quot;standard&quot; condensed video
  mode. You may change this line or remove with first sequence Repeat .. Until;
  All remarks please write to : Zbigniew Szuszkiewicz
                                Krakow Polen
                                PcDuo BBS in Krakow
                                Fido : 2:486/18
}
</i></font><font color="#FF0000"><b>USES </b></font>crt<font color="#000080">;
</font><font color="#FF0000"><b>VAR
  </b></font>vert_video          <font color="#000080">: </font>byte<font color="#000080">;      </font><font color="#008000"><i>{ max rows on screen }
  </i></font>hori_video          <font color="#000080">: </font>byte<font color="#000080">;      </font><font color="#008000"><i>{ max characters per line }

</i></font><font color="#FF0000"><b>PROCEDURE </b></font>VIDEO_NORMAL<font color="#000080">; </font><font color="#FF0000"><b>ASSEMBLER</b></font><font color="#000080">;
</font><font color="#FF0000"><b>ASM
     </b></font><font color="#FF00FF">mov ax,lastmode   </font><font color="#008000"><i>{ al }
     </i></font><font color="#FF00FF">mov ah,0h
     int 10h           </font><font color="#008000"><i>{ set video mode }
     </i></font><font color="#FF00FF">mov vert_video,25
     mov hori_video,80
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>VIDEO_CONDENSED<font color="#000080">;
</font><font color="#FF0000"><b>CONST
   </b></font>tryb_video_132x28 <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">4</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte <font color="#000080">=(</font><font color="#800000">$24</font><font color="#000080">,</font><font color="#800000">$54</font><font color="#000080">,</font><font color="#800000">$47</font><font color="#000080">,</font><font color="#800000">$80</font><font color="#000080">); </font><font color="#008000"><i>{ te znam }
</i></font><font color="#FF0000"><b>VAR
  </b></font>byteidx<font color="#000080">, </font>kk  <font color="#000080">: </font>byte<font color="#000080">;   </font><font color="#008000"><i>{ must be a local variable}
  </i></font>vertvideo    <font color="#000080">: </font>byte <font color="#FF0000"><b>absolute </b></font><font color="#800000">0</font><font color="#000080">:</font><font color="#800000">$484</font><font color="#000080">; </font><font color="#008000"><i>{ EGA max rows on screen - 1}
</i></font><font color="#FF0000"><b>BEGIN
    IF </b></font>lastmode <font color="#000080">= </font><font color="#800000">7 </font><font color="#FF0000"><b>then begin
                          </b></font>vert_video<font color="#000080">:=</font><font color="#800000">25</font><font color="#000080">;
                          </font>hori_video<font color="#000080">:=</font><font color="#800000">80</font><font color="#000080">;
                          </font>windmin<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;   </font><font color="#008000"><i>{ SET WINDOW( max video mode); }
                          </i></font>windmax<font color="#000080">:=(</font>vert_video<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">) *</font><font color="#800000">256 </font><font color="#000080">+ </font>hori_video <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
                          </font>exit<font color="#000080">;
                         </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
     </font>kk<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;
     </font><font color="#FF0000"><b>repeat
        </b></font>byteidx<font color="#000080">:=</font>tryb_video_132x28<font color="#000080">[</font>kk<font color="#000080">];
        </font><font color="#FF0000"><b>asm
          </b></font><font color="#FF00FF">mov ah,0h
          mov al,byteidx
          int 10h         </font><font color="#008000"><i>{ set video mode }
          </i></font><font color="#FF00FF">mov ah,0Fh
          int 10h         </font><font color="#008000"><i>{ get video mode }
          </i></font><font color="#FF00FF">mov hori_video,ah
          add kk,1
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
     </font><font color="#FF0000"><b>until </b></font><font color="#000080">(</font>kk <font color="#000080">&gt; </font><font color="#800000">4</font><font color="#000080">) </font><font color="#FF0000"><b>OR
           </b></font><font color="#000080">((</font>hori_video <font color="#000080">= </font><font color="#800000">132</font><font color="#000080">) </font><font color="#FF0000"><b>AND </b></font><font color="#000080">(</font>vertvideo <font color="#000080">&lt; </font><font color="#800000">40</font><font color="#000080">));
     </font><font color="#FF0000"><b>if </b></font>kk <font color="#000080">&gt; </font><font color="#800000">4 </font><font color="#FF0000"><b>then begin        </b></font><font color="#008000"><i>{ must seek other unknown number }
                    </i></font>kk<font color="#000080">:=</font><font color="#800000">25</font><font color="#000080">;      </font><font color="#008000"><i>{ start number to seking }
                    </i></font><font color="#FF0000"><b>repeat
                       </b></font>inc<font color="#000080">(</font>kk<font color="#000080">);
                       </font><font color="#FF0000"><b>asm
                         </b></font><font color="#FF00FF">mov ah,0h
                         mov al,kk
                         int 10h         </font><font color="#008000"><i>{ set video mode }
                         </i></font><font color="#FF00FF">mov ah,0Fh
                         int 10h         </font><font color="#008000"><i>{ get video mode }
                         </i></font><font color="#FF00FF">mov hori_video,ah
                       </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
                    </font><font color="#FF0000"><b>until </b></font><font color="#000080">(</font>kk <font color="#000080">&gt; </font><font color="#800000">99</font><font color="#000080">) </font><font color="#FF0000"><b>OR  </b></font><font color="#008000"><i>{ end number to seeking }
                          </i></font><font color="#000080">((</font>hori_video <font color="#000080">&gt; </font><font color="#800000">80</font><font color="#000080">) </font><font color="#FF0000"><b>AND </b></font><font color="#000080">(</font>vertvideo <font color="#000080">&lt; </font><font color="#800000">44</font><font color="#000080">));
                    </font><font color="#FF0000"><b>if </b></font>kk <font color="#000080">&gt; </font><font color="#800000">99 </font><font color="#FF0000"><b>then asm
                                     </b></font><font color="#FF00FF">mov ax,lastmode   </font><font color="#008000"><i>{ al }
                                     </i></font><font color="#FF00FF">mov ah,0h       </font><font color="#008000"><i>{return old video mode}
                                     </i></font><font color="#FF00FF">int 10h         </font><font color="#008000"><i>{ set video mode }
                                     </i></font><font color="#FF00FF">mov hori_video,80
                                    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
                    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
     </font>vert_video<font color="#000080">:=</font>vertvideo <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
     </font>windmin<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;                        </font><font color="#008000"><i>{ SET WINDOW( max video mode); }
     </i></font>windmax<font color="#000080">:=(</font>vert_video<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">) *</font><font color="#800000">256 </font><font color="#000080">+ (</font>hori_video <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">);
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>BEGIN  </b></font><font color="#008000"><i>{ test program }
   </i></font>VIDEO_CONDENSED<font color="#000080">;
   </font><font color="#FF0000"><b>if </b></font>hori_video <font color="#000080">&gt; </font><font color="#800000">80
           </font><font color="#FF0000"><b>then begin
                 </b></font>gotoxy<font color="#000080">(</font><font color="#800000">46</font><font color="#000080">,</font>vert_video <font color="#FF0000"><b>shr </b></font><font color="#800000">2</font><font color="#000080">);
                 </font>writeln<font color="#000080">(</font><font color="#800000">'Yes ! This is very good video procedure'</font><font color="#000080">);
                 </font>writeln<font color="#000080">;
                 </font><font color="#FF0000"><b>for </b></font>textattr<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">132 </font><font color="#FF0000"><b>do
                     if </b></font>textattr <font color="#FF0000"><b>mod </b></font><font color="#800000">10 </font><font color="#000080">= </font><font color="#800000">0
                        </font><font color="#FF0000"><b>then </b></font>write<font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">:</font><font color="#800000">8</font><font color="#000080">,</font>textattr <font color="#FF0000"><b>div </b></font><font color="#800000">10</font><font color="#000080">:</font><font color="#800000">2</font><font color="#000080">);
                 </font>writeln<font color="#000080">;
                 </font><font color="#FF0000"><b>for </b></font>textattr<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">132 </font><font color="#FF0000"><b>do </b></font>write<font color="#000080">(</font>textattr <font color="#FF0000"><b>mod </b></font><font color="#800000">10</font><font color="#000080">);
                </font><font color="#FF0000"><b>end
           else begin
                </b></font>gotoxy<font color="#000080">(</font><font color="#800000">25</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">);
                </font>write<font color="#000080">(</font><font color="#800000">'This is HGC or other older video !'</font><font color="#000080">);
                </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font>gotoxy<font color="#000080">(</font><font color="#800000">59</font><font color="#000080">,</font>vert_video<font color="#000080">);
   </font>textcolor<font color="#000080">(</font><font color="#800000">14 </font><font color="#000080">+ </font>blink<font color="#000080">);
   </font>writeln<font color="#000080">(</font><font color="#800000">'This is '</font><font color="#000080">,</font>hori_video<font color="#000080">,</font><font color="#800000">' x '</font><font color="#000080">,</font>vert_video<font color="#000080">,</font><font color="#800000">' mode.'</font><font color="#000080">);
   </font>textcolor<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">);
   </font>write<font color="#000080">(</font><font color="#800000">'Press Enter to continue ...'</font><font color="#000080">);

   </font>readln<font color="#000080">;
   </font>video_normal<font color="#000080">;      </font><font color="#008000"><i>{ return to lastmode }
</i></font><font color="#FF0000"><b>END</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0254.PAS">Original</a><b>]</b></p></body>
</html>
