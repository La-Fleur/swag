<html>
<head><title> "High intensity background" by JOSE CAMPIONE</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0110.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
   The solutions proposed so far to this problem have ignored
   the fact that there was a way to use high intensity back-
   ground in CGA screens by direct addressing the video port.
   The following procedure works with EGA/VGA as well as CGA
   (and possibly MDA?) videos:

   (I skipped function GetAdapterType that should return the
   AdapterType as indicated).

   -Jose-
 }
   </i></font><font color="#FF0000"><b>procedure </b></font>ToggleBlink<font color="#000080">(</font>Blink<font color="#000080">: </font>Boolean<font color="#000080">);
   </font><font color="#FF0000"><b>var
     </b></font>Adapter <font color="#000080">: </font>AdapterType<font color="#000080">;
     </font>regs    <font color="#000080">: </font>registers<font color="#000080">;
     </font>port_   <font color="#000080">: </font>word<font color="#000080">;
   </font><font color="#FF0000"><b>begin
     </b></font>Adapter<font color="#000080">:= </font>GetAdapterType<font color="#000080">;
     </font><font color="#FF0000"><b>if </b></font>Adapter <font color="#FF0000"><b>in </b></font><font color="#000080">[</font>CGA<font color="#000080">,</font>MDA<font color="#000080">] </font><font color="#FF0000"><b>then begin
       if </b></font>Adapter <font color="#000080">= </font>CGA <font color="#FF0000"><b>then </b></font>port_<font color="#000080">:= </font><font color="#800000">$03D8
                        </font><font color="#FF0000"><b>else </b></font>port_<font color="#000080">:= </font><font color="#800000">$03B8</font><font color="#000080">;
       </font><font color="#FF0000"><b>if not </b></font>Blink <font color="#FF0000"><b>then </b></font>PortW<font color="#000080">[</font>port_<font color="#000080">]:= </font>MemW<font color="#000080">[</font><font color="#800000">$0040</font><font color="#000080">:</font><font color="#800000">$0065</font><font color="#000080">] </font><font color="#FF0000"><b>and </b></font><font color="#800000">$00DF
                    </font><font color="#FF0000"><b>else </b></font>PortW<font color="#000080">[</font>port_<font color="#000080">]:= </font>MemW<font color="#000080">[</font><font color="#800000">$0040</font><font color="#000080">:</font><font color="#800000">$0065</font><font color="#000080">]  </font><font color="#FF0000"><b>or </b></font><font color="#800000">$0020</font><font color="#000080">;
     </font><font color="#FF0000"><b>end else
     if </b></font><font color="#000080">(</font>Adapter <font color="#FF0000"><b>in </b></font><font color="#000080">[</font>VGAColor<font color="#000080">,</font>EGAColor<font color="#000080">,</font>VGAMono<font color="#000080">,</font>EGAMono<font color="#000080">]) </font><font color="#FF0000"><b>then begin
       if not </b></font>Blink <font color="#FF0000"><b>then </b></font>regs<font color="#000080">.</font>bl<font color="#000080">:= </font><font color="#800000">$00
                    </font><font color="#FF0000"><b>else </b></font>regs<font color="#000080">.</font>bl<font color="#000080">:= </font><font color="#800000">$01</font><font color="#000080">;
       </font>regs<font color="#000080">.</font>ah<font color="#000080">:= </font><font color="#800000">$10</font><font color="#000080">;
       </font>regs<font color="#000080">.</font>al<font color="#000080">:= </font><font color="#800000">$03</font><font color="#000080">;
       </font>intr<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">,</font>regs<font color="#000080">);
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0110.PAS">Original</a><b>]</b></p></body>
</html>
