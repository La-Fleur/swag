<html>
<head><title> "Screen Images" by FRANK HIRSCH</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0084.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt; I'm trying to find out a way to do GET and PUT of sections of the screen
&gt; into a variable... but the method I'm using is too slow and I cannot truly
&gt; store it in a variable (it does a .INC program that you link with your
&gt; files...).

Well, the most simple attempt would probably be something like....
}

</i></font><font color="#FF0000"><b>PROGRAM </b></font>bitmap_images<font color="#000080">;

</font><font color="#FF0000"><b>USES
  </b></font>CRT<font color="#000080">,
  </font>some_mode13h_routs<font color="#000080">;

</font><font color="#FF0000"><b>VAR
  </b></font>screen <font color="#000080">: </font><font color="#FF0000"><b>ARRAY </b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">199</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">319</font><font color="#000080">] </font><font color="#FF0000"><b>OF </b></font>BYTE <font color="#FF0000"><b>ABSOLUTE </b></font><font color="#800000">$a000</font><font color="#000080">:</font><font color="#800000">0000</font><font color="#000080">;
  </font>imgptr <font color="#000080">: </font>POINTER<font color="#000080">;
  </font>ch     <font color="#000080">: </font>CHAR<font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>get_image<font color="#000080">(</font>p<font color="#000080">:</font>POINTER<font color="#000080">;</font>xp<font color="#000080">,</font>yp<font color="#000080">:</font>WORD<font color="#000080">;</font>xs<font color="#000080">,</font>ys<font color="#000080">:</font>BYTE<font color="#000080">);
</font><font color="#FF0000"><b>VAR
  </b></font>s<font color="#000080">,</font>o   <font color="#000080">: </font>WORD<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>s<font color="#000080">:=</font>SEG<font color="#000080">(</font>p<font color="#000080">^);
  </font>o<font color="#000080">:=</font>OFS<font color="#000080">(</font>p<font color="#000080">^);
  </font><font color="#FF0000"><b>FOR </b></font>yp<font color="#000080">:=</font>yp <font color="#FF0000"><b>TO </b></font>PRED<font color="#000080">(</font>yp<font color="#000080">+</font>ys<font color="#000080">)
  </font><font color="#FF0000"><b>DO BEGIN
    </b></font>MOVE<font color="#000080">(</font>screen<font color="#000080">[</font>yp<font color="#000080">,</font>xp<font color="#000080">],</font>MEM<font color="#000080">[</font>s<font color="#000080">:</font>o<font color="#000080">],</font>xs<font color="#000080">);
    </font>INC<font color="#000080">(</font>o<font color="#000080">,</font>xs<font color="#000080">);
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>put_image<font color="#000080">(</font>p<font color="#000080">:</font>POINTER<font color="#000080">;</font>xp<font color="#000080">,</font>yp<font color="#000080">:</font>WORD<font color="#000080">;</font>xs<font color="#000080">,</font>ys<font color="#000080">:</font>BYTE<font color="#000080">);
</font><font color="#FF0000"><b>VAR
  </b></font>s<font color="#000080">,</font>o   <font color="#000080">: </font>WORD<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>s<font color="#000080">:=</font>SEG<font color="#000080">(</font>p<font color="#000080">^);
  </font>o<font color="#000080">:=</font>OFS<font color="#000080">(</font>p<font color="#000080">^);
  </font><font color="#FF0000"><b>FOR </b></font>yp<font color="#000080">:=</font>yp <font color="#FF0000"><b>TO </b></font>PRED<font color="#000080">(</font>yp<font color="#000080">+</font>ys<font color="#000080">)
  </font><font color="#FF0000"><b>DO BEGIN
    </b></font>MOVE<font color="#000080">(</font>MEM<font color="#000080">[</font>s<font color="#000080">:</font>o<font color="#000080">],</font>screen<font color="#000080">[</font>yp<font color="#000080">,</font>xp<font color="#000080">],</font>xs<font color="#000080">);
    </font>INC<font color="#000080">(</font>o<font color="#000080">,</font>xs<font color="#000080">);
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>BEGIN
  </b></font>init_mode<font color="#000080">(</font><font color="#800000">$13</font><font color="#000080">);               </font><font color="#008000"><i>{ init mode 13h }
  </i></font>load_piccy<font color="#000080">(</font><font color="#800000">'some.gfx'</font><font color="#000080">);       </font><font color="#008000"><i>{ load some picture }
  </i></font>GETMEM<font color="#000080">(</font>imgptr<font color="#000080">,</font><font color="#800000">160</font><font color="#000080">*</font><font color="#800000">100</font><font color="#000080">);       </font><font color="#008000"><i>{ allocate memory for bitmap }
  </i></font>get_image<font color="#000080">(</font>p<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">160</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">);     </font><font color="#008000"><i>{ get left part of screen }
  </i></font>put_image<font color="#000080">(</font>p<font color="#000080">,</font><font color="#800000">160</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">160</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">);   </font><font color="#008000"><i>{ copy to right part of screen }
  </i></font>FREEMEM<font color="#000080">(</font>imgptr<font color="#000080">,</font><font color="#800000">160</font><font color="#000080">*</font><font color="#800000">100</font><font color="#000080">);      </font><font color="#008000"><i>{ release memory }
  </i></font>ch<font color="#000080">:=</font>READKEY<font color="#000080">;                  </font><font color="#008000"><i>{ wait for a key }
  </i></font>init_mode<font color="#000080">(</font><font color="#800000">$03</font><font color="#000080">);               </font><font color="#008000"><i>{ back to textmode }
</i></font><font color="#FF0000"><b>END</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EGAVGA SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0084.PAS">Original</a><b>]</b></p></body>
</html>
