<html>
<head><title> "Dumping graphics to laser printers" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to PRINTING SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0055.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>unit </b></font>Print_La<font color="#000080">;

</font><font color="#FF0000"><b>INTERFACE

procedure </b></font>dump_laser<font color="#000080">;

</font><font color="#FF0000"><b>IMPLEMENTATION


Uses </b></font>Graph<font color="#000080">,</font>Dos<font color="#000080">,</font>Printer<font color="#000080">;

</font><font color="#FF0000"><b>Const
  </b></font>d <font color="#000080">= </font><font color="#800000">'l'</font><font color="#000080">;

</font><font color="#FF0000"><b>Var
  </b></font>MaxX<font color="#000080">, </font>MaxY <font color="#000080">: </font>Integer<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>dump_laser<font color="#000080">;

</font><font color="#FF0000"><b>Var
  </b></font>ymax<font color="#000080">,
  </font>bbyt<font color="#000080">,
  </font>b2   <font color="#000080">: </font>Byte<font color="#000080">;
  </font>psf  <font color="#000080">: </font><font color="#FF0000"><b>File of </b></font>Byte<font color="#000080">;
  </font>regs <font color="#000080">: </font>Registers<font color="#000080">;

</font><font color="#FF0000"><b>Procedure out</b></font><font color="#000080">(</font>ch <font color="#000080">: </font>Char<font color="#000080">);

</font><font color="#FF0000"><b>begin
  </b></font>regs<font color="#000080">.</font>ax <font color="#000080">:= </font>ord<font color="#000080">(</font>ch<font color="#000080">);
  </font>regs<font color="#000080">.</font>dx <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>intr<font color="#000080">(</font><font color="#800000">$17</font><font color="#000080">, </font>regs<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>hplaser<font color="#000080">;

</font><font color="#FF0000"><b>Var
  </b></font>b<font color="#000080">,
  </font>reg<font color="#000080">,
  </font>kol <font color="#000080">: </font>Word<font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>assign<font color="#000080">(</font>psf<font color="#000080">, </font><font color="#800000">'lpt1'</font><font color="#000080">);
  </font>reWrite<font color="#000080">(</font>psf<font color="#000080">);
  </font>Write<font color="#000080">(</font>lst<font color="#000080">, </font>chr<font color="#000080">(</font><font color="#800000">27</font><font color="#000080">), </font><font color="#800000">'E'</font><font color="#000080">);
  </font>Write<font color="#000080">(</font>lst<font color="#000080">, </font>chr<font color="#000080">(</font><font color="#800000">27</font><font color="#000080">), </font><font color="#800000">'*t100R'</font><font color="#000080">, </font>chr<font color="#000080">(</font><font color="#800000">27</font><font color="#000080">), </font><font color="#800000">'*r0A'</font><font color="#000080">);
  </font><font color="#FF0000"><b>For </b></font>reg <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>maxx <font color="#FF0000"><b>do begin
    </b></font>Write<font color="#000080">(</font>lst<font color="#000080">, </font>chr<font color="#000080">(</font><font color="#800000">27</font><font color="#000080">), </font><font color="#800000">'*b'</font><font color="#000080">, (</font>maxy <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>div </b></font><font color="#800000">8</font><font color="#000080">, </font><font color="#800000">'W'</font><font color="#000080">);
    </font><font color="#FF0000"><b>For </b></font>kol <font color="#000080">:= ((</font>maxy <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>div </b></font><font color="#800000">8</font><font color="#000080">) - </font><font color="#800000">1 </font><font color="#FF0000"><b>downto </b></font><font color="#800000">0 </font><font color="#FF0000"><b>do begin
      </b></font>bbyt <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font><font color="#FF0000"><b>For </b></font>b <font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">7 </font><font color="#FF0000"><b>do begin
        if </b></font>getpixel<font color="#000080">(</font>reg<font color="#000080">, </font>kol <font color="#000080">* </font><font color="#800000">8 </font><font color="#000080">+ </font>b<font color="#000080">) </font><font color="#FF0000"><b>in</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">8</font><font color="#000080">] </font><font color="#FF0000"><b>then    </b></font><font color="#008000"><i>{ = 0 }
          </i></font>b2 <font color="#000080">:= </font><font color="#800000">0
        </font><font color="#FF0000"><b>else
          </b></font>b2 <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
        </font>bbyt <font color="#000080">:= </font>bbyt <font color="#FF0000"><b>or </b></font><font color="#000080">(</font>b2 <font color="#FF0000"><b>shl </b></font>b<font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>out</b></font><font color="#000080">(</font>chr<font color="#000080">(</font>bbyt<font color="#000080">));
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>Write<font color="#000080">(</font>lst<font color="#000080">, </font>chr<font color="#000080">(</font><font color="#800000">27</font><font color="#000080">), </font><font color="#800000">'*rB'</font><font color="#000080">);
  </font>Write<font color="#000080">(</font>lst<font color="#000080">, </font>chr<font color="#000080">(</font><font color="#800000">12</font><font color="#000080">));
  </font>Write<font color="#000080">(</font>lst<font color="#000080">, </font>chr<font color="#000080">(</font><font color="#800000">27</font><font color="#000080">), </font><font color="#800000">'E'</font><font color="#000080">);
  </font>close<font color="#000080">(</font>psf<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>MaxX <font color="#000080">:= </font>GetMaxX<font color="#000080">;
  </font>MaxY <font color="#000080">:= </font>GetMaxY<font color="#000080">;
  </font>hplaser
<font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to PRINTING SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0055.PAS">Original</a><b>]</b></p></body>
</html>
