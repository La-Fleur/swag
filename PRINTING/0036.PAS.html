<html>
<head><title> "Printing Graphics" by RANDALL ELTON DING</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to PRINTING SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0036.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
From: randyd@alpha2.csd.uwm.edu (Randall Elton Ding)

All those c/pascal flames are becoming nauseating.
My kill file leaves me with about 10 articles per day now.
For people like me ignoring this B.S., here is something
for fun.

This very elegantly plots a cycloid in 3d with hidden lines.
Remember that a cycloid is what you get when you trace a single
point of a circle in rolling motion.

Email me if you would like the normal cartesian plotter.

------------------------------------------------------------------

(*  Three Dimensional Plotter (modified for this parametric equ.)
    written by Randy Ding
    randyd@alpha2.csd.uwm.edu
    original  December 1983 (UCSD pascal)
    update    April 13,1991 (turbo pascal)   *)
}
{$N+}
</i></font><font color="#FF0000"><b>program </b></font>plotter<font color="#000080">;

</font><font color="#FF0000"><b>uses </b></font>graph<font color="#000080">;


</font><font color="#FF0000"><b>const
  </b></font>bgipath <font color="#000080">= </font><font color="#800000">'e:\bp\bgi'</font><font color="#000080">;   </font><font color="#008000"><i>{ !set this to your bgi directory }


</i></font><font color="#FF0000"><b>const
  </b></font>displaysizex<font color="#000080">= </font><font color="#800000">9.75</font><font color="#000080">;   </font><font color="#008000"><i>{ inches, for width/height ratios }
  </i></font>displaysizey<font color="#000080">= </font><font color="#800000">7</font><font color="#000080">;      </font><font color="#008000"><i>{ inches }
  </i></font>maxrightscreen<font color="#000080">= </font><font color="#800000">999</font><font color="#000080">;  </font><font color="#008000"><i>{ !make this bigger if you have incredible graphics }

</i></font><font color="#FF0000"><b>type
  </b></font>realtype<font color="#000080">= </font>single<font color="#000080">;
  </font>scrnarry<font color="#000080">= </font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font>maxrightscreen<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>integer<font color="#000080">;  </font><font color="#008000"><i>{ for hidden line data }

</i></font><font color="#FF0000"><b>var
  </b></font>toplim<font color="#000080">,</font>botlim<font color="#000080">,</font>previousx<font color="#000080">,</font>botscreen<font color="#000080">,</font>rightscreen<font color="#000080">: </font>integer<font color="#000080">;
  </font>colr<font color="#000080">: </font>word<font color="#000080">;
  </font>top<font color="#000080">,</font>bot<font color="#000080">: </font>scrnarry<font color="#000080">;
  </font>alpha<font color="#000080">,</font>beta<font color="#000080">,</font>scale<font color="#000080">,</font>centerx<font color="#000080">,</font>centery<font color="#000080">,</font>posx<font color="#000080">,</font>negx<font color="#000080">,</font>posy<font color="#000080">,</font>negy<font color="#000080">,</font>stepx<font color="#000080">,</font>stepy<font color="#000080">: </font>realtype<font color="#000080">;


</font><font color="#FF0000"><b>procedure </b></font>hideline <font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">: </font>integer<font color="#000080">);
  </font><font color="#FF0000"><b>var </b></font>slope<font color="#000080">,</font>yr<font color="#000080">: </font>realtype<font color="#000080">;

  </font><font color="#FF0000"><b>procedure </b></font>vline <font color="#000080">(</font>ytop<font color="#000080">,</font>ybot<font color="#000080">: </font>integer<font color="#000080">);     </font><font color="#008000"><i>{ at x with colr }
    </i></font><font color="#FF0000"><b>var </b></font>temp<font color="#000080">: </font>integer<font color="#000080">;

    </font><font color="#FF0000"><b>begin
      if </b></font><font color="#000080">(</font>x<font color="#000080">&gt;=</font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>x<font color="#000080">&lt;=</font>rightscreen<font color="#000080">) </font><font color="#FF0000"><b>then begin
        if </b></font>ytop <font color="#000080">&gt; </font>ybot <font color="#FF0000"><b>then begin
          </b></font>temp<font color="#000080">:= </font>ytop<font color="#000080">;  </font>ytop<font color="#000080">:= </font>ybot<font color="#000080">;  </font>ybot<font color="#000080">:= </font>temp<font color="#000080">;
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
        </font><font color="#FF0000"><b>if </b></font>x <font color="#000080">&lt;&gt; </font>previousx <font color="#FF0000"><b>then begin
          </b></font>toplim<font color="#000080">:= </font>top <font color="#000080">[</font>x<font color="#000080">];
          </font>botlim<font color="#000080">:= </font>bot <font color="#000080">[</font>x<font color="#000080">];
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
        </font><font color="#FF0000"><b>if </b></font>ytop <font color="#000080">&lt; </font>top <font color="#000080">[</font>x<font color="#000080">] </font><font color="#FF0000"><b>then </b></font>top <font color="#000080">[</font>x<font color="#000080">]:= </font>ytop<font color="#000080">;
        </font><font color="#FF0000"><b>if </b></font>ybot <font color="#000080">&gt; </font>bot <font color="#000080">[</font>x<font color="#000080">] </font><font color="#FF0000"><b>then </b></font>bot <font color="#000080">[</font>x<font color="#000080">]:= </font>ybot<font color="#000080">;
        </font><font color="#FF0000"><b>while </b></font>ytop <font color="#000080">&lt;= </font>ybot <font color="#FF0000"><b>do begin
          if </b></font><font color="#000080">(</font>ytop <font color="#000080">&lt; </font>toplim<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>ytop <font color="#000080">&gt; </font>botlim<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>putpixel <font color="#000080">(</font>x<font color="#000080">,</font>ytop<font color="#000080">,</font>colr<font color="#000080">);
          </font>ytop<font color="#000080">:= </font>ytop<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">;
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font>previousx<font color="#000080">:= </font>x<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>begin
    </b></font>yr<font color="#000080">:= </font>y<font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font>x <font color="#000080">&lt;&gt; </font>x2 <font color="#FF0000"><b>then begin
      </b></font>slope<font color="#000080">:= (</font>y2<font color="#000080">-</font>y<font color="#000080">)/(</font>x2<font color="#000080">-</font>x<font color="#000080">);
      </font><font color="#FF0000"><b>while </b></font>x <font color="#000080">&lt;&gt; </font>x2 <font color="#FF0000"><b>do begin
        </b></font>yr<font color="#000080">:= </font>yr<font color="#000080">+</font>slope<font color="#000080">;
        </font>vline <font color="#000080">(</font>y<font color="#000080">,</font>trunc<font color="#000080">(</font>yr<font color="#000080">));
        </font>y<font color="#000080">:= </font>trunc<font color="#000080">(</font>yr<font color="#000080">);
        </font><font color="#FF0000"><b>if </b></font>x <font color="#000080">&lt; </font>x2 <font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>x<font color="#000080">) </font><font color="#FF0000"><b>else </b></font>dec<font color="#000080">(</font>x<font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>vline <font color="#000080">(</font>y<font color="#000080">,</font>y2<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>procedure </b></font>initline<font color="#000080">;
  </font><font color="#FF0000"><b>var </b></font>x<font color="#000080">:</font>integer<font color="#000080">;

  </font><font color="#FF0000"><b>begin
    for </b></font>x<font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>rightscreen <font color="#FF0000"><b>do begin
      </b></font>top <font color="#000080">[</font>x<font color="#000080">]:= </font>botscreen<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">;
      </font>bot <font color="#000080">[</font>x<font color="#000080">]:= -</font><font color="#800000">1</font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#008000"><i>{ The regular cartesian plot routine has been modified to plot this
  parametric equation and a slope counter has been added to make the
  plotting slow down near the points, helping to make them crisp.
  The cycloid parametric function: x=u-sin(u), y=cos(u) }

</i></font><font color="#FF0000"><b>procedure </b></font>plot<font color="#000080">;
  </font><font color="#FF0000"><b>var
    </b></font>correction<font color="#000080">,</font>sa<font color="#000080">,</font>ca<font color="#000080">,</font>sb<font color="#000080">,</font>cb<font color="#000080">,</font>x<font color="#000080">,</font>y<font color="#000080">,</font>z<font color="#000080">,</font>rho<font color="#000080">,</font>lou<font color="#000080">,</font>hiu<font color="#000080">,</font>du<font color="#000080">,</font>u<font color="#000080">,</font>dy<font color="#000080">,</font>oldz<font color="#000080">: </font>realtype<font color="#000080">;
    </font>oldx<font color="#000080">,</font>oldy<font color="#000080">,</font>screenx<font color="#000080">,</font>screeny<font color="#000080">,</font>slopecounter<font color="#000080">: </font>integer<font color="#000080">;
    </font>newline<font color="#000080">: </font>boolean<font color="#000080">;
    </font>ch<font color="#000080">: </font>char<font color="#000080">;

  </font><font color="#FF0000"><b>begin
    </b></font>correction<font color="#000080">:= </font>scale<font color="#000080">*(</font>displaysizey<font color="#000080">/(</font>botscreen<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">))
                 /(</font>displaysizex<font color="#000080">/(</font>rightscreen<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">));
    </font>sa<font color="#000080">:= </font>sin<font color="#000080">(</font>alpha<font color="#000080">*</font>pi<font color="#000080">/</font><font color="#800000">180</font><font color="#000080">);
    </font>ca<font color="#000080">:= </font>cos<font color="#000080">(</font>alpha<font color="#000080">*</font>pi<font color="#000080">/</font><font color="#800000">180</font><font color="#000080">);
    </font>sb<font color="#000080">:= </font>sin<font color="#000080">(</font>beta<font color="#000080">*</font>pi<font color="#000080">/</font><font color="#800000">180</font><font color="#000080">);
    </font>cb<font color="#000080">:= </font>cos<font color="#000080">(</font>beta<font color="#000080">*</font>pi<font color="#000080">/</font><font color="#800000">180</font><font color="#000080">);
    </font>previousx<font color="#000080">:= -</font><font color="#800000">1</font><font color="#000080">;
    </font>x<font color="#000080">:= </font>posx<font color="#000080">;
    </font><font color="#FF0000"><b>while </b></font>x <font color="#000080">&gt;= </font>negx <font color="#FF0000"><b>do begin
      </b></font>newline<font color="#000080">:= </font>true<font color="#000080">;
      </font>y<font color="#000080">:= </font>negy<font color="#000080">;
      </font><font color="#FF0000"><b>while </b></font>y <font color="#000080">&lt;= </font>posy <font color="#FF0000"><b>do begin
        </b></font>rho<font color="#000080">:= </font>sqrt<font color="#000080">(</font>sqr<font color="#000080">(</font>x<font color="#000080">)+</font>sqr<font color="#000080">(</font>y<font color="#000080">));
        </font>lou<font color="#000080">:= </font>rho<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">;
        </font>hiu<font color="#000080">:= </font>rho<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">;
        </font><font color="#FF0000"><b>repeat               </b></font><font color="#008000"><i>{ solve the parametric equation by iteration }
          </i></font>u<font color="#000080">:= (</font>lou<font color="#000080">+</font>hiu<font color="#000080">)/</font><font color="#800000">2</font><font color="#000080">;
          </font>du<font color="#000080">:= </font>rho<font color="#000080">-(</font>u<font color="#000080">-</font>sin<font color="#000080">(</font>u<font color="#000080">));   </font><font color="#008000"><i>{ u-sin(u) is an increasing function }
          </i></font><font color="#FF0000"><b>if </b></font>du<font color="#000080">&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>lou<font color="#000080">:= </font>u <font color="#FF0000"><b>else </b></font>hiu<font color="#000080">:= </font>u<font color="#000080">;
        </font><font color="#FF0000"><b>until </b></font>abs<font color="#000080">(</font>du<font color="#000080">) &lt; </font><font color="#800000">0.001</font><font color="#000080">;
        </font>z<font color="#000080">:= </font><font color="#800000">3</font><font color="#000080">*</font>cos<font color="#000080">(</font>u<font color="#000080">);   </font><font color="#008000"><i>{ user parametric function x=u-sin(u), y=cos(u) }
        </i></font>screenx<font color="#000080">:= </font>trunc <font color="#000080">((</font>y<font color="#000080">*</font>ca<font color="#000080">-</font>x<font color="#000080">*</font>sa<font color="#000080">)*</font>correction<font color="#000080">+</font>centerx<font color="#000080">);
        </font>screeny<font color="#000080">:= </font>trunc <font color="#000080">(</font>centery<font color="#000080">-((</font>y<font color="#000080">*</font>sa<font color="#000080">+</font>x<font color="#000080">*</font>ca<font color="#000080">)*</font>sb<font color="#000080">+</font>z<font color="#000080">*</font>cb<font color="#000080">)*</font>scale<font color="#000080">);
        </font><font color="#FF0000"><b>if </b></font>newline <font color="#FF0000"><b>then begin
          </b></font>slopecounter<font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
          </font>dy<font color="#000080">:= </font>stepy<font color="#000080">;     </font><font color="#008000"><i>{ make dy normal for long straight runs }
        </i></font><font color="#FF0000"><b>end
        else if </b></font><font color="#000080">(</font>z<font color="#000080">-</font>oldz<font color="#000080">)/</font>dy <font color="#000080">&gt; </font><font color="#800000">1.5 </font><font color="#FF0000"><b>then begin
          </b></font>slopecounter<font color="#000080">:= </font><font color="#800000">5</font><font color="#000080">;
          </font>dy<font color="#000080">:= </font>stepy<font color="#000080">/</font><font color="#800000">10</font><font color="#000080">;      </font><font color="#008000"><i>{ make dy small close to the peaks }
        </i></font><font color="#FF0000"><b>end
        else if </b></font>slopecounter<font color="#000080">=</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>dy<font color="#000080">:= </font>stepy <font color="#FF0000"><b>else </b></font>dec<font color="#000080">(</font>slopecounter<font color="#000080">);
        </font>y<font color="#000080">:= </font>y <font color="#000080">+ </font>dy<font color="#000080">;
        </font>oldz<font color="#000080">:= </font>z<font color="#000080">;
        </font><font color="#FF0000"><b>if not </b></font>newline <font color="#FF0000"><b>then </b></font>hideline<font color="#000080">(</font>oldx<font color="#000080">,</font>oldy<font color="#000080">,</font>screenx<font color="#000080">,</font>screeny<font color="#000080">)
        </font><font color="#FF0000"><b>else </b></font>newline<font color="#000080">:= </font>false<font color="#000080">;
        </font>oldx<font color="#000080">:= </font>screenx<font color="#000080">;
        </font>oldy<font color="#000080">:= </font>screeny<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font>x<font color="#000080">:= </font>x <font color="#000080">- </font>stepx<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>procedure </b></font>setdefault<font color="#000080">;
  </font><font color="#008000"><i>{ with no rotation, x axis is out of the screen, y axis is to the right
    and z axis is up;  alpha and beta make the figure rotate
    (pos is clockwise) within the fixed coordinate axis
    draw figure from screen front to back for hidden lines to work properly }

  </i></font><font color="#FF0000"><b>begin
    </b></font>alpha<font color="#000080">:= </font><font color="#800000">30</font><font color="#000080">;    </font><font color="#008000"><i>{ rotates figure clockwise about z axis }
    </i></font>beta<font color="#000080">:= -</font><font color="#800000">40</font><font color="#000080">;    </font><font color="#008000"><i>{ rotates figure clockwise about y axis }
    </i></font>scale<font color="#000080">:= </font><font color="#800000">10</font><font color="#000080">;
    </font>centerx<font color="#000080">:= (</font>rightscreen<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">)/</font><font color="#800000">2</font><font color="#000080">;
    </font>centery<font color="#000080">:= (</font>botscreen<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">)/</font><font color="#800000">2</font><font color="#000080">;
    </font>posx<font color="#000080">:= </font><font color="#800000">20</font><font color="#000080">;   </font><font color="#008000"><i>{ currently set up for functions z of x,y }
    </i></font>negx<font color="#000080">:= -</font>posx<font color="#000080">;  </font><font color="#008000"><i>{ change user function z above in plot procedure }
    </i></font>posy<font color="#000080">:= </font><font color="#800000">20</font><font color="#000080">;
    </font>negy<font color="#000080">:= -</font>posy<font color="#000080">;
    </font>stepx<font color="#000080">:= </font><font color="#800000">0.5</font><font color="#000080">;
    </font>stepy<font color="#000080">:= </font><font color="#800000">0.1</font><font color="#000080">;
    </font>colr<font color="#000080">:= </font>white<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>procedure </b></font>initbgi<font color="#000080">;
  </font><font color="#FF0000"><b>var </b></font>errcode<font color="#000080">,</font>grmode<font color="#000080">,</font>grdriver<font color="#000080">: </font>integer<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>grdriver<font color="#000080">:= </font>detect<font color="#000080">;
    </font>grmode<font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font>initgraph <font color="#000080">(</font>grdriver<font color="#000080">,</font>grmode<font color="#000080">,</font>bgipath<font color="#000080">);
    </font>errcode<font color="#000080">:= </font>graphresult<font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font>errcode <font color="#000080">&lt;&gt; </font>grok <font color="#FF0000"><b>then begin
      </b></font>writeln <font color="#000080">(</font><font color="#800000">'Graphics error: '</font><font color="#000080">,</font>grapherrormsg <font color="#000080">(</font>errcode<font color="#000080">));
      </font>halt <font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>begin
  </b></font>initbgi<font color="#000080">;
  </font>botscreen<font color="#000080">:= </font>getmaxy<font color="#000080">;
  </font>rightscreen<font color="#000080">:= </font>getmaxx<font color="#000080">;
  </font>initline<font color="#000080">;
  </font>setdefault<font color="#000080">;
  </font>plot<font color="#000080">;
  </font>readln<font color="#000080">;
  </font>closegraph<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to PRINTING SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0036.PAS">Original</a><b>]</b></p></body>
</html>
