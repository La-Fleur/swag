<html>
<head><title> "Various Examples of Dumping Graphics to" by RON NOSSAMAN</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to PRINTING SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0053.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#008000"><i>{ there are six examples included here.  Cut each one out to try them all }

{   EXAMPLE #1 }
{ ----------------------------   CUT  ------------------------- }

{print dump for John Bridges' 360x480x256 mode}
</i></font><font color="#FF0000"><b>uses </b></font>printer<font color="#000080">,</font>crt<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>x<font color="#000080">,</font>y<font color="#000080">:</font>integer<font color="#000080">;

</font><font color="#008000"><i>{$F+}
</i></font><font color="#FF0000"><b>procedure </b></font>set360x480<font color="#000080">;
</font><font color="#008000"><i>{courtesy of John Bridges}
</i></font><font color="#FF0000"><b>begin
   asm
      </b></font><font color="#FF00FF">push si
      push di
      mov ax,12h     </font><font color="#008000"><i>{clear video memory with bios}
      </i></font><font color="#FF00FF">int 10h        </font><font color="#008000"><i>{and set 640x480x16 mode}
      </i></font><font color="#FF00FF">mov ax,13h     </font><font color="#008000"><i>{set 320x200x256 mode with bios}
      </i></font><font color="#FF00FF">int 10h
      mov dx,3c4h    </font><font color="#008000"><i>{alter sequencer registers}
      </i></font><font color="#FF00FF">mov ax,0604h   </font><font color="#008000"><i>{disable chain 4}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax,0100h   </font><font color="#008000"><i>{syncronus reset}
      </i></font><font color="#FF00FF">out dx,ax
      mov dx,3c2h
      mov al,0e7h
      out dx,al
      mov dx,3c4h
      mov ax,0300h
      out dx,ax
      mov dx,3d4h
      mov al,11h
      out dx,al
      inc dx
      in al,dx
      and al,7fh
      out dx,al
      dec dx
      mov ax,06b00h  </font><font color="#008000"><i>{horiz total}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax,05901h  </font><font color="#008000"><i>{horiz displayed}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax,05a02h  </font><font color="#008000"><i>{start horiz blanking}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax,08e03h  </font><font color="#008000"><i>{end horiz blanking}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax, 05e04h  </font><font color="#008000"><i>{start h sync}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax, 08a05h  </font><font color="#008000"><i>{end h sync}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax, 00d06h  </font><font color="#008000"><i>{vertical total}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax, 03e07h  </font><font color="#008000"><i>{overflow}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax, 04009h  </font><font color="#008000"><i>{cell height}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax, 0ea10h  </font><font color="#008000"><i>{v sync start}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax, 0ac11h  </font><font color="#008000"><i>{v sync end and protect cr0-cr7}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax, 0df12h  </font><font color="#008000"><i>{vertical displayed}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax, 02d13h  </font><font color="#008000"><i>{offset}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax, 00014h  </font><font color="#008000"><i>{turn off dword mode}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax, 0e715h  </font><font color="#008000"><i>{v blank start}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax, 00616h  </font><font color="#008000"><i>{v blank end}
      </i></font><font color="#FF00FF">out dx,ax
      mov ax, 0e317h  </font><font color="#008000"><i>{turn on byte mode}
      </i></font><font color="#FF00FF">out dx,ax
     pop di
     pop si
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>dot360x480<font color="#000080">(</font>drawx<font color="#000080">,</font>drawy<font color="#000080">,</font>color<font color="#000080">:</font>word<font color="#000080">);
</font><font color="#FF0000"><b>begin
   asm
       </b></font><font color="#FF00FF">mov ax,0a000h                </font><font color="#008000"><i>{VGA_SEGMENT}
       </i></font><font color="#FF00FF">mov es,ax
       mov ax,90                    </font><font color="#008000"><i>{SCREEN_WIDTH/4}
       </i></font><font color="#FF00FF">mul DrawY
       mov di,DrawX
       shr di,1
       shr di,1
       add di,ax
       mov cl,byte ptr DrawX
       and cl,3
       mov ah,1
       shl ah,cl
       mov al,2                    </font><font color="#008000"><i>{MAP_MASK}
       </i></font><font color="#FF00FF">mov dx,03c4h                </font><font color="#008000"><i>{SC_INDEX}
       </i></font><font color="#FF00FF">out dx,ax
       mov al,byte ptr Color
       stosb                       </font><font color="#008000"><i>{draw pixel}
    </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Read360x480<font color="#000080">(</font>Readx<font color="#000080">,</font>Ready<font color="#000080">:</font>word<font color="#000080">):</font>word<font color="#000080">;
</font><font color="#008000"><i>{Read360x480 PROC FAR ReadX:WORD, ReadY:WORD RETURNS result:WORD}
</i></font><font color="#FF0000"><b>begin
   asm
       </b></font><font color="#FF00FF">mov ax,0a000h                </font><font color="#008000"><i>{VGA_SEGMENT}
       </i></font><font color="#FF00FF">mov es,ax
       mov ax,90                    </font><font color="#008000"><i>{SCREEN_WIDTH/4}
       </i></font><font color="#FF00FF">mul ReadY
       mov si,ReadX
       shr si,1
       shr si,1
       add si,ax
       mov ah,byte ptr ReadX
       and ah,3
       mov al,4                    </font><font color="#008000"><i>{READ_MAP}
       </i></font><font color="#FF00FF">mov dx,3ceh                 </font><font color="#008000"><i>{GC_INDEX}
       </i></font><font color="#FF00FF">out dx,ax
       SEGES mov al,[si]
       sub ah,ah
       mov @result,ax
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{$F-}


</i></font><font color="#FF0000"><b>procedure </b></font>putpixel<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>hue<font color="#000080">:</font>integer<font color="#000080">);
</font><font color="#008000"><i>{with brute force (dip stick) clipping}
</i></font><font color="#FF0000"><b>begin
   if </b></font>x<font color="#000080">&lt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>exit<font color="#000080">;
   </font><font color="#FF0000"><b>if </b></font>y<font color="#000080">&lt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>exit<font color="#000080">;
   </font><font color="#FF0000"><b>if </b></font>x<font color="#000080">&gt;</font><font color="#800000">359 </font><font color="#FF0000"><b>then </b></font>exit<font color="#000080">;
   </font><font color="#FF0000"><b>if </b></font>y<font color="#000080">&gt;</font><font color="#800000">479 </font><font color="#FF0000"><b>then </b></font>exit<font color="#000080">;
   </font>dot360x480<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>hue<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>Ellipse<font color="#000080">(</font>X<font color="#000080">,</font>Y<font color="#000080">,</font>YRad<font color="#000080">,</font>XRad<font color="#000080">: </font>integer<font color="#000080">; </font>Color<font color="#000080">: </font>byte<font color="#000080">); </font><font color="#008000"><i>{borrowed for demo}
</i></font><font color="#FF0000"><b>var
 </b></font>EX<font color="#000080">,</font>EY<font color="#000080">: </font>integer<font color="#000080">;
 </font>YRadSqr<font color="#000080">,</font>YRadSqr2<font color="#000080">,</font>XRadSqr<font color="#000080">,</font>XRadSqr2<font color="#000080">,</font>D<font color="#000080">,</font>DX<font color="#000080">,</font>DY<font color="#000080">: </font>longint<font color="#000080">;
</font><font color="#FF0000"><b>begin
 </b></font>EX<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
 </font>EY<font color="#000080">:=</font>XRad<font color="#000080">;
 </font>YRadSqr<font color="#000080">:=</font>longint<font color="#000080">(</font>YRad<font color="#000080">)*</font>YRad<font color="#000080">;
 </font>YRadSqr2<font color="#000080">:=</font><font color="#800000">2</font><font color="#000080">*</font>YRadSqr<font color="#000080">;
 </font>XRadSqr<font color="#000080">:=</font>longInt<font color="#000080">(</font>XRad<font color="#000080">)*</font>XRad<font color="#000080">;
 </font>XRadSqr2<font color="#000080">:=</font><font color="#800000">2</font><font color="#000080">*</font>XRadSqr<font color="#000080">;
 </font>D<font color="#000080">:=</font>XRadSqr<font color="#000080">-</font>YRadSqr<font color="#000080">*</font>XRad<font color="#000080">+</font>YRadSqr <font color="#FF0000"><b>div </b></font><font color="#800000">4</font><font color="#000080">;
 </font>DX<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
 </font>DY<font color="#000080">:=</font>YRadSqr2<font color="#000080">*</font>XRad<font color="#000080">;
 </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">-</font>EY<font color="#000080">,</font>X<font color="#000080">,</font>Color<font color="#000080">);
 </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">+</font>EY<font color="#000080">,</font>X<font color="#000080">,</font>Color<font color="#000080">);
 </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">,</font>X<font color="#000080">-</font>YRad<font color="#000080">,</font>Color<font color="#000080">);
 </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">,</font>X<font color="#000080">+</font>YRad<font color="#000080">,</font>Color<font color="#000080">);
 </font><font color="#FF0000"><b>while </b></font><font color="#000080">(</font>DX<font color="#000080">&lt;</font>DY<font color="#000080">) </font><font color="#FF0000"><b>do begin
  if </b></font><font color="#000080">(</font>D<font color="#000080">&gt;</font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then begin
   </b></font>Dec<font color="#000080">(</font>EY<font color="#000080">);
   </font>Dec<font color="#000080">(</font>DY<font color="#000080">,</font>YRadSqr2<font color="#000080">);
   </font>Dec<font color="#000080">(</font>D<font color="#000080">,</font>DY<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>Inc<font color="#000080">(</font>EX<font color="#000080">);
  </font>Inc<font color="#000080">(</font>DX<font color="#000080">,</font>XRadSqr2<font color="#000080">);
  </font>Inc<font color="#000080">(</font>D<font color="#000080">,</font>XRadSqr<font color="#000080">+</font>DX<font color="#000080">);
  </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">+</font>EY<font color="#000080">,</font>X<font color="#000080">+</font>EX<font color="#000080">,</font>Color<font color="#000080">);
  </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">+</font>EY<font color="#000080">,</font>X<font color="#000080">-</font>EX<font color="#000080">,</font>Color<font color="#000080">);
  </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">-</font>EY<font color="#000080">,</font>X<font color="#000080">+</font>EX<font color="#000080">,</font>Color<font color="#000080">);
  </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">-</font>EY<font color="#000080">,</font>X<font color="#000080">-</font>EX<font color="#000080">,</font>Color<font color="#000080">);
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font>Inc<font color="#000080">(</font>D<font color="#000080">,(</font><font color="#800000">3</font><font color="#000080">*(</font>YRadSqr<font color="#000080">-</font>XRadSqr<font color="#000080">) </font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">-(</font>DX<font color="#000080">+</font>DY<font color="#000080">)) </font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">);
 </font><font color="#FF0000"><b>while </b></font><font color="#000080">(</font>EY<font color="#000080">&gt;</font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>do begin
  if</b></font><font color="#000080">(</font>D<font color="#000080">&lt;</font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then begin
   </b></font>Inc<font color="#000080">(</font>EX<font color="#000080">);
   </font>Inc<font color="#000080">(</font>DX<font color="#000080">,</font>XRadSqr2<font color="#000080">);
   </font>Inc<font color="#000080">(</font>D<font color="#000080">,</font>XRadSqr<font color="#000080">+</font>DX<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>Dec<font color="#000080">(</font>EY<font color="#000080">);
  </font>Dec<font color="#000080">(</font>DY<font color="#000080">,</font>YRadSqr2<font color="#000080">);
  </font>Inc<font color="#000080">(</font>D<font color="#000080">,</font>YRadSqr<font color="#000080">-</font>DY<font color="#000080">);
  </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">+</font>EY<font color="#000080">,</font>X<font color="#000080">+</font>EX<font color="#000080">,</font>Color<font color="#000080">);
  </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">+</font>EY<font color="#000080">,</font>X<font color="#000080">-</font>EX<font color="#000080">,</font>Color<font color="#000080">);
  </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">-</font>EY<font color="#000080">,</font>X<font color="#000080">+</font>EX<font color="#000080">,</font>Color<font color="#000080">);
  </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">-</font>EY<font color="#000080">,</font>X<font color="#000080">-</font>EX<font color="#000080">,</font>Color<font color="#000080">);
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Procedure </b></font>Xlaser360x480x256<font color="#000080">;
</font><font color="#008000"><i>{Ron Nossaman May 1996   nossaman@southwind.net}
{ Each screen pixel in 360X480 graphics mode translates to an 8X5 printer
   pixel at 300 dpi. This routine maps X,Y screen coordinates into the
   halftone pel, determines the gray density level according to the
   rgb values of each palette entry, and sends the results to a LaserJet II
   compatible laser printer. Since the pel only has 32 levels of gray,
   the pels are, themselves, dithered on an secondary matrix to smooth
   the spread to 256 distinct levels of gray. You get an 8 bit dump from
   a 6 bit dac. You're welcome, but I'd request credit please if you use it.
   The dither pattern is, unfortunately, intrusive in the lighter shades.
   I tried halftoning the halftone pel instead, but the results were lumpier
   than what I have here. Maybe someone has a good scatter dither that is
   adaptable to this use??}
</i></font><font color="#FF0000"><b>Var
   </b></font>x<font color="#000080">,</font>y<font color="#000080">,</font>pdq<font color="#000080">,</font>off<font color="#000080">,</font>linePos<font color="#000080">,</font>pass<font color="#000080">,</font>color<font color="#000080">,</font>color1<font color="#000080">,</font>color2<font color="#000080">,</font>i<font color="#000080">:</font>integer<font color="#000080">;
   </font>OutByte<font color="#000080">,</font>cmod<font color="#000080">,</font>pel<font color="#000080">:</font>byte<font color="#000080">;
   </font>linepix<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">359</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
   </font>outline<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">255</font><font color="#000080">];
   </font>gray<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">]</font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;

</font><font color="#FF0000"><b>const
   </b></font>yrange<font color="#000080">=</font><font color="#800000">479</font><font color="#000080">;
   </font>xhalftone<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">287</font><font color="#000080">]</font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">=(
      </font><font color="#800000">35</font><font color="#000080">, </font><font color="#800000">39</font><font color="#000080">, </font><font color="#800000">54</font><font color="#000080">, </font><font color="#800000">62</font><font color="#000080">,</font><font color="#800000">159</font><font color="#000080">,</font><font color="#800000">155</font><font color="#000080">,</font><font color="#800000">105</font><font color="#000080">, </font><font color="#800000">98</font><font color="#000080">, </font><font color="#800000">99</font><font color="#000080">,</font><font color="#800000">103</font><font color="#000080">,</font><font color="#800000">118</font><font color="#000080">,</font><font color="#800000">126</font><font color="#000080">,</font><font color="#800000">223</font><font color="#000080">,</font><font color="#800000">219</font><font color="#000080">, </font><font color="#800000">41</font><font color="#000080">, </font><font color="#800000">34</font><font color="#000080">, </font><font color="#800000">35</font><font color="#000080">, </font><font color="#800000">39</font><font color="#000080">,
      </font><font color="#800000">42</font><font color="#000080">, </font><font color="#800000">46</font><font color="#000080">, </font><font color="#800000">50</font><font color="#000080">, </font><font color="#800000">58</font><font color="#000080">,</font><font color="#800000">151</font><font color="#000080">,</font><font color="#800000">147</font><font color="#000080">,</font><font color="#800000">109</font><font color="#000080">,</font><font color="#800000">102</font><font color="#000080">,</font><font color="#800000">106</font><font color="#000080">,</font><font color="#800000">110</font><font color="#000080">,</font><font color="#800000">114</font><font color="#000080">,</font><font color="#800000">122</font><font color="#000080">,</font><font color="#800000">215</font><font color="#000080">,</font><font color="#800000">211</font><font color="#000080">, </font><font color="#800000">45</font><font color="#000080">, </font><font color="#800000">38</font><font color="#000080">, </font><font color="#800000">42</font><font color="#000080">, </font><font color="#800000">46</font><font color="#000080">,
     </font><font color="#800000">156</font><font color="#000080">,</font><font color="#800000">148</font><font color="#000080">,</font><font color="#800000">144</font><font color="#000080">,</font><font color="#800000">140</font><font color="#000080">,</font><font color="#800000">136</font><font color="#000080">,</font><font color="#800000">143</font><font color="#000080">,</font><font color="#800000">113</font><font color="#000080">,</font><font color="#800000">117</font><font color="#000080">,</font><font color="#800000">220</font><font color="#000080">,</font><font color="#800000">212</font><font color="#000080">,</font><font color="#800000">208</font><font color="#000080">,</font><font color="#800000">204</font><font color="#000080">,</font><font color="#800000">200</font><font color="#000080">,</font><font color="#800000">207</font><font color="#000080">, </font><font color="#800000">49</font><font color="#000080">, </font><font color="#800000">53</font><font color="#000080">,</font><font color="#800000">156</font><font color="#000080">,</font><font color="#800000">148</font><font color="#000080">,
     </font><font color="#800000">159</font><font color="#000080">,</font><font color="#800000">152</font><font color="#000080">,</font><font color="#800000">133</font><font color="#000080">,</font><font color="#800000">129</font><font color="#000080">,</font><font color="#800000">132</font><font color="#000080">,</font><font color="#800000">139</font><font color="#000080">,</font><font color="#800000">121</font><font color="#000080">,</font><font color="#800000">125</font><font color="#000080">,</font><font color="#800000">223</font><font color="#000080">,</font><font color="#800000">216</font><font color="#000080">,</font><font color="#800000">197</font><font color="#000080">,</font><font color="#800000">193</font><font color="#000080">,</font><font color="#800000">196</font><font color="#000080">,</font><font color="#800000">203</font><font color="#000080">, </font><font color="#800000">57</font><font color="#000080">, </font><font color="#800000">61</font><font color="#000080">,</font><font color="#800000">159</font><font color="#000080">,</font><font color="#800000">152</font><font color="#000080">,
      </font><font color="#800000">95</font><font color="#000080">, </font><font color="#800000">91</font><font color="#000080">,</font><font color="#800000">137</font><font color="#000080">,</font><font color="#800000">130</font><font color="#000080">,</font><font color="#800000">131</font><font color="#000080">,</font><font color="#800000">135</font><font color="#000080">,</font><font color="#800000">150</font><font color="#000080">,</font><font color="#800000">158</font><font color="#000080">, </font><font color="#800000">31</font><font color="#000080">, </font><font color="#800000">27</font><font color="#000080">,</font><font color="#800000">201</font><font color="#000080">,</font><font color="#800000">194</font><font color="#000080">,</font><font color="#800000">195</font><font color="#000080">,</font><font color="#800000">199</font><font color="#000080">,</font><font color="#800000">214</font><font color="#000080">,</font><font color="#800000">222</font><font color="#000080">, </font><font color="#800000">95</font><font color="#000080">, </font><font color="#800000">91</font><font color="#000080">,
      </font><font color="#800000">87</font><font color="#000080">, </font><font color="#800000">83</font><font color="#000080">,</font><font color="#800000">141</font><font color="#000080">,</font><font color="#800000">134</font><font color="#000080">,</font><font color="#800000">138</font><font color="#000080">,</font><font color="#800000">142</font><font color="#000080">,</font><font color="#800000">146</font><font color="#000080">,</font><font color="#800000">154</font><font color="#000080">, </font><font color="#800000">23</font><font color="#000080">, </font><font color="#800000">19</font><font color="#000080">,</font><font color="#800000">205</font><font color="#000080">,</font><font color="#800000">198</font><font color="#000080">,</font><font color="#800000">202</font><font color="#000080">,</font><font color="#800000">206</font><font color="#000080">,</font><font color="#800000">210</font><font color="#000080">,</font><font color="#800000">218</font><font color="#000080">, </font><font color="#800000">87</font><font color="#000080">, </font><font color="#800000">83</font><font color="#000080">,
      </font><font color="#800000">72</font><font color="#000080">, </font><font color="#800000">79</font><font color="#000080">,</font><font color="#800000">145</font><font color="#000080">,</font><font color="#800000">149</font><font color="#000080">, </font><font color="#800000">28</font><font color="#000080">, </font><font color="#800000">20</font><font color="#000080">, </font><font color="#800000">16</font><font color="#000080">, </font><font color="#800000">12</font><font color="#000080">,  </font><font color="#800000">8</font><font color="#000080">, </font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">209</font><font color="#000080">,</font><font color="#800000">213</font><font color="#000080">, </font><font color="#800000">92</font><font color="#000080">, </font><font color="#800000">84</font><font color="#000080">, </font><font color="#800000">80</font><font color="#000080">, </font><font color="#800000">76</font><font color="#000080">, </font><font color="#800000">72</font><font color="#000080">, </font><font color="#800000">79</font><font color="#000080">,
      </font><font color="#800000">68</font><font color="#000080">, </font><font color="#800000">75</font><font color="#000080">,</font><font color="#800000">153</font><font color="#000080">,</font><font color="#800000">157</font><font color="#000080">, </font><font color="#800000">31</font><font color="#000080">, </font><font color="#800000">24</font><font color="#000080">,  </font><font color="#800000">5</font><font color="#000080">,  </font><font color="#800000">1</font><font color="#000080">,  </font><font color="#800000">4</font><font color="#000080">, </font><font color="#800000">11</font><font color="#000080">,</font><font color="#800000">217</font><font color="#000080">,</font><font color="#800000">221</font><font color="#000080">, </font><font color="#800000">95</font><font color="#000080">, </font><font color="#800000">88</font><font color="#000080">, </font><font color="#800000">69</font><font color="#000080">, </font><font color="#800000">65</font><font color="#000080">, </font><font color="#800000">68</font><font color="#000080">, </font><font color="#800000">75</font><font color="#000080">,
      </font><font color="#800000">67</font><font color="#000080">, </font><font color="#800000">71</font><font color="#000080">, </font><font color="#800000">86</font><font color="#000080">, </font><font color="#800000">94</font><font color="#000080">,</font><font color="#800000">255</font><font color="#000080">,</font><font color="#800000">251</font><font color="#000080">,  </font><font color="#800000">9</font><font color="#000080">,  </font><font color="#800000">2</font><font color="#000080">,  </font><font color="#800000">3</font><font color="#000080">,  </font><font color="#800000">7</font><font color="#000080">, </font><font color="#800000">22</font><font color="#000080">, </font><font color="#800000">30</font><font color="#000080">,</font><font color="#800000">191</font><font color="#000080">,</font><font color="#800000">187</font><font color="#000080">, </font><font color="#800000">73</font><font color="#000080">, </font><font color="#800000">66</font><font color="#000080">, </font><font color="#800000">67</font><font color="#000080">, </font><font color="#800000">71</font><font color="#000080">,
      </font><font color="#800000">74</font><font color="#000080">, </font><font color="#800000">78</font><font color="#000080">, </font><font color="#800000">82</font><font color="#000080">, </font><font color="#800000">90</font><font color="#000080">,</font><font color="#800000">247</font><font color="#000080">,</font><font color="#800000">243</font><font color="#000080">, </font><font color="#800000">13</font><font color="#000080">,  </font><font color="#800000">6</font><font color="#000080">, </font><font color="#800000">10</font><font color="#000080">, </font><font color="#800000">14</font><font color="#000080">, </font><font color="#800000">18</font><font color="#000080">, </font><font color="#800000">26</font><font color="#000080">,</font><font color="#800000">183</font><font color="#000080">,</font><font color="#800000">179</font><font color="#000080">, </font><font color="#800000">77</font><font color="#000080">, </font><font color="#800000">70</font><font color="#000080">, </font><font color="#800000">74</font><font color="#000080">, </font><font color="#800000">78</font><font color="#000080">,
     </font><font color="#800000">252</font><font color="#000080">,</font><font color="#800000">244</font><font color="#000080">,</font><font color="#800000">240</font><font color="#000080">,</font><font color="#800000">236</font><font color="#000080">,</font><font color="#800000">232</font><font color="#000080">,</font><font color="#800000">239</font><font color="#000080">, </font><font color="#800000">17</font><font color="#000080">, </font><font color="#800000">21</font><font color="#000080">,</font><font color="#800000">188</font><font color="#000080">,</font><font color="#800000">180</font><font color="#000080">,</font><font color="#800000">176</font><font color="#000080">,</font><font color="#800000">172</font><font color="#000080">,</font><font color="#800000">168</font><font color="#000080">,</font><font color="#800000">175</font><font color="#000080">, </font><font color="#800000">81</font><font color="#000080">, </font><font color="#800000">85</font><font color="#000080">,</font><font color="#800000">252</font><font color="#000080">,</font><font color="#800000">244</font><font color="#000080">,
     </font><font color="#800000">255</font><font color="#000080">,</font><font color="#800000">248</font><font color="#000080">,</font><font color="#800000">229</font><font color="#000080">,</font><font color="#800000">225</font><font color="#000080">,</font><font color="#800000">228</font><font color="#000080">,</font><font color="#800000">235</font><font color="#000080">, </font><font color="#800000">25</font><font color="#000080">, </font><font color="#800000">29</font><font color="#000080">,</font><font color="#800000">191</font><font color="#000080">,</font><font color="#800000">184</font><font color="#000080">,</font><font color="#800000">165</font><font color="#000080">,</font><font color="#800000">161</font><font color="#000080">,</font><font color="#800000">164</font><font color="#000080">,</font><font color="#800000">171</font><font color="#000080">, </font><font color="#800000">89</font><font color="#000080">, </font><font color="#800000">93</font><font color="#000080">,</font><font color="#800000">255</font><font color="#000080">,</font><font color="#800000">248</font><font color="#000080">,
      </font><font color="#800000">63</font><font color="#000080">, </font><font color="#800000">59</font><font color="#000080">,</font><font color="#800000">233</font><font color="#000080">,</font><font color="#800000">226</font><font color="#000080">,</font><font color="#800000">227</font><font color="#000080">,</font><font color="#800000">231</font><font color="#000080">,</font><font color="#800000">246</font><font color="#000080">,</font><font color="#800000">254</font><font color="#000080">,</font><font color="#800000">127</font><font color="#000080">,</font><font color="#800000">123</font><font color="#000080">,</font><font color="#800000">169</font><font color="#000080">,</font><font color="#800000">162</font><font color="#000080">,</font><font color="#800000">163</font><font color="#000080">,</font><font color="#800000">167</font><font color="#000080">,</font><font color="#800000">182</font><font color="#000080">,</font><font color="#800000">190</font><font color="#000080">, </font><font color="#800000">63</font><font color="#000080">, </font><font color="#800000">59</font><font color="#000080">,
      </font><font color="#800000">55</font><font color="#000080">, </font><font color="#800000">51</font><font color="#000080">,</font><font color="#800000">237</font><font color="#000080">,</font><font color="#800000">230</font><font color="#000080">,</font><font color="#800000">234</font><font color="#000080">,</font><font color="#800000">238</font><font color="#000080">,</font><font color="#800000">242</font><font color="#000080">,</font><font color="#800000">250</font><font color="#000080">,</font><font color="#800000">119</font><font color="#000080">,</font><font color="#800000">115</font><font color="#000080">,</font><font color="#800000">173</font><font color="#000080">,</font><font color="#800000">166</font><font color="#000080">,</font><font color="#800000">170</font><font color="#000080">,</font><font color="#800000">174</font><font color="#000080">,</font><font color="#800000">178</font><font color="#000080">,</font><font color="#800000">186</font><font color="#000080">, </font><font color="#800000">55</font><font color="#000080">, </font><font color="#800000">51</font><font color="#000080">,
      </font><font color="#800000">40</font><font color="#000080">, </font><font color="#800000">47</font><font color="#000080">,</font><font color="#800000">241</font><font color="#000080">,</font><font color="#800000">245</font><font color="#000080">,</font><font color="#800000">124</font><font color="#000080">,</font><font color="#800000">116</font><font color="#000080">,</font><font color="#800000">112</font><font color="#000080">,</font><font color="#800000">108</font><font color="#000080">,</font><font color="#800000">104</font><font color="#000080">,</font><font color="#800000">111</font><font color="#000080">,</font><font color="#800000">177</font><font color="#000080">,</font><font color="#800000">181</font><font color="#000080">, </font><font color="#800000">60</font><font color="#000080">, </font><font color="#800000">52</font><font color="#000080">, </font><font color="#800000">48</font><font color="#000080">, </font><font color="#800000">44</font><font color="#000080">, </font><font color="#800000">40</font><font color="#000080">, </font><font color="#800000">47</font><font color="#000080">,
      </font><font color="#800000">36</font><font color="#000080">, </font><font color="#800000">43</font><font color="#000080">,</font><font color="#800000">249</font><font color="#000080">,</font><font color="#800000">253</font><font color="#000080">,</font><font color="#800000">127</font><font color="#000080">,</font><font color="#800000">120</font><font color="#000080">,</font><font color="#800000">101</font><font color="#000080">, </font><font color="#800000">97</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">107</font><font color="#000080">,</font><font color="#800000">185</font><font color="#000080">,</font><font color="#800000">189</font><font color="#000080">, </font><font color="#800000">63</font><font color="#000080">, </font><font color="#800000">56</font><font color="#000080">, </font><font color="#800000">37</font><font color="#000080">, </font><font color="#800000">33</font><font color="#000080">, </font><font color="#800000">36</font><font color="#000080">, </font><font color="#800000">43</font><font color="#000080">);


   </font><font color="#FF0000"><b>procedure </b></font>graysum<font color="#000080">;
   </font><font color="#FF0000"><b>var </b></font>r<font color="#000080">,</font>g<font color="#000080">,</font>b<font color="#000080">:</font>byte<font color="#000080">;
       </font>c<font color="#000080">:</font>word<font color="#000080">;
       </font>i<font color="#000080">:</font>integer<font color="#000080">;
   </font><font color="#FF0000"><b>begin
      for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do
      begin
         </b></font>c<font color="#000080">:=</font>i<font color="#000080">;
         </font><font color="#FF0000"><b>asm             </b></font><font color="#008000"><i>{get rgb values for this color}
           </i></font><font color="#FF00FF">mov ah,$10;
           mov al,$15;
           mov bx,c;
           int $10;
           mov r,dh;
           mov g,ch;
           mov b,cl;
         </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
       </font><font color="#008000"><i>{stretch from six bit to eight bit gray scale for print dump}
         </i></font>gray<font color="#000080">[</font>i<font color="#000080">]:=</font><font color="#800000">255</font><font color="#000080">-(</font>round<font color="#000080">(</font>r<font color="#000080">*</font><font color="#800000">1.2</font><font color="#000080">)+</font>round<font color="#000080">(</font>g<font color="#000080">*</font><font color="#800000">2.36</font><font color="#000080">)+</font>round<font color="#000080">(</font>b<font color="#000080">*</font><font color="#800000">0.44</font><font color="#000080">)); </font><font color="#008000"><i>{&amp; invert}
    {     gray[i]:=255-i; }   {test stuff for gray fountain}
      </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Begin        </b></font><font color="#008000"><i>{LandscapeXlaser}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'E'</font><font color="#000080">);
   </font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'&amp;l1O'</font><font color="#000080">);      </font><font color="#008000"><i>{landscape}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*r0F'</font><font color="#000080">);      </font><font color="#008000"><i>{no rotation}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*p150X'</font><font color="#000080">);    </font><font color="#008000"><i>{Set horizontal cursor position}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*p-100Y'</font><font color="#000080">);     </font><font color="#008000"><i>{set vertical cursor position}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*t300R'</font><font color="#000080">);    </font><font color="#008000"><i>{raster graphics @300dpi}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*r1A'</font><font color="#000080">);      </font><font color="#008000"><i>{start graphics - current cursor}
   </i></font>graysum<font color="#000080">;
   </font><font color="#FF0000"><b>for </b></font>y<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>yrange <font color="#FF0000"><b>do
    begin
       for </b></font>x<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">359 </font><font color="#FF0000"><b>do </b></font>linepix<font color="#000080">[</font>x<font color="#000080">]:=</font>gray<font color="#000080">[</font>read360x480<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">)];
       </font><font color="#FF0000"><b>if </b></font>keypressed <font color="#FF0000"><b>then if </b></font>readkey <font color="#000080">=</font><font color="#800000">#27 </font><font color="#FF0000"><b>then
          begin
             </b></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*rB'</font><font color="#000080">);               </font><font color="#008000"><i>{end graphics}
             </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">#38</font><font color="#000080">,</font><font color="#800000">#108</font><font color="#000080">,</font><font color="#800000">#48</font><font color="#000080">,</font><font color="#800000">#72</font><font color="#000080">);    </font><font color="#008000"><i>{page feed}
             </i></font>exit<font color="#000080">;
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
       </font><font color="#FF0000"><b>for </b></font>pass<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">4 </font><font color="#FF0000"><b>do  </b></font><font color="#008000"><i>{pixel is 5 dots deep at 300 dpi}
       </i></font><font color="#FF0000"><b>begin
          </b></font>off <font color="#000080">:=((</font>y<font color="#000080">*</font><font color="#800000">5</font><font color="#000080">+</font>pass<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">16</font><font color="#000080">)*</font><font color="#800000">18</font><font color="#000080">; </font><font color="#008000"><i>{index into halftone pel}
          </i></font>putpixel<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font>y<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">,</font>pass<font color="#000080">); </font><font color="#008000"><i>{visual progress report}
          </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*b360W'</font><font color="#000080">); </font><font color="#008000"><i>{inform printer, 360 bytes graphics coming}
          </i></font>x<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
          </font>linepos<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;
          </font><font color="#FF0000"><b>while </b></font>x<font color="#000080">&lt;</font><font color="#800000">360 </font><font color="#FF0000"><b>do
          begin
             </b></font>color<font color="#000080">:=</font>linepix<font color="#000080">[</font>x<font color="#000080">];
             </font>pdq<font color="#000080">:=</font>off<font color="#000080">;
             </font><font color="#FF0000"><b>if </b></font>odd<font color="#000080">(</font>x<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>pdq<font color="#000080">,</font><font color="#800000">8</font><font color="#000080">);

          </font><font color="#008000"><i>{convert to halftone}
             </i></font>color1<font color="#000080">:=</font>color <font color="#FF0000"><b>div </b></font><font color="#800000">8</font><font color="#000080">;
             </font>cmod<font color="#000080">:=</font>color <font color="#FF0000"><b>mod </b></font><font color="#800000">8</font><font color="#000080">;
             </font>OutByte<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;         </font><font color="#008000"><i>{avoid range check error when it's shifted}
             </i></font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">7 </font><font color="#FF0000"><b>do                      </b></font><font color="#008000"><i>{pixel is 8 dots wide}
             </i></font><font color="#FF0000"><b>begin
                </b></font>outbyte<font color="#000080">:=</font>outbyte <font color="#FF0000"><b>shl </b></font><font color="#800000">1</font><font color="#000080">;
                </font>color2<font color="#000080">:=</font>color1<font color="#000080">;
                </font>pel<font color="#000080">:=</font>xhalftone<font color="#000080">[</font>pdq<font color="#000080">+</font>i<font color="#000080">];
                </font><font color="#FF0000"><b>if </b></font>cmod<font color="#000080">&lt;</font>succ<font color="#000080">((</font>pel <font color="#FF0000"><b>and </b></font><font color="#800000">224</font><font color="#000080">)</font><font color="#FF0000"><b>shr </b></font><font color="#800000">5</font><font color="#000080">) </font><font color="#FF0000"><b>then
                   if </b></font>color2<font color="#000080">&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>dec<font color="#000080">(</font>color2<font color="#000080">);
                </font><font color="#FF0000"><b>if </b></font>color2<font color="#000080">&gt;=(</font>pel <font color="#FF0000"><b>and </b></font><font color="#800000">31</font><font color="#000080">)</font><font color="#FF0000"><b>then </b></font>outbyte<font color="#000080">:=</font>outbyte <font color="#FF0000"><b>or </b></font><font color="#800000">1</font><font color="#000080">;
             </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
             </font>inc<font color="#000080">(</font>x<font color="#000080">);
             </font>outline<font color="#000080">[</font>linepos<font color="#000080">]:=</font>chr<font color="#000080">(</font>outbyte<font color="#000080">);
             </font>inc<font color="#000080">(</font>linepos<font color="#000080">);
             </font><font color="#FF0000"><b>if </b></font>linepos<font color="#000080">&gt;</font><font color="#800000">255 </font><font color="#FF0000"><b>then
             begin
                </b></font>outline<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]:=</font>chr<font color="#000080">(</font><font color="#800000">255</font><font color="#000080">);
                </font>write<font color="#000080">(</font>lst<font color="#000080">,</font>outline<font color="#000080">);
                </font>linepos<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;
             </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{while x&lt;320]}
          </i></font>outline<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]:=</font>chr<font color="#000080">(</font>linepos<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">);
          </font>write<font color="#000080">(</font>lst<font color="#000080">,</font>outline<font color="#000080">);
       </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{pass}
   </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{for y}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*rB'</font><font color="#000080">);               </font><font color="#008000"><i>{end graphics}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">#38</font><font color="#000080">,</font><font color="#800000">#108</font><font color="#000080">,</font><font color="#800000">#48</font><font color="#000080">,</font><font color="#800000">#72</font><font color="#000080">);    </font><font color="#008000"><i>{page feed}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'E'</font><font color="#000080">);             </font><font color="#008000"><i>{reset printer}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{Xlaser360x480x256}





</i></font><font color="#FF0000"><b>begin
   </b></font>set360x480<font color="#000080">;

   </font><font color="#FF0000"><b>for </b></font>y<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">479 </font><font color="#FF0000"><b>do for </b></font>x<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">359 </font><font color="#FF0000"><b>do </b></font>putpixel<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>x <font color="#FF0000"><b>mod </b></font><font color="#800000">256</font><font color="#000080">);
   </font><font color="#FF0000"><b>for </b></font>y<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">235 </font><font color="#FF0000"><b>do
   begin
      </b></font>Ellipse<font color="#000080">(</font><font color="#800000">240</font><font color="#000080">,</font><font color="#800000">180</font><font color="#000080">,</font>y<font color="#000080">,</font>round<font color="#000080">(</font>y<font color="#000080">*</font><font color="#800000">0.6</font><font color="#000080">),</font>y<font color="#000080">);
      </font>Ellipse<font color="#000080">(</font><font color="#800000">241</font><font color="#000080">,</font><font color="#800000">180</font><font color="#000080">,</font>y<font color="#000080">,</font>round<font color="#000080">(</font>y<font color="#000080">*</font><font color="#800000">0.6</font><font color="#000080">),</font>y<font color="#000080">);    </font><font color="#008000"><i>{Moire killers}
      </i></font>Ellipse<font color="#000080">(</font><font color="#800000">240</font><font color="#000080">,</font><font color="#800000">181</font><font color="#000080">,</font>y<font color="#000080">,</font>round<font color="#000080">(</font>y<font color="#000080">*</font><font color="#800000">0.6</font><font color="#000080">),</font>y<font color="#000080">);
      </font>Ellipse<font color="#000080">(</font><font color="#800000">239</font><font color="#000080">,</font><font color="#800000">180</font><font color="#000080">,</font>y<font color="#000080">,</font>round<font color="#000080">(</font>y<font color="#000080">*</font><font color="#800000">0.6</font><font color="#000080">),</font>y<font color="#000080">);
      </font>Ellipse<font color="#000080">(</font><font color="#800000">240</font><font color="#000080">,</font><font color="#800000">179</font><font color="#000080">,</font>y<font color="#000080">,</font>round<font color="#000080">(</font>y<font color="#000080">*</font><font color="#800000">0.6</font><font color="#000080">),</font>y<font color="#000080">);
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

 </font><font color="#008000"><i>(*
   for y:=0 to 58 do      {gray fountain}
   begin
      for x:=0 to 359 do
      begin
         putpixel(x,y,x div 10);
         putpixel(x,59+y,32+x div 10);
         putpixel(x,118+y,64+(x div 10));
         putpixel(x,177+y,96+(x div 10));
         putpixel(x,236+y,128+(x div 10));
         putpixel(x,295+y,160+(x div 10));
         putpixel(x,354+y,192+(x div 10));
         putpixel(x,413+y,224+(x div 10));
      end;
   end;
   for y:=470 to 479 do for x:=0 to 319 do putpixel(x,y,x mod 256);
   *)
   </i></font>xlaser360x480x256<font color="#000080">;
   </font><font color="#FF0000"><b>asm
    </b></font><font color="#FF00FF">mov ah,0
    mov al,$3     </font><font color="#008000"><i>{80x25x16 text}
    </i></font><font color="#FF00FF">int 10h
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#008000"><i>{Miller time}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font><font color="#008000"><i>{   EXAMPLE #2 }
{ ----------------------------   CUT  ------------------------- }
{ MUST have VESA driver in memory to work }

</i></font><font color="#FF0000"><b>uses </b></font>printer<font color="#000080">,</font>crt<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>x<font color="#000080">,</font>y<font color="#000080">:</font>integer<font color="#000080">;
   </font>xmax<font color="#000080">,</font>ymax<font color="#000080">:</font>word<font color="#000080">;
   </font>Current_bank<font color="#000080">: </font>byte<font color="#000080">;
   </font>Pp<font color="#000080">: </font>byte<font color="#000080">;


</font><font color="#FF0000"><b>Procedure </b></font>PutPix<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">: </font>word<font color="#000080">; </font>c<font color="#000080">: </font>byte<font color="#000080">); </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm
  </b></font><font color="#008000"><i>{ Do some simple checking }
  </i></font><font color="#FF00FF">mov  ax, x
  cmp  xmax,ax
  jb   @</font><font color="#FF0000"><b>end          </b></font><font color="#008000"><i>{x too big}

  </i></font>mov  ax<font color="#000080">, </font>y
  cmp  ymax<font color="#000080">, </font>ax
  jb   <font color="#000080">@</font><font color="#FF0000"><b>end          </b></font><font color="#008000"><i>{y too big}

 { dec  x}

  { Calculate where we're going to place the pixel at A000:???? }
  </i></font>mov ax<font color="#000080">,</font><font color="#800000">$a000
  </font>Mov  ES<font color="#000080">, </font>ax
  Mov  AX<font color="#000080">, </font>Ymax
  Mul  pp            <font color="#008000"><i>{page offset?}
  </i></font>Add  Ax<font color="#000080">, </font>Y
  Mov  Bx<font color="#000080">, </font>Ax
  Mov  Ax<font color="#000080">, </font>Xmax
  Mul  Bx
  Add  Ax<font color="#000080">, </font>X
  Adc  Dx<font color="#000080">, </font><font color="#800000">0
  </font>Mov  Di<font color="#000080">, </font>Ax
  Cmp  Dl<font color="#000080">, </font>Current_bank
  <font color="#008000"><i>{ If we're at the bank we need to be, then skip it }
  </i></font>Je   <font color="#000080">@</font>skip
  <font color="#008000"><i>{ Set the video bank to what we need }
  </i></font>Mov  Current_bank<font color="#000080">, </font>Dl
  Mov  Ax<font color="#000080">, </font><font color="#800000">4</font>F05h
  <font color="#FF0000"><b>Xor  </b></font>Bx<font color="#000080">, </font>Bx
  Int  <font color="#800000">10</font>h

 <font color="#000080">@</font>Skip<font color="#000080">:
  </font>Mov  Al<font color="#000080">, </font>C
  Mov  Es<font color="#000080">:[</font>Di<font color="#000080">], </font>Al
 <font color="#000080">@</font><font color="#FF0000"><b>End</b></font><font color="#000080">:
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;


</font><font color="#FF0000"><b>function </b></font>GetPix<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">: </font>word<font color="#000080">):</font>byte<font color="#000080">; </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm
  </b></font><font color="#008000"><i>{ Do some simple checking }
  </i></font><font color="#FF00FF">mov  ax, x
  cmp  xmax,ax
  jb   @</font><font color="#FF0000"><b>end          </b></font><font color="#008000"><i>{x too big}

  </i></font>mov  ax<font color="#000080">, </font>y
  cmp  ymax<font color="#000080">, </font>ax
  jb   <font color="#000080">@</font><font color="#FF0000"><b>end          </b></font><font color="#008000"><i>{y too big}

{  dec  x}

  { Calculate where we're going to read the pixel at A000:???? }
  </i></font>mov ax<font color="#000080">,</font><font color="#800000">$a000
  </font>Mov  ES<font color="#000080">, </font>ax
  Mov  AX<font color="#000080">, </font>Ymax
  Mul  pp            <font color="#008000"><i>{page offset?}
  </i></font>Add  Ax<font color="#000080">, </font>Y
  Mov  Bx<font color="#000080">, </font>Ax
  Mov  Ax<font color="#000080">, </font>Xmax
  Mul  Bx
  Add  Ax<font color="#000080">, </font>X
  Adc  Dx<font color="#000080">, </font><font color="#800000">0
  </font>Mov  Di<font color="#000080">, </font>Ax
  Cmp  Dl<font color="#000080">, </font>Current_bank
  <font color="#008000"><i>{ If we're at the bank we need to be, then skip it }
  </i></font>Je   <font color="#000080">@</font>skip
  <font color="#008000"><i>{ Set the video bank to what we need }
  </i></font>Mov  Current_bank<font color="#000080">, </font>Dl
  Mov  Ax<font color="#000080">, </font><font color="#800000">4</font>F05h
  <font color="#FF0000"><b>Xor  </b></font>Bx<font color="#000080">, </font>Bx
  Int  <font color="#800000">10</font>h

 <font color="#000080">@</font>Skip<font color="#000080">:
  </font>Mov  al<font color="#000080">, </font>Es<font color="#000080">:[</font>Di<font color="#000080">]
 @</font><font color="#FF0000"><b>End</b></font><font color="#000080">:
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;



</font><font color="#FF0000"><b>Procedure </b></font>Xlaser640x480x256<font color="#000080">; </font><font color="#008000"><i>{vesa mode printer dump $101}
{Ron Nossaman May 1996   nossaman@southwind.net}
{ Each screen pixel in 640X480 graphics mode translates to a 4X4 printer
   pixel at 300 dpi. This routine maps X,Y screen coordinates into the
   halftone pel, determines the gray density level according to the
   rgb values of each palette entry, and sends the results to a LaserJet II
   compatible laser printer. Since the pel only has 32 levels of gray,
   the pels are, themselves, dithered on an secondary matrix to smooth
   the spread to 256 distinct levels of gray. You get an 8 bit dump from
   a 6 bit dac. You're welcome, but I'd request credit please if you use it.
   The dither pattern is, unfortunately, intrusive in the lighter shades.
   I tried halftoning the halftone pel instead, but the results were lumpier
   than what I have here. Maybe someone has a good scatter dither that is
   adaptable to this use??}
</i></font><font color="#FF0000"><b>Var
   </b></font>x<font color="#000080">,</font>y<font color="#000080">,</font>pdq<font color="#000080">,</font>off<font color="#000080">,</font>linePos<font color="#000080">,</font>pass<font color="#000080">,</font>color<font color="#000080">,</font>color1<font color="#000080">,</font>color2<font color="#000080">,</font>i<font color="#000080">:</font>integer<font color="#000080">;
   </font>OutByte<font color="#000080">,</font>acc<font color="#000080">,</font>cmod<font color="#000080">,</font>pel<font color="#000080">:</font>byte<font color="#000080">;
   </font>linepix<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">639</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
   </font>outline<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">255</font><font color="#000080">];
   </font>gray<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">]</font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;

</font><font color="#FF0000"><b>const
   </b></font>yrange<font color="#000080">=</font><font color="#800000">479</font><font color="#000080">;
   </font>xhalftone<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">287</font><font color="#000080">]</font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">=(
      </font><font color="#800000">35</font><font color="#000080">, </font><font color="#800000">39</font><font color="#000080">, </font><font color="#800000">54</font><font color="#000080">, </font><font color="#800000">62</font><font color="#000080">,</font><font color="#800000">159</font><font color="#000080">,</font><font color="#800000">155</font><font color="#000080">,</font><font color="#800000">105</font><font color="#000080">, </font><font color="#800000">98</font><font color="#000080">, </font><font color="#800000">99</font><font color="#000080">,</font><font color="#800000">103</font><font color="#000080">,</font><font color="#800000">118</font><font color="#000080">,</font><font color="#800000">126</font><font color="#000080">,</font><font color="#800000">223</font><font color="#000080">,</font><font color="#800000">219</font><font color="#000080">, </font><font color="#800000">41</font><font color="#000080">, </font><font color="#800000">34</font><font color="#000080">, </font><font color="#800000">35</font><font color="#000080">, </font><font color="#800000">39</font><font color="#000080">,
      </font><font color="#800000">42</font><font color="#000080">, </font><font color="#800000">46</font><font color="#000080">, </font><font color="#800000">50</font><font color="#000080">, </font><font color="#800000">58</font><font color="#000080">,</font><font color="#800000">151</font><font color="#000080">,</font><font color="#800000">147</font><font color="#000080">,</font><font color="#800000">109</font><font color="#000080">,</font><font color="#800000">102</font><font color="#000080">,</font><font color="#800000">106</font><font color="#000080">,</font><font color="#800000">110</font><font color="#000080">,</font><font color="#800000">114</font><font color="#000080">,</font><font color="#800000">122</font><font color="#000080">,</font><font color="#800000">215</font><font color="#000080">,</font><font color="#800000">211</font><font color="#000080">, </font><font color="#800000">45</font><font color="#000080">, </font><font color="#800000">38</font><font color="#000080">, </font><font color="#800000">42</font><font color="#000080">, </font><font color="#800000">46</font><font color="#000080">,
     </font><font color="#800000">156</font><font color="#000080">,</font><font color="#800000">148</font><font color="#000080">,</font><font color="#800000">144</font><font color="#000080">,</font><font color="#800000">140</font><font color="#000080">,</font><font color="#800000">136</font><font color="#000080">,</font><font color="#800000">143</font><font color="#000080">,</font><font color="#800000">113</font><font color="#000080">,</font><font color="#800000">117</font><font color="#000080">,</font><font color="#800000">220</font><font color="#000080">,</font><font color="#800000">212</font><font color="#000080">,</font><font color="#800000">208</font><font color="#000080">,</font><font color="#800000">204</font><font color="#000080">,</font><font color="#800000">200</font><font color="#000080">,</font><font color="#800000">207</font><font color="#000080">, </font><font color="#800000">49</font><font color="#000080">, </font><font color="#800000">53</font><font color="#000080">,</font><font color="#800000">156</font><font color="#000080">,</font><font color="#800000">148</font><font color="#000080">,
     </font><font color="#800000">159</font><font color="#000080">,</font><font color="#800000">152</font><font color="#000080">,</font><font color="#800000">133</font><font color="#000080">,</font><font color="#800000">129</font><font color="#000080">,</font><font color="#800000">132</font><font color="#000080">,</font><font color="#800000">139</font><font color="#000080">,</font><font color="#800000">121</font><font color="#000080">,</font><font color="#800000">125</font><font color="#000080">,</font><font color="#800000">223</font><font color="#000080">,</font><font color="#800000">216</font><font color="#000080">,</font><font color="#800000">197</font><font color="#000080">,</font><font color="#800000">193</font><font color="#000080">,</font><font color="#800000">196</font><font color="#000080">,</font><font color="#800000">203</font><font color="#000080">, </font><font color="#800000">57</font><font color="#000080">, </font><font color="#800000">61</font><font color="#000080">,</font><font color="#800000">159</font><font color="#000080">,</font><font color="#800000">152</font><font color="#000080">,
      </font><font color="#800000">95</font><font color="#000080">, </font><font color="#800000">91</font><font color="#000080">,</font><font color="#800000">137</font><font color="#000080">,</font><font color="#800000">130</font><font color="#000080">,</font><font color="#800000">131</font><font color="#000080">,</font><font color="#800000">135</font><font color="#000080">,</font><font color="#800000">150</font><font color="#000080">,</font><font color="#800000">158</font><font color="#000080">, </font><font color="#800000">31</font><font color="#000080">, </font><font color="#800000">27</font><font color="#000080">,</font><font color="#800000">201</font><font color="#000080">,</font><font color="#800000">194</font><font color="#000080">,</font><font color="#800000">195</font><font color="#000080">,</font><font color="#800000">199</font><font color="#000080">,</font><font color="#800000">214</font><font color="#000080">,</font><font color="#800000">222</font><font color="#000080">, </font><font color="#800000">95</font><font color="#000080">, </font><font color="#800000">91</font><font color="#000080">,
      </font><font color="#800000">87</font><font color="#000080">, </font><font color="#800000">83</font><font color="#000080">,</font><font color="#800000">141</font><font color="#000080">,</font><font color="#800000">134</font><font color="#000080">,</font><font color="#800000">138</font><font color="#000080">,</font><font color="#800000">142</font><font color="#000080">,</font><font color="#800000">146</font><font color="#000080">,</font><font color="#800000">154</font><font color="#000080">, </font><font color="#800000">23</font><font color="#000080">, </font><font color="#800000">19</font><font color="#000080">,</font><font color="#800000">205</font><font color="#000080">,</font><font color="#800000">198</font><font color="#000080">,</font><font color="#800000">202</font><font color="#000080">,</font><font color="#800000">206</font><font color="#000080">,</font><font color="#800000">210</font><font color="#000080">,</font><font color="#800000">218</font><font color="#000080">, </font><font color="#800000">87</font><font color="#000080">, </font><font color="#800000">83</font><font color="#000080">,
      </font><font color="#800000">72</font><font color="#000080">, </font><font color="#800000">79</font><font color="#000080">,</font><font color="#800000">145</font><font color="#000080">,</font><font color="#800000">149</font><font color="#000080">, </font><font color="#800000">28</font><font color="#000080">, </font><font color="#800000">20</font><font color="#000080">, </font><font color="#800000">16</font><font color="#000080">, </font><font color="#800000">12</font><font color="#000080">,  </font><font color="#800000">8</font><font color="#000080">, </font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">209</font><font color="#000080">,</font><font color="#800000">213</font><font color="#000080">, </font><font color="#800000">92</font><font color="#000080">, </font><font color="#800000">84</font><font color="#000080">, </font><font color="#800000">80</font><font color="#000080">, </font><font color="#800000">76</font><font color="#000080">, </font><font color="#800000">72</font><font color="#000080">, </font><font color="#800000">79</font><font color="#000080">,
      </font><font color="#800000">68</font><font color="#000080">, </font><font color="#800000">75</font><font color="#000080">,</font><font color="#800000">153</font><font color="#000080">,</font><font color="#800000">157</font><font color="#000080">, </font><font color="#800000">31</font><font color="#000080">, </font><font color="#800000">24</font><font color="#000080">,  </font><font color="#800000">5</font><font color="#000080">,  </font><font color="#800000">1</font><font color="#000080">,  </font><font color="#800000">4</font><font color="#000080">, </font><font color="#800000">11</font><font color="#000080">,</font><font color="#800000">217</font><font color="#000080">,</font><font color="#800000">221</font><font color="#000080">, </font><font color="#800000">95</font><font color="#000080">, </font><font color="#800000">88</font><font color="#000080">, </font><font color="#800000">69</font><font color="#000080">, </font><font color="#800000">65</font><font color="#000080">, </font><font color="#800000">68</font><font color="#000080">, </font><font color="#800000">75</font><font color="#000080">,
      </font><font color="#800000">67</font><font color="#000080">, </font><font color="#800000">71</font><font color="#000080">, </font><font color="#800000">86</font><font color="#000080">, </font><font color="#800000">94</font><font color="#000080">,</font><font color="#800000">255</font><font color="#000080">,</font><font color="#800000">251</font><font color="#000080">,  </font><font color="#800000">9</font><font color="#000080">,  </font><font color="#800000">2</font><font color="#000080">,  </font><font color="#800000">3</font><font color="#000080">,  </font><font color="#800000">7</font><font color="#000080">, </font><font color="#800000">22</font><font color="#000080">, </font><font color="#800000">30</font><font color="#000080">,</font><font color="#800000">191</font><font color="#000080">,</font><font color="#800000">187</font><font color="#000080">, </font><font color="#800000">73</font><font color="#000080">, </font><font color="#800000">66</font><font color="#000080">, </font><font color="#800000">67</font><font color="#000080">, </font><font color="#800000">71</font><font color="#000080">,
      </font><font color="#800000">74</font><font color="#000080">, </font><font color="#800000">78</font><font color="#000080">, </font><font color="#800000">82</font><font color="#000080">, </font><font color="#800000">90</font><font color="#000080">,</font><font color="#800000">247</font><font color="#000080">,</font><font color="#800000">243</font><font color="#000080">, </font><font color="#800000">13</font><font color="#000080">,  </font><font color="#800000">6</font><font color="#000080">, </font><font color="#800000">10</font><font color="#000080">, </font><font color="#800000">14</font><font color="#000080">, </font><font color="#800000">18</font><font color="#000080">, </font><font color="#800000">26</font><font color="#000080">,</font><font color="#800000">183</font><font color="#000080">,</font><font color="#800000">179</font><font color="#000080">, </font><font color="#800000">77</font><font color="#000080">, </font><font color="#800000">70</font><font color="#000080">, </font><font color="#800000">74</font><font color="#000080">, </font><font color="#800000">78</font><font color="#000080">,
     </font><font color="#800000">252</font><font color="#000080">,</font><font color="#800000">244</font><font color="#000080">,</font><font color="#800000">240</font><font color="#000080">,</font><font color="#800000">236</font><font color="#000080">,</font><font color="#800000">232</font><font color="#000080">,</font><font color="#800000">239</font><font color="#000080">, </font><font color="#800000">17</font><font color="#000080">, </font><font color="#800000">21</font><font color="#000080">,</font><font color="#800000">188</font><font color="#000080">,</font><font color="#800000">180</font><font color="#000080">,</font><font color="#800000">176</font><font color="#000080">,</font><font color="#800000">172</font><font color="#000080">,</font><font color="#800000">168</font><font color="#000080">,</font><font color="#800000">175</font><font color="#000080">, </font><font color="#800000">81</font><font color="#000080">, </font><font color="#800000">85</font><font color="#000080">,</font><font color="#800000">252</font><font color="#000080">,</font><font color="#800000">244</font><font color="#000080">,
     </font><font color="#800000">255</font><font color="#000080">,</font><font color="#800000">248</font><font color="#000080">,</font><font color="#800000">229</font><font color="#000080">,</font><font color="#800000">225</font><font color="#000080">,</font><font color="#800000">228</font><font color="#000080">,</font><font color="#800000">235</font><font color="#000080">, </font><font color="#800000">25</font><font color="#000080">, </font><font color="#800000">29</font><font color="#000080">,</font><font color="#800000">191</font><font color="#000080">,</font><font color="#800000">184</font><font color="#000080">,</font><font color="#800000">165</font><font color="#000080">,</font><font color="#800000">161</font><font color="#000080">,</font><font color="#800000">164</font><font color="#000080">,</font><font color="#800000">171</font><font color="#000080">, </font><font color="#800000">89</font><font color="#000080">, </font><font color="#800000">93</font><font color="#000080">,</font><font color="#800000">255</font><font color="#000080">,</font><font color="#800000">248</font><font color="#000080">,
      </font><font color="#800000">63</font><font color="#000080">, </font><font color="#800000">59</font><font color="#000080">,</font><font color="#800000">233</font><font color="#000080">,</font><font color="#800000">226</font><font color="#000080">,</font><font color="#800000">227</font><font color="#000080">,</font><font color="#800000">231</font><font color="#000080">,</font><font color="#800000">246</font><font color="#000080">,</font><font color="#800000">254</font><font color="#000080">,</font><font color="#800000">127</font><font color="#000080">,</font><font color="#800000">123</font><font color="#000080">,</font><font color="#800000">169</font><font color="#000080">,</font><font color="#800000">162</font><font color="#000080">,</font><font color="#800000">163</font><font color="#000080">,</font><font color="#800000">167</font><font color="#000080">,</font><font color="#800000">182</font><font color="#000080">,</font><font color="#800000">190</font><font color="#000080">, </font><font color="#800000">63</font><font color="#000080">, </font><font color="#800000">59</font><font color="#000080">,
      </font><font color="#800000">55</font><font color="#000080">, </font><font color="#800000">51</font><font color="#000080">,</font><font color="#800000">237</font><font color="#000080">,</font><font color="#800000">230</font><font color="#000080">,</font><font color="#800000">234</font><font color="#000080">,</font><font color="#800000">238</font><font color="#000080">,</font><font color="#800000">242</font><font color="#000080">,</font><font color="#800000">250</font><font color="#000080">,</font><font color="#800000">119</font><font color="#000080">,</font><font color="#800000">115</font><font color="#000080">,</font><font color="#800000">173</font><font color="#000080">,</font><font color="#800000">166</font><font color="#000080">,</font><font color="#800000">170</font><font color="#000080">,</font><font color="#800000">174</font><font color="#000080">,</font><font color="#800000">178</font><font color="#000080">,</font><font color="#800000">186</font><font color="#000080">, </font><font color="#800000">55</font><font color="#000080">, </font><font color="#800000">51</font><font color="#000080">,
      </font><font color="#800000">40</font><font color="#000080">, </font><font color="#800000">47</font><font color="#000080">,</font><font color="#800000">241</font><font color="#000080">,</font><font color="#800000">245</font><font color="#000080">,</font><font color="#800000">124</font><font color="#000080">,</font><font color="#800000">116</font><font color="#000080">,</font><font color="#800000">112</font><font color="#000080">,</font><font color="#800000">108</font><font color="#000080">,</font><font color="#800000">104</font><font color="#000080">,</font><font color="#800000">111</font><font color="#000080">,</font><font color="#800000">177</font><font color="#000080">,</font><font color="#800000">181</font><font color="#000080">, </font><font color="#800000">60</font><font color="#000080">, </font><font color="#800000">52</font><font color="#000080">, </font><font color="#800000">48</font><font color="#000080">, </font><font color="#800000">44</font><font color="#000080">, </font><font color="#800000">40</font><font color="#000080">, </font><font color="#800000">47</font><font color="#000080">,
      </font><font color="#800000">36</font><font color="#000080">, </font><font color="#800000">43</font><font color="#000080">,</font><font color="#800000">249</font><font color="#000080">,</font><font color="#800000">253</font><font color="#000080">,</font><font color="#800000">127</font><font color="#000080">,</font><font color="#800000">120</font><font color="#000080">,</font><font color="#800000">101</font><font color="#000080">, </font><font color="#800000">97</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">107</font><font color="#000080">,</font><font color="#800000">185</font><font color="#000080">,</font><font color="#800000">189</font><font color="#000080">, </font><font color="#800000">63</font><font color="#000080">, </font><font color="#800000">56</font><font color="#000080">, </font><font color="#800000">37</font><font color="#000080">, </font><font color="#800000">33</font><font color="#000080">, </font><font color="#800000">36</font><font color="#000080">, </font><font color="#800000">43</font><font color="#000080">);

   </font><font color="#FF0000"><b>procedure </b></font>graysum<font color="#000080">;
   </font><font color="#FF0000"><b>var </b></font>r<font color="#000080">,</font>g<font color="#000080">,</font>b<font color="#000080">:</font>byte<font color="#000080">;
       </font>c<font color="#000080">:</font>word<font color="#000080">;
       </font>i<font color="#000080">:</font>integer<font color="#000080">;
   </font><font color="#FF0000"><b>begin
      for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do
      begin
         </b></font>c<font color="#000080">:=</font>i<font color="#000080">;
         </font><font color="#FF0000"><b>asm             </b></font><font color="#008000"><i>{get rgb values for this color}
           </i></font><font color="#FF00FF">mov ah,$10;
           mov al,$15;
           mov bx,c;
           int $10;
           mov r,dh;
           mov g,ch;
           mov b,cl;
         </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
       </font><font color="#008000"><i>{stretch from six bit to eight bit gray scale for print dump}
         </i></font>gray<font color="#000080">[</font>i<font color="#000080">]:=</font><font color="#800000">255</font><font color="#000080">-(</font>round<font color="#000080">(</font>r<font color="#000080">*</font><font color="#800000">1.2</font><font color="#000080">)+</font>round<font color="#000080">(</font>g<font color="#000080">*</font><font color="#800000">2.36</font><font color="#000080">)+</font>round<font color="#000080">(</font>b<font color="#000080">*</font><font color="#800000">0.44</font><font color="#000080">)); </font><font color="#008000"><i>{&amp; invert}
   {      gray[i]:=255-i; }   {test stuff for gray fountain}
      </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Begin        </b></font><font color="#008000"><i>{LandscapeXlaser800x600x256}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'E'</font><font color="#000080">);
   </font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'&amp;l1O'</font><font color="#000080">);      </font><font color="#008000"><i>{landscape}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*r0F'</font><font color="#000080">);      </font><font color="#008000"><i>{no rotation}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*p50X'</font><font color="#000080">);   </font><font color="#008000"><i>{Set horizontal cursor start position}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*p50Y'</font><font color="#000080">);   </font><font color="#008000"><i>{set vertical cursor start position}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*t300R'</font><font color="#000080">);    </font><font color="#008000"><i>{raster graphics @300dpi}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*r1A'</font><font color="#000080">);      </font><font color="#008000"><i>{start graphics - current cursor}
   </i></font>graysum<font color="#000080">;
   </font><font color="#FF0000"><b>for </b></font>y<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>yrange <font color="#FF0000"><b>do
    begin
       for </b></font>x<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">639 </font><font color="#FF0000"><b>do </b></font>linepix<font color="#000080">[</font>x<font color="#000080">]:=</font>gray<font color="#000080">[</font>getpix<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">)];
       </font><font color="#FF0000"><b>if </b></font>keypressed <font color="#FF0000"><b>then if </b></font>readkey <font color="#000080">=</font><font color="#800000">#27 </font><font color="#FF0000"><b>then
          begin
             </b></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*rB'</font><font color="#000080">);               </font><font color="#008000"><i>{end graphics}
             </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">#38</font><font color="#000080">,</font><font color="#800000">#108</font><font color="#000080">,</font><font color="#800000">#48</font><font color="#000080">,</font><font color="#800000">#72</font><font color="#000080">);    </font><font color="#008000"><i>{page feed}
             </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'E'</font><font color="#000080">);                 </font><font color="#008000"><i>{reset printer}
             </i></font>exit<font color="#000080">;
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
       </font><font color="#FF0000"><b>for </b></font>pass<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">3 </font><font color="#FF0000"><b>do  </b></font><font color="#008000"><i>{pixel is 4 dots deep at 300 dpi}
       </i></font><font color="#FF0000"><b>begin
          </b></font>off <font color="#000080">:=((</font>y<font color="#000080">*</font><font color="#800000">4</font><font color="#000080">+</font>pass<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">16</font><font color="#000080">)*</font><font color="#800000">18</font><font color="#000080">; </font><font color="#008000"><i>{y index into halftone pel}
          </i></font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">4 </font><font color="#FF0000"><b>do </b></font>putpix<font color="#000080">(</font>i<font color="#000080">,</font>y<font color="#000080">,</font>pass<font color="#000080">);   </font><font color="#008000"><i>{visual progress report}
          </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*b320W'</font><font color="#000080">); </font><font color="#008000"><i>{inform printer, graphics coming}
          </i></font>x<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
          </font>linepos<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;
          </font>outbyte<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
          </font>acc<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
          </font><font color="#FF0000"><b>while </b></font>x<font color="#000080">&lt;</font><font color="#800000">640 </font><font color="#FF0000"><b>do
          begin
             </b></font>color<font color="#000080">:=</font>linepix<font color="#000080">[</font>x<font color="#000080">];
             </font>pdq<font color="#000080">:=</font>off<font color="#000080">+((</font>x <font color="#FF0000"><b>mod </b></font><font color="#800000">4</font><font color="#000080">)*</font><font color="#800000">4</font><font color="#000080">);  </font><font color="#008000"><i>{+ x offset}

      {convert to halftone}
             </i></font>color1<font color="#000080">:=</font>color <font color="#FF0000"><b>div </b></font><font color="#800000">8</font><font color="#000080">;
             </font>cmod<font color="#000080">:=</font>color <font color="#FF0000"><b>mod </b></font><font color="#800000">8</font><font color="#000080">;
             </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">3 </font><font color="#FF0000"><b>do             </b></font><font color="#008000"><i>{pixel is 4 dots wide}
             </i></font><font color="#FF0000"><b>begin
                </b></font>outbyte<font color="#000080">:=</font>outbyte <font color="#FF0000"><b>shl </b></font><font color="#800000">1</font><font color="#000080">;
                </font>color2<font color="#000080">:=</font>color1<font color="#000080">;
                </font>pel<font color="#000080">:=</font>xhalftone<font color="#000080">[</font>pdq<font color="#000080">+</font>i<font color="#000080">];
                </font><font color="#FF0000"><b>if </b></font>cmod<font color="#000080">&lt;</font>succ<font color="#000080">((</font>pel <font color="#FF0000"><b>and </b></font><font color="#800000">224</font><font color="#000080">)</font><font color="#FF0000"><b>shr </b></font><font color="#800000">5</font><font color="#000080">) </font><font color="#FF0000"><b>then
                   if </b></font>color2<font color="#000080">&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>dec<font color="#000080">(</font>color2<font color="#000080">);
                </font><font color="#FF0000"><b>if </b></font>color2<font color="#000080">&gt;=(</font>pel <font color="#FF0000"><b>and </b></font><font color="#800000">31</font><font color="#000080">)</font><font color="#FF0000"><b>then </b></font>outbyte<font color="#000080">:=</font>outbyte <font color="#FF0000"><b>or </b></font><font color="#800000">1</font><font color="#000080">;
                </font>inc<font color="#000080">(</font>acc<font color="#000080">);
                </font><font color="#FF0000"><b>if </b></font>acc<font color="#000080">&gt;</font><font color="#800000">7 </font><font color="#FF0000"><b>then
                begin
                   </b></font>outline<font color="#000080">[</font>linepos<font color="#000080">]:=</font>chr<font color="#000080">(</font>outbyte<font color="#000080">);
                   </font>inc<font color="#000080">(</font>linepos<font color="#000080">);
                   </font>acc<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">; </font>outbyte<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
                   </font><font color="#FF0000"><b>if </b></font>linepos<font color="#000080">&gt;</font><font color="#800000">255 </font><font color="#FF0000"><b>then
                   begin
                      </b></font>outline<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]:=</font>chr<font color="#000080">(</font><font color="#800000">255</font><font color="#000080">);
                      </font>write<font color="#000080">(</font>lst<font color="#000080">,</font>outline<font color="#000080">);
                      </font>linepos<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;
                   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
                </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
             </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{for i  - pixel width}
             </i></font>inc<font color="#000080">(</font>x<font color="#000080">);
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{while x&lt;640}
          </i></font>outline<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]:=</font>chr<font color="#000080">(</font>linepos<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">);
          </font>write<font color="#000080">(</font>lst<font color="#000080">,</font>outline<font color="#000080">);
       </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{pass}
   </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{for y}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*rB'</font><font color="#000080">);               </font><font color="#008000"><i>{end graphics}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">#38</font><font color="#000080">,</font><font color="#800000">#108</font><font color="#000080">,</font><font color="#800000">#48</font><font color="#000080">,</font><font color="#800000">#72</font><font color="#000080">);    </font><font color="#008000"><i>{page feed}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'E'</font><font color="#000080">);                 </font><font color="#008000"><i>{reset printer}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{Xlaser640x480x256}


</i></font><font color="#FF0000"><b>Function </b></font>SetMode<font color="#000080">(</font>mode<font color="#000080">: </font>word<font color="#000080">): </font>boolean<font color="#000080">; </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">; </font><font color="#008000"><i>{borrowed for demo}
{ This function will work for more than just VESA modes, and more than  }
{ Just VESA cards also.  If it's under $100 (where vesa modes begin) it }
{ will use the normal video bios instead. So people without VESA cards/ }
{ drivers still can use this for 320x200x256, etc.                      }
</i></font><font color="#FF0000"><b>asm
  </b></font><font color="#008000"><i>{ Comment this part out if you want to use vesa for this }
  {--}
  </i></font><font color="#FF00FF">Cmp Mode, 100h
  Jb  @Normal_VGA </font><font color="#008000"><i>{ If it's below 100h then it's a std mode, why use VESA? }
  {--}
  </i></font><font color="#FF00FF">Mov Ax, 4F02h   </font><font color="#008000"><i>{ VESA set modes }
  </i></font><font color="#FF00FF">Mov Bx, mode
  Int 10h
  Cmp Ax, 004Fh   </font><font color="#008000"><i>{ AL=4F VESA supported, AH=00 successful }
  </i></font><font color="#FF00FF">Jne @Error      </font><font color="#008000"><i>{ Else Error }
  </i></font><font color="#FF00FF">mov al, true
  jmp @done
 @Error:
  mov al, false
  Jmp @done
 @Normal_VGA:
  mov ax, mode    </font><font color="#008000"><i>{ AH will of course be zero, as intended }
  </i></font><font color="#FF00FF">int 10h
  Mov al, true
 @done:
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;



</font><font color="#FF0000"><b>Procedure </b></font>Circle<font color="#000080">(</font>X<font color="#000080">,</font>Y<font color="#000080">,</font>size<font color="#000080">: </font>longint<font color="#000080">; </font>color<font color="#000080">: </font>byte<font color="#000080">);  </font><font color="#008000"><i>{borrowed for demo}
</i></font><font color="#FF0000"><b>Var </b></font>Xl<font color="#000080">,</font>Yl <font color="#000080">: </font>LongInt<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  If </b></font>Size<font color="#000080">=</font><font color="#800000">0 </font><font color="#FF0000"><b>Then Begin
    </b></font>PutPix<font color="#000080">(</font>X<font color="#000080">,</font>Y<font color="#000080">,</font>color<font color="#000080">);
    </font>Exit<font color="#000080">;
  </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font>Xl <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>Yl <font color="#000080">:= </font>Size<font color="#000080">;
  </font>Size <font color="#000080">:= </font>Size<font color="#000080">*</font>Size<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">;
  </font><font color="#FF0000"><b>Repeat
    </b></font>PutPix<font color="#000080">(</font>X<font color="#000080">+</font>Xl<font color="#000080">,</font>Y<font color="#000080">+</font>Yl<font color="#000080">,</font>color<font color="#000080">);
    </font>PutPix<font color="#000080">(</font>X<font color="#000080">-</font>Xl<font color="#000080">,</font>Y<font color="#000080">+</font>Yl<font color="#000080">,</font>color<font color="#000080">);
    </font>PutPix<font color="#000080">(</font>X<font color="#000080">+</font>Xl<font color="#000080">,</font>Y<font color="#000080">-</font>Yl<font color="#000080">,</font>color<font color="#000080">);
    </font>PutPix<font color="#000080">(</font>X<font color="#000080">-</font>Xl<font color="#000080">,</font>Y<font color="#000080">-</font>Yl<font color="#000080">,</font>color<font color="#000080">);
    </font><font color="#FF0000"><b>If </b></font>Xl<font color="#000080">*</font>Xl<font color="#000080">+</font>Yl<font color="#000080">*</font>Yl <font color="#000080">&gt;= </font>Size <font color="#FF0000"><b>Then </b></font>Dec<font color="#000080">(</font>Yl<font color="#000080">)
    </font><font color="#FF0000"><b>Else </b></font>Inc<font color="#000080">(</font>Xl<font color="#000080">);
  </font><font color="#FF0000"><b>Until </b></font>Yl <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">;
  </font>PutPix<font color="#000080">(</font>X<font color="#000080">+</font>Xl<font color="#000080">,</font>Y<font color="#000080">+</font>Yl<font color="#000080">,</font>color<font color="#000080">);
  </font>PutPix<font color="#000080">(</font>X<font color="#000080">-</font>Xl<font color="#000080">,</font>Y<font color="#000080">+</font>Yl<font color="#000080">,</font>color<font color="#000080">);
  </font>PutPix<font color="#000080">(</font>X<font color="#000080">+</font>Xl<font color="#000080">,</font>Y<font color="#000080">-</font>Yl<font color="#000080">,</font>color<font color="#000080">);
  </font>PutPix<font color="#000080">(</font>X<font color="#000080">-</font>Xl<font color="#000080">,</font>Y<font color="#000080">-</font>Yl<font color="#000080">,</font>color<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;






</font><font color="#FF0000"><b>begin
   </b></font>xmax <font color="#000080">:= </font><font color="#800000">640</font><font color="#000080">;
   </font>ymax <font color="#000080">:= </font><font color="#800000">480</font><font color="#000080">;
   </font>setmode<font color="#000080">(</font><font color="#800000">$101</font><font color="#000080">);     </font><font color="#008000"><i>{640x480x256 VESA}
   </i></font>current_bank<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;  </font>pp<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;

                     </font><font color="#008000"><i>{dither test stuff}
 </i></font><font color="#FF0000"><b>for </b></font>y<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">479 </font><font color="#FF0000"><b>do for </b></font>x<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">639 </font><font color="#FF0000"><b>do </b></font>putpix<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>x <font color="#FF0000"><b>mod </b></font><font color="#800000">256</font><font color="#000080">);
 </font><font color="#FF0000"><b>for </b></font>y<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">236 </font><font color="#FF0000"><b>do </b></font>circle<font color="#000080">(</font><font color="#800000">320</font><font color="#000080">,</font><font color="#800000">240</font><font color="#000080">,</font>y<font color="#000080">,</font>y <font color="#FF0000"><b>mod </b></font><font color="#800000">256</font><font color="#000080">);
</font><font color="#008000"><i>(*
 for y:=0 to 59 do         {gray fountain}
 begin
    for x:=0 to 639 do
    begin
       putpix(x,y,x div 32);
       putpix(x,60+y,32+x div 32);
       putpix(x,120+y,64+(x div 32));
       putpix(x,180+y,96+(x div 32));
       putpix(x,240+y,128+(x div 32));
       putpix(x,300+y,160+(x div 32));
       putpix(x,360+y,192+(x div 32));
       putpix(x,420+y,224+(x div 32));
    end;
 end;
 for y:=465 to 479 do for x:=0 to 639 do putpix(x,y,round(x/2.5));
 *)
 </i></font>xlaser640x480x256<font color="#000080">;    </font><font color="#008000"><i>{dump}
 </i></font>setmode<font color="#000080">(</font>lastmode<font color="#000080">);    </font><font color="#008000"><i>{Miller time}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font><font color="#008000"><i>{   EXAMPLE #3 }
{ ----------------------------   CUT  ------------------------- }

{ MUST have VESA driver in memory to work }

</i></font><font color="#FF0000"><b>uses </b></font>printer<font color="#000080">,</font>crt<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>x<font color="#000080">,</font>y<font color="#000080">:</font>integer<font color="#000080">;
   </font>xmax<font color="#000080">,</font>ymax<font color="#000080">:</font>word<font color="#000080">;
   </font>Current_bank<font color="#000080">: </font>byte<font color="#000080">;
   </font>Pp<font color="#000080">: </font>byte<font color="#000080">;


</font><font color="#FF0000"><b>Procedure </b></font>PutPix<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">: </font>word<font color="#000080">; </font>c<font color="#000080">: </font>byte<font color="#000080">); </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm
  </b></font><font color="#008000"><i>{ Do some simple checking }
  </i></font><font color="#FF00FF">mov  ax, x
  cmp  xmax,ax
  jb   @</font><font color="#FF0000"><b>end          </b></font><font color="#008000"><i>{x too big}

  </i></font>mov  ax<font color="#000080">, </font>y
  cmp  ymax<font color="#000080">, </font>ax
  jb   <font color="#000080">@</font><font color="#FF0000"><b>end          </b></font><font color="#008000"><i>{y too big}

 { dec  x}

  { Calculate where we're going to place the pixel at A000:???? }
  </i></font>mov ax<font color="#000080">,</font><font color="#800000">$a000
  </font>Mov  ES<font color="#000080">, </font>ax
  Mov  AX<font color="#000080">, </font>Ymax
  Mul  pp            <font color="#008000"><i>{page offset?}
  </i></font>Add  Ax<font color="#000080">, </font>Y
  Mov  Bx<font color="#000080">, </font>Ax
  Mov  Ax<font color="#000080">, </font>Xmax
  Mul  Bx
  Add  Ax<font color="#000080">, </font>X
  Adc  Dx<font color="#000080">, </font><font color="#800000">0
  </font>Mov  Di<font color="#000080">, </font>Ax
  Cmp  Dl<font color="#000080">, </font>Current_bank
  <font color="#008000"><i>{ If we're at the bank we need to be, then skip it }
  </i></font>Je   <font color="#000080">@</font>skip
  <font color="#008000"><i>{ Set the video bank to what we need }
  </i></font>Mov  Current_bank<font color="#000080">, </font>Dl
  Mov  Ax<font color="#000080">, </font><font color="#800000">4</font>F05h
  <font color="#FF0000"><b>Xor  </b></font>Bx<font color="#000080">, </font>Bx
  Int  <font color="#800000">10</font>h

 <font color="#000080">@</font>Skip<font color="#000080">:
  </font>Mov  Al<font color="#000080">, </font>C
  Mov  Es<font color="#000080">:[</font>Di<font color="#000080">], </font>Al
 <font color="#000080">@</font><font color="#FF0000"><b>End</b></font><font color="#000080">:
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;


</font><font color="#FF0000"><b>function </b></font>GetPix<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">: </font>word<font color="#000080">):</font>byte<font color="#000080">; </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm
  </b></font><font color="#008000"><i>{ Do some simple checking }
  </i></font><font color="#FF00FF">mov  ax, x
  cmp  xmax,ax
  jb   @</font><font color="#FF0000"><b>end          </b></font><font color="#008000"><i>{x too big}

  </i></font>mov  ax<font color="#000080">, </font>y
  cmp  ymax<font color="#000080">, </font>ax
  jb   <font color="#000080">@</font><font color="#FF0000"><b>end          </b></font><font color="#008000"><i>{y too big}

{  dec  x}

  { Calculate where we're going to read the pixel at A000:???? }
  </i></font>mov ax<font color="#000080">,</font><font color="#800000">$a000
  </font>Mov  ES<font color="#000080">, </font>ax
  Mov  AX<font color="#000080">, </font>Ymax
  Mul  pp            <font color="#008000"><i>{page offset?}
  </i></font>Add  Ax<font color="#000080">, </font>Y
  Mov  Bx<font color="#000080">, </font>Ax
  Mov  Ax<font color="#000080">, </font>Xmax
  Mul  Bx
  Add  Ax<font color="#000080">, </font>X
  Adc  Dx<font color="#000080">, </font><font color="#800000">0
  </font>Mov  Di<font color="#000080">, </font>Ax
  Cmp  Dl<font color="#000080">, </font>Current_bank
  <font color="#008000"><i>{ If we're at the bank we need to be, then skip it }
  </i></font>Je   <font color="#000080">@</font>skip
  <font color="#008000"><i>{ Set the video bank to what we need }
  </i></font>Mov  Current_bank<font color="#000080">, </font>Dl
  Mov  Ax<font color="#000080">, </font><font color="#800000">4</font>F05h
  <font color="#FF0000"><b>Xor  </b></font>Bx<font color="#000080">, </font>Bx
  Int  <font color="#800000">10</font>h

 <font color="#000080">@</font>Skip<font color="#000080">:
  </font>Mov  al<font color="#000080">, </font>Es<font color="#000080">:[</font>Di<font color="#000080">]
 @</font><font color="#FF0000"><b>End</b></font><font color="#000080">:
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;



</font><font color="#FF0000"><b>Procedure </b></font>Xlaser800x600x256<font color="#000080">; </font><font color="#008000"><i>{vesa mode printer dump $102}
{Ron Nossaman May 1996   nossaman@southwind.net}
{ Each screen pixel in 800X600 graphics mode translates to a 4X4 printer
   pixel at 300 dpi. This routine maps X,Y screen coordinates into the
   halftone pel, determines the gray density level according to the
   rgb values of each palette entry, and sends the results to a LaserJet II
   compatible laser printer. Since the pel only has 32 levels of gray,
   the pels are, themselves, dithered on an secondary matrix to smooth
   the spread to 256 distinct levels of gray. You get an 8 bit dump from
   a 6 bit dac. You're welcome, but I'd request credit please if you use it.
   The dither pattern is, unfortunately, intrusive in the lighter shades.
   I tried halftoning the halftone pel instead, but the results were lumpier
   than what I have here. Maybe someone has a good scatter dither that is
   adaptable to this use??}
</i></font><font color="#FF0000"><b>Var
   </b></font>x<font color="#000080">,</font>y<font color="#000080">,</font>pdq<font color="#000080">,</font>off<font color="#000080">,</font>linePos<font color="#000080">,</font>pass<font color="#000080">,</font>color<font color="#000080">,</font>color1<font color="#000080">,</font>color2<font color="#000080">,</font>i<font color="#000080">:</font>integer<font color="#000080">;
   </font>OutByte<font color="#000080">,</font>acc<font color="#000080">,</font>cmod<font color="#000080">,</font>pel<font color="#000080">:</font>byte<font color="#000080">;
   </font>linepix<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">799</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
   </font>outline<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">255</font><font color="#000080">];
   </font>gray<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">]</font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;

</font><font color="#FF0000"><b>const
   </b></font>yrange<font color="#000080">=</font><font color="#800000">599</font><font color="#000080">;
   </font>xhalftone<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">287</font><font color="#000080">]</font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">=(
      </font><font color="#800000">35</font><font color="#000080">, </font><font color="#800000">39</font><font color="#000080">, </font><font color="#800000">54</font><font color="#000080">, </font><font color="#800000">62</font><font color="#000080">,</font><font color="#800000">159</font><font color="#000080">,</font><font color="#800000">155</font><font color="#000080">,</font><font color="#800000">105</font><font color="#000080">, </font><font color="#800000">98</font><font color="#000080">, </font><font color="#800000">99</font><font color="#000080">,</font><font color="#800000">103</font><font color="#000080">,</font><font color="#800000">118</font><font color="#000080">,</font><font color="#800000">126</font><font color="#000080">,</font><font color="#800000">223</font><font color="#000080">,</font><font color="#800000">219</font><font color="#000080">, </font><font color="#800000">41</font><font color="#000080">, </font><font color="#800000">34</font><font color="#000080">, </font><font color="#800000">35</font><font color="#000080">, </font><font color="#800000">39</font><font color="#000080">,
      </font><font color="#800000">42</font><font color="#000080">, </font><font color="#800000">46</font><font color="#000080">, </font><font color="#800000">50</font><font color="#000080">, </font><font color="#800000">58</font><font color="#000080">,</font><font color="#800000">151</font><font color="#000080">,</font><font color="#800000">147</font><font color="#000080">,</font><font color="#800000">109</font><font color="#000080">,</font><font color="#800000">102</font><font color="#000080">,</font><font color="#800000">106</font><font color="#000080">,</font><font color="#800000">110</font><font color="#000080">,</font><font color="#800000">114</font><font color="#000080">,</font><font color="#800000">122</font><font color="#000080">,</font><font color="#800000">215</font><font color="#000080">,</font><font color="#800000">211</font><font color="#000080">, </font><font color="#800000">45</font><font color="#000080">, </font><font color="#800000">38</font><font color="#000080">, </font><font color="#800000">42</font><font color="#000080">, </font><font color="#800000">46</font><font color="#000080">,
     </font><font color="#800000">156</font><font color="#000080">,</font><font color="#800000">148</font><font color="#000080">,</font><font color="#800000">144</font><font color="#000080">,</font><font color="#800000">140</font><font color="#000080">,</font><font color="#800000">136</font><font color="#000080">,</font><font color="#800000">143</font><font color="#000080">,</font><font color="#800000">113</font><font color="#000080">,</font><font color="#800000">117</font><font color="#000080">,</font><font color="#800000">220</font><font color="#000080">,</font><font color="#800000">212</font><font color="#000080">,</font><font color="#800000">208</font><font color="#000080">,</font><font color="#800000">204</font><font color="#000080">,</font><font color="#800000">200</font><font color="#000080">,</font><font color="#800000">207</font><font color="#000080">, </font><font color="#800000">49</font><font color="#000080">, </font><font color="#800000">53</font><font color="#000080">,</font><font color="#800000">156</font><font color="#000080">,</font><font color="#800000">148</font><font color="#000080">,
     </font><font color="#800000">159</font><font color="#000080">,</font><font color="#800000">152</font><font color="#000080">,</font><font color="#800000">133</font><font color="#000080">,</font><font color="#800000">129</font><font color="#000080">,</font><font color="#800000">132</font><font color="#000080">,</font><font color="#800000">139</font><font color="#000080">,</font><font color="#800000">121</font><font color="#000080">,</font><font color="#800000">125</font><font color="#000080">,</font><font color="#800000">223</font><font color="#000080">,</font><font color="#800000">216</font><font color="#000080">,</font><font color="#800000">197</font><font color="#000080">,</font><font color="#800000">193</font><font color="#000080">,</font><font color="#800000">196</font><font color="#000080">,</font><font color="#800000">203</font><font color="#000080">, </font><font color="#800000">57</font><font color="#000080">, </font><font color="#800000">61</font><font color="#000080">,</font><font color="#800000">159</font><font color="#000080">,</font><font color="#800000">152</font><font color="#000080">,
      </font><font color="#800000">95</font><font color="#000080">, </font><font color="#800000">91</font><font color="#000080">,</font><font color="#800000">137</font><font color="#000080">,</font><font color="#800000">130</font><font color="#000080">,</font><font color="#800000">131</font><font color="#000080">,</font><font color="#800000">135</font><font color="#000080">,</font><font color="#800000">150</font><font color="#000080">,</font><font color="#800000">158</font><font color="#000080">, </font><font color="#800000">31</font><font color="#000080">, </font><font color="#800000">27</font><font color="#000080">,</font><font color="#800000">201</font><font color="#000080">,</font><font color="#800000">194</font><font color="#000080">,</font><font color="#800000">195</font><font color="#000080">,</font><font color="#800000">199</font><font color="#000080">,</font><font color="#800000">214</font><font color="#000080">,</font><font color="#800000">222</font><font color="#000080">, </font><font color="#800000">95</font><font color="#000080">, </font><font color="#800000">91</font><font color="#000080">,
      </font><font color="#800000">87</font><font color="#000080">, </font><font color="#800000">83</font><font color="#000080">,</font><font color="#800000">141</font><font color="#000080">,</font><font color="#800000">134</font><font color="#000080">,</font><font color="#800000">138</font><font color="#000080">,</font><font color="#800000">142</font><font color="#000080">,</font><font color="#800000">146</font><font color="#000080">,</font><font color="#800000">154</font><font color="#000080">, </font><font color="#800000">23</font><font color="#000080">, </font><font color="#800000">19</font><font color="#000080">,</font><font color="#800000">205</font><font color="#000080">,</font><font color="#800000">198</font><font color="#000080">,</font><font color="#800000">202</font><font color="#000080">,</font><font color="#800000">206</font><font color="#000080">,</font><font color="#800000">210</font><font color="#000080">,</font><font color="#800000">218</font><font color="#000080">, </font><font color="#800000">87</font><font color="#000080">, </font><font color="#800000">83</font><font color="#000080">,
      </font><font color="#800000">72</font><font color="#000080">, </font><font color="#800000">79</font><font color="#000080">,</font><font color="#800000">145</font><font color="#000080">,</font><font color="#800000">149</font><font color="#000080">, </font><font color="#800000">28</font><font color="#000080">, </font><font color="#800000">20</font><font color="#000080">, </font><font color="#800000">16</font><font color="#000080">, </font><font color="#800000">12</font><font color="#000080">,  </font><font color="#800000">8</font><font color="#000080">, </font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">209</font><font color="#000080">,</font><font color="#800000">213</font><font color="#000080">, </font><font color="#800000">92</font><font color="#000080">, </font><font color="#800000">84</font><font color="#000080">, </font><font color="#800000">80</font><font color="#000080">, </font><font color="#800000">76</font><font color="#000080">, </font><font color="#800000">72</font><font color="#000080">, </font><font color="#800000">79</font><font color="#000080">,
      </font><font color="#800000">68</font><font color="#000080">, </font><font color="#800000">75</font><font color="#000080">,</font><font color="#800000">153</font><font color="#000080">,</font><font color="#800000">157</font><font color="#000080">, </font><font color="#800000">31</font><font color="#000080">, </font><font color="#800000">24</font><font color="#000080">,  </font><font color="#800000">5</font><font color="#000080">,  </font><font color="#800000">1</font><font color="#000080">,  </font><font color="#800000">4</font><font color="#000080">, </font><font color="#800000">11</font><font color="#000080">,</font><font color="#800000">217</font><font color="#000080">,</font><font color="#800000">221</font><font color="#000080">, </font><font color="#800000">95</font><font color="#000080">, </font><font color="#800000">88</font><font color="#000080">, </font><font color="#800000">69</font><font color="#000080">, </font><font color="#800000">65</font><font color="#000080">, </font><font color="#800000">68</font><font color="#000080">, </font><font color="#800000">75</font><font color="#000080">,
      </font><font color="#800000">67</font><font color="#000080">, </font><font color="#800000">71</font><font color="#000080">, </font><font color="#800000">86</font><font color="#000080">, </font><font color="#800000">94</font><font color="#000080">,</font><font color="#800000">255</font><font color="#000080">,</font><font color="#800000">251</font><font color="#000080">,  </font><font color="#800000">9</font><font color="#000080">,  </font><font color="#800000">2</font><font color="#000080">,  </font><font color="#800000">3</font><font color="#000080">,  </font><font color="#800000">7</font><font color="#000080">, </font><font color="#800000">22</font><font color="#000080">, </font><font color="#800000">30</font><font color="#000080">,</font><font color="#800000">191</font><font color="#000080">,</font><font color="#800000">187</font><font color="#000080">, </font><font color="#800000">73</font><font color="#000080">, </font><font color="#800000">66</font><font color="#000080">, </font><font color="#800000">67</font><font color="#000080">, </font><font color="#800000">71</font><font color="#000080">,
      </font><font color="#800000">74</font><font color="#000080">, </font><font color="#800000">78</font><font color="#000080">, </font><font color="#800000">82</font><font color="#000080">, </font><font color="#800000">90</font><font color="#000080">,</font><font color="#800000">247</font><font color="#000080">,</font><font color="#800000">243</font><font color="#000080">, </font><font color="#800000">13</font><font color="#000080">,  </font><font color="#800000">6</font><font color="#000080">, </font><font color="#800000">10</font><font color="#000080">, </font><font color="#800000">14</font><font color="#000080">, </font><font color="#800000">18</font><font color="#000080">, </font><font color="#800000">26</font><font color="#000080">,</font><font color="#800000">183</font><font color="#000080">,</font><font color="#800000">179</font><font color="#000080">, </font><font color="#800000">77</font><font color="#000080">, </font><font color="#800000">70</font><font color="#000080">, </font><font color="#800000">74</font><font color="#000080">, </font><font color="#800000">78</font><font color="#000080">,
     </font><font color="#800000">252</font><font color="#000080">,</font><font color="#800000">244</font><font color="#000080">,</font><font color="#800000">240</font><font color="#000080">,</font><font color="#800000">236</font><font color="#000080">,</font><font color="#800000">232</font><font color="#000080">,</font><font color="#800000">239</font><font color="#000080">, </font><font color="#800000">17</font><font color="#000080">, </font><font color="#800000">21</font><font color="#000080">,</font><font color="#800000">188</font><font color="#000080">,</font><font color="#800000">180</font><font color="#000080">,</font><font color="#800000">176</font><font color="#000080">,</font><font color="#800000">172</font><font color="#000080">,</font><font color="#800000">168</font><font color="#000080">,</font><font color="#800000">175</font><font color="#000080">, </font><font color="#800000">81</font><font color="#000080">, </font><font color="#800000">85</font><font color="#000080">,</font><font color="#800000">252</font><font color="#000080">,</font><font color="#800000">244</font><font color="#000080">,
     </font><font color="#800000">255</font><font color="#000080">,</font><font color="#800000">248</font><font color="#000080">,</font><font color="#800000">229</font><font color="#000080">,</font><font color="#800000">225</font><font color="#000080">,</font><font color="#800000">228</font><font color="#000080">,</font><font color="#800000">235</font><font color="#000080">, </font><font color="#800000">25</font><font color="#000080">, </font><font color="#800000">29</font><font color="#000080">,</font><font color="#800000">191</font><font color="#000080">,</font><font color="#800000">184</font><font color="#000080">,</font><font color="#800000">165</font><font color="#000080">,</font><font color="#800000">161</font><font color="#000080">,</font><font color="#800000">164</font><font color="#000080">,</font><font color="#800000">171</font><font color="#000080">, </font><font color="#800000">89</font><font color="#000080">, </font><font color="#800000">93</font><font color="#000080">,</font><font color="#800000">255</font><font color="#000080">,</font><font color="#800000">248</font><font color="#000080">,
      </font><font color="#800000">63</font><font color="#000080">, </font><font color="#800000">59</font><font color="#000080">,</font><font color="#800000">233</font><font color="#000080">,</font><font color="#800000">226</font><font color="#000080">,</font><font color="#800000">227</font><font color="#000080">,</font><font color="#800000">231</font><font color="#000080">,</font><font color="#800000">246</font><font color="#000080">,</font><font color="#800000">254</font><font color="#000080">,</font><font color="#800000">127</font><font color="#000080">,</font><font color="#800000">123</font><font color="#000080">,</font><font color="#800000">169</font><font color="#000080">,</font><font color="#800000">162</font><font color="#000080">,</font><font color="#800000">163</font><font color="#000080">,</font><font color="#800000">167</font><font color="#000080">,</font><font color="#800000">182</font><font color="#000080">,</font><font color="#800000">190</font><font color="#000080">, </font><font color="#800000">63</font><font color="#000080">, </font><font color="#800000">59</font><font color="#000080">,
      </font><font color="#800000">55</font><font color="#000080">, </font><font color="#800000">51</font><font color="#000080">,</font><font color="#800000">237</font><font color="#000080">,</font><font color="#800000">230</font><font color="#000080">,</font><font color="#800000">234</font><font color="#000080">,</font><font color="#800000">238</font><font color="#000080">,</font><font color="#800000">242</font><font color="#000080">,</font><font color="#800000">250</font><font color="#000080">,</font><font color="#800000">119</font><font color="#000080">,</font><font color="#800000">115</font><font color="#000080">,</font><font color="#800000">173</font><font color="#000080">,</font><font color="#800000">166</font><font color="#000080">,</font><font color="#800000">170</font><font color="#000080">,</font><font color="#800000">174</font><font color="#000080">,</font><font color="#800000">178</font><font color="#000080">,</font><font color="#800000">186</font><font color="#000080">, </font><font color="#800000">55</font><font color="#000080">, </font><font color="#800000">51</font><font color="#000080">,
      </font><font color="#800000">40</font><font color="#000080">, </font><font color="#800000">47</font><font color="#000080">,</font><font color="#800000">241</font><font color="#000080">,</font><font color="#800000">245</font><font color="#000080">,</font><font color="#800000">124</font><font color="#000080">,</font><font color="#800000">116</font><font color="#000080">,</font><font color="#800000">112</font><font color="#000080">,</font><font color="#800000">108</font><font color="#000080">,</font><font color="#800000">104</font><font color="#000080">,</font><font color="#800000">111</font><font color="#000080">,</font><font color="#800000">177</font><font color="#000080">,</font><font color="#800000">181</font><font color="#000080">, </font><font color="#800000">60</font><font color="#000080">, </font><font color="#800000">52</font><font color="#000080">, </font><font color="#800000">48</font><font color="#000080">, </font><font color="#800000">44</font><font color="#000080">, </font><font color="#800000">40</font><font color="#000080">, </font><font color="#800000">47</font><font color="#000080">,
      </font><font color="#800000">36</font><font color="#000080">, </font><font color="#800000">43</font><font color="#000080">,</font><font color="#800000">249</font><font color="#000080">,</font><font color="#800000">253</font><font color="#000080">,</font><font color="#800000">127</font><font color="#000080">,</font><font color="#800000">120</font><font color="#000080">,</font><font color="#800000">101</font><font color="#000080">, </font><font color="#800000">97</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">107</font><font color="#000080">,</font><font color="#800000">185</font><font color="#000080">,</font><font color="#800000">189</font><font color="#000080">, </font><font color="#800000">63</font><font color="#000080">, </font><font color="#800000">56</font><font color="#000080">, </font><font color="#800000">37</font><font color="#000080">, </font><font color="#800000">33</font><font color="#000080">, </font><font color="#800000">36</font><font color="#000080">, </font><font color="#800000">43</font><font color="#000080">);

   </font><font color="#FF0000"><b>procedure </b></font>graysum<font color="#000080">;
   </font><font color="#FF0000"><b>var </b></font>r<font color="#000080">,</font>g<font color="#000080">,</font>b<font color="#000080">:</font>byte<font color="#000080">;
       </font>c<font color="#000080">:</font>word<font color="#000080">;
       </font>i<font color="#000080">:</font>integer<font color="#000080">;
   </font><font color="#FF0000"><b>begin
      for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do
      begin
         </b></font>c<font color="#000080">:=</font>i<font color="#000080">;
         </font><font color="#FF0000"><b>asm             </b></font><font color="#008000"><i>{get rgb values for this color}
           </i></font><font color="#FF00FF">mov ah,$10;
           mov al,$15;
           mov bx,c;
           int $10;
           mov r,dh;
           mov g,ch;
           mov b,cl;
         </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
       </font><font color="#008000"><i>{stretch from six bit to eight bit gray scale for print dump}
         </i></font>gray<font color="#000080">[</font>i<font color="#000080">]:=</font><font color="#800000">255</font><font color="#000080">-(</font>round<font color="#000080">(</font>r<font color="#000080">*</font><font color="#800000">1.2</font><font color="#000080">)+</font>round<font color="#000080">(</font>g<font color="#000080">*</font><font color="#800000">2.36</font><font color="#000080">)+</font>round<font color="#000080">(</font>b<font color="#000080">*</font><font color="#800000">0.44</font><font color="#000080">)); </font><font color="#008000"><i>{&amp; invert}
   {      gray[i]:=255-i;}    {test stuff for gray fountain}
      </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Begin        </b></font><font color="#008000"><i>{LandscapeXlaser800x600x256}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'E'</font><font color="#000080">);
   </font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'&amp;l1O'</font><font color="#000080">);      </font><font color="#008000"><i>{landscape}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*r0F'</font><font color="#000080">);      </font><font color="#008000"><i>{no rotation}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*p-100X'</font><font color="#000080">);   </font><font color="#008000"><i>{Set horizontal cursor start position}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*p-100Y'</font><font color="#000080">);   </font><font color="#008000"><i>{set vertical cursor start position}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*t300R'</font><font color="#000080">);    </font><font color="#008000"><i>{raster graphics @300dpi}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*r1A'</font><font color="#000080">);      </font><font color="#008000"><i>{start graphics - current cursor}
   </i></font>graysum<font color="#000080">;
   </font><font color="#FF0000"><b>for </b></font>y<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>yrange <font color="#FF0000"><b>do
    begin
       for </b></font>x<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">799 </font><font color="#FF0000"><b>do </b></font>linepix<font color="#000080">[</font>x<font color="#000080">]:=</font>gray<font color="#000080">[</font>getpix<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">)];
       </font><font color="#FF0000"><b>if </b></font>keypressed <font color="#FF0000"><b>then if </b></font>readkey <font color="#000080">=</font><font color="#800000">#27 </font><font color="#FF0000"><b>then
          begin
             </b></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*rB'</font><font color="#000080">);               </font><font color="#008000"><i>{end graphics}
             </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">#38</font><font color="#000080">,</font><font color="#800000">#108</font><font color="#000080">,</font><font color="#800000">#48</font><font color="#000080">,</font><font color="#800000">#72</font><font color="#000080">);    </font><font color="#008000"><i>{page feed}
             </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'E'</font><font color="#000080">);                 </font><font color="#008000"><i>{reset printer}
             </i></font>exit<font color="#000080">;
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
       </font><font color="#FF0000"><b>for </b></font>pass<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">3 </font><font color="#FF0000"><b>do  </b></font><font color="#008000"><i>{pixel is 4 dots deep at 300 dpi}
       </i></font><font color="#FF0000"><b>begin
          </b></font>off <font color="#000080">:=((</font>y<font color="#000080">*</font><font color="#800000">4</font><font color="#000080">+</font>pass<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">16</font><font color="#000080">)*</font><font color="#800000">18</font><font color="#000080">; </font><font color="#008000"><i>{y index into halftone pel}
          </i></font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">4 </font><font color="#FF0000"><b>do </b></font>putpix<font color="#000080">(</font>i<font color="#000080">,</font>y<font color="#000080">,</font>pass<font color="#000080">);   </font><font color="#008000"><i>{visual progress report}
          </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*b400W'</font><font color="#000080">); </font><font color="#008000"><i>{inform printer, graphics coming}
          </i></font>x<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
          </font>linepos<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;
          </font>outbyte<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
          </font>acc<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
          </font><font color="#FF0000"><b>while </b></font>x<font color="#000080">&lt;</font><font color="#800000">800 </font><font color="#FF0000"><b>do
          begin
             </b></font>color<font color="#000080">:=</font>linepix<font color="#000080">[</font>x<font color="#000080">];
             </font>pdq<font color="#000080">:=</font>off<font color="#000080">+((</font>x <font color="#FF0000"><b>mod </b></font><font color="#800000">4</font><font color="#000080">)*</font><font color="#800000">4</font><font color="#000080">);  </font><font color="#008000"><i>{+ x offset}

      {convert to halftone}
             </i></font>color1<font color="#000080">:=</font>color <font color="#FF0000"><b>div </b></font><font color="#800000">8</font><font color="#000080">;
             </font>cmod<font color="#000080">:=</font>color <font color="#FF0000"><b>mod </b></font><font color="#800000">8</font><font color="#000080">;
             </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">3 </font><font color="#FF0000"><b>do             </b></font><font color="#008000"><i>{pixel is 4 dots wide}
             </i></font><font color="#FF0000"><b>begin
                </b></font>outbyte<font color="#000080">:=</font>outbyte <font color="#FF0000"><b>shl </b></font><font color="#800000">1</font><font color="#000080">;
                </font>color2<font color="#000080">:=</font>color1<font color="#000080">;
                </font>pel<font color="#000080">:=</font>xhalftone<font color="#000080">[</font>pdq<font color="#000080">+</font>i<font color="#000080">];
                </font><font color="#FF0000"><b>if </b></font>cmod<font color="#000080">&lt;</font>succ<font color="#000080">((</font>pel <font color="#FF0000"><b>and </b></font><font color="#800000">224</font><font color="#000080">)</font><font color="#FF0000"><b>shr </b></font><font color="#800000">5</font><font color="#000080">) </font><font color="#FF0000"><b>then
                   if </b></font>color2<font color="#000080">&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>dec<font color="#000080">(</font>color2<font color="#000080">);
                </font><font color="#FF0000"><b>if </b></font>color2<font color="#000080">&gt;=(</font>pel <font color="#FF0000"><b>and </b></font><font color="#800000">31</font><font color="#000080">)</font><font color="#FF0000"><b>then </b></font>outbyte<font color="#000080">:=</font>outbyte <font color="#FF0000"><b>or </b></font><font color="#800000">1</font><font color="#000080">;
                </font>inc<font color="#000080">(</font>acc<font color="#000080">);
                </font><font color="#FF0000"><b>if </b></font>acc<font color="#000080">&gt;</font><font color="#800000">7 </font><font color="#FF0000"><b>then
                begin
                   </b></font>outline<font color="#000080">[</font>linepos<font color="#000080">]:=</font>chr<font color="#000080">(</font>outbyte<font color="#000080">);
                   </font>inc<font color="#000080">(</font>linepos<font color="#000080">);
                   </font>acc<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">; </font>outbyte<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
                   </font><font color="#FF0000"><b>if </b></font>linepos<font color="#000080">&gt;</font><font color="#800000">255 </font><font color="#FF0000"><b>then
                   begin
                      </b></font>outline<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]:=</font>chr<font color="#000080">(</font><font color="#800000">255</font><font color="#000080">);
                      </font>write<font color="#000080">(</font>lst<font color="#000080">,</font>outline<font color="#000080">);
                      </font>linepos<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;
                   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
                </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
             </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{for i  - pixel width}
             </i></font>inc<font color="#000080">(</font>x<font color="#000080">);
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{while x&lt;799}
          </i></font>outline<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]:=</font>chr<font color="#000080">(</font>linepos<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">);
          </font>write<font color="#000080">(</font>lst<font color="#000080">,</font>outline<font color="#000080">);
       </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{pass}
   </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{for y}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*rB'</font><font color="#000080">);               </font><font color="#008000"><i>{end graphics}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">#38</font><font color="#000080">,</font><font color="#800000">#108</font><font color="#000080">,</font><font color="#800000">#48</font><font color="#000080">,</font><font color="#800000">#72</font><font color="#000080">);    </font><font color="#008000"><i>{page feed}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'E'</font><font color="#000080">);                 </font><font color="#008000"><i>{reset printer}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{Xlaser800x600x256}


</i></font><font color="#FF0000"><b>Function </b></font>SetMode<font color="#000080">(</font>mode<font color="#000080">: </font>word<font color="#000080">): </font>boolean<font color="#000080">; </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">; </font><font color="#008000"><i>{borrowed for demo}
{ This function will work for more than just VESA modes, and more than  }
{ Just VESA cards also.  If it's under $100 (where vesa modes begin) it }
{ will use the normal video bios instead. So people without VESA cards/ }
{ drivers still can use this for 320x200x256, etc.                      }
</i></font><font color="#FF0000"><b>asm
  </b></font><font color="#008000"><i>{ Comment this part out if you want to use vesa for this }
  {--}
  </i></font><font color="#FF00FF">Cmp Mode, 100h
  Jb  @Normal_VGA </font><font color="#008000"><i>{ If it's below 100h then it's a std mode, why use VESA? }
  {--}
  </i></font><font color="#FF00FF">Mov Ax, 4F02h   </font><font color="#008000"><i>{ VESA set modes }
  </i></font><font color="#FF00FF">Mov Bx, mode
  Int 10h
  Cmp Ax, 004Fh   </font><font color="#008000"><i>{ AL=4F VESA supported, AH=00 successful }
  </i></font><font color="#FF00FF">Jne @Error      </font><font color="#008000"><i>{ Else Error }
  </i></font><font color="#FF00FF">mov al, true
  jmp @done
 @Error:
  mov al, false
  Jmp @done
 @Normal_VGA:
  mov ax, mode    </font><font color="#008000"><i>{ AH will of course be zero, as intended }
  </i></font><font color="#FF00FF">int 10h
  Mov al, true
 @done:
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;



</font><font color="#FF0000"><b>Procedure </b></font>Circle<font color="#000080">(</font>X<font color="#000080">,</font>Y<font color="#000080">,</font>size<font color="#000080">: </font>longint<font color="#000080">; </font>color<font color="#000080">: </font>byte<font color="#000080">);  </font><font color="#008000"><i>{borrowed for demo}
</i></font><font color="#FF0000"><b>Var </b></font>Xl<font color="#000080">,</font>Yl <font color="#000080">: </font>LongInt<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  If </b></font>Size<font color="#000080">=</font><font color="#800000">0 </font><font color="#FF0000"><b>Then Begin
    </b></font>PutPix<font color="#000080">(</font>X<font color="#000080">,</font>Y<font color="#000080">,</font>color<font color="#000080">);
    </font>Exit<font color="#000080">;
  </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font>Xl <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>Yl <font color="#000080">:= </font>Size<font color="#000080">;
  </font>Size <font color="#000080">:= </font>Size<font color="#000080">*</font>Size<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">;
  </font><font color="#FF0000"><b>Repeat
    </b></font>PutPix<font color="#000080">(</font>X<font color="#000080">+</font>Xl<font color="#000080">,</font>Y<font color="#000080">+</font>Yl<font color="#000080">,</font>color<font color="#000080">);
    </font>PutPix<font color="#000080">(</font>X<font color="#000080">-</font>Xl<font color="#000080">,</font>Y<font color="#000080">+</font>Yl<font color="#000080">,</font>color<font color="#000080">);
    </font>PutPix<font color="#000080">(</font>X<font color="#000080">+</font>Xl<font color="#000080">,</font>Y<font color="#000080">-</font>Yl<font color="#000080">,</font>color<font color="#000080">);
    </font>PutPix<font color="#000080">(</font>X<font color="#000080">-</font>Xl<font color="#000080">,</font>Y<font color="#000080">-</font>Yl<font color="#000080">,</font>color<font color="#000080">);
    </font><font color="#FF0000"><b>If </b></font>Xl<font color="#000080">*</font>Xl<font color="#000080">+</font>Yl<font color="#000080">*</font>Yl <font color="#000080">&gt;= </font>Size <font color="#FF0000"><b>Then </b></font>Dec<font color="#000080">(</font>Yl<font color="#000080">)
    </font><font color="#FF0000"><b>Else </b></font>Inc<font color="#000080">(</font>Xl<font color="#000080">);
  </font><font color="#FF0000"><b>Until </b></font>Yl <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">;
  </font>PutPix<font color="#000080">(</font>X<font color="#000080">+</font>Xl<font color="#000080">,</font>Y<font color="#000080">+</font>Yl<font color="#000080">,</font>color<font color="#000080">);
  </font>PutPix<font color="#000080">(</font>X<font color="#000080">-</font>Xl<font color="#000080">,</font>Y<font color="#000080">+</font>Yl<font color="#000080">,</font>color<font color="#000080">);
  </font>PutPix<font color="#000080">(</font>X<font color="#000080">+</font>Xl<font color="#000080">,</font>Y<font color="#000080">-</font>Yl<font color="#000080">,</font>color<font color="#000080">);
  </font>PutPix<font color="#000080">(</font>X<font color="#000080">-</font>Xl<font color="#000080">,</font>Y<font color="#000080">-</font>Yl<font color="#000080">,</font>color<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;






</font><font color="#FF0000"><b>begin
   </b></font>xmax <font color="#000080">:= </font><font color="#800000">800</font><font color="#000080">;
   </font>ymax <font color="#000080">:= </font><font color="#800000">600</font><font color="#000080">;
   </font>setmode<font color="#000080">(</font><font color="#800000">$103</font><font color="#000080">);     </font><font color="#008000"><i>{800x600x256 VESA}
   </i></font>current_bank<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;  </font>pp<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
</font><font color="#008000"><i>(*                     {secondary dither test stuff}
 for y:=0 to 599 do for x:=0 to 799 do putpix(x,y,x mod 256);
 for y:=1 to 290 do circle(400,300,y,y mod 256);
 *)
 </i></font><font color="#FF0000"><b>for </b></font>y<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">74 </font><font color="#FF0000"><b>do         </b></font><font color="#008000"><i>{gray fountain}
 </i></font><font color="#FF0000"><b>begin
    for </b></font>x<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">799 </font><font color="#FF0000"><b>do
    begin
       </b></font>putpix<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>x <font color="#FF0000"><b>div </b></font><font color="#800000">32</font><font color="#000080">);
       </font>putpix<font color="#000080">(</font>x<font color="#000080">,</font><font color="#800000">75</font><font color="#000080">+</font>y<font color="#000080">,</font><font color="#800000">32</font><font color="#000080">+</font>x <font color="#FF0000"><b>div </b></font><font color="#800000">32</font><font color="#000080">);
       </font>putpix<font color="#000080">(</font>x<font color="#000080">,</font><font color="#800000">150</font><font color="#000080">+</font>y<font color="#000080">,</font><font color="#800000">64</font><font color="#000080">+(</font>x <font color="#FF0000"><b>div </b></font><font color="#800000">32</font><font color="#000080">));
       </font>putpix<font color="#000080">(</font>x<font color="#000080">,</font><font color="#800000">225</font><font color="#000080">+</font>y<font color="#000080">,</font><font color="#800000">96</font><font color="#000080">+(</font>x <font color="#FF0000"><b>div </b></font><font color="#800000">32</font><font color="#000080">));
       </font>putpix<font color="#000080">(</font>x<font color="#000080">,</font><font color="#800000">300</font><font color="#000080">+</font>y<font color="#000080">,</font><font color="#800000">128</font><font color="#000080">+(</font>x <font color="#FF0000"><b>div </b></font><font color="#800000">32</font><font color="#000080">));
       </font>putpix<font color="#000080">(</font>x<font color="#000080">,</font><font color="#800000">375</font><font color="#000080">+</font>y<font color="#000080">,</font><font color="#800000">160</font><font color="#000080">+(</font>x <font color="#FF0000"><b>div </b></font><font color="#800000">32</font><font color="#000080">));
       </font>putpix<font color="#000080">(</font>x<font color="#000080">,</font><font color="#800000">450</font><font color="#000080">+</font>y<font color="#000080">,</font><font color="#800000">192</font><font color="#000080">+(</font>x <font color="#FF0000"><b>div </b></font><font color="#800000">32</font><font color="#000080">));
       </font>putpix<font color="#000080">(</font>x<font color="#000080">,</font><font color="#800000">525</font><font color="#000080">+</font>y<font color="#000080">,</font><font color="#800000">224</font><font color="#000080">+(</font>x <font color="#FF0000"><b>div </b></font><font color="#800000">32</font><font color="#000080">));
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>for </b></font>y<font color="#000080">:=</font><font color="#800000">580 </font><font color="#FF0000"><b>to </b></font><font color="#800000">599 </font><font color="#FF0000"><b>do for </b></font>x<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">799 </font><font color="#FF0000"><b>do </b></font>putpix<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>x <font color="#FF0000"><b>div </b></font><font color="#800000">3</font><font color="#000080">);

 </font>xlaser800x600x256<font color="#000080">;    </font><font color="#008000"><i>{dump}
 </i></font>setmode<font color="#000080">(</font>lastmode<font color="#000080">);    </font><font color="#008000"><i>{Miller time}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font><font color="#008000"><i>{   EXAMPLE #4 }
{ ----------------------------   CUT  ------------------------- }

</i></font><font color="#FF0000"><b>uses </b></font>printer<font color="#000080">,</font>crt<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>x<font color="#000080">,</font>y<font color="#000080">:</font>integer<font color="#000080">;
   </font>xmax<font color="#000080">,</font>ymax<font color="#000080">:</font>word<font color="#000080">;
   </font>Current_bank<font color="#000080">: </font>byte<font color="#000080">;
   </font>Pp<font color="#000080">: </font>byte<font color="#000080">;


</font><font color="#FF0000"><b>Procedure </b></font>PutPix<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">: </font>word<font color="#000080">; </font>c<font color="#000080">: </font>byte<font color="#000080">); </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm
  </b></font><font color="#008000"><i>{ Do some simple checking }
  </i></font><font color="#FF00FF">mov  ax, x
  cmp  xmax,ax
  jb   @</font><font color="#FF0000"><b>end          </b></font><font color="#008000"><i>{x too big}

  </i></font>mov  ax<font color="#000080">, </font>y
  cmp  ymax<font color="#000080">, </font>ax
  jb   <font color="#000080">@</font><font color="#FF0000"><b>end          </b></font><font color="#008000"><i>{y too big}

 { dec  x}

  { Calculate where we're going to place the pixel at A000:???? }
  </i></font>mov ax<font color="#000080">,</font><font color="#800000">$a000
  </font>Mov  ES<font color="#000080">, </font>ax
  Mov  AX<font color="#000080">, </font>Ymax
  Mul  pp            <font color="#008000"><i>{page offset?}
  </i></font>Add  Ax<font color="#000080">, </font>Y
  Mov  Bx<font color="#000080">, </font>Ax
  Mov  Ax<font color="#000080">, </font>Xmax
  Mul  Bx
  Add  Ax<font color="#000080">, </font>X
  Adc  Dx<font color="#000080">, </font><font color="#800000">0
  </font>Mov  Di<font color="#000080">, </font>Ax
  Cmp  Dl<font color="#000080">, </font>Current_bank
  <font color="#008000"><i>{ If we're at the bank we need to be, then skip it }
  </i></font>Je   <font color="#000080">@</font>skip
  <font color="#008000"><i>{ Set the video bank to what we need }
  </i></font>Mov  Current_bank<font color="#000080">, </font>Dl
  Mov  Ax<font color="#000080">, </font><font color="#800000">4</font>F05h
  <font color="#FF0000"><b>Xor  </b></font>Bx<font color="#000080">, </font>Bx
  Int  <font color="#800000">10</font>h

 <font color="#000080">@</font>Skip<font color="#000080">:
  </font>Mov  Al<font color="#000080">, </font>C
  Mov  Es<font color="#000080">:[</font>Di<font color="#000080">], </font>Al
 <font color="#000080">@</font><font color="#FF0000"><b>End</b></font><font color="#000080">:
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;


</font><font color="#FF0000"><b>function </b></font>GetPix<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">: </font>word<font color="#000080">):</font>byte<font color="#000080">; </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm
  </b></font><font color="#008000"><i>{ Do some simple checking }
  </i></font><font color="#FF00FF">mov  ax, x
  cmp  xmax,ax
  jb   @</font><font color="#FF0000"><b>end          </b></font><font color="#008000"><i>{x too big}

  </i></font>mov  ax<font color="#000080">, </font>y
  cmp  ymax<font color="#000080">, </font>ax
  jb   <font color="#000080">@</font><font color="#FF0000"><b>end          </b></font><font color="#008000"><i>{y too big}

{  dec  x}

  { Calculate where we're going to read the pixel at A000:???? }
  </i></font>mov ax<font color="#000080">,</font><font color="#800000">$a000
  </font>Mov  ES<font color="#000080">, </font>ax
  Mov  AX<font color="#000080">, </font>Ymax
  Mul  pp            <font color="#008000"><i>{page offset?}
  </i></font>Add  Ax<font color="#000080">, </font>Y
  Mov  Bx<font color="#000080">, </font>Ax
  Mov  Ax<font color="#000080">, </font>Xmax
  Mul  Bx
  Add  Ax<font color="#000080">, </font>X
  Adc  Dx<font color="#000080">, </font><font color="#800000">0
  </font>Mov  Di<font color="#000080">, </font>Ax
  Cmp  Dl<font color="#000080">, </font>Current_bank
  <font color="#008000"><i>{ If we're at the bank we need to be, then skip it }
  </i></font>Je   <font color="#000080">@</font>skip
  <font color="#008000"><i>{ Set the video bank to what we need }
  </i></font>Mov  Current_bank<font color="#000080">, </font>Dl
  Mov  Ax<font color="#000080">, </font><font color="#800000">4</font>F05h
  <font color="#FF0000"><b>Xor  </b></font>Bx<font color="#000080">, </font>Bx
  Int  <font color="#800000">10</font>h

 <font color="#000080">@</font>Skip<font color="#000080">:
  </font>Mov  al<font color="#000080">, </font>Es<font color="#000080">:[</font>Di<font color="#000080">]
 @</font><font color="#FF0000"><b>End</b></font><font color="#000080">:
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;



</font><font color="#FF0000"><b>Procedure </b></font>Xlaser1024x768x256<font color="#000080">; </font><font color="#008000"><i>{vesa mode printer dump $105}
{Ron Nossaman May 1996   nossaman@southwind.net}
{ Each screen pixel in 1024X768 graphics mode translates to a 3X3 printer
   pixel at 300 dpi. This routine maps X,Y screen coordinates into the
   halftone pel, determines the gray density level according to the
   rgb values of each palette entry, and sends the results to a LaserJet II
   compatible laser printer. Since the pel only has 32 levels of gray,
   the pels are, themselves, dithered on an secondary matrix to smooth
   the spread to 256 distinct levels of gray. You get an 8 bit dump from
   a 6 bit dac. You're welcome, but I'd request credit please if you use it.
   The dither pattern is, unfortunately, intrusive in the lighter shades.
   I tried halftoning the halftone pel instead, but the results were lumpier
   than what I have here. Maybe someone has a good scatter dither that is
   adaptable to this use??}
</i></font><font color="#FF0000"><b>Var
   </b></font>x<font color="#000080">,</font>y<font color="#000080">,</font>pdq<font color="#000080">,</font>off<font color="#000080">,</font>linePos<font color="#000080">,</font>pass<font color="#000080">,</font>color<font color="#000080">,</font>color1<font color="#000080">,</font>color2<font color="#000080">,</font>i<font color="#000080">:</font>integer<font color="#000080">;
   </font>OutByte<font color="#000080">,</font>acc<font color="#000080">,</font>cmod<font color="#000080">,</font>pel<font color="#000080">:</font>byte<font color="#000080">;
   </font>linepix<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">1023</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
   </font>outline<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">255</font><font color="#000080">];
   </font>gray<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">]</font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;

</font><font color="#FF0000"><b>const
   </b></font>yrange<font color="#000080">=</font><font color="#800000">767</font><font color="#000080">;
   </font>xidx<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">15</font><font color="#000080">]</font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">=(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">6</font><font color="#000080">,</font><font color="#800000">9</font><font color="#000080">,</font><font color="#800000">12</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">8</font><font color="#000080">,</font><font color="#800000">11</font><font color="#000080">,</font><font color="#800000">14</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">7</font><font color="#000080">,</font><font color="#800000">10</font><font color="#000080">,</font><font color="#800000">13</font><font color="#000080">);
   </font>xhalftone<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">287</font><font color="#000080">]</font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">=(
      </font><font color="#800000">35</font><font color="#000080">, </font><font color="#800000">39</font><font color="#000080">, </font><font color="#800000">54</font><font color="#000080">, </font><font color="#800000">62</font><font color="#000080">,</font><font color="#800000">159</font><font color="#000080">,</font><font color="#800000">155</font><font color="#000080">,</font><font color="#800000">105</font><font color="#000080">, </font><font color="#800000">98</font><font color="#000080">, </font><font color="#800000">99</font><font color="#000080">,</font><font color="#800000">103</font><font color="#000080">,</font><font color="#800000">118</font><font color="#000080">,</font><font color="#800000">126</font><font color="#000080">,</font><font color="#800000">223</font><font color="#000080">,</font><font color="#800000">219</font><font color="#000080">, </font><font color="#800000">41</font><font color="#000080">, </font><font color="#800000">34</font><font color="#000080">, </font><font color="#800000">35</font><font color="#000080">, </font><font color="#800000">39</font><font color="#000080">,
      </font><font color="#800000">42</font><font color="#000080">, </font><font color="#800000">46</font><font color="#000080">, </font><font color="#800000">50</font><font color="#000080">, </font><font color="#800000">58</font><font color="#000080">,</font><font color="#800000">151</font><font color="#000080">,</font><font color="#800000">147</font><font color="#000080">,</font><font color="#800000">109</font><font color="#000080">,</font><font color="#800000">102</font><font color="#000080">,</font><font color="#800000">106</font><font color="#000080">,</font><font color="#800000">110</font><font color="#000080">,</font><font color="#800000">114</font><font color="#000080">,</font><font color="#800000">122</font><font color="#000080">,</font><font color="#800000">215</font><font color="#000080">,</font><font color="#800000">211</font><font color="#000080">, </font><font color="#800000">45</font><font color="#000080">, </font><font color="#800000">38</font><font color="#000080">, </font><font color="#800000">42</font><font color="#000080">, </font><font color="#800000">46</font><font color="#000080">,
     </font><font color="#800000">156</font><font color="#000080">,</font><font color="#800000">148</font><font color="#000080">,</font><font color="#800000">144</font><font color="#000080">,</font><font color="#800000">140</font><font color="#000080">,</font><font color="#800000">136</font><font color="#000080">,</font><font color="#800000">143</font><font color="#000080">,</font><font color="#800000">113</font><font color="#000080">,</font><font color="#800000">117</font><font color="#000080">,</font><font color="#800000">220</font><font color="#000080">,</font><font color="#800000">212</font><font color="#000080">,</font><font color="#800000">208</font><font color="#000080">,</font><font color="#800000">204</font><font color="#000080">,</font><font color="#800000">200</font><font color="#000080">,</font><font color="#800000">207</font><font color="#000080">, </font><font color="#800000">49</font><font color="#000080">, </font><font color="#800000">53</font><font color="#000080">,</font><font color="#800000">156</font><font color="#000080">,</font><font color="#800000">148</font><font color="#000080">,
     </font><font color="#800000">159</font><font color="#000080">,</font><font color="#800000">152</font><font color="#000080">,</font><font color="#800000">133</font><font color="#000080">,</font><font color="#800000">129</font><font color="#000080">,</font><font color="#800000">132</font><font color="#000080">,</font><font color="#800000">139</font><font color="#000080">,</font><font color="#800000">121</font><font color="#000080">,</font><font color="#800000">125</font><font color="#000080">,</font><font color="#800000">223</font><font color="#000080">,</font><font color="#800000">216</font><font color="#000080">,</font><font color="#800000">197</font><font color="#000080">,</font><font color="#800000">193</font><font color="#000080">,</font><font color="#800000">196</font><font color="#000080">,</font><font color="#800000">203</font><font color="#000080">, </font><font color="#800000">57</font><font color="#000080">, </font><font color="#800000">61</font><font color="#000080">,</font><font color="#800000">159</font><font color="#000080">,</font><font color="#800000">152</font><font color="#000080">,
      </font><font color="#800000">95</font><font color="#000080">, </font><font color="#800000">91</font><font color="#000080">,</font><font color="#800000">137</font><font color="#000080">,</font><font color="#800000">130</font><font color="#000080">,</font><font color="#800000">131</font><font color="#000080">,</font><font color="#800000">135</font><font color="#000080">,</font><font color="#800000">150</font><font color="#000080">,</font><font color="#800000">158</font><font color="#000080">, </font><font color="#800000">31</font><font color="#000080">, </font><font color="#800000">27</font><font color="#000080">,</font><font color="#800000">201</font><font color="#000080">,</font><font color="#800000">194</font><font color="#000080">,</font><font color="#800000">195</font><font color="#000080">,</font><font color="#800000">199</font><font color="#000080">,</font><font color="#800000">214</font><font color="#000080">,</font><font color="#800000">222</font><font color="#000080">, </font><font color="#800000">95</font><font color="#000080">, </font><font color="#800000">91</font><font color="#000080">,
      </font><font color="#800000">87</font><font color="#000080">, </font><font color="#800000">83</font><font color="#000080">,</font><font color="#800000">141</font><font color="#000080">,</font><font color="#800000">134</font><font color="#000080">,</font><font color="#800000">138</font><font color="#000080">,</font><font color="#800000">142</font><font color="#000080">,</font><font color="#800000">146</font><font color="#000080">,</font><font color="#800000">154</font><font color="#000080">, </font><font color="#800000">23</font><font color="#000080">, </font><font color="#800000">19</font><font color="#000080">,</font><font color="#800000">205</font><font color="#000080">,</font><font color="#800000">198</font><font color="#000080">,</font><font color="#800000">202</font><font color="#000080">,</font><font color="#800000">206</font><font color="#000080">,</font><font color="#800000">210</font><font color="#000080">,</font><font color="#800000">218</font><font color="#000080">, </font><font color="#800000">87</font><font color="#000080">, </font><font color="#800000">83</font><font color="#000080">,
      </font><font color="#800000">72</font><font color="#000080">, </font><font color="#800000">79</font><font color="#000080">,</font><font color="#800000">145</font><font color="#000080">,</font><font color="#800000">149</font><font color="#000080">, </font><font color="#800000">28</font><font color="#000080">, </font><font color="#800000">20</font><font color="#000080">, </font><font color="#800000">16</font><font color="#000080">, </font><font color="#800000">12</font><font color="#000080">,  </font><font color="#800000">8</font><font color="#000080">, </font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">209</font><font color="#000080">,</font><font color="#800000">213</font><font color="#000080">, </font><font color="#800000">92</font><font color="#000080">, </font><font color="#800000">84</font><font color="#000080">, </font><font color="#800000">80</font><font color="#000080">, </font><font color="#800000">76</font><font color="#000080">, </font><font color="#800000">72</font><font color="#000080">, </font><font color="#800000">79</font><font color="#000080">,
      </font><font color="#800000">68</font><font color="#000080">, </font><font color="#800000">75</font><font color="#000080">,</font><font color="#800000">153</font><font color="#000080">,</font><font color="#800000">157</font><font color="#000080">, </font><font color="#800000">31</font><font color="#000080">, </font><font color="#800000">24</font><font color="#000080">,  </font><font color="#800000">5</font><font color="#000080">,  </font><font color="#800000">1</font><font color="#000080">,  </font><font color="#800000">4</font><font color="#000080">, </font><font color="#800000">11</font><font color="#000080">,</font><font color="#800000">217</font><font color="#000080">,</font><font color="#800000">221</font><font color="#000080">, </font><font color="#800000">95</font><font color="#000080">, </font><font color="#800000">88</font><font color="#000080">, </font><font color="#800000">69</font><font color="#000080">, </font><font color="#800000">65</font><font color="#000080">, </font><font color="#800000">68</font><font color="#000080">, </font><font color="#800000">75</font><font color="#000080">,
      </font><font color="#800000">67</font><font color="#000080">, </font><font color="#800000">71</font><font color="#000080">, </font><font color="#800000">86</font><font color="#000080">, </font><font color="#800000">94</font><font color="#000080">,</font><font color="#800000">255</font><font color="#000080">,</font><font color="#800000">251</font><font color="#000080">,  </font><font color="#800000">9</font><font color="#000080">,  </font><font color="#800000">2</font><font color="#000080">,  </font><font color="#800000">3</font><font color="#000080">,  </font><font color="#800000">7</font><font color="#000080">, </font><font color="#800000">22</font><font color="#000080">, </font><font color="#800000">30</font><font color="#000080">,</font><font color="#800000">191</font><font color="#000080">,</font><font color="#800000">187</font><font color="#000080">, </font><font color="#800000">73</font><font color="#000080">, </font><font color="#800000">66</font><font color="#000080">, </font><font color="#800000">67</font><font color="#000080">, </font><font color="#800000">71</font><font color="#000080">,
      </font><font color="#800000">74</font><font color="#000080">, </font><font color="#800000">78</font><font color="#000080">, </font><font color="#800000">82</font><font color="#000080">, </font><font color="#800000">90</font><font color="#000080">,</font><font color="#800000">247</font><font color="#000080">,</font><font color="#800000">243</font><font color="#000080">, </font><font color="#800000">13</font><font color="#000080">,  </font><font color="#800000">6</font><font color="#000080">, </font><font color="#800000">10</font><font color="#000080">, </font><font color="#800000">14</font><font color="#000080">, </font><font color="#800000">18</font><font color="#000080">, </font><font color="#800000">26</font><font color="#000080">,</font><font color="#800000">183</font><font color="#000080">,</font><font color="#800000">179</font><font color="#000080">, </font><font color="#800000">77</font><font color="#000080">, </font><font color="#800000">70</font><font color="#000080">, </font><font color="#800000">74</font><font color="#000080">, </font><font color="#800000">78</font><font color="#000080">,
     </font><font color="#800000">252</font><font color="#000080">,</font><font color="#800000">244</font><font color="#000080">,</font><font color="#800000">240</font><font color="#000080">,</font><font color="#800000">236</font><font color="#000080">,</font><font color="#800000">232</font><font color="#000080">,</font><font color="#800000">239</font><font color="#000080">, </font><font color="#800000">17</font><font color="#000080">, </font><font color="#800000">21</font><font color="#000080">,</font><font color="#800000">188</font><font color="#000080">,</font><font color="#800000">180</font><font color="#000080">,</font><font color="#800000">176</font><font color="#000080">,</font><font color="#800000">172</font><font color="#000080">,</font><font color="#800000">168</font><font color="#000080">,</font><font color="#800000">175</font><font color="#000080">, </font><font color="#800000">81</font><font color="#000080">, </font><font color="#800000">85</font><font color="#000080">,</font><font color="#800000">252</font><font color="#000080">,</font><font color="#800000">244</font><font color="#000080">,
     </font><font color="#800000">255</font><font color="#000080">,</font><font color="#800000">248</font><font color="#000080">,</font><font color="#800000">229</font><font color="#000080">,</font><font color="#800000">225</font><font color="#000080">,</font><font color="#800000">228</font><font color="#000080">,</font><font color="#800000">235</font><font color="#000080">, </font><font color="#800000">25</font><font color="#000080">, </font><font color="#800000">29</font><font color="#000080">,</font><font color="#800000">191</font><font color="#000080">,</font><font color="#800000">184</font><font color="#000080">,</font><font color="#800000">165</font><font color="#000080">,</font><font color="#800000">161</font><font color="#000080">,</font><font color="#800000">164</font><font color="#000080">,</font><font color="#800000">171</font><font color="#000080">, </font><font color="#800000">89</font><font color="#000080">, </font><font color="#800000">93</font><font color="#000080">,</font><font color="#800000">255</font><font color="#000080">,</font><font color="#800000">248</font><font color="#000080">,
      </font><font color="#800000">63</font><font color="#000080">, </font><font color="#800000">59</font><font color="#000080">,</font><font color="#800000">233</font><font color="#000080">,</font><font color="#800000">226</font><font color="#000080">,</font><font color="#800000">227</font><font color="#000080">,</font><font color="#800000">231</font><font color="#000080">,</font><font color="#800000">246</font><font color="#000080">,</font><font color="#800000">254</font><font color="#000080">,</font><font color="#800000">127</font><font color="#000080">,</font><font color="#800000">123</font><font color="#000080">,</font><font color="#800000">169</font><font color="#000080">,</font><font color="#800000">162</font><font color="#000080">,</font><font color="#800000">163</font><font color="#000080">,</font><font color="#800000">167</font><font color="#000080">,</font><font color="#800000">182</font><font color="#000080">,</font><font color="#800000">190</font><font color="#000080">, </font><font color="#800000">63</font><font color="#000080">, </font><font color="#800000">59</font><font color="#000080">,
      </font><font color="#800000">55</font><font color="#000080">, </font><font color="#800000">51</font><font color="#000080">,</font><font color="#800000">237</font><font color="#000080">,</font><font color="#800000">230</font><font color="#000080">,</font><font color="#800000">234</font><font color="#000080">,</font><font color="#800000">238</font><font color="#000080">,</font><font color="#800000">242</font><font color="#000080">,</font><font color="#800000">250</font><font color="#000080">,</font><font color="#800000">119</font><font color="#000080">,</font><font color="#800000">115</font><font color="#000080">,</font><font color="#800000">173</font><font color="#000080">,</font><font color="#800000">166</font><font color="#000080">,</font><font color="#800000">170</font><font color="#000080">,</font><font color="#800000">174</font><font color="#000080">,</font><font color="#800000">178</font><font color="#000080">,</font><font color="#800000">186</font><font color="#000080">, </font><font color="#800000">55</font><font color="#000080">, </font><font color="#800000">51</font><font color="#000080">,
      </font><font color="#800000">40</font><font color="#000080">, </font><font color="#800000">47</font><font color="#000080">,</font><font color="#800000">241</font><font color="#000080">,</font><font color="#800000">245</font><font color="#000080">,</font><font color="#800000">124</font><font color="#000080">,</font><font color="#800000">116</font><font color="#000080">,</font><font color="#800000">112</font><font color="#000080">,</font><font color="#800000">108</font><font color="#000080">,</font><font color="#800000">104</font><font color="#000080">,</font><font color="#800000">111</font><font color="#000080">,</font><font color="#800000">177</font><font color="#000080">,</font><font color="#800000">181</font><font color="#000080">, </font><font color="#800000">60</font><font color="#000080">, </font><font color="#800000">52</font><font color="#000080">, </font><font color="#800000">48</font><font color="#000080">, </font><font color="#800000">44</font><font color="#000080">, </font><font color="#800000">40</font><font color="#000080">, </font><font color="#800000">47</font><font color="#000080">,
      </font><font color="#800000">36</font><font color="#000080">, </font><font color="#800000">43</font><font color="#000080">,</font><font color="#800000">249</font><font color="#000080">,</font><font color="#800000">253</font><font color="#000080">,</font><font color="#800000">127</font><font color="#000080">,</font><font color="#800000">120</font><font color="#000080">,</font><font color="#800000">101</font><font color="#000080">, </font><font color="#800000">97</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">107</font><font color="#000080">,</font><font color="#800000">185</font><font color="#000080">,</font><font color="#800000">189</font><font color="#000080">, </font><font color="#800000">63</font><font color="#000080">, </font><font color="#800000">56</font><font color="#000080">, </font><font color="#800000">37</font><font color="#000080">, </font><font color="#800000">33</font><font color="#000080">, </font><font color="#800000">36</font><font color="#000080">, </font><font color="#800000">43</font><font color="#000080">);

   </font><font color="#FF0000"><b>procedure </b></font>graysum<font color="#000080">;
   </font><font color="#FF0000"><b>var </b></font>r<font color="#000080">,</font>g<font color="#000080">,</font>b<font color="#000080">:</font>byte<font color="#000080">;
       </font>c<font color="#000080">:</font>word<font color="#000080">;
       </font>i<font color="#000080">:</font>integer<font color="#000080">;
   </font><font color="#FF0000"><b>begin
      for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do
      begin
         </b></font>c<font color="#000080">:=</font>i<font color="#000080">;
         </font><font color="#FF0000"><b>asm             </b></font><font color="#008000"><i>{get rgb values for this color}
           </i></font><font color="#FF00FF">mov ah,$10;
           mov al,$15;
           mov bx,c;
           int $10;
           mov r,dh;
           mov g,ch;
           mov b,cl;
         </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
       </font><font color="#008000"><i>{stretch from six bit to eight bit gray scale for print dump}
         </i></font>gray<font color="#000080">[</font>i<font color="#000080">]:=</font><font color="#800000">255</font><font color="#000080">-(</font>round<font color="#000080">(</font>r<font color="#000080">*</font><font color="#800000">1.2</font><font color="#000080">)+</font>round<font color="#000080">(</font>g<font color="#000080">*</font><font color="#800000">2.36</font><font color="#000080">)+</font>round<font color="#000080">(</font>b<font color="#000080">*</font><font color="#800000">0.44</font><font color="#000080">)); </font><font color="#008000"><i>{&amp; invert}
   {      gray[i]:=255-i; }   {test stuff for gray fountain}
      </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Begin        </b></font><font color="#008000"><i>{LandscapeXlaser1024x768x256}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'E'</font><font color="#000080">);
   </font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'&amp;l1O'</font><font color="#000080">);      </font><font color="#008000"><i>{landscape}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*r0F'</font><font color="#000080">);      </font><font color="#008000"><i>{no rotation}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*p-50X'</font><font color="#000080">);   </font><font color="#008000"><i>{Set horizontal cursor start position}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*p-50Y'</font><font color="#000080">);   </font><font color="#008000"><i>{set vertical cursor start position}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*t300R'</font><font color="#000080">);    </font><font color="#008000"><i>{raster graphics @300dpi}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*r1A'</font><font color="#000080">);      </font><font color="#008000"><i>{start graphics - current cursor}
   </i></font>graysum<font color="#000080">;
   </font><font color="#FF0000"><b>for </b></font>y<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>yrange <font color="#FF0000"><b>do
    begin
       for </b></font>x<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">1023 </font><font color="#FF0000"><b>do </b></font>linepix<font color="#000080">[</font>x<font color="#000080">]:=</font>gray<font color="#000080">[</font>getpix<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">)];
       </font><font color="#FF0000"><b>if </b></font>keypressed <font color="#FF0000"><b>then if </b></font>readkey <font color="#000080">=</font><font color="#800000">#27 </font><font color="#FF0000"><b>then
          begin
             </b></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*rB'</font><font color="#000080">);               </font><font color="#008000"><i>{end graphics}
             </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">#38</font><font color="#000080">,</font><font color="#800000">#108</font><font color="#000080">,</font><font color="#800000">#48</font><font color="#000080">,</font><font color="#800000">#72</font><font color="#000080">);    </font><font color="#008000"><i>{page feed}
             </i></font>exit<font color="#000080">;
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
       </font><font color="#FF0000"><b>for </b></font>pass<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">2 </font><font color="#FF0000"><b>do  </b></font><font color="#008000"><i>{pixel is 3 dots deep at 300 dpi}
       </i></font><font color="#FF0000"><b>begin
          </b></font>off <font color="#000080">:=((</font>y<font color="#000080">*</font><font color="#800000">3</font><font color="#000080">+</font>pass<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">16</font><font color="#000080">)*</font><font color="#800000">18</font><font color="#000080">; </font><font color="#008000"><i>{y index into halftone pel}
          </i></font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">4 </font><font color="#FF0000"><b>do </b></font>putpix<font color="#000080">(</font>i<font color="#000080">,</font>y<font color="#000080">,</font>pass<font color="#000080">);   </font><font color="#008000"><i>{visual progress report}
          </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*b384W'</font><font color="#000080">); </font><font color="#008000"><i>{inform printer, 384 bytes graphics coming}
          </i></font>x<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
          </font>linepos<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;
          </font>outbyte<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
          </font>acc<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
          </font><font color="#FF0000"><b>while </b></font>x<font color="#000080">&lt;</font><font color="#800000">1024 </font><font color="#FF0000"><b>do
          begin
             </b></font>color<font color="#000080">:=</font>linepix<font color="#000080">[</font>x<font color="#000080">];
             </font>pdq<font color="#000080">:=</font>off<font color="#000080">+</font>xidx<font color="#000080">[</font>x <font color="#FF0000"><b>mod </b></font><font color="#800000">16</font><font color="#000080">];  </font><font color="#008000"><i>{+ x offset}

      {convert to halftone}
             </i></font>color1<font color="#000080">:=</font>color <font color="#FF0000"><b>div </b></font><font color="#800000">8</font><font color="#000080">;
             </font>cmod<font color="#000080">:=</font>color <font color="#FF0000"><b>mod </b></font><font color="#800000">8</font><font color="#000080">;
             </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">2 </font><font color="#FF0000"><b>do             </b></font><font color="#008000"><i>{pixel is 3 dots wide}
             </i></font><font color="#FF0000"><b>begin
                </b></font>outbyte<font color="#000080">:=</font>outbyte <font color="#FF0000"><b>shl </b></font><font color="#800000">1</font><font color="#000080">;
                </font>color2<font color="#000080">:=</font>color1<font color="#000080">;
                </font>pel<font color="#000080">:=</font>xhalftone<font color="#000080">[</font>pdq<font color="#000080">+</font>i<font color="#000080">];
                </font><font color="#FF0000"><b>if </b></font>cmod<font color="#000080">&lt;</font>succ<font color="#000080">((</font>pel <font color="#FF0000"><b>and </b></font><font color="#800000">224</font><font color="#000080">)</font><font color="#FF0000"><b>shr </b></font><font color="#800000">5</font><font color="#000080">) </font><font color="#FF0000"><b>then
                   if </b></font>color2<font color="#000080">&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>dec<font color="#000080">(</font>color2<font color="#000080">);
                </font><font color="#FF0000"><b>if </b></font>color2<font color="#000080">&gt;=(</font>pel <font color="#FF0000"><b>and </b></font><font color="#800000">31</font><font color="#000080">)</font><font color="#FF0000"><b>then </b></font>outbyte<font color="#000080">:=</font>outbyte <font color="#FF0000"><b>or </b></font><font color="#800000">1</font><font color="#000080">;
                </font>inc<font color="#000080">(</font>acc<font color="#000080">);
                </font><font color="#FF0000"><b>if </b></font>acc<font color="#000080">&gt;</font><font color="#800000">7 </font><font color="#FF0000"><b>then
                begin
                   </b></font>outline<font color="#000080">[</font>linepos<font color="#000080">]:=</font>chr<font color="#000080">(</font>outbyte<font color="#000080">);
                   </font>inc<font color="#000080">(</font>linepos<font color="#000080">);
                   </font>acc<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">; </font>outbyte<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
                   </font><font color="#FF0000"><b>if </b></font>linepos<font color="#000080">&gt;</font><font color="#800000">255 </font><font color="#FF0000"><b>then
                   begin
                      </b></font>outline<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]:=</font>chr<font color="#000080">(</font><font color="#800000">255</font><font color="#000080">);
                      </font>write<font color="#000080">(</font>lst<font color="#000080">,</font>outline<font color="#000080">);
                      </font>linepos<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;
                   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
                </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
             </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{for i  - pixel width}
             </i></font>inc<font color="#000080">(</font>x<font color="#000080">);
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{while x&lt;1024}
          </i></font>outline<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]:=</font>chr<font color="#000080">(</font>linepos<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">);
          </font>write<font color="#000080">(</font>lst<font color="#000080">,</font>outline<font color="#000080">);
       </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{pass}
   </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{for y}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*rB'</font><font color="#000080">);               </font><font color="#008000"><i>{end graphics}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">#38</font><font color="#000080">,</font><font color="#800000">#108</font><font color="#000080">,</font><font color="#800000">#48</font><font color="#000080">,</font><font color="#800000">#72</font><font color="#000080">);    </font><font color="#008000"><i>{page feed}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'E'</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{Xlaser320x200x256}


</i></font><font color="#FF0000"><b>Function </b></font>SetMode<font color="#000080">(</font>mode<font color="#000080">: </font>word<font color="#000080">): </font>boolean<font color="#000080">; </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#008000"><i>{ This function will work for more than just VESA modes, and more than  }
{ Just VESA cards also.  If it's under $100 (where vesa modes begin) it }
{ will use the normal video bios instead. So people without VESA cards/ }
{ drivers still can use this for 320x200x256, etc.                      }
</i></font><font color="#FF0000"><b>asm
  </b></font><font color="#008000"><i>{ Comment this part out if you want to use vesa for this }
  {--}
  </i></font><font color="#FF00FF">Cmp Mode, 100h
  Jb  @Normal_VGA </font><font color="#008000"><i>{ If it's below 100h then it's a std mode, why use VESA? }
  {--}
  </i></font><font color="#FF00FF">Mov Ax, 4F02h   </font><font color="#008000"><i>{ VESA set modes }
  </i></font><font color="#FF00FF">Mov Bx, mode
  Int 10h
  Cmp Ax, 004Fh   </font><font color="#008000"><i>{ AL=4F VESA supported, AH=00 successful }
  </i></font><font color="#FF00FF">Jne @Error      </font><font color="#008000"><i>{ Else Error }
  </i></font><font color="#FF00FF">mov al, true
  jmp @done
 @Error:
  mov al, false
  Jmp @done
 @Normal_VGA:
  mov ax, mode    </font><font color="#008000"><i>{ AH will of course be zero, as intended }
  </i></font><font color="#FF00FF">int 10h
  Mov al, true
 @done:
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Procedure </b></font>Circle<font color="#000080">(</font>X<font color="#000080">,</font>Y<font color="#000080">,</font>size<font color="#000080">: </font>longint<font color="#000080">; </font>color<font color="#000080">: </font>byte<font color="#000080">);
</font><font color="#FF0000"><b>Var </b></font>Xl<font color="#000080">,</font>Yl <font color="#000080">: </font>LongInt<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  If </b></font>Size<font color="#000080">=</font><font color="#800000">0 </font><font color="#FF0000"><b>Then Begin
    </b></font>PutPix<font color="#000080">(</font>X<font color="#000080">,</font>Y<font color="#000080">,</font>color<font color="#000080">);
    </font>Exit<font color="#000080">;
  </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font>Xl <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>Yl <font color="#000080">:= </font>Size<font color="#000080">;
  </font>Size <font color="#000080">:= </font>Size<font color="#000080">*</font>Size<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">;
  </font><font color="#FF0000"><b>Repeat
    </b></font>PutPix<font color="#000080">(</font>X<font color="#000080">+</font>Xl<font color="#000080">,</font>Y<font color="#000080">+</font>Yl<font color="#000080">,</font>color<font color="#000080">);
    </font>PutPix<font color="#000080">(</font>X<font color="#000080">-</font>Xl<font color="#000080">,</font>Y<font color="#000080">+</font>Yl<font color="#000080">,</font>color<font color="#000080">);
    </font>PutPix<font color="#000080">(</font>X<font color="#000080">+</font>Xl<font color="#000080">,</font>Y<font color="#000080">-</font>Yl<font color="#000080">,</font>color<font color="#000080">);
    </font>PutPix<font color="#000080">(</font>X<font color="#000080">-</font>Xl<font color="#000080">,</font>Y<font color="#000080">-</font>Yl<font color="#000080">,</font>color<font color="#000080">);
    </font><font color="#FF0000"><b>If </b></font>Xl<font color="#000080">*</font>Xl<font color="#000080">+</font>Yl<font color="#000080">*</font>Yl <font color="#000080">&gt;= </font>Size <font color="#FF0000"><b>Then </b></font>Dec<font color="#000080">(</font>Yl<font color="#000080">)
    </font><font color="#FF0000"><b>Else </b></font>Inc<font color="#000080">(</font>Xl<font color="#000080">);
  </font><font color="#FF0000"><b>Until </b></font>Yl <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">;
  </font>PutPix<font color="#000080">(</font>X<font color="#000080">+</font>Xl<font color="#000080">,</font>Y<font color="#000080">+</font>Yl<font color="#000080">,</font>color<font color="#000080">);
  </font>PutPix<font color="#000080">(</font>X<font color="#000080">-</font>Xl<font color="#000080">,</font>Y<font color="#000080">+</font>Yl<font color="#000080">,</font>color<font color="#000080">);
  </font>PutPix<font color="#000080">(</font>X<font color="#000080">+</font>Xl<font color="#000080">,</font>Y<font color="#000080">-</font>Yl<font color="#000080">,</font>color<font color="#000080">);
  </font>PutPix<font color="#000080">(</font>X<font color="#000080">-</font>Xl<font color="#000080">,</font>Y<font color="#000080">-</font>Yl<font color="#000080">,</font>color<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;






</font><font color="#FF0000"><b>begin
   </b></font>xmax <font color="#000080">:= </font><font color="#800000">1024</font><font color="#000080">;
   </font>ymax <font color="#000080">:= </font><font color="#800000">768</font><font color="#000080">;
   </font>setmode<font color="#000080">(</font><font color="#800000">$105</font><font color="#000080">);     </font><font color="#008000"><i>{1024x768x256}

 </i></font><font color="#FF0000"><b>for </b></font>y<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">767 </font><font color="#FF0000"><b>do for </b></font>x<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">1023 </font><font color="#FF0000"><b>do </b></font>putpix<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>x <font color="#FF0000"><b>mod </b></font><font color="#800000">256</font><font color="#000080">);
 </font><font color="#FF0000"><b>for </b></font>y<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">380 </font><font color="#FF0000"><b>do </b></font>circle<font color="#000080">(</font><font color="#800000">512</font><font color="#000080">,</font><font color="#800000">384</font><font color="#000080">,</font>y<font color="#000080">,</font>y <font color="#FF0000"><b>mod </b></font><font color="#800000">256</font><font color="#000080">);
 </font><font color="#008000"><i>(*
 for y:=0 to 95 do        {gray fountain}
 begin
    for x:=0 to 1023 do
    begin
       putpix(x,y,x div 32);
       putpix(x,96+y,32+x div 32);
       putpix(x,192+y,64+(x div 32));
       putpix(x,288+y,96+(x div 32));
       putpix(x,384+y,128+(x div 32));
       putpix(x,480+y,160+(x div 32));
       putpix(x,576+y,192+(x div 32));
       putpix(x,672+y,224+(x div 32));
    end;
 end;
 for y:=740 to 767 do for x:=0 to 1023 do putpix(x,y,x div 4);
   *)
 </i></font>xlaser1024x768x256<font color="#000080">;    </font><font color="#008000"><i>{dump}
{ repeat until keypressed;}
 </i></font>setmode<font color="#000080">(</font>lastmode<font color="#000080">);    </font><font color="#008000"><i>{Miller time}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font><font color="#008000"><i>{   EXAMPLE #5 }
{ ----------------------------   CUT  ------------------------- }

</i></font><font color="#FF0000"><b>uses </b></font>printer<font color="#000080">,</font>crt<font color="#000080">;

</font><font color="#FF0000"><b>var </b></font>x<font color="#000080">,</font>y<font color="#000080">:</font>integer<font color="#000080">;


</font><font color="#FF0000"><b>Procedure </b></font>Xlaser320x200x256<font color="#000080">;
</font><font color="#008000"><i>{Ron Nossaman May 1996   nossaman@southwind.net}
{ Each screen pixel in 320X200 graphics mode translates to an 8X10 printer
   pixel at 300 dpi. This routine maps X,Y screen coordinates into the
   halftone pel, determines the gray density level according to the
   rgb values of each palette entry, and sends the results to a LaserJet II
   compatible laser printer. Since the pel only has 32 levels of gray,
   the pels are, themselves, dithered on an secondary matrix to smooth
   the spread to 256 distinct levels of gray. You get an 8 bit dump from
   a 6 bit dac. You're welcome, but I'd request credit please if you use it.
   The dither pattern is, unfortunately, intrusive in the lighter shades.
   I tried halftoning the halftone pel instead, but the results were lumpier
   than what I have here. Maybe someone has a good scatter dither that is
   adaptable to this use??}
</i></font><font color="#FF0000"><b>Var
   </b></font>x<font color="#000080">,</font>y<font color="#000080">,</font>pdq<font color="#000080">,</font>off<font color="#000080">,</font>linePos<font color="#000080">,</font>pass<font color="#000080">,</font>color<font color="#000080">,</font>color1<font color="#000080">,</font>color2<font color="#000080">:</font>integer<font color="#000080">;
   </font>OutByte<font color="#000080">,</font>pel<font color="#000080">,</font>cmod<font color="#000080">,</font>i<font color="#000080">:</font>byte<font color="#000080">;
   </font>linepix<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">319</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
   </font>outline<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">255</font><font color="#000080">];
   </font>gray<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">]</font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;

</font><font color="#FF0000"><b>const
   </b></font>yrange<font color="#000080">=</font><font color="#800000">199</font><font color="#000080">;
   </font>xhalftone<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">287</font><font color="#000080">]</font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">=(
      </font><font color="#800000">35</font><font color="#000080">, </font><font color="#800000">39</font><font color="#000080">, </font><font color="#800000">54</font><font color="#000080">, </font><font color="#800000">62</font><font color="#000080">,</font><font color="#800000">159</font><font color="#000080">,</font><font color="#800000">155</font><font color="#000080">,</font><font color="#800000">105</font><font color="#000080">, </font><font color="#800000">98</font><font color="#000080">, </font><font color="#800000">99</font><font color="#000080">,</font><font color="#800000">103</font><font color="#000080">,</font><font color="#800000">118</font><font color="#000080">,</font><font color="#800000">126</font><font color="#000080">,</font><font color="#800000">223</font><font color="#000080">,</font><font color="#800000">219</font><font color="#000080">, </font><font color="#800000">41</font><font color="#000080">, </font><font color="#800000">34</font><font color="#000080">, </font><font color="#800000">35</font><font color="#000080">, </font><font color="#800000">39</font><font color="#000080">,
      </font><font color="#800000">42</font><font color="#000080">, </font><font color="#800000">46</font><font color="#000080">, </font><font color="#800000">50</font><font color="#000080">, </font><font color="#800000">58</font><font color="#000080">,</font><font color="#800000">151</font><font color="#000080">,</font><font color="#800000">147</font><font color="#000080">,</font><font color="#800000">109</font><font color="#000080">,</font><font color="#800000">102</font><font color="#000080">,</font><font color="#800000">106</font><font color="#000080">,</font><font color="#800000">110</font><font color="#000080">,</font><font color="#800000">114</font><font color="#000080">,</font><font color="#800000">122</font><font color="#000080">,</font><font color="#800000">215</font><font color="#000080">,</font><font color="#800000">211</font><font color="#000080">, </font><font color="#800000">45</font><font color="#000080">, </font><font color="#800000">38</font><font color="#000080">, </font><font color="#800000">42</font><font color="#000080">, </font><font color="#800000">46</font><font color="#000080">,
     </font><font color="#800000">156</font><font color="#000080">,</font><font color="#800000">148</font><font color="#000080">,</font><font color="#800000">144</font><font color="#000080">,</font><font color="#800000">140</font><font color="#000080">,</font><font color="#800000">136</font><font color="#000080">,</font><font color="#800000">143</font><font color="#000080">,</font><font color="#800000">113</font><font color="#000080">,</font><font color="#800000">117</font><font color="#000080">,</font><font color="#800000">220</font><font color="#000080">,</font><font color="#800000">212</font><font color="#000080">,</font><font color="#800000">208</font><font color="#000080">,</font><font color="#800000">204</font><font color="#000080">,</font><font color="#800000">200</font><font color="#000080">,</font><font color="#800000">207</font><font color="#000080">, </font><font color="#800000">49</font><font color="#000080">, </font><font color="#800000">53</font><font color="#000080">,</font><font color="#800000">156</font><font color="#000080">,</font><font color="#800000">148</font><font color="#000080">,
     </font><font color="#800000">159</font><font color="#000080">,</font><font color="#800000">152</font><font color="#000080">,</font><font color="#800000">133</font><font color="#000080">,</font><font color="#800000">129</font><font color="#000080">,</font><font color="#800000">132</font><font color="#000080">,</font><font color="#800000">139</font><font color="#000080">,</font><font color="#800000">121</font><font color="#000080">,</font><font color="#800000">125</font><font color="#000080">,</font><font color="#800000">223</font><font color="#000080">,</font><font color="#800000">216</font><font color="#000080">,</font><font color="#800000">197</font><font color="#000080">,</font><font color="#800000">193</font><font color="#000080">,</font><font color="#800000">196</font><font color="#000080">,</font><font color="#800000">203</font><font color="#000080">, </font><font color="#800000">57</font><font color="#000080">, </font><font color="#800000">61</font><font color="#000080">,</font><font color="#800000">159</font><font color="#000080">,</font><font color="#800000">152</font><font color="#000080">,
      </font><font color="#800000">95</font><font color="#000080">, </font><font color="#800000">91</font><font color="#000080">,</font><font color="#800000">137</font><font color="#000080">,</font><font color="#800000">130</font><font color="#000080">,</font><font color="#800000">131</font><font color="#000080">,</font><font color="#800000">135</font><font color="#000080">,</font><font color="#800000">150</font><font color="#000080">,</font><font color="#800000">158</font><font color="#000080">, </font><font color="#800000">31</font><font color="#000080">, </font><font color="#800000">27</font><font color="#000080">,</font><font color="#800000">201</font><font color="#000080">,</font><font color="#800000">194</font><font color="#000080">,</font><font color="#800000">195</font><font color="#000080">,</font><font color="#800000">199</font><font color="#000080">,</font><font color="#800000">214</font><font color="#000080">,</font><font color="#800000">222</font><font color="#000080">, </font><font color="#800000">95</font><font color="#000080">, </font><font color="#800000">91</font><font color="#000080">,
      </font><font color="#800000">87</font><font color="#000080">, </font><font color="#800000">83</font><font color="#000080">,</font><font color="#800000">141</font><font color="#000080">,</font><font color="#800000">134</font><font color="#000080">,</font><font color="#800000">138</font><font color="#000080">,</font><font color="#800000">142</font><font color="#000080">,</font><font color="#800000">146</font><font color="#000080">,</font><font color="#800000">154</font><font color="#000080">, </font><font color="#800000">23</font><font color="#000080">, </font><font color="#800000">19</font><font color="#000080">,</font><font color="#800000">205</font><font color="#000080">,</font><font color="#800000">198</font><font color="#000080">,</font><font color="#800000">202</font><font color="#000080">,</font><font color="#800000">206</font><font color="#000080">,</font><font color="#800000">210</font><font color="#000080">,</font><font color="#800000">218</font><font color="#000080">, </font><font color="#800000">87</font><font color="#000080">, </font><font color="#800000">83</font><font color="#000080">,
      </font><font color="#800000">72</font><font color="#000080">, </font><font color="#800000">79</font><font color="#000080">,</font><font color="#800000">145</font><font color="#000080">,</font><font color="#800000">149</font><font color="#000080">, </font><font color="#800000">28</font><font color="#000080">, </font><font color="#800000">20</font><font color="#000080">, </font><font color="#800000">16</font><font color="#000080">, </font><font color="#800000">12</font><font color="#000080">,  </font><font color="#800000">8</font><font color="#000080">, </font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">209</font><font color="#000080">,</font><font color="#800000">213</font><font color="#000080">, </font><font color="#800000">92</font><font color="#000080">, </font><font color="#800000">84</font><font color="#000080">, </font><font color="#800000">80</font><font color="#000080">, </font><font color="#800000">76</font><font color="#000080">, </font><font color="#800000">72</font><font color="#000080">, </font><font color="#800000">79</font><font color="#000080">,
      </font><font color="#800000">68</font><font color="#000080">, </font><font color="#800000">75</font><font color="#000080">,</font><font color="#800000">153</font><font color="#000080">,</font><font color="#800000">157</font><font color="#000080">, </font><font color="#800000">31</font><font color="#000080">, </font><font color="#800000">24</font><font color="#000080">,  </font><font color="#800000">5</font><font color="#000080">,  </font><font color="#800000">1</font><font color="#000080">,  </font><font color="#800000">4</font><font color="#000080">, </font><font color="#800000">11</font><font color="#000080">,</font><font color="#800000">217</font><font color="#000080">,</font><font color="#800000">221</font><font color="#000080">, </font><font color="#800000">95</font><font color="#000080">, </font><font color="#800000">88</font><font color="#000080">, </font><font color="#800000">69</font><font color="#000080">, </font><font color="#800000">65</font><font color="#000080">, </font><font color="#800000">68</font><font color="#000080">, </font><font color="#800000">75</font><font color="#000080">,
      </font><font color="#800000">67</font><font color="#000080">, </font><font color="#800000">71</font><font color="#000080">, </font><font color="#800000">86</font><font color="#000080">, </font><font color="#800000">94</font><font color="#000080">,</font><font color="#800000">255</font><font color="#000080">,</font><font color="#800000">251</font><font color="#000080">,  </font><font color="#800000">9</font><font color="#000080">,  </font><font color="#800000">2</font><font color="#000080">,  </font><font color="#800000">3</font><font color="#000080">,  </font><font color="#800000">7</font><font color="#000080">, </font><font color="#800000">22</font><font color="#000080">, </font><font color="#800000">30</font><font color="#000080">,</font><font color="#800000">191</font><font color="#000080">,</font><font color="#800000">187</font><font color="#000080">, </font><font color="#800000">73</font><font color="#000080">, </font><font color="#800000">66</font><font color="#000080">, </font><font color="#800000">67</font><font color="#000080">, </font><font color="#800000">71</font><font color="#000080">,
      </font><font color="#800000">74</font><font color="#000080">, </font><font color="#800000">78</font><font color="#000080">, </font><font color="#800000">82</font><font color="#000080">, </font><font color="#800000">90</font><font color="#000080">,</font><font color="#800000">247</font><font color="#000080">,</font><font color="#800000">243</font><font color="#000080">, </font><font color="#800000">13</font><font color="#000080">,  </font><font color="#800000">6</font><font color="#000080">, </font><font color="#800000">10</font><font color="#000080">, </font><font color="#800000">14</font><font color="#000080">, </font><font color="#800000">18</font><font color="#000080">, </font><font color="#800000">26</font><font color="#000080">,</font><font color="#800000">183</font><font color="#000080">,</font><font color="#800000">179</font><font color="#000080">, </font><font color="#800000">77</font><font color="#000080">, </font><font color="#800000">70</font><font color="#000080">, </font><font color="#800000">74</font><font color="#000080">, </font><font color="#800000">78</font><font color="#000080">,
     </font><font color="#800000">252</font><font color="#000080">,</font><font color="#800000">244</font><font color="#000080">,</font><font color="#800000">240</font><font color="#000080">,</font><font color="#800000">236</font><font color="#000080">,</font><font color="#800000">232</font><font color="#000080">,</font><font color="#800000">239</font><font color="#000080">, </font><font color="#800000">17</font><font color="#000080">, </font><font color="#800000">21</font><font color="#000080">,</font><font color="#800000">188</font><font color="#000080">,</font><font color="#800000">180</font><font color="#000080">,</font><font color="#800000">176</font><font color="#000080">,</font><font color="#800000">172</font><font color="#000080">,</font><font color="#800000">168</font><font color="#000080">,</font><font color="#800000">175</font><font color="#000080">, </font><font color="#800000">81</font><font color="#000080">, </font><font color="#800000">85</font><font color="#000080">,</font><font color="#800000">252</font><font color="#000080">,</font><font color="#800000">244</font><font color="#000080">,
     </font><font color="#800000">255</font><font color="#000080">,</font><font color="#800000">248</font><font color="#000080">,</font><font color="#800000">229</font><font color="#000080">,</font><font color="#800000">225</font><font color="#000080">,</font><font color="#800000">228</font><font color="#000080">,</font><font color="#800000">235</font><font color="#000080">, </font><font color="#800000">25</font><font color="#000080">, </font><font color="#800000">29</font><font color="#000080">,</font><font color="#800000">191</font><font color="#000080">,</font><font color="#800000">184</font><font color="#000080">,</font><font color="#800000">165</font><font color="#000080">,</font><font color="#800000">161</font><font color="#000080">,</font><font color="#800000">164</font><font color="#000080">,</font><font color="#800000">171</font><font color="#000080">, </font><font color="#800000">89</font><font color="#000080">, </font><font color="#800000">93</font><font color="#000080">,</font><font color="#800000">255</font><font color="#000080">,</font><font color="#800000">248</font><font color="#000080">,
      </font><font color="#800000">63</font><font color="#000080">, </font><font color="#800000">59</font><font color="#000080">,</font><font color="#800000">233</font><font color="#000080">,</font><font color="#800000">226</font><font color="#000080">,</font><font color="#800000">227</font><font color="#000080">,</font><font color="#800000">231</font><font color="#000080">,</font><font color="#800000">246</font><font color="#000080">,</font><font color="#800000">254</font><font color="#000080">,</font><font color="#800000">127</font><font color="#000080">,</font><font color="#800000">123</font><font color="#000080">,</font><font color="#800000">169</font><font color="#000080">,</font><font color="#800000">162</font><font color="#000080">,</font><font color="#800000">163</font><font color="#000080">,</font><font color="#800000">167</font><font color="#000080">,</font><font color="#800000">182</font><font color="#000080">,</font><font color="#800000">190</font><font color="#000080">, </font><font color="#800000">63</font><font color="#000080">, </font><font color="#800000">59</font><font color="#000080">,
      </font><font color="#800000">55</font><font color="#000080">, </font><font color="#800000">51</font><font color="#000080">,</font><font color="#800000">237</font><font color="#000080">,</font><font color="#800000">230</font><font color="#000080">,</font><font color="#800000">234</font><font color="#000080">,</font><font color="#800000">238</font><font color="#000080">,</font><font color="#800000">242</font><font color="#000080">,</font><font color="#800000">250</font><font color="#000080">,</font><font color="#800000">119</font><font color="#000080">,</font><font color="#800000">115</font><font color="#000080">,</font><font color="#800000">173</font><font color="#000080">,</font><font color="#800000">166</font><font color="#000080">,</font><font color="#800000">170</font><font color="#000080">,</font><font color="#800000">174</font><font color="#000080">,</font><font color="#800000">178</font><font color="#000080">,</font><font color="#800000">186</font><font color="#000080">, </font><font color="#800000">55</font><font color="#000080">, </font><font color="#800000">51</font><font color="#000080">,
      </font><font color="#800000">40</font><font color="#000080">, </font><font color="#800000">47</font><font color="#000080">,</font><font color="#800000">241</font><font color="#000080">,</font><font color="#800000">245</font><font color="#000080">,</font><font color="#800000">124</font><font color="#000080">,</font><font color="#800000">116</font><font color="#000080">,</font><font color="#800000">112</font><font color="#000080">,</font><font color="#800000">108</font><font color="#000080">,</font><font color="#800000">104</font><font color="#000080">,</font><font color="#800000">111</font><font color="#000080">,</font><font color="#800000">177</font><font color="#000080">,</font><font color="#800000">181</font><font color="#000080">, </font><font color="#800000">60</font><font color="#000080">, </font><font color="#800000">52</font><font color="#000080">, </font><font color="#800000">48</font><font color="#000080">, </font><font color="#800000">44</font><font color="#000080">, </font><font color="#800000">40</font><font color="#000080">, </font><font color="#800000">47</font><font color="#000080">,
      </font><font color="#800000">36</font><font color="#000080">, </font><font color="#800000">43</font><font color="#000080">,</font><font color="#800000">249</font><font color="#000080">,</font><font color="#800000">253</font><font color="#000080">,</font><font color="#800000">127</font><font color="#000080">,</font><font color="#800000">120</font><font color="#000080">,</font><font color="#800000">101</font><font color="#000080">, </font><font color="#800000">97</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">107</font><font color="#000080">,</font><font color="#800000">185</font><font color="#000080">,</font><font color="#800000">189</font><font color="#000080">, </font><font color="#800000">63</font><font color="#000080">, </font><font color="#800000">56</font><font color="#000080">, </font><font color="#800000">37</font><font color="#000080">, </font><font color="#800000">33</font><font color="#000080">, </font><font color="#800000">36</font><font color="#000080">, </font><font color="#800000">43</font><font color="#000080">);

   </font><font color="#FF0000"><b>procedure </b></font>graysum<font color="#000080">;
   </font><font color="#FF0000"><b>var </b></font>r<font color="#000080">,</font>g<font color="#000080">,</font>b<font color="#000080">:</font>byte<font color="#000080">;
       </font>c<font color="#000080">:</font>word<font color="#000080">;
       </font>i<font color="#000080">:</font>integer<font color="#000080">;
   </font><font color="#FF0000"><b>begin
      for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do
      begin
         </b></font>c<font color="#000080">:=</font>i<font color="#000080">;
         </font><font color="#FF0000"><b>asm             </b></font><font color="#008000"><i>{get rgb values for this color}
           </i></font><font color="#FF00FF">mov ah,$10;
           mov al,$15;
           mov bx,c;
           int $10;
           mov r,dh;
           mov g,ch;
           mov b,cl;
         </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
       </font><font color="#008000"><i>{stretch from six bit to eight bit gray scale for print dump}
         </i></font>gray<font color="#000080">[</font>i<font color="#000080">]:=</font><font color="#800000">255</font><font color="#000080">-(</font>round<font color="#000080">(</font>r<font color="#000080">*</font><font color="#800000">1.2</font><font color="#000080">)+</font>round<font color="#000080">(</font>g<font color="#000080">*</font><font color="#800000">2.36</font><font color="#000080">)+</font>round<font color="#000080">(</font>b<font color="#000080">*</font><font color="#800000">0.44</font><font color="#000080">)); </font><font color="#008000"><i>{&amp; invert}
  {       gray[i]:=255-i; }   {test stuff for gray fountain}
      </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Begin        </b></font><font color="#008000"><i>{LandscapeXlaser}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'E'</font><font color="#000080">);
   </font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'&amp;l1O'</font><font color="#000080">);      </font><font color="#008000"><i>{landscape}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*r0F'</font><font color="#000080">);      </font><font color="#008000"><i>{no rotation}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*p300X'</font><font color="#000080">);    </font><font color="#008000"><i>{Set cursor position}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*t300R'</font><font color="#000080">);    </font><font color="#008000"><i>{raster graphics @300dpi}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*r1A'</font><font color="#000080">);      </font><font color="#008000"><i>{start graphics - current cursor}
   </i></font>graysum<font color="#000080">;
   </font><font color="#FF0000"><b>for </b></font>y<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>yrange <font color="#FF0000"><b>do
    begin
       </b></font>move<font color="#000080">(</font>mem<font color="#000080">[</font><font color="#800000">$a000</font><font color="#000080">:</font>y<font color="#000080">*</font><font color="#800000">320</font><font color="#000080">],</font>linepix<font color="#000080">,</font><font color="#800000">320</font><font color="#000080">);
       </font><font color="#FF0000"><b>for </b></font>x<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">319 </font><font color="#FF0000"><b>do </b></font>linepix<font color="#000080">[</font>x<font color="#000080">]:=</font>gray<font color="#000080">[</font>linepix<font color="#000080">[</font>x<font color="#000080">]];
       </font><font color="#FF0000"><b>if </b></font>keypressed <font color="#FF0000"><b>then if </b></font>readkey <font color="#000080">=</font><font color="#800000">#27 </font><font color="#FF0000"><b>then
          begin
             </b></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*rB'</font><font color="#000080">);               </font><font color="#008000"><i>{end graphics}
             </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">#38</font><font color="#000080">,</font><font color="#800000">#108</font><font color="#000080">,</font><font color="#800000">#48</font><font color="#000080">,</font><font color="#800000">#72</font><font color="#000080">);    </font><font color="#008000"><i>{page feed}
             </i></font>exit<font color="#000080">;
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
       </font><font color="#FF0000"><b>for </b></font>pass<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">9 </font><font color="#FF0000"><b>do  </b></font><font color="#008000"><i>{pixel is 10 dots deep at 300 dpi}
       </i></font><font color="#FF0000"><b>begin
          </b></font>off <font color="#000080">:=((</font>y<font color="#000080">*</font><font color="#800000">10</font><font color="#000080">+</font>pass<font color="#000080">) </font><font color="#FF0000"><b>mod </b></font><font color="#800000">16</font><font color="#000080">)*</font><font color="#800000">18</font><font color="#000080">; </font><font color="#008000"><i>{index into halftone pel}
          </i></font>mem<font color="#000080">[</font><font color="#800000">$a000</font><font color="#000080">:</font>y<font color="#000080">*</font><font color="#800000">320</font><font color="#000080">]:=</font>pass<font color="#000080">; </font><font color="#008000"><i>{visual progress report}
          </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*b320W'</font><font color="#000080">); </font><font color="#008000"><i>{inform printer, 320 bytes graphics coming}
          </i></font>x<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
          </font>linepos<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;
          </font><font color="#FF0000"><b>while </b></font>x<font color="#000080">&lt;</font><font color="#800000">320 </font><font color="#FF0000"><b>do
          begin
             </b></font>color<font color="#000080">:=</font>linepix<font color="#000080">[</font>x<font color="#000080">];
             </font>pdq<font color="#000080">:=</font>off<font color="#000080">;
             </font><font color="#FF0000"><b>if </b></font>odd<font color="#000080">(</font>x<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>pdq<font color="#000080">,</font><font color="#800000">8</font><font color="#000080">);

          </font><font color="#008000"><i>{convert to halftone}
             </i></font>color1<font color="#000080">:=</font>color <font color="#FF0000"><b>div </b></font><font color="#800000">8</font><font color="#000080">;
             </font>cmod<font color="#000080">:=</font>color <font color="#FF0000"><b>mod </b></font><font color="#800000">8</font><font color="#000080">;
             </font>OutByte<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;       </font><font color="#008000"><i>{avoid range check error when it's shifted}
             </i></font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">7 </font><font color="#FF0000"><b>do          </b></font><font color="#008000"><i>{pixel is 8 dots wide}
             </i></font><font color="#FF0000"><b>begin
                </b></font>outbyte<font color="#000080">:=</font>outbyte <font color="#FF0000"><b>shl </b></font><font color="#800000">1</font><font color="#000080">;
                </font>color2<font color="#000080">:=</font>color1<font color="#000080">;
                </font>pel<font color="#000080">:=</font>xhalftone<font color="#000080">[</font>pdq<font color="#000080">+</font>i<font color="#000080">];
                </font><font color="#FF0000"><b>if </b></font>cmod<font color="#000080">&lt;</font>succ<font color="#000080">((</font>pel <font color="#FF0000"><b>and </b></font><font color="#800000">224</font><font color="#000080">)</font><font color="#FF0000"><b>shr </b></font><font color="#800000">5</font><font color="#000080">) </font><font color="#FF0000"><b>then
                   if </b></font>color2<font color="#000080">&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>dec<font color="#000080">(</font>color2<font color="#000080">);
                </font><font color="#FF0000"><b>if </b></font>color2<font color="#000080">&gt;=(</font>pel <font color="#FF0000"><b>and </b></font><font color="#800000">31</font><font color="#000080">)</font><font color="#FF0000"><b>then </b></font>outbyte<font color="#000080">:=</font>outbyte <font color="#FF0000"><b>or </b></font><font color="#800000">1</font><font color="#000080">;
             </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
             </font>inc<font color="#000080">(</font>x<font color="#000080">);
             </font>outline<font color="#000080">[</font>linepos<font color="#000080">]:=</font>chr<font color="#000080">(</font>outbyte<font color="#000080">);
             </font>inc<font color="#000080">(</font>linepos<font color="#000080">);
             </font><font color="#FF0000"><b>if </b></font>linepos<font color="#000080">&gt;</font><font color="#800000">255 </font><font color="#FF0000"><b>then
             begin
                </b></font>outline<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]:=</font>chr<font color="#000080">(</font><font color="#800000">255</font><font color="#000080">);
                </font>write<font color="#000080">(</font>lst<font color="#000080">,</font>outline<font color="#000080">);
                </font>linepos<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;
             </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{while x&lt;320]}
          </i></font>outline<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]:=</font>chr<font color="#000080">(</font>linepos<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">);
          </font>write<font color="#000080">(</font>lst<font color="#000080">,</font>outline<font color="#000080">);
       </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{pass}
   </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{for y}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*rB'</font><font color="#000080">);               </font><font color="#008000"><i>{end graphics}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">#38</font><font color="#000080">,</font><font color="#800000">#108</font><font color="#000080">,</font><font color="#800000">#48</font><font color="#000080">,</font><font color="#800000">#72</font><font color="#000080">);    </font><font color="#008000"><i>{page feed}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{Xlaser320x200x256}





{this stuff isn't mine, it's borrowed just to demo the dump}
</i></font><font color="#FF0000"><b>procedure </b></font>PutPixel<font color="#000080">(</font>X<font color="#000080">,</font>Y<font color="#000080">: </font>word<font color="#000080">; </font>Color<font color="#000080">: </font>byte<font color="#000080">); </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm
 </b></font><font color="#FF00FF">mov ax,y
 mov bx,x
 xchg ah,al
 add bx,ax
 shr ax,1
 shr ax,1
 add bx,ax
 mov ax,0a000h
 mov es,ax
 mov al,Color
 mov es:[bx],al
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>Ellipse<font color="#000080">(</font>X<font color="#000080">,</font>Y<font color="#000080">,</font>YRad<font color="#000080">,</font>XRad<font color="#000080">: </font>integer<font color="#000080">; </font>Color<font color="#000080">: </font>byte<font color="#000080">);
</font><font color="#FF0000"><b>var
 </b></font>EX<font color="#000080">,</font>EY<font color="#000080">: </font>integer<font color="#000080">;
 </font>YRadSqr<font color="#000080">,</font>YRadSqr2<font color="#000080">,</font>XRadSqr<font color="#000080">,</font>XRadSqr2<font color="#000080">,</font>D<font color="#000080">,</font>DX<font color="#000080">,</font>DY<font color="#000080">: </font>longint<font color="#000080">;
</font><font color="#FF0000"><b>begin
 </b></font>EX<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
 </font>EY<font color="#000080">:=</font>XRad<font color="#000080">;
 </font>YRadSqr<font color="#000080">:=</font>longint<font color="#000080">(</font>YRad<font color="#000080">)*</font>YRad<font color="#000080">;
 </font>YRadSqr2<font color="#000080">:=</font><font color="#800000">2</font><font color="#000080">*</font>YRadSqr<font color="#000080">;
 </font>XRadSqr<font color="#000080">:=</font>longInt<font color="#000080">(</font>XRad<font color="#000080">)*</font>XRad<font color="#000080">;
 </font>XRadSqr2<font color="#000080">:=</font><font color="#800000">2</font><font color="#000080">*</font>XRadSqr<font color="#000080">;
 </font>D<font color="#000080">:=</font>XRadSqr<font color="#000080">-</font>YRadSqr<font color="#000080">*</font>XRad<font color="#000080">+</font>YRadSqr <font color="#FF0000"><b>div </b></font><font color="#800000">4</font><font color="#000080">;
 </font>DX<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
 </font>DY<font color="#000080">:=</font>YRadSqr2<font color="#000080">*</font>XRad<font color="#000080">;
 </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">-</font>EY<font color="#000080">,</font>X<font color="#000080">,</font>Color<font color="#000080">);
 </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">+</font>EY<font color="#000080">,</font>X<font color="#000080">,</font>Color<font color="#000080">);
 </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">,</font>X<font color="#000080">-</font>YRad<font color="#000080">,</font>Color<font color="#000080">);
 </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">,</font>X<font color="#000080">+</font>YRad<font color="#000080">,</font>Color<font color="#000080">);
 </font><font color="#FF0000"><b>while </b></font><font color="#000080">(</font>DX<font color="#000080">&lt;</font>DY<font color="#000080">) </font><font color="#FF0000"><b>do begin
  if </b></font><font color="#000080">(</font>D<font color="#000080">&gt;</font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then begin
   </b></font>Dec<font color="#000080">(</font>EY<font color="#000080">);
   </font>Dec<font color="#000080">(</font>DY<font color="#000080">,</font>YRadSqr2<font color="#000080">);
   </font>Dec<font color="#000080">(</font>D<font color="#000080">,</font>DY<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>Inc<font color="#000080">(</font>EX<font color="#000080">);
  </font>Inc<font color="#000080">(</font>DX<font color="#000080">,</font>XRadSqr2<font color="#000080">);
  </font>Inc<font color="#000080">(</font>D<font color="#000080">,</font>XRadSqr<font color="#000080">+</font>DX<font color="#000080">);
  </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">+</font>EY<font color="#000080">,</font>X<font color="#000080">+</font>EX<font color="#000080">,</font>Color<font color="#000080">);
  </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">+</font>EY<font color="#000080">,</font>X<font color="#000080">-</font>EX<font color="#000080">,</font>Color<font color="#000080">);
  </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">-</font>EY<font color="#000080">,</font>X<font color="#000080">+</font>EX<font color="#000080">,</font>Color<font color="#000080">);
  </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">-</font>EY<font color="#000080">,</font>X<font color="#000080">-</font>EX<font color="#000080">,</font>Color<font color="#000080">);
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font>Inc<font color="#000080">(</font>D<font color="#000080">,(</font><font color="#800000">3</font><font color="#000080">*(</font>YRadSqr<font color="#000080">-</font>XRadSqr<font color="#000080">) </font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">-(</font>DX<font color="#000080">+</font>DY<font color="#000080">)) </font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">);
 </font><font color="#FF0000"><b>while </b></font><font color="#000080">(</font>EY<font color="#000080">&gt;</font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>do begin
  if</b></font><font color="#000080">(</font>D<font color="#000080">&lt;</font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then begin
   </b></font>Inc<font color="#000080">(</font>EX<font color="#000080">);
   </font>Inc<font color="#000080">(</font>DX<font color="#000080">,</font>XRadSqr2<font color="#000080">);
   </font>Inc<font color="#000080">(</font>D<font color="#000080">,</font>XRadSqr<font color="#000080">+</font>DX<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>Dec<font color="#000080">(</font>EY<font color="#000080">);
  </font>Dec<font color="#000080">(</font>DY<font color="#000080">,</font>YRadSqr2<font color="#000080">);
  </font>Inc<font color="#000080">(</font>D<font color="#000080">,</font>YRadSqr<font color="#000080">-</font>DY<font color="#000080">);
  </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">+</font>EY<font color="#000080">,</font>X<font color="#000080">+</font>EX<font color="#000080">,</font>Color<font color="#000080">);
  </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">+</font>EY<font color="#000080">,</font>X<font color="#000080">-</font>EX<font color="#000080">,</font>Color<font color="#000080">);
  </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">-</font>EY<font color="#000080">,</font>X<font color="#000080">+</font>EX<font color="#000080">,</font>Color<font color="#000080">);
  </font>PutPixel<font color="#000080">(</font>Y<font color="#000080">-</font>EY<font color="#000080">,</font>X<font color="#000080">-</font>EX<font color="#000080">,</font>Color<font color="#000080">);
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>begin
 asm
  </b></font><font color="#FF00FF">mov ah,0
  mov al,$13     </font><font color="#008000"><i>{320x200x256 graphic}
  </i></font><font color="#FF00FF">int 10h
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

 </font><font color="#FF0000"><b>for </b></font>y<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">199 </font><font color="#FF0000"><b>do for </b></font>x<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">319 </font><font color="#FF0000"><b>do </b></font>putpixel<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>x <font color="#FF0000"><b>mod </b></font><font color="#800000">256</font><font color="#000080">);
 </font><font color="#FF0000"><b>for </b></font>y<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">98 </font><font color="#FF0000"><b>do
 begin
    </b></font>Ellipse<font color="#000080">(</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">160</font><font color="#000080">,</font>y<font color="#000080">,</font>round<font color="#000080">(</font>y<font color="#000080">*</font><font color="#800000">1.2</font><font color="#000080">),</font>y<font color="#000080">);
    </font>Ellipse<font color="#000080">(</font><font color="#800000">101</font><font color="#000080">,</font><font color="#800000">160</font><font color="#000080">,</font>y<font color="#000080">,</font>round<font color="#000080">(</font>y<font color="#000080">*</font><font color="#800000">1.2</font><font color="#000080">),</font>y<font color="#000080">);    </font><font color="#008000"><i>{Moire killers}
    </i></font>Ellipse<font color="#000080">(</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">161</font><font color="#000080">,</font>y<font color="#000080">,</font>round<font color="#000080">(</font>y<font color="#000080">*</font><font color="#800000">1.2</font><font color="#000080">),</font>y<font color="#000080">);
    </font>Ellipse<font color="#000080">(</font><font color="#800000">99</font><font color="#000080">,</font><font color="#800000">160</font><font color="#000080">,</font>y<font color="#000080">,</font>round<font color="#000080">(</font>y<font color="#000080">*</font><font color="#800000">1.2</font><font color="#000080">),</font>y<font color="#000080">);
    </font>Ellipse<font color="#000080">(</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">159</font><font color="#000080">,</font>y<font color="#000080">,</font>round<font color="#000080">(</font>y<font color="#000080">*</font><font color="#800000">1.2</font><font color="#000080">),</font>y<font color="#000080">);
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>(*
 for y:=0 to 24 do         {gray fountain}
 begin
    for x:=0 to 319 do
    begin
       putpixel(x,y,x div 10);
       putpixel(x,25+y,32+x div 10);
       putpixel(x,50+y,64+(x div 10));
       putpixel(x,75+y,96+(x div 10));
       putpixel(x,100+y,128+(x div 10));
       putpixel(x,125+y,160+(x div 10));
       putpixel(x,150+y,192+(x div 10));
       putpixel(x,175+y,224+(x div 10));
    end;
 end;
 for y:=190 to 199 do for x:=0 to 319 do putpixel(x,y,x mod 256);
 *)
 </i></font>xlaser320x200x256<font color="#000080">;    </font><font color="#008000"><i>{dump}
 </i></font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">mov ah,0
  mov al,$3     </font><font color="#008000"><i>{80x25x16 text}
  </i></font><font color="#FF00FF">int 10h
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#008000"><i>{Miller time}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font><font color="#008000"><i>{   EXAMPLE #6 }
{ ----------------------------   CUT  ------------------------- }

</i></font><font color="#FF0000"><b>uses </b></font>printer<font color="#000080">,</font>graph<font color="#000080">,</font>crt<font color="#000080">;

</font><font color="#FF0000"><b>var </b></font>grDriver<font color="#000080">,</font>grMode<font color="#000080">,</font>ErrCode<font color="#000080">,</font>x<font color="#000080">,</font>y<font color="#000080">:</font>integer<font color="#000080">;


</font><font color="#FF0000"><b>Procedure </b></font>LandscapeXlaser<font color="#000080">;
</font><font color="#008000"><i>(* Ron Nossaman May 1996        nossaman@southwind.net
   Each screen pixel in 640X480x16 graphics mode translates to a 4X4 printer
   pixel at 300 dpi to maintain a similar aspect ratio . This routine
   maps X,Y screen coordinates into the halftone pel, determines the gray
   density level [0..15] according to the color's rgb values, and sends
   the results to a LaserJet II compatible laser printer.  Credit, please
   if you use it in anything.  *)
</i></font><font color="#FF0000"><b>Var
   </b></font>x<font color="#000080">,</font>y<font color="#000080">,</font>pdq<font color="#000080">,</font>linePos<font color="#000080">,</font>pass<font color="#000080">,</font>pass8<font color="#000080">,</font>y32<font color="#000080">,</font>color<font color="#000080">,</font>color2<font color="#000080">:</font>integer<font color="#000080">;
   </font>OutByte<font color="#000080">:</font>byte<font color="#000080">;
   </font>linepix<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">639</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
   </font>outline<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">255</font><font color="#000080">];

   </font>gray<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">15</font><font color="#000080">]</font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
</font><font color="#FF0000"><b>const
   </b></font>yrange<font color="#000080">=</font><font color="#800000">479</font><font color="#000080">;
      </font>xhalf <font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">79</font><font color="#000080">]</font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">=(
                     </font><font color="#800000">03</font><font color="#000080">,</font><font color="#800000">07</font><font color="#000080">,</font><font color="#800000">22</font><font color="#000080">,</font><font color="#800000">30</font><font color="#000080">,            </font><font color="#800000">31</font><font color="#000080">,</font><font color="#800000">27</font><font color="#000080">,      </font><font color="#800000">09</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,
                     </font><font color="#800000">10</font><font color="#000080">,</font><font color="#800000">14</font><font color="#000080">,</font><font color="#800000">18</font><font color="#000080">,</font><font color="#800000">26</font><font color="#000080">,            </font><font color="#800000">23</font><font color="#000080">,</font><font color="#800000">19</font><font color="#000080">,      </font><font color="#800000">13</font><font color="#000080">,</font><font color="#800000">06</font><font color="#000080">,
                                 </font><font color="#800000">28</font><font color="#000080">,</font><font color="#800000">20</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">12</font><font color="#000080">,</font><font color="#800000">08</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,      </font><font color="#800000">17</font><font color="#000080">,</font><font color="#800000">21</font><font color="#000080">,
                                 </font><font color="#800000">31</font><font color="#000080">,</font><font color="#800000">24</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">01</font><font color="#000080">,</font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">11</font><font color="#000080">,      </font><font color="#800000">25</font><font color="#000080">,</font><font color="#800000">29</font><font color="#000080">,
                           </font><font color="#800000">31</font><font color="#000080">,</font><font color="#800000">27</font><font color="#000080">,      </font><font color="#800000">09</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,</font><font color="#800000">03</font><font color="#000080">,</font><font color="#800000">07</font><font color="#000080">,</font><font color="#800000">22</font><font color="#000080">,</font><font color="#800000">30</font><font color="#000080">,
                           </font><font color="#800000">23</font><font color="#000080">,</font><font color="#800000">19</font><font color="#000080">,      </font><font color="#800000">13</font><font color="#000080">,</font><font color="#800000">06</font><font color="#000080">,</font><font color="#800000">10</font><font color="#000080">,</font><font color="#800000">14</font><font color="#000080">,</font><font color="#800000">18</font><font color="#000080">,</font><font color="#800000">26</font><font color="#000080">,
                           </font><font color="#800000">08</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,      </font><font color="#800000">17</font><font color="#000080">,</font><font color="#800000">21</font><font color="#000080">,            </font><font color="#800000">28</font><font color="#000080">,</font><font color="#800000">20</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">12</font><font color="#000080">,
                           </font><font color="#800000">04</font><font color="#000080">,</font><font color="#800000">11</font><font color="#000080">,      </font><font color="#800000">25</font><font color="#000080">,</font><font color="#800000">29</font><font color="#000080">,            </font><font color="#800000">31</font><font color="#000080">,</font><font color="#800000">24</font><font color="#000080">,</font><font color="#800000">05</font><font color="#000080">,</font><font color="#800000">01</font><font color="#000080">,
                     </font><font color="#800000">03</font><font color="#000080">,</font><font color="#800000">07</font><font color="#000080">,</font><font color="#800000">22</font><font color="#000080">,</font><font color="#800000">30</font><font color="#000080">,            </font><font color="#800000">31</font><font color="#000080">,</font><font color="#800000">27</font><font color="#000080">,      </font><font color="#800000">09</font><font color="#000080">,</font><font color="#800000">02</font><font color="#000080">,
                     </font><font color="#800000">10</font><font color="#000080">,</font><font color="#800000">14</font><font color="#000080">,</font><font color="#800000">18</font><font color="#000080">,</font><font color="#800000">26</font><font color="#000080">,            </font><font color="#800000">23</font><font color="#000080">,</font><font color="#800000">19</font><font color="#000080">,      </font><font color="#800000">13</font><font color="#000080">,</font><font color="#800000">06</font><font color="#000080">);

</font><font color="#FF0000"><b>procedure </b></font>graysum<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>palette<font color="#000080">:</font>palettetype<font color="#000080">;
    </font>r<font color="#000080">,</font>g<font color="#000080">,</font>b<font color="#000080">:</font>byte<font color="#000080">;
    </font>c<font color="#000080">:</font>word<font color="#000080">;
    </font>i<font color="#000080">:</font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
   </b></font>getpalette<font color="#000080">(</font>palette<font color="#000080">);
   </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">15 </font><font color="#FF0000"><b>do
   begin
      </b></font>c<font color="#000080">:=</font>palette<font color="#000080">.</font>colors<font color="#000080">[</font>i<font color="#000080">];
      </font><font color="#FF0000"><b>asm
        </b></font><font color="#FF00FF">mov ah,$10;
        mov al,$15;
        mov bx,c;
        int $10;
        mov r,dh;
        mov g,ch;
        mov b,cl;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font>gray<font color="#000080">[</font>i<font color="#000080">]:=</font>round<font color="#000080">((</font>r<font color="#000080">*</font><font color="#800000">0.3</font><font color="#000080">)+(</font>g<font color="#000080">*</font><font color="#800000">0.59</font><font color="#000080">)+(</font>b<font color="#000080">*</font><font color="#800000">0.11</font><font color="#000080">))</font><font color="#FF0000"><b>div </b></font><font color="#800000">4</font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


   </font><font color="#FF0000"><b>Procedure </b></font>assemblebyte<font color="#000080">;
   </font><font color="#FF0000"><b>var </b></font>i<font color="#000080">:</font>integer<font color="#000080">;
   </font><font color="#FF0000"><b>begin
      </b></font>color2<font color="#000080">:=</font>color <font color="#FF0000"><b>shl </b></font><font color="#800000">1</font><font color="#000080">;
      </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">3 </font><font color="#FF0000"><b>do
      begin
         </b></font>outbyte<font color="#000080">:=</font>outbyte <font color="#FF0000"><b>shl </b></font><font color="#800000">1</font><font color="#000080">;
         </font><font color="#FF0000"><b>if </b></font>color2<font color="#000080">&gt;=</font>xhalf<font color="#000080">[</font>pdq<font color="#000080">+</font>i<font color="#000080">] </font><font color="#FF0000"><b>then </b></font>outbyte<font color="#000080">:=</font>outbyte <font color="#FF0000"><b>or </b></font><font color="#800000">1</font><font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;</font><font color="#008000"><i>{assemblebyte}


</i></font><font color="#FF0000"><b>Begin        </b></font><font color="#008000"><i>{LandscapeXlaser}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'E'</font><font color="#000080">);
   </font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'&amp;l1O'</font><font color="#000080">);    </font><font color="#008000"><i>{landscape}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*r0F'</font><font color="#000080">);    </font><font color="#008000"><i>{no rotation}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*p300X'</font><font color="#000080">);  </font><font color="#008000"><i>{Set cursor position}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*t300R'</font><font color="#000080">);    </font><font color="#008000"><i>{raster graphics @300dpi}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*r1A'</font><font color="#000080">);      </font><font color="#008000"><i>{start graphics - current cursor}
   </i></font>graysum<font color="#000080">;      </font><font color="#008000"><i>{convert to grayscale by color intensity}
   </i></font><font color="#FF0000"><b>for </b></font>y<font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>yrange <font color="#FF0000"><b>do
    begin
       </b></font>y32<font color="#000080">:=(</font>y <font color="#FF0000"><b>and </b></font><font color="#800000">1</font><font color="#000080">)*</font><font color="#800000">32</font><font color="#000080">;
       </font><font color="#FF0000"><b>for </b></font>x<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">639 </font><font color="#FF0000"><b>do </b></font>linepix<font color="#000080">[</font>x<font color="#000080">]:=</font>gray<font color="#000080">[</font>getpixel<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">)];  </font><font color="#008000"><i>{screen dump}
       </i></font><font color="#FF0000"><b>if </b></font>keypressed <font color="#FF0000"><b>then if </b></font>readkey <font color="#000080">=</font><font color="#800000">#27 </font><font color="#FF0000"><b>then
          begin
             </b></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*rB'</font><font color="#000080">);               </font><font color="#008000"><i>{end graphics}
             </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">#38</font><font color="#000080">,</font><font color="#800000">#108</font><font color="#000080">,</font><font color="#800000">#48</font><font color="#000080">,</font><font color="#800000">#72</font><font color="#000080">);    </font><font color="#008000"><i>{page feed}
             </i></font>exit<font color="#000080">;
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
       </font><font color="#FF0000"><b>for </b></font>pass<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">3 </font><font color="#FF0000"><b>do
       begin
          </b></font>pass8<font color="#000080">:=</font>pass<font color="#000080">*</font><font color="#800000">8</font><font color="#000080">;
          </font>setcolor<font color="#000080">(</font>pass<font color="#000080">); </font>Line<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font>y<font color="#000080">,</font><font color="#800000">20</font><font color="#000080">,</font>y<font color="#000080">); </font><font color="#008000"><i>{visual progress report}
          </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*b320W'</font><font color="#000080">);
          </font>x<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
          </font>linepos<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;
          </font><font color="#FF0000"><b>while </b></font>x<font color="#000080">&lt;</font><font color="#800000">640 </font><font color="#FF0000"><b>do
          begin
             </b></font>OutByte<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;  </font><font color="#008000"><i>{avoid range check error when it's shifted later}
             </i></font>pdq<font color="#000080">:=</font>pass8<font color="#000080">+</font>y32<font color="#000080">;
             </font>color<font color="#000080">:=</font>linepix<font color="#000080">[</font>x<font color="#000080">];
             </font>assemblebyte<font color="#000080">;
             </font>inc<font color="#000080">(</font>x<font color="#000080">);
             </font>pdq<font color="#000080">:=</font>pdq<font color="#000080">+</font><font color="#800000">4</font><font color="#000080">;
             </font>color<font color="#000080">:=</font>linepix<font color="#000080">[</font>x<font color="#000080">];
             </font>assemblebyte<font color="#000080">;
             </font>inc<font color="#000080">(</font>x<font color="#000080">);
             </font>outline<font color="#000080">[</font>linepos<font color="#000080">]:=</font>chr<font color="#000080">(</font>outbyte<font color="#000080">);
             </font>inc<font color="#000080">(</font>linepos<font color="#000080">);
             </font><font color="#FF0000"><b>if </b></font>linepos<font color="#000080">&gt;</font><font color="#800000">255 </font><font color="#FF0000"><b>then
             begin
                </b></font>outline<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]:=</font>chr<font color="#000080">(</font><font color="#800000">255</font><font color="#000080">);
                </font>write<font color="#000080">(</font>lst<font color="#000080">,</font>outline<font color="#000080">);
                </font>linepos<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;
             </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{while x&lt;640]}
          </i></font>outline<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]:=</font>chr<font color="#000080">(</font>linepos<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">);
          </font>write<font color="#000080">(</font>lst<font color="#000080">,</font>outline<font color="#000080">);
       </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{pass}
   </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{for y}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'*rB'</font><font color="#000080">);               </font><font color="#008000"><i>{end graphics}
   </i></font>write<font color="#000080">(</font>lst<font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">#38</font><font color="#000080">,</font><font color="#800000">#108</font><font color="#000080">,</font><font color="#800000">#48</font><font color="#000080">,</font><font color="#800000">#72</font><font color="#000080">);    </font><font color="#008000"><i>{page feed}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{landscapeXlaser}




</i></font><font color="#FF0000"><b>begin
  </b></font>grDriver <font color="#000080">:= </font>Detect<font color="#000080">;
  </font>InitGraph<font color="#000080">(</font>grDriver<font color="#000080">,</font>grmode<font color="#000080">,</font><font color="#800000">''</font><font color="#000080">);
  </font>setgraphmode<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">);
  </font>ErrCode <font color="#000080">:= </font>GraphResult<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>ErrCode <font color="#000080">&lt;&gt; </font>grOk <font color="#FF0000"><b>then
    begin
      </b></font>CloseGraph<font color="#000080">;
      </font>Writeln<font color="#000080">(</font><font color="#800000">'Graphics error:'</font><font color="#000080">, </font>GraphErrorMsg<font color="#000080">(</font>ErrCode<font color="#000080">));
      </font>exit<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>y<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">470 </font><font color="#FF0000"><b>do
  begin
     </b></font>setcolor<font color="#000080">((</font>y <font color="#FF0000"><b>mod </b></font><font color="#800000">256</font><font color="#000080">) </font><font color="#FF0000"><b>div </b></font><font color="#800000">16</font><font color="#000080">);
     </font>line<font color="#000080">(</font>y<font color="#000080">,</font>y<font color="#000080">,</font><font color="#800000">639</font><font color="#000080">,</font>y<font color="#000080">);
     </font>line<font color="#000080">(</font>y<font color="#000080">,</font>y<font color="#000080">,</font>y<font color="#000080">,</font><font color="#800000">479</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>y<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">180 </font><font color="#FF0000"><b>do
  begin
     </b></font>setcolor<font color="#000080">((</font>y <font color="#FF0000"><b>mod </b></font><font color="#800000">128</font><font color="#000080">) </font><font color="#FF0000"><b>div </b></font><font color="#800000">8</font><font color="#000080">);
     </font>circle<font color="#000080">(</font><font color="#800000">190</font><font color="#000080">,</font><font color="#800000">240</font><font color="#000080">,</font>y<font color="#000080">);
     </font>circle<font color="#000080">(</font><font color="#800000">191</font><font color="#000080">,</font><font color="#800000">240</font><font color="#000080">,</font>y<font color="#000080">);
     </font>circle<font color="#000080">(</font><font color="#800000">450</font><font color="#000080">,</font><font color="#800000">240</font><font color="#000080">,</font>y<font color="#000080">);
     </font>circle<font color="#000080">(</font><font color="#800000">449</font><font color="#000080">,</font><font color="#800000">240</font><font color="#000080">,</font>y<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>landscapexlaser<font color="#000080">;
  </font>closegraph<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to PRINTING SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0053.PAS">Original</a><b>]</b></p></body>
</html>
