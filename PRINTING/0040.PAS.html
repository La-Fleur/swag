<html>
<head><title> "Disable Print-Screen" by GREG ESTABROOKS</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to PRINTING SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0040.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt;If anyone could tell me how to disable [Print Screen] from within a
&gt;text-based program, I would appreciate it.  Thanks, - Jeff Napier, Another
&gt;Company -

 For that you can trap int 5h(Print Screen interrupt) Here is a program I
wrote for someone on another network that will show you the basics of how
it can be done:

nstn1410@fox.nstn.ca
}
</i></font><font color="#FF0000"><b>PROGRAM </b></font>DisableInt05h<font color="#000080">;          </font><font color="#008000"><i>{ Dec 13/93, Greg Estabrooks.           }
</i></font><font color="#FF0000"><b>USES </b></font>CRT<font color="#000080">,                       </font><font color="#008000"><i>{ IMPORT Clrscr,KeyPressed.             }
     </i></font>DOS<font color="#000080">;                       </font><font color="#008000"><i>{ IMPORT SetIntVec,GetIntVec.           }
</i></font><font color="#FF0000"><b>VAR
   </b></font>OldInt05   <font color="#000080">:</font>POINTER<font color="#000080">;         </font><font color="#008000"><i>{ Holds the old address of INT 05h.     }
   </i></font>NumPressed <font color="#000080">:</font>WORD<font color="#000080">;            </font><font color="#008000"><i>{ The number of times PrtScr was pressed.}
   </i></font>Misc       <font color="#000080">:</font>WORD<font color="#000080">;

</font><font color="#008000"><i>{$F+}                           { Force FAR calls.                      }
</i></font><font color="#FF0000"><b>PROCEDURE </b></font>NewInt05<font color="#000080">; </font><font color="#FF0000"><b>ASSEMBLER</b></font><font color="#000080">;
</font><font color="#FF0000"><b>ASM
  </b></font><font color="#FF00FF">Push DS                       </font><font color="#008000"><i>{ Push DS onto stack.                   }
  </i></font><font color="#FF00FF">Mov AX,Seg @Data              </font><font color="#008000"><i>{ Now point DS to our data segment.     }
  </i></font><font color="#FF00FF">Mov DS,AX
  Add NumPressed,1              </font><font color="#008000"><i>{ Add one to counter.                   }
  </i></font><font color="#FF00FF">Pop DS                        </font><font color="#008000"><i>{ Pop DS off stack.                     }
  </i></font><font color="#FF00FF">IRet                          </font><font color="#008000"><i>{ Force a return and pop flags off stack.}
</i></font><font color="#FF0000"><b>END</b></font><font color="#000080">;</font><font color="#008000"><i>{NewInt05}
{$F-}                           { Back to normal.                       }

</i></font><font color="#FF0000"><b>BEGIN
  </b></font>NumPressed <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;             </font><font color="#008000"><i>{ Clear number count.                    }
  </i></font>Clrscr<font color="#000080">;                      </font><font color="#008000"><i>{ Clear the screen.                      }
  </i></font>GetIntVec<font color="#000080">(</font><font color="#800000">$05</font><font color="#000080">,</font>OldInt05<font color="#000080">);     </font><font color="#008000"><i>{ Save Old Interrupt vector.             }
  </i></font>SetIntVec<font color="#000080">(</font><font color="#800000">$05</font><font color="#000080">,@</font>NewInt05<font color="#000080">);    </font><font color="#008000"><i>{ Point to our trap.                     }
  </i></font>Misc <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;                   </font><font color="#008000"><i>{ Clear Counter.                         }
  </i></font><font color="#FF0000"><b>REPEAT                       </b></font><font color="#008000"><i>{ Loop Until a key other than PrtScr is  }
                               { pressed.                               }
    </i></font>GOTOXY<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);               </font><font color="#008000"><i>{ Always show info at top corner.        }
    </i></font>Write<font color="#000080">(</font>Misc<font color="#000080">:</font><font color="#800000">8</font><font color="#000080">,</font><font color="#800000">'...  You have pressed PrtScr '</font><font color="#000080">,</font>NumPressed<font color="#000080">:</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">' times.'</font><font color="#000080">);
    </font>INC<font color="#000080">(</font>Misc<font color="#000080">);                 </font><font color="#008000"><i>{ Increase counter to show a change.     }
  </i></font><font color="#FF0000"><b>UNTIL </b></font>KeyPressed<font color="#000080">;
  </font>SetIntVec<font color="#000080">(</font><font color="#800000">$05</font><font color="#000080">,</font>OldInt05<font color="#000080">);     </font><font color="#008000"><i>{ Restore Old Interrupt vector.          }
</i></font><font color="#FF0000"><b>END</b></font><font color="#000080">.</font><font color="#008000"><i>{DisableInt05h}
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to PRINTING SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0040.PAS">Original</a><b>]</b></p></body>
</html>
