<html>
<head><title> "Is Printer Online ??" by MIKE COPELAND</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to PRINTING SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0035.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt;&gt;    I'm using TP6 and plan to use to the PRINTER.TPU unit the
&gt;&gt;    write to the printer.  How do you detect whether the printer
&gt;&gt;    is on or not without ending up a dos error and the program
&gt;&gt;    halting.

   You need to check the status of the printer port.  Something like
this:
}

</i></font><font color="#FF0000"><b>function </b></font>TESTONLINE <font color="#000080">: </font>Byte<font color="#000080">;           </font><font color="#008000"><i>{ Tests for Printer On Line }
</i></font><font color="#FF0000"><b>var </b></font>REGS <font color="#000080">: </font>Registers<font color="#000080">;
</font><font color="#FF0000"><b>begin
  with </b></font>REGS <font color="#FF0000"><b>do
    begin
      </b></font>AH <font color="#000080">:= </font><font color="#800000">2</font><font color="#000080">; </font>DX <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
      </font>Intr<font color="#000080">(</font><font color="#800000">$17</font><font color="#000080">, </font>Dos<font color="#000080">.</font>Registers<font color="#000080">(</font>REGS<font color="#000080">));
      </font>TESTONLINE <font color="#000080">:= </font>AH
    <font color="#FF0000"><b>end
end</b></font><font color="#000080">;  </font><font color="#008000"><i>{ TESTONLINE }

  </i></font><font color="#FF0000"><b>if </b></font>TESTONLINE <font color="#000080">= </font><font color="#800000">144 </font><font color="#FF0000"><b>then </b></font>okay_to_print
  <font color="#FF0000"><b>else                     </b></font>printer_not_ready


</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to PRINTING SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0035.PAS">Original</a><b>]</b></p></body>
</html>
