<html>
<head><title> "Towers of Hanoi" by ELTON K TEKOLSTE</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to WIN-OS2 SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0015.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
I saw a postihg yesterday requesting source code for the Tower of Hanoi
problem. This proplem is an old chestnut which we drag out to demonstrate
recursion after we realize that factorial is really iteration.

Here is source code done in TPW1.5.
}

</i></font><font color="#FF0000"><b>program </b></font>TowersofHanoi<font color="#000080">;

</font><font color="#FF0000"><b>uses
  </b></font>CRT<font color="#000080">; </font><font color="#008000"><i>{ Not needed unless using Windows version }
       { copyright 1993 E. Kurt TeKolste }
       { no rights reserved }

</i></font><font color="#FF0000"><b>const
  </b></font>Max <font color="#000080">= </font><font color="#800000">20</font><font color="#000080">;  </font><font color="#008000"><i>{ Use all of this at your peril }
  </i></font>A   <font color="#000080">= </font><font color="#800000">'A'</font><font color="#000080">;  </font><font color="#008000"><i>{ Names of the three towers }
  </i></font>B   <font color="#000080">= </font><font color="#800000">'B'</font><font color="#000080">;
  </font>C   <font color="#000080">= </font><font color="#800000">'C'</font><font color="#000080">;

</font><font color="#FF0000"><b>type
  </b></font>Stack <font color="#000080">= </font><font color="#800000">1</font><font color="#000080">..</font>Max<font color="#000080">;
  </font>Disk  <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">..</font>Max<font color="#000080">;

  </font>Tower <font color="#000080">= </font><font color="#FF0000"><b>object
    </b></font>Depth <font color="#000080">: </font>integer<font color="#000080">;  </font><font color="#008000"><i>{ the current number of disks on the tower }
    </i></font>V <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font>Stack<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Disk<font color="#000080">; </font><font color="#008000"><i>{ the sizes of the disks on the tower }

    </i></font><font color="#FF0000"><b>constructor </b></font>Init<font color="#000080">(</font>N <font color="#000080">: </font>integer<font color="#000080">); </font><font color="#008000"><i>{creates a tower with disks 1..N }
    </i></font><font color="#FF0000"><b>procedure </b></font>Add<font color="#000080">(</font>D <font color="#000080">: </font>Disk<font color="#000080">);     </font><font color="#008000"><i>{ Adds a disk of size D on top }
    </i></font><font color="#FF0000"><b>function  </b></font>Remove <font color="#000080">: </font>Disk<font color="#000080">;     </font><font color="#008000"><i>{ Removes the top disk and returns its size }
    </i></font><font color="#FF0000"><b>procedure </b></font>Print<font color="#000080">;   </font><font color="#008000"><i>{ Prints a tower }
  </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>constructor </b></font>Tower<font color="#000080">.</font>Init<font color="#000080">(</font>N <font color="#000080">: </font>integer<font color="#000080">);
</font><font color="#FF0000"><b>var
  </b></font>I <font color="#000080">: </font>Disk<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Depth <font color="#000080">:= </font>N<font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>I <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>N  <font color="#FF0000"><b>do </b></font>V<font color="#000080">[</font>I<font color="#000080">] := </font>I<font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>I <font color="#000080">:= </font>succ<font color="#000080">(</font>N<font color="#000080">) </font><font color="#FF0000"><b>to </b></font>Max <font color="#FF0000"><b>do </b></font>V<font color="#000080">[</font>I<font color="#000080">] := </font><font color="#800000">0</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>Tower<font color="#000080">.</font>Add<font color="#000080">(</font>D <font color="#000080">: </font>Disk<font color="#000080">);
</font><font color="#FF0000"><b>begin
  </b></font>Depth    <font color="#000080">:= </font>succ<font color="#000080">(</font>Depth<font color="#000080">);
  </font>V<font color="#000080">[</font>Depth<font color="#000080">] := </font>D<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>Tower<font color="#000080">.</font>Remove <font color="#000080">: </font>Disk<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Remove <font color="#000080">:= </font>V<font color="#000080">[</font>Depth<font color="#000080">];
  </font>Depth  <font color="#000080">:= </font>pred<font color="#000080">(</font>Depth<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>Tower<font color="#000080">.</font>Print<font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>I <font color="#000080">: </font>Stack<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>clreol<font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>I <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>Depth <font color="#FF0000"><b>do </b></font>write<font color="#000080">(</font>V<font color="#000080">[</font>I<font color="#000080">]:</font><font color="#800000">3</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>type
  </b></font>Hanoi <font color="#000080">= </font><font color="#FF0000"><b>object
    </b></font>Display <font color="#000080">: </font>boolean<font color="#000080">;  </font><font color="#008000"><i>{ If true, each move is displayed. }
    </i></font>Pause   <font color="#000080">: </font>boolean<font color="#000080">;  </font><font color="#008000"><i>{ If true, waits for keypress to continue after
                          each move. }
    </i></font>S       <font color="#000080">: </font>Stack<font color="#000080">;    </font><font color="#008000"><i>{ The number of disks on the towers.}
    </i></font>H       <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font>A<font color="#000080">..</font>C<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Tower<font color="#000080">;

    </font><font color="#FF0000"><b>constructor </b></font>Init<font color="#000080">(</font>I <font color="#000080">: </font>Stack<font color="#000080">; </font><font color="#FF0000"><b>On </b></font><font color="#000080">: </font>boolean<font color="#000080">; </font>Wait <font color="#000080">: </font>boolean<font color="#000080">);
                </font><font color="#008000"><i>{ Creates a tower of Hanoi with I disks, the display
                  determined by On and the pause determined by Wait. }
    </i></font><font color="#FF0000"><b>procedure </b></font>Move<font color="#000080">( </font>N <font color="#000080">: </font>integer<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>Source<font color="#000080">, </font>Sink<font color="#000080">, </font>Using <font color="#000080">: </font>Tower<font color="#000080">);
                    </font><font color="#008000"><i>{ Moves the top N disks from Source to Sink using Using. }
    </i></font><font color="#FF0000"><b>procedure </b></font>Transfer<font color="#000080">;
                       </font><font color="#008000"><i>{ Moves all of the disks from A to C. }
    </i></font><font color="#FF0000"><b>procedure </b></font>Print<font color="#000080">;
                        </font><font color="#008000"><i>{ Prints the Towers of Hanoi }
  </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>constructor </b></font>Hanoi<font color="#000080">.</font>Init<font color="#000080">(</font>I <font color="#000080">: </font>Stack<font color="#000080">; </font><font color="#FF0000"><b>On </b></font><font color="#000080">: </font>boolean<font color="#000080">; </font>Wait <font color="#000080">: </font>boolean<font color="#000080">);
</font><font color="#FF0000"><b>begin
  if </b></font>I <font color="#000080">&lt; </font>Max <font color="#FF0000"><b>then </b></font>S <font color="#000080">:= </font>I <font color="#FF0000"><b>else </b></font>S <font color="#000080">:= </font>Max<font color="#000080">;
  </font>Display <font color="#000080">:= </font><font color="#FF0000"><b>On</b></font><font color="#000080">;
  </font>Pause   <font color="#000080">:= </font>Wait<font color="#000080">;
  </font>H<font color="#000080">[</font>A<font color="#000080">].</font>Init<font color="#000080">(</font>S<font color="#000080">);
  </font>H<font color="#000080">[</font>B<font color="#000080">].</font>Init<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
  </font>H<font color="#000080">[</font>C<font color="#000080">].</font>Init<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>Hanoi<font color="#000080">.</font>Move<font color="#000080">(</font>N <font color="#000080">: </font>integer<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>Source<font color="#000080">, </font>Sink<font color="#000080">, </font>Using <font color="#000080">: </font>Tower<font color="#000080">);
</font><font color="#FF0000"><b>var
  </b></font>F <font color="#000080">: </font>char<font color="#000080">;
</font><font color="#FF0000"><b>begin
  if </b></font>N <font color="#000080">&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
  begin
    </b></font>Move<font color="#000080">(</font>N<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">, </font>Source<font color="#000080">, </font>Using<font color="#000080">, </font>Sink<font color="#000080">);
    </font>Sink<font color="#000080">.</font>Add<font color="#000080">(</font>Source<font color="#000080">.</font>Remove<font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font>Display <font color="#FF0000"><b>then
    begin
      </b></font>Print<font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font>Pause   <font color="#FF0000"><b>then
      begin
        repeat until </b></font>keypressed<font color="#000080">;
        </font>F <font color="#000080">:= </font>readkey<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>Move<font color="#000080">(</font>N<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">, </font>Using<font color="#000080">, </font>Sink<font color="#000080">, </font>Source<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>Hanoi<font color="#000080">.</font>Print<font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>X <font color="#000080">: </font>A<font color="#000080">..</font>C<font color="#000080">;
</font><font color="#FF0000"><b>begin
  for </b></font>X <font color="#000080">:= </font>A <font color="#FF0000"><b>to </b></font>C <font color="#FF0000"><b>do
  begin
    </b></font>gotoxy<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font>ord<font color="#000080">(</font>X<font color="#000080">) - </font>Ord<font color="#000080">(</font>A<font color="#000080">) + </font><font color="#800000">1</font><font color="#000080">);
    </font>H<font color="#000080">[</font>X<font color="#000080">].</font>Print<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>Hanoi<font color="#000080">.</font>Transfer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Move<font color="#000080">(</font>S<font color="#000080">, </font>H<font color="#000080">[</font>A<font color="#000080">], </font>H<font color="#000080">[</font>B<font color="#000080">], </font>H<font color="#000080">[</font>C<font color="#000080">]);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>var
  </b></font>T <font color="#000080">: </font>Hanoi<font color="#000080">;
</font><font color="#FF0000"><b>begin
  with </b></font>T <font color="#FF0000"><b>do
  begin
    </b></font>Init<font color="#000080">(</font><font color="#800000">6</font><font color="#000080">,</font>true<font color="#000080">,</font>true<font color="#000080">);
    </font>Transfer<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to WIN-OS2 SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0015.PAS">Original</a><b>]</b></p></body>
</html>
