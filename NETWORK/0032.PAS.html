<html>
<head><title> "IPX Chat Box" by WILLEM VAN DE VIS</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to NETWORK SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0032.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
From: S0730076@let.rug.nl (ill)

I wrote a chatbox with one of those ipx units. Pretty standard but funny
because you can send the other guy screentrashes and beeps and buzzes etc.

I dare not post it here cause Timo is gonna flame me with that standard
'don't post any binaries' file so mail me if you want it. I'll include
source from the main file here, but you can't compile it without some
other units I'm afraid.
}

{$R+}
</i></font><font color="#FF0000"><b>uses </b></font>ipx<font color="#000080">, </font>crt<font color="#000080">,</font>ill<font color="#000080">,</font>win<font color="#000080">, </font>novell<font color="#000080">, </font>strings<font color="#000080">;


</font><font color="#FF0000"><b>const
     </b></font>receive_socket <font color="#000080">= </font><font color="#800000">$7713</font><font color="#000080">;
     </font>send_socket <font color="#000080">= </font><font color="#800000">$6613</font><font color="#000080">;
     </font>starty <font color="#000080">= </font><font color="#800000">7</font><font color="#000080">;
     </font>maxy <font color="#000080">= </font><font color="#800000">9</font><font color="#000080">;
     </font>maxlen <font color="#000080">= </font><font color="#800000">77</font><font color="#000080">;
     </font>versie <font color="#000080">= </font><font color="#800000">'Nag 0.81'</font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>abort<font color="#000080">(</font><font color="#FF0000"><b>message</b></font><font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">);
</font><font color="#FF0000"><b>begin
     </b></font>writeln<font color="#000080">(</font><font color="#FF0000"><b>message</b></font><font color="#000080">);
     </font>halt<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>var
   </b></font>i                          <font color="#000080">: </font>byte<font color="#000080">;
   </font>x<font color="#000080">,</font>y<font color="#000080">,</font>xx                     <font color="#000080">: </font>word<font color="#000080">;
   </font>connection_number          <font color="#000080">: </font>word<font color="#000080">;
   </font>network_number             <font color="#000080">: </font>networkNumber<font color="#000080">;
   </font>network_node               <font color="#000080">: </font>networkNode<font color="#000080">;
   </font>receive_ecb<font color="#000080">,</font>send_ecb       <font color="#000080">: </font>ECB<font color="#000080">;
   </font>receive_header<font color="#000080">,</font>send_header <font color="#000080">: </font>IPXHeader<font color="#000080">;
   </font>send_message<font color="#000080">, </font>receive_message <font color="#000080">: </font>MessageSTR<font color="#000080">;
   </font>done                        <font color="#000080">: </font>boolean<font color="#000080">;
   </font><font color="#FF0000"><b>message</b></font><font color="#000080">,</font>naam                <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
   </font>code<font color="#000080">, </font>station               <font color="#000080">: </font>integer<font color="#000080">;
   </font>InStrings                   <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font>maxy<font color="#000080">] </font><font color="#FF0000"><b>of string</b></font><font color="#000080">[</font>maxlen<font color="#000080">];
   </font>blinking          <font color="#000080">: </font>boolean<font color="#000080">;


</font><font color="#FF0000"><b>procedure </b></font>info<font color="#000080">(</font>txt <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">);
</font><font color="#FF0000"><b>begin
 </b></font>txt <font color="#000080">:= </font><font color="#800000">'&Auml;'</font><font color="#000080">+</font>txt <font color="#000080">+
</font><font color="#800000">'&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;'
 </font>writeline<font color="#000080">(</font>copy<font color="#000080">(</font>txt<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">78</font><font color="#000080">), </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">16</font><font color="#000080">, </font>black<font color="#000080">, </font>lightgray<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>writeInStrings<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>q<font color="#000080">: </font>integer<font color="#000080">;
    </font>col <font color="#000080">: </font>word<font color="#000080">;
</font><font color="#FF0000"><b>begin
</b></font>col <font color="#000080">:= </font>lightgray<font color="#000080">;
</font><font color="#FF0000"><b>if </b></font>blinking <font color="#FF0000"><b>then </b></font>col <font color="#000080">:= </font>col <font color="#000080">+ </font>blink<font color="#000080">;
</font><font color="#FF0000"><b>for </b></font>q <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>maxy <font color="#FF0000"><b>do
     </b></font>writeline<font color="#000080">(</font>InStrings<font color="#000080">[</font>q<font color="#000080">], </font><font color="#800000">1</font><font color="#000080">, </font>q <font color="#000080">+ </font>starty<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">,</font>col<font color="#000080">, </font>black<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>procedure </b></font>wipe<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>q <font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
</b></font>blinking <font color="#000080">:= </font>false<font color="#000080">;
</font>info<font color="#000080">(</font><font color="#800000">'Your screen is being wiped'</font><font color="#000080">);
</font><font color="#FF0000"><b>for </b></font>q <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>maxy <font color="#FF0000"><b>do
begin
    </b></font>inStrings<font color="#000080">[</font>q<font color="#000080">] :=
</font><font color="#800000">'                                                                             
';
</font>writeInstrings<font color="#000080">;
</font>clrscr<font color="#000080">;
</font>x <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
</font>y <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>shit<font color="#000080">(</font>ki <font color="#000080">: </font>keytype<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>shitty <font color="#000080">: </font>char<font color="#000080">);
</font><font color="#FF0000"><b>begin
     </b></font>shitty <font color="#000080">:= </font><font color="#800000">#0</font><font color="#000080">;
     </font><font color="#FF0000"><b>case </b></font>ki <font color="#FF0000"><b>of
          </b></font>f1 <font color="#000080">: </font><font color="#FF0000"><b>begin
                   </b></font>info<font color="#000080">(</font><font color="#800000">'Sending BUZZ to '</font><font color="#000080">+</font>paramstr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">));
                   </font>shitty <font color="#000080">:= </font><font color="#800000">#201</font><font color="#000080">;
              </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
          </font>f2 <font color="#000080">:   </font><font color="#FF0000"><b>begin
                     </b></font>info<font color="#000080">(</font><font color="#800000">'Sending BEEP to '</font><font color="#000080">+</font>paramstr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">));
                     </font>shitty <font color="#000080">:= </font><font color="#800000">#202</font><font color="#000080">;
                </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
          </font>f3 <font color="#000080">: </font><font color="#FF0000"><b>begin
                   </b></font>info<font color="#000080">(</font><font color="#800000">'Sending FLASH to '</font><font color="#000080">+</font>paramstr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">));
                   </font>shitty <font color="#000080">:= </font><font color="#800000">#203</font><font color="#000080">;
              </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
          </font>f4<font color="#000080">: </font><font color="#FF0000"><b>begin
                  </b></font>info<font color="#000080">(</font><font color="#800000">'Calling '</font><font color="#000080">+</font>paramstr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">)+</font><font color="#800000">' a sucker'</font><font color="#000080">);
                  </font>shitty <font color="#000080">:= </font><font color="#800000">#204</font><font color="#000080">;
             </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
         </font>f5<font color="#000080">: </font><font color="#FF0000"><b>begin
                  </b></font>info<font color="#000080">(</font><font color="#800000">'Blinking your text on '</font><font color="#000080">+</font>paramstr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">)+</font><font color="#800000">'''s screen'</font><font color="#000080">);
                  </font>shitty <font color="#000080">:= </font><font color="#800000">#205</font><font color="#000080">;
             </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
         </font>f6<font color="#000080">: </font><font color="#FF0000"><b>begin
                  </b></font>info<font color="#000080">(</font><font color="#800000">'Trashing the other guy''s screen'</font><font color="#000080">);
                  </font>shitty <font color="#000080">:= </font><font color="#800000">#206</font><font color="#000080">;
             </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
          </font>f10<font color="#000080">: </font>wipe<font color="#000080">;

     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>flash<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>q <font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
     </b></font>info<font color="#000080">(</font><font color="#800000">'The other guy is making your screen flash!'</font><font color="#000080">);
</font><font color="#FF0000"><b>for </b></font>q <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">10 </font><font color="#FF0000"><b>do
begin
     </b></font>open_win<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">80</font><font color="#000080">,</font><font color="#800000">24</font><font color="#000080">, </font>white<font color="#000080">, </font>white<font color="#000080">);
     </font>delay<font color="#000080">(</font><font color="#800000">10</font><font color="#000080">);
     </font>close_win<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>init<font color="#000080">;
</font><font color="#FF0000"><b>begin
  if </b></font>paramcount <font color="#000080">&lt; </font><font color="#800000">1 </font><font color="#FF0000"><b>then </b></font>abort<font color="#000080">(</font><font color="#800000">'Usage: Nag &lt;username&gt;'</font><font color="#000080">);
  </font><font color="#FF0000"><b>if not </b></font>IPXinstalled <font color="#FF0000"><b>then </b></font>abort<font color="#000080">(</font><font color="#800000">'IPX not loaded'</font><font color="#000080">);
  </font>connection_number <font color="#000080">:= </font>Get1stConnectionNumber<font color="#000080">(</font>paramstr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">));
  </font><font color="#FF0000"><b>if </b></font>connection_number <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>abort<font color="#000080">(</font>paramstr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">) + </font><font color="#800000">' not found. '</font><font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>GetInternetAddress<font color="#000080">(</font>connection_number<font color="#000080">,</font>network_number<font color="#000080">,</font>network_node<font color="#000080">)
    &lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>abort<font color="#000080">(</font>paramstr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">) + </font><font color="#800000">'network error.'</font><font color="#000080">);
  </font>IpxCloseSocket<font color="#000080">(</font>send_socket<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>IPXOpenSocket<font color="#000080">(</font>send_socket<font color="#000080">) &lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>abort<font color="#000080">(</font><font color="#800000">'Socket error.'</font><font color="#000080">);
  </font>IPXCloseSocket<font color="#000080">(</font>receive_socket<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>IPXOpenSocket<font color="#000080">(</font>receive_socket<font color="#000080">) &lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>abort<font color="#000080">(</font><font color="#800000">'Socket error.'</font><font color="#000080">);
  </font>done <font color="#000080">:= </font>false<font color="#000080">;
  </font>zeroecb<font color="#000080">(</font>receive_ecb<font color="#000080">);
  </font>zeroecb<font color="#000080">(</font>send_ecb<font color="#000080">);
  </font>y <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
  </font>xx <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
  </font>getstation<font color="#000080">(</font>station<font color="#000080">,</font>code<font color="#000080">);
  </font>getuser<font color="#000080">(</font>station<font color="#000080">, </font>naam<font color="#000080">, </font>code<font color="#000080">);
  </font><font color="#FF0000"><b>message </b></font><font color="#000080">:= </font>naam <font color="#000080">+ </font><font color="#800000">' wants to nag. Type Nag '</font><font color="#000080">+</font>naam<font color="#000080">;
  </font>send_message_to_username<font color="#000080">(</font>paramstr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">), </font><font color="#FF0000"><b>message</b></font><font color="#000080">, </font>code<font color="#000080">);
  </font>wipe<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>funkysound<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>q <font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
     </b></font>info<font color="#000080">(</font><font color="#800000">'Receiving birdnoise'</font><font color="#000080">);
     </font>q <font color="#000080">:= </font><font color="#800000">3000</font><font color="#000080">;
     </font><font color="#FF0000"><b>while </b></font>q <font color="#000080">&gt; </font><font color="#800000">20 </font><font color="#FF0000"><b>do
     begin
          </b></font>sound<font color="#000080">(</font>q<font color="#000080">);
          </font>delay<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
          </font>dec<font color="#000080">(</font>q<font color="#000080">,</font><font color="#800000">100</font><font color="#000080">);
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
     </font>nosound<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>trash<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>q<font color="#000080">,</font>x<font color="#000080">,</font>y <font color="#000080">: </font>word<font color="#000080">;
</font><font color="#FF0000"><b>begin
     </b></font>randomize<font color="#000080">;
     </font><font color="#FF0000"><b>for </b></font>q <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">50 </font><font color="#FF0000"><b>do
     begin
         </b></font>x <font color="#000080">:= </font>random<font color="#000080">(</font><font color="#800000">76</font><font color="#000080">)+</font><font color="#800000">2</font><font color="#000080">;
         </font>y <font color="#000080">:= </font>random<font color="#000080">(</font><font color="#800000">25</font><font color="#000080">-</font>starty<font color="#000080">) + </font>starty<font color="#000080">;
         </font>fastwrite<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font><font color="#800000">'#'</font><font color="#000080">,</font>x<font color="#000080">, </font>y<font color="#000080">);
         </font>sound<font color="#000080">(</font><font color="#800000">8000</font><font color="#000080">);
         </font>delay<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
         </font>nosound<font color="#000080">;
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>procedure </b></font>receive_shit<font color="#000080">(</font>i <font color="#000080">: </font>integer<font color="#000080">);
</font><font color="#FF0000"><b>begin
     case </b></font>i <font color="#000080">- </font><font color="#800000">200 </font><font color="#FF0000"><b>of
          </b></font><font color="#800000">1 </font><font color="#000080">: </font><font color="#FF0000"><b>begin </b></font>info<font color="#000080">(</font>paramstr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">)+</font><font color="#800000">' is buzzing'</font><font color="#000080">);
              </font>sound<font color="#000080">(</font><font color="#800000">50</font><font color="#000080">); </font>delay<font color="#000080">(</font><font color="#800000">500</font><font color="#000080">); </font>nosound<font color="#000080">; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
          </font><font color="#800000">2 </font><font color="#000080">: </font>funkysound<font color="#000080">;
          </font><font color="#800000">3 </font><font color="#000080">: </font>flash<font color="#000080">;
          </font><font color="#800000">4 </font><font color="#000080">: </font>info<font color="#000080">(</font><font color="#800000">'SUCKER!'</font><font color="#000080">);
          </font><font color="#800000">5 </font><font color="#000080">: </font>blinking <font color="#000080">:= </font>true<font color="#000080">;
          </font><font color="#800000">6 </font><font color="#000080">: </font>trash<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>procedure </b></font>receive<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>q <font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
if </b></font><font color="#000080">(</font>receive_ecb<font color="#000080">.</font>completion_code <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>receive_ecb<font color="#000080">.</font>in_use <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
begin
     </b></font>IPXReceive<font color="#000080">(</font>receive_ecb<font color="#000080">, </font>receive_header<font color="#000080">, </font>receive_socket<font color="#000080">,
            @</font>receive_message<font color="#000080">, </font>sizeof<font color="#000080">(</font>receive_message<font color="#000080">));
      </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>receive_message <font color="#000080">&lt; </font><font color="#800000">#210</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>receive_message <font color="#000080">&gt; </font><font color="#800000">#200</font><font color="#000080">) </font><font color="#FF0000"><b>then
      begin
         </b></font>receive_shit<font color="#000080">(</font>ord<font color="#000080">(</font>receive_message<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]));
         </font>exit<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

      </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>receive_message <font color="#000080">= </font>chr<font color="#000080">(</font><font color="#800000">8</font><font color="#000080">)) </font><font color="#FF0000"><b>then
      begin
           </b></font>InStrings<font color="#000080">[</font>y<font color="#000080">][</font>x<font color="#000080">] := </font><font color="#800000">' '</font><font color="#000080">;
           </font><font color="#FF0000"><b>if </b></font>x <font color="#000080">&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
              </b></font>dec<font color="#000080">(</font>x<font color="#000080">);
      </font><font color="#FF0000"><b>end else
           begin
               </b></font>inc<font color="#000080">(</font>x<font color="#000080">);

              </font><font color="#FF0000"><b>if </b></font>receive_message <font color="#000080">&lt;&gt; </font>chr<font color="#000080">(</font><font color="#800000">13</font><font color="#000080">)  </font><font color="#FF0000"><b>then
                    </b></font>InStrings<font color="#000080">[</font>y<font color="#000080">][</font>x<font color="#000080">] := </font>receive_message<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">];
              </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>receive_message <font color="#000080">= </font>chr<font color="#000080">(</font><font color="#800000">13</font><font color="#000080">)) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>x <font color="#000080">&gt;= </font>maxlen<font color="#000080">) </font><font color="#FF0000"><b>then
               begin
                    </b></font>inc<font color="#000080">(</font>y<font color="#000080">);
                    </font>x <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
               </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
               </font><font color="#FF0000"><b>if </b></font>y <font color="#000080">=  </font>maxy <font color="#FF0000"><b>then
               begin
                    </b></font>y <font color="#000080">:= </font>maxy <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
                    </font>x <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
                    </font><font color="#FF0000"><b>for </b></font>q <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>maxy <font color="#000080">- </font><font color="#800000">1 </font><font color="#FF0000"><b>do
                        </b></font>instrings<font color="#000080">[</font>q<font color="#000080">] := </font>instrings<font color="#000080">[</font>q<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">]+
</font><font color="#800000">'                                                                            '</font><font color="#000080">;
               </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
          </font>writeInStrings<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 
</font><font color="#FF0000"><b>procedure </b></font>send<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>special <font color="#000080">: </font>boolean<font color="#000080">;
    </font>skey    <font color="#000080">: </font>keytype<font color="#000080">;
    </font>r<font color="#000080">, </font>sr       <font color="#000080">: </font>char<font color="#000080">;
</font><font color="#FF0000"><b>begin
     </b></font>inkey<font color="#000080">(</font>special<font color="#000080">, </font>skey<font color="#000080">,</font>r<font color="#000080">);
     </font><font color="#FF0000"><b>if </b></font>ord<font color="#000080">(</font>r<font color="#000080">) &gt; </font><font color="#800000">200 </font><font color="#FF0000"><b>then
        </b></font>exit<font color="#000080">;
     </font>shit<font color="#000080">(</font>skey<font color="#000080">, </font>sr<font color="#000080">);
     </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>sr <font color="#000080">= </font><font color="#800000">#0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>special<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>skey <font color="#000080">&lt;&gt; </font>cr<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>skey <font color="#000080">&lt;&gt; </font>bksp<font color="#000080">)
        </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>skey <font color="#000080">&lt;&gt; </font>esc<font color="#000080">) </font><font color="#FF0000"><b>then
            </b></font>exit<font color="#000080">;
          </font><font color="#FF0000"><b>if </b></font>sr <font color="#000080">= </font><font color="#800000">#0 </font><font color="#FF0000"><b>then
          begin
              </b></font>send_message <font color="#000080">:= </font>r<font color="#000080">;
              </font>write<font color="#000080">(</font>send_message<font color="#000080">);
          </font><font color="#FF0000"><b>end
          else
              </b></font>send_message <font color="#000080">:= </font>sr<font color="#000080">;
          </font><font color="#FF0000"><b>if </b></font>send_message <font color="#000080">= </font><font color="#800000">#8 </font><font color="#FF0000"><b>then
          begin
               </b></font>write<font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">);
               </font>write<font color="#000080">(</font>chr<font color="#000080">(</font><font color="#800000">8</font><font color="#000080">));
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
          </font><font color="#FF0000"><b>if </b></font>send_message <font color="#000080">= </font><font color="#800000">#13 </font><font color="#FF0000"><b>then </b></font>writeln<font color="#000080">;
          </font>IPXSend<font color="#000080">(</font>network_number<font color="#000080">, </font>network_node<font color="#000080">, </font>receive_socket<font color="#000080">, @</font>send_message<font color="#000080">,
              </font>length<font color="#000080">(</font>send_message<font color="#000080">)+</font><font color="#800000">1</font><font color="#000080">, </font>send_ecb<font color="#000080">,  </font>send_header<font color="#000080">, </font>send_socket<font color="#000080">);
          </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>send_message <font color="#000080">= </font>chr<font color="#000080">(</font><font color="#800000">27</font><font color="#000080">)) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>receive_message<font color="#000080">= </font>chr<font color="#000080">(</font><font color="#800000">27</font><font color="#000080">)) </font><font color="#FF0000"><b>then
          </b></font>done <font color="#000080">:= </font>true<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>begin
 </b></font>ini_win<font color="#000080">;
  </font>open_win<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">80</font><font color="#000080">,</font><font color="#800000">24</font><font color="#000080">,</font>black<font color="#000080">,</font>black<font color="#000080">);
  </font>init<font color="#000080">;
  </font>receive<font color="#000080">;
  </font>x <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>clrscr<font color="#000080">;
 </font>open_win<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font>starty<font color="#000080">,</font><font color="#800000">80</font><font color="#000080">,</font><font color="#800000">24</font><font color="#000080">, </font>lightgray<font color="#000080">, </font>black<font color="#000080">);
 </font>open_win<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">17</font><font color="#000080">,</font><font color="#800000">80</font><font color="#000080">,</font><font color="#800000">24</font><font color="#000080">, </font>black<font color="#000080">, </font>lightgray<font color="#000080">);
 </font>info<font color="#000080">(</font>versie<font color="#000080">+</font><font color="#800000">' 1995 Willem van de Vis   Esc to quit.'</font><font color="#000080">);
 </font>writeline<font color="#000080">(</font><font color="#800000">'F1 buzz F2 bird F3 flash F4 sucker F5 blink F6 trash F10 clear'</font><font color="#000080">,
               </font><font color="#800000">2</font><font color="#000080">, </font>starty<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">, </font>black<font color="#000080">, </font>lightgray<font color="#000080">);

 </font>textcolor<font color="#000080">(</font>black<font color="#000080">);
  </font><font color="#FF0000"><b>repeat
    </b></font>receive<font color="#000080">;
  </font>IPXRelinquishControl<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>keypressed <font color="#FF0000"><b>then
   </b></font>send<font color="#000080">;
 </font><font color="#FF0000"><b>until </b></font>done<font color="#000080">;
 </font>IPXCloseSocket<font color="#000080">(</font>send_socket<font color="#000080">);
 </font>IPXCloseSocket<font color="#000080">(</font>receive_socket<font color="#000080">);
 </font>end_win<font color="#000080">;
 </font>writeln<font color="#000080">(</font><font color="#800000">'no more nagging.'</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to NETWORK SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0032.PAS">Original</a><b>]</b></p></body>
</html>
