<html>
<head><title> "Re: Sorting an Array of" by TED HANSEN</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to SORTING SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0046.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>(*
 -=&gt; Quoting Tim Benoit to All &lt;=-

 TB&gt; I am having a bit of difficulty figuring out how to sort an
 TB&gt; array of records by numerical or alphabetical order.
 TB&gt;                  I need all the information that goes with that
 TB&gt; specific Record to stay with it...

    This example uses a modified bubblesort algorithm, not real fast but
fairly easy to follow. You may want to use a faster sort procedure but
the basic idea is to examine the data in your selected sort
field (RecArray[i].variable) but do the sort on the whole
record (RecArray[i]):

eg:
     Var

         Buffer : Rec;

     If RecArray[3].Number1 &gt; RecArray[4].Number1 then { sort }

        Begin   { interchange RecArray[3] and RecArray[4] }
                Buffer := RecArray[3];
                RecArray[3] := RecArray[4];
                RecArray[4] := Buffer
        End;

Bubblesort makes multiple passes moving data only one place per pass.
This example is similar but uses only one pass.
*)

</i></font><font color="#FF0000"><b>Program </b></font>Modsort<font color="#000080">;

</font><font color="#FF0000"><b>uses </b></font>Crt<font color="#000080">;      </font><font color="#008000"><i>{only needed for clrscr}

</i></font><font color="#FF0000"><b>Const
  </b></font>max <font color="#000080">= </font><font color="#800000">10</font><font color="#000080">;      </font><font color="#008000"><i>{max number of records}

</i></font><font color="#FF0000"><b>Type
  </b></font>fieldtype <font color="#000080">= </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">2</font><font color="#000080">];
  </font>datatype <font color="#000080">= </font><font color="#FF0000"><b>record
         </b></font>rec1 <font color="#000080">: </font>fieldtype<font color="#000080">;
         </font>rec2 <font color="#000080">: </font>fieldtype<font color="#000080">;
         </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>data <font color="#000080">: </font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font>max<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>datatype<font color="#000080">;
  </font>i<font color="#000080">,</font>j <font color="#000080">: </font>byte<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>interchange<font color="#000080">(</font>r<font color="#000080">,</font>l<font color="#000080">:</font>datatype<font color="#000080">);

</font><font color="#FF0000"><b>Var
   </b></font>buffer <font color="#000080">: </font>datatype<font color="#000080">;

</font><font color="#FF0000"><b>Begin
     </b></font>buffer <font color="#000080">:= </font>r<font color="#000080">;
     </font>data<font color="#000080">[</font>i<font color="#000080">] := </font>l<font color="#000080">;
     </font>data<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">] := </font>buffer<font color="#000080">;
     </font>dec<font color="#000080">(</font>i<font color="#000080">);
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>sort<font color="#000080">(</font>j <font color="#000080">: </font>byte<font color="#000080">);  </font><font color="#008000"><i>{j is the selected sort field number}

</i></font><font color="#FF0000"><b>Var
   </b></font>field <font color="#000080">: </font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">2</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>fieldtype<font color="#000080">;

</font><font color="#FF0000"><b>Begin
   </b></font>i <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;

   </font><font color="#FF0000"><b>While </b></font>i <font color="#000080">&lt; </font>max  <font color="#FF0000"><b>do
         Begin
            Case </b></font>j <font color="#FF0000"><b>of
                </b></font><font color="#800000">1 </font><font color="#000080">: </font><font color="#FF0000"><b>Begin
                       </b></font>field<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] := </font>data<font color="#000080">[</font>i<font color="#000080">].</font>rec1<font color="#000080">;
                       </font>field<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">] := </font>data<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">].</font>rec1<font color="#000080">;
                    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
                </font><font color="#800000">2 </font><font color="#000080">: </font><font color="#FF0000"><b>Begin
                       </b></font>field<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] := </font>data<font color="#000080">[</font>i<font color="#000080">].</font>rec2<font color="#000080">;
                       </font>field<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">] := </font>data<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">].</font>rec2<font color="#000080">;
                    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
            </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

         </font><font color="#FF0000"><b>If </b></font>field<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] &gt; </font>field<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">] </font><font color="#FF0000"><b>then
            </b></font>Interchange<font color="#000080">(</font>data<font color="#000080">[</font>i<font color="#000080">], </font>data<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">])
         </font><font color="#FF0000"><b>Else
            </b></font>Inc<font color="#000080">(</font>i<font color="#000080">);
         </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Begin                              </b></font><font color="#008000"><i>{main}

</i></font>Clrscr<font color="#000080">;
</font>Writeln<font color="#000080">(</font><font color="#800000">'UNSORTED :'</font><font color="#000080">);
</font><font color="#FF0000"><b>For </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>max <font color="#FF0000"><b>do              </b></font><font color="#008000"><i>{make up random array of alphas}
    </i></font><font color="#FF0000"><b>Begin
        </b></font>j <font color="#000080">:= </font>random<font color="#000080">(</font><font color="#800000">26</font><font color="#000080">);
        </font>data<font color="#000080">[</font>i<font color="#000080">].</font>rec1 <font color="#000080">:= </font>chr<font color="#000080">(</font>j<font color="#000080">+</font><font color="#800000">65</font><font color="#000080">);
        </font>Write<font color="#000080">(</font>data<font color="#000080">[</font>i<font color="#000080">].</font>rec1<font color="#000080">);
        </font>j <font color="#000080">:= </font>random<font color="#000080">(</font><font color="#800000">26</font><font color="#000080">);
        </font>Data<font color="#000080">[</font>i<font color="#000080">].</font>rec2 <font color="#000080">:= </font>chr<font color="#000080">(</font>j<font color="#000080">+</font><font color="#800000">65</font><font color="#000080">);
        </font>Writeln<font color="#000080">(</font><font color="#800000">','</font><font color="#000080">,</font>data<font color="#000080">[</font>i<font color="#000080">].</font>rec2<font color="#000080">);
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font>Write<font color="#000080">(</font><font color="#800000">'Sort on which field? '</font><font color="#000080">);
</font>Readln<font color="#000080">(</font>j<font color="#000080">);
</font>Sort<font color="#000080">(</font>j<font color="#000080">);
</font>Writeln<font color="#000080">(</font><font color="#800000">'SORTED ON FIELD: '</font><font color="#000080">,</font>j<font color="#000080">);

</font><font color="#FF0000"><b>For </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>max <font color="#FF0000"><b>do
    Begin
        </b></font>Write<font color="#000080">(</font>data<font color="#000080">[</font>i<font color="#000080">].</font>rec1<font color="#000080">);
        </font>Writeln<font color="#000080">(</font><font color="#800000">','</font><font color="#000080">,</font>data<font color="#000080">[</font>i<font color="#000080">].</font>rec2<font color="#000080">);
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>End</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to SORTING SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0046.PAS">Original</a><b>]</b></p></body>
</html>
