<html>
<head><title> "Sorting a Text File" by JAMES SURLES</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to SORTING SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0044.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
---------------------------------------------------------------------------
 &gt;    What I want to do here, is take a textfile with about 1,000-10,000
 &gt; lines in it, go and read a string starting at the XPosition of 13, going
 &gt; until XPosition of 38 on each line of the textfile.  Then, put
 &gt; everything in memory if possible, and then sort all of the strings on
 &gt; the screen by ABC order.  Can somebody help me out with a few hints, or
 &gt; some code?  Either reply here, or send me Netmail @ 1:105/60.77.
This will take some modification by you, but it should not be too much trouble.
 This is a sort based on a file of records, but the necessary modifications
should not be too difficult.}

{$N+,E+}
</i></font><font color="#FF0000"><b>program </b></font>DiskSort<font color="#000080">;
</font><font color="#FF0000"><b>uses
    </b></font>Crt<font color="#000080">,
    </font>Dos<font color="#000080">;
</font><font color="#FF0000"><b>type
    </b></font>String72 <font color="#000080">= </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">72</font><font color="#000080">];
    </font>ElementType <font color="#000080">= </font>String72<font color="#000080">;
    </font>ElementFile <font color="#000080">= </font><font color="#FF0000"><b>file of </b></font>ElementType<font color="#000080">;
</font><font color="#FF0000"><b>var
    </b></font>A <font color="#000080">: </font>ElementFile<font color="#000080">;
    </font>Temp <font color="#000080">: </font>String72<font color="#000080">;
    </font>I <font color="#000080">: </font>LongInt<font color="#000080">;
</font><font color="#FF0000"><b>function </b></font>Precedes <font color="#000080">(</font>A<font color="#000080">, </font>B <font color="#000080">: </font>ElementType<font color="#000080">) : </font>boolean<font color="#000080">;
    </font><font color="#FF0000"><b>begin </b></font><font color="#008000"><i>{Precedes}
        </i></font><font color="#FF0000"><b>if </b></font>A <font color="#000080">&lt; </font>B <font color="#FF0000"><b>then
            </b></font>Precedes <font color="#000080">:= </font>True
        <font color="#FF0000"><b>else
            </b></font>Precedes <font color="#000080">:= </font>False<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{Precedes}
</i></font><font color="#FF0000"><b>procedure </b></font>Swap <font color="#000080">(</font><font color="#FF0000"><b>var </b></font>A <font color="#000080">: </font>ElementFile<font color="#000080">; </font>Index1<font color="#000080">, </font>Index2 <font color="#000080">: </font>Integer<font color="#000080">; </font>Temp1<font color="#000080">, </font>Temp2 <font color="#000080">:
</font>ElementType<font color="#000080">);
    </font><font color="#FF0000"><b>begin </b></font><font color="#008000"><i>{Swap}
        </i></font>Seek <font color="#000080">(</font>A<font color="#000080">, </font>Index1<font color="#000080">);
        </font>Write <font color="#000080">(</font>A<font color="#000080">, </font>Temp2<font color="#000080">);
        </font>Seek <font color="#000080">(</font>A<font color="#000080">, </font>Index2<font color="#000080">);
        </font>Write <font color="#000080">(</font>A<font color="#000080">, </font>Temp1<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{Swap}
</i></font><font color="#FF0000"><b>procedure </b></font>ShellSortInsertion <font color="#000080">(</font><font color="#FF0000"><b>var </b></font>A <font color="#000080">: </font>ElementFile<font color="#000080">; </font>NumVals <font color="#000080">: </font>Integer<font color="#000080">);
</font><font color="#FF0000"><b>var
    </b></font>EleDist <font color="#000080">: </font>Integer<font color="#000080">;
    </font>Temp1<font color="#000080">, </font>Temp2 <font color="#000080">: </font>ElementType<font color="#000080">;
    </font><font color="#FF0000"><b>procedure </b></font>SegmentedInsertion <font color="#000080">(</font><font color="#FF0000"><b>var </b></font>A <font color="#000080">: </font>ElementFile<font color="#000080">; </font>N<font color="#000080">, </font>K <font color="#000080">: </font>Integer<font color="#000080">);
    </font><font color="#FF0000"><b>var
        </b></font>J<font color="#000080">, </font>L <font color="#000080">: </font>Integer<font color="#000080">;
    </font><font color="#FF0000"><b>begin </b></font><font color="#008000"><i>{SegmentedInsertion}
        </i></font><font color="#FF0000"><b>for </b></font>L <font color="#000080">:= </font>K <font color="#000080">+ </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>N <font color="#FF0000"><b>do
            begin
                </b></font>J <font color="#000080">:= </font>L <font color="#000080">- </font>K<font color="#000080">;
                </font><font color="#FF0000"><b>while </b></font>J <font color="#000080">&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>do
                    begin
                        </b></font>Seek <font color="#000080">(</font>A<font color="#000080">, </font>J<font color="#000080">+</font>K<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">);
                        </font>Read <font color="#000080">(</font>A<font color="#000080">, </font>Temp1<font color="#000080">);
                        </font>Seek <font color="#000080">(</font>A<font color="#000080">, </font>J<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">);
                        </font>Read <font color="#000080">(</font>A<font color="#000080">, </font>Temp2<font color="#000080">);
                        </font><font color="#FF0000"><b>if </b></font>Precedes <font color="#000080">(</font>Temp1<font color="#000080">, </font>Temp2<font color="#000080">) </font><font color="#FF0000"><b>then
                            begin
                                </b></font>Swap <font color="#000080">(</font>A<font color="#000080">, </font>J<font color="#000080">+</font>K<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">, </font>J<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">, </font>Temp1<font color="#000080">, </font>Temp2<font color="#000080">);
                                </font>J <font color="#000080">:= </font>J <font color="#000080">- </font>K<font color="#000080">;
                            </font><font color="#FF0000"><b>end
                        else
                            </b></font>J <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
                    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{SegmentedInsertion}
</i></font><font color="#FF0000"><b>begin </b></font><font color="#008000"><i>{ShellSortInsertion}
    </i></font>EleDist <font color="#000080">:=  </font>NumVals <font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">;
    </font><font color="#FF0000"><b>while </b></font>EleDist <font color="#000080">&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>do
        begin
            </b></font>SegmentedInsertion <font color="#000080">(</font>A<font color="#000080">, </font>NumVals<font color="#000080">, </font>EleDist<font color="#000080">);
            </font>EleDist <font color="#000080">:= </font>EleDist <font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">;
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ShellSortInsertion}
</i></font><font color="#FF0000"><b>begin
    </b></font>ClrScr<font color="#000080">;
    </font>Assign <font color="#000080">(</font>A<font color="#000080">, </font><font color="#800000">'Strings.dat'</font><font color="#000080">);
    </font>Reset <font color="#000080">(</font>A<font color="#000080">);

    </font>ShellSortInsertion <font color="#000080">(</font>A<font color="#000080">, </font>FileSize<font color="#000080">(</font>A<font color="#000080">));

</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to SORTING SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0044.PAS">Original</a><b>]</b></p></body>
</html>
