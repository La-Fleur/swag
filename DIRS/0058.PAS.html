<html>
<head><title> "Making use of Reverse Video" by HARRO LISSENBERG</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to DIRS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0058.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
 Dear SWAG-TEAM,
   I am a dutch student of English and I'm also interested in programming. In
   one of my programs I make use of 'reverse video', but I'm not satisfied
   with the way I achieve this 'reverse video'. I know it can be done much
   faster by writing and reading directly to/from video memory. Instead I have
   to call interrupt 10h for each character. Another problem I face is that I
   don't know how to store each character attribute separately. If different
   colors are used, this code is useless. I've included a part of the code I
   use as an example.
   I hope you can provide me with an answer to my questions.
 Your's sincerely,

 Harro Lissenberg
 H.N.Lissenberg@let.rug.nl
}

{
Reverse Video,
by Harro Lissenberg.
E-mail: H.N.Lissenberg@let.rug.nl
}

</i></font><font color="#FF0000"><b>Uses </b></font>crt<font color="#000080">;

</font><font color="#FF0000"><b>Var
  </b></font>OrX<font color="#000080">, </font>OrY<font color="#000080">, </font>X<font color="#000080">, </font>Y<font color="#000080">: </font>byte<font color="#000080">;
  </font>Kar<font color="#000080">: </font>char<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>CursorOff<font color="#000080">; </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm
   </b></font><font color="#FF00FF">Mov          AH, 1
   Mov          CX, 2000h
   Int          10h
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>CursorOn<font color="#000080">; </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm
   </b></font><font color="#FF00FF">Mov          AH, 1
   Mov          CH, 11
   Mov          CL, 12
   Int          10h
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>RestoreLine<font color="#000080">(</font>Line<font color="#000080">: </font>integer<font color="#000080">);
</font><font color="#FF0000"><b>begin
  </b></font>TextColor<font color="#000080">(</font>LightGray<font color="#000080">);
  </font>TextBackGround<font color="#000080">(</font>Black<font color="#000080">);
  </font><font color="#FF0000"><b>For </b></font>X<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">79 </font><font color="#FF0000"><b>do
  begin
    </b></font>GotoXY<font color="#000080">(</font>X<font color="#000080">, </font>Line<font color="#000080">);
    </font><font color="#FF0000"><b>asm
      </b></font><font color="#FF00FF">Mov         AH, 8      </font><font color="#008000"><i>{Read character at cursor}
      </i></font><font color="#FF00FF">Mov         BH, 0      </font><font color="#008000"><i>{Set video page}
      </i></font><font color="#FF00FF">Int         10h
      Mov         Kar, AL    </font><font color="#008000"><i>{Copy AL (contains character) to variable Kar}
    </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>Write<font color="#000080">(</font>Kar<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>RevVideo<font color="#000080">(</font>Line<font color="#000080">: </font>integer<font color="#000080">);
</font><font color="#FF0000"><b>begin
  </b></font>TextColor<font color="#000080">(</font>Black<font color="#000080">);
  </font>TextBackGround<font color="#000080">(</font>LightGray<font color="#000080">);
  </font><font color="#FF0000"><b>For </b></font>X<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">79 </font><font color="#FF0000"><b>do
  begin
    </b></font>GotoXY<font color="#000080">(</font>X<font color="#000080">, </font>Line<font color="#000080">);
    </font><font color="#FF0000"><b>asm
      </b></font><font color="#FF00FF">Mov         AH, 8      </font><font color="#008000"><i>{Read character at cursor}
      </i></font><font color="#FF00FF">Mov         BH, 0      </font><font color="#008000"><i>{Set video page}
      </i></font><font color="#FF00FF">Int         10h
      Mov         Kar, AL    </font><font color="#008000"><i>{Copy AL (contains character) to variable Kar}
    </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>Write<font color="#000080">(</font>Kar<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>Y<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;
  </font>OrY<font color="#000080">:=</font>WhereY<font color="#000080">;
  </font>OrX<font color="#000080">:=</font>WhereX<font color="#000080">;
  </font>CursorOff<font color="#000080">;
  </font><font color="#FF0000"><b>repeat
    </b></font>RevVideo<font color="#000080">(</font>Y<font color="#000080">);
    </font>Delay<font color="#000080">(</font><font color="#800000">200</font><font color="#000080">);
    </font>RestoreLine<font color="#000080">(</font>Y<font color="#000080">);
    </font>Inc<font color="#000080">(</font>Y<font color="#000080">);
    </font><font color="#FF0000"><b>If </b></font>Y <font color="#000080">&gt; </font><font color="#800000">25 </font><font color="#FF0000"><b>then </b></font>Y<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;
  </font><font color="#FF0000"><b>until </b></font>KeyPressed<font color="#000080">;
  </font>CursorOn<font color="#000080">;
  </font>GotoXY<font color="#000080">(</font>OrX<font color="#000080">, </font>OrY<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to DIRS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0058.PAS">Original</a><b>]</b></p></body>
</html>
