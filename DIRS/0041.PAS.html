<html>
<head><title> "Deletes Subdirs and files" by SHANE KERR</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to DIRS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0041.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 *  NUKE.PAS by Shane Kerr                                               *
 *        Deletes a subdirectory and everything it contains.             *
 *        Nuke for DOS written Turbo Pascal 5.5                          *
 *        Nuke for Windows written using Turbo Pascal for Windows 1.0    *
 *  Version 1.95    November 23, 1991                                    *
 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *}

</i></font><font color="#FF0000"><b>program </b></font>Nuke<font color="#000080">;

</font><font color="#FF0000"><b>uses
</b></font><font color="#008000"><i>{$IFDEF MsDos}
</i></font>	DOS<font color="#000080">;
</font><font color="#008000"><i>{$ENDIF}
{$IFDEF Windows}
    </i></font>WinCRT<font color="#000080">, </font>WinDOS<font color="#000080">, </font>Strings<font color="#000080">;
</font><font color="#008000"><i>{$ENDIF}

</i></font><font color="#FF0000"><b>const
    </b></font>MajorVer <font color="#000080">= </font><font color="#800000">'1'</font><font color="#000080">;                     </font><font color="#008000"><i>{ Current major version number }
    </i></font>MinorVer <font color="#000080">= </font><font color="#800000">'95'</font><font color="#000080">;                    </font><font color="#008000"><i>{ Current minor version number }
    </i></font>Year     <font color="#000080">= </font><font color="#800000">1991</font><font color="#000080">;                    </font><font color="#008000"><i>{ Release year }

{$IFDEF MsDos}
    </i></font>fsDirectory <font color="#000080">= </font><font color="#800000">64</font><font color="#000080">;                   </font><font color="#008000"><i>{ Set directory length }
    </i></font>faReadOnly <font color="#000080">= </font>ReadOnly<font color="#000080">;              </font><font color="#008000"><i>{ Set directory flags }
    </i></font>faHidden <font color="#000080">= </font>Hidden<font color="#000080">;
    </font>faSysFile <font color="#000080">= </font>SysFile<font color="#000080">;
    </font>faVolumeID <font color="#000080">= </font>VolumeID<font color="#000080">;
    </font>faDirectory <font color="#000080">= </font>Directory<font color="#000080">;
    </font>faArchive <font color="#000080">= </font>Archive<font color="#000080">;
    </font>faAnyFile <font color="#000080">= </font>AnyFile<font color="#000080">;
</font><font color="#008000"><i>{$ENDIF}

{$IFDEF MsDos}
</i></font><font color="#FF0000"><b>type
</b></font>	TRegisters <font color="#000080">= </font>Registers<font color="#000080">;</font>				<font color="#008000"><i>{ Used for DOS calls }
    </i></font>TSearchRec <font color="#000080">= </font>SearchRec<font color="#000080">;             </font><font color="#008000"><i>{ Used for search record }
{$ENDIF}

{* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 *  procedure FCBDeleteFile (FileSpec : string);
 *        Deletes files using the MS-DOS FCB function (from Version 1.0).
 *  parameters:  filespec, file(s) to be deleted
 *  notes:  Can only delete files in the current directory.
 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *}

</i></font><font color="#FF0000"><b>procedure </b></font>FCBDeleteFile <font color="#000080">(</font>filespec <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">);
</font><font color="#FF0000"><b>type
    </b></font>TFCB <font color="#000080">= </font><font color="#FF0000"><b>record
        </b></font>drive <font color="#000080">: </font>char<font color="#000080">;</font>  	                <font color="#008000"><i>{ 0 = default, 1 = A, 2 = B }
        </i></font>name <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">7</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>char<font color="#000080">;     </font><font color="#008000"><i>{ File name }
        </i></font>ext <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">2</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>char<font color="#000080">;      </font><font color="#008000"><i>{ File extension }
        </i></font>curblk <font color="#000080">: </font>word<font color="#000080">;                  </font><font color="#008000"><i>{ Current block number }
        </i></font>recsize <font color="#000080">: </font>word<font color="#000080">;                 </font><font color="#008000"><i>{ Logical record size in bytes }
        </i></font>filsize <font color="#000080">: </font>longint<font color="#000080">;              </font><font color="#008000"><i>{ File size in bytes }
        </i></font>date <font color="#000080">: </font>word<font color="#000080">;                    </font><font color="#008000"><i>{ Date file was last written }
        </i></font>resv <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">10</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;    </font><font color="#008000"><i>{ Reserved for DOS }
        </i></font>currec <font color="#000080">: </font>byte<font color="#000080">;                  </font><font color="#008000"><i>{ Current record in block }
        </i></font>random <font color="#000080">: </font>longint<font color="#000080">;               </font><font color="#008000"><i>{ Random record number }
    </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>var
    </b></font>FCB <font color="#000080">: </font>TFCB<font color="#000080">;
    </font>Regs <font color="#000080">: </font>TRegisters<font color="#000080">;
    </font>TempStr <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
    </font>NameSeg<font color="#000080">, </font>NameOfs <font color="#000080">: </font>word<font color="#000080">;
    </font>FCBSeg<font color="#000080">, </font>FCBOfs <font color="#000080">: </font>word<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font><font color="#008000"><i>{ Get segment and offset of the filespec }
    </i></font>TempStr <font color="#000080">:= </font>filespec <font color="#000080">+ </font>chr<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
    </font>NameSeg <font color="#000080">:= </font>seg<font color="#000080">(</font>TempStr<font color="#000080">);
    </font>NameOfs <font color="#000080">:= </font>ofs<font color="#000080">(</font>TempStr<font color="#000080">) + </font><font color="#800000">1</font><font color="#000080">;
    </font>FCBSeg <font color="#000080">:= </font>seg<font color="#000080">(</font>FCB<font color="#000080">);
    </font>FCBOfs <font color="#000080">:= </font>ofs<font color="#000080">(</font>FCB<font color="#000080">);
  </font><font color="#008000"><i>{ Do the actual DOS calls }
    </i></font>Regs<font color="#000080">.</font>AX <font color="#000080">:= </font><font color="#800000">$2900</font><font color="#000080">;
    </font>Regs<font color="#000080">.</font>DS <font color="#000080">:= </font>NameSeg<font color="#000080">;
    </font>Regs<font color="#000080">.</font>SI <font color="#000080">:= </font>NameOfs<font color="#000080">;
    </font>Regs<font color="#000080">.</font>ES <font color="#000080">:= </font>FCBSeg<font color="#000080">;
    </font>Regs<font color="#000080">.</font>DI <font color="#000080">:= </font>FCBOfs<font color="#000080">;
    </font>MsDos<font color="#000080">(</font>Regs<font color="#000080">);                        </font><font color="#008000"><i>{ Parse file to FCB }
    </i></font>Regs<font color="#000080">.</font>DS <font color="#000080">:= </font>FCBSeg<font color="#000080">;
    </font>Regs<font color="#000080">.</font>DX <font color="#000080">:= </font>FCBOfs<font color="#000080">;
    </font>Regs<font color="#000080">.</font>AH <font color="#000080">:= </font><font color="#800000">$13</font><font color="#000080">;
    </font>MsDos<font color="#000080">(</font>Regs<font color="#000080">);                        </font><font color="#008000"><i>{ Delete file (FCB) }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ FCBDeleteFile }

{$IFDEF MsDos}
{* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 *  procedure ClearKb
 *        Clears the keyboard buffer
 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *}

</i></font><font color="#FF0000"><b>procedure </b></font>ClearKb<font color="#000080">;
</font><font color="#FF0000"><b>var
    </b></font>Regs <font color="#000080">: </font>TRegisters<font color="#000080">;
</font><font color="#FF0000"><b>begin
    </b></font>Regs<font color="#000080">.</font>AH <font color="#000080">:= </font><font color="#800000">$01</font><font color="#000080">;
    </font>Intr<font color="#000080">(</font><font color="#800000">$16</font><font color="#000080">, </font>Regs<font color="#000080">);
    </font><font color="#FF0000"><b>while </b></font><font color="#000080">((</font>Regs<font color="#000080">.</font>Flags <font color="#FF0000"><b>and </b></font>FZero<font color="#000080">) = </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>do
      begin
        </b></font>Regs<font color="#000080">.</font>AH <font color="#000080">:= </font><font color="#800000">$00</font><font color="#000080">;
        </font>Intr<font color="#000080">(</font><font color="#800000">$16</font><font color="#000080">, </font>Regs<font color="#000080">);
        </font>Regs<font color="#000080">.</font>AH <font color="#000080">:= </font><font color="#800000">$01</font><font color="#000080">;
        </font>Intr<font color="#000080">(</font><font color="#800000">$16</font><font color="#000080">, </font>Regs<font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ procedure ClearKb }
{$ENDIF}

{$IFDEF MsDos}
{* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 *  procedure WaitKey
 *        Waits for a key press
 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *}

</i></font><font color="#FF0000"><b>procedure </b></font>WaitKey<font color="#000080">;
</font><font color="#FF0000"><b>var
    </b></font>Regs <font color="#000080">: </font>TRegisters<font color="#000080">;
</font><font color="#FF0000"><b>begin
</b></font>	Regs<font color="#000080">.</font>AH <font color="#000080">:= </font><font color="#800000">$00</font><font color="#000080">;
    </font>Intr<font color="#000080">(</font><font color="#800000">$16</font><font color="#000080">, </font>Regs<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ procedure WaitKey }
{$ENDIF}

{$IFDEF MsDos}
{* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 *  function IsRedirected : boolean;
 *        Determines whether a program's input or output is redirected
 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *}

</i></font><font color="#FF0000"><b>function </b></font>IsRedirected <font color="#000080">: </font>boolean<font color="#000080">;
</font><font color="#FF0000"><b>var
</b></font>	Regs <font color="#000080">: </font>Registers<font color="#000080">;</font>				<font color="#008000"><i>{ Register values }
</i></font>	StdIn <font color="#000080">: ^</font>Byte<font color="#000080">;</font>					<font color="#008000"><i>{ Standard input }
</i></font>	StdOut <font color="#000080">: ^</font>Byte<font color="#000080">;</font>					<font color="#008000"><i>{ Standard output }
</i></font><font color="#FF0000"><b>begin
</b></font>	Regs<font color="#000080">.</font>AH <font color="#000080">:= </font><font color="#800000">$62</font><font color="#000080">;</font>					<font color="#008000"><i>{ Get segment address of PSP }
</i></font>	MsDos<font color="#000080">(</font>Regs<font color="#000080">);
</font>	StdIn <font color="#000080">:= </font>Ptr<font color="#000080">(</font>Regs<font color="#000080">.</font>BX<font color="#000080">, </font><font color="#800000">$18</font><font color="#000080">);</font>		<font color="#008000"><i>{ Point to StdIn value }
</i></font>	StdOut <font color="#000080">:= </font>Ptr<font color="#000080">(</font>Regs<font color="#000080">.</font>BX<font color="#000080">, </font><font color="#800000">$19</font><font color="#000080">);</font> 	<font color="#008000"><i>{ Point to StdOut value }

  { Return TRUE if StdIn is the same as StdOut }
    </i></font>IsRedirected <font color="#000080">:= (</font>StdIn<font color="#000080">^ &lt;&gt; </font>StdOut<font color="#000080">^);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{$ENDIF}

{$IFDEF MsDos}
{* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 *  function NumRows : byte;
 *        Returns the number of rows on the screen
 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *}

</i></font><font color="#FF0000"><b>function </b></font>NumRows <font color="#000080">: </font>byte<font color="#000080">;
</font><font color="#FF0000"><b>var
</b></font>	ScreenWidth <font color="#000080">: </font>word <font color="#FF0000"><b>absolute </b></font><font color="#800000">$0040</font><font color="#000080">:</font><font color="#800000">$004A</font><font color="#000080">;
</font>	ScreenSize <font color="#000080">: </font>word <font color="#FF0000"><b>absolute </b></font><font color="#800000">$0040</font><font color="#000080">:</font><font color="#800000">$004C</font><font color="#000080">;
</font><font color="#FF0000"><b>begin
</b></font>	NumRows <font color="#000080">:= (((</font>ScreenSize <font color="#FF0000"><b>div </b></font><font color="#800000">1000</font><font color="#000080">) * </font><font color="#800000">1000</font><font color="#000080">) </font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">) </font><font color="#FF0000"><b>div </b></font>ScreenWidth<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{$ENDIF}

{* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 *  function NukeDir (directory : string) : boolean;                     *
 *  	Destroys the specified directory and all it contains recursively *
 *  parameters:  directory, path of the directory to be destroyed        *
 *               remove, TRUE to remove directory                        *
 *				 display, TRUE to display files as they are deleted      *
 *				 pause, TRUE to pause after each screen                  *
 *               attr, file search attributes to delete                  *
 *				 lines, number of lines displayed so far 			     *
 *  returns:  TRUE if directory is removed, FALSE otherwise              *
 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *}
</i></font><font color="#FF0000"><b>function </b></font>NukeDir <font color="#000080">(</font>directory <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">; </font>remove<font color="#000080">, </font>display<font color="#000080">, </font>pause <font color="#000080">: </font>boolean<font color="#000080">;
</font>					attrib <font color="#000080">: </font>word<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>lines <font color="#000080">: </font>word<font color="#000080">) : </font>boolean<font color="#000080">;
</font><font color="#FF0000"><b>var
    </b></font>OrgDir <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font>fsDirectory<font color="#000080">];       </font><font color="#008000"><i>{ Saved original directory }
</i></font>	SrchRec <font color="#000080">: </font>TSearchRec<font color="#000080">;</font>	        	<font color="#008000"><i>{ For file searches }
    </i></font>Dummy <font color="#000080">: </font>boolean<font color="#000080">;
    </font>Handle <font color="#000080">: </font><font color="#FF0000"><b>file</b></font><font color="#000080">;                      </font><font color="#008000"><i>{ File handle (for attrib change) }
</i></font><font color="#FF0000"><b>begin
</b></font>	GetDir<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">, </font>OrgDir<font color="#000080">);</font>   	        	<font color="#008000"><i>{ Get original directory }

</i></font>	ChDir<font color="#000080">(</font>directory<font color="#000080">);                   </font><font color="#008000"><i>{ Change to target directory }
  { If display isn't on, just delete everything (grumble) }
</i></font>	<font color="#FF0000"><b>if </b></font><font color="#000080">(</font><font color="#FF0000"><b>not </b></font>display<font color="#000080">) </font><font color="#FF0000"><b>then
</b></font>		FCBDeleteFile<font color="#000080">(</font><font color="#800000">'????????.???'</font><font color="#000080">);  </font><font color="#008000"><i>{ Delete all files }

  { Find first file present }
    </i></font>FindFirst<font color="#000080">(</font><font color="#800000">'*.*'</font><font color="#000080">, </font>faDirectory <font color="#FF0000"><b>or </b></font>attrib<font color="#000080">, </font>SrchRec<font color="#000080">);

  </font><font color="#008000"><i>{ Loop and nuke any subdirectories found }
    </i></font><font color="#FF0000"><b>repeat
        if </b></font><font color="#000080">(((</font>SrchRec<font color="#000080">.</font>Attr <font color="#FF0000"><b>and </b></font>faDirectory<font color="#000080">) &lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>DosError <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and
</b></font><font color="#008000"><i>{$IFDEF MsDos}
                    </i></font><font color="#000080">(</font>SrchRec<font color="#000080">.</font>Name<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] &lt;&gt; </font><font color="#800000">'.'</font><font color="#000080">)) </font><font color="#FF0000"><b>then
</b></font><font color="#008000"><i>{$ENDIF}
{$IFDEF Windows}
                    </i></font><font color="#000080">(</font>SrchRec<font color="#000080">.</font>Name<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">] &lt;&gt; </font><font color="#800000">'.'</font><font color="#000080">)) </font><font color="#FF0000"><b>then
</b></font><font color="#008000"><i>{$ENDIF}
          </i></font><font color="#FF0000"><b>begin
            </b></font>Assign<font color="#000080">(</font>Handle<font color="#000080">, </font>SrchRec<font color="#000080">.</font>Name<font color="#000080">);
            </font>SetFAttr<font color="#000080">(</font>Handle<font color="#000080">, </font>faDirectory<font color="#000080">);
</font>			Dummy <font color="#000080">:= </font>NukeDir<font color="#000080">(</font>SrchRec<font color="#000080">.</font>Name<font color="#000080">, </font>TRUE<font color="#000080">, </font>Display<font color="#000080">, </font>Pause<font color="#000080">, </font>Attrib<font color="#000080">, </font>Lines<font color="#000080">);
          </font><font color="#FF0000"><b>end
        else if </b></font><font color="#000080">((</font>DosError <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and
</b></font><font color="#008000"><i>{$IFDEF MsDos}
</i></font>					<font color="#000080">(</font>SrchRec<font color="#000080">.</font>Name<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] &lt;&gt; </font><font color="#800000">'.'</font><font color="#000080">) </font><font color="#FF0000"><b>and
</b></font><font color="#008000"><i>{$ENDIF}
{$IFDEF Windows}
</i></font>					<font color="#000080">(</font>SrchRec<font color="#000080">.</font>Name<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">] &lt;&gt; </font><font color="#800000">'.'</font><font color="#000080">) </font><font color="#FF0000"><b>and
</b></font><font color="#008000"><i>{$ENDIF}
</i></font>			<font color="#000080">(((</font>SrchRec<font color="#000080">.</font>Attr <font color="#FF0000"><b>and </b></font>Attrib<font color="#000080">) &lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>Attrib <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">))) </font><font color="#FF0000"><b>then
          begin
            </b></font>Assign<font color="#000080">(</font>Handle<font color="#000080">, </font>SrchRec<font color="#000080">.</font>Name<font color="#000080">);
            </font>SetFAttr<font color="#000080">(</font>Handle<font color="#000080">, </font><font color="#800000">0</font><font color="#000080">);
</font>			Erase<font color="#000080">(</font>Handle<font color="#000080">);
</font>		  <font color="#008000"><i>{ If displaying, then show name and increase line count }
</i></font>			<font color="#FF0000"><b>if </b></font><font color="#000080">(</font>Display<font color="#000080">) </font><font color="#FF0000"><b>then
</b></font>			  <font color="#FF0000"><b>begin
</b></font>				WriteLn<font color="#000080">(</font><font color="#800000">'     Deleting  '</font><font color="#000080">, </font>Directory<font color="#000080">, </font><font color="#800000">'\'</font><font color="#000080">, </font>SrchRec<font color="#000080">.</font>Name<font color="#000080">);
</font>				Inc<font color="#000080">(</font>Lines<font color="#000080">);
</font>			  <font color="#FF0000"><b>end</b></font><font color="#000080">;
</font>		  <font color="#008000"><i>{ If pausing, check line count }
</i></font>			<font color="#FF0000"><b>if </b></font><font color="#000080">(</font>Pause <font color="#FF0000"><b>and </b></font><font color="#000080">((</font>Lines <font color="#FF0000"><b>mod </b></font><font color="#000080">(</font>NumRows <font color="#000080">- </font><font color="#800000">2</font><font color="#000080">)) = </font><font color="#800000">0</font><font color="#000080">)) </font><font color="#FF0000"><b>then
</b></font>			  <font color="#FF0000"><b>begin
</b></font>				Write<font color="#000080">(</font><font color="#800000">'Press any key to continue...'</font><font color="#000080">);
</font>				WaitKey<font color="#000080">;
</font>				WriteLn<font color="#000080">;
</font>			  <font color="#FF0000"><b>end</b></font><font color="#000080">;
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ if block }
        </i></font>FindNext<font color="#000080">(</font>SrchRec<font color="#000080">);
    </font><font color="#FF0000"><b>until </b></font><font color="#000080">(</font>DosError <font color="#000080">&lt;&gt; </font><font color="#800000">0</font><font color="#000080">);

  </font><font color="#008000"><i>{ If original directory is current, change to parent }
</i></font>	<font color="#FF0000"><b>if </b></font><font color="#000080">(</font>OrgDir <font color="#000080">= </font>Directory<font color="#000080">) </font><font color="#FF0000"><b>then
</b></font>		ChDir<font color="#000080">(</font><font color="#800000">'..'</font><font color="#000080">)
</font>	<font color="#FF0000"><b>else if </b></font><font color="#000080">(</font>pos<font color="#000080">(</font>Directory<font color="#000080">, </font>OrgDir<font color="#000080">) = </font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>then
</b></font>	  <font color="#FF0000"><b>begin
</b></font>		ChDir<font color="#000080">(</font>Directory<font color="#000080">);
</font>		ChDir<font color="#000080">(</font><font color="#800000">'..'</font><font color="#000080">);
</font>	  <font color="#FF0000"><b>end
</b></font>	<font color="#FF0000"><b>else
</b></font>		ChDir<font color="#000080">(</font>OrgDir<font color="#000080">);                  </font><font color="#008000"><i>{ Restore directory }
    </i></font>NukeDir <font color="#000080">:= </font>FALSE<font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>Remove<font color="#000080">) </font><font color="#FF0000"><b>then
      begin
        </b></font><font color="#008000"><i>{$I-}
</i></font>		RmDir<font color="#000080">(</font>Directory<font color="#000080">);</font>	        	<font color="#008000"><i>{ Kill target directory }
        </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>IOResult <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
            </b></font>NukeDir <font color="#000080">:= </font>TRUE<font color="#000080">;
        </font><font color="#008000"><i>{$I+}
      </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ function NukeDir }

{* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 *  function ToUpper (Str : string) : string;                            *
 *      Convert string to upper case                                     *
 *  parameters:  Str, any string                                         *
 *  returns:  uppercase value of the string                              *
 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *}

</i></font><font color="#FF0000"><b>function </b></font>ToUpper <font color="#000080">(</font>Str <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">) : </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
</font><font color="#FF0000"><b>var
    </b></font>i <font color="#000080">: </font>integer<font color="#000080">;
    </font>Temp <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
    </b></font>Temp <font color="#000080">:= </font>str<font color="#000080">;
    </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>length<font color="#000080">(</font>Str<font color="#000080">) </font><font color="#FF0000"><b>do
        </b></font>Temp<font color="#000080">[</font>i<font color="#000080">] := </font>UpCase<font color="#000080">(</font>Temp<font color="#000080">[</font>i<font color="#000080">]);
    </font>ToUpper <font color="#000080">:= </font>Temp<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#008000"><i>{* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 *  function ListFiles (directory : string) : integer                    *
 *      Lists files and attributes in the specified directory below      *
 *  parameters:  directory, directory to start listing at                *
 *  returns:  number of files listed                                     *
 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *}

</i></font><font color="#FF0000"><b>function </b></font>ListFiles <font color="#000080">(</font>directory <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">) : </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>var
    </b></font>OrgDir <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;</font>	                <font color="#008000"><i>{ Original directory }
    </i></font>CurDir <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;                    </font><font color="#008000"><i>{ Current directory }
    </i></font>SearchRec <font color="#000080">: </font>TSearchRec<font color="#000080">;             </font><font color="#008000"><i>{ Used to find filespecs }
    </i></font>NumListed <font color="#000080">: </font>Integer<font color="#000080">;                </font><font color="#008000"><i>{ Number of files listed }
    </i></font>Attr<font color="#000080">: </font>word<font color="#000080">;                         </font><font color="#008000"><i>{ Attributes to remove }
</i></font><font color="#FF0000"><b>begin
    </b></font>NumListed <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;                     </font><font color="#008000"><i>{ Number of files listed }
</i></font>	GetDir<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">, </font>OrgDir<font color="#000080">);</font>	        		<font color="#008000"><i>{ Get original directory }

    </i></font>ChDir<font color="#000080">(</font>directory<font color="#000080">);                   </font><font color="#008000"><i>{ Change to target directory }
</i></font>	GetDir<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">, </font>CurDir<font color="#000080">);</font>					<font color="#008000"><i>{ Get current directory }

  { Find first directory present }
    </i></font>FindFirst<font color="#000080">(</font><font color="#800000">'*.*'</font><font color="#000080">, </font>faDirectory <font color="#FF0000"><b>or </b></font>faReadOnly <font color="#FF0000"><b>or </b></font>faHidden <font color="#FF0000"><b>or </b></font>faSysFile<font color="#000080">,
        </font>SearchRec<font color="#000080">);
    </font>FindNext<font color="#000080">(</font>SearchRec<font color="#000080">);
    </font>FindNext<font color="#000080">(</font>SearchRec<font color="#000080">);

  </font><font color="#008000"><i>{ Loop and list any files found }
    </i></font><font color="#FF0000"><b>repeat
        if </b></font><font color="#000080">((</font>DosError <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">((</font>SearchRec<font color="#000080">.</font>Attr <font color="#FF0000"><b>and </b></font>faDirectory<font color="#000080">) &lt;&gt; </font><font color="#800000">0</font><font color="#000080">)) </font><font color="#FF0000"><b>then
          begin
            </b></font>NumListed <font color="#000080">:= </font>NumListed <font color="#000080">+ </font>ListFiles<font color="#000080">(</font>SearchRec<font color="#000080">.</font>Name<font color="#000080">);
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
        </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>DosError <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
          begin
            </b></font>NumListed <font color="#000080">:= </font>NumListed <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
            </font>Write<font color="#000080">(</font><font color="#800000">'     '</font><font color="#000080">, </font>CurDir<font color="#000080">, </font><font color="#800000">'\'</font><font color="#000080">, </font>SearchRec<font color="#000080">.</font>Name<font color="#000080">);
            </font><font color="#FF0000"><b>if </b></font><font color="#000080">((</font>SearchRec<font color="#000080">.</font>Attr <font color="#FF0000"><b>and </b></font>faDirectory<font color="#000080">) &lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
                </b></font>Write<font color="#000080">(</font><font color="#800000">', directory'</font><font color="#000080">);
            </font><font color="#FF0000"><b>if </b></font><font color="#000080">((</font>SearchRec<font color="#000080">.</font>Attr <font color="#FF0000"><b>and </b></font>faReadOnly<font color="#000080">) &lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
                </b></font>Write<font color="#000080">(</font><font color="#800000">', read-only'</font><font color="#000080">);
            </font><font color="#FF0000"><b>if </b></font><font color="#000080">((</font>SearchRec<font color="#000080">.</font>Attr <font color="#FF0000"><b>and </b></font>faHidden<font color="#000080">) &lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
                </b></font>Write<font color="#000080">(</font><font color="#800000">', hidden'</font><font color="#000080">);
            </font><font color="#FF0000"><b>if </b></font><font color="#000080">((</font>SearchRec<font color="#000080">.</font>Attr <font color="#FF0000"><b>and </b></font>faSysFile<font color="#000080">) &lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
                </b></font>Write<font color="#000080">(</font><font color="#800000">', system'</font><font color="#000080">);
            </font>WriteLn<font color="#000080">;
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ if }
        </i></font>FindNext<font color="#000080">(</font>SearchRec<font color="#000080">);
    </font><font color="#FF0000"><b>until </b></font><font color="#000080">(</font>DosError <font color="#000080">&lt;&gt; </font><font color="#800000">0</font><font color="#000080">);

    </font>ChDir<font color="#000080">(</font>OrgDir<font color="#000080">);                      </font><font color="#008000"><i>{ Restore directory }
    </i></font>ListFiles <font color="#000080">:= </font>NumListed<font color="#000080">;             </font><font color="#008000"><i>{ Return number of files listed }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{ procedure ListFiles }


{* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 *  function HasSwitch (switch : string) : boolean                       *
 *      Checks the command-line arguements for the specified switch      *
 *  parameters:  switch, the switch to search for                        *
 *  returns:  TRUE if found, else FALSE                                  *
 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *}

</i></font><font color="#FF0000"><b>function </b></font>HasSwitch <font color="#000080">(</font>switch <font color="#000080">: </font>char<font color="#000080">) : </font>boolean<font color="#000080">;
</font><font color="#FF0000"><b>var
    </b></font>i <font color="#000080">: </font>integer<font color="#000080">;                        </font><font color="#008000"><i>{ Index variable }
</i></font><font color="#FF0000"><b>begin
    </b></font>HasSwitch <font color="#000080">:= </font>FALSE<font color="#000080">;
    </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>ParamCount<font color="#000080">-</font><font color="#800000">1 </font><font color="#FF0000"><b>do
      begin
        if </b></font><font color="#000080">(</font>Pos<font color="#000080">(</font>UpCase<font color="#000080">(</font>switch<font color="#000080">), </font>ToUpper<font color="#000080">(</font>ParamStr<font color="#000080">(</font>i<font color="#000080">))) &lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
          begin
            </b></font>HasSwitch <font color="#000080">:= </font>TRUE<font color="#000080">;
            </font>Exit<font color="#000080">;
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ if }
      </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ for }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ function HasSwitch }

</i></font><font color="#FF0000"><b>var </b></font><font color="#008000"><i>{ main variables }
    </i></font>UserInput <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font>fsDirectory<font color="#000080">];</font>	<font color="#008000"><i>{ user response }
</i></font>	Answer <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;</font>  					<font color="#008000"><i>{ user response }
    </i></font>OrgDir <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font>fsDirectory<font color="#000080">];       </font><font color="#008000"><i>{ Original directory }
    </i></font>Target <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font>fsDirectory<font color="#000080">];       </font><font color="#008000"><i>{ Directory to nuke }
    </i></font>Remove <font color="#000080">: </font>boolean<font color="#000080">;                   </font><font color="#008000"><i>{ If directory actually removed }
</i></font>	Result <font color="#000080">: </font>boolean<font color="#000080">;                   </font><font color="#008000"><i>{ Result of nuking }
</i></font>	LinesShown <font color="#000080">: </font>word<font color="#000080">;</font>					<font color="#008000"><i>{ Number of lines shown so far }
    </i></font>Attrib <font color="#000080">: </font>word<font color="#000080">;                      </font><font color="#008000"><i>{ File attributes to delete }

</i></font><font color="#FF0000"><b>begin </b></font><font color="#008000"><i>{ main program }
  { Print greeting }
    </i></font>WriteLn<font color="#000080">(</font><font color="#800000">'NUKE Directory  '</font><font color="#000080">, </font>MajorVer<font color="#000080">, </font><font color="#800000">'.'</font><font color="#000080">, </font>MinorVer<font color="#000080">);
    </font>WriteLn<font color="#000080">(</font><font color="#800000">'    (C)'</font><font color="#000080">, </font>Year<font color="#000080">, </font><font color="#800000">' by Kerr'</font><font color="#000080">);
    </font>WriteLn<font color="#000080">;

  </font><font color="#008000"><i>{ Check for DOS help command }
    </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">((</font>ParamCount <font color="#000080">&lt; </font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font>HasSwitch<font color="#000080">(</font><font color="#800000">'?'</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>Pos<font color="#000080">(</font><font color="#800000">'?'</font><font color="#000080">, </font>ParamStr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">)) &lt;&gt; </font><font color="#800000">0</font><font color="#000080">)) </font><font color="#FF0000"><b>then
      begin
        </b></font>Write<font color="#000080">(</font><font color="#800000">'Removes a subdirectory, along with the files and '</font><font color="#000080">);
        </font>WriteLn<font color="#000080">(</font><font color="#800000">'subdirectories is contains'</font><font color="#000080">);
        </font>WriteLn<font color="#000080">;
        </font>WriteLn<font color="#000080">(</font><font color="#800000">'NUKE [options] [directory]'</font><font color="#000080">);
        </font>WriteLn<font color="#000080">;
        </font>WriteLn<font color="#000080">(</font><font color="#800000">'Options are as follows:'</font><font color="#000080">);
</font>		WriteLn<font color="#000080">(</font><font color="#800000">'  K      Keeps the subdirectory after clearing out files.'</font><font color="#000080">);
</font>		WriteLn<font color="#000080">(</font><font color="#800000">'  H      Deletes hidden files.'</font><font color="#000080">);
</font>		WriteLn<font color="#000080">(</font><font color="#800000">'  R      Deletes read-only files.'</font><font color="#000080">);
</font>		WriteLn<font color="#000080">(</font><font color="#800000">'  S      Deletes system files.'</font><font color="#000080">);
</font>		WriteLn<font color="#000080">(</font><font color="#800000">'  A      Deletes files of all attributes.'</font><font color="#000080">);
        </font>WriteLn<font color="#000080">(</font><font color="#800000">'  Y      No verification before NUKEing - dangerous!'</font><font color="#000080">);
</font>		Write  <font color="#000080">(</font><font color="#800000">'  V      Verbose, displays files and subdirectories they '</font><font color="#000080">);
</font>		WriteLn<font color="#000080">(</font><font color="#800000">'are removed - SLOW!'</font><font color="#000080">);
</font>		WriteLn<font color="#000080">(</font><font color="#800000">'  P      Pause after each screen.'</font><font color="#000080">);
        </font>WriteLn<font color="#000080">;
        </font>WriteLn<font color="#000080">(</font><font color="#800000">'You cannot nuke the root directory.'</font><font color="#000080">);
        </font>WriteLn<font color="#000080">(</font><font color="#800000">'Nuke will not Pause if you redirect the input or output.'</font><font color="#000080">);
        </font>Exit<font color="#000080">;
</font>	  <font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ Set number of lines displayed }
</i></font>	LinesShown <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;

  </font><font color="#008000"><i>{ Check for /K switch }
    </i></font>Remove <font color="#000080">:= </font><font color="#FF0000"><b>not </b></font>HasSwitch<font color="#000080">(</font><font color="#800000">'K'</font><font color="#000080">);

    </font>Attrib <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;

  </font><font color="#008000"><i>{ Check for /H switch }
    </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>HasSwitch<font color="#000080">(</font><font color="#800000">'H'</font><font color="#000080">)) </font><font color="#FF0000"><b>then
        </b></font>Attrib <font color="#000080">:= </font>Attrib <font color="#FF0000"><b>or </b></font>faHidden<font color="#000080">;
  </font><font color="#008000"><i>{ Check for /R switch }
    </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>HasSwitch<font color="#000080">(</font><font color="#800000">'R'</font><font color="#000080">)) </font><font color="#FF0000"><b>then
        </b></font>Attrib <font color="#000080">:= </font>Attrib <font color="#FF0000"><b>or </b></font>faReadOnly<font color="#000080">;
  </font><font color="#008000"><i>{ Check for /S switch }
    </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>HasSwitch<font color="#000080">(</font><font color="#800000">'S'</font><font color="#000080">)) </font><font color="#FF0000"><b>then
        </b></font>Attrib <font color="#000080">:= </font>Attrib <font color="#FF0000"><b>or </b></font>faSysFile<font color="#000080">;
  </font><font color="#008000"><i>{ Check for /A switch }
    </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>HasSwitch<font color="#000080">(</font><font color="#800000">'A'</font><font color="#000080">)) </font><font color="#FF0000"><b>then
        if </b></font><font color="#000080">(</font>Attrib <font color="#000080">&lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
          begin
            </b></font>WriteLn<font color="#000080">(</font><font color="#800000">'Cannot use the /A switch with other attribute switches.'</font><font color="#000080">);
            </font>Exit<font color="#000080">;
          </font><font color="#FF0000"><b>end
        else
            </b></font>Attrib <font color="#000080">:= </font>faAnyFile<font color="#000080">;

</font><font color="#008000"><i>{$IFDEF MsDos}
    </i></font>UserInput <font color="#000080">:= </font>ParamStr<font color="#000080">(</font>ParamCount<font color="#000080">);
</font><font color="#008000"><i>{$ENDIF}
{$IFDEF Windows}
    </i></font>Write<font color="#000080">(</font><font color="#800000">'Input directory to remove:  '</font><font color="#000080">);
    </font>ReadLn<font color="#000080">(</font>UserInput<font color="#000080">);
</font><font color="#008000"><i>{$ENDIF}

  { Save directory and drive and try to change to new directory }
    </i></font>GetDir<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">, </font>OrgDir<font color="#000080">);

    </font><font color="#008000"><i>{$I-}
    </i></font>ChDir<font color="#000080">(</font>UserInput<font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>IOResult <font color="#000080">&lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
      begin
        </b></font>WriteLn<font color="#000080">(</font><font color="#800000">'   Specified directory not found!'</font><font color="#000080">);
        </font>ChDir<font color="#000080">(</font>OrgDir<font color="#000080">);
        </font>Exit<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#008000"><i>{$I+}

</i></font>	GetDir<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">, </font>Target<font color="#000080">);</font>					<font color="#008000"><i>{ Get new directory }

  { Display target directory and change back from it }
    </i></font>WriteLn<font color="#000080">(</font><font color="#800000">' Target is '</font><font color="#000080">, </font>Target<font color="#000080">);
</font>	WriteLn<font color="#000080">;

</font>	ChDir<font color="#000080">(</font>OrgDir<font color="#000080">);                      </font><font color="#008000"><i>{ Restore directory }

  { Exit if root directory being nuked }
    </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>length<font color="#000080">(</font>Target<font color="#000080">) = </font><font color="#800000">3</font><font color="#000080">) </font><font color="#FF0000"><b>then
      begin
        </b></font>WriteLn<font color="#000080">(</font><font color="#800000">'You cannot NUKE the root directory!'</font><font color="#000080">);
        </font>WriteLn<font color="#000080">(</font><font color="#800000">'  (Try FORMAT...)'</font><font color="#000080">);
        </font>Exit<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;


  </font><font color="#008000"><i>{ Double check before DECIMATING directory }
</i></font>	<font color="#FF0000"><b>if </b></font><font color="#000080">(</font><font color="#FF0000"><b>not </b></font>HasSwitch<font color="#000080">(</font><font color="#800000">'Y'</font><font color="#000080">)) </font><font color="#FF0000"><b>then
</b></font>	  <font color="#FF0000"><b>begin
</b></font>		WriteLn<font color="#000080">(</font><font color="#800000">' Are you SURE you want to OBLITERATE this directory and'</font><font color="#000080">);
</font>		Write<font color="#000080">(</font><font color="#800000">'  everything in or under it?!?!? (Y/N) '</font><font color="#000080">);
</font><font color="#008000"><i>{$IFDEF MsDos}
</i></font>		ClearKb<font color="#000080">;
</font><font color="#008000"><i>{$ENDIF}
</i></font>		ReadLn<font color="#000080">(</font>Answer<font color="#000080">);
</font>		Answer <font color="#000080">:= </font>ToUpper<font color="#000080">(</font>Answer<font color="#000080">);
</font>	  <font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ If 'yes' or 'y' entered, or 'Y' SWITCH set, nuke that puppy }
</i></font>	<font color="#FF0000"><b>if </b></font><font color="#000080">((</font>answer <font color="#000080">= </font><font color="#800000">'YES'</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>answer <font color="#000080">= </font><font color="#800000">'Y'</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font>HasSwitch<font color="#000080">(</font><font color="#800000">'Y'</font><font color="#000080">))  </font><font color="#FF0000"><b>then
      begin
        </b></font>WriteLn<font color="#000080">(</font><font color="#800000">' Beginning now...'</font><font color="#000080">);
</font>		Result <font color="#000080">:= </font>NukeDir<font color="#000080">(</font>Target<font color="#000080">, </font>Remove<font color="#000080">, </font>HasSwitch<font color="#000080">(</font><font color="#800000">'V'</font><font color="#000080">),
</font>				HasSwitch<font color="#000080">(</font><font color="#800000">'P'</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font><font color="#FF0000"><b>not </b></font>IsRedirected<font color="#000080">), </font>Attrib<font color="#000080">, </font>LinesShown<font color="#000080">);
        </font>WriteLn<font color="#000080">(</font><font color="#800000">'  ...may the diety of your choice have mercy on your soul.'</font><font color="#000080">);
      </font><font color="#FF0000"><b>end </b></font><font color="#008000"><i>{ if }
    </i></font><font color="#FF0000"><b>else
      begin
        </b></font>Result <font color="#000080">:= </font>FALSE<font color="#000080">;
        </font>WriteLn<font color="#000080">(</font><font color="#800000">' Nothing done.'</font><font color="#000080">);
        </font>Exit<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ else }

  { List files not deleted }
    </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font><font color="#FF0000"><b>not </b></font>Result<font color="#000080">) </font><font color="#FF0000"><b>then
      begin
        </b></font>WriteLn<font color="#000080">;
      </font><font color="#008000"><i>{ Display a message if the directory was SUPPOSED to be removed }
        </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>Remove<font color="#000080">) </font><font color="#FF0000"><b>then
          begin
            </b></font>WriteLn<font color="#000080">(</font><font color="#800000">'  NUKE failed to remove the directory.'</font><font color="#000080">);
          </font><font color="#FF0000"><b>end
        else
          begin
            </b></font>WriteLn<font color="#000080">(</font><font color="#800000">'  NUKE has kept the directory.'</font><font color="#000080">);
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
        </font>WriteLn<font color="#000080">(</font><font color="#800000">' The following files or directories remain in it:'</font><font color="#000080">);
        </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>ListFiles<font color="#000080">(</font>Target<font color="#000080">) = </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
            </b></font>WriteLn<font color="#000080">(</font><font color="#800000">'    None'</font><font color="#000080">);
      </font><font color="#008000"><i>{ Display helpful hint if the directory was SUPPOSED to be removed }
        </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>Remove<font color="#000080">) </font><font color="#FF0000"><b>then
          begin
            </b></font>WriteLn<font color="#000080">;
            </font>Write<font color="#000080">(</font><font color="#800000">'If you wish to remove these files, try the '</font><font color="#000080">);
            </font>WriteLn<font color="#000080">(</font><font color="#800000">'/H, /R, and /S options,'</font><font color="#000080">);
            </font>WriteLn<font color="#000080">(</font><font color="#800000">'  or the /A option.'</font><font color="#000080">);
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ if }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">. </font><font color="#008000"><i>{ main }
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to DIRS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0041.PAS">Original</a><b>]</b></p></body>
</html>
