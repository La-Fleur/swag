<html>
<head><title> "Yet Another Tree Program" by DAVID DANIEL ANDERSON</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to DIRS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0051.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>PROGRAM </b></font>YATP<font color="#000080">; </font><font color="#008000"><i>{ Free DOS utility: Yet Another &quot;Tree&quot; Program. }
(*   I got much of the code for this program, particularly
     the &quot;DisplayDir&quot; and &quot;ReadFiles&quot; Procedures, from:
   &Eacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&raquo;
   &ordm;  VTree2                                              &ordm;
   &ordm;  Version 1.6, 7-16-90 -- Public Domain by John Land  &ordm;
   &ordm;  (Found in SWAG, in the DIRS library)                &ordm;
   &Egrave;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&frac14;
*)
{$M 32768,0,655360} { Allow a HUGE stack because of heavy recursion. }
{  &Uacute;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&iquest;
   &sup3; USES AND GLOBAL VARIABLES &amp; CONSTANTS              &sup3;
   &Agrave;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Ugrave;  }

</i></font><font color="#FF0000"><b>USES
  </b></font>Crt<font color="#000080">, </font>DOS<font color="#000080">;

</font><font color="#FF0000"><b>CONST
  </b></font>NL        <font color="#000080">= </font><font color="#800000">#13#10</font><font color="#000080">;
  </font>NonVLabel <font color="#000080">= </font>ReadOnly <font color="#000080">+ </font>Hidden <font color="#000080">+ </font>SysFile <font color="#000080">+ </font>Directory <font color="#000080">+ </font>Archive<font color="#000080">;
  </font>LevelMax  <font color="#000080">= </font><font color="#800000">16</font><font color="#000080">;

</font><font color="#FF0000"><b>TYPE
  </b></font>FPtr      <font color="#000080">= ^</font>Dir_Rec<font color="#000080">;
  </font>Dir_Rec   <font color="#000080">= </font><font color="#FF0000"><b>RECORD                           </b></font><font color="#008000"><i>{ Double Pointer Record    }
                </i></font>DirName <font color="#000080">: </font><font color="#FF0000"><b>STRING </b></font><font color="#000080">[</font><font color="#800000">14</font><font color="#000080">];
                </font>DirNum  <font color="#000080">: </font>INTEGER<font color="#000080">;
                </font>Next    <font color="#000080">: </font>Fptr<font color="#000080">;
              </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>VAR
  </b></font>Dir       <font color="#000080">: </font><font color="#FF0000"><b>STRING</b></font><font color="#000080">;
  </font>Loop<font color="#000080">,
  </font>tooDeep   <font color="#000080">: </font>BOOLEAN<font color="#000080">;
  </font>Level     <font color="#000080">: </font>INTEGER<font color="#000080">;
  </font>Flag      <font color="#000080">: </font><font color="#FF0000"><b>ARRAY </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font>LevelMax<font color="#000080">] </font><font color="#FF0000"><b>OF STRING </b></font><font color="#000080">[</font><font color="#800000">2</font><font color="#000080">];
  </font>Filetotal<font color="#000080">,
  </font>Bytetotal<font color="#000080">,
  </font>Dirstotal <font color="#000080">: </font>LONGINT<font color="#000080">;
  </font>ColorCnt  <font color="#000080">: </font>WORD<font color="#000080">;

  </font>ClusterSize <font color="#000080">: </font>WORD<font color="#000080">;
  </font>TotalClusters <font color="#000080">: </font>LONGINT<font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>ShowHelp <font color="#000080">(</font><font color="#FF0000"><b>CONST </b></font>problem <font color="#000080">: </font>BYTE<font color="#000080">);
</font><font color="#008000"><i>(* If any *foreseen* errors arise, we are sent here to
   give a little help and exit (relatively) peacefully *)
</i></font><font color="#FF0000"><b>CONST
  </b></font>progdesc <font color="#000080">= </font><font color="#800000">'YATP v1.00 - Free DOS utility: Yet Another &quot;Tree&quot; Program.'</font><font color="#000080">;
  </font>author   <font color="#000080">= </font><font color="#800000">'July 3, 1995.  Copyright (c) 1995 by David Daniel Anderson - Reign Ware.' </font><font color="#000080">+ </font>NL<font color="#000080">;
  </font>usage    <font color="#000080">= </font><font color="#800000">'Usage:  YATP [drive:][\][directory]' </font><font color="#000080">+ </font>NL<font color="#000080">;
  </font>notes    <font color="#000080">= </font><font color="#800000">'Notes:  All parameters are optional; output may be piped or redirected.' </font><font color="#000080">+ </font>NL<font color="#000080">;
  </font>examples <font color="#000080">= </font><font color="#800000">'Examples:' </font><font color="#000080">+ </font>NL<font color="#000080">;
  </font>examp1   <font color="#000080">= </font><font color="#800000">'        YATP                   &lt;- all directories below current'</font><font color="#000080">;
  </font>examp2   <font color="#000080">= </font><font color="#800000">'        YATP c:\               &lt;- all directories on drive C:'</font><font color="#000080">;
  </font>examp3   <font color="#000080">= </font><font color="#800000">'        YATP d:\os2\           &lt;- only directories below D:\OS2'</font><font color="#000080">;
  </font>examp4   <font color="#000080">= </font><font color="#800000">'        YATP c:\ | list /s     &lt;- pipe C: tree to LIST' </font><font color="#000080">+ </font>NL<font color="#000080">;
</font><font color="#FF0000"><b>VAR
  message </b></font><font color="#000080">: </font><font color="#FF0000"><b>STRING </b></font><font color="#000080">[</font><font color="#800000">50</font><font color="#000080">];
</font><font color="#FF0000"><b>BEGIN
  </b></font>WriteLn <font color="#000080">(</font>progdesc<font color="#000080">);
  </font>WriteLn <font color="#000080">(</font>author<font color="#000080">);
  </font>WriteLn <font color="#000080">(</font>usage<font color="#000080">);
  </font>WriteLn <font color="#000080">(</font>notes<font color="#000080">);
  </font>WriteLn <font color="#000080">(</font>examples<font color="#000080">);
  </font>WriteLn <font color="#000080">(</font>examp1<font color="#000080">);
  </font>WriteLn <font color="#000080">(</font>examp2<font color="#000080">);
  </font>WriteLn <font color="#000080">(</font>examp3<font color="#000080">);
  </font>WriteLn <font color="#000080">(</font>examp4<font color="#000080">);
  </font><font color="#FF0000"><b>IF </b></font>problem <font color="#000080">&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>THEN BEGIN
    CASE </b></font>problem <font color="#FF0000"><b>OF
      </b></font><font color="#800000">1 </font><font color="#000080">: </font><font color="#FF0000"><b>message </b></font><font color="#000080">:= </font><font color="#800000">'Invalid drive or directory.'</font><font color="#000080">;
      </font><font color="#FF0000"><b>ELSE  message </b></font><font color="#000080">:= </font><font color="#800000">'Unanticipated error of unknown type.'</font><font color="#000080">;
    </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
    </font>WriteLn <font color="#000080">(</font><font color="#800000">#7</font><font color="#000080">, </font><font color="#FF0000"><b>message</b></font><font color="#000080">);
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
  </font>Halt <font color="#000080">(</font>problem<font color="#000080">)
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>FUNCTION </b></font>Format <font color="#000080">(</font>Num <font color="#000080">: </font>LONGINT<font color="#000080">) : </font><font color="#FF0000"><b>STRING</b></font><font color="#000080">;      </font><font color="#008000"><i>{converts Integer to String}
</i></font><font color="#FF0000"><b>VAR </b></font>NumStr <font color="#000080">: </font><font color="#FF0000"><b>STRING</b></font><font color="#000080">;                           </font><font color="#008000"><i>{&amp; inserts commas as needed}
  </i></font>l <font color="#000080">: </font>SHORTINT<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>Str <font color="#000080">(</font>Num<font color="#000080">, </font>NumStr<font color="#000080">);
  </font>l <font color="#000080">:= (</font>Length <font color="#000080">(</font>NumStr<font color="#000080">) - </font><font color="#800000">2</font><font color="#000080">);
  </font><font color="#FF0000"><b>WHILE </b></font><font color="#000080">(</font>l <font color="#000080">&gt; </font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>DO BEGIN
    </b></font>Insert <font color="#000080">(</font><font color="#800000">','</font><font color="#000080">, </font>NumStr<font color="#000080">, </font>l<font color="#000080">);
    </font>Dec <font color="#000080">(</font>l<font color="#000080">, </font><font color="#800000">3</font><font color="#000080">);
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
  </font>Format <font color="#000080">:= </font>NumStr<font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>FUNCTION </b></font>OutputRedirected <font color="#000080">: </font>BOOLEAN<font color="#000080">; </font><font color="#008000"><i>(* FROM SWAG *)
</i></font><font color="#FF0000"><b>VAR </b></font>Regs <font color="#000080">: </font>REGISTERS<font color="#000080">; </font>Handle <font color="#000080">: </font>WORD <font color="#FF0000"><b>ABSOLUTE </b></font>Output<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  WITH </b></font>Regs <font color="#FF0000"><b>DO
  BEGIN
    </b></font>AX <font color="#000080">:= </font><font color="#800000">$4400</font><font color="#000080">;
    </font>BX <font color="#000080">:= </font>Handle<font color="#000080">;
    </font>MsDos <font color="#000080">(</font>Regs<font color="#000080">);
    </font><font color="#FF0000"><b>IF </b></font>DL <font color="#FF0000"><b>AND </b></font><font color="#800000">$82 </font><font color="#000080">= </font><font color="#800000">$82 </font><font color="#FF0000"><b>THEN </b></font>OutputRedirected <font color="#000080">:= </font>FALSE
    <font color="#FF0000"><b>ELSE </b></font>OutputRedirected <font color="#000080">:= </font>TRUE<font color="#000080">;
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">; </font><font color="#008000"><i>{With Regs}
</i></font><font color="#FF0000"><b>END</b></font><font color="#000080">; </font><font color="#008000"><i>{OutputRedirected}

</i></font><font color="#FF0000"><b>PROCEDURE </b></font>CheckForRedirection<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  IF </b></font>OutputRedirected <font color="#FF0000"><b>THEN BEGIN
    </b></font>WriteLn <font color="#000080">(</font><font color="#800000">'YATP output has been redirected.'</font><font color="#000080">);
    </font>Assign <font color="#000080">(</font>Output<font color="#000080">, </font><font color="#800000">''</font><font color="#000080">);
  </font><font color="#FF0000"><b>END
  ELSE
    </b></font>AssignCrt <font color="#000080">(</font>Output<font color="#000080">);
  </font>Rewrite <font color="#000080">(</font>Output<font color="#000080">);
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>FUNCTION </b></font>DirExists <font color="#000080">(</font>filename<font color="#000080">: </font>PATHSTR<font color="#000080">): </font>BOOLEAN<font color="#000080">;
</font><font color="#FF0000"><b>VAR
  </b></font>Attr <font color="#000080">: </font>WORD<font color="#000080">;
  </font>f    <font color="#000080">: </font><font color="#FF0000"><b>FILE</b></font><font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>Assign <font color="#000080">(</font>f<font color="#000080">, </font>filename<font color="#000080">);
  </font>GetFAttr <font color="#000080">(</font>f<font color="#000080">, </font>Attr<font color="#000080">);
  </font><font color="#FF0000"><b>IF </b></font><font color="#000080">(</font>DosError <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>AND </b></font><font color="#000080">((</font>Attr <font color="#FF0000"><b>AND </b></font>Directory<font color="#000080">) = </font>Directory<font color="#000080">)
  </font><font color="#FF0000"><b>THEN </b></font>DirExists <font color="#000080">:= </font>TRUE
  <font color="#FF0000"><b>ELSE </b></font>DirExists <font color="#000080">:= </font>FALSE<font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>ReadParameters<font color="#000080">;
</font><font color="#FF0000"><b>VAR
  </b></font>Param   <font color="#000080">: </font><font color="#FF0000"><b>STRING</b></font><font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  IF </b></font><font color="#000080">(</font>ParamCount <font color="#000080">&gt; </font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>THEN </b></font>ShowHelp <font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
  </font>Param <font color="#000080">:= </font><font color="#FF0000"><b>STRING </b></font><font color="#000080">(</font>Ptr <font color="#000080">(</font>PrefixSeg<font color="#000080">, </font><font color="#800000">$0080</font><font color="#000080">)^);
  </font><font color="#FF0000"><b>WHILE </b></font><font color="#000080">(</font>Param <font color="#000080">[</font><font color="#800000">0</font><font color="#000080">] &gt; </font><font color="#800000">#0</font><font color="#000080">) </font><font color="#FF0000"><b>AND </b></font><font color="#000080">(</font>Param <font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] = </font><font color="#800000">#32</font><font color="#000080">) </font><font color="#FF0000"><b>DO </b></font>Delete <font color="#000080">(</font>Param<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);

  </font><font color="#FF0000"><b>IF </b></font><font color="#000080">(</font>Pos <font color="#000080">(</font><font color="#800000">'?'</font><font color="#000080">, </font>Param<font color="#000080">) &lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>OR </b></font><font color="#000080">(</font>Pos <font color="#000080">(</font><font color="#800000">'/'</font><font color="#000080">, </font>Param<font color="#000080">) &lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>THEN </b></font>ShowHelp <font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);

  </font>Param <font color="#000080">:= </font>FExpand <font color="#000080">(</font>Param<font color="#000080">);                    </font><font color="#008000"><i>{ Set Var to param. String }
  </i></font><font color="#FF0000"><b>IF </b></font>Param <font color="#000080">[</font>Length <font color="#000080">(</font>Param<font color="#000080">) ] = </font><font color="#800000">'\' </font><font color="#FF0000"><b>THEN
    </b></font>Dec <font color="#000080">(</font>Param <font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]);                           </font><font color="#008000"><i>{ Remove trailing backslash}

  </i></font>Dir <font color="#000080">:= </font>Param<font color="#000080">;

  </font><font color="#FF0000"><b>IF </b></font><font color="#000080">(</font>Length <font color="#000080">(</font>Param<font color="#000080">) = </font><font color="#800000">2</font><font color="#000080">) </font><font color="#FF0000"><b>AND </b></font><font color="#000080">(</font>Param <font color="#000080">[</font><font color="#800000">2</font><font color="#000080">] = </font><font color="#800000">':'</font><font color="#000080">) </font><font color="#FF0000"><b>THEN
    </b></font>Param <font color="#000080">:= </font>Param <font color="#000080">+ </font><font color="#800000">'\'</font><font color="#000080">;                      </font><font color="#008000"><i>{add backslash to test ROOT}

  </i></font><font color="#FF0000"><b>IF NOT </b></font>DirExists <font color="#000080">(</font>Param<font color="#000080">) </font><font color="#FF0000"><b>THEN
    </b></font>ShowHelp <font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>FUNCTION </b></font>GetClusterSize <font color="#000080">(</font>drive <font color="#000080">: </font>BYTE<font color="#000080">): </font>WORD<font color="#000080">;  </font><font color="#008000"><i>{ SWAG routine }
</i></font><font color="#FF0000"><b>VAR
  </b></font>regs <font color="#000080">: </font>REGISTERS<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>regs<font color="#000080">. </font>CX <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;         </font><font color="#008000"><i>{set for error-checking just to be sure}
  </i></font>regs<font color="#000080">. </font>AX <font color="#000080">:= </font><font color="#800000">$3600</font><font color="#000080">;     </font><font color="#008000"><i>{get free space}
  </i></font>regs<font color="#000080">. </font>DX <font color="#000080">:= </font>drive<font color="#000080">;     </font><font color="#008000"><i>{0=current, 1=a:, 2=b:, etc.}
  </i></font>MsDos <font color="#000080">(</font>regs<font color="#000080">);
  </font>getclustersize <font color="#000080">:= </font>regs<font color="#000080">. </font>AX <font color="#000080">* </font>regs<font color="#000080">. </font>CX<font color="#000080">;       </font><font color="#008000"><i>{cluster size!}
</i></font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>InitGlobalVars<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>Dir       <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;                             </font><font color="#008000"><i>{ Init. global Vars.       }
  </i></font>Loop      <font color="#000080">:= </font>TRUE<font color="#000080">;
  </font>Level     <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>tooDeep   <font color="#000080">:= </font>FALSE<font color="#000080">;
  </font>Filetotal <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>Bytetotal <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>Dirstotal <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;                              </font><font color="#008000"><i>{ Always have a root dir.  }
  </i></font>ColorCnt  <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;

  </font><font color="#FF0000"><b>IF </b></font>ParamCount <font color="#000080">&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>THEN
    </b></font>ReadParameters                             <font color="#008000"><i>{ Deal With any params.    }
  </i></font><font color="#FF0000"><b>ELSE
    </b></font>GetDir <font color="#000080">(</font><font color="#800000">0</font><font color="#000080">, </font>Dir<font color="#000080">);

  </font>TotalClusters <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>ClusterSize <font color="#000080">:= (</font>GetClusterSize <font color="#000080">(</font>Ord <font color="#000080">(</font>UpCase <font color="#000080">(</font>Dir <font color="#000080">[</font><font color="#800000">1</font><font color="#000080">])) - </font><font color="#800000">64</font><font color="#000080">));
  </font><font color="#FF0000"><b>IF </b></font>ClusterSize <font color="#000080">= </font><font color="#800000">0
  </font><font color="#FF0000"><b>THEN </b></font>ShowHelp <font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>DisplayHeader<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>WriteLn <font color="#000080">(</font><font color="#800000">'             File size   Files   Directory name'</font><font color="#000080">);
  </font>WriteLn <font color="#000080">(</font><font color="#800000">'&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;'</font><font color="#000080">);
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>CalculateWaste <font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>SR<font color="#000080">: </font>SEARCHREC<font color="#000080">);
</font><font color="#FF0000"><b>BEGIN
  IF </b></font><font color="#000080">((</font>SR<font color="#000080">. </font>Attr <font color="#FF0000"><b>AND </b></font>Directory<font color="#000080">) &lt;&gt; </font>Directory<font color="#000080">)
     </font><font color="#FF0000"><b>AND </b></font><font color="#000080">((</font>SR<font color="#000080">. </font>Attr <font color="#FF0000"><b>AND </b></font>VolumeID<font color="#000080">) &lt;&gt; </font>VolumeID<font color="#000080">)
  </font><font color="#FF0000"><b>THEN BEGIN
    </b></font>TotalClusters <font color="#000080">:= </font>TotalClusters <font color="#000080">+ (</font>Sr<font color="#000080">. </font>Size <font color="#FF0000"><b>DIV </b></font>ClusterSize<font color="#000080">);
    </font><font color="#FF0000"><b>IF </b></font><font color="#000080">((</font>Sr<font color="#000080">. </font>Size <font color="#FF0000"><b>MOD </b></font>ClusterSize<font color="#000080">) &lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>THEN </b></font>Inc <font color="#000080">(</font>TotalClusters<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>DisplayDir <font color="#000080">(</font>DirP<font color="#000080">, </font>DirN <font color="#000080">: </font><font color="#FF0000"><b>STRING</b></font><font color="#000080">; </font>Levl<font color="#000080">,
                     </font>NumSubsVar2<font color="#000080">, </font>SubNumVar2<font color="#000080">, </font>NumSubsVar3<font color="#000080">, </font>NmbrFil <font color="#000080">: </font>INTEGER<font color="#000080">;
                     </font>FilLen <font color="#000080">: </font>LONGINT<font color="#000080">);

</font><font color="#008000"><i>{NumSubsVar2 is the # of subdirs. in previous level;
 NumSumsVar3 is the # of subdirs. in the current level.
 DirN is the current subdir.; DirP is the previous path}

</i></font><font color="#FF0000"><b>CONST
  </b></font>Blank    <font color="#000080">= </font><font color="#800000">#32</font><font color="#000080">;
</font><font color="#FF0000"><b>VAR
  </b></font>BegLine<font color="#000080">,
  </font>WrtStr<font color="#000080">,
  </font>FlagStr <font color="#000080">: </font><font color="#FF0000"><b>STRING</b></font><font color="#000080">;
  </font>FlagIndex <font color="#000080">: </font>BYTE<font color="#000080">;

</font><font color="#FF0000"><b>BEGIN
  </b></font>BegLine <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;                               </font><font color="#008000"><i>{ Init. Variables          }
  </i></font><font color="#FF0000"><b>IF </b></font>Levl <font color="#000080">&gt; </font>LevelMax <font color="#FF0000"><b>THEN
  BEGIN
    </b></font>tooDeep <font color="#000080">:= </font>TRUE<font color="#000080">;
    </font>Exit<font color="#000080">;
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>IF </b></font>Levl <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>THEN                             </b></font><font color="#008000"><i>{ Special handling For     }
    </i></font><font color="#FF0000"><b>IF </b></font>Dir <font color="#000080">= </font><font color="#800000">'' </font><font color="#FF0000"><b>THEN                           </b></font><font color="#008000"><i>{ initial (0) dir. level   }
      </i></font>WrtStr <font color="#000080">:= </font><font color="#800000">'ROOT'
    </font><font color="#FF0000"><b>ELSE
      </b></font>WrtStr <font color="#000080">:= </font>DirP
  <font color="#FF0000"><b>ELSE
  BEGIN                                        </b></font><font color="#008000"><i>{ Level 1+ routines        }
    </i></font><font color="#FF0000"><b>IF </b></font>SubNumVar2 <font color="#000080">= </font>NumSubsVar2 <font color="#FF0000"><b>THEN           </b></font><font color="#008000"><i>{ if last node in subtree, }
    </i></font><font color="#FF0000"><b>BEGIN                                      </b></font><font color="#008000"><i>{ use &Agrave;&Auml; symbol &amp; set flag }
      </i></font>BegLine     <font color="#000080">:= </font><font color="#800000">'&Agrave;&Auml;'</font><font color="#000080">;                     </font><font color="#008000"><i>{ padded With blanks       }
      </i></font>Flag <font color="#000080">[</font>Levl<font color="#000080">] := </font>Blank <font color="#000080">+ </font>Blank<font color="#000080">;
    </font><font color="#FF0000"><b>END
    ELSE                                       </b></font><font color="#008000"><i>{ otherwise, use &Atilde;&Auml; symbol }
    </i></font><font color="#FF0000"><b>BEGIN                                      </b></font><font color="#008000"><i>{ &amp; set flag padded With   }
      </i></font>BegLine     <font color="#000080">:= </font><font color="#800000">'&Atilde;&Auml;'</font><font color="#000080">;                     </font><font color="#008000"><i>{ blanks                   }
      </i></font>Flag <font color="#000080">[</font>Levl<font color="#000080">] := </font><font color="#800000">'&sup3;' </font><font color="#000080">+ </font>Blank<font color="#000080">;
    </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

    </font>FlagStr <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
    </font><font color="#FF0000"><b>FOR </b></font>FlagIndex <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>TO </b></font>Levl <font color="#000080">- </font><font color="#800000">1 </font><font color="#FF0000"><b>DO          </b></font><font color="#008000"><i>{ Insert &sup3; &amp; blanks as     }
      </i></font>FlagStr <font color="#000080">:= </font>FlagStr <font color="#000080">+ </font>Flag <font color="#000080">[</font>FlagIndex<font color="#000080">];   </font><font color="#008000"><i>{ needed, based on level   }
    </i></font>BegLine <font color="#000080">:= </font>FlagStr <font color="#000080">+ </font>BegLine<font color="#000080">;

    </font>WrtStr <font color="#000080">:= </font>BegLine <font color="#000080">+ </font><font color="#800000">'&Auml;&Auml;' </font><font color="#000080">+ </font>DirN<font color="#000080">;
    </font><font color="#FF0000"><b>IF </b></font><font color="#000080">(</font>NumSubsVar3 <font color="#000080">&lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>THEN                 </b></font><font color="#008000"><i>{ if cur. level has subs   }
      </i></font><font color="#FF0000"><b>IF </b></font>Levl <font color="#000080">&lt; </font>LevelMax <font color="#FF0000"><b>THEN                  </b></font><font color="#008000"><i>{ then change to &quot;T&quot; off   }
        </i></font>WrtStr <font color="#000080">[</font>Length <font color="#000080">(</font>BegLine<font color="#000080">) + </font><font color="#800000">1</font><font color="#000080">] := </font><font color="#800000">'&Acirc;'
      </font><font color="#FF0000"><b>ELSE                                     </b></font><font color="#008000"><i>{ if levelMax, special end }
        </i></font>WrtStr <font color="#000080">:= </font>WrtStr <font color="#000080">+ </font><font color="#800000">'&Auml;&gt;'</font><font color="#000080">;               </font><font color="#008000"><i>{ to indicate more levels  }
  </i></font><font color="#FF0000"><b>END</b></font><font color="#000080">;                                         </font><font color="#008000"><i>{ end level 1+ routines    }

  </i></font><font color="#FF0000"><b>IF </b></font>Odd <font color="#000080">(</font>ColorCnt<font color="#000080">) </font><font color="#FF0000"><b>THEN
    </b></font>TextColor <font color="#000080">(</font><font color="#800000">15</font><font color="#000080">)
  </font><font color="#FF0000"><b>ELSE
    </b></font>TextColor <font color="#000080">(</font><font color="#800000">9</font><font color="#000080">);
  </font>Inc <font color="#000080">(</font>ColorCnt<font color="#000080">);

  </font>WriteLn <font color="#000080">(</font>Format <font color="#000080">(</font>FilLen<font color="#000080">): </font><font color="#800000">22</font><font color="#000080">, </font>Format <font color="#000080">(</font>NmbrFil<font color="#000080">): </font><font color="#800000">8</font><font color="#000080">, </font><font color="#800000">''</font><font color="#000080">: </font><font color="#800000">3</font><font color="#000080">, </font>WrtStr<font color="#000080">)
                                               </font><font color="#008000"><i>{ Write # of Files &amp; Bytes  }
</i></font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>ReadFiles <font color="#000080">(</font>DirPrev<font color="#000080">, </font>DirNext <font color="#000080">: </font><font color="#FF0000"><b>STRING</b></font><font color="#000080">;
                     </font>SubNumVar1<font color="#000080">, </font>NumSubsVar1 <font color="#000080">: </font>INTEGER<font color="#000080">);

</font><font color="#FF0000"><b>VAR
  </b></font>FileInfo  <font color="#000080">: </font>SEARCHREC<font color="#000080">;
  </font>FileBytes <font color="#000080">: </font>LONGINT<font color="#000080">;
  </font>NumFiles<font color="#000080">,
  </font>NumSubs   <font color="#000080">: </font>INTEGER<font color="#000080">;
  </font>Dir_Ptr<font color="#000080">,
  </font>CurPtr<font color="#000080">,
  </font>FirstPtr  <font color="#000080">: </font>FPtr<font color="#000080">;

</font><font color="#FF0000"><b>BEGIN
  </b></font>FileBytes <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>NumFiles  <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>NumSubs   <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>Dir_Ptr   <font color="#000080">:= </font><font color="#FF0000"><b>NIL</b></font><font color="#000080">;
  </font>CurPtr    <font color="#000080">:= </font><font color="#FF0000"><b>NIL</b></font><font color="#000080">;
  </font>FirstPtr  <font color="#000080">:= </font><font color="#FF0000"><b>NIL</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>IF </b></font><font color="#000080">(</font>DirNext <font color="#000080">= </font><font color="#800000">''</font><font color="#000080">) </font><font color="#FF0000"><b>AND </b></font><font color="#000080">(</font>DirPrev <font color="#000080">[</font>Length <font color="#000080">(</font>DirPrev<font color="#000080">) ] = </font><font color="#800000">'\'</font><font color="#000080">) </font><font color="#FF0000"><b>THEN
    </b></font>Dec <font color="#000080">(</font>DirPrev <font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]);                         </font><font color="#008000"><i>{ Avoid double backslashes }
  </i></font><font color="#FF0000"><b>IF </b></font>Loop <font color="#FF0000"><b>THEN
    </b></font>FindFirst <font color="#000080">(</font>DirPrev <font color="#000080">+ </font>DirNext <font color="#000080">+ </font><font color="#800000">'\*.*'</font><font color="#000080">, </font>NonVLabel<font color="#000080">, </font>FileInfo<font color="#000080">);
  </font>Loop      <font color="#000080">:= </font>FALSE<font color="#000080">;                          </font><font color="#008000"><i>{ Get 1st File             }

  </i></font><font color="#FF0000"><b>WHILE </b></font>DosError <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>DO                        </b></font><font color="#008000"><i>{ Loop Until no more Files }
  </i></font><font color="#FF0000"><b>BEGIN
    IF </b></font><font color="#000080">(</font>FileInfo<font color="#000080">. </font>Name <font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] &lt;&gt; </font><font color="#800000">'.'</font><font color="#000080">) </font><font color="#FF0000"><b>THEN
    BEGIN
      IF </b></font><font color="#000080">((</font>FileInfo<font color="#000080">. </font>Attr <font color="#FF0000"><b>AND </b></font>Directory<font color="#000080">) = </font>Directory<font color="#000080">) </font><font color="#FF0000"><b>THEN
      BEGIN                                    </b></font><font color="#008000"><i>{ if fetched File is dir., }
        </i></font>New <font color="#000080">(</font>Dir_Ptr<font color="#000080">);                         </font><font color="#008000"><i>{ store a Record With dir. }
        </i></font>Dir_Ptr<font color="#000080">^. </font>DirName  <font color="#000080">:= </font>FileInfo<font color="#000080">. </font>Name<font color="#000080">;  </font><font color="#008000"><i>{ name &amp; occurence number, }
        </i></font>Inc <font color="#000080">(</font>NumSubs<font color="#000080">);                         </font><font color="#008000"><i>{ and set links to         }
        </i></font>Dir_Ptr<font color="#000080">^. </font>DirNum   <font color="#000080">:= </font>NumSubs<font color="#000080">;         </font><font color="#008000"><i>{ other Records if any     }
        </i></font><font color="#FF0000"><b>IF </b></font>CurPtr <font color="#000080">= </font><font color="#FF0000"><b>NIL THEN
        BEGIN
          </b></font>Dir_Ptr<font color="#000080">^. </font>Next <font color="#000080">:= </font><font color="#FF0000"><b>NIL</b></font><font color="#000080">;
          </font>CurPtr        <font color="#000080">:= </font>Dir_Ptr<font color="#000080">;
          </font>FirstPtr      <font color="#000080">:= </font>Dir_Ptr<font color="#000080">;
        </font><font color="#FF0000"><b>END
        ELSE
        BEGIN
          </b></font>Dir_Ptr<font color="#000080">^. </font>Next <font color="#000080">:= </font><font color="#FF0000"><b>NIL</b></font><font color="#000080">;
          </font>CurPtr<font color="#000080">^. </font>Next  <font color="#000080">:= </font>Dir_Ptr<font color="#000080">;
          </font>CurPtr        <font color="#000080">:= </font>Dir_Ptr<font color="#000080">;
        </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>END
      ELSE
      BEGIN                                    </b></font><font color="#008000"><i>{ Tally # of Bytes in File }
        </i></font>FileBytes <font color="#000080">:= </font>FileBytes <font color="#000080">+ </font>FileInfo<font color="#000080">. </font>Size<font color="#000080">;
        </font>CalculateWaste <font color="#000080">(</font>FileInfo<font color="#000080">);
        </font>Inc <font color="#000080">(</font>NumFiles<font color="#000080">);                        </font><font color="#008000"><i>{ Increment # of Files,    }
      </i></font><font color="#FF0000"><b>END</b></font><font color="#000080">;                                     </font><font color="#008000"><i>{ excluding # of subdirs.  }
    </i></font><font color="#FF0000"><b>END</b></font><font color="#000080">;
    </font>FindNext <font color="#000080">(</font>FileInfo<font color="#000080">);                       </font><font color="#008000"><i>{ Get next File            }
  </i></font><font color="#FF0000"><b>END</b></font><font color="#000080">;    </font><font color="#008000"><i>{end While}

  </i></font>Bytetotal <font color="#000080">:= </font>Bytetotal <font color="#000080">+ </font>FileBytes<font color="#000080">;
  </font>Filetotal <font color="#000080">:= </font>Filetotal <font color="#000080">+ </font>NumFiles<font color="#000080">;
  </font>Dirstotal <font color="#000080">:= </font>Dirstotal <font color="#000080">+ </font>NumSubs<font color="#000080">;

  </font>DisplayDir <font color="#000080">(</font>DirPrev<font color="#000080">, </font>DirNext<font color="#000080">, </font>Level<font color="#000080">, </font>NumSubsVar1<font color="#000080">, </font>SubNumVar1<font color="#000080">,
  </font>NumSubs<font color="#000080">, </font>NumFiles<font color="#000080">, </font>FileBytes<font color="#000080">);               </font><font color="#008000"><i>{ Pass info to &amp; call      }
  </i></font>Inc <font color="#000080">(</font>Level<font color="#000080">);                                 </font><font color="#008000"><i>{ display routine, &amp; inc.  }
                                               { level number             }

  </i></font><font color="#FF0000"><b>WHILE </b></font><font color="#000080">(</font>FirstPtr <font color="#000080">&lt;&gt; </font><font color="#FF0000"><b>NIL</b></font><font color="#000080">) </font><font color="#FF0000"><b>DO                   </b></font><font color="#008000"><i>{ if any subdirs., then    }
  </i></font><font color="#FF0000"><b>BEGIN                                        </b></font><font color="#008000"><i>{ recursively loop thru    }
    </i></font>Loop     <font color="#000080">:= </font>TRUE<font color="#000080">;                          </font><font color="#008000"><i>{ ReadFiles proc. til done }
    </i></font>ReadFiles <font color="#000080">((</font>DirPrev <font color="#000080">+ </font>DirNext <font color="#000080">+ </font><font color="#800000">'\'</font><font color="#000080">), </font>FirstPtr<font color="#000080">^. </font>DirName<font color="#000080">,
    </font>FirstPtr<font color="#000080">^. </font>DirNum<font color="#000080">, </font>NumSubs<font color="#000080">);
    </font>FirstPtr <font color="#000080">:= </font>FirstPtr<font color="#000080">^. </font>Next<font color="#000080">;
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
                                               </font><font color="#008000"><i>{ Decrement level when     }
  </i></font>Dec <font color="#000080">(</font>Level<font color="#000080">);                                 </font><font color="#008000"><i>{ finish a recursive loop  }
                                               { call to lower level of   }
</i></font><font color="#FF0000"><b>END</b></font><font color="#000080">;                                           </font><font color="#008000"><i>{ subdir.                  }

</i></font><font color="#FF0000"><b>PROCEDURE </b></font>WriteDriveInfo<font color="#000080">;
</font><font color="#FF0000"><b>VAR </b></font>DS<font color="#000080">, </font>DF <font color="#000080">: </font>LONGINT<font color="#000080">;   </font><font color="#008000"><i>{bytes of *partition* space Size/Free}
  </i></font>Disk <font color="#000080">: </font>BYTE<font color="#000080">;
  </font>Percent <font color="#000080">: </font><font color="#FF0000"><b>STRING</b></font><font color="#000080">[</font><font color="#800000">6</font><font color="#000080">];
</font><font color="#FF0000"><b>BEGIN
  </b></font>Disk <font color="#000080">:= (</font>Ord <font color="#000080">(</font>UpCase <font color="#000080">(</font>Dir <font color="#000080">[</font><font color="#800000">1</font><font color="#000080">])) - </font><font color="#800000">64</font><font color="#000080">);

  </font>DS <font color="#000080">:= </font>DiskSize <font color="#000080">(</font>Disk<font color="#000080">);
  </font><font color="#FF0000"><b>IF </b></font><font color="#000080">(</font>DS <font color="#000080">&lt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>THEN BEGIN
    </b></font>DS <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font>DF <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>END
  ELSE
    </b></font>DF <font color="#000080">:= </font>DiskFree <font color="#000080">(</font>Disk<font color="#000080">);

  </font><font color="#FF0000"><b>IF </b></font>DS <font color="#000080">= </font><font color="#800000">0
  </font><font color="#FF0000"><b>THEN </b></font>Percent <font color="#000080">:= (</font><font color="#800000">'0.00'</font><font color="#000080">)
  </font><font color="#FF0000"><b>ELSE </b></font>Str <font color="#000080">((</font><font color="#800000">100 </font><font color="#000080">* (</font>DF <font color="#000080">/ </font>DS<font color="#000080">)): </font><font color="#800000">0</font><font color="#000080">: </font><font color="#800000">2</font><font color="#000080">, </font>Percent<font color="#000080">);

  </font>WriteLn <font color="#000080">(</font><font color="#800000">'Free:  '</font><font color="#000080">, </font>Format <font color="#000080">(</font>DF<font color="#000080">): </font><font color="#800000">15</font><font color="#000080">,
  </font><font color="#800000">' bytes out of '</font><font color="#000080">, </font>Format <font color="#000080">(</font>DS<font color="#000080">),
  </font><font color="#800000">' ('</font><font color="#000080">, </font>percent<font color="#000080">, </font><font color="#800000">'% of drive is unused)'</font><font color="#000080">);
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>DisplayTally<font color="#000080">;
</font><font color="#FF0000"><b>VAR
  </b></font>WasteSpace<font color="#000080">,
  </font>TotalSpace  <font color="#000080">: </font>LONGINT<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>WriteLn <font color="#000080">(</font><font color="#800000">'&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;'</font><font color="#000080">);
  </font>WriteLn <font color="#000080">(</font><font color="#800000">'Totals:'</font><font color="#000080">, </font>Format <font color="#000080">(</font>Bytetotal<font color="#000080">): </font><font color="#800000">15</font><font color="#000080">, </font>Format <font color="#000080">(</font>Filetotal<font color="#000080">): </font><font color="#800000">8</font><font color="#000080">, </font><font color="#800000">'('</font><font color="#000080">: </font><font color="#800000">4</font><font color="#000080">, </font>Dirstotal<font color="#000080">, </font><font color="#800000">' directories)'</font><font color="#000080">);

  </font>TotalSpace <font color="#000080">:= (</font>TotalClusters <font color="#000080">* </font>ClusterSize<font color="#000080">);
  </font>WasteSpace <font color="#000080">:= (</font>TotalSpace <font color="#000080">- </font>Bytetotal<font color="#000080">);
  </font>WriteLn <font color="#000080">(</font><font color="#800000">'Using: '</font><font color="#000080">, </font>Format <font color="#000080">(</font>TotalSpace<font color="#000080">): </font><font color="#800000">15</font><font color="#000080">,
  </font><font color="#800000">' bytes altogether (based on '</font><font color="#000080">, </font>ClusterSize<font color="#000080">, </font><font color="#800000">' bytes per cluster)'</font><font color="#000080">);
  </font>Write   <font color="#000080">(</font><font color="#800000">'Making:'</font><font color="#000080">, </font>Format <font color="#000080">(</font>WasteSpace<font color="#000080">): </font><font color="#800000">15</font><font color="#000080">, </font><font color="#800000">' bytes wasted ('</font><font color="#000080">);
  </font><font color="#FF0000"><b>IF </b></font>Bytetotal <font color="#000080">= </font><font color="#800000">0
  </font><font color="#FF0000"><b>THEN </b></font>Write <font color="#000080">(</font><font color="#800000">'0.00'</font><font color="#000080">)
  </font><font color="#FF0000"><b>ELSE </b></font>Write <font color="#000080">(</font><font color="#800000">100 </font><font color="#000080">* (</font>WasteSpace <font color="#000080">/ </font>TotalSpace<font color="#000080">): </font><font color="#800000">0</font><font color="#000080">: </font><font color="#800000">2</font><font color="#000080">);
  </font>WriteLn <font color="#000080">(</font><font color="#800000">'% of the space used is wasted)'</font><font color="#000080">);

  </font>WriteDriveInfo<font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#008000"><i>{  &Uacute;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&iquest;
   &sup3; Main Program                                       &sup3;
   &Agrave;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Ugrave;  }

</i></font><font color="#FF0000"><b>BEGIN

  </b></font>ClrScr<font color="#000080">;
  </font>CheckForRedirection<font color="#000080">;                         </font><font color="#008000"><i>{ Get ready ...            }

  </i></font>InitGlobalVars<font color="#000080">;                              </font><font color="#008000"><i>{ Get set ...              }

  </i></font>TextColor <font color="#000080">(</font>Cyan<font color="#000080">);
  </font>DisplayHeader<font color="#000080">;                               </font><font color="#008000"><i>{ Display Header           }

  </i></font>ReadFiles <font color="#000080">(</font>Dir<font color="#000080">, </font><font color="#800000">''</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">);                   </font><font color="#008000"><i>{ Go! do main read routine }

  </i></font>TextColor <font color="#000080">(</font>Cyan<font color="#000080">);
  </font>DisplayTally<font color="#000080">;                                </font><font color="#008000"><i>{ Display totals           }

  </i></font><font color="#FF0000"><b>IF </b></font>tooDeep <font color="#FF0000"><b>THEN
    </b></font>WriteLn <font color="#000080">(</font>NL<font color="#000080">, </font>NL<font color="#000080">, </font><font color="#800000">''</font><font color="#000080">: </font><font color="#800000">21</font><font color="#000080">, </font><font color="#800000">'&macr; CANNOT DISPLAY MORE THAN '</font><font color="#000080">, </font>LevelMax<font color="#000080">, </font><font color="#800000">' LEVELS &reg;'</font><font color="#000080">, </font>NL<font color="#000080">);
                                               </font><font color="#008000"><i>{ if ReadFiles detects &gt; 16}
                                               { levels, tooDeep flag set }

</i></font><font color="#FF0000"><b>END</b></font><font color="#000080">.                                           </font><font color="#008000"><i>{ Finish.                  }




                                 </i></font>YATP v1<font color="#000080">.</font><font color="#800000">00
                  </font>DOS utility<font color="#000080">: </font>Yet Another <font color="#000080">&quot;</font>Tree<font color="#000080">&quot; </font><font color="#FF0000"><b>Program
                    </b></font>Freeware<font color="#000080">, </font>copyright <font color="#000080">(</font>c<font color="#000080">) </font>July <font color="#800000">3</font><font color="#000080">, </font><font color="#800000">1995
                                     </font>by
                           David Daniel Anderson
                                 Reign Ware

                  <font color="#000080">** </font>READ REIGNWAR<font color="#000080">.</font>TXT <font color="#FF0000"><b>FOR </b></font>LEGAL TERMS <font color="#000080">**



</font>YATP <font color="#FF0000"><b>is </b></font>Yet Another <font color="#000080">&quot;</font>Tree<font color="#000080">&quot; </font><font color="#FF0000"><b>Program</b></font><font color="#000080">.  </font>YATP displays the directory structure
<font color="#FF0000"><b>of </b></font>the drive <font color="#FF0000"><b>and</b></font><font color="#000080">/ </font><font color="#FF0000"><b>or </b></font>directory that you specify<font color="#000080">, </font><font color="#FF0000"><b>or if </b></font>none <font color="#FF0000"><b>is </b></font>specified<font color="#000080">,
</font>the drive <font color="#FF0000"><b>and </b></font>directory structure <font color="#FF0000"><b>of </b></font>the current directory <font color="#FF0000"><b>is </b></font>displayed<font color="#000080">.

</font>Usage<font color="#000080">:  </font>YATP <font color="#000080">[</font>drive<font color="#000080">:][\][</font>directory<font color="#000080">]

</font>Notes<font color="#000080">:  </font>All parameters are optional<font color="#000080">; </font>output may be piped <font color="#FF0000"><b>or </b></font>redirected<font color="#000080">.

</font>Examples<font color="#000080">:

        </font>YATP                   <font color="#000080">&lt;- </font>all directories below current
        YATP c<font color="#000080">:\               &lt;- </font>all directories <font color="#FF0000"><b>on </b></font>drive C<font color="#000080">:
        </font>YATP d<font color="#000080">:\</font>os2<font color="#000080">\           &lt;- </font>only directories below D<font color="#000080">:\</font>OS2
        YATP c<font color="#000080">:\ | </font>list <font color="#000080">/</font>s     <font color="#000080">&lt;- </font>pipe C<font color="#000080">: </font>tree <font color="#FF0000"><b>to </b></font>LIST


Enter <font color="#000080">&quot;</font>YATP <font color="#000080">?&quot; </font><font color="#FF0000"><b>to </b></font>display this short reminder <font color="#FF0000"><b>of </b></font>the syntax<font color="#000080">.


                  ** </font>READ REIGNWAR<font color="#000080">.</font>TXT <font color="#FF0000"><b>FOR </b></font>LEGAL TERMS <font color="#000080">**


</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to DIRS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0051.PAS">Original</a><b>]</b></p></body>
</html>
