<html>
<head><title> "DOS Directories" by DAVID VAN DRIESSCHE</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to DIRS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0053.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
 Below you'll find a program that lists all the directories on the C drive. It
 can be extended very easily but it just wanted to show the basics. (It was
 part of a program that did for dos what the DELTREE command does now. I used
 to work (good old days) with Dos 3.3 which doesn't have a DELTREE command)
 
 {-------------------------------------------------------------------------}
 { programmer : David van Driessche  (2:291/1933.13)                       }
 { language   : Borland Pascal v7.0                                        }
 { purpose    : explaining recursive directory listings                    }
 {-------------------------------------------------------------------------}

 {- This code is public domain, feel free to do with it any descent thing -}

 </i></font><font color="#FF0000"><b>program </b></font>GetDirInfo <font color="#000080">;

 </font><font color="#FF0000"><b>uses </b></font>Dos<font color="#000080">, </font>Crt <font color="#000080">;

 </font><font color="#FF0000"><b>var
  </b></font>DirCounter <font color="#000080">: </font>Integer <font color="#000080">;
  </font>Scherm     <font color="#000080">: </font>Text <font color="#000080">;

 </font><font color="#FF0000"><b>procedure </b></font>Show<font color="#000080">( </font>Direct <font color="#000080">: </font><font color="#FF0000"><b>String </b></font><font color="#000080">) ;
  </font><font color="#FF0000"><b>var
   </b></font><font color="#008000"><i>{
    Info must be a local parameter of Show. This way the information in the
    SearchRec is saved when a subdirectory is explored using recursion.
   }
   </i></font>Info <font color="#000080">: </font>SearchRec <font color="#000080">;
  </font><font color="#FF0000"><b>begin
   </b></font><font color="#008000"><i>{ We have to search the directory in Direct, build the search-path }
   </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">( </font>Direct<font color="#000080">[</font>Length<font color="#000080">(</font>Direct<font color="#000080">)] &lt;&gt; </font><font color="#800000">'\' </font><font color="#000080">) </font><font color="#FF0000"><b>THEN </b></font>Direct <font color="#000080">:= </font>Direct <font color="#000080">+ </font><font color="#800000">'\' </font><font color="#000080">;
   </font>FindFirst<font color="#000080">( </font>Direct<font color="#000080">+</font><font color="#800000">'*.*'</font><font color="#000080">, </font>AnyFile<font color="#000080">, </font>Info <font color="#000080">) ;
   </font><font color="#008000"><i>{ As long as we have 'things' in the Direct directory, look at them }
   </i></font><font color="#FF0000"><b>while </b></font><font color="#000080">( </font>DosError <font color="#000080">= </font><font color="#800000">0 </font><font color="#000080">) </font><font color="#FF0000"><b>do
    begin
     if </b></font><font color="#000080">( (</font>Info<font color="#000080">.</font>Name <font color="#000080">&lt;&gt; </font><font color="#800000">'.'</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>Info<font color="#000080">.</font>Name <font color="#000080">&lt;&gt; </font><font color="#800000">'..'</font><font color="#000080">) </font><font color="#FF0000"><b>and
          </b></font><font color="#000080">( (</font>Info<font color="#000080">.</font>Attr <font color="#FF0000"><b>and </b></font>Directory<font color="#000080">) = </font>Directory<font color="#000080">) )
      </font><font color="#FF0000"><b>then
       begin
        </b></font><font color="#008000"><i>{ We found one directory more }
        </i></font>Inc <font color="#000080">( </font>DirCounter <font color="#000080">) ;
        </font><font color="#008000"><i>{ Show what we found }
        </i></font>Writeln<font color="#000080">( </font>Direct<font color="#000080">+</font>Info<font color="#000080">.</font>Name <font color="#000080">) ;
        </font><font color="#008000"><i>{ We will now search that directory }
        </i></font>Show<font color="#000080">( </font>Direct<font color="#000080">+</font>Info<font color="#000080">.</font>Name <font color="#000080">) ;
       </font><font color="#FF0000"><b>end </b></font><font color="#000080">;
     </font><font color="#008000"><i>{ Are there any more things out there ? If so, look at them }
     </i></font>FindNext<font color="#000080">( </font>Info <font color="#000080">) ;
    </font><font color="#FF0000"><b>end </b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end </b></font><font color="#000080">;

 </font><font color="#FF0000"><b>begin
  </b></font>AssignCrt<font color="#000080">( </font>Scherm <font color="#000080">) ;
  </font>ReWrite<font color="#000080">( </font>Scherm <font color="#000080">) ;
  </font>DirCounter <font color="#000080">:= </font><font color="#800000">0 </font><font color="#000080">;
  </font>Show <font color="#000080">( </font><font color="#800000">'C:\' </font><font color="#000080">) ;
  </font>Writeln<font color="#000080">( </font>Scherm <font color="#000080">) ;
  </font>Writeln<font color="#000080">( </font>Scherm<font color="#000080">, </font><font color="#800000">'Number of directories = '</font><font color="#000080">, </font>DirCounter<font color="#000080">:</font><font color="#800000">0 </font><font color="#000080">) ;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to DIRS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0053.PAS">Original</a><b>]</b></p></body>
</html>
