<html>
<head><title> "Null terminated string functions" by MICHAEL DALES</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to STRINGS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0132.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>unit </b></font>StrPlus<font color="#000080">;

</font><font color="#008000"><i>{---------------------------------------------------------------------------}
{ Extra string manipulation - by Michael Dales                              }
{                                                                           }
{ Defines a standard null terminated string, called cString and several     }
{ manipulation functions. Nothing brilliant, but it all works. Using this   }
{ along with the strings unit gives you just about all atring functions you }
{ could ever need. Just like christmas eh? :-)                              }
{                                                                           }
{ Email comments to: 9402198d@udcf.gla.ac.uk                                }
{ URL: http://www.gla.ac.uk/Clubs/WebSoc/~9402198d/index.html               }
{---------------------------------------------------------------------------}

</i></font><font color="#FF0000"><b>interface

uses </b></font>Strings<font color="#000080">;

</font><font color="#FF0000"><b>const </b></font>StringSize <font color="#000080">= </font><font color="#800000">512</font><font color="#000080">;         </font><font color="#008000"><i>{Size of string type}

</i></font><font color="#FF0000"><b>type </b></font>cString <font color="#000080">= </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font>StringSize<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Char<font color="#000080">; </font><font color="#008000"><i>{New string type}

{BlankString - Empties a string}
</i></font><font color="#FF0000"><b>procedure </b></font>BlankString<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>S<font color="#000080">:</font>cString<font color="#000080">);

</font><font color="#008000"><i>{IsLetter - Returns true if C is alphabetic}
</i></font><font color="#FF0000"><b>function </b></font>IsLetter<font color="#000080">(</font>C<font color="#000080">:</font>Char<font color="#000080">):</font>Boolean<font color="#000080">;

</font><font color="#008000"><i>{StripTo - Strip all characters in S up to C}
</i></font><font color="#FF0000"><b>procedure </b></font>StripTo<font color="#000080">(</font>C<font color="#000080">:</font>Char<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>S<font color="#000080">:</font>cString<font color="#000080">);

</font><font color="#008000"><i>{StripFrom - Strip all characters in S from C}
</i></font><font color="#FF0000"><b>procedure </b></font>StripFrom<font color="#000080">(</font>C<font color="#000080">:</font>Char<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>S<font color="#000080">:</font>cString<font color="#000080">);

</font><font color="#008000"><i>{RemoveFirstChar - Remove the first character from S}
</i></font><font color="#FF0000"><b>procedure </b></font>RemoveFirstChar<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>S<font color="#000080">:</font>cString<font color="#000080">);

</font><font color="#008000"><i>{RemoveLeadingSpaces - Removes any spaces at the start of S}
</i></font><font color="#FF0000"><b>procedure </b></font>RemoveLeadingSpaces<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>S<font color="#000080">:</font>cString<font color="#000080">);

</font><font color="#008000"><i>{GetFirstWord - Gets first all letter word from S}
</i></font><font color="#FF0000"><b>procedure </b></font>GetFirstWord<font color="#000080">(</font>S<font color="#000080">:</font>cString<font color="#000080">;</font><font color="#FF0000"><b>var Out</b></font><font color="#000080">:</font>cString<font color="#000080">);

</font><font color="#008000"><i>{GetFirstBlock - Gets the first block of text (letters &amp; symbols) from S}
</i></font><font color="#FF0000"><b>procedure </b></font>GetFirstBlock<font color="#000080">(</font>S<font color="#000080">:</font>cString<font color="#000080">;</font><font color="#FF0000"><b>var Out</b></font><font color="#000080">:</font>cString<font color="#000080">);

</font><font color="#008000"><i>{RemoveFirstWord - Removes first word from S}
</i></font><font color="#FF0000"><b>procedure </b></font>RemoveFirstWord<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>S<font color="#000080">:</font>cString<font color="#000080">);

</font><font color="#008000"><i>{RemoveFirstWord - Removes first block of text from S}
</i></font><font color="#FF0000"><b>procedure </b></font>RemoveFirstBlock<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>S<font color="#000080">:</font>cString<font color="#000080">);

</font><font color="#008000"><i>{AddChar - Adds character C to the end of S}
</i></font><font color="#FF0000"><b>procedure </b></font>AddChar<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>S<font color="#000080">:</font>cString<font color="#000080">; </font>C<font color="#000080">:</font>Char<font color="#000080">);

</font><font color="#008000"><i>{---------------------------------------------------------------------------}
</i></font><font color="#FF0000"><b>implementation
</b></font><font color="#008000"><i>{---------------------------------------------------------------------------}

   {IsLetter - Returns true if C is alphabetic}

</i></font><font color="#FF0000"><b>function </b></font>IsLetter<font color="#000080">(</font>C<font color="#000080">:</font>Char<font color="#000080">):</font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>begin
     </b></font>IsLetter<font color="#000080">:=(</font>UpCase<font color="#000080">(</font>C<font color="#000080">)&gt;=</font><font color="#800000">'A'</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>UpCase<font color="#000080">(</font>C<font color="#000080">)&lt;=</font><font color="#800000">'Z'</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


    </font><font color="#008000"><i>{BlankString - Empties a string}

</i></font><font color="#FF0000"><b>procedure </b></font>BlankString<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>S<font color="#000080">:</font>cString<font color="#000080">);
</font><font color="#FF0000"><b>begin
     </b></font>FillChar<font color="#000080">(</font>S<font color="#000080">,</font>SizeOf<font color="#000080">(</font>S<font color="#000080">),</font><font color="#800000">#0</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

    </font><font color="#008000"><i>{StripFrom - Strip all characters in S from C}

</i></font><font color="#FF0000"><b>procedure </b></font>StripFrom<font color="#000080">(</font>C<font color="#000080">:</font>Char<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>S<font color="#000080">:</font>cString<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>temp   <font color="#000080">: </font>cString<font color="#000080">;
    </font>reslen <font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
     if </b></font><font color="#000080">(</font>StrLen<font color="#000080">(</font>S<font color="#000080">)&gt;</font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>StrRScan<font color="#000080">(</font>S<font color="#000080">,</font>C<font color="#000080">)&lt;&gt;</font><font color="#FF0000"><b>nil</b></font><font color="#000080">) </font><font color="#FF0000"><b>then
     begin
          </b></font>StrCopy<font color="#000080">(</font>temp<font color="#000080">,</font>StrRScan<font color="#000080">(</font>S<font color="#000080">,</font>C<font color="#000080">));
          </font>reslen<font color="#000080">:=</font>StrLen<font color="#000080">(</font>S<font color="#000080">)-</font>StrLen<font color="#000080">(</font>temp<font color="#000080">);
          </font>StrLCopy<font color="#000080">(</font>temp<font color="#000080">,</font>S<font color="#000080">,</font>reslen<font color="#000080">);
          </font>StrCopy<font color="#000080">(</font>S<font color="#000080">,</font>temp<font color="#000080">);
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

    </font><font color="#008000"><i>{StripTo - Strip all characters in S up to C}

</i></font><font color="#FF0000"><b>procedure </b></font>StripTo<font color="#000080">(</font>C<font color="#000080">:</font>Char<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>S<font color="#000080">:</font>cString<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>pos  <font color="#000080">: </font>word<font color="#000080">;
    </font>temp <font color="#000080">: </font>cString<font color="#000080">;
</font><font color="#FF0000"><b>begin
     if </b></font><font color="#000080">(</font>StrScan<font color="#000080">(</font>S<font color="#000080">,</font>C<font color="#000080">)&lt;&gt;</font><font color="#FF0000"><b>nil</b></font><font color="#000080">) </font><font color="#FF0000"><b>then        </b></font><font color="#008000"><i>{If we find C in S then}
     </i></font><font color="#FF0000"><b>begin
          </b></font>StrCopy<font color="#000080">(</font>temp<font color="#000080">,</font>StrScan<font color="#000080">(</font>S<font color="#000080">,</font>C<font color="#000080">));   </font><font color="#008000"><i>{Get rest of string}
          </i></font>StrCopy<font color="#000080">(</font>S<font color="#000080">,</font>temp<font color="#000080">);              </font><font color="#008000"><i>{Put it in S}
     </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

    </font><font color="#008000"><i>{RemoveFirstChar - Remove the first character from S}

</i></font><font color="#FF0000"><b>procedure </b></font>RemoveFirstChar<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>S<font color="#000080">:</font>cString<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>temp <font color="#000080">: </font>cString<font color="#000080">;
</font><font color="#FF0000"><b>begin
     if </b></font>StrLen<font color="#000080">(</font>S<font color="#000080">)&gt;</font><font color="#800000">1 </font><font color="#FF0000"><b>then                </b></font><font color="#008000"><i>{If data in string then}
     </i></font><font color="#FF0000"><b>begin
          </b></font>StrCopy<font color="#000080">(</font>temp<font color="#000080">,</font>S<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">);            </font><font color="#008000"><i>{Get string from second character}
          </i></font>StrCopy<font color="#000080">(</font>S<font color="#000080">,</font>temp<font color="#000080">);              </font><font color="#008000"><i>{Put string in S}
     </i></font><font color="#FF0000"><b>end else
         if </b></font>StrLen<font color="#000080">(</font>S<font color="#000080">)=</font><font color="#800000">1 </font><font color="#FF0000"><b>then
         begin
              </b></font>S<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]:=</font><font color="#800000">#0</font><font color="#000080">;
         </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

    </font><font color="#008000"><i>{RemoveLeadingSpaces - Removes any spaces at the start of S}

</i></font><font color="#FF0000"><b>procedure </b></font>RemoveLeadingSpaces<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>S<font color="#000080">:</font>cString<font color="#000080">);
</font><font color="#FF0000"><b>begin
     while </b></font>S<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]=</font><font color="#800000">' ' </font><font color="#FF0000"><b>do </b></font>RemoveFirstChar<font color="#000080">(</font>S<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

    </font><font color="#008000"><i>{GetFirstWord - Gets first all letter word from S}

</i></font><font color="#FF0000"><b>procedure </b></font>GetFirstWord<font color="#000080">(</font>S<font color="#000080">:</font>cString<font color="#000080">;</font><font color="#FF0000"><b>var out</b></font><font color="#000080">:</font>cString<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>n    <font color="#000080">: </font>integer<font color="#000080">;
    </font>temp <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>char<font color="#000080">;
</font><font color="#FF0000"><b>begin
     </b></font>RemoveLeadingSpaces<font color="#000080">(</font>S<font color="#000080">);            </font><font color="#008000"><i>{Find start of word}
     </i></font>n<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
     </font>FillChar<font color="#000080">(</font>temp<font color="#000080">,</font>SizeOf<font color="#000080">(</font>temp<font color="#000080">),</font><font color="#800000">#0</font><font color="#000080">);    
     </font><font color="#FF0000"><b>while </b></font>IsLetter<font color="#000080">(</font>S<font color="#000080">[</font>n<font color="#000080">]) </font><font color="#FF0000"><b>do            </b></font><font color="#008000"><i>{While still letters do}
     </i></font><font color="#FF0000"><b>begin
          </b></font>temp<font color="#000080">[</font>n<font color="#000080">]:=</font>S<font color="#000080">[</font>n<font color="#000080">];                </font><font color="#008000"><i>{Copy character}
          </i></font>inc<font color="#000080">(</font>n<font color="#000080">);
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
     </font>StrCopy<font color="#000080">(</font><font color="#FF0000"><b>out</b></font><font color="#000080">,</font>temp<font color="#000080">);                 </font><font color="#008000"><i>{Out set to word}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

    </font><font color="#008000"><i>{GetFirstBlock - Gets the first block of text (letters &amp; symbols) from S}

</i></font><font color="#FF0000"><b>procedure </b></font>GetFirstBlock<font color="#000080">(</font>S<font color="#000080">:</font>cString<font color="#000080">;</font><font color="#FF0000"><b>var out</b></font><font color="#000080">:</font>cString<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>n<font color="#000080">,</font>a     <font color="#000080">: </font>integer<font color="#000080">;
    </font>temp    <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>char<font color="#000080">;
    </font>isspace <font color="#000080">: </font>boolean<font color="#000080">;
</font><font color="#FF0000"><b>begin
     </b></font>IsSpace<font color="#000080">:=</font>false<font color="#000080">;
     </font>RemoveLeadingSpaces<font color="#000080">(</font>S<font color="#000080">);
     </font><font color="#FF0000"><b>if </b></font>s<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]&lt;&gt;</font><font color="#800000">#0 </font><font color="#FF0000"><b>then
     begin
          </b></font>n<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
          </font><font color="#FF0000"><b>repeat
                </b></font>IsSpace<font color="#000080">:=</font>s<font color="#000080">[</font>n<font color="#000080">]=</font><font color="#800000">' '</font><font color="#000080">;
                </font>inc<font color="#000080">(</font>n<font color="#000080">);
          </font><font color="#FF0000"><b>until </b></font>IsSpace <font color="#FF0000"><b>or </b></font><font color="#000080">(</font>n<font color="#000080">=</font>StrLen<font color="#000080">(</font>s<font color="#000080">));
          </font>FillChar<font color="#000080">(</font>temp<font color="#000080">,</font>SizeOf<font color="#000080">(</font>temp<font color="#000080">),</font><font color="#800000">#0</font><font color="#000080">);
          </font><font color="#FF0000"><b>if </b></font>IsSpace <font color="#FF0000"><b>then </b></font>n<font color="#000080">:=</font>Pred<font color="#000080">(</font>n<font color="#000080">);
          </font><font color="#FF0000"><b>for </b></font>a<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>Pred<font color="#000080">(</font>n<font color="#000080">) </font><font color="#FF0000"><b>do </b></font>temp<font color="#000080">[</font>a<font color="#000080">]:=</font>s<font color="#000080">[</font>a<font color="#000080">];
          </font>StrCopy<font color="#000080">(</font><font color="#FF0000"><b>out</b></font><font color="#000080">,</font>temp<font color="#000080">);
     </font><font color="#FF0000"><b>end else
         </b></font>BlankString<font color="#000080">(</font><font color="#FF0000"><b>out</b></font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


    </font><font color="#008000"><i>{RemoveFirstWord - Removes first word from S}

</i></font><font color="#FF0000"><b>procedure </b></font>RemoveFirstWord<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>S<font color="#000080">:</font>cString<font color="#000080">);
</font><font color="#FF0000"><b>begin
     </b></font>RemoveLeadingSpaces<font color="#000080">(</font>S<font color="#000080">);            </font><font color="#008000"><i>{Get to word}
     </i></font><font color="#FF0000"><b>while </b></font>IsLetter<font color="#000080">(</font>S<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]) </font><font color="#FF0000"><b>do </b></font>RemoveFirstChar<font color="#000080">(</font>S<font color="#000080">);
     </font>RemoveLeadingSpaces<font color="#000080">(</font>S<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

    </font><font color="#008000"><i>{RemoveFirstWord - Removes first block of text from S}

</i></font><font color="#FF0000"><b>procedure </b></font>RemoveFirstBlock<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>S<font color="#000080">:</font>cString<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>temp <font color="#000080">: </font>boolean<font color="#000080">;
    </font>n    <font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
     </b></font>RemoveLeadingSpaces<font color="#000080">(</font>S<font color="#000080">);
     </font>temp<font color="#000080">:=</font>false<font color="#000080">;
     </font>n<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
     </font><font color="#FF0000"><b>repeat
           </b></font>temp<font color="#000080">:=(</font>s<font color="#000080">[</font>n<font color="#000080">]=</font><font color="#800000">' '</font><font color="#000080">);
           </font>inc<font color="#000080">(</font>n<font color="#000080">);
     </font><font color="#FF0000"><b>until </b></font>temp <font color="#FF0000"><b>or </b></font><font color="#000080">(</font>pred<font color="#000080">(</font>n<font color="#000080">)=</font>StrLen<font color="#000080">(</font>S<font color="#000080">));
     </font><font color="#FF0000"><b>if </b></font>temp <font color="#FF0000"><b>then
        </b></font>StripTo<font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">,</font>S<font color="#000080">)
     </font><font color="#FF0000"><b>else
         </b></font>StrCopy<font color="#000080">(</font>S<font color="#000080">,</font><font color="#800000">#0</font><font color="#000080">);
     </font>RemoveLeadingSpaces<font color="#000080">(</font>S<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

    </font><font color="#008000"><i>{AddChar - Adds character C to the end of S}

</i></font><font color="#FF0000"><b>procedure </b></font>AddChar<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>S<font color="#000080">:</font>cString<font color="#000080">; </font>C<font color="#000080">:</font>Char<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>temp <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">1</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>char<font color="#000080">;
</font><font color="#FF0000"><b>begin
     </b></font>temp<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]:=</font>c<font color="#000080">;
     </font>temp<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]:=</font><font color="#800000">#0</font><font color="#000080">;
     </font>StrCat<font color="#000080">(</font>S<font color="#000080">,</font>temp<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>end</b></font><font color="#000080">.</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to STRINGS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0132.PAS">Original</a><b>]</b></p></body>
</html>
