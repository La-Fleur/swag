<html>
<head><title> "ST-CASE6.PAS" by NORBERT IGL</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to STRINGS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0012.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
NORBERT IGL

&gt; Note that your uppercase characters do not include the german Umlauts
&gt; and overlap sometimes with other foreign characters. There is a DOS
&gt; function call to convert a string to all upcercase letters. Norbert
&gt; Igl and I wrote a ASM end implementation, maybe he could repost his all-
&gt; Pascal version that conforms to the DOS country information.

}

</i></font><font color="#FF0000"><b>Unit </b></font>Upper<font color="#000080">;
</font><font color="#008000"><i>{ Country-independent upcase-procedures          (c) 1992  N.Igl

  Uses the COUNRY=??? from your CONFIG.SYS to get the correct uppercase.
  SpeedUp with a table-driven version to avoid multiple DOS-Calls.

  Released to the public domain ( FIDO: PASCAL int'l ) in 12/92 }


</i></font><font color="#FF0000"><b>Interface

function </b></font>UpCase<font color="#000080">(</font>ch <font color="#000080">: </font>char<font color="#000080">) : </font>Char<font color="#000080">;
</font><font color="#FF0000"><b>function </b></font>UpCaseStr<font color="#000080">(</font>S <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">) : </font><font color="#FF0000"><b>String</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Implementation uses </b></font>Dos<font color="#000080">;

</font><font color="#FF0000"><b>Const
  </b></font>isTableOk <font color="#000080">: </font>Boolean <font color="#000080">= </font>FALSE<font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>theTable  <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Char<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>SetUpTable<font color="#000080">;                          </font><font color="#008000"><i>{ called only at Unit-init }
</i></font><font color="#FF0000"><b>var
  </b></font>Regs<font color="#000080">: </font>Registers<font color="#000080">;
  </font>x   <font color="#000080">: </font>byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>FillChar<font color="#000080">(</font>theTable<font color="#000080">, </font>Sizeof<font color="#000080">( </font>theTable <font color="#000080">), </font><font color="#800000">#0</font><font color="#000080">);  </font><font color="#008000"><i>{ Fill with NULL }
  </i></font><font color="#FF0000"><b>For </b></font>x <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do
    </b></font>theTable<font color="#000080">[</font>x<font color="#000080">] := </font>CHAR<font color="#000080">(</font>x<font color="#000080">);                    </font><font color="#008000"><i>{ predefined values }
  </i></font><font color="#FF0000"><b>if </b></font>Lo<font color="#000080">(</font>DosVersion<font color="#000080">) &lt; </font><font color="#800000">4 </font><font color="#FF0000"><b>then                   </b></font><font color="#008000"><i>{ n/a in this DOS... }
  </i></font><font color="#FF0000"><b>begin                                        </b></font><font color="#008000"><i>{ use Turbo's Upcase }
    </i></font><font color="#FF0000"><b>for </b></font>x <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">255 </font><font color="#FF0000"><b>do
      </b></font>theTable<font color="#000080">[</font>x<font color="#000080">] := </font>System<font color="#000080">.</font>Upcase<font color="#000080">(</font>CHAR<font color="#000080">(</font>x<font color="#000080">));
    </font>exit<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>Regs<font color="#000080">.</font>AX <font color="#000080">:= </font><font color="#800000">$6521</font><font color="#000080">;                            </font><font color="#008000"><i>{ &quot;Capitalize String&quot; }
  </i></font>Regs<font color="#000080">.</font>CX <font color="#000080">:= </font><font color="#800000">255</font><font color="#000080">;                              </font><font color="#008000"><i>{ &quot;string&quot;-length }
  </i></font>Regs<font color="#000080">.</font>DS <font color="#000080">:= </font>Seg<font color="#000080">(</font>theTable<font color="#000080">);                    </font><font color="#008000"><i>{ DS:DX... }
  </i></font>Regs<font color="#000080">.</font>DX <font color="#000080">:= </font>Ofs<font color="#000080">(</font>theTable<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]);                 </font><font color="#008000"><i>{  ...points to the &quot;string&quot;}
  </i></font>Intr<font color="#000080">(</font><font color="#800000">$21</font><font color="#000080">,</font>Regs<font color="#000080">);                              </font><font color="#008000"><i>{ let DOS do it ! }
  </i></font>isTableOK <font color="#000080">:= (</font>Regs<font color="#000080">.</font>Flags <font color="#FF0000"><b>and </b></font>FCarry <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">);    </font><font color="#008000"><i>{ OK ? }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>UpCase<font color="#000080">(</font>ch <font color="#000080">: </font>char<font color="#000080">) : </font>char<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>UpCase <font color="#000080">:= </font>theTable<font color="#000080">[</font>BYTE<font color="#000080">(</font>ch<font color="#000080">)]
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>UpCaseStr<font color="#000080">(</font>S <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">) : </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>x<font color="#000080">: </font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
  for </b></font>x <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>length<font color="#000080">(</font>S<font color="#000080">) </font><font color="#FF0000"><b>do
    </b></font>S<font color="#000080">[</font>x<font color="#000080">]:= </font>theTable<font color="#000080">[</font>BYTE<font color="#000080">(</font>S<font color="#000080">[</font>x<font color="#000080">])];
  </font>UpCaseStr <font color="#000080">:= </font>S
<font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>SetUpTable
<font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to STRINGS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0012.PAS">Original</a><b>]</b></p></body>
</html>
