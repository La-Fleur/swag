<html>
<head><title> "Byte string w/lead zero" by EDDY THILLEMAN</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to STRINGS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0092.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
For this sort program, I needed a routine to convert a byte value into a
string with leading zeros. So I made one in BASM: Byte2lzStr. If you want,
include this routine in SWAG.
}

</i></font><font color="#FF0000"><b>var </b></font>s<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
    </font>tel<font color="#000080">, </font>n <font color="#000080">: </font>byte<font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>Byte2lzStr<font color="#000080">( </font>n<font color="#000080">, </font>width<font color="#000080">: </font>byte<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>str<font color="#000080">: </font><font color="#FF0000"><b>string </b></font><font color="#000080">); </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
  </font><font color="#008000"><i>{ Byte to string with leading zeros }
</i></font><font color="#FF0000"><b>asm
        </b></font><font color="#FF00FF">std                 </font><font color="#008000"><i>{ string operations backwards }
        </i></font><font color="#FF00FF">mov   al, [n]       </font><font color="#008000"><i>{ numeric value to convert    }
        </i></font><font color="#FF00FF">mov   cl, [width]   </font><font color="#008000"><i>{ width of str                }
        </i></font><font color="#FF00FF">xor   ch, ch        </font><font color="#008000"><i>{ clear ch                    }
        </i></font><font color="#FF00FF">les   di, str       </font><font color="#008000"><i>{ adress of str               }
        </i></font><font color="#FF00FF">mov   [di], cl      </font><font color="#008000"><i>{ length of str               }
        </i></font><font color="#FF00FF">add   di, cx        </font><font color="#008000"><i>{ start with last char str    }
</i></font><font color="#FF00FF">@start: jcxz  @exit         </font><font color="#008000"><i>{ done?                       }
        </i></font><font color="#FF00FF">aam                 </font><font color="#008000"><i>{ divide al by 10             }
        </i></font><font color="#FF00FF">add   al, 30h       </font><font color="#008000"><i>{ convert remainder to char   }
        </i></font><font color="#FF00FF">stosb               </font><font color="#008000"><i>{ store digit                 }
        </i></font><font color="#FF00FF">xchg  al, ah        </font><font color="#008000"><i>{ swap remainder and quotient }
        </i></font><font color="#FF00FF">dec   cl            </font><font color="#008000"><i>{ count down                  }
        </i></font><font color="#FF00FF">jmp   @start        </font><font color="#008000"><i>{ next digit                  }
</i></font><font color="#FF00FF">@exit:
</font><font color="#FF0000"><b>end  </b></font><font color="#008000"><i>{ Byte2lzStr }</i></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>randomize<font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>tel <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">24 </font><font color="#FF0000"><b>do
  begin
    </b></font>n <font color="#000080">:= </font>random<font color="#000080">( </font><font color="#800000">256 </font><font color="#000080">);
    </font>Byte2lzStr<font color="#000080">( </font>n<font color="#000080">, </font><font color="#800000">5</font><font color="#000080">, </font>s <font color="#000080">);
    </font>writeln<font color="#000080">( </font>tel<font color="#000080">:</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">':  '</font><font color="#000080">, </font>n<font color="#000080">:</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">'  '</font><font color="#000080">, </font>s<font color="#000080">,</font><font color="#800000">'  ['</font><font color="#000080">,</font>length<font color="#000080">(</font>s<font color="#000080">),</font><font color="#800000">']' </font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to STRINGS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0092.PAS">Original</a><b>]</b></p></body>
</html>
