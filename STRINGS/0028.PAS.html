<html>
<head><title> "Adding Strings together" by KELD HANSEN</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to STRINGS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0028.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{ KELD R. HANSEN }

</i></font><font color="#FF0000"><b>PROCEDURE </b></font>AddStr<font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>STR <font color="#000080">: </font>OpenString <font color="#000080">; </font><font color="#FF0000"><b>CONST </b></font>ADD <font color="#000080">: </font><font color="#FF0000"><b>STRING</b></font><font color="#000080">); </font><font color="#FF0000"><b>ASSEMBLER</b></font><font color="#000080">;
</font><font color="#FF0000"><b>ASM
  </b></font><font color="#FF00FF">PUSH    DS
  LDS     SI,ADD
  LES     DI,STR
  CLD
  XOR     BH,BH
  MOV     BL,ES:[DI]
  LODSB
  MOV     AH,BYTE PTR STR-2
  ADD     AL,BL
  JC      @OVF
  CMP     AL,AH
  JBE     @OK
 @OVF:
  MOV     AL,AH
 @OK:
  STOSB
  XOR     CH,CH
  MOV     CL,AL
  SUB     CL,BL
  ADD     DI,BX
  REP     MOVSB
  POP     DS
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>AddChar<font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>STR <font color="#000080">: </font>OpenString <font color="#000080">; </font>C <font color="#000080">: </font>CHAR<font color="#000080">); </font><font color="#FF0000"><b>ASSEMBLER</b></font><font color="#000080">;
</font><font color="#FF0000"><b>ASM
  </b></font><font color="#FF00FF">LES     DI,STR
  XOR     AH,AH
  MOV     AL,ES:[DI]
  CMP     AX,WORD PTR STR-2
  JAE     @OUT
  INC     AL
  JZ      @OUT
  MOV     ES:[DI],AL
  ADD     DI,AX
  MOV     AL,C
  STOSB
 @OUT:
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to STRINGS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0028.PAS">Original</a><b>]</b></p></body>
</html>
