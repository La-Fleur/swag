<html>
<head><title> "Very complete STRING unit" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to STRINGS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0105.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#FF0000"><b>Unit </b></font>ns<font color="#000080">;

</font><font color="#FF0000"><b>Interface

Function </b></font>PosAfter<font color="#000080">(</font>find<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">;</font><font color="#FF0000"><b>var </b></font>tline<font color="#000080">; </font>after<font color="#000080">:</font>integer<font color="#000080">):</font>integer <font color="#000080">;

 </font><font color="#008000"><i>{Finds position of find in string tline, starting after tline[after].
  Returns zero if not found, position where match starts otherwise
 }

</i></font><font color="#FF0000"><b>Function </b></font>PosC<font color="#000080">(</font>find<font color="#000080">:</font>char<font color="#000080">;</font><font color="#FF0000"><b>var </b></font>tst<font color="#000080">):</font>integer<font color="#000080">;

 </font><font color="#008000"><i>{Just like Pos, but searches only for a single character.  Slightly
  faster than Pos.  Probably not worth bothering with.
 }

</i></font><font color="#FF0000"><b>Function </b></font>PosCAfter<font color="#000080">(</font>FIND<font color="#000080">:</font>Char<font color="#000080">; </font><font color="#FF0000"><b>Var </b></font>TST<font color="#000080">; </font>N<font color="#000080">:</font>Integer<font color="#000080">):</font>Integer<font color="#000080">;

 </font><font color="#008000"><i>{Like PosAfter, but finds only a character.  Faster that PosAfter.
 }

</i></font><font color="#FF0000"><b>Procedure </b></font>StripL <font color="#000080">(</font><font color="#FF0000"><b>var </b></font>tst<font color="#000080">; </font>strp<font color="#000080">:</font>char<font color="#000080">);

  </font><font color="#008000"><i>{Deletes leading character strp from string tst.
   tst may be of any string type.
  }


</i></font><font color="#FF0000"><b>Function </b></font>StripCountL <font color="#000080">(</font><font color="#FF0000"><b>var </b></font>tst<font color="#000080">; </font>strp<font color="#000080">:</font>char<font color="#000080">):</font>integer<font color="#000080">;

  </font><font color="#008000"><i>{deletes leading character strp from string tst
   tst may be of any string type.
   returns the number of characters stripped
  }

</i></font><font color="#FF0000"><b>Procedure </b></font>StripR <font color="#000080">(</font><font color="#FF0000"><b>var </b></font>tst<font color="#000080">;</font>strp<font color="#000080">:</font>char<font color="#000080">);

   </font><font color="#008000"><i>{Strips trailing characters strp from string tst.
    tst may be any string type
   }


</i></font><font color="#FF0000"><b>Procedure </b></font>StripThrough <font color="#000080">(</font><font color="#FF0000"><b>var </b></font>tst<font color="#000080">;</font>strp<font color="#000080">:</font>char<font color="#000080">);

   </font><font color="#008000"><i>{For string tst and char strp,
    strips from the left up to and including
    the first instance of char strp
   }

</i></font><font color="#FF0000"><b>Procedure </b></font>SwapSubString <font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>tline<font color="#000080">; </font>find<font color="#000080">, </font>repl<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">;
                         </font><font color="#FF0000"><b>Var </b></font>enough<font color="#000080">:</font>boolean<font color="#000080">; </font>limit<font color="#000080">:</font>byte<font color="#000080">);

    </font><font color="#008000"><i>{tline is a string.  Find and replace are strings, but may be literals
     (e.g., 'abc','').  Replaces all instances of substring find with
     substring repl in tline.  Limit is the maximum permissible length of
     the string Tline after the replacements, but no more than 255.
     Enough returns FALSE if not all swaps are accomplished because limit
     length exceeded.  If limit is less than the actual length of tline
     and repl is longer than find, no replacements are done.  If limit is
     longer than length tline and repl is longer than find, replaces are
     done up to the point where the next replace would leave tline longer
     than limit.  If repl is not longer than find, limit has no effect. If
     repl contains find, the find within repl is not replaced.

     SwapSubString can do everything that FlipChar and StrpChar can do,
     but is slower.
    }

</i></font><font color="#FF0000"><b>Function </b></font>Stringup<font color="#000080">(</font>tline<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">):</font><font color="#FF0000"><b>string</b></font><font color="#000080">;

   </font><font color="#008000"><i>{Returns uppercase version of tline.
   }

</i></font><font color="#FF0000"><b>Procedure </b></font>StupCase <font color="#000080">(</font><font color="#FF0000"><b>var </b></font>tline<font color="#000080">);
   </font><font color="#008000"><i>{Uppercases string tline.  Based on routine in
    Turbo 2 Manual
   }

</i></font><font color="#FF0000"><b>Procedure </b></font>LowCase<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>tline<font color="#000080">);
  </font><font color="#008000"><i>{lowercases string tline
  }

</i></font><font color="#FF0000"><b>Procedure </b></font>FlipChar<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>tst<font color="#000080">; </font>srch<font color="#000080">, </font>repl<font color="#000080">: </font>char<font color="#000080">);

  </font><font color="#008000"><i>{replaces every instance of character srch in string tst by
   character repl
  Written by Mitchell Lazarus.
  }

</i></font><font color="#FF0000"><b>Function </b></font>FlipCount<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>tst<font color="#000080">;</font>srch<font color="#000080">,</font>repl<font color="#000080">:</font>char<font color="#000080">):</font>integer<font color="#000080">;

  </font><font color="#008000"><i>{Just like FlipChar, except it returns the number of
   times it did the replacement
  }

</i></font><font color="#FF0000"><b>Procedure </b></font>StripChar <font color="#000080">(</font><font color="#FF0000"><b>var </b></font>tst<font color="#000080">; </font>strp<font color="#000080">: </font>char<font color="#000080">);

  </font><font color="#008000"><i>{deletes all instances of character strp from
   string tst
   Written by Mitchell Lazarus
  }

</i></font><font color="#FF0000"><b>Function </b></font>Count<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>tst<font color="#000080">; </font>srch<font color="#000080">:</font>char<font color="#000080">):</font>integer<font color="#000080">;

    </font><font color="#008000"><i>{Returns count of instances of srch in string tst}

</i></font><font color="#FF0000"><b>Function </b></font>HowMany<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>str1<font color="#000080">,</font>str2<font color="#000080">):</font>integer<font color="#000080">;

    </font><font color="#008000"><i>{str1 and str2 are strings.  Function compares them character
      by character for up to min(length(str1),length(str2))
      characters.  Result is the number of consecutive characters
      (starting with string[1]) for which the two strings are
      equal. e.g., if str1 is cats and str2 is catchup, function
      result is 3.  If str1 is cat and str2 is dog, function
      result is 0.  If str1 is acat and str2 is cat, function
      result is 0.
    }

</i></font><font color="#FF0000"><b>Function </b></font>Equal_Structures <font color="#000080">(</font><font color="#FF0000"><b>var </b></font>a<font color="#000080">,</font>b<font color="#000080">;</font>size<font color="#000080">:</font>integer<font color="#000080">):</font>boolean<font color="#000080">;

     </font><font color="#008000"><i>{compares two structures of size bytes.  Returns
       true of they are equal, false if they are not.
       A and B may be strings.  You can then use the
       function to compare portions of strings of
       unequal length for equality.  For example,
       if equal_structures (a[1],b[1], 5) tests whether
       the first five characters of strings a and b are
       equal.
      }

</i></font><font color="#FF0000"><b>Function </b></font>space <font color="#000080">(</font>N<font color="#000080">:</font>integer<font color="#000080">; </font>C<font color="#000080">:</font>char<font color="#000080">):</font><font color="#FF0000"><b>string</b></font><font color="#000080">;

     </font><font color="#008000"><i>{Returns string of length N, consisting of
      N instances of C
     }

</i></font><font color="#FF0000"><b>Procedure </b></font>Blanker<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>tline<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">);

   </font><font color="#008000"><i>{if tline consists entirely of blanks, sets
    length(tline) to zero.  Otherwise, does not
    alter tline
   }

</i></font><font color="#FF0000"><b>Function </b></font>Break <font color="#000080">(</font>search<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">; </font><font color="#FF0000"><b>var </b></font>tline<font color="#000080">): </font>byte<font color="#000080">;

 </font><font color="#008000"><i>{returns position of first occurence in string tline of
  a character in search.  If none is found in tline, returns 0
 }

</i></font><font color="#FF0000"><b>Function </b></font>Break2 <font color="#000080">(</font>search<font color="#000080">,</font>tline<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">):</font>byte<font color="#000080">;

  </font><font color="#008000"><i>{does exactly what Break does, but by a different method.
   Which is faster probably depends on relative lengths of
   search and tline.
  }

</i></font><font color="#FF0000"><b>Function </b></font>Span<font color="#000080">(</font>search<font color="#000080">,</font>tline<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">):</font>byte<font color="#000080">;

  </font><font color="#008000"><i>{returns length of initial segment of tline that consists
   entirely of characters found in search.  Assuming there are
   some characters in tline not in search, the first one
   is at tline[span(search,tline) +1]
  }

</i></font><font color="#FF0000"><b>Function </b></font>LastPosC <font color="#000080">(</font>find<font color="#000080">: </font>char<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>tst<font color="#000080">): </font>integer<font color="#000080">;

  </font><font color="#008000"><i>{returns position in string tst of last instance of find
  }

</i></font><font color="#FF0000"><b>Function </b></font>WildPosAfter<font color="#000080">(</font>find<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">; </font><font color="#FF0000"><b>var </b></font>tline <font color="#000080">; </font>after<font color="#000080">:</font>integer<font color="#000080">):</font>integer<font color="#000080">;

   </font><font color="#008000"><i>{Like PosAfter, but with a wildcard.  ASCII 255 in find matches
    any character in tline.  Thus 'c'#255't' matches cat, cot,
    cut.
   }

(*---------------------------------------------------------------------*)
</i></font><font color="#FF0000"><b>Implementation


Function </b></font>PosAfter<font color="#008000"><i>{(find:string;var tline; after:integer):integer}</i></font><font color="#000080">;

</font><font color="#FF0000"><b>Begin
Inline</b></font><font color="#000080">(                  </font><font color="#008000"><i>{Assembly by Inline 02/23/88 21:28}
                         {;tline is a string of any type.  Find is string of}
                         {;type string, but may be literal (e.g., 'abc','').}
                         {;finds first instance of find after tline[after]}
                         {;Returns zero if not found, otherwise the position find starts in}
  </i></font><font color="#800000">$8D</font><font color="#000080">/</font><font color="#800000">$B6</font><font color="#000080">/&gt;</font>FIND<font color="#000080">/         </font><font color="#008000"><i>{          lea       si, &gt;find[bp]       ;addressing of find string}
  </i></font><font color="#800000">$36</font><font color="#000080">/</font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$14</font><font color="#000080">/           </font><font color="#008000"><i>{      ss: mov       dl, [si]            ;store length of find}
  </i></font><font color="#800000">$46</font><font color="#000080">/                   </font><font color="#008000"><i>{          inc       si}
  </i></font><font color="#800000">$36</font><font color="#000080">/</font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$04</font><font color="#000080">/           </font><font color="#008000"><i>{      ss: mov       al, [si ]           ;store first find character in al}
  </i></font><font color="#800000">$C7</font><font color="#000080">/</font><font color="#800000">$46</font><font color="#000080">/</font><font color="#800000">$FE</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/   </font><font color="#008000"><i>{          mov       wo [bp-2], 0        ;result of no match}
  </i></font><font color="#800000">$C4</font><font color="#000080">/</font><font color="#800000">$BE</font><font color="#000080">/&gt;</font>TLINE<font color="#000080">/        </font><font color="#008000"><i>{          les       di, &gt;tline[BP]      ;address of string to modify}
  </i></font><font color="#800000">$31</font><font color="#000080">/</font><font color="#800000">$C9</font><font color="#000080">/               </font><font color="#008000"><i>{          xor       cx,cx               ;zero out cx}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$0D</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       cl,[di]             ;length tline to cl}
  </i></font><font color="#800000">$E3</font><font color="#000080">/</font><font color="#800000">$29</font><font color="#000080">/               </font><font color="#008000"><i>{          jcxz      quit                ;exit if tline null}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$CB</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       bx,cx               ;save length}
  </i></font><font color="#800000">$2B</font><font color="#000080">/</font><font color="#800000">$8E</font><font color="#000080">/&gt;</font>AFTER<font color="#000080">/        </font><font color="#008000"><i>{          sub       cx, &gt;after[bp]}
  </i></font><font color="#800000">$7E</font><font color="#000080">/</font><font color="#800000">$21</font><font color="#000080">/               </font><font color="#008000"><i>{          jle       quit}
  </i></font><font color="#800000">$03</font><font color="#000080">/</font><font color="#800000">$BE</font><font color="#000080">/&gt;</font>AFTER<font color="#000080">/        </font><font color="#008000"><i>{          add       di, &gt;after[bp]      ;move to char to begin after}
  </i></font><font color="#800000">$47</font><font color="#000080">/                   </font><font color="#008000"><i>{j2:       inc       di                  ;to after it}
  </i></font><font color="#800000">$38</font><font color="#000080">/</font><font color="#800000">$D1</font><font color="#000080">/               </font><font color="#008000"><i>{scan:     cmp       cl, dl              ;is remaining string&gt;find?}
  </i></font><font color="#800000">$72</font><font color="#000080">/</font><font color="#800000">$18</font><font color="#000080">/               </font><font color="#008000"><i>{          jb        quit                ;exit if not enough left for a match}
  </i></font><font color="#800000">$FC</font><font color="#000080">/                   </font><font color="#008000"><i>{          cld                           ;move forwards}
  </i></font><font color="#800000">$F2</font><font color="#000080">/</font><font color="#800000">$AE</font><font color="#000080">/               </font><font color="#008000"><i>{repne     scasb                         ;search for first char}
  </i></font><font color="#800000">$75</font><font color="#000080">/</font><font color="#800000">$13</font><font color="#000080">/               </font><font color="#008000"><i>{          jne       quit                ;exit if not found}
  </i></font><font color="#800000">$51</font><font color="#000080">/                   </font><font color="#008000"><i>{          push      cx                  ;save no. of bytes left after match}
  </i></font><font color="#800000">$4F</font><font color="#000080">/                   </font><font color="#008000"><i>{          dec       di                  ;to match position}
  </i></font><font color="#800000">$57</font><font color="#000080">/                   </font><font color="#008000"><i>{          push      di                  ;save position after match}
  </i></font><font color="#800000">$88</font><font color="#000080">/</font><font color="#800000">$D1</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       cl, dl              ;get length of find string}
  </i></font><font color="#800000">$36</font><font color="#000080">/</font><font color="#800000">$F3</font><font color="#000080">/</font><font color="#800000">$A6</font><font color="#000080">/           </font><font color="#008000"><i>{ss:repe      cmpsb                         ;match on find string?}
  </i></font><font color="#800000">$5F</font><font color="#000080">/                   </font><font color="#008000"><i>{          pop       di                  ;start of match test}
  </i></font><font color="#800000">$59</font><font color="#000080">/                   </font><font color="#008000"><i>{          pop       cx                  ;bytes then remaining}
  </i></font><font color="#800000">$75</font><font color="#000080">/</font><font color="#800000">$EA</font><font color="#000080">/               </font><font color="#008000"><i>{          jne       j2                  ;cycle if no match}
                         {;gets here if you found a match.}
  </i></font><font color="#800000">$F7</font><font color="#000080">/</font><font color="#800000">$D9</font><font color="#000080">/               </font><font color="#008000"><i>{          neg       cx                 ;negative start}
  </i></font><font color="#800000">$01</font><font color="#000080">/</font><font color="#800000">$D9</font><font color="#000080">/               </font><font color="#008000"><i>{          add       cx,bx              ;add new and old length}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$4E</font><font color="#000080">/</font><font color="#800000">$FE            </font><font color="#008000"><i>{          mov       wo [bp-2],cx         ;}
 </i></font><font color="#000080">);                      </font><font color="#008000"><i>{quit:}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Function </b></font>PosC<font color="#008000"><i>{(find:char;var tst):integer}</i></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
Inline</b></font><font color="#000080">(                  </font><font color="#008000"><i>{Assembly by Inline 02/23/88 21:28}
  </i></font><font color="#800000">$C4</font><font color="#000080">/</font><font color="#800000">$BE</font><font color="#000080">/&gt;</font>TST<font color="#000080">/          </font><font color="#008000"><i>{          les       di,&gt;tst[bp]    ;get string length}
  </i></font><font color="#800000">$C7</font><font color="#000080">/</font><font color="#800000">$46</font><font color="#000080">/</font><font color="#800000">$FE</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/   </font><font color="#008000"><i>{          mov       wo [bp-2],0    ;result if nothing found or}
                         {                                   ; length 0}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$86</font><font color="#000080">/&gt;</font>FIND<font color="#000080">/         </font><font color="#008000"><i>{          mov       al,&gt;find[bp]   ;get the character}
  </i></font><font color="#800000">$31</font><font color="#000080">/</font><font color="#800000">$C9</font><font color="#000080">/               </font><font color="#008000"><i>{          xor       cx,cx}
  </i></font><font color="#800000">$26</font><font color="#000080">/</font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$0D</font><font color="#000080">/           </font><font color="#008000"><i>{      es: mov       cl,[di]        ;get length}
  </i></font><font color="#800000">$E3</font><font color="#000080">/</font><font color="#800000">$0D</font><font color="#000080">/               </font><font color="#008000"><i>{          jcxz      quit           ;stop if zero length}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$CB</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       bx,cx          ;save length}
  </i></font><font color="#800000">$47</font><font color="#000080">/                   </font><font color="#008000"><i>{          inc       di             ;start at first char}
  </i></font><font color="#800000">$FC</font><font color="#000080">/                   </font><font color="#008000"><i>{          cld                      ;moveforward}
  </i></font><font color="#800000">$F2</font><font color="#000080">/</font><font color="#800000">$AE</font><font color="#000080">/               </font><font color="#008000"><i>{repne     scasb}
  </i></font><font color="#800000">$75</font><font color="#000080">/</font><font color="#800000">$05</font><font color="#000080">/               </font><font color="#008000"><i>{          jne       quit           ;stop if not found}
  </i></font><font color="#800000">$29</font><font color="#000080">/</font><font color="#800000">$CB</font><font color="#000080">/               </font><font color="#008000"><i>{          sub       bx,cx          ;add new and old length}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$5E</font><font color="#000080">/</font><font color="#800000">$FE            </font><font color="#008000"><i>{          mov       [bp-2],bx      ;save result}
 </i></font><font color="#000080">);                      </font><font color="#008000"><i>{quit:}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>PosCAfter<font color="#008000"><i>{(FIND:Char; Var TST; N:Integer):Integer}</i></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
Inline</b></font><font color="#000080">(                  </font><font color="#008000"><i>{Assembly by Inline 02/23/88 21:28}
  </i></font><font color="#800000">$C4</font><font color="#000080">/</font><font color="#800000">$BE</font><font color="#000080">/&gt;</font>TST<font color="#000080">/          </font><font color="#008000"><i>{          les       di,&gt;tst[bp]    ;load string}
  </i></font><font color="#800000">$C7</font><font color="#000080">/</font><font color="#800000">$46</font><font color="#000080">/</font><font color="#800000">$FE</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/   </font><font color="#008000"><i>{          mov       wo [bp-2],0    ;result if nothing found or}
                         {                                   ; start beyond length}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$86</font><font color="#000080">/&gt;</font>FIND<font color="#000080">/         </font><font color="#008000"><i>{          mov       al,&gt;find[bp]   ;get the character}
  </i></font><font color="#800000">$31</font><font color="#000080">/</font><font color="#800000">$C9</font><font color="#000080">/               </font><font color="#008000"><i>{          xor       cx,cx}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$0D</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       cl,[di]        ;get length}
  </i></font><font color="#800000">$E3</font><font color="#000080">/</font><font color="#800000">$19</font><font color="#000080">/               </font><font color="#008000"><i>{          jcxz      quit           ;stop if zero length}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$CB</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       bx,cx          ;save length}
  </i></font><font color="#800000">$2B</font><font color="#000080">/</font><font color="#800000">$8E</font><font color="#000080">/&gt;</font>N<font color="#000080">/            </font><font color="#008000"><i>{          sub       cx,&gt;N[bp]      ;length after start}
  </i></font><font color="#800000">$7E</font><font color="#000080">/</font><font color="#800000">$11</font><font color="#000080">/               </font><font color="#008000"><i>{          jle       quit           ;quit if nowhere to search}
  </i></font><font color="#800000">$03</font><font color="#000080">/</font><font color="#800000">$BE</font><font color="#000080">/&gt;</font>N<font color="#000080">/            </font><font color="#008000"><i>{          add       di,&gt;N[bp]      ;moves to the char to begin after}
  </i></font><font color="#800000">$47</font><font color="#000080">/                   </font><font color="#008000"><i>{          inc       di             ;to after it}
  </i></font><font color="#800000">$FC</font><font color="#000080">/                   </font><font color="#008000"><i>{          cld                      ;moveforward}
  </i></font><font color="#800000">$F2</font><font color="#000080">/</font><font color="#800000">$AE</font><font color="#000080">/               </font><font color="#008000"><i>{repne     scasb                    ;search}
  </i></font><font color="#800000">$75</font><font color="#000080">/</font><font color="#800000">$07</font><font color="#000080">/               </font><font color="#008000"><i>{          jne       quit           ;stop if not found}
  </i></font><font color="#800000">$F7</font><font color="#000080">/</font><font color="#800000">$D9</font><font color="#000080">/               </font><font color="#008000"><i>{          neg       cx}
  </i></font><font color="#800000">$01</font><font color="#000080">/</font><font color="#800000">$D9</font><font color="#000080">/               </font><font color="#008000"><i>{          add       cx,bx          ;add new and old length}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$4E</font><font color="#000080">/</font><font color="#800000">$FE            </font><font color="#008000"><i>{          mov       [bp-2],cx      ;save result}
 </i></font><font color="#000080">);                      </font><font color="#008000"><i>{quit:}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>StripL <font color="#008000"><i>{(var tst; strp:char)}</i></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
Inline</b></font><font color="#000080">(                  </font><font color="#008000"><i>{Assembly by Inline 02/23/88 21:28}
  </i></font><font color="#800000">$1E</font><font color="#000080">/                   </font><font color="#008000"><i>{          push      ds           ; save for exit}
  </i></font><font color="#800000">$C4</font><font color="#000080">/</font><font color="#800000">$BE</font><font color="#000080">/&gt;</font>TST<font color="#000080">/          </font><font color="#008000"><i>{          les       di,&gt;tst[bp]  ; ES:DI to start}
  </i></font><font color="#800000">$8C</font><font color="#000080">/</font><font color="#800000">$C0</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       ax,es        ; match segments}
  </i></font><font color="#800000">$8E</font><font color="#000080">/</font><font color="#800000">$D8</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       ds,ax}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$FB</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       bx,di        ; save start}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$86</font><font color="#000080">/&gt;</font>STRP<font color="#000080">/         </font><font color="#008000"><i>{          mov       al,&gt;strp[bp] ; char to strip}
  </i></font><font color="#800000">$29</font><font color="#000080">/</font><font color="#800000">$C9</font><font color="#000080">/               </font><font color="#008000"><i>{          sub       cx,cx        ; zero in CX}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$0D</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       cl,[di]      ; length in CX}
  </i></font><font color="#800000">$E3</font><font color="#000080">/</font><font color="#800000">$17</font><font color="#000080">/               </font><font color="#008000"><i>{          jcxz      quit         ; exit if null}
  </i></font><font color="#800000">$47</font><font color="#000080">/                   </font><font color="#008000"><i>{          inc       di}
  </i></font><font color="#800000">$3A</font><font color="#000080">/</font><font color="#800000">$05</font><font color="#000080">/               </font><font color="#008000"><i>{          cmp       al,[di]      ; check first char}
  </i></font><font color="#800000">$75</font><font color="#000080">/</font><font color="#800000">$12</font><font color="#000080">/               </font><font color="#008000"><i>{          jne       quit         ; exit if no match}
  </i></font><font color="#800000">$47</font><font color="#000080">/                   </font><font color="#008000"><i>{          inc       di           ; next char}
  </i></font><font color="#800000">$49</font><font color="#000080">/                   </font><font color="#008000"><i>{          dec       cx           ; already checked first one}
  </i></font><font color="#800000">$FC</font><font color="#000080">/                   </font><font color="#008000"><i>{          cld                    ; frontwards}
  </i></font><font color="#800000">$F3</font><font color="#000080">/</font><font color="#800000">$AE</font><font color="#000080">/               </font><font color="#008000"><i>{repe      scasb                  ; do search after first}
  </i></font><font color="#800000">$74</font><font color="#000080">/</font><font color="#800000">$07</font><font color="#000080">/               </font><font color="#008000"><i>{          je        null         ; if stripping whole line}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$FE</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       si,di        ; char after last match}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$DF</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       di,bx        ; to start of string}
  </i></font><font color="#800000">$47</font><font color="#000080">/                   </font><font color="#008000"><i>{          inc       di}
  </i></font><font color="#800000">$4E</font><font color="#000080">/                   </font><font color="#008000"><i>{          dec       si           ;}
  </i></font><font color="#800000">$41</font><font color="#000080">/                   </font><font color="#008000"><i>{          inc       cx}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$0F</font><font color="#000080">/               </font><font color="#008000"><i>{null:     mov       [bx],cx      ; to get length right}
  </i></font><font color="#800000">$F2</font><font color="#000080">/</font><font color="#800000">$A4</font><font color="#000080">/               </font><font color="#008000"><i>{rep       movsb                  ; delete}
  </i></font><font color="#800000">$1F                    </font><font color="#008000"><i>{quit:     pop       ds}
 </i></font><font color="#000080">);                      </font><font color="#008000"><i>{end;}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>StripCountL <font color="#008000"><i>{(var tst; strp:char):integer}</i></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
Inline</b></font><font color="#000080">(                  </font><font color="#008000"><i>{Assembly by Inline 02/23/88 21:28}
                         {;Function StripCountL (var tst; strp:char):integer;}
                         {;deletes leading character strp from string tst}
                         {;tst may be of any string type.}
                         {;returns the number of characters stripped}
  </i></font><font color="#800000">$1E</font><font color="#000080">/                   </font><font color="#008000"><i>{          push      ds           ; save for exit}
  </i></font><font color="#800000">$C4</font><font color="#000080">/</font><font color="#800000">$BE</font><font color="#000080">/&gt;</font>TST<font color="#000080">/          </font><font color="#008000"><i>{          les       di,&gt;tst[bp]  ; ES:DI to start}
  </i></font><font color="#800000">$8C</font><font color="#000080">/</font><font color="#800000">$C0</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       ax,es        ; match segments}
  </i></font><font color="#800000">$8E</font><font color="#000080">/</font><font color="#800000">$D8</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       ds,ax}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$FB</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       bx,di        ; save start}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$86</font><font color="#000080">/&gt;</font>STRP<font color="#000080">/         </font><font color="#008000"><i>{          mov       al,&gt;strp[bp] ; char to strip}
  </i></font><font color="#800000">$29</font><font color="#000080">/</font><font color="#800000">$C9</font><font color="#000080">/               </font><font color="#008000"><i>{          sub       cx,cx        ; zero in CX}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$0D</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       cl,[di]      ; length in CX}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$CA</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       dx,cx        ; save original length}
  </i></font><font color="#800000">$C7</font><font color="#000080">/</font><font color="#800000">$46</font><font color="#000080">/</font><font color="#800000">$FE</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/   </font><font color="#008000"><i>{          mov       wo [bp-2],0  ; set result of zero}
  </i></font><font color="#800000">$E3</font><font color="#000080">/</font><font color="#800000">$1C</font><font color="#000080">/               </font><font color="#008000"><i>{          jcxz      quit         ; exit if null}
  </i></font><font color="#800000">$47</font><font color="#000080">/                   </font><font color="#008000"><i>{          inc       di}
  </i></font><font color="#800000">$3A</font><font color="#000080">/</font><font color="#800000">$05</font><font color="#000080">/               </font><font color="#008000"><i>{          cmp       al,[di]      ; check first char}
  </i></font><font color="#800000">$75</font><font color="#000080">/</font><font color="#800000">$17</font><font color="#000080">/               </font><font color="#008000"><i>{          jne       quit         ; exit if no match}
  </i></font><font color="#800000">$47</font><font color="#000080">/                   </font><font color="#008000"><i>{          inc       di           ; next char}
  </i></font><font color="#800000">$49</font><font color="#000080">/                   </font><font color="#008000"><i>{          dec       cx           ; already checked first one}
  </i></font><font color="#800000">$FC</font><font color="#000080">/                   </font><font color="#008000"><i>{          cld                    ; frontwards}
  </i></font><font color="#800000">$F3</font><font color="#000080">/</font><font color="#800000">$AE</font><font color="#000080">/               </font><font color="#008000"><i>{repe      scasb                  ; do search after first}
  </i></font><font color="#800000">$74</font><font color="#000080">/</font><font color="#800000">$07</font><font color="#000080">/               </font><font color="#008000"><i>{          je        null         ; if stripping whole line}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$FE</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       si,di        ; char after last match}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$DF</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       di,bx        ; to start of string}
  </i></font><font color="#800000">$47</font><font color="#000080">/                   </font><font color="#008000"><i>{          inc       di}
  </i></font><font color="#800000">$4E</font><font color="#000080">/                   </font><font color="#008000"><i>{          dec       si           ;}
  </i></font><font color="#800000">$41</font><font color="#000080">/                   </font><font color="#008000"><i>{          inc       cx}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$0F</font><font color="#000080">/               </font><font color="#008000"><i>{null:     mov       [bx],cx      ; to get length right}
  </i></font><font color="#800000">$29</font><font color="#000080">/</font><font color="#800000">$CA</font><font color="#000080">/               </font><font color="#008000"><i>{          sub       dx,cx        ;number of bytes stripped}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$56</font><font color="#000080">/</font><font color="#800000">$FE</font><font color="#000080">/           </font><font color="#008000"><i>{          mov       [bp-2 ],dx   ;move that to function result}
  </i></font><font color="#800000">$F2</font><font color="#000080">/</font><font color="#800000">$A4</font><font color="#000080">/               </font><font color="#008000"><i>{rep       movsb                  ; delete}
  </i></font><font color="#800000">$1F                    </font><font color="#008000"><i>{quit:     pop       ds}
 </i></font><font color="#000080">);                      </font><font color="#008000"><i>{end;}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>StripR <font color="#008000"><i>{(var tst;strp:char)}</i></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
Inline</b></font><font color="#000080">(                  </font><font color="#008000"><i>{Assembly by Inline 02/23/88 21:28}
  </i></font><font color="#800000">$1E</font><font color="#000080">/                   </font><font color="#008000"><i>{          push      ds}
  </i></font><font color="#800000">$C4</font><font color="#000080">/</font><font color="#800000">$BE</font><font color="#000080">/&gt;</font>TST<font color="#000080">/          </font><font color="#008000"><i>{          les       di,&gt;tst[bp] ; ES:DI to start}
  </i></font><font color="#800000">$8C</font><font color="#000080">/</font><font color="#800000">$C0</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       ax,es}
  </i></font><font color="#800000">$8E</font><font color="#000080">/</font><font color="#800000">$D8</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       ds,ax}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$FB</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       bx,di       ; save start}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$86</font><font color="#000080">/&gt;</font>STRP<font color="#000080">/         </font><font color="#008000"><i>{          mov       al,&gt;strp[bp]; char to strip}
  </i></font><font color="#800000">$29</font><font color="#000080">/</font><font color="#800000">$C9</font><font color="#000080">/               </font><font color="#008000"><i>{          sub       cx,cx       ; zero  CX}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$0D</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       cl,[di]     ; length in CX}
  </i></font><font color="#800000">$E3</font><font color="#000080">/</font><font color="#800000">$0E</font><font color="#000080">/               </font><font color="#008000"><i>{          jcxz      quit        ; exit if null}
  </i></font><font color="#800000">$01</font><font color="#000080">/</font><font color="#800000">$CF</font><font color="#000080">/               </font><font color="#008000"><i>{          add       di,cx       ;start at far end of string}
  </i></font><font color="#800000">$3A</font><font color="#000080">/</font><font color="#800000">$05</font><font color="#000080">/               </font><font color="#008000"><i>{          cmp       al,[di]     ;check last character}
  </i></font><font color="#800000">$75</font><font color="#000080">/</font><font color="#800000">$08</font><font color="#000080">/               </font><font color="#008000"><i>{          jne       quit        ;exit if no match}
  </i></font><font color="#800000">$FD</font><font color="#000080">/                   </font><font color="#008000"><i>{          std                   ;scan backwards}
  </i></font><font color="#800000">$F3</font><font color="#000080">/</font><font color="#800000">$AE</font><font color="#000080">/               </font><font color="#008000"><i>{repe      scasb                 ;search for first non-matching byte}
  </i></font><font color="#800000">$74</font><font color="#000080">/</font><font color="#800000">$01</font><font color="#000080">/               </font><font color="#008000"><i>{          je        null        ;if you are stripping all characters}
  </i></font><font color="#800000">$41</font><font color="#000080">/                   </font><font color="#008000"><i>{          inc       cx          ;fix length}
  </i></font><font color="#800000">$88</font><font color="#000080">/</font><font color="#800000">$0F</font><font color="#000080">/               </font><font color="#008000"><i>{null:     mov       [bx],cl     ;new length}
  </i></font><font color="#800000">$1F</font><font color="#000080">);                  </font><font color="#008000"><i>{quit:     pop       ds}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>StripThrough <font color="#008000"><i>{(var tst;strp:char)}</i></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
Inline</b></font><font color="#000080">(                  </font><font color="#008000"><i>{Assembly by Inline 02/23/88 21:28}
  </i></font><font color="#800000">$1E</font><font color="#000080">/                   </font><font color="#008000"><i>{          push      ds}
  </i></font><font color="#800000">$C4</font><font color="#000080">/</font><font color="#800000">$BE</font><font color="#000080">/&gt;</font>TST<font color="#000080">/          </font><font color="#008000"><i>{          LES       DI,&gt;TST[BP]   ; ES:DI to start}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$FB</font><font color="#000080">/               </font><font color="#008000"><i>{          MOV       BX,DI         ; save start}
  </i></font><font color="#800000">$8C</font><font color="#000080">/</font><font color="#800000">$C0</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       ax,es}
  </i></font><font color="#800000">$8E</font><font color="#000080">/</font><font color="#800000">$D8</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       ds,ax}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$86</font><font color="#000080">/&gt;</font>STRP<font color="#000080">/         </font><font color="#008000"><i>{          MOV       AL,&gt;STRP[BP]   ; char to strip through}
  </i></font><font color="#800000">$29</font><font color="#000080">/</font><font color="#800000">$C9</font><font color="#000080">/               </font><font color="#008000"><i>{          SUB       CX,CX          ; zero in CX}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$0D</font><font color="#000080">/               </font><font color="#008000"><i>{          MOV       CL,[DI]        ; length in CX}
  </i></font><font color="#800000">$E3</font><font color="#000080">/</font><font color="#800000">$0F</font><font color="#000080">/               </font><font color="#008000"><i>{          JCXZ      QUIT           ; exit if null}
  </i></font><font color="#800000">$47</font><font color="#000080">/                   </font><font color="#008000"><i>{          INC       DI             ; first char}
  </i></font><font color="#800000">$FC</font><font color="#000080">/                   </font><font color="#008000"><i>{          CLD                      ; frontwards}
  </i></font><font color="#800000">$F2</font><font color="#000080">/</font><font color="#800000">$AE</font><font color="#000080">/               </font><font color="#008000"><i>{REPNE     SCASB                    ; do search}
  </i></font><font color="#800000">$75</font><font color="#000080">/</font><font color="#800000">$09</font><font color="#000080">/               </font><font color="#008000"><i>{          JNE       QUIT           ; not found}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$FE</font><font color="#000080">/               </font><font color="#008000"><i>{          MOV       SI,DI          ; char after, start move here}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$DF</font><font color="#000080">/               </font><font color="#008000"><i>{          MOV       DI,BX}
  </i></font><font color="#800000">$47</font><font color="#000080">/                   </font><font color="#008000"><i>{          INC       DI}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$0F</font><font color="#000080">/               </font><font color="#008000"><i>{          MOV       [BX],cx        ; to get length right}
  </i></font><font color="#800000">$F2</font><font color="#000080">/</font><font color="#800000">$A4</font><font color="#000080">/               </font><font color="#008000"><i>{REP       MOVSB                    ; delete leading characters}
  </i></font><font color="#800000">$1F                    </font><font color="#008000"><i>{QUIT:     pop       ds}
 </i></font><font color="#000080">);                      </font><font color="#008000"><i>{end;}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>SwapSubstring <font color="#008000"><i>{ (Var tline; find, repl:string;
                         Var enough:boolean; limit:byte)}</i></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
Inline</b></font><font color="#000080">(                  </font><font color="#008000"><i>{Assembly by Inline 02/23/88 21:28}
  </i></font><font color="#800000">$1E</font><font color="#000080">/                   </font><font color="#008000"><i>{          push      ds}
  </i></font><font color="#800000">$8D</font><font color="#000080">/</font><font color="#800000">$B6</font><font color="#000080">/&gt;</font>FIND<font color="#000080">/         </font><font color="#008000"><i>{          lea       si,&gt;find[bp]        ;address find}
  </i></font><font color="#800000">$36</font><font color="#000080">/</font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$14</font><font color="#000080">/           </font><font color="#008000"><i>{       ss:mov       dl, [si]            ;store length of find}
  </i></font><font color="#800000">$36</font><font color="#000080">/</font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$44</font><font color="#000080">/</font><font color="#800000">$01</font><font color="#000080">/       </font><font color="#008000"><i>{       ss:mov       al [si+1]           ;store first find character in al}
  </i></font><font color="#800000">$8D</font><font color="#000080">/</font><font color="#800000">$B6</font><font color="#000080">/&gt;</font>REPL<font color="#000080">/         </font><font color="#008000"><i>{          lea       si,&gt;repl[bp]        ;address repl}
  </i></font><font color="#800000">$36</font><font color="#000080">/</font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$34</font><font color="#000080">/           </font><font color="#008000"><i>{       ss:mov       dh,[si]             ;store length of repl}
  </i></font><font color="#800000">$88</font><font color="#000080">/</font><font color="#800000">$D4</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       ah, dl}
  </i></font><font color="#800000">$28</font><font color="#000080">/</font><font color="#800000">$F4</font><font color="#000080">/               </font><font color="#008000"><i>{          sub       ah,dh               ;find difference in length of strings}
  </i></font><font color="#800000">$C4</font><font color="#000080">/</font><font color="#800000">$BE</font><font color="#000080">/&gt;</font>ENOUGH<font color="#000080">/       </font><font color="#008000"><i>{          les       di,&gt;enough[bp]      ;initialize flag}
  </i></font><font color="#800000">$C6</font><font color="#000080">/</font><font color="#800000">$05</font><font color="#000080">/</font><font color="#800000">$01</font><font color="#000080">/           </font><font color="#008000"><i>{          mov       by [di],1}
  </i></font><font color="#800000">$C4</font><font color="#000080">/</font><font color="#800000">$BE</font><font color="#000080">/&gt;</font>TLINE<font color="#000080">/        </font><font color="#008000"><i>{          les       di, &gt;tline[BP]      ;address of string to modify}
  </i></font><font color="#800000">$8C</font><font color="#000080">/</font><font color="#800000">$C3</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       bx,es               ;match segments}
  </i></font><font color="#800000">$8E</font><font color="#000080">/</font><font color="#800000">$DB</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       ds,bx}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$FB</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       bx,di               ;save tline address}
  </i></font><font color="#800000">$31</font><font color="#000080">/</font><font color="#800000">$C9</font><font color="#000080">/               </font><font color="#008000"><i>{          xor       cx,cx               ;zero out cx}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$0D</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       cl,[di]             ;length tline to cl}
  </i></font><font color="#800000">$E3</font><font color="#000080">/</font><font color="#800000">$03</font><font color="#000080">/               </font><font color="#008000"><i>{          jcxz      j1                  ;exit if tline null}
  </i></font><font color="#800000">$E9</font><font color="#000080">/</font><font color="#800000">$03</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/           </font><font color="#008000"><i>{          jmp       j2}
  </i></font><font color="#800000">$E9</font><font color="#000080">/</font><font color="#800000">$8E</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/           </font><font color="#008000"><i>{j1:       jmp       quit}
  </i></font><font color="#800000">$47</font><font color="#000080">/                   </font><font color="#008000"><i>{j2:       inc       di                  ;to start of string}
  </i></font><font color="#800000">$38</font><font color="#000080">/</font><font color="#800000">$D1</font><font color="#000080">/               </font><font color="#008000"><i>{scan:     cmp       cl, dl              ;is remaining string&gt;find?}
  </i></font><font color="#800000">$72</font><font color="#000080">/</font><font color="#800000">$F8</font><font color="#000080">/               </font><font color="#008000"><i>{          jb        j1                  ;exit if not enough left for a match}
  </i></font><font color="#800000">$FC</font><font color="#000080">/                   </font><font color="#008000"><i>{          cld                           ;move forwards}
  </i></font><font color="#800000">$F2</font><font color="#000080">/</font><font color="#800000">$AE</font><font color="#000080">/               </font><font color="#008000"><i>{repne     scasb                         ;search for first char}
  </i></font><font color="#800000">$75</font><font color="#000080">/</font><font color="#800000">$F3</font><font color="#000080">/               </font><font color="#008000"><i>{          jne       j1                  ;exit if not found}
  </i></font><font color="#800000">$51</font><font color="#000080">/                   </font><font color="#008000"><i>{          push      cx                  ;save no. of bytes left after match}
  </i></font><font color="#800000">$4F</font><font color="#000080">/                   </font><font color="#008000"><i>{          dec       di                  ;to match position}
  </i></font><font color="#800000">$57</font><font color="#000080">/                   </font><font color="#008000"><i>{          push      di                  ;save position after match}
  </i></font><font color="#800000">$8D</font><font color="#000080">/</font><font color="#800000">$B6</font><font color="#000080">/&gt;</font>FIND<font color="#000080">+</font><font color="#800000">$0001</font><font color="#000080">/   </font><font color="#008000"><i>{          lea       si, &gt;find[bp]+1}
  </i></font><font color="#800000">$88</font><font color="#000080">/</font><font color="#800000">$D1</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       cl, dl              ;get length of find string}
  </i></font><font color="#800000">$F3</font><font color="#000080">/</font><font color="#800000">$36</font><font color="#000080">/</font><font color="#800000">$A6</font><font color="#000080">/           </font><font color="#008000"><i>{repe   ss:cmpsb                         ;match on find string?}
  </i></font><font color="#800000">$5F</font><font color="#000080">/                   </font><font color="#008000"><i>{          pop       di                  ;start of match test}
  </i></font><font color="#800000">$59</font><font color="#000080">/                   </font><font color="#008000"><i>{          pop       cx                  ;bytes then remaining}
  </i></font><font color="#800000">$75</font><font color="#000080">/</font><font color="#800000">$E6</font><font color="#000080">/               </font><font color="#008000"><i>{          jne       j2                  ;cycle if no match}
                         {;gets here if you found a match. Now compare find and replace strings}
  </i></font><font color="#800000">$FE</font><font color="#000080">/</font><font color="#800000">$C1</font><font color="#000080">/               </font><font color="#008000"><i>{          inc       cl                  ;bytes from beginning of match}
  </i></font><font color="#800000">$80</font><font color="#000080">/</font><font color="#800000">$FC</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/           </font><font color="#008000"><i>{          cmp       ah,0                ;test which branch to follow}
  </i></font><font color="#800000">$74</font><font color="#000080">/</font><font color="#800000">$52</font><font color="#000080">/               </font><font color="#008000"><i>{          je        moveq               ;skip string adjust if find=repl}
  </i></font><font color="#800000">$7C</font><font color="#000080">/</font><font color="#800000">$1B</font><font color="#000080">/               </font><font color="#008000"><i>{          jl        longrep             ;jump if repl &gt;find}
                         {;if find &gt; repl, need to close up the gap resulting from replacing}
  </i></font><font color="#800000">$28</font><font color="#000080">/</font><font color="#800000">$D1</font><font color="#000080">/               </font><font color="#008000"><i>{          sub       cl,dl               ;no of bytes from end of find string}
  </i></font><font color="#800000">$51</font><font color="#000080">/                   </font><font color="#008000"><i>{          push      cx                  ;save it}
  </i></font><font color="#800000">$57</font><font color="#000080">/                   </font><font color="#008000"><i>{          push      di                  ;save beginning of match}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$FE</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       si, di              ;make both start of match}
  </i></font><font color="#800000">$53</font><font color="#000080">/                   </font><font color="#008000"><i>{          push      bx                  ;clear some workspace}
  </i></font><font color="#800000">$31</font><font color="#000080">/</font><font color="#800000">$DB</font><font color="#000080">/               </font><font color="#008000"><i>{          xor       bx, bx              ; &quot;}
  </i></font><font color="#800000">$88</font><font color="#000080">/</font><font color="#800000">$F3</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       bl, dh              ;len(repl)}
  </i></font><font color="#800000">$01</font><font color="#000080">/</font><font color="#800000">$DF</font><font color="#000080">/               </font><font color="#008000"><i>{          add       di, bx              ;add to get destination address}
  </i></font><font color="#800000">$88</font><font color="#000080">/</font><font color="#800000">$D3</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       bl, dl              ;len(find)}
  </i></font><font color="#800000">$01</font><font color="#000080">/</font><font color="#800000">$DE</font><font color="#000080">/               </font><font color="#008000"><i>{          add       si, bx              ;add to get source address}
  </i></font><font color="#800000">$5B</font><font color="#000080">/                   </font><font color="#008000"><i>{          pop       bx                  ;restore}
  </i></font><font color="#800000">$28</font><font color="#000080">/</font><font color="#800000">$27</font><font color="#000080">/               </font><font color="#008000"><i>{          sub       [bx],ah             ;shrink tline[0]}
  </i></font><font color="#800000">$F2</font><font color="#000080">/</font><font color="#800000">$A4</font><font color="#000080">/               </font><font color="#008000"><i>{rep       movsb                         ;close the gap}
  </i></font><font color="#800000">$5F</font><font color="#000080">/                   </font><font color="#008000"><i>{          pop       di                  ;get back start of match}
  </i></font><font color="#800000">$59</font><font color="#000080">/                   </font><font color="#008000"><i>{          pop       cx                  ;get back bytes after replacing}
  </i></font><font color="#800000">$E9</font><font color="#000080">/</font><font color="#800000">$37</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/           </font><font color="#008000"><i>{          jmp       movr                ;go do the replacement}
                         {;if repl&gt; find, increase the gap}
  </i></font><font color="#800000">$57</font><font color="#000080">/                   </font><font color="#008000"><i>{longrep:  push      di}
                         {;test whether this would make string too long}
  </i></font><font color="#800000">$F6</font><font color="#000080">/</font><font color="#800000">$DC</font><font color="#000080">/               </font><font color="#008000"><i>{          neg       ah}
  </i></font><font color="#800000">$52</font><font color="#000080">/                   </font><font color="#008000"><i>{          push      dx                  ;get some workspace}
                         {;if you do not like using the parameter limit, you can fix}
                         {;the limit by replacing the following line with the commented}
                         {;line after it.  Then you can replace 255 with whatever length less}
                         {;than that you want.}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$B6</font><font color="#000080">/&gt;</font>LIMIT<font color="#000080">/        </font><font color="#008000"><i>{          mov       dh,[&gt;limit[bp]]     ;get maximum string length}
                         {;         mov       dh,255              ;get max string length}
  </i></font><font color="#800000">$28</font><font color="#000080">/</font><font color="#800000">$E6</font><font color="#000080">/               </font><font color="#008000"><i>{          sub       dh,ah               ;find longest string you can add to}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$17</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       dl,[bx]             ;get actual current length}
  </i></font><font color="#800000">$38</font><font color="#000080">/</font><font color="#800000">$F2</font><font color="#000080">/               </font><font color="#008000"><i>{          cmp       dl,dh               ;compare them}
  </i></font><font color="#800000">$77</font><font color="#000080">/</font><font color="#800000">$37</font><font color="#000080">/               </font><font color="#008000"><i>{          ja        j5                  ;stop if max&lt;actual, but pop first}
  </i></font><font color="#800000">$5A</font><font color="#000080">/                   </font><font color="#008000"><i>{          pop       dx                  ;restore}
  </i></font><font color="#800000">$00</font><font color="#000080">/</font><font color="#800000">$27</font><font color="#000080">/               </font><font color="#008000"><i>{          add       by [bx],ah          ;increase string length}
                         {;now need to make room for the replace}
  </i></font><font color="#800000">$53</font><font color="#000080">/                   </font><font color="#008000"><i>{          push      bx                  ;save tline address}
  </i></font><font color="#800000">$02</font><font color="#000080">/</font><font color="#800000">$1F</font><font color="#000080">/               </font><font color="#008000"><i>{          add       bl,[bx]             ;get end of tline}
  </i></font><font color="#800000">$73</font><font color="#000080">/</font><font color="#800000">$02</font><font color="#000080">/               </font><font color="#008000"><i>{          jnc       j4}
  </i></font><font color="#800000">$FE</font><font color="#000080">/</font><font color="#800000">$C7</font><font color="#000080">/               </font><font color="#008000"><i>{          inc       bh                  ;add one if a carry}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$DF</font><font color="#000080">/               </font><font color="#008000"><i>{j4:       mov       di,bx               ;move to end of lengthened string}
                         {;now need where you are moving it too}
  </i></font><font color="#800000">$31</font><font color="#000080">/</font><font color="#800000">$DB</font><font color="#000080">/               </font><font color="#008000"><i>{          xor       bx,bx               ;clear some space}
  </i></font><font color="#800000">$88</font><font color="#000080">/</font><font color="#800000">$E3</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       bl,ah               ;get the increment}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$FE</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       si,di               ;move the address}
  </i></font><font color="#800000">$29</font><font color="#000080">/</font><font color="#800000">$DE</font><font color="#000080">/               </font><font color="#008000"><i>{          sub       si,bx               ;get end of string before increment}
  </i></font><font color="#800000">$5B</font><font color="#000080">/                   </font><font color="#008000"><i>{          pop       bx                  ;restore}
  </i></font><font color="#800000">$51</font><font color="#000080">/                   </font><font color="#008000"><i>{          push      cx                  ;save bytes after first match}
  </i></font><font color="#800000">$28</font><font color="#000080">/</font><font color="#800000">$D1</font><font color="#000080">/               </font><font color="#008000"><i>{          sub       cl,dl               ;don't move bytes in find}
  </i></font><font color="#800000">$FD</font><font color="#000080">/                   </font><font color="#008000"><i>{          std                           ;change direction}
  </i></font><font color="#800000">$F2</font><font color="#000080">/</font><font color="#800000">$A4</font><font color="#000080">/               </font><font color="#008000"><i>{rep       movsb                         ;move the string down}
  </i></font><font color="#800000">$FC</font><font color="#000080">/                   </font><font color="#008000"><i>{          cld                           ;get the direction again}
  </i></font><font color="#800000">$59</font><font color="#000080">/                   </font><font color="#008000"><i>{          pop       cx                  ;restore}
  </i></font><font color="#800000">$5F</font><font color="#000080">/                   </font><font color="#008000"><i>{          pop       di                  ;restore.}
  </i></font><font color="#800000">$28</font><font color="#000080">/</font><font color="#800000">$D1</font><font color="#000080">/               </font><font color="#008000"><i>{          sub       cl,dl               ;subtract find from remaining bytes}
  </i></font><font color="#800000">$F6</font><font color="#000080">/</font><font color="#800000">$DC</font><font color="#000080">/               </font><font color="#008000"><i>{          neg       ah}
  </i></font><font color="#800000">$E9</font><font color="#000080">/</font><font color="#800000">$02</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/           </font><font color="#008000"><i>{          jmp       movr                ;go get the replace}
                         {;now fix up cx for equal strings}
  </i></font><font color="#800000">$28</font><font color="#000080">/</font><font color="#800000">$F1</font><font color="#000080">/               </font><font color="#008000"><i>{moveq:    sub       cl,dh               ;bytes remaining after repl}
                         {;now move repl into place}
  </i></font><font color="#800000">$51</font><font color="#000080">/                   </font><font color="#008000"><i>{movr:     push      cx                  ;save bytes remaining}
  </i></font><font color="#800000">$8D</font><font color="#000080">/</font><font color="#800000">$B6</font><font color="#000080">/&gt;</font>REPL<font color="#000080">+</font><font color="#800000">$0001</font><font color="#000080">/   </font><font color="#008000"><i>{          lea       si, [&gt;repl[bp]+1]         ;get replace string}
  </i></font><font color="#800000">$31</font><font color="#000080">/</font><font color="#800000">$C9</font><font color="#000080">/               </font><font color="#008000"><i>{          xor       cx,cx               ;clear it out}
  </i></font><font color="#800000">$88</font><font color="#000080">/</font><font color="#800000">$F1</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       cl,dh               ;get bytes to move- len(repl)}
  </i></font><font color="#800000">$F2</font><font color="#000080">/</font><font color="#800000">$36</font><font color="#000080">/</font><font color="#800000">$A4</font><font color="#000080">/           </font><font color="#008000"><i>{rep    ss:movsb                         ;move replacement string}
  </i></font><font color="#800000">$59</font><font color="#000080">/                   </font><font color="#008000"><i>{          pop       cx                  ;bytes remaining.di should be ok}
  </i></font><font color="#800000">$E9</font><font color="#000080">/</font><font color="#800000">$7C</font><font color="#000080">/</font><font color="#800000">$FF</font><font color="#000080">/           </font><font color="#008000"><i>{          jmp       near scan           ;look for next match}
  </i></font><font color="#800000">$5A</font><font color="#000080">/                   </font><font color="#008000"><i>{j5:       pop       dx                  ;clean up stack}
  </i></font><font color="#800000">$C4</font><font color="#000080">/</font><font color="#800000">$BE</font><font color="#000080">/&gt;</font>ENOUGH<font color="#000080">/       </font><font color="#008000"><i>{          les       di, &gt;enough[bp]     ;not enough to make all swaps}
  </i></font><font color="#800000">$C6</font><font color="#000080">/</font><font color="#800000">$05</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/           </font><font color="#008000"><i>{          mov       by [di],0}
  </i></font><font color="#800000">$5F</font><font color="#000080">/                   </font><font color="#008000"><i>{          pop       di}
  </i></font><font color="#800000">$1F                    </font><font color="#008000"><i>{quit:     pop       ds}
 </i></font><font color="#000080">);                      </font><font color="#008000"><i>{end;}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Stringup <font color="#008000"><i>{(tline:string):string}</i></font><font color="#000080">;

</font><font color="#FF0000"><b>Begin
Inline</b></font><font color="#000080">(                  </font><font color="#008000"><i>{Assembly by Inline 02/23/88 21:28}
  </i></font><font color="#800000">$1E</font><font color="#000080">/                   </font><font color="#008000"><i>{          push ds               ;save things for later}
  </i></font><font color="#800000">$C5</font><font color="#000080">/</font><font color="#800000">$76</font><font color="#000080">/</font><font color="#800000">$06</font><font color="#000080">/           </font><font color="#008000"><i>{          lds  si, [bp+06]   ;addressing of the string}
  </i></font><font color="#800000">$FC</font><font color="#000080">/                   </font><font color="#008000"><i>{          cld                   ;move forward}
  </i></font><font color="#800000">$31</font><font color="#000080">/</font><font color="#800000">$C9</font><font color="#000080">/               </font><font color="#008000"><i>{          xor  cx,cx}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$0C</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  cl,[si]          ;string length to cl}
  </i></font><font color="#800000">$C4</font><font color="#000080">/</font><font color="#800000">$7E</font><font color="#000080">/</font><font color="#800000">$0A</font><font color="#000080">/           </font><font color="#008000"><i>{          les di, [bp+10]        ;point di to function result}
  </i></font><font color="#800000">$26</font><font color="#000080">/</font><font color="#800000">$88</font><font color="#000080">/</font><font color="#800000">$0D</font><font color="#000080">/           </font><font color="#008000"><i>{     es:  mov [di],cl           ;and move length to function result}
  </i></font><font color="#800000">$E3</font><font color="#000080">/</font><font color="#800000">$10</font><font color="#000080">/               </font><font color="#008000"><i>{          jcxz l2}
  </i></font><font color="#800000">$46</font><font color="#000080">/                   </font><font color="#008000"><i>{          inc  si               ;point to start of string}
  </i></font><font color="#800000">$47</font><font color="#000080">/                   </font><font color="#008000"><i>{          inc  di               ;and where it goes}
  </i></font><font color="#800000">$AC</font><font color="#000080">/                   </font><font color="#008000"><i>{l1:       lodsb                 ;get byte from string}
  </i></font><font color="#800000">$3C</font><font color="#000080">/</font><font color="#800000">$61</font><font color="#000080">/               </font><font color="#008000"><i>{          cmp  al,'a'           ;tests from Turbo manual}
  </i></font><font color="#800000">$72</font><font color="#000080">/</font><font color="#800000">$06</font><font color="#000080">/               </font><font color="#008000"><i>{          jb   l3}
  </i></font><font color="#800000">$3C</font><font color="#000080">/</font><font color="#800000">$7A</font><font color="#000080">/               </font><font color="#008000"><i>{          cmp  al,'z'}
  </i></font><font color="#800000">$77</font><font color="#000080">/</font><font color="#800000">$02</font><font color="#000080">/               </font><font color="#008000"><i>{          ja   l3}
  </i></font><font color="#800000">$2C</font><font color="#000080">/</font><font color="#800000">$20</font><font color="#000080">/               </font><font color="#008000"><i>{          sub  al,$20}
  </i></font><font color="#800000">$AA</font><font color="#000080">/                   </font><font color="#008000"><i>{l3:       stosb                 ;store result}
  </i></font><font color="#800000">$E2</font><font color="#000080">/</font><font color="#800000">$F2</font><font color="#000080">/               </font><font color="#008000"><i>{          loop l1}
  </i></font><font color="#800000">$1F</font><font color="#000080">);                  </font><font color="#008000"><i>{l2:       pop ds}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>StupCase <font color="#008000"><i>{(var tline)}</i></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
Inline</b></font><font color="#000080">(                  </font><font color="#008000"><i>{Assembly by Inline 02/23/88 21:28}
  </i></font><font color="#800000">$1E</font><font color="#000080">/                   </font><font color="#008000"><i>{          push ds}
  </i></font><font color="#800000">$C5</font><font color="#000080">/</font><font color="#800000">$B6</font><font color="#000080">/&gt;</font>TLINE<font color="#000080">/        </font><font color="#008000"><i>{          lds  si, &gt;tline[bp]}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$0C</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  cl,[si]}
  </i></font><font color="#800000">$FE</font><font color="#000080">/</font><font color="#800000">$C1</font><font color="#000080">/               </font><font color="#008000"><i>{          inc  cl}
  </i></font><font color="#800000">$FE</font><font color="#000080">/</font><font color="#800000">$C9</font><font color="#000080">/               </font><font color="#008000"><i>{l1:       dec  cl}
  </i></font><font color="#800000">$74</font><font color="#000080">/</font><font color="#800000">$10</font><font color="#000080">/               </font><font color="#008000"><i>{          jz   l2}
  </i></font><font color="#800000">$46</font><font color="#000080">/                   </font><font color="#008000"><i>{          inc  si}
  </i></font><font color="#800000">$80</font><font color="#000080">/</font><font color="#800000">$3C</font><font color="#000080">/</font><font color="#800000">$61</font><font color="#000080">/           </font><font color="#008000"><i>{          cmp  by[si],'a'}
  </i></font><font color="#800000">$72</font><font color="#000080">/</font><font color="#800000">$F6</font><font color="#000080">/               </font><font color="#008000"><i>{          jb   l1}
  </i></font><font color="#800000">$80</font><font color="#000080">/</font><font color="#800000">$3C</font><font color="#000080">/</font><font color="#800000">$7A</font><font color="#000080">/           </font><font color="#008000"><i>{          cmp  by[si],'z'}
  </i></font><font color="#800000">$77</font><font color="#000080">/</font><font color="#800000">$F1</font><font color="#000080">/               </font><font color="#008000"><i>{          ja   l1}
  </i></font><font color="#800000">$80</font><font color="#000080">/</font><font color="#800000">$2C</font><font color="#000080">/</font><font color="#800000">$20</font><font color="#000080">/           </font><font color="#008000"><i>{          sub  by[si],$20}
  </i></font><font color="#800000">$EB</font><font color="#000080">/</font><font color="#800000">$EC</font><font color="#000080">/               </font><font color="#008000"><i>{          jmp  short l1}
  </i></font><font color="#800000">$1F</font><font color="#000080">);                  </font><font color="#008000"><i>{l2:       pop  ds}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>LowCase <font color="#008000"><i>{(var tline)}</i></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
Inline</b></font><font color="#000080">(                  </font><font color="#008000"><i>{Assembly by Inline 02/23/88 21:28}
  </i></font><font color="#800000">$1E</font><font color="#000080">/                   </font><font color="#008000"><i>{          push ds}
  </i></font><font color="#800000">$C4</font><font color="#000080">/</font><font color="#800000">$BE</font><font color="#000080">/&gt;</font>TLINE<font color="#000080">/        </font><font color="#008000"><i>{          les  di, &gt;tline[bp]}
  </i></font><font color="#800000">$8C</font><font color="#000080">/</font><font color="#800000">$C0</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  ax,es}
  </i></font><font color="#800000">$8E</font><font color="#000080">/</font><font color="#800000">$D8</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  ds,ax}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$0D</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  cl,[di]}
  </i></font><font color="#800000">$FE</font><font color="#000080">/</font><font color="#800000">$C1</font><font color="#000080">/               </font><font color="#008000"><i>{          inc  cl}
  </i></font><font color="#800000">$FE</font><font color="#000080">/</font><font color="#800000">$C9</font><font color="#000080">/               </font><font color="#008000"><i>{l1:       dec  cl}
  </i></font><font color="#800000">$74</font><font color="#000080">/</font><font color="#800000">$10</font><font color="#000080">/               </font><font color="#008000"><i>{          jz   l2}
  </i></font><font color="#800000">$47</font><font color="#000080">/                   </font><font color="#008000"><i>{          inc  di}
  </i></font><font color="#800000">$80</font><font color="#000080">/</font><font color="#800000">$3D</font><font color="#000080">/</font><font color="#800000">$41</font><font color="#000080">/           </font><font color="#008000"><i>{          cmp  by[di],'A'}
  </i></font><font color="#800000">$72</font><font color="#000080">/</font><font color="#800000">$F6</font><font color="#000080">/               </font><font color="#008000"><i>{          jb   l1}
  </i></font><font color="#800000">$80</font><font color="#000080">/</font><font color="#800000">$3D</font><font color="#000080">/</font><font color="#800000">$5A</font><font color="#000080">/           </font><font color="#008000"><i>{          cmp  by[di],'Z'}
  </i></font><font color="#800000">$77</font><font color="#000080">/</font><font color="#800000">$F1</font><font color="#000080">/               </font><font color="#008000"><i>{          ja   l1}
  </i></font><font color="#800000">$80</font><font color="#000080">/</font><font color="#800000">$05</font><font color="#000080">/</font><font color="#800000">$20</font><font color="#000080">/           </font><font color="#008000"><i>{          add  by[di],$20}
  </i></font><font color="#800000">$EB</font><font color="#000080">/</font><font color="#800000">$EC</font><font color="#000080">/               </font><font color="#008000"><i>{          jmp  short l1}
  </i></font><font color="#800000">$1F</font><font color="#000080">);                  </font><font color="#008000"><i>{l2:       pop  ds}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>FlipChar <font color="#008000"><i>{(var tst; srch, repl: char)}</i></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
Inline</b></font><font color="#000080">(                  </font><font color="#008000"><i>{Assembly by Inline 02/23/88 21:28}
  </i></font><font color="#800000">$C4</font><font color="#000080">/</font><font color="#800000">$BE</font><font color="#000080">/&gt;</font>TST<font color="#000080">/          </font><font color="#008000"><i>{          LES       DI,&gt;TST[BP] ; ES:DI to start}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$86</font><font color="#000080">/&gt;</font>SRCH<font color="#000080">/         </font><font color="#008000"><i>{          MOV       AL,&gt;SRCH[BP] ; search char}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$A6</font><font color="#000080">/&gt;</font>REPL<font color="#000080">/         </font><font color="#008000"><i>{          MOV       AH,&gt;REPL[BP] ; repl. char}
  </i></font><font color="#800000">$29</font><font color="#000080">/</font><font color="#800000">$C9</font><font color="#000080">/               </font><font color="#008000"><i>{          SUB       CX,CX     ; zero in CX}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$0D</font><font color="#000080">/               </font><font color="#008000"><i>{          MOV       CL,[DI]   ; length in CX}
  </i></font><font color="#800000">$E3</font><font color="#000080">/</font><font color="#800000">$0D</font><font color="#000080">/               </font><font color="#008000"><i>{          JCXZ      QUIT      ; exit if null}
  </i></font><font color="#800000">$47</font><font color="#000080">/                   </font><font color="#008000"><i>{          INC       DI        ; first char}
  </i></font><font color="#800000">$FC</font><font color="#000080">/                   </font><font color="#008000"><i>{          CLD                 ; frontwards}
  </i></font><font color="#800000">$E3</font><font color="#000080">/</font><font color="#800000">$09</font><font color="#000080">/               </font><font color="#008000"><i>{MORE:     JCXZ      QUIT      ; no more}
  </i></font><font color="#800000">$F2</font><font color="#000080">/</font><font color="#800000">$AE</font><font color="#000080">/               </font><font color="#008000"><i>{REPNE     SCASB               ; do search}
  </i></font><font color="#800000">$75</font><font color="#000080">/</font><font color="#800000">$05</font><font color="#000080">/               </font><font color="#008000"><i>{          JNE       QUIT      ; not found}
  </i></font><font color="#800000">$88</font><font color="#000080">/</font><font color="#800000">$65</font><font color="#000080">/</font><font color="#800000">$FF</font><font color="#000080">/           </font><font color="#008000"><i>{          MOV       [DI-1],AH ; replace}
  </i></font><font color="#800000">$EB</font><font color="#000080">/</font><font color="#800000">$F5</font><font color="#000080">/               </font><font color="#008000"><i>{          JMP       MORE      ; try for more}
  </i></font><font color="#800000">$90</font><font color="#000080">);                  </font><font color="#008000"><i>{QUIT:     NOP                 ; exit}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>FlipCount <font color="#008000"><i>{(var tst;srch,repl:char):integer}</i></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
Inline</b></font><font color="#000080">(                  </font><font color="#008000"><i>{Assembly by Inline 02/23/88 21:28}
                         {;Function FlipCount(var tst;srch,repl:char):integer;}
                         {;(*  Tst is a string.  This is identical to the procedure}
                         {; Flipchar except that the function returns the number of}
                         {; times the search character was replaced by the find character.}
                         {; Written 2/16/86 by D. Seidman, based on Flipchar by M. Lazarus*)}
  </i></font><font color="#800000">$1E</font><font color="#000080">/                   </font><font color="#008000"><i>{          push      ds}
  </i></font><font color="#800000">$C4</font><font color="#000080">/</font><font color="#800000">$BE</font><font color="#000080">/&gt;</font>TST<font color="#000080">/          </font><font color="#008000"><i>{          les       di,&gt;tst[BP] ; ES:DI to start}
  </i></font><font color="#800000">$8C</font><font color="#000080">/</font><font color="#800000">$C0</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       ax,es}
  </i></font><font color="#800000">$8E</font><font color="#000080">/</font><font color="#800000">$D8</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       ds,ax}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$86</font><font color="#000080">/&gt;</font>SRCH<font color="#000080">/         </font><font color="#008000"><i>{          mov       al,&gt;srch[BP] ; search char}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$A6</font><font color="#000080">/&gt;</font>REPL<font color="#000080">/         </font><font color="#008000"><i>{          mov       ah,&gt;repl[BP] ; repl. char}
  </i></font><font color="#800000">$31</font><font color="#000080">/</font><font color="#800000">$DB</font><font color="#000080">/               </font><font color="#008000"><i>{          xor       bx,bx     ;zero in bx -- for counting}
  </i></font><font color="#800000">$31</font><font color="#000080">/</font><font color="#800000">$C9</font><font color="#000080">/               </font><font color="#008000"><i>{          xor       cx,cx     ; zero in CX}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$0D</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       cl,[di]   ; length in CX}
  </i></font><font color="#800000">$E3</font><font color="#000080">/</font><font color="#800000">$0E</font><font color="#000080">/               </font><font color="#008000"><i>{          jcxz      quit      ; exit if null}
  </i></font><font color="#800000">$47</font><font color="#000080">/                   </font><font color="#008000"><i>{          inc       di        ; first char}
  </i></font><font color="#800000">$FC</font><font color="#000080">/                   </font><font color="#008000"><i>{          cld                 ; frontwards}
  </i></font><font color="#800000">$E3</font><font color="#000080">/</font><font color="#800000">$0A</font><font color="#000080">/               </font><font color="#008000"><i>{more:     jcxz      quit      ; no more}
  </i></font><font color="#800000">$F2</font><font color="#000080">/</font><font color="#800000">$AE</font><font color="#000080">/               </font><font color="#008000"><i>{repne     scasb               ; do search}
  </i></font><font color="#800000">$75</font><font color="#000080">/</font><font color="#800000">$06</font><font color="#000080">/               </font><font color="#008000"><i>{          jne       quit      ; not found}
  </i></font><font color="#800000">$43</font><font color="#000080">/                   </font><font color="#008000"><i>{          inc       bx        ;count it}
  </i></font><font color="#800000">$88</font><font color="#000080">/</font><font color="#800000">$65</font><font color="#000080">/</font><font color="#800000">$FF</font><font color="#000080">/           </font><font color="#008000"><i>{          mov       [di-1],ah ; replace}
  </i></font><font color="#800000">$EB</font><font color="#000080">/</font><font color="#800000">$F4</font><font color="#000080">/               </font><font color="#008000"><i>{          jmp       more      ; try for more}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$5E</font><font color="#000080">/</font><font color="#800000">$FE</font><font color="#000080">/           </font><font color="#008000"><i>{quit:     mov       [bp-2],bx ;get function result}
  </i></font><font color="#800000">$1F</font><font color="#000080">);                  </font><font color="#008000"><i>{          pop       ds}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>StripChar <font color="#008000"><i>{(var tst; strp: char)}</i></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
Inline</b></font><font color="#000080">(                  </font><font color="#008000"><i>{Assembly by Inline 02/23/88 21:28}
                         {;procedure stripchar(var tst; strp: char);}
  </i></font><font color="#800000">$1E</font><font color="#000080">/                   </font><font color="#008000"><i>{          PUSH      DS        ; save for exit}
  </i></font><font color="#800000">$C4</font><font color="#000080">/</font><font color="#800000">$BE</font><font color="#000080">/&gt;</font>TST<font color="#000080">/          </font><font color="#008000"><i>{          LES       DI,&gt;TST[BP] ; ES:DI to start}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$FB</font><font color="#000080">/               </font><font color="#008000"><i>{          MOV       BX,DI     ; save start}
  </i></font><font color="#800000">$8C</font><font color="#000080">/</font><font color="#800000">$C0</font><font color="#000080">/               </font><font color="#008000"><i>{          MOV       AX,ES     ; match segments}
  </i></font><font color="#800000">$8E</font><font color="#000080">/</font><font color="#800000">$D8</font><font color="#000080">/               </font><font color="#008000"><i>{          MOV       DS,AX     ;   (same)}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$86</font><font color="#000080">/&gt;</font>STRP<font color="#000080">/         </font><font color="#008000"><i>{          MOV       AL,&gt;STRP[BP] ; char to strip}
  </i></font><font color="#800000">$29</font><font color="#000080">/</font><font color="#800000">$C9</font><font color="#000080">/               </font><font color="#008000"><i>{          SUB       CX,CX     ; zero in CX}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$0D</font><font color="#000080">/               </font><font color="#008000"><i>{          MOV       CL,[DI]   ; length in CX}
  </i></font><font color="#800000">$E3</font><font color="#000080">/</font><font color="#800000">$16</font><font color="#000080">/               </font><font color="#008000"><i>{          JCXZ      QUIT      ; exit if null}
  </i></font><font color="#800000">$47</font><font color="#000080">/                   </font><font color="#008000"><i>{          INC       DI        ; first char}
  </i></font><font color="#800000">$FC</font><font color="#000080">/                   </font><font color="#008000"><i>{          CLD                 ; frontwards}
                         {MORE:}
  </i></font><font color="#800000">$F2</font><font color="#000080">/</font><font color="#800000">$AE</font><font color="#000080">/               </font><font color="#008000"><i>{REPNE     SCASB               ; do search}
  </i></font><font color="#800000">$75</font><font color="#000080">/</font><font color="#800000">$10</font><font color="#000080">/               </font><font color="#008000"><i>{          JNE       QUIT      ; not found}
  </i></font><font color="#800000">$57</font><font color="#000080">/                   </font><font color="#008000"><i>{          PUSH      DI        ; save locn}
  </i></font><font color="#800000">$51</font><font color="#000080">/                   </font><font color="#008000"><i>{          PUSH      CX        ; bytes to go}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$FE</font><font color="#000080">/               </font><font color="#008000"><i>{          MOV       SI,DI     ; char after}
  </i></font><font color="#800000">$4F</font><font color="#000080">/                   </font><font color="#008000"><i>{          DEC       DI        ; destination}
  </i></font><font color="#800000">$F2</font><font color="#000080">/</font><font color="#800000">$A4</font><font color="#000080">/               </font><font color="#008000"><i>{REP       MOVSB               ; delete}
  </i></font><font color="#800000">$FE</font><font color="#000080">/</font><font color="#800000">$0F</font><font color="#000080">/               </font><font color="#008000"><i>{          DEC       BY [BX]   ; decr length}
  </i></font><font color="#800000">$59</font><font color="#000080">/                   </font><font color="#008000"><i>{          POP       CX        ; bytes to go}
  </i></font><font color="#800000">$5F</font><font color="#000080">/                   </font><font color="#008000"><i>{          POP       DI        ; last locn}
  </i></font><font color="#800000">$4F</font><font color="#000080">/                   </font><font color="#008000"><i>{          DEC DI              ; char gone}
  </i></font><font color="#800000">$E3</font><font color="#000080">/</font><font color="#800000">$02</font><font color="#000080">/               </font><font color="#008000"><i>{          JCXZ      QUIT      ; no more}
  </i></font><font color="#800000">$EB</font><font color="#000080">/</font><font color="#800000">$EC</font><font color="#000080">/               </font><font color="#008000"><i>{          JMP       MORE      ; try again}
  </i></font><font color="#800000">$1F</font><font color="#000080">);                  </font><font color="#008000"><i>{QUIT:     POP       DS        ; restore for exit}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Count <font color="#008000"><i>{(var tst; srch:char):integer}</i></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
Inline</b></font><font color="#000080">(                  </font><font color="#008000"><i>{Assembly by Inline 02/23/88 21:28}
  </i></font><font color="#800000">$1E</font><font color="#000080">/                   </font><font color="#008000"><i>{          push      ds}
  </i></font><font color="#800000">$C4</font><font color="#000080">/</font><font color="#800000">$BE</font><font color="#000080">/&gt;</font>TST<font color="#000080">/          </font><font color="#008000"><i>{          les       di,&gt;tst[BP] ; ES:DI to start}
  </i></font><font color="#800000">$8C</font><font color="#000080">/</font><font color="#800000">$C0</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       ax,es}
  </i></font><font color="#800000">$8E</font><font color="#000080">/</font><font color="#800000">$D8</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       ds,ax}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$86</font><font color="#000080">/&gt;</font>SRCH<font color="#000080">/         </font><font color="#008000"><i>{          mov       al,&gt;srch[BP] ; search char}
  </i></font><font color="#800000">$31</font><font color="#000080">/</font><font color="#800000">$DB</font><font color="#000080">/               </font><font color="#008000"><i>{          xor       bx,bx     ;zero in bx -- for counting}
  </i></font><font color="#800000">$31</font><font color="#000080">/</font><font color="#800000">$C9</font><font color="#000080">/               </font><font color="#008000"><i>{          xor       cx,cx     ; zero in CX}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$0D</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       cl,[di]   ; length in CX}
  </i></font><font color="#800000">$E3</font><font color="#000080">/</font><font color="#800000">$0B</font><font color="#000080">/               </font><font color="#008000"><i>{          jcxz      quit      ; exit if null}
  </i></font><font color="#800000">$47</font><font color="#000080">/                   </font><font color="#008000"><i>{          inc       di        ; first char}
  </i></font><font color="#800000">$FC</font><font color="#000080">/                   </font><font color="#008000"><i>{          cld                 ; frontwards}
  </i></font><font color="#800000">$E3</font><font color="#000080">/</font><font color="#800000">$07</font><font color="#000080">/               </font><font color="#008000"><i>{more:     jcxz      quit      ; no more}
  </i></font><font color="#800000">$F2</font><font color="#000080">/</font><font color="#800000">$AE</font><font color="#000080">/               </font><font color="#008000"><i>{repne     scasb               ; do search}
  </i></font><font color="#800000">$75</font><font color="#000080">/</font><font color="#800000">$03</font><font color="#000080">/               </font><font color="#008000"><i>{          jne       quit      ; not found}
  </i></font><font color="#800000">$43</font><font color="#000080">/                   </font><font color="#008000"><i>{          inc       bx        ;count it}
  </i></font><font color="#800000">$EB</font><font color="#000080">/</font><font color="#800000">$F7</font><font color="#000080">/               </font><font color="#008000"><i>{          jmp       more      ; try for more}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$5E</font><font color="#000080">/</font><font color="#800000">$FE</font><font color="#000080">/           </font><font color="#008000"><i>{quit:     mov       [bp-2],bx ;get function result}
  </i></font><font color="#800000">$1F</font><font color="#000080">);                  </font><font color="#008000"><i>{          pop       ds}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>HowMany <font color="#008000"><i>{(var str1,str2):integer}</i></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
Inline</b></font><font color="#000080">(                  </font><font color="#008000"><i>{Assembly by Inline 02/23/88 21:28}
                         {;Function HowMany(var str1,str2):integer;}
                         {;str1 and str2 are strings of any type.}
                         {;function compares them character by}
                         {;character for up to min(length(str1),length(str2))}
                         {;characters.  Function is the number of consecutive}
                         {;characters (starting with string 1) for which the}
                         {;two strings are equal. e.g., if str1 is cats and}
                         {;str2 is catchup, function result is 3.  If str1 is}
                         {;cat and str2 is dog, function result is 0.}
  </i></font><font color="#800000">$1E</font><font color="#000080">/                   </font><font color="#008000"><i>{        push    ds}
  </i></font><font color="#800000">$C5</font><font color="#000080">/</font><font color="#800000">$B6</font><font color="#000080">/&gt;</font>STR1<font color="#000080">/         </font><font color="#008000"><i>{        lds     si, &gt;str1[bp]   ;addressing str1}
  </i></font><font color="#800000">$C4</font><font color="#000080">/</font><font color="#800000">$BE</font><font color="#000080">/&gt;</font>STR2<font color="#000080">/         </font><font color="#008000"><i>{        les     di, &gt;str2[bp]   ;addressing str2}
  </i></font><font color="#800000">$31</font><font color="#000080">/</font><font color="#800000">$C9</font><font color="#000080">/               </font><font color="#008000"><i>{        xor     cx,cx           ;zero cx}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$0D</font><font color="#000080">/               </font><font color="#008000"><i>{        mov     cl,[di]         ;get length str2}
  </i></font><font color="#800000">$3A</font><font color="#000080">/</font><font color="#800000">$0C</font><font color="#000080">/               </font><font color="#008000"><i>{        cmp     cl,[si]         ;compare lengths}
  </i></font><font color="#800000">$72</font><font color="#000080">/</font><font color="#800000">$02</font><font color="#000080">/               </font><font color="#008000"><i>{        jb      diless}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$0C</font><font color="#000080">/               </font><font color="#008000"><i>{siless: mov     cl, [si]}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$CB</font><font color="#000080">/               </font><font color="#008000"><i>{diless: mov     bx, cx          ;save length}
  </i></font><font color="#800000">$E3</font><font color="#000080">/</font><font color="#800000">$0A</font><font color="#000080">/               </font><font color="#008000"><i>{        jcxz    j2}
  </i></font><font color="#800000">$FC</font><font color="#000080">/                   </font><font color="#008000"><i>{        cld                     ;move forward}
  </i></font><font color="#800000">$46</font><font color="#000080">/                   </font><font color="#008000"><i>{        inc     si              ;to start of string}
  </i></font><font color="#800000">$47</font><font color="#000080">/                   </font><font color="#008000"><i>{        inc     di              ; &quot;}
  </i></font><font color="#800000">$F3</font><font color="#000080">/</font><font color="#800000">$A6</font><font color="#000080">/               </font><font color="#008000"><i>{repe    cmpsb                   ;string compare}
  </i></font><font color="#800000">$74</font><font color="#000080">/</font><font color="#800000">$01</font><font color="#000080">/               </font><font color="#008000"><i>{        je      j1              ;equal for full length}
  </i></font><font color="#800000">$41</font><font color="#000080">/                   </font><font color="#008000"><i>{        inc     cx              ;correct, last byte ne}
  </i></font><font color="#800000">$29</font><font color="#000080">/</font><font color="#800000">$CB</font><font color="#000080">/               </font><font color="#008000"><i>{j1:     sub     bx,cx           ;# matching bytes}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$5E</font><font color="#000080">/</font><font color="#800000">$FE</font><font color="#000080">/           </font><font color="#008000"><i>{j2:     mov     [bp-2],bx       ;function result}
  </i></font><font color="#800000">$1F</font><font color="#000080">);                  </font><font color="#008000"><i>{        pop     ds}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Equal_Structures <font color="#008000"><i>{(var a,b;size:integer):boolean}</i></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
Inline</b></font><font color="#000080">(                  </font><font color="#008000"><i>{Assembly by Inline 02/23/88 21:28}
  </i></font><font color="#800000">$1E</font><font color="#000080">/                   </font><font color="#008000"><i>{       push   ds}
  </i></font><font color="#800000">$C6</font><font color="#000080">/</font><font color="#800000">$46</font><font color="#000080">/</font><font color="#800000">$FF</font><font color="#000080">/</font><font color="#800000">$01</font><font color="#000080">/       </font><font color="#008000"><i>{       mov    by [bp-1],1  ;set up a true result}
  </i></font><font color="#800000">$C4</font><font color="#000080">/</font><font color="#800000">$BE</font><font color="#000080">/&gt;</font>A<font color="#000080">/            </font><font color="#008000"><i>{       les    di,&gt;a[bp]     ;get first structure, es:di}
  </i></font><font color="#800000">$C5</font><font color="#000080">/</font><font color="#800000">$B6</font><font color="#000080">/&gt;</font>B<font color="#000080">/            </font><font color="#008000"><i>{       lds    si,&gt;b[bp]     ;get second structure, ds:si}
  </i></font><font color="#800000">$8B</font><font color="#000080">/</font><font color="#800000">$8E</font><font color="#000080">/&gt;</font>SIZE<font color="#000080">/         </font><font color="#008000"><i>{       mov    cx,&gt;size[bp]  ;get length of structures}
  </i></font><font color="#800000">$FC</font><font color="#000080">/                   </font><font color="#008000"><i>{       cld}
  </i></font><font color="#800000">$F3</font><font color="#000080">/</font><font color="#800000">$A6</font><font color="#000080">/               </font><font color="#008000"><i>{repe   cmpsb                ;compare, byte by byte}
  </i></font><font color="#800000">$74</font><font color="#000080">/</font><font color="#800000">$04</font><font color="#000080">/               </font><font color="#008000"><i>{       je     quit          ;if still equal, done}
  </i></font><font color="#800000">$C6</font><font color="#000080">/</font><font color="#800000">$46</font><font color="#000080">/</font><font color="#800000">$FF</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/       </font><font color="#008000"><i>{       mov    by [bp-1],0  ;set result for unequal}
  </i></font><font color="#800000">$1F</font><font color="#000080">);                  </font><font color="#008000"><i>{quit:  pop    ds}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>space <font color="#008000"><i>{(N:integer; C:char):string}</i></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
Inline</b></font><font color="#000080">(                  </font><font color="#008000"><i>{Assembly by Inline 02/23/88 21:28}
  </i></font><font color="#800000">$8B</font><font color="#000080">/</font><font color="#800000">$8E</font><font color="#000080">/&gt;</font>N<font color="#000080">/            </font><font color="#008000"><i>{      mov     cx,&gt;N[bp]}
  </i></font><font color="#800000">$C4</font><font color="#000080">/</font><font color="#800000">$7E</font><font color="#000080">/</font><font color="#800000">$0A</font><font color="#000080">/           </font><font color="#008000"><i>{      les     di, [bp+10]}
  </i></font><font color="#800000">$26</font><font color="#000080">/</font><font color="#800000">$88</font><font color="#000080">/</font><font color="#800000">$0D</font><font color="#000080">/           </font><font color="#008000"><i>{  es: mov     [di],cl}
  </i></font><font color="#800000">$31</font><font color="#000080">/</font><font color="#800000">$C0</font><font color="#000080">/               </font><font color="#008000"><i>{      xor     ax,ax}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$46</font><font color="#000080">/&lt;</font>C<font color="#000080">/            </font><font color="#008000"><i>{      mov     al,&lt;C[bp]}
  </i></font><font color="#800000">$47</font><font color="#000080">/                   </font><font color="#008000"><i>{      inc     di}
  </i></font><font color="#800000">$FC</font><font color="#000080">/                   </font><font color="#008000"><i>{      cld}
  </i></font><font color="#800000">$F2</font><font color="#000080">/</font><font color="#800000">$AA</font><font color="#000080">);              </font><font color="#008000"><i>{    rep  stosb}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>blanker <font color="#008000"><i>{(var tline:string)}</i></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
Inline</b></font><font color="#000080">(                  </font><font color="#008000"><i>{Assembly by Inline 02/23/88 21:28}
  </i></font><font color="#800000">$C4</font><font color="#000080">/</font><font color="#800000">$BE</font><font color="#000080">/&gt;</font>TLINE<font color="#000080">/        </font><font color="#008000"><i>{          les       di,&gt;tline[BP]}
  </i></font><font color="#800000">$31</font><font color="#000080">/</font><font color="#800000">$C9</font><font color="#000080">/               </font><font color="#008000"><i>{          xor       cx,cx}
  </i></font><font color="#800000">$26</font><font color="#000080">/</font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$0D</font><font color="#000080">/           </font><font color="#008000"><i>{ es:      mov       cl,[di]      ;length to cl}
  </i></font><font color="#800000">$E3</font><font color="#000080">/</font><font color="#800000">$0E</font><font color="#000080">/               </font><font color="#008000"><i>{          jcxz      quit         ; exit if null}
  </i></font><font color="#800000">$B0</font><font color="#000080">/</font><font color="#800000">$20</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       al,32        ; move space to al}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$FB</font><font color="#000080">/               </font><font color="#008000"><i>{          mov       bx,di        ;save tline start}
  </i></font><font color="#800000">$47</font><font color="#000080">/                   </font><font color="#008000"><i>{          inc       di           ; to first char}
  </i></font><font color="#800000">$FC</font><font color="#000080">/                   </font><font color="#008000"><i>{          cld                    ; frontwards}
  </i></font><font color="#800000">$F3</font><font color="#000080">/</font><font color="#800000">$AE</font><font color="#000080">/               </font><font color="#008000"><i>{repe      scasb                  ; repeat while space}
  </i></font><font color="#800000">$75</font><font color="#000080">/</font><font color="#800000">$04</font><font color="#000080">/               </font><font color="#008000"><i>{          jne       quit         ; exit if a non-space found}
  </i></font><font color="#800000">$26</font><font color="#000080">/</font><font color="#800000">$C6</font><font color="#000080">/</font><font color="#800000">$07</font><font color="#000080">/</font><font color="#800000">$00        </font><font color="#008000"><i>{ es:      mov      by [bx],0     ; null string if all spaces}
 </i></font><font color="#000080">);                      </font><font color="#008000"><i>{quit:}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Break <font color="#000080">(</font>Search<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">; </font><font color="#FF0000"><b>var </b></font>tline<font color="#000080">): </font>byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
Inline</b></font><font color="#000080">(                  </font><font color="#008000"><i>{Assembly by Inline 02/23/88 21:28}
  </i></font><font color="#800000">$8D</font><font color="#000080">/</font><font color="#800000">$B6</font><font color="#000080">/&gt;</font>SEARCH<font color="#000080">/       </font><font color="#008000"><i>{          lea  si,&gt;search[bp]}
  </i></font><font color="#800000">$31</font><font color="#000080">/</font><font color="#800000">$C9</font><font color="#000080">/               </font><font color="#008000"><i>{          xor  cx,cx}
  </i></font><font color="#800000">$36</font><font color="#000080">/</font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$0C</font><font color="#000080">/           </font><font color="#008000"><i>{       ss:mov  cl, [si]            ;no. of search items}
  </i></font><font color="#800000">$C4</font><font color="#000080">/</font><font color="#800000">$BE</font><font color="#000080">/&gt;</font>TLINE<font color="#000080">/        </font><font color="#008000"><i>{          les  di, &gt;tline[bp]}
  </i></font><font color="#800000">$31</font><font color="#000080">/</font><font color="#800000">$DB</font><font color="#000080">/               </font><font color="#008000"><i>{          xor  bx,bx}
  </i></font><font color="#800000">$26</font><font color="#000080">/</font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$1D</font><font color="#000080">/           </font><font color="#008000"><i>{     es:  mov  bl, [di]            ;save length tline}
  </i></font><font color="#800000">$47</font><font color="#000080">/                   </font><font color="#008000"><i>{          inc  di                  ;point to tline start}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$FA</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  dx,di               ;save tline start}
  </i></font><font color="#800000">$B4</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  ah,0                ;default function result}
  </i></font><font color="#800000">$E3</font><font color="#000080">/</font><font color="#800000">$2A</font><font color="#000080">/               </font><font color="#008000"><i>{          jcxz done}
  </i></font><font color="#800000">$80</font><font color="#000080">/</font><font color="#800000">$FB</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/           </font><font color="#008000"><i>{          cmp  bl,0}
  </i></font><font color="#800000">$74</font><font color="#000080">/</font><font color="#800000">$25</font><font color="#000080">/               </font><font color="#008000"><i>{          je   done}
  </i></font><font color="#800000">$FC</font><font color="#000080">/                   </font><font color="#008000"><i>{          cld}
  </i></font><font color="#800000">$80</font><font color="#000080">/</font><font color="#800000">$FC</font><font color="#000080">/</font><font color="#800000">$01</font><font color="#000080">/           </font><font color="#008000"><i>{ again:   cmp  ah,1                ;done if found at tline[1]}
  </i></font><font color="#800000">$74</font><font color="#000080">/</font><font color="#800000">$1F</font><font color="#000080">/               </font><font color="#008000"><i>{          je   done}
  </i></font><font color="#800000">$46</font><font color="#000080">/                   </font><font color="#008000"><i>{          inc  si                  ;next item in search}
  </i></font><font color="#800000">$36</font><font color="#000080">/</font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$04</font><font color="#000080">/           </font><font color="#008000"><i>{      ss: mov  al,[si]             ;load for search}
  </i></font><font color="#800000">$51</font><font color="#000080">/                   </font><font color="#008000"><i>{          push cx                  ;save loop count}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$D9</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  cx,bx               ;string length}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$D7</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  di,dx               ;byte 1 of tline}
  </i></font><font color="#800000">$F2</font><font color="#000080">/</font><font color="#800000">$AE</font><font color="#000080">/               </font><font color="#008000"><i>{  repne   scasb                    ;search for item}
  </i></font><font color="#800000">$75</font><font color="#000080">/</font><font color="#800000">$0F</font><font color="#000080">/               </font><font color="#008000"><i>{          jne recycle              ; not found.}
  </i></font><font color="#800000">$F7</font><font color="#000080">/</font><font color="#800000">$D9</font><font color="#000080">/               </font><font color="#008000"><i>{          neg  cx                  ; found. find where}
  </i></font><font color="#800000">$01</font><font color="#000080">/</font><font color="#800000">$D9</font><font color="#000080">/               </font><font color="#008000"><i>{          add  cx,bx               ; position in tline}
  </i></font><font color="#800000">$80</font><font color="#000080">/</font><font color="#800000">$FC</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/           </font><font color="#008000"><i>{          cmp  ah,0}
  </i></font><font color="#800000">$74</font><font color="#000080">/</font><font color="#800000">$04</font><font color="#000080">/               </font><font color="#008000"><i>{          je   fix}
  </i></font><font color="#800000">$38</font><font color="#000080">/</font><font color="#800000">$E1</font><font color="#000080">/               </font><font color="#008000"><i>{          cmp  cl,ah               ;check against f. result}
  </i></font><font color="#800000">$77</font><font color="#000080">/</font><font color="#800000">$02</font><font color="#000080">/               </font><font color="#008000"><i>{          ja   recycle             ;if after, leave old result}
  </i></font><font color="#800000">$88</font><font color="#000080">/</font><font color="#800000">$CC</font><font color="#000080">/               </font><font color="#008000"><i>{ fix:     mov  ah,cl               ;save new result}
  </i></font><font color="#800000">$59</font><font color="#000080">/                   </font><font color="#008000"><i>{ recycle: pop  cx                  ; restore loop counter}
  </i></font><font color="#800000">$E2</font><font color="#000080">/</font><font color="#800000">$DC</font><font color="#000080">/               </font><font color="#008000"><i>{          loop again}
  </i></font><font color="#800000">$88</font><font color="#000080">/</font><font color="#800000">$66</font><font color="#000080">/</font><font color="#800000">$FF</font><font color="#000080">);          </font><font color="#008000"><i>{ done:    mov [bp-1], ah           ;store result}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Break2 <font color="#000080">(</font>search<font color="#000080">,</font>tline<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">):</font>byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
Inline</b></font><font color="#000080">(                  </font><font color="#008000"><i>{Assembly by Inline 02/23/88 21:28}
  </i></font><font color="#800000">$1E</font><font color="#000080">/                   </font><font color="#008000"><i>{          push ds}
  </i></font><font color="#800000">$8C</font><font color="#000080">/</font><font color="#800000">$D3</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  bx, ss}
  </i></font><font color="#800000">$8E</font><font color="#000080">/</font><font color="#800000">$C3</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  es, bx}
  </i></font><font color="#800000">$8E</font><font color="#000080">/</font><font color="#800000">$DB</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  ds, bx}
  </i></font><font color="#800000">$8D</font><font color="#000080">/</font><font color="#800000">$B6</font><font color="#000080">/&gt;</font>TLINE<font color="#000080">/        </font><font color="#008000"><i>{          lea  si, &gt;tline[bp]}
  </i></font><font color="#800000">$31</font><font color="#000080">/</font><font color="#800000">$C9</font><font color="#000080">/               </font><font color="#008000"><i>{          xor  cx,cx}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$0C</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  cl, [si]            ;length tline in cl for loop}
  </i></font><font color="#800000">$E3</font><font color="#000080">/</font><font color="#800000">$22</font><font color="#000080">/               </font><font color="#008000"><i>{          jcxz L1a}
  </i></font><font color="#800000">$88</font><font color="#000080">/</font><font color="#800000">$CB</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  bl, cl              ;and save for later}
  </i></font><font color="#800000">$8D</font><font color="#000080">/</font><font color="#800000">$BE</font><font color="#000080">/&gt;</font>SEARCH<font color="#000080">/       </font><font color="#008000"><i>{          lea  di, &gt;search[bp]}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$25</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  ah, [di]            ;length search stored in ah}
  </i></font><font color="#800000">$80</font><font color="#000080">/</font><font color="#800000">$FC</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/           </font><font color="#008000"><i>{          cmp  ah,0}
  </i></font><font color="#800000">$74</font><font color="#000080">/</font><font color="#800000">$15</font><font color="#000080">/               </font><font color="#008000"><i>{          je   L1a}
  </i></font><font color="#800000">$47</font><font color="#000080">/                   </font><font color="#008000"><i>{          inc  di                  ;point to first char in search}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$FA</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  dx,di               ;and save it}
  </i></font><font color="#800000">$FC</font><font color="#000080">/                   </font><font color="#008000"><i>{          cld}
  </i></font><font color="#800000">$46</font><font color="#000080">/                   </font><font color="#008000"><i>{L1:       inc  si                  ;begin loop. Move through tline}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$D7</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  di,dx               ;start of search}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$04</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  al, [si]            ;tline char to set up search}
  </i></font><font color="#800000">$88</font><font color="#000080">/</font><font color="#800000">$CF</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  bh,cl               ;store loop index}
  </i></font><font color="#800000">$88</font><font color="#000080">/</font><font color="#800000">$E1</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  cl,ah               ;length search controls search}
  </i></font><font color="#800000">$F2</font><font color="#000080">/</font><font color="#800000">$AE</font><font color="#000080">/               </font><font color="#008000"><i>{repne     scasb}
  </i></font><font color="#800000">$88</font><font color="#000080">/</font><font color="#800000">$F9</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  cl,bh               ;restore loop index}
  </i></font><font color="#800000">$74</font><font color="#000080">/</font><font color="#800000">$09</font><font color="#000080">/               </font><font color="#008000"><i>{          je   L2                  ;found the char in search}
  </i></font><font color="#800000">$E2</font><font color="#000080">/</font><font color="#800000">$EF</font><font color="#000080">/               </font><font color="#008000"><i>{          loop L1}
  </i></font><font color="#800000">$C6</font><font color="#000080">/</font><font color="#800000">$46</font><font color="#000080">/</font><font color="#800000">$FF</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/       </font><font color="#008000"><i>{L1a:      mov  by [bp-1],0         ;if here, no match}
  </i></font><font color="#800000">$E9</font><font color="#000080">/</font><font color="#800000">$07</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/           </font><font color="#008000"><i>{          jmp  L3}
  </i></font><font color="#800000">$28</font><font color="#000080">/</font><font color="#800000">$FB</font><font color="#000080">/               </font><font color="#008000"><i>{L2:       sub  bl,bh}
  </i></font><font color="#800000">$FE</font><font color="#000080">/</font><font color="#800000">$C3</font><font color="#000080">/               </font><font color="#008000"><i>{          inc  bl}
  </i></font><font color="#800000">$88</font><font color="#000080">/</font><font color="#800000">$5E</font><font color="#000080">/</font><font color="#800000">$FF</font><font color="#000080">/           </font><font color="#008000"><i>{          mov  [bp-1],bl}
  </i></font><font color="#800000">$1F</font><font color="#000080">);                  </font><font color="#008000"><i>{L3:       pop  ds}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Span<font color="#000080">(</font>search<font color="#000080">,</font>tline<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">):</font>byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
Inline</b></font><font color="#000080">(                  </font><font color="#008000"><i>{Assembly by Inline 02/23/88 21:28}
  </i></font><font color="#800000">$1E</font><font color="#000080">/                   </font><font color="#008000"><i>{          push ds}
  </i></font><font color="#800000">$8C</font><font color="#000080">/</font><font color="#800000">$D3</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  bx, ss}
  </i></font><font color="#800000">$8E</font><font color="#000080">/</font><font color="#800000">$C3</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  es, bx}
  </i></font><font color="#800000">$8E</font><font color="#000080">/</font><font color="#800000">$DB</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  ds, bx}
  </i></font><font color="#800000">$8D</font><font color="#000080">/</font><font color="#800000">$B6</font><font color="#000080">/&gt;</font>TLINE<font color="#000080">/        </font><font color="#008000"><i>{          lea  si, &gt;tline[bp]}
  </i></font><font color="#800000">$31</font><font color="#000080">/</font><font color="#800000">$C9</font><font color="#000080">/               </font><font color="#008000"><i>{          xor  cx,cx}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$0C</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  cl, [si]            ;length tline in cl for loop}
  </i></font><font color="#800000">$88</font><font color="#000080">/</font><font color="#800000">$CB</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  bl, cl              ;and save for later}
  </i></font><font color="#800000">$E3</font><font color="#000080">/</font><font color="#800000">$24</font><font color="#000080">/               </font><font color="#008000"><i>{          jcxz L4}
  </i></font><font color="#800000">$8D</font><font color="#000080">/</font><font color="#800000">$BE</font><font color="#000080">/&gt;</font>SEARCH<font color="#000080">/       </font><font color="#008000"><i>{          lea  di, &gt;search[bp]}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$25</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  ah, [di]            ;length search stored in ah}
  </i></font><font color="#800000">$47</font><font color="#000080">/                   </font><font color="#008000"><i>{          inc  di                  ;point to first char in search}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$FA</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  dx,di               ;and save it}
  </i></font><font color="#800000">$FC</font><font color="#000080">/                   </font><font color="#008000"><i>{          cld}
  </i></font><font color="#800000">$46</font><font color="#000080">/                   </font><font color="#008000"><i>{L1:       inc  si                  ;begin loop. Move through tline}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$D7</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  di,dx               ;start of search}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$04</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  al, [si]            ;tline char to set up search}
  </i></font><font color="#800000">$88</font><font color="#000080">/</font><font color="#800000">$CF</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  bh,cl               ;store loop index}
  </i></font><font color="#800000">$88</font><font color="#000080">/</font><font color="#800000">$E1</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  cl,ah               ;length search controls search}
  </i></font><font color="#800000">$F2</font><font color="#000080">/</font><font color="#800000">$AE</font><font color="#000080">/               </font><font color="#008000"><i>{repne     scasb}
  </i></font><font color="#800000">$88</font><font color="#000080">/</font><font color="#800000">$F9</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  cl,bh               ;restore loop index}
  </i></font><font color="#800000">$75</font><font color="#000080">/</font><font color="#800000">$08</font><font color="#000080">/               </font><font color="#008000"><i>{          jne  L2                  ;found char not in search}
  </i></font><font color="#800000">$E2</font><font color="#000080">/</font><font color="#800000">$EF</font><font color="#000080">/               </font><font color="#008000"><i>{          loop L1}
  </i></font><font color="#800000">$88</font><font color="#000080">/</font><font color="#800000">$5E</font><font color="#000080">/</font><font color="#800000">$FF</font><font color="#000080">/           </font><font color="#008000"><i>{          mov  by [bp-1],bl        ;if here, all in search}
  </i></font><font color="#800000">$E9</font><font color="#000080">/</font><font color="#800000">$06</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/           </font><font color="#008000"><i>{          jmp  L3}
  </i></font><font color="#800000">$28</font><font color="#000080">/</font><font color="#800000">$FB</font><font color="#000080">/               </font><font color="#008000"><i>{L2:       sub  bl,bh}
  </i></font><font color="#800000">$90</font><font color="#000080">/                   </font><font color="#008000"><i>{          nop}
  </i></font><font color="#800000">$88</font><font color="#000080">/</font><font color="#800000">$5E</font><font color="#000080">/</font><font color="#800000">$FF</font><font color="#000080">/           </font><font color="#008000"><i>{L4:       mov  [bp-1],bl}
  </i></font><font color="#800000">$1F                    </font><font color="#008000"><i>{L3:       pop  ds}
 </i></font><font color="#000080">);                      </font><font color="#008000"><i>{end;}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>LastPosC <font color="#000080">(</font>find<font color="#000080">: </font>char<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>tst<font color="#000080">): </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
Inline</b></font><font color="#000080">(                  </font><font color="#008000"><i>{Assembly by Inline 02/23/88 21:28}
  </i></font><font color="#800000">$C4</font><font color="#000080">/</font><font color="#800000">$BE</font><font color="#000080">/&gt;</font>TST<font color="#000080">/          </font><font color="#008000"><i>{          les       di,&gt;tst[bp]    ;get string length}
  </i></font><font color="#800000">$C7</font><font color="#000080">/</font><font color="#800000">$46</font><font color="#000080">/</font><font color="#800000">$FE</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/   </font><font color="#008000"><i>{          mov       wo [bp-2],0    ;result if nothing found or}
                         {                                   ; length 0}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$86</font><font color="#000080">/&gt;</font>FIND<font color="#000080">/         </font><font color="#008000"><i>{          mov       al,&gt;find[bp]   ;get the character}
  </i></font><font color="#800000">$31</font><font color="#000080">/</font><font color="#800000">$C9</font><font color="#000080">/               </font><font color="#008000"><i>{          xor       cx,cx}
  </i></font><font color="#800000">$26</font><font color="#000080">/</font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$0D</font><font color="#000080">/           </font><font color="#008000"><i>{      es: mov       cl,[di]        ;get length}
  </i></font><font color="#800000">$E3</font><font color="#000080">/</font><font color="#800000">$0B</font><font color="#000080">/               </font><font color="#008000"><i>{          jcxz      quit           ;stop if zero length}
  </i></font><font color="#800000">$01</font><font color="#000080">/</font><font color="#800000">$CF</font><font color="#000080">/               </font><font color="#008000"><i>{          add       di, cx}
  </i></font><font color="#800000">$FD</font><font color="#000080">/                   </font><font color="#008000"><i>{          std                      ;move backward}
  </i></font><font color="#800000">$F2</font><font color="#000080">/</font><font color="#800000">$AE</font><font color="#000080">/               </font><font color="#008000"><i>{repne     scasb}
  </i></font><font color="#800000">$75</font><font color="#000080">/</font><font color="#800000">$04</font><font color="#000080">/               </font><font color="#008000"><i>{          jne       quit           ;stop if not found}
  </i></font><font color="#800000">$41</font><font color="#000080">/                   </font><font color="#008000"><i>{          inc       cx}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$4E</font><font color="#000080">/</font><font color="#800000">$FE            </font><font color="#008000"><i>{          mov       [bp-2],cx      ;save result}
 </i></font><font color="#000080">);                      </font><font color="#008000"><i>{quit:}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>WildPosAfter<font color="#000080">(</font>find<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">; </font><font color="#FF0000"><b>var </b></font>tline <font color="#000080">; </font>after<font color="#000080">:</font>integer<font color="#000080">):</font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
Inline</b></font><font color="#000080">(                  </font><font color="#008000"><i>{Assembly by Inline 02/23/88 21:28}
                         {;accepts as a wildcard in find ASCII 255}
  </i></font><font color="#800000">$1E</font><font color="#000080">/                   </font><font color="#008000"><i>{          push ds}
  </i></font><font color="#800000">$C4</font><font color="#000080">/</font><font color="#800000">$BE</font><font color="#000080">/&gt;</font>TLINE<font color="#000080">/        </font><font color="#008000"><i>{          les  di, &gt;tline[bp]}
  </i></font><font color="#800000">$8B</font><font color="#000080">/</font><font color="#800000">$9E</font><font color="#000080">/&gt;</font>AFTER<font color="#000080">/        </font><font color="#008000"><i>{          mov  bx, &gt;after[bp]      ;in bl}
  </i></font><font color="#800000">$30</font><font color="#000080">/</font><font color="#800000">$FF</font><font color="#000080">/               </font><font color="#008000"><i>{          xor  bh,bh}
  </i></font><font color="#800000">$8D</font><font color="#000080">/</font><font color="#800000">$B6</font><font color="#000080">/&gt;</font>FIND<font color="#000080">/         </font><font color="#008000"><i>{          lea  si, &gt;find[bp]}
  </i></font><font color="#800000">$C7</font><font color="#000080">/</font><font color="#800000">$46</font><font color="#000080">/</font><font color="#800000">$FE</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/   </font><font color="#008000"><i>{          mov  wo [bp-2], 0        ;initialize for not found result}
  </i></font><font color="#800000">$16</font><font color="#000080">/                   </font><font color="#008000"><i>{          push ss}
  </i></font><font color="#800000">$1F</font><font color="#000080">/                   </font><font color="#008000"><i>{          pop  ds                  ;because find in ss}
  </i></font><font color="#800000">$26</font><font color="#000080">/</font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$05</font><font color="#000080">/           </font><font color="#008000"><i>{      es: mov  al, [di]            ;length of tline in al, to move to bh}
  </i></font><font color="#800000">$3C</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/               </font><font color="#008000"><i>{          cmp  al,0}
  </i></font><font color="#800000">$74</font><font color="#000080">/</font><font color="#800000">$40</font><font color="#000080">/               </font><font color="#008000"><i>{          je   L5}
  </i></font><font color="#800000">$38</font><font color="#000080">/</font><font color="#800000">$C3</font><font color="#000080">/               </font><font color="#008000"><i>{          cmp  bl,al}
  </i></font><font color="#800000">$77</font><font color="#000080">/</font><font color="#800000">$3C</font><font color="#000080">/               </font><font color="#008000"><i>{          ja   L5}
  </i></font><font color="#800000">$28</font><font color="#000080">/</font><font color="#800000">$D8</font><font color="#000080">/               </font><font color="#008000"><i>{          sub  al,bl               ;adjust length for starting point}
  </i></font><font color="#800000">$01</font><font color="#000080">/</font><font color="#800000">$DF</font><font color="#000080">/               </font><font color="#008000"><i>{          add  di, bx              ;adjust tline start for after}
  </i></font><font color="#800000">$88</font><font color="#000080">/</font><font color="#800000">$C7</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  bh,al}
  </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$24</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  ah, [si]            ;length of find}
  </i></font><font color="#800000">$80</font><font color="#000080">/</font><font color="#800000">$FC</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/           </font><font color="#008000"><i>{          cmp  ah, 0}
  </i></font><font color="#800000">$74</font><font color="#000080">/</font><font color="#800000">$2F</font><font color="#000080">/               </font><font color="#008000"><i>{          je   L5}
  </i></font><font color="#800000">$46</font><font color="#000080">/                   </font><font color="#008000"><i>{          inc  si                  ;point to start of find}
  </i></font><font color="#800000">$56</font><font color="#000080">/                   </font><font color="#008000"><i>{          push si                  ;save start of find}
  </i></font><font color="#800000">$31</font><font color="#000080">/</font><font color="#800000">$C9</font><font color="#000080">/               </font><font color="#008000"><i>{          xor  cx,cx}
  </i></font><font color="#800000">$47</font><font color="#000080">/                   </font><font color="#008000"><i>{          inc  di                  ;to start of tline}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$FA</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  dx, di              ;save start of tline}
  </i></font><font color="#800000">$FC</font><font color="#000080">/                   </font><font color="#008000"><i>{          cld}
  </i></font><font color="#800000">$38</font><font color="#000080">/</font><font color="#800000">$FC</font><font color="#000080">/               </font><font color="#008000"><i>{L1:       cmp  ah, bh              ;is enough left for match?}
  </i></font><font color="#800000">$77</font><font color="#000080">/</font><font color="#800000">$22</font><font color="#000080">/               </font><font color="#008000"><i>{          ja   L4                  ;not enough, so jump out}
  </i></font><font color="#800000">$5E</font><font color="#000080">/                   </font><font color="#008000"><i>{          pop  si                  ;restore start of find}
  </i></font><font color="#800000">$56</font><font color="#000080">/                   </font><font color="#008000"><i>{          push si                  ;and save it again}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$D7</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  di,dx               ;get start of remaining tline}
  </i></font><font color="#800000">$88</font><font color="#000080">/</font><font color="#800000">$E1</font><font color="#000080">/               </font><font color="#008000"><i>{          mov  cl,ah               ;set loop for length of find}
  </i></font><font color="#800000">$AC</font><font color="#000080">/                   </font><font color="#008000"><i>{L2:       lodsb}
  </i></font><font color="#800000">$3C</font><font color="#000080">/</font><font color="#800000">$FF</font><font color="#000080">/               </font><font color="#008000"><i>{          cmp  al, 255             ;check for wildcard}
  </i></font><font color="#800000">$74</font><font color="#000080">/</font><font color="#800000">$0D</font><font color="#000080">/               </font><font color="#008000"><i>{          je   L3                  ; recycle if wild}
  </i></font><font color="#800000">$26</font><font color="#000080">/</font><font color="#800000">$3A</font><font color="#000080">/</font><font color="#800000">$05</font><font color="#000080">/           </font><font color="#008000"><i>{      es: cmp al, [di]             ; not wild, check against tline}
  </i></font><font color="#800000">$74</font><font color="#000080">/</font><font color="#800000">$08</font><font color="#000080">/               </font><font color="#008000"><i>{          je   L3                  ;recycle if match}
                         {;gets here if no match}
  </i></font><font color="#800000">$42</font><font color="#000080">/                   </font><font color="#008000"><i>{          inc  dx                  ;new starting point for tline}
  </i></font><font color="#800000">$FE</font><font color="#000080">/</font><font color="#800000">$C3</font><font color="#000080">/               </font><font color="#008000"><i>{          inc  bl                  ;count up in tline}
  </i></font><font color="#800000">$FE</font><font color="#000080">/</font><font color="#800000">$CF</font><font color="#000080">/               </font><font color="#008000"><i>{          dec  bh                  ;shorten tline}
  </i></font><font color="#800000">$EB</font><font color="#000080">/</font><font color="#800000">$E5</font><font color="#000080">/               </font><font color="#008000"><i>{          jmp  L1}
  </i></font><font color="#800000">$90</font><font color="#000080">/                   </font><font color="#008000"><i>{          nop}
  </i></font><font color="#800000">$47</font><font color="#000080">/                   </font><font color="#008000"><i>{ L3:      inc  di                  ;move to next character to search}
  </i></font><font color="#800000">$E2</font><font color="#000080">/</font><font color="#800000">$EB</font><font color="#000080">/               </font><font color="#008000"><i>{          LOOP L2                  ;and recycle to check next in find}
                         {                                   ;here only if everything matches}
  </i></font><font color="#800000">$FE</font><font color="#000080">/</font><font color="#800000">$C3</font><font color="#000080">/               </font><font color="#008000"><i>{          inc  bl                  ;to get right match start}
  </i></font><font color="#800000">$30</font><font color="#000080">/</font><font color="#800000">$FF</font><font color="#000080">/               </font><font color="#008000"><i>{          xor  bh,bh}
  </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$5E</font><font color="#000080">/</font><font color="#800000">$FE</font><font color="#000080">/           </font><font color="#008000"><i>{          mov  [bp-2],bx           ;function result}
  </i></font><font color="#800000">$5E</font><font color="#000080">/                   </font><font color="#008000"><i>{L4:       pop  si                  ;only to clear}
  </i></font><font color="#800000">$1F</font><font color="#000080">);                  </font><font color="#008000"><i>{L5:       pop  ds                  ;to restore}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to STRINGS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0105.PAS">Original</a><b>]</b></p></body>
</html>
