<html>
<head><title> "Misc. String Functions" by J. TAL</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to STRINGS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0071.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>Unit </b></font>Funcs<font color="#000080">;

</font><font color="#008000"><i>(* previously  All_Func.Inc *)

(*    05/02/1988     J Tal
                     Rollins Medical/Dental Systems
        
                     Public Domain
*)


</i></font><font color="#FF0000"><b>Interface
  Uses </b></font>Dos<font color="#000080">,</font>Crt<font color="#000080">;


  </font><font color="#FF0000"><b>TYPE
    </b></font>st255 <font color="#000080">= </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">255</font><font color="#000080">];

  </font><font color="#FF0000"><b>Function </b></font>Word_Int<font color="#000080">(</font>r<font color="#000080">: </font>REAL<font color="#000080">) : </font>INTEGER<font color="#000080">;

  </font><font color="#FF0000"><b>Function </b></font>Word_Real<font color="#000080">(</font>i<font color="#000080">: </font>INTEGER<font color="#000080">) : </font>REAL<font color="#000080">;

  </font><font color="#FF0000"><b>Function </b></font>Real_Mod<font color="#000080">(</font>a<font color="#000080">,</font>b<font color="#000080">: </font>REAL<font color="#000080">) : </font>REAL<font color="#000080">;
    </font><font color="#008000"><i>(*  modulus for two real numbers  

        Real_Mod(15.0,2.0)  =  1.0

    *)

  </i></font><font color="#FF0000"><b>function </b></font>lowcase<font color="#000080">(</font>c <font color="#000080">: </font>char<font color="#000080">) : </font>char<font color="#000080">;
    </font><font color="#008000"><i>(*  opposite of upcase 

        lowcase('A') = 'a'
        lowcase('b') = 'b'
        
    *)

  </i></font><font color="#FF0000"><b>function </b></font>f_buf_conv<font color="#000080">( </font>x <font color="#000080">: </font>st255<font color="#000080">) : </font>st255<font color="#000080">;
    </font><font color="#008000"><i>(*  convert a file buffer into a string *)

  </i></font><font color="#FF0000"><b>procedure </b></font>prog_chain<font color="#000080">(</font>prog <font color="#000080">: </font>st255<font color="#000080">); </font><font color="#008000"><i>(* dummy *)

  </i></font><font color="#FF0000"><b>function </b></font>spaces<font color="#000080">(</font>num <font color="#000080">: </font>integer<font color="#000080">) : </font>st255<font color="#000080">;
    </font><font color="#008000"><i>(*  like basic space$ 

        spaces(10) = '          '

    *)

  </i></font><font color="#FF0000"><b>function </b></font>bakfile<font color="#000080">( </font>name <font color="#000080">: </font>st255<font color="#000080">) : </font>st255<font color="#000080">;
    </font><font color="#008000"><i>(*  takes filename and returns .BAK version of that name 

        bakfile('test.dat')  = 'test.bak'

    *)

  </i></font><font color="#FF0000"><b>function </b></font>bool<font color="#000080">(</font>x <font color="#000080">: </font>boolean<font color="#000080">) : </font>integer<font color="#000080">;
    </font><font color="#008000"><i>(*  True becomes -1, False becomes 0 

        bool(true) = -1
        bool(false) = 0

    *)

  </i></font><font color="#FF0000"><b>function </b></font>center <font color="#000080">( </font>line <font color="#000080">: </font>st255<font color="#000080">) : </font>integer<font color="#000080">;
    </font><font color="#008000"><i>(*  returns x location to print the line/string at to center it 

        center('HELP') = 38
        gotoxy(center(message),y);  write(message);


    *)      

  </i></font><font color="#FF0000"><b>function </b></font>fill<font color="#000080">(</font>n<font color="#000080">,</font>char <font color="#000080">: </font>integer<font color="#000080">) : </font>st255<font color="#000080">;
    </font><font color="#008000"><i>(*  fill string to n characters with chr(char)  
        like basic string$  

        fill(10,65) = 'AAAAAAAAAA'

    *)

  </i></font><font color="#FF0000"><b>function </b></font>fnline<font color="#000080">( </font>curline <font color="#000080">: </font>st255<font color="#000080">) : </font>st255<font color="#000080">;
    </font><font color="#008000"><i>(*  isolate leading number from a line 

        fnline('255  IF X = 255 THEN GOTO')  = 255

    *)

  </i></font><font color="#FF0000"><b>function </b></font>fnmax<font color="#000080">(</font>a<font color="#000080">,</font>b <font color="#000080">: </font>integer<font color="#000080">) : </font>integer<font color="#000080">;
    </font><font color="#008000"><i>(*   max of two integers 

         fnmax(4,5) = 5

    *)

  </i></font><font color="#FF0000"><b>function </b></font>fnmin<font color="#000080">(</font>a<font color="#000080">,</font>b <font color="#000080">: </font>integer<font color="#000080">) : </font>integer<font color="#000080">;
    </font><font color="#008000"><i>(*   min of two integers

         fnmin(-9,5) = -9

    *)

  </i></font><font color="#FF0000"><b>function </b></font>lpad<font color="#000080">(</font>ch <font color="#000080">: </font>st255<font color="#000080">; </font>num <font color="#000080">: </font>integer<font color="#000080">) : </font>st255<font color="#000080">;
    </font><font color="#008000"><i>(*   left pad the string ch with spaces to num length 


         lpad('HELP',10) = '      HELP'

   *)

  </i></font><font color="#FF0000"><b>function </b></font>ltrm <font color="#000080">( </font>curline <font color="#000080">: </font>st255<font color="#000080">) : </font>st255<font color="#000080">;
    </font><font color="#008000"><i>(*   remove leading spaces from curline  

         ltrm('        HELP') = 'HELP'

    *)

  </i></font><font color="#FF0000"><b>function </b></font>peek<font color="#000080">(</font>seg<font color="#000080">,</font>ofs <font color="#000080">: </font>integer<font color="#000080">) : </font>integer<font color="#000080">;
    </font><font color="#008000"><i>(*   like basic peek 

         x := peek(segment,offset);
    
    *)

  </i></font><font color="#FF0000"><b>procedure </b></font>poke<font color="#000080">(</font>seg<font color="#000080">,</font>ofs<font color="#000080">,</font>v <font color="#000080">: </font>integer<font color="#000080">);
    </font><font color="#008000"><i>(*   like basic poke  

         poke(screen_seg,ofs,character)

    *)

  </i></font><font color="#FF0000"><b>function </b></font>power<font color="#000080">(</font>x<font color="#000080">,</font>n <font color="#000080">: </font>integer<font color="#000080">) : </font>integer<font color="#000080">;
    </font><font color="#008000"><i>(*   x^n

          power(2,4) = 16

    *)

  </i></font><font color="#FF0000"><b>function </b></font>rpad<font color="#000080">(</font>ch <font color="#000080">: </font>st255<font color="#000080">; </font>num <font color="#000080">: </font>integer<font color="#000080">) : </font>st255<font color="#000080">;
    </font><font color="#008000"><i>(*   right pad ch to num length with spaces  

         rpad('THIS',10) = 'THIS      '

    *)

  </i></font><font color="#FF0000"><b>function </b></font>rpt<font color="#000080">(</font>num<font color="#000080">,</font>ch <font color="#000080">: </font>integer<font color="#000080">) : </font>st255<font color="#000080">;
    </font><font color="#008000"><i>(*   like basic string$  

         rpt(10,67) = 'CCCCCCCCCC'

    *)

  </i></font><font color="#FF0000"><b>function </b></font>rtrm<font color="#000080">(</font>ch <font color="#000080">: </font>st255<font color="#000080">) : </font>st255<font color="#000080">;
    </font><font color="#008000"><i>(*    remove trailing spaces from string ch 

          rtrm('ROYAL    ') = 'ROYAL'

    *)

  </i></font><font color="#FF0000"><b>function </b></font>srep<font color="#000080">(</font>ch<font color="#000080">,</font>dh<font color="#000080">,</font>eh <font color="#000080">: </font>st255<font color="#000080">): </font>st255<font color="#000080">;
    </font><font color="#008000"><i>(*    srep=string replace
          replace all occurances of string dh with eh in string ch  


          srep('THE CAT','CAT','FAT') = 'THE FAT'

    *)
  
  </i></font><font color="#FF0000"><b>procedure </b></font>s_swap<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>a1<font color="#000080">,</font>a2 <font color="#000080">: </font>st255<font color="#000080">);
    </font><font color="#008000"><i>(*    string swap, swap a1 &amp; a2 

          a1 = 'MAMA'
          a2 = 'DADDY'

          s_swap(a1,a2)

          a1 = 'DADDY'
          a2 = 'MAMA'

    *)

  </i></font><font color="#FF0000"><b>function </b></font>fnxtrm<font color="#000080">( </font>s <font color="#000080">: </font>st255<font color="#000080">) : </font>st255<font color="#000080">;
    </font><font color="#008000"><i>(*    if string s is all blanks, then returns '' null string 

           fnxtrm('      g   ') = ' '
           fnxtrm('          ') = ''

    *)

  </i></font><font color="#FF0000"><b>function </b></font>fnval<font color="#000080">( </font>curline <font color="#000080">: </font>st255<font color="#000080">) : </font>integer<font color="#000080">;
    </font><font color="#008000"><i>(*    converts string representation of number to integer 

          fnval('123 ') = 123

    *)

  </i></font><font color="#FF0000"><b>function </b></font>fns <font color="#000080">( </font>a1 <font color="#000080">: </font>integer<font color="#000080">) : </font>st255<font color="#000080">;
    </font><font color="#008000"><i>(*   converts integer to string representation  

         fns(1234) = '1234'

   *)

  </i></font><font color="#FF0000"><b>function </b></font>left_str<font color="#000080">( </font>curline <font color="#000080">: </font>st255<font color="#000080">; </font>i <font color="#000080">: </font>integer<font color="#000080">) : </font>st255<font color="#000080">;
    </font><font color="#008000"><i>(*   take i characters from curline starting at the left 

         left_str('THE QUICK BROWN',9) = 'THE QUICK'

    *)

  </i></font><font color="#FF0000"><b>function </b></font>right_str<font color="#000080">( </font>curline <font color="#000080">: </font>st255<font color="#000080">; </font>i <font color="#000080">: </font>integer<font color="#000080">) : </font>st255<font color="#000080">;
    </font><font color="#008000"><i>(*   take i characters from curline starting at the right 

         right_str('THE QUICK BROWN',9) = 'ICK BROWN'
    *)

  </i></font><font color="#FF0000"><b>procedure </b></font>mid_str_assign<font color="#000080">( </font><font color="#FF0000"><b>var </b></font>modify_string <font color="#000080">: </font>st255<font color="#000080">; </font>s_start<font color="#000080">,</font>s_len <font color="#000080">: </font>integer<font color="#000080">; </font>ins_string <font color="#000080">: </font>st255<font color="#000080">);
    </font><font color="#008000"><i>(*   mid string assignment
         mid_str_assign('flemish',1,2,'bl') = 'blemish';  
                                  ^ starting a character 1
                                    ^ for a length of two 
                                       ^ make those chars 'bl'

         mid_str_assign('abcdefg',2,2,'BC') = 'aBCdefg'
    *)
   
  </i></font><font color="#FF0000"><b>function </b></font>hex_str<font color="#000080">(</font>hex<font color="#000080">: </font>INTEGER<font color="#000080">) : </font>st255<font color="#000080">;
     </font><font color="#008000"><i>(*  hexadecimal string representation of decimal integer 

         hex_str(123) = '7B'

     *)

  </i></font><font color="#FF0000"><b>function </b></font>hex_val<font color="#000080">(</font>hex<font color="#000080">: </font>st255<font color="#000080">) : </font>INTEGER<font color="#000080">;
     </font><font color="#008000"><i>(*  reverse of hex_str,  integer representation of hexadecimal string 

         hex_val('7B') = 123

     *)

  </i></font><font color="#FF0000"><b>function </b></font>bin_str<font color="#000080">(</font>bin<font color="#000080">: </font>INTEGER<font color="#000080">) : </font>st255<font color="#000080">;
     </font><font color="#008000"><i>(*  binary string representation of integer  

         bin_str(123) = '1111011';
     *)

  </i></font><font color="#FF0000"><b>FUNCTION </b></font>InKey<font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>Special <font color="#000080">: </font>BOOLEAN<font color="#000080">; </font><font color="#FF0000"><b>VAR </b></font>Keychar <font color="#000080">: </font>CHAR<font color="#000080">) : </font>BOOLEAN<font color="#000080">;
     </font><font color="#008000"><i>(*  checks for keypressed, returns type and character *)

  </i></font><font color="#FF0000"><b>function </b></font>fnzero <font color="#000080">(</font>num <font color="#000080">: </font>st255 <font color="#000080">; </font>places <font color="#000080">: </font>integer<font color="#000080">) : </font>st255<font color="#000080">;
     </font><font color="#008000"><i>(*  left '0' pad a number into a string 

         fnzero('123',10) = '0000000123'

     *)

  </i></font><font color="#FF0000"><b>function </b></font>fns_z<font color="#000080">(</font>n <font color="#000080">: </font>integer<font color="#000080">) : </font>st255<font color="#000080">;
     </font><font color="#008000"><i>(*  left '0' pad a number into a 2 digit string 

           fns_z(1) = '01'
         fns_z(45) = '45'
     *)

  </i></font><font color="#FF0000"><b>Function </b></font>bit_blast<font color="#000080">(</font>bit_stream<font color="#000080">: </font>st255<font color="#000080">) : </font>INTEGER<font color="#000080">;
     </font><font color="#008000"><i>(*  reverse of bin_str, integer representation of binary string 

         bit_blast('1110001') = 113
     *)

  </i></font><font color="#FF0000"><b>Function </b></font>printusing <font color="#000080">(</font>mask <font color="#000080">: </font>st255<font color="#000080">; </font>number <font color="#000080">: </font>real<font color="#000080">) : </font>st255<font color="#000080">;
     </font><font color="#008000"><i>(*

             printusing('###,###.##',19.95) = '     19.95'
           printusing('###,###.##CR,-19.95) = '     19.95CR'

     *)


  </i></font><font color="#FF0000"><b>Procedure </b></font>UpStr<font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>a<font color="#000080">: </font>st255<font color="#000080">);
     </font><font color="#008000"><i>(*  Upcase a whole string 

         UpStr('The cat Mildred') = 'THE CAT MILDRED'

     *)



</i></font><font color="#FF0000"><b>Implementation




Function </b></font>Word_Int<font color="#000080">;
</font><font color="#008000"><i>(*  (r: REAL) : INTEGER; *)

</i></font><font color="#FF0000"><b>BEGIN  
  IF </b></font>r <font color="#000080">&gt; </font><font color="#800000">32767.0 </font><font color="#FF0000"><b>THEN
    </b></font>Word_int <font color="#000080">:= </font>Trunc<font color="#000080">(</font>r <font color="#000080">- </font><font color="#800000">65536.0</font><font color="#000080">)
  </font><font color="#FF0000"><b>ELSE
    </b></font>Word_int <font color="#000080">:= </font>Trunc<font color="#000080">(</font>r<font color="#000080">);
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Function </b></font>Word_Real<font color="#000080">;
</font><font color="#008000"><i>(* (i: INTEGER) : REAL; *)
</i></font><font color="#FF0000"><b>BEGIN
  IF </b></font>i <font color="#000080">&lt; </font><font color="#800000">0 </font><font color="#FF0000"><b>THEN
    </b></font>Word_Real <font color="#000080">:= </font>i <font color="#000080">+ </font><font color="#800000">32767.0
  </font><font color="#FF0000"><b>ELSE
    </b></font>Word_Real <font color="#000080">:= </font>i<font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Function </b></font>Real_Mod<font color="#000080">;
</font><font color="#008000"><i>(*  (a,b: REAL) : REAL; *)
</i></font><font color="#FF0000"><b>BEGIN
  WHILE </b></font>a <font color="#000080">&gt; </font>b <font color="#FF0000"><b>DO begin
     </b></font>a <font color="#000080">:= </font>a <font color="#000080">- </font>b<font color="#000080">;
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
  </font>Real_Mod <font color="#000080">:= </font>a<font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">; </font><font color="#008000"><i>(* Real_Mod *)


</i></font><font color="#FF0000"><b>function </b></font>lowcase<font color="#000080">;
</font><font color="#008000"><i>(* (c : char) : char; *)
</i></font><font color="#FF0000"><b>var
</b></font>c1 <font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
</b></font>c1 <font color="#000080">:= </font>ord<font color="#000080">(</font>c<font color="#000080">);
 </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>c1 <font color="#000080">&gt; </font><font color="#800000">64</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>c1 <font color="#000080">&lt; </font><font color="#800000">91</font><font color="#000080">)  </font><font color="#008000"><i>{only change A-Z to a-z}
  </i></font><font color="#FF0000"><b>then
   </b></font>c1 <font color="#000080">:= </font>c1 <font color="#000080">+ </font><font color="#800000">32</font><font color="#000080">;
</font>lowcase <font color="#000080">:= </font>chr<font color="#000080">(</font>c1<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>function </b></font>f_buf_conv<font color="#000080">;
</font><font color="#008000"><i>(*  ( x : st255) : st255; *)
</i></font><font color="#FF0000"><b>var
 </b></font>i <font color="#000080">: </font>integer<font color="#000080">;
 </font>temp <font color="#000080">: </font>st255<font color="#000080">;
</font><font color="#FF0000"><b>begin
 </b></font>temp <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
 </font>temp <font color="#000080">:= </font>x<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">] + </font>copy<font color="#000080">(</font>x<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font>length<font color="#000080">(</font>x<font color="#000080">));
 </font>f_buf_conv <font color="#000080">:= </font>temp<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>procedure </b></font>prog_chain<font color="#000080">;
</font><font color="#008000"><i>(* (prog : st255); *) (* dummy *) 
</i></font><font color="#FF0000"><b>begin
</b></font>halt<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>function </b></font>spaces<font color="#000080">;
</font><font color="#008000"><i>(* (num : integer) : st255; *)
  </i></font><font color="#FF0000"><b>var
    </b></font>sp1 <font color="#000080">: </font>integer<font color="#000080">;
    </font>space <font color="#000080">: </font>st255<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>space <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
    </font><font color="#FF0000"><b>for </b></font>sp1 <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>num <font color="#FF0000"><b>do
        </b></font>space <font color="#000080">:= </font>space <font color="#000080">+ </font><font color="#800000">' '</font><font color="#000080">;
    </font>spaces <font color="#000080">:= </font>space<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ ------------------- }

</i></font><font color="#FF0000"><b>function </b></font>bakfile<font color="#000080">;
</font><font color="#008000"><i>(* ( name : st255) : st255; *)
</i></font><font color="#FF0000"><b>var
  </b></font>a1 <font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>a1 <font color="#000080">:= </font>pos<font color="#000080">(</font><font color="#800000">'.'</font><font color="#000080">,</font>name<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>a1 <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then
    </b></font>bakfile <font color="#000080">:= </font>name <font color="#000080">+ </font><font color="#800000">'.BAK'
   </font><font color="#FF0000"><b>else
  </b></font>bakfile <font color="#000080">:= </font>copy<font color="#000080">(</font>name<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font>a1<font color="#000080">) + </font><font color="#800000">'BAK'</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ ------------------- }

</i></font><font color="#FF0000"><b>function </b></font>bool<font color="#000080">;
</font><font color="#008000"><i>(* (x : boolean) : integer; *)
</i></font><font color="#FF0000"><b>begin
   if </b></font>x <font color="#FF0000"><b>then </b></font>bool <font color="#000080">:= -</font><font color="#800000">1
      </font><font color="#FF0000"><b>else </b></font>bool <font color="#000080">:= </font><font color="#800000">0
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ ------------------- }

</i></font><font color="#FF0000"><b>function </b></font>center<font color="#000080">;
</font><font color="#008000"><i>(*  ( line : st255) : integer; *)
</i></font><font color="#FF0000"><b>var
  </b></font>a1 <font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>a1 <font color="#000080">:= </font>length<font color="#000080">(</font>line<font color="#000080">);
  </font>center <font color="#000080">:= </font>trunc<font color="#000080">(</font><font color="#800000">39</font><font color="#000080">-(</font>a1 <font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">));
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ ------------------- }

</i></font><font color="#FF0000"><b>function </b></font>fill<font color="#000080">;
</font><font color="#008000"><i>(* (n,char : integer) : st255; *)
</i></font><font color="#FF0000"><b>var </b></font>i <font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
    for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>n <font color="#FF0000"><b>do
        </b></font>fill<font color="#000080">[</font>i<font color="#000080">] := </font>chr<font color="#000080">(</font>char<font color="#000080">)
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ ------------------- }

</i></font><font color="#FF0000"><b>function </b></font>fnline<font color="#000080">;
</font><font color="#008000"><i>(*  ( curline : st255) : st255; *)
</i></font><font color="#FF0000"><b>var
</b></font>a1 <font color="#000080">: </font>integer<font color="#000080">;
</font>a1s <font color="#000080">: </font>st255<font color="#000080">;
</font><font color="#FF0000"><b>begin
 </b></font>a1 <font color="#000080">:= </font>pos<font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">,</font>curline<font color="#000080">);
 </font>a1s <font color="#000080">:= </font>copy<font color="#000080">(</font>curline<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font>a1<font color="#000080">);
 </font>fnline <font color="#000080">:= </font>a1s<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ ------------------- }

</i></font><font color="#FF0000"><b>function </b></font>fnmax<font color="#000080">;
</font><font color="#008000"><i>(* (a,b : integer) : integer; *)
</i></font><font color="#FF0000"><b>begin
   </b></font>fnmax <font color="#000080">:= </font>a<font color="#000080">-</font>bool<font color="#000080">(</font>b<font color="#000080">&gt;</font>a<font color="#000080">)*(</font>b<font color="#000080">-</font>a<font color="#000080">)
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ ------------------- }

</i></font><font color="#FF0000"><b>function </b></font>fnmin<font color="#000080">;
</font><font color="#008000"><i>(* (a,b : integer) : integer; *)
</i></font><font color="#FF0000"><b>begin
   </b></font>fnmin <font color="#000080">:= </font>a<font color="#000080">+</font>bool<font color="#000080">(</font>a<font color="#000080">&gt;</font>b<font color="#000080">)*(</font>a<font color="#000080">-</font>b<font color="#000080">)
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ ------------------- }

</i></font><font color="#FF0000"><b>function </b></font>lpad<font color="#000080">;
</font><font color="#008000"><i>(* (ch : st255; num : integer) : st255; *)
  </i></font><font color="#FF0000"><b>var
    </b></font>sp1 <font color="#000080">: </font>integer<font color="#000080">;
    </font>sp2 <font color="#000080">: </font>integer<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>sp1 <font color="#000080">:= </font>length<font color="#000080">(</font>ch<font color="#000080">);
    </font>sp2 <font color="#000080">:= </font>num <font color="#000080">- </font>sp1<font color="#000080">;
    </font>lpad <font color="#000080">:= </font>spaces<font color="#000080">(</font>sp2<font color="#000080">) + </font>ch<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ ------------------- }

</i></font><font color="#FF0000"><b>function </b></font>ltrm<font color="#000080">;
</font><font color="#008000"><i>(*  ( curline : st255) : st255; *)
</i></font><font color="#FF0000"><b>begin
 while </b></font>curline<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] = </font><font color="#800000">' ' </font><font color="#FF0000"><b>do
  </b></font>curline <font color="#000080">:= </font>copy<font color="#000080">(</font>curline<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">255</font><font color="#000080">);
</font>ltrm <font color="#000080">:= </font>curline<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ ------------------- }

</i></font><font color="#FF0000"><b>function </b></font>peek<font color="#000080">;
</font><font color="#008000"><i>(* (seg,ofs : integer) : integer; *)
</i></font><font color="#FF0000"><b>begin
 </b></font>peek <font color="#000080">:= </font>mem<font color="#000080">[</font>seg<font color="#000080">:</font>ofs<font color="#000080">];
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ ------------------- }

</i></font><font color="#FF0000"><b>procedure </b></font>poke<font color="#000080">;
</font><font color="#008000"><i>(* (seg,ofs,v : integer); *)
</i></font><font color="#FF0000"><b>begin
 </b></font>mem<font color="#000080">[</font>seg<font color="#000080">:</font>ofs<font color="#000080">] := </font>v<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ ------------------- }

</i></font><font color="#FF0000"><b>function </b></font>power<font color="#000080">;
</font><font color="#008000"><i>(* (x,n : integer) : integer; *)
</i></font><font color="#FF0000"><b>begin
   if </b></font>n <font color="#000080">= </font><font color="#800000">1
      </font><font color="#FF0000"><b>then </b></font>power <font color="#000080">:= </font>x
      <font color="#FF0000"><b>else </b></font>power <font color="#000080">:= </font>x<font color="#000080">*</font>power<font color="#000080">(</font>x<font color="#000080">,</font>n<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">)
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


  </font><font color="#008000"><i>{ ------------------- }

</i></font><font color="#FF0000"><b>function </b></font>rpad<font color="#000080">;
</font><font color="#008000"><i>(* (ch : st255; num : integer) : st255;        *)
  </i></font><font color="#FF0000"><b>begin
    </b></font>rpad <font color="#000080">:= </font>copy<font color="#000080">(</font>ch <font color="#000080">+ </font>spaces<font color="#000080">(</font>num<font color="#000080">),</font><font color="#800000">1</font><font color="#000080">,</font>num<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ ------------------- }

</i></font><font color="#FF0000"><b>function </b></font>rpt<font color="#000080">;
</font><font color="#008000"><i>(* (num,ch : integer) : st255; *)
  </i></font><font color="#FF0000"><b>var
    </b></font>sp1 <font color="#000080">: </font>integer<font color="#000080">;
    </font>space <font color="#000080">: </font>st255<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>space <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
    </font><font color="#FF0000"><b>for </b></font>sp1 <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>num <font color="#FF0000"><b>do
        </b></font>space <font color="#000080">:= </font>space <font color="#000080">+ </font>chr<font color="#000080">(</font>ch<font color="#000080">);
    </font>rpt <font color="#000080">:= </font>space<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ ------------------- }

</i></font><font color="#FF0000"><b>function </b></font>rtrm<font color="#000080">;
</font><font color="#008000"><i>(* (ch : st255) : st255; *)
  </i></font><font color="#FF0000"><b>var
    </b></font>sp1 <font color="#000080">: </font>integer<font color="#000080">;
    </font>sp2 <font color="#000080">: </font>integer<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>sp1 <font color="#000080">:= </font>length<font color="#000080">(</font>ch<font color="#000080">);
    </font>sp2 <font color="#000080">:= </font>sp1<font color="#000080">;
    </font><font color="#FF0000"><b>while </b></font><font color="#000080">(</font>ch<font color="#000080">[</font>sp2<font color="#000080">] = </font><font color="#800000">' '</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>sp2 <font color="#000080">&lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>do
        </b></font>sp2 <font color="#000080">:= </font>sp2 <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
    </font>rtrm <font color="#000080">:= </font>copy<font color="#000080">(</font>ch<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font>sp2<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ ------------------- }


</i></font><font color="#FF0000"><b>function </b></font>srep<font color="#000080">;
</font><font color="#008000"><i>(* (ch,dh,eh : st255): st255; *)
  </i></font><font color="#FF0000"><b>var
    </b></font>sp1 <font color="#000080">: </font>integer<font color="#000080">;
    </font>sp2 <font color="#000080">: </font>integer<font color="#000080">;
    </font>sp3 <font color="#000080">: </font>integer<font color="#000080">;
    </font>sp4 <font color="#000080">: </font>integer<font color="#000080">;
    </font>sp5 <font color="#000080">: </font>integer<font color="#000080">;
    </font>atemp <font color="#000080">: </font>st255<font color="#000080">;
    </font>btemp <font color="#000080">: </font>st255<font color="#000080">;
    </font>ctemp <font color="#000080">: </font>st255<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>sp1 <font color="#000080">:= </font>length<font color="#000080">(</font>ch<font color="#000080">);
    </font>sp2 <font color="#000080">:= </font>length<font color="#000080">(</font>dh<font color="#000080">);
    </font>sp3 <font color="#000080">:= </font>length<font color="#000080">(</font>eh<font color="#000080">);
    </font><font color="#FF0000"><b>while </b></font>pos<font color="#000080">(</font>dh<font color="#000080">,</font>ch<font color="#000080">) &lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>do
    begin
      </b></font>sp4 <font color="#000080">:= </font>pos<font color="#000080">(</font>dh<font color="#000080">,</font>ch<font color="#000080">);
      </font>sp5 <font color="#000080">:= </font>sp1 <font color="#000080">- (</font>sp4 <font color="#000080">+ </font>sp2<font color="#000080">) + </font><font color="#800000">1</font><font color="#000080">;
         </font>atemp <font color="#000080">:= </font>copy<font color="#000080">(</font>ch<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font>sp4<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">);
         </font>btemp <font color="#000080">:= </font>copy<font color="#000080">(</font>ch<font color="#000080">,</font>sp4<font color="#000080">+</font>sp2<font color="#000080">,</font>sp5<font color="#000080">);
         </font>ctemp <font color="#000080">:= </font>atemp <font color="#000080">+ </font>eh <font color="#000080">+ </font>btemp<font color="#000080">;
         </font>ch <font color="#000080">:= </font>ctemp<font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font>srep <font color="#000080">:= </font>ch<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ ------------------- }

</i></font><font color="#FF0000"><b>procedure </b></font>s_swap<font color="#000080">;
</font><font color="#008000"><i>(* (var a1,a2 : st255);        *)
</i></font><font color="#FF0000"><b>var
  </b></font>temp <font color="#000080">: </font>st255<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>temp <font color="#000080">:= </font>a1<font color="#000080">;
  </font>a1 <font color="#000080">:= </font>a2<font color="#000080">;
  </font>a2 <font color="#000080">:= </font>temp<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ ------------------- }

</i></font><font color="#FF0000"><b>function </b></font>fnxtrm<font color="#000080">;
</font><font color="#008000"><i>(* ( s : st255) : st255; *)
 </i></font><font color="#FF0000"><b>begin
  </b></font>fnxtrm <font color="#000080">:= </font>spaces<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">+</font>bool<font color="#000080">(</font>s <font color="#000080">= </font>spaces<font color="#000080">(</font>length<font color="#000080">(</font>s<font color="#000080">))))
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ ------------------- }

</i></font><font color="#FF0000"><b>function </b></font>fnval<font color="#000080">;
</font><font color="#008000"><i>(* ( curline : st255) : integer; *)
</i></font><font color="#FF0000"><b>var
 </b></font>err<font color="#000080">,</font>a1 <font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
 while </b></font>copy<font color="#000080">(</font>curline<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">) = </font><font color="#800000">'' </font><font color="#FF0000"><b>do
   </b></font>curline <font color="#000080">:= </font>copy<font color="#000080">(</font>curline<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">255</font><font color="#000080">);
 </font>val<font color="#000080">(</font>curline<font color="#000080">,</font>a1<font color="#000080">,</font>err<font color="#000080">);
 </font>fnval <font color="#000080">:= </font>a1<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ ------------------- }

</i></font><font color="#FF0000"><b>function </b></font>fns<font color="#000080">;
</font><font color="#008000"><i>(* ( a1 : integer) : st255; *)
</i></font><font color="#FF0000"><b>var
 </b></font>a1s <font color="#000080">: </font>st255<font color="#000080">;
</font><font color="#FF0000"><b>begin
 </b></font>str<font color="#000080">(</font>a1<font color="#000080">,</font>a1s<font color="#000080">);
 </font>fns <font color="#000080">:= </font>a1s<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>left_str<font color="#000080">;
</font><font color="#008000"><i>(* ( curline : st255; i : integer) : st255; *)
</i></font><font color="#FF0000"><b>begin
 </b></font>left_str <font color="#000080">:= </font>copy<font color="#000080">(</font>curline<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font>i<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ ------------------- }

</i></font><font color="#FF0000"><b>function </b></font>right_str<font color="#000080">;
</font><font color="#008000"><i>(* ( curline : st255; i : integer) : st255; *)
</i></font><font color="#FF0000"><b>var
 </b></font>l <font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
 </b></font>l <font color="#000080">:= </font>length<font color="#000080">(</font>curline<font color="#000080">);
 </font>right_str <font color="#000080">:= </font>copy<font color="#000080">(</font>curline<font color="#000080">,</font>l<font color="#000080">-</font>i<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,</font>i<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ ------------------- }

{
 format for mid_str_assign

 basic - mid$(s$,12,12) = mid$(f$,4,12)

 pascal -  mid_str_assign(s_str,12,12,copy(f_str,4,12));
        or
           mid_str_assign(s_str,12,12,'123456789012');
}

  { ------------------- }

</i></font><font color="#FF0000"><b>procedure </b></font>mid_str_assign<font color="#000080">;
</font><font color="#008000"><i>(* ( var modify_string : st255; s_start,s_len : integer; ins_string : st255); *)
</i></font><font color="#FF0000"><b>begin
  </b></font>delete<font color="#000080">(</font>modify_string<font color="#000080">,</font>s_start<font color="#000080">,</font>s_len<font color="#000080">);
  </font>insert<font color="#000080">(</font>ins_string<font color="#000080">,</font>modify_string<font color="#000080">,</font>s_start<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ ------------------- }

</i></font><font color="#FF0000"><b>function </b></font>hex_str<font color="#000080">(</font>hex<font color="#000080">: </font>INTEGER<font color="#000080">) : </font>st255<font color="#000080">;
</font><font color="#FF0000"><b>VAR
  </b></font>hex_out<font color="#000080">: </font>st255<font color="#000080">;
  </font>hex_temp<font color="#000080">: </font>INTEGER<font color="#000080">;
  </font>hex_mas<font color="#000080">: </font>st255<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>hex_mas <font color="#000080">:= </font><font color="#800000">'0123456789ABCDEF'</font><font color="#000080">;
  </font>hex_out <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
  </font><font color="#FF0000"><b>WHILE </b></font>hex <font color="#000080">&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>DO begin
    </b></font>hex_temp <font color="#000080">:= </font>hex <font color="#FF0000"><b>AND </b></font><font color="#800000">15</font><font color="#000080">;
    </font>hex_out <font color="#000080">:= </font>hex_mas<font color="#000080">[</font>hex_temp<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">] + </font>hex_out<font color="#000080">;
    </font>hex <font color="#000080">:= </font>hex <font color="#FF0000"><b>DIV </b></font><font color="#800000">16</font><font color="#000080">;
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>FOR </b></font>hex_temp <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">2 </font><font color="#FF0000"><b>DO begin
    IF </b></font>length<font color="#000080">(</font>hex_out<font color="#000080">) &lt; </font><font color="#800000">2 </font><font color="#FF0000"><b>then </b></font>hex_out <font color="#000080">:= </font><font color="#800000">'0' </font><font color="#000080">+ </font>hex_out<font color="#000080">;
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
  </font>hex_str <font color="#000080">:= </font>hex_out<font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ ------------------- }

</i></font><font color="#FF0000"><b>function </b></font>hex_val<font color="#000080">;
</font><font color="#008000"><i>(* (hex: st255) : INTEGER; *)
</i></font><font color="#FF0000"><b>VAR
  </b></font>hex_out<font color="#000080">: </font>INTEGER<font color="#000080">;
  </font>hex_temp<font color="#000080">: </font>INTEGER<font color="#000080">;
  </font>hex_mas<font color="#000080">: </font>st255<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>hex_mas <font color="#000080">:= </font><font color="#800000">'0123456789ABCDEF'</font><font color="#000080">;
  </font>hex_out <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>WHILE </b></font>length<font color="#000080">(</font>hex<font color="#000080">) &gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>DO begin
    </b></font>hex_temp <font color="#000080">:= </font>Pos<font color="#000080">(</font>hex<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">],</font>hex_mas<font color="#000080">);
    </font>hex_out <font color="#000080">:= </font>hex_out <font color="#000080">* </font><font color="#800000">16 </font><font color="#000080">+ (</font>hex_temp<font color="#000080">)-</font><font color="#800000">1</font><font color="#000080">;
    </font>hex <font color="#000080">:= </font>copy<font color="#000080">(</font>hex<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">255</font><font color="#000080">);
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
  </font>hex_val <font color="#000080">:= </font>hex_out<font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ ----------------- }

</i></font><font color="#FF0000"><b>function </b></font>bin_str<font color="#000080">;
</font><font color="#008000"><i>(* (bin: INTEGER) : st255; *)
</i></font><font color="#FF0000"><b>VAR
  </b></font>bin_out<font color="#000080">: </font>st255<font color="#000080">;
  </font>bin_temp<font color="#000080">: </font>INTEGER<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>bin_out <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
  </font><font color="#FF0000"><b>WHILE </b></font>bin <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>DO begin
    </b></font>bin_temp <font color="#000080">:= </font>bin <font color="#FF0000"><b>AND </b></font><font color="#800000">1</font><font color="#000080">;
    </font><font color="#FF0000"><b>IF </b></font>bin_temp <font color="#000080">= </font><font color="#800000">1 </font><font color="#FF0000"><b>THEN
       </b></font>bin_out <font color="#000080">:= </font><font color="#800000">'1' </font><font color="#000080">+ </font>bin_out
    <font color="#FF0000"><b>ELSE
       </b></font>bin_out <font color="#000080">:= </font><font color="#800000">'0' </font><font color="#000080">+ </font>bin_out<font color="#000080">;

    </font>bin <font color="#000080">:= </font>bin <font color="#FF0000"><b>shr </b></font><font color="#800000">1</font><font color="#000080">;
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
  </font>bin_str <font color="#000080">:= </font>bin_out<font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ ------------------- }

</i></font><font color="#FF0000"><b>FUNCTION </b></font>InKey<font color="#000080">;
</font><font color="#008000"><i>(* (VAR Special : BOOLEAN; VAR Keychar : CHAR) : BOOLEAN; *)
</i></font><font color="#FF0000"><b>VAR
  </b></font>Dosrec <font color="#000080">: </font>Dos<font color="#000080">.</font>Registers<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  IF </b></font>Crt<font color="#000080">.</font>KeyPressed <font color="#FF0000"><b>THEN begin
        </b></font>Dosrec<font color="#000080">.</font>AX <font color="#000080">:= </font><font color="#800000">$0800</font><font color="#000080">;
        </font>MSDOS<font color="#000080">(</font>DosRec<font color="#000080">);
        </font>KEYCHAR <font color="#000080">:= </font>CHR<font color="#000080">(</font>LO<font color="#000080">(</font>DOSREC<font color="#000080">.</font>AX<font color="#000080">));
        </font>INKEY <font color="#000080">:= </font>TRUE<font color="#000080">;
        </font><font color="#FF0000"><b>IF </b></font>ORD<font color="#000080">(</font>KEYCHAR<font color="#000080">) = </font><font color="#800000">0
           </font><font color="#FF0000"><b>THEN
              BEGIN
                </b></font>SPECIAL <font color="#000080">:= </font>TRUE<font color="#000080">;
                </font>DOSREC<font color="#000080">.</font>AX <font color="#000080">:= </font><font color="#800000">$0800</font><font color="#000080">;
                </font>MSDOS<font color="#000080">(</font>DosRec<font color="#000080">);
                </font>KEYCHAR <font color="#000080">:= </font>CHR<font color="#000080">(</font>LO<font color="#000080">(</font>DOSREC<font color="#000080">.</font>AX<font color="#000080">));
              </font><font color="#FF0000"><b>END
            ELSE </b></font>SPECIAL <font color="#000080">:= </font>FALSE<font color="#000080">;
       </font><font color="#FF0000"><b>END
      ELSE
      BEGIN
        </b></font>INKEY <font color="#000080">:= </font>FALSE<font color="#000080">;
        </font>SPECIAL <font color="#000080">:= </font>FALSE<font color="#000080">;
      </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ ------------------- }

</i></font><font color="#FF0000"><b>function </b></font>fnzero<font color="#000080">;
</font><font color="#008000"><i>(* (num : st255 ; places : integer) : st255; *)
</i></font><font color="#FF0000"><b>var
 </b></font>a1s <font color="#000080">: </font>st255<font color="#000080">;
 </font>a1 <font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
 </b></font>a1 <font color="#000080">:= </font>length<font color="#000080">(</font>num<font color="#000080">);
 </font>a1s <font color="#000080">:= </font>rpt<font color="#000080">(</font>places<font color="#000080">-</font>a1<font color="#000080">,</font><font color="#800000">48</font><font color="#000080">) + </font>num<font color="#000080">;
 </font>fnzero <font color="#000080">:= </font>a1s<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ ------------------- }


</i></font><font color="#FF0000"><b>function </b></font>fns_z<font color="#000080">;
</font><font color="#008000"><i>(* (n : integer) : st255; *)
</i></font><font color="#FF0000"><b>var
 </b></font>c <font color="#000080">: </font>st255<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>c <font color="#000080">:= </font>fns<font color="#000080">(</font>n<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>length<font color="#000080">(</font>c<font color="#000080">) = </font><font color="#800000">1
   </font><font color="#FF0000"><b>then
    </b></font>c <font color="#000080">:= </font><font color="#800000">'0' </font><font color="#000080">+ </font>c<font color="#000080">;
  </font>fns_z <font color="#000080">:= </font>c<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ ------------------- }

</i></font><font color="#FF0000"><b>Function </b></font>bit_blast<font color="#000080">;
</font><font color="#008000"><i>(* (bit_stream: st255) : INTEGER; *)
 (* convert string representation of bits into integer: '1001' becomes 9 *)
</i></font><font color="#FF0000"><b>VAR
  </b></font>i<font color="#000080">,</font>bit_box <font color="#000080">: </font>INTEGER<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>bit_box <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>FOR </b></font>i <font color="#000080">:= </font>Length<font color="#000080">(</font>bit_stream<font color="#000080">) </font><font color="#FF0000"><b>DOwnTO </b></font><font color="#800000">1 </font><font color="#FF0000"><b>DO  BEGIN
    IF </b></font>bit_stream<font color="#000080">[</font>i<font color="#000080">] = </font><font color="#800000">'1' </font><font color="#FF0000"><b>THEN begin
       </b></font>bit_box <font color="#000080">:= </font>bit_box <font color="#000080">+ (</font><font color="#800000">1 </font><font color="#FF0000"><b>shl </b></font><font color="#000080">((</font>Length<font color="#000080">(</font>bit_stream<font color="#000080">) - </font>i<font color="#000080">)));
    </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
  </font>bit_blast <font color="#000080">:= </font>bit_box<font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font><font color="#008000"><i>{ ------------------- }

</i></font><font color="#FF0000"><b>Function </b></font>printusing<font color="#000080">;
</font><font color="#008000"><i>(* (mask : st255; number : real) : st255; *)

</i></font><font color="#FF0000"><b>const
     </b></font>comma <font color="#000080">: </font>char <font color="#000080">= </font><font color="#800000">','</font><font color="#000080">;
     </font>point <font color="#000080">: </font>char <font color="#000080">= </font><font color="#800000">'.'</font><font color="#000080">;
     </font>minussign <font color="#000080">: </font>char <font color="#000080">= </font><font color="#800000">'-'</font><font color="#000080">;

</font><font color="#FF0000"><b>VAR
     </b></font>fieldwidth<font color="#000080">, </font>IntegerLength<font color="#000080">, </font>i<font color="#000080">, </font>j<font color="#000080">, </font>places<font color="#000080">,</font>pointposition <font color="#000080">: </font>INTEGER<font color="#000080">;
     </font>usingcommas<font color="#000080">, </font>decimal<font color="#000080">, </font>negative <font color="#000080">: </font>boolean<font color="#000080">;
     </font>outstring<font color="#000080">, </font>IntegerString       <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">80</font><font color="#000080">];

</font><font color="#FF0000"><b>BEGIN
     </b></font>negative    <font color="#000080">:= </font>number <font color="#000080">&lt; </font><font color="#800000">0</font><font color="#000080">;
     </font>number      <font color="#000080">:= </font>abs<font color="#000080">(</font>number<font color="#000080">);
     </font>places      <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
     </font><font color="#FF0000"><b>if </b></font>pos<font color="#000080">(</font><font color="#800000">'CR'</font><font color="#000080">,</font>mask<font color="#000080">) = </font><font color="#800000">0
      </font><font color="#FF0000"><b>then
        </b></font>fieldwidth  <font color="#000080">:= </font>length<font color="#000080">(</font>mask<font color="#000080">)
      </font><font color="#FF0000"><b>else
        </b></font>fieldwidth <font color="#000080">:= </font>length<font color="#000080">(</font>mask<font color="#000080">) - </font><font color="#800000">2</font><font color="#000080">;

     </font>usingcommas <font color="#000080">:= </font>pos<font color="#000080">(</font>comma<font color="#000080">,</font>mask<font color="#000080">) &gt; </font><font color="#800000">0</font><font color="#000080">;
     </font>decimal     <font color="#000080">:= </font>pos<font color="#000080">(</font>point<font color="#000080">,</font>mask<font color="#000080">) &gt; </font><font color="#800000">0</font><font color="#000080">;

     </font><font color="#FF0000"><b>if </b></font>decimal <font color="#FF0000"><b>then
          BEGIN
              </b></font>pointposition <font color="#000080">:= </font>pos<font color="#000080">(</font>point<font color="#000080">,</font>mask<font color="#000080">);
              </font>places        <font color="#000080">:= </font>fieldwidth <font color="#000080">- </font>pointposition
              <font color="#FF0000"><b>END</b></font><font color="#000080">;
     </font>str<font color="#000080">( </font>number <font color="#000080">: </font><font color="#800000">0 </font><font color="#000080">: </font>places<font color="#000080">, </font>outstring<font color="#000080">);

     </font><font color="#FF0000"><b>if </b></font>usingcommas <font color="#FF0000"><b>then
         BEGIN
              </b></font>j <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
              </font>IntegerString <font color="#000080">:= </font>copy<font color="#000080">(</font>outstring<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font>length<font color="#000080">( </font>outstring <font color="#000080">) - </font>places <font color="#000080">);
              </font>IntegerLength <font color="#000080">:= </font>length<font color="#000080">( </font>IntegerString <font color="#000080">);
              </font><font color="#FF0000"><b>if </b></font>decimal <font color="#FF0000"><b>then
                   </b></font>IntegerLength <font color="#000080">:= </font>IntegerLength <font color="#000080">-</font><font color="#800000">1</font><font color="#000080">;
              </font><font color="#FF0000"><b>FOR </b></font>i <font color="#000080">:= </font>IntegerLength <font color="#FF0000"><b>DOwnto </b></font><font color="#800000">2 </font><font color="#FF0000"><b>DO
                   BEGIN
                     </b></font>j <font color="#000080">:= </font>j <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
                     </font><font color="#FF0000"><b>if </b></font>j <font color="#FF0000"><b>mod </b></font><font color="#800000">3 </font><font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then
                          </b></font>insert <font color="#000080">( </font>comma<font color="#000080">, </font>outstring<font color="#000080">, </font>i <font color="#000080">)
                   </font><font color="#FF0000"><b>end
              END</b></font><font color="#000080">;


    </font><font color="#FF0000"><b>if </b></font>length<font color="#000080">(</font>outstring<font color="#000080">) &lt; </font>fieldwidth
      <font color="#FF0000"><b>then
        </b></font>outstring <font color="#000080">:= </font>spaces<font color="#000080">(</font>fieldwidth <font color="#000080">- </font>length<font color="#000080">(</font>outstring<font color="#000080">)) + </font>outstring<font color="#000080">;

     </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>negative<font color="#000080">)
      </font><font color="#FF0000"><b>then
       if </b></font><font color="#000080">(</font>pos<font color="#000080">(</font><font color="#800000">'CR'</font><font color="#000080">,</font>mask<font color="#000080">) &lt;&gt; </font><font color="#800000">0</font><font color="#000080">)
        </font><font color="#FF0000"><b>then
          </b></font>outstring <font color="#000080">:= </font>outstring <font color="#000080">+ </font><font color="#800000">'CR'
        </font><font color="#FF0000"><b>else
          </b></font>outstring <font color="#000080">:= </font>minussign <font color="#000080">+ </font>outstring<font color="#000080">;


    </font>printusing <font color="#000080">:= </font>outstring<font color="#000080">;


</font><font color="#FF0000"><b>END</b></font><font color="#000080">; </font><font color="#008000"><i>(* printusing *)


</i></font><font color="#FF0000"><b>Procedure </b></font>UpStr<font color="#000080">;
</font><font color="#FF0000"><b>VAR
  </b></font>i <font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  For </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>TO </b></font>Length<font color="#000080">(</font>a<font color="#000080">) </font><font color="#FF0000"><b>DO
     </b></font>a<font color="#000080">[</font>i<font color="#000080">] := </font>UpCase<font color="#000080">(</font>a<font color="#000080">[</font>i<font color="#000080">]);

</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>END</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to STRINGS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0071.PAS">Original</a><b>]</b></p></body>
</html>
