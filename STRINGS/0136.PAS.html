<html>
<head><title> "Knuth-Morris-Pratt substring algorithm" by LUDOVIC RUSSO</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to STRINGS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0136.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#008000"><i>{Here it is : The very fast Knuth Morris Pratt algo. It is only
implemented to search for a substring in a string but you can easily
transform it to search into a whole text. Sorry but it's not well
commented. I'm sure you'll understand ;-&gt; }

</i></font><font color="#FF0000"><b>program </b></font>kmp<font color="#000080">;
 
</font><font color="#FF0000"><b>uses </b></font>crt<font color="#000080">;
 
</font><font color="#FF0000"><b>const </b></font>longmaxchaine<font color="#000080">=</font><font color="#800000">50</font><font color="#000080">;
      </font>longmaxchaineplus1<font color="#000080">=</font><font color="#800000">51</font><font color="#000080">;
 
</font><font color="#FF0000"><b>type  </b></font>chaine<font color="#000080">=</font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font>longmaxchaine<font color="#000080">];
      </font>lmcplus1<font color="#000080">=</font><font color="#800000">1</font><font color="#000080">..</font>longmaxchaineplus1<font color="#000080">;
      </font>tablongueur<font color="#000080">=</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font>longmaxchaine<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>integer<font color="#000080">;
 
</font><font color="#FF0000"><b>PROCEDURE </b></font>compilation<font color="#000080">(</font>tmodele<font color="#000080">:</font>chaine<font color="#000080">;
                      </font><font color="#FF0000"><b>var </b></font>longueur<font color="#000080">:</font>tablongueur<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>im<font color="#000080">,</font>k<font color="#000080">,</font>lm<font color="#000080">,</font>toto<font color="#000080">:</font>integer<font color="#000080">;
    </font>fini<font color="#000080">:</font>boolean<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>lm<font color="#000080">:=</font>length<font color="#000080">(</font>tmodele<font color="#000080">);
  </font>im<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;
  </font>k<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font>longueur<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]:=</font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>while </b></font>im<font color="#000080">&lt;</font>lm <font color="#FF0000"><b>do
    begin
      </b></font>fini<font color="#000080">:=</font>false<font color="#000080">;
      </font><font color="#FF0000"><b>repeat
        if </b></font>k<font color="#000080">&lt;=</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>fini<font color="#000080">:=</font>true
        <font color="#FF0000"><b>else
          if </b></font>tmodele<font color="#000080">[</font>im<font color="#000080">]=</font>tmodele<font color="#000080">[</font>k<font color="#000080">] </font><font color="#FF0000"><b>then </b></font>fini<font color="#000080">:=</font>true
        <font color="#FF0000"><b>else
          </b></font>k<font color="#000080">:=</font>longueur<font color="#000080">[</font>k<font color="#000080">];
       </font><font color="#FF0000"><b>until </b></font>fini<font color="#000080">;
       </font>im<font color="#000080">:=</font>im<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">;
       </font>k<font color="#000080">:=</font>k<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">;
       </font><font color="#FF0000"><b>if </b></font>tmodele<font color="#000080">[</font>im<font color="#000080">]=</font>tmodele<font color="#000080">[</font>k<font color="#000080">] </font><font color="#FF0000"><b>then
         </b></font>longueur<font color="#000080">[</font>im<font color="#000080">]:=</font>longueur<font color="#000080">[</font>k<font color="#000080">]
       </font><font color="#FF0000"><b>else
         </b></font>longueur<font color="#000080">[</font>im<font color="#000080">]:=</font>k<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>write<font color="#000080">(</font><font color="#800000">'Precompilation:'</font><font color="#000080">);
    </font><font color="#FF0000"><b>for </b></font>toto<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>length<font color="#000080">(</font>tmodele<font color="#000080">) </font><font color="#FF0000"><b>do
      </b></font>write<font color="#000080">(</font>longueur<font color="#000080">[</font>toto<font color="#000080">]);
    </font>writeln<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


 
</font><font color="#FF0000"><b>PROCEDURE </b></font>recherche<font color="#000080">(</font>tsujet<font color="#000080">:</font>chaine<font color="#000080">;
                    </font>taille<font color="#000080">:</font>lmcplus1<font color="#000080">;
                    </font>tmodele<font color="#000080">:</font>chaine<font color="#000080">;
                    </font><font color="#FF0000"><b>var </b></font>trouve<font color="#000080">:</font>boolean<font color="#000080">);

</font><font color="#FF0000"><b>var </b></font>fini<font color="#000080">:</font>boolean<font color="#000080">;
    </font>im<font color="#000080">,</font><font color="#FF0000"><b>is</b></font><font color="#000080">,</font>lm<font color="#000080">,</font>ls<font color="#000080">:</font>integer<font color="#000080">;
    </font>longueur<font color="#000080">:</font>tablongueur<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>compilation<font color="#000080">(</font>tmodele<font color="#000080">,</font>longueur<font color="#000080">);
  </font>lm<font color="#000080">:=</font>length<font color="#000080">(</font>tmodele<font color="#000080">);
  </font>ls<font color="#000080">:=</font>length<font color="#000080">(</font>tsujet<font color="#000080">);
  </font><font color="#FF0000"><b>is</b></font><font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;
  </font>im<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;
  </font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>im<font color="#000080">&lt;=</font>lm<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font><font color="#FF0000"><b>is</b></font><font color="#000080">&lt;=</font>ls<font color="#000080">) </font><font color="#FF0000"><b>do
    begin
      </b></font>fini<font color="#000080">:=</font>false<font color="#000080">;
      </font><font color="#FF0000"><b>repeat
        if </b></font>im<font color="#000080">&lt;=</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>fini<font color="#000080">:=</font>true
        <font color="#FF0000"><b>else
          if </b></font>tmodele<font color="#000080">[</font>im<font color="#000080">]=</font>tsujet<font color="#000080">[</font><font color="#FF0000"><b>is</b></font><font color="#000080">] </font><font color="#FF0000"><b>then </b></font>fini<font color="#000080">:=</font>true
        <font color="#FF0000"><b>else </b></font>im<font color="#000080">:=</font>longueur<font color="#000080">[</font>im<font color="#000080">];
      </font><font color="#FF0000"><b>until </b></font>fini<font color="#000080">;
      </font>im<font color="#000080">:=</font>im<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">;
      </font><font color="#FF0000"><b>is</b></font><font color="#000080">:=</font><font color="#FF0000"><b>is</b></font><font color="#000080">+</font><font color="#800000">1</font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font>im<font color="#000080">&gt;</font>lm <font color="#FF0000"><b>then </b></font>trouve<font color="#000080">:=</font>true <font color="#FF0000"><b>else </b></font>trouve<font color="#000080">:=</font>false<font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font>trouve <font color="#FF0000"><b>then </b></font>writeln<font color="#000080">(</font><font color="#800000">'Trouve en '</font><font color="#000080">,</font><font color="#FF0000"><b>is</b></font><font color="#000080">-</font>im<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 
</font><font color="#008000"><i>{----------------------------- MAIN
----------------------------------------}
 
</i></font><font color="#FF0000"><b>var </b></font>tsujet<font color="#000080">,</font>tmodele<font color="#000080">:</font>chaine<font color="#000080">;
    </font>trouve<font color="#000080">:</font>boolean<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>clrscr<font color="#000080">;
  </font>tsujet<font color="#000080">:=</font><font color="#800000">'klfglkhooladfgdfhoolahrthhooli'</font><font color="#000080">;
  </font>tmodele<font color="#000080">:=</font><font color="#800000">'hoo'</font><font color="#000080">;
  </font>writeln<font color="#000080">(</font><font color="#800000">'sujet:&quot;'</font><font color="#000080">,</font>tsujet<font color="#000080">,</font><font color="#800000">'&quot;'</font><font color="#000080">);
  </font>writeln<font color="#000080">(</font><font color="#800000">'modele:&quot;'</font><font color="#000080">,</font>tmodele<font color="#000080">,</font><font color="#800000">'&quot;'</font><font color="#000080">);

  </font>recherche<font color="#000080">(</font>tsujet<font color="#000080">,</font>length<font color="#000080">(</font>tsujet<font color="#000080">),</font>tmodele<font color="#000080">,</font>trouve<font color="#000080">);
 
  </font><font color="#FF0000"><b>if not </b></font>trouve <font color="#FF0000"><b>then </b></font>writeln<font color="#000080">(</font><font color="#800000">'Pas trouve'</font><font color="#000080">);
  </font>readkey<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.


</font><font color="#008000"><i>{You can email me (Ludovic Russo).Here is my address:
lrusso@ice.unice.fr}

</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to STRINGS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0136.PAS">Original</a><b>]</b></p></body>
</html>
