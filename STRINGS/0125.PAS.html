<html>
<head><title> "Fast Add String function" by CARLOS RONDAO</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to STRINGS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0125.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>function </b></font>addString<font color="#000080">(</font>st1<font color="#000080">,</font>st2 <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">):</font><font color="#FF0000"><b>string</b></font><font color="#000080">;</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;

 </font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">push DS
  cld
  lds SI,st1
  les DI,@result
  mov BX,DI
  lodsb
  mov DL,255
  sub DL,AL
  xor AH,AH
  mov CX,AX
  stosb
  repz
  movsb
  lds SI,st2
  lodsb
  cmp AL,DL
  jna @nooverflow
  mov AL,DL
  @nooverflow:
  mov CX,AX
  repz
  movsb
  add ES:[BX],AL
  pop DS
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to STRINGS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0125.PAS">Original</a><b>]</b></p></body>
</html>
