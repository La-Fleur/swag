<html>
<head><title> "Longints in Pascal" by JOSE CAMPIONE</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to STRINGS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0086.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#000000">  <font color="#FF0000"><b>type
    </b></font>long <font color="#000080">= </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">3</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;   </font><font color="#008000"><i>{defines the fake-longint type}
    </i></font>string8 <font color="#000080">= </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">8</font><font color="#000080">];

  </font><font color="#008000"><i>{translate the significant portion of a real into a long var}
  </i></font><font color="#FF0000"><b>procedure </b></font>real2long<font color="#000080">(</font>r<font color="#000080">:</font>real<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>l<font color="#000080">:</font>long<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>e<font color="#000080">:</font>boolean<font color="#000080">);
  </font><font color="#FF0000"><b>type
    </b></font>string8   <font color="#000080">= </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">8</font><font color="#000080">];
    </font>string32  <font color="#000080">= </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">32</font><font color="#000080">];
  </font><font color="#FF0000"><b>var
    </b></font>s <font color="#000080">: </font>string32<font color="#000080">;

    </font><font color="#FF0000"><b>function </b></font>power<font color="#000080">(</font>b<font color="#000080">:</font>real<font color="#000080">; </font>x<font color="#000080">:</font>integer<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>e<font color="#000080">:</font>boolean<font color="#000080">): </font>real<font color="#000080">;
    </font><font color="#FF0000"><b>begin
      if </b></font>b <font color="#000080">&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then 
        </b></font>power<font color="#000080">:= </font>exp<font color="#000080">(</font>x <font color="#000080">* </font>ln<font color="#000080">(</font>b<font color="#000080">))
      </font><font color="#FF0000"><b>else </b></font>halt<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

    </font><font color="#008000"><i>{translate the significant portion of a real into a binary string32}
    </i></font><font color="#FF0000"><b>procedure </b></font>intreal2binstr<font color="#000080">(</font>r<font color="#000080">:</font>real<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>s<font color="#000080">:</font>string32<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>e<font color="#000080">:</font>boolean<font color="#000080">);
    </font><font color="#FF0000"><b>var
      </b></font>i <font color="#000080">: </font>integer<font color="#000080">;
      </font>m <font color="#000080">: </font>real<font color="#000080">;
      </font>p <font color="#000080">: </font>real<font color="#000080">;
    </font><font color="#FF0000"><b>begin
      </b></font>e<font color="#000080">:= </font>false<font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>r <font color="#000080">&gt; </font>power<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">32</font><font color="#000080">,</font>e<font color="#000080">)-</font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>then begin
        </b></font>e<font color="#000080">:= </font>true<font color="#000080">;
        </font>exit<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font>s<font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
      </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:= </font><font color="#800000">31 </font><font color="#FF0000"><b>downto </b></font><font color="#800000">1 </font><font color="#FF0000"><b>do begin
        </b></font>p<font color="#000080">:= </font>power<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">,</font>i<font color="#000080">,</font>e<font color="#000080">);
        </font>m<font color="#000080">:= </font>int<font color="#000080">(</font>r<font color="#000080">/</font>p<font color="#000080">);
        </font>r<font color="#000080">:= </font>r <font color="#000080">- (</font>m <font color="#000080">* </font>p<font color="#000080">);
        </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>int<font color="#000080">(</font>m<font color="#000080">) = </font><font color="#800000">0</font><font color="#000080">)  </font><font color="#FF0000"><b>then </b></font>s<font color="#000080">:= </font>s <font color="#000080">+ </font><font color="#800000">'0'
                         </font><font color="#FF0000"><b>else </b></font>s<font color="#000080">:= </font>s <font color="#000080">+ </font><font color="#800000">'1'</font><font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font>m<font color="#000080">:= </font>int<font color="#000080">(</font>r<font color="#000080">);
      </font>r<font color="#000080">:= </font>r <font color="#000080">- </font>m<font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>int<font color="#000080">(</font>m<font color="#000080">) = </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font>s<font color="#000080">:= </font>s <font color="#000080">+ </font><font color="#800000">'0'
                      </font><font color="#FF0000"><b>else </b></font>s<font color="#000080">:= </font>s <font color="#000080">+ </font><font color="#800000">'1'</font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">; 

    </font><font color="#008000"><i>{translate a binary string32 into a long variable}
    </i></font><font color="#FF0000"><b>procedure </b></font>binstr2long<font color="#000080">(</font>s<font color="#000080">: </font>string32<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>l<font color="#000080">:</font>long<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>e<font color="#000080">:</font>boolean<font color="#000080">);
    </font><font color="#FF0000"><b>var
      </b></font>i <font color="#000080">: </font>integer<font color="#000080">;
      </font>w <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">8</font><font color="#000080">];
      </font>b <font color="#000080">: </font>byte<font color="#000080">;
  
      </font><font color="#008000"><i>{translate a binary string8 into a byte}
      </i></font><font color="#FF0000"><b>procedure </b></font>binstr2byte<font color="#000080">(</font>s<font color="#000080">:</font>string8<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>y<font color="#000080">:</font>byte<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>e<font color="#000080">:</font>boolean<font color="#000080">);
      </font><font color="#FF0000"><b>var
        </b></font>i   <font color="#000080">: </font>integer<font color="#000080">;
        </font>v   <font color="#000080">: </font>integer<font color="#000080">;
        </font>c   <font color="#000080">: </font>integer<font color="#000080">;
        </font>b   <font color="#000080">: </font>byte<font color="#000080">;
      </font><font color="#FF0000"><b>begin
        </b></font>y<font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
        </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">8 </font><font color="#FF0000"><b>do begin
          </b></font>val<font color="#000080">(</font>s<font color="#000080">[</font>i<font color="#000080">],</font>v<font color="#000080">,</font>c<font color="#000080">);
          </font>e<font color="#000080">:= </font><font color="#FF0000"><b>not</b></font><font color="#000080">(</font>c <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">);
          </font><font color="#FF0000"><b>if </b></font>e <font color="#FF0000"><b>then </b></font>exit<font color="#000080">;
          </font>b<font color="#000080">:= </font>v <font color="#000080">* </font>trunc<font color="#000080">(</font>power<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">,(</font><font color="#800000">8</font><font color="#000080">-</font>i<font color="#000080">),</font>e<font color="#000080">));
          </font>y<font color="#000080">:= </font>y <font color="#FF0000"><b>or </b></font>b<font color="#000080">;
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

    </font><font color="#FF0000"><b>begin  </b></font><font color="#008000"><i>{binstr2long}
      </i></font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">3 </font><font color="#FF0000"><b>do begin
        </b></font>w<font color="#000080">:= </font>copy<font color="#000080">(</font>s<font color="#000080">,(</font>i<font color="#000080">*</font><font color="#800000">8</font><font color="#000080">)+</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">8</font><font color="#000080">);
        </font>binstr2byte<font color="#000080">(</font>w<font color="#000080">,</font>b<font color="#000080">,</font>e<font color="#000080">);
        </font>l<font color="#000080">[</font><font color="#800000">3 </font><font color="#000080">- </font>i<font color="#000080">]:= </font>b<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>begin </b></font><font color="#008000"><i>{real2long}
    </i></font>intreal2binstr<font color="#000080">(</font>r<font color="#000080">,</font>s<font color="#000080">,</font>e<font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font>e <font color="#FF0000"><b>then </b></font>exit<font color="#000080">;
    </font>binstr2long<font color="#000080">(</font>s<font color="#000080">,</font>l<font color="#000080">,</font>e<font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font>e <font color="#FF0000"><b>then </b></font>exit<font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{translate a string8 (a number in hex notation) into a long variable} 
  </i></font><font color="#FF0000"><b>procedure </b></font>str2long<font color="#000080">(</font>s<font color="#000080">:</font>string8<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>l<font color="#000080">:</font>long<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>e<font color="#000080">: </font>boolean<font color="#000080">);
  </font><font color="#FF0000"><b>var
    </b></font>i <font color="#000080">: </font>integer<font color="#000080">;
    </font>c <font color="#000080">: </font>integer<font color="#000080">;
    </font>v <font color="#000080">: </font>integer<font color="#000080">;
    </font>sb <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">3</font><font color="#000080">] </font><font color="#FF0000"><b>of string</b></font><font color="#000080">[</font><font color="#800000">3</font><font color="#000080">];
  </font><font color="#FF0000"><b>begin
    for </b></font>i<font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">3 </font><font color="#FF0000"><b>do begin
      </b></font>sb<font color="#000080">[</font>i<font color="#000080">]:= </font><font color="#800000">'$' </font><font color="#000080">+ </font>copy<font color="#000080">(</font>s<font color="#000080">,(</font><font color="#800000">7</font><font color="#000080">-(</font>i<font color="#000080">*</font><font color="#800000">2</font><font color="#000080">)),</font><font color="#800000">2</font><font color="#000080">);
      </font>val<font color="#000080">(</font>sb<font color="#000080">[</font>i<font color="#000080">],</font>v<font color="#000080">,</font>c<font color="#000080">);
      </font>e<font color="#000080">:= </font><font color="#FF0000"><b>not</b></font><font color="#000080">(</font>c <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">);
      </font><font color="#FF0000"><b>if </b></font>e <font color="#FF0000"><b>then </b></font>exit<font color="#000080">;
      </font>l<font color="#000080">[</font>i<font color="#000080">]:= </font>v<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{translate an integer into a long variable}
  </i></font><font color="#FF0000"><b>procedure </b></font>int2long<font color="#000080">(</font>i<font color="#000080">:</font>integer<font color="#000080">; </font><font color="#FF0000"><b>var </b></font>l<font color="#000080">: </font>long<font color="#000080">);
  </font><font color="#FF0000"><b>begin
    </b></font>fillchar<font color="#000080">(</font>l<font color="#000080">,</font>sizeof<font color="#000080">(</font>l<font color="#000080">),</font><font color="#800000">0</font><font color="#000080">);
    </font>move<font color="#000080">(</font>i<font color="#000080">,</font>l<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{&quot;shr 8&quot; for long variables}
  </i></font><font color="#FF0000"><b>procedure </b></font>shr8<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>a<font color="#000080">,</font>b<font color="#000080">: </font>long<font color="#000080">);
  </font><font color="#FF0000"><b>var
    </b></font>i <font color="#000080">: </font>integer<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    for </b></font>i<font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">2 </font><font color="#FF0000"><b>do
      </b></font>b<font color="#000080">[</font>i<font color="#000080">]:= </font>a<font color="#000080">[(</font>i<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">)];
    </font>b<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">]:= </font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{&quot;xor&quot; for long variables}
  </i></font><font color="#FF0000"><b>procedure </b></font>xorl<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>a<font color="#000080">,</font>b<font color="#000080">,</font>c <font color="#000080">: </font>long<font color="#000080">);
  </font><font color="#FF0000"><b>var
    </b></font>i <font color="#000080">: </font>integer<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    for </b></font>i<font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">3 </font><font color="#FF0000"><b>do
      </b></font>c<font color="#000080">[</font>i<font color="#000080">]:= </font>a<font color="#000080">[</font>i<font color="#000080">] </font><font color="#FF0000"><b>xor </b></font>b<font color="#000080">[</font>i<font color="#000080">];
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{&quot;and&quot; for long variables}
  </i></font><font color="#FF0000"><b>procedure </b></font>andl<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>a<font color="#000080">,</font>b<font color="#000080">,</font>c <font color="#000080">: </font>long<font color="#000080">);
  </font><font color="#FF0000"><b>var
    </b></font>i <font color="#000080">: </font>integer<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    for </b></font>i<font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">3 </font><font color="#FF0000"><b>do
      </b></font>c<font color="#000080">[</font>i<font color="#000080">]:= </font>a<font color="#000080">[</font>i<font color="#000080">] </font><font color="#FF0000"><b>and </b></font>b<font color="#000080">[</font>i<font color="#000080">];
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>BEGIN
END</b></font><font color="#000080">.</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to STRINGS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0086.PAS">Original</a><b>]</b></p></body>
</html>
