<html>
<head><title> "Fastest UPPERCASE" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to STRINGS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0019.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#008000"><i>{ The following remains the fastest all-purpose UpperCase routine (using only 32
bytes): }

  </i></font><font color="#FF0000"><b>procedure </b></font>Upper4<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>Str<font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">);
  </font><font color="#FF0000"><b>InLine</b></font><font color="#000080">(
    </font><font color="#800000">$8C</font><font color="#000080">/</font><font color="#800000">$DA</font><font color="#000080">/               </font><font color="#008000"><i>{      mov   DX,DS               }
    </i></font><font color="#800000">$5E</font><font color="#000080">/                   </font><font color="#008000"><i>{      pop   SI                  }
    </i></font><font color="#800000">$1F</font><font color="#000080">/                   </font><font color="#008000"><i>{      pop   DS                  }
    </i></font><font color="#800000">$FC</font><font color="#000080">/                   </font><font color="#008000"><i>{      cld                       }
    </i></font><font color="#800000">$AC</font><font color="#000080">/                   </font><font color="#008000"><i>{      lodsb                     }
    </i></font><font color="#800000">$30</font><font color="#000080">/</font><font color="#800000">$E4</font><font color="#000080">/               </font><font color="#008000"><i>{      xor   AH,AH               }
    </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$C1</font><font color="#000080">/               </font><font color="#008000"><i>{      mov   CX,AX               }
    </i></font><font color="#800000">$E3</font><font color="#000080">/</font><font color="#800000">$12</font><font color="#000080">/               </font><font color="#008000"><i>{      jcxz  @30                 }
    </i></font><font color="#800000">$BB</font><font color="#000080">/</font>Ord<font color="#000080">(</font><font color="#800000">'a'</font><font color="#000080">)/</font>Ord<font color="#000080">(</font><font color="#800000">'z'</font><font color="#000080">)/ </font><font color="#008000"><i>{      mov   BX,'za'             }
    </i></font><font color="#800000">$AC</font><font color="#000080">/                   </font><font color="#008000"><i>{ @15: lodsb                     }
    </i></font><font color="#800000">$38</font><font color="#000080">/</font><font color="#800000">$D8</font><font color="#000080">/               </font><font color="#008000"><i>{      cmp   AL,BL               }
    </i></font><font color="#800000">$72</font><font color="#000080">/</font><font color="#800000">$08</font><font color="#000080">/               </font><font color="#008000"><i>{      jb    @28                 }
    </i></font><font color="#800000">$38</font><font color="#000080">/</font><font color="#800000">$F8</font><font color="#000080">/               </font><font color="#008000"><i>{      cmp   AL,BH               }
    </i></font><font color="#800000">$77</font><font color="#000080">/</font><font color="#800000">$04</font><font color="#000080">/               </font><font color="#008000"><i>{      ja    @28                 }
    </i></font><font color="#800000">$80</font><font color="#000080">/</font><font color="#800000">$6C</font><font color="#000080">/</font><font color="#800000">$FF</font><font color="#000080">/</font><font color="#800000">$20</font><font color="#000080">/       </font><font color="#008000"><i>{      sub   BYTE PTR [SI-1],$20 }
    </i></font><font color="#800000">$E2</font><font color="#000080">/</font><font color="#800000">$F1</font><font color="#000080">/               </font><font color="#008000"><i>{ @28: loop  @15                 }
    </i></font><font color="#800000">$8E</font><font color="#000080">/</font><font color="#800000">$DA</font><font color="#000080">);              </font><font color="#008000"><i>{ @30: mov   DS,DX               }

{ &gt;    *30,000 times on a 40 MHz 386 Tested on a 33 Mhz 386. }

</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to STRINGS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0019.PAS">Original</a><b>]</b></p></body>
</html>
