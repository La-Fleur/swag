<html>
<head><title> "COMMA.PAS" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to STRINGS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0003.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{ CB&gt; ...I work For a bank and would like to create a Program to
 CB&gt; maintain better Record of our Cashier Checks and also any
 CB&gt; stop payments on them..I have done very little Programming
 CB&gt; on pascal. Ok here goes:
 CB&gt;         I would like to make the input of numbers to move
 CB&gt;         from a fixed point to the left and insert commas
 CB&gt;         every three digits For monetary figures?

You will need to set up a dedicated Character by Character input routine using
ReadKey and controlling the display yourself.  After each Character is entered
examine it and determine whether or not to add a comma.  The following very
simple (and untested) routine demonstrates this.

For a better way to do such input find and download TCSEL003.* from a PDN node
near you and study the KEYINPUT Unit.  You may be able to modify it to do
exactly what you want or perhaps use it as a guide to producing your own
&quot;bullet proof&quot; input routine.
}
</i></font><font color="#FF0000"><b>Uses
  </b></font>Crt<font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>LastPos<font color="#000080">(</font>ch <font color="#000080">: </font>Char<font color="#000080">; </font>S <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">): </font>Byte<font color="#000080">;
  </font><font color="#008000"><i>{ Returns the last position of ch in S or zero if ch not in S }
  </i></font><font color="#FF0000"><b>Var
    </b></font>x   <font color="#000080">: </font>Word<font color="#000080">;
    </font>len <font color="#000080">: </font>Byte <font color="#FF0000"><b>Absolute </b></font>S<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>x <font color="#000080">:= </font>succ<font color="#000080">(</font>len<font color="#000080">);
    </font><font color="#FF0000"><b>Repeat
      </b></font>dec<font color="#000080">(</font>x<font color="#000080">);
    </font><font color="#FF0000"><b>Until </b></font><font color="#000080">(</font>x <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>S<font color="#000080">[</font>x<font color="#000080">] = </font>ch<font color="#000080">);
    </font>LastPos <font color="#000080">:= </font>x<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;  </font><font color="#008000"><i>{ LastPos }


</i></font><font color="#FF0000"><b>Procedure </b></font>GetNumber<font color="#000080">(</font>fieldwidth<font color="#000080">: </font>Byte<font color="#000080">);
  </font><font color="#FF0000"><b>Var </b></font>ch <font color="#000080">: </font>Char<font color="#000080">;
      </font>x<font color="#000080">,</font>y<font color="#000080">: </font>Byte<font color="#000080">;
      </font>i  <font color="#000080">: </font>Word<font color="#000080">;
      </font>st <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>st <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
    </font>Write<font color="#000080">(</font><font color="#800000">'Enter a number: '</font><font color="#000080">);
    </font>x <font color="#000080">:= </font>WhereX<font color="#000080">;
    </font>y <font color="#000080">:= </font>WhereY<font color="#000080">;
    </font><font color="#FF0000"><b>Repeat
      </b></font>ch <font color="#000080">:= </font>ReadKey<font color="#000080">;
      </font><font color="#FF0000"><b>Case </b></font>ch <font color="#FF0000"><b>of
        </b></font><font color="#800000">'0'</font><font color="#000080">..</font><font color="#800000">'9'</font><font color="#000080">: </font><font color="#FF0000"><b>begin
                    if </b></font>LastPos<font color="#000080">(</font><font color="#800000">','</font><font color="#000080">,</font>st<font color="#000080">) = </font>length<font color="#000080">(</font>st<font color="#000080">)-</font><font color="#800000">3 </font><font color="#FF0000"><b>then
                      </b></font>st <font color="#000080">:= </font>st <font color="#000080">+ </font><font color="#800000">','</font><font color="#000080">;
                    </font>st <font color="#000080">:= </font>st <font color="#000080">+ </font>ch<font color="#000080">;
                  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
        </font><font color="#800000">#8      </font><font color="#000080">: </font><font color="#FF0000"><b>begin
                    </b></font>delete<font color="#000080">(</font>st<font color="#000080">,</font>length<font color="#000080">(</font>st<font color="#000080">),</font><font color="#800000">1</font><font color="#000080">);
                    </font><font color="#FF0000"><b>if </b></font>st<font color="#000080">[</font>length<font color="#000080">(</font>st<font color="#000080">)] = </font><font color="#800000">',' </font><font color="#FF0000"><b>then
                      </b></font>delete<font color="#000080">(</font>st<font color="#000080">,</font>length<font color="#000080">(</font>st<font color="#000080">),</font><font color="#800000">1</font><font color="#000080">);
                  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
        </font><font color="#800000">#13     </font><font color="#000080">: </font>Exit<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font>gotoXY<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">);
      </font>Write<font color="#000080">(</font>st<font color="#000080">:</font>fieldwidth<font color="#000080">);
    </font><font color="#FF0000"><b>Until </b></font>False<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>Writeln<font color="#000080">;
  </font>Writeln<font color="#000080">;
  </font>getnumber<font color="#000080">(</font><font color="#800000">14</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to STRINGS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0003.PAS">Original</a><b>]</b></p></body>
</html>
