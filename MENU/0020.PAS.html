<html>
<head><title> "Lightbar Menu - Update" by RODRIGO M. SILVEIRA</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to MENU SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0020.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>(*
  Some people asked me about a new version of light_bar Here it is, enjoy it!

  This is a simple LIGHTBAR example.
  You can change and distribute it freely.
  Any doubt, bug or suggestion
  please, E-Mail me at:

  arlindo@solar.com.br

  Or write me:

  SQS 113 Bl &quot;G&quot; Apto 102
  Brazil - Bras&iexcl;lia - DF
  Cep: 70.376-070

  Written By Z&icirc;U$ - Rodrigo M. Silveira - Brazil -  Brasilia
*)

</i></font><font color="#FF0000"><b>Program </b></font>Light_bar<font color="#000080">;

</font><font color="#FF0000"><b>uses </b></font>crt<font color="#000080">;

</font><font color="#FF0000"><b>const </b></font><font color="#008000"><i>{ Constants }
  </i></font>colort <font color="#000080">= </font><font color="#800000">1</font><font color="#000080">; </font><font color="#008000"><i>{ Bacground color of tagged entries }
  </i></font>sc <font color="#000080">= </font><font color="#800000">'CoDeD By G0D ZEU$'</font><font color="#000080">; </font><font color="#008000"><i>{ The Little Scrooler }

</i></font><font color="#FF0000"><b>var </b></font><font color="#008000"><i>{ Variables }
  </i></font>Local    <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">4</font><font color="#000080">] </font><font color="#FF0000"><b>of String</b></font><font color="#000080">; </font><font color="#008000"><i>{ The Option variable }
  </i></font>Desc     <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">4</font><font color="#000080">] </font><font color="#FF0000"><b>of String</b></font><font color="#000080">; </font><font color="#008000"><i>{ The Descriptions }
  </i></font>by       <font color="#000080">: </font>Byte<font color="#000080">; </font><font color="#008000"><i>{ Needed to to a for loop }

</i></font><font color="#FF0000"><b>Function </b></font>LightBar<font color="#000080">(</font>n<font color="#000080">:</font>Byte<font color="#000080">;</font><font color="#FF0000"><b>var </b></font>lo<font color="#000080">,</font>De<font color="#000080">:</font><font color="#FF0000"><b>Array of String</b></font><font color="#000080">):</font>Byte<font color="#000080">;
</font><font color="#008000"><i>{ n = Number of options, Lo = Option string, De = Description String }
{ It will return the Number of option selected                       }
</i></font><font color="#FF0000"><b>var
  </b></font>k      <font color="#000080">: </font>char<font color="#000080">;
  </font>b<font color="#000080">,</font>c<font color="#000080">,</font>i  <font color="#000080">: </font>byte<font color="#000080">;
  </font>ii     <font color="#000080">: </font>Boolean<font color="#000080">;

  </font><font color="#FF0000"><b>Procedure </b></font>scr<font color="#000080">; </font><font color="#008000"><i>{ The little scrooler procedure }
  </i></font><font color="#FF0000"><b>begin
    </b></font>inc<font color="#000080">(</font>i<font color="#000080">);
    </font>TextAttr<font color="#000080">:=</font><font color="#800000">$0F</font><font color="#000080">; </font><font color="#008000"><i>{ Set Background to 0 and TextColor to 15 = $F }
    </i></font><font color="#FF0000"><b>if </b></font>i <font color="#000080">= </font><font color="#800000">80</font><font color="#000080">-</font>length<font color="#000080">(</font>sc<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>ii <font color="#000080">:= </font>true<font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font>ii <font color="#FF0000"><b>Then </b></font>i <font color="#000080">:= </font>i<font color="#000080">-</font><font color="#800000">2</font><font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font>i <font color="#000080">= </font><font color="#800000">1 </font><font color="#FF0000"><b>then </b></font>ii <font color="#000080">:= </font>false<font color="#000080">;
    </font>gotoxy<font color="#000080">(</font>i<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
    </font>write<font color="#000080">(</font>sc<font color="#000080">);
    </font><font color="#FF0000"><b>while </b></font><font color="#000080">(</font>port<font color="#000080">[</font><font color="#800000">$3da</font><font color="#000080">] </font><font color="#FF0000"><b>and </b></font><font color="#800000">8</font><font color="#000080">)&lt;&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>do</b></font><font color="#000080">; </font><font color="#008000"><i>{ retrace, better than a delay ! }
    </i></font><font color="#FF0000"><b>while </b></font><font color="#000080">(</font>port<font color="#000080">[</font><font color="#800000">$3da</font><font color="#000080">] </font><font color="#FF0000"><b>and </b></font><font color="#800000">8</font><font color="#000080">)=</font><font color="#800000">0 </font><font color="#FF0000"><b>do</b></font><font color="#000080">;  </font><font color="#008000"><i>{ We can Read the Scrool easily  }
    </i></font>Fillchar<font color="#000080">(</font>MEM<font color="#000080">[</font><font color="#800000">$B800</font><font color="#000080">:</font><font color="#800000">0</font><font color="#000080">],</font><font color="#800000">160</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>Procedure </b></font>start<font color="#000080">; </font><font color="#008000"><i>{ Writes all the options with 1 tagged }
  </i></font><font color="#FF0000"><b>begin
    </b></font>TextAttr<font color="#000080">:=</font><font color="#800000">$0F</font><font color="#000080">;
    </font><font color="#FF0000"><b>for </b></font>by <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>n<font color="#000080">-</font><font color="#800000">1 </font><font color="#FF0000"><b>do
    begin
      </b></font>gotoxy<font color="#000080">((</font><font color="#800000">80</font><font color="#000080">-</font>Length<font color="#000080">(</font>lo<font color="#000080">[</font>by<font color="#000080">])) </font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">,((</font><font color="#800000">25</font><font color="#000080">-</font>n<font color="#000080">) </font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">)+</font>by<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">);
      </font><font color="#008000"><i>{      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^Centralize}
      </i></font>write<font color="#000080">(</font>lo<font color="#000080">[</font>by<font color="#000080">]);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>TextAttr<font color="#000080">:=</font><font color="#800000">$1F</font><font color="#000080">;
    </font>gotoxy<font color="#000080">((</font><font color="#800000">80</font><font color="#000080">-</font>Length<font color="#000080">(</font>lo<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">])) </font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">,((</font><font color="#800000">25</font><font color="#000080">-</font>n<font color="#000080">) </font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">)+</font><font color="#800000">1</font><font color="#000080">);
    </font>write<font color="#000080">(</font>lo<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]);
    </font>gotoxy<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">25</font><font color="#000080">); </font>clreol<font color="#000080">;
    </font>gotoxy<font color="#000080">((</font><font color="#800000">80</font><font color="#000080">-</font>length<font color="#000080">(</font>De<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">])) </font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">25</font><font color="#000080">);
    </font>write<font color="#000080">(</font>de<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>Procedure </b></font>St<font color="#000080">; </font><font color="#008000"><i>{ tag new option and untag the old }
  </i></font><font color="#FF0000"><b>begin
    if </b></font>b<font color="#000080">&lt;</font><font color="#800000">254 </font><font color="#FF0000"><b>Then Begin
      </b></font><font color="#008000"><i>{ var c = Old Tagged; b = New tagged }
      </i></font>gotoxy<font color="#000080">((</font><font color="#800000">80</font><font color="#000080">-</font>Length<font color="#000080">(</font>lo<font color="#000080">[</font>c<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">])) </font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">,((</font><font color="#800000">25</font><font color="#000080">-</font>n<font color="#000080">) </font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">)+</font>c<font color="#000080">);
      </font>textbackground<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
      </font>write<font color="#000080">(</font>lo<font color="#000080">[</font>c<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">]);
      </font>gotoxy<font color="#000080">((</font><font color="#800000">80</font><font color="#000080">-</font>Length<font color="#000080">(</font>lo<font color="#000080">[</font>b<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">])) </font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">,((</font><font color="#800000">25</font><font color="#000080">-</font>n<font color="#000080">) </font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">)+</font>b<font color="#000080">);
      </font>textbackground<font color="#000080">(</font>colort<font color="#000080">);
      </font>write<font color="#000080">(</font>lo<font color="#000080">[</font>b<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">]);
      </font>gotoxy<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">25</font><font color="#000080">); </font>clreol<font color="#000080">;
      </font>gotoxy<font color="#000080">((</font><font color="#800000">80</font><font color="#000080">-</font>length<font color="#000080">(</font>De<font color="#000080">[</font>b<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">])) </font><font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">25</font><font color="#000080">);
      </font>write<font color="#000080">(</font>de<font color="#000080">[</font>b<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">]);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>procedure </b></font>re<font color="#000080">; </font><font color="#008000"><i>{ Procedure to get the key and explore it... }
  </i></font><font color="#FF0000"><b>begin
    </b></font>b <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
    </font>i <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
    </font>ii <font color="#000080">:= </font>false<font color="#000080">;
    </font><font color="#FF0000"><b>repeat
      repeat
        repeat
          </b></font>scr<font color="#000080">; </font><font color="#008000"><i>{ No key pressed? let's Scrool until keypressed }
        </i></font><font color="#FF0000"><b>until </b></font>keypressed<font color="#000080">;
        </font>k <font color="#000080">:= </font>upcase<font color="#000080">(</font>readkey<font color="#000080">);
      </font><font color="#FF0000"><b>until </b></font>k <font color="#FF0000"><b>in </b></font><font color="#000080">[</font><font color="#800000">#72</font><font color="#000080">,</font><font color="#800000">#75</font><font color="#000080">,</font><font color="#800000">#80</font><font color="#000080">,</font><font color="#800000">#77</font><font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">#13</font><font color="#000080">,</font><font color="#800000">'A'</font><font color="#000080">,</font><font color="#800000">'Z'</font><font color="#000080">,</font><font color="#800000">'Q'</font><font color="#000080">]; </font><font color="#008000"><i>{ Bad key? BACK! }
      </i></font>c <font color="#000080">:= </font>b<font color="#000080">; </font><font color="#008000"><i>{ Save old option }
      </i></font><font color="#FF0000"><b>case </b></font>k <font color="#FF0000"><b>of
        </b></font><font color="#800000">#72</font><font color="#000080">,</font><font color="#800000">#75</font><font color="#000080">,</font><font color="#800000">'A' </font><font color="#000080">: </font>dec<font color="#000080">(</font>b<font color="#000080">); </font><font color="#008000"><i>{ UP }
        </i></font><font color="#800000">#80</font><font color="#000080">,</font><font color="#800000">#77</font><font color="#000080">,</font><font color="#800000">'Z' </font><font color="#000080">: </font>inc<font color="#000080">(</font>b<font color="#000080">); </font><font color="#008000"><i>{ DOWN }
        </i></font><font color="#800000">#27</font><font color="#000080">,</font><font color="#800000">'Q' </font><font color="#000080">: </font>b <font color="#000080">:= </font><font color="#800000">255</font><font color="#000080">;   </font><font color="#008000"><i>{ ESC }
        </i></font><font color="#800000">#13 </font><font color="#000080">: </font>b <font color="#000080">:= </font><font color="#800000">254</font><font color="#000080">;       </font><font color="#008000"><i>{ ENTER }
      </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font>b <font color="#000080">= </font>n<font color="#000080">+</font><font color="#800000">1 </font><font color="#FF0000"><b>then </b></font>b <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">; </font><font color="#008000"><i>{ it's beyond the limit, go back to 1 }
      </i></font><font color="#FF0000"><b>if </b></font>b <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>b <font color="#000080">:= </font>n<font color="#000080">;   </font><font color="#008000"><i>{ Got an zero, go to the end }
      </i></font><font color="#FF0000"><b>if </b></font>b <font color="#000080">= </font><font color="#800000">254 </font><font color="#FF0000"><b>Then         </b></font><font color="#008000"><i>{ HEI! WE GOT THE OPTION! }
      </i></font><font color="#FF0000"><b>Begin
        </b></font>Lightbar<font color="#000080">:=</font>c<font color="#000080">;          </font><font color="#008000"><i>{ Tell the function that we found it }
        </i></font>b<font color="#000080">:=</font><font color="#800000">255</font><font color="#000080">;               </font><font color="#008000"><i>{ Exit code }
      </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font>st<font color="#000080">;
    </font><font color="#FF0000"><b>until </b></font>b <font color="#000080">= </font><font color="#800000">255</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{Main par of function lightbar }
</i></font><font color="#FF0000"><b>begin
  </b></font>start<font color="#000080">;
  </font>re<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>var </b></font>ab<font color="#000080">:</font>byte<font color="#000080">;

</font><font color="#FF0000"><b>Begin </b></font><font color="#008000"><i>{ Start of the program }
  </i></font><font color="#FF0000"><b>Asm </b></font><font color="#FF00FF">mov ax,$3;int $10;mov ax,$0100;mov cx,$2607;int $10;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#008000"><i>{ Start text mode 80x40 and Hide cursor }
  </i></font>TextAttr<font color="#000080">:=</font><font color="#800000">$0F</font><font color="#000080">; </font><font color="#008000"><i>{ set Background=0 Textcolor=15=($F) }
  { The Option Strings definition }
  </i></font>Local<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]:=</font><font color="#800000">'CoDeD By Rodrigo Silveira'</font><font color="#000080">;
  </font>Local<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">]:=</font><font color="#800000">'Sound'</font><font color="#000080">;
  </font>Local<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">]:=</font><font color="#800000">'About the function'</font><font color="#000080">;
  </font>Local<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">]:=</font><font color="#800000">'The Description of this option is written Down Here'</font><font color="#000080">;
  </font><font color="#008000"><i>{ The Description Strings definition }
  </i></font>Desc<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]:=</font><font color="#800000">'arlindo@solar.com.br'</font><font color="#000080">;
  </font>Desc<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">]:=</font><font color="#800000">'This Text Describes what option sound will do'</font><font color="#000080">;
  </font>Desc<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">]:=</font><font color="#800000">'This function returns the number of the tagged line'</font><font color="#000080">;
  </font>Desc<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">]:=</font><font color="#800000">'Done 4U'</font><font color="#000080">;
  </font>ab <font color="#000080">:= </font>Lightbar<font color="#000080">(</font><font color="#800000">4</font><font color="#000080">,</font>local<font color="#000080">,</font>desc<font color="#000080">);
  </font>TEXTATTR<font color="#000080">:=</font><font color="#800000">$07</font><font color="#000080">;
  </font><font color="#FF0000"><b>Asm </b></font><font color="#FF00FF">mov ax,$3;int $10;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>Write<font color="#000080">(</font><font color="#800000">'Option '</font><font color="#000080">,</font>ab<font color="#000080">,</font><font color="#800000">' Selected'</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font><font color="#008000"><i>{ Written By Z&icirc;U$ - Rodrigo M. Silveira - Brasil - Brasilia }</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to MENU SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0020.PAS">Original</a><b>]</b></p></body>
</html>
