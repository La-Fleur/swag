<html>
<head><title> "Re: Arrow Keys" by PETER LOUWEN</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to MENU SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0006.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>(*
 SB&gt; i have a problem. I want it to show Three Choices Like This;


 SB&gt; Choice #1
 SB&gt; Choice #2
 SB&gt; Choice #3

 SB&gt;
 SB&gt; I want Choice #1 to be in White, and the others to be In Darkgray, if
 SB&gt; they  press down, it will make only #2 White, and the others Darkgray,
 SB&gt; if they press Down again it will make only Choice #3 White, and it will
 SB&gt; Tell Them Which  Choice they choosed on each one if they press enter.
 SB&gt; So if they press Enter  while Choice #1 Was Highlighted, it would say
 SB&gt; 'You Chose Choice Number 1'. and and it will Repeat when you Press the
 SB&gt; arrow keys, untill they press Enter on  anyone of the Choice Choices...

The following should get you started:
*)

</i></font><font color="#FF0000"><b>PROGRAM </b></font>Seans_Menu<font color="#000080">;

</font><font color="#FF0000"><b>USES </b></font>Crt<font color="#000080">;

</font><font color="#FF0000"><b>FUNCTION </b></font>readkeyword<font color="#000080">: </font>word<font color="#000080">; </font><font color="#FF0000"><b>ASSEMBLER</b></font><font color="#000080">;
</font><font color="#008000"><i>{ -- Assumes you have an extended (i.e. non-XT) keyboard.
  -- Returns both scancode and character with one call. }
</i></font><font color="#FF0000"><b>ASM </b></font><font color="#FF00FF">mov ah, $10
    int $16
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>CONST </b></font>Down  <font color="#000080">= </font><font color="#800000">$5000</font><font color="#000080">;
      </font><font color="#008000"><i>{ -- Value returned by ReadKeyword for the down arrow key. }
      </i></font>Up    <font color="#000080">= </font><font color="#800000">$4800</font><font color="#000080">;
      </font>Enter <font color="#000080">= </font><font color="#800000">$1C0D</font><font color="#000080">;
      </font>Esc   <font color="#000080">= </font><font color="#800000">$011B</font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>menu<font color="#000080">(</font><font color="#FF0000"><b>CONST </b></font>nbr_of_choices<font color="#000080">: </font>byte<font color="#000080">;
               </font><font color="#FF0000"><b>VAR   </b></font>selected      <font color="#000080">: </font>byte<font color="#000080">;
               </font><font color="#FF0000"><b>VAR   </b></font>accept        <font color="#000080">: </font>boolean<font color="#000080">);
</font><font color="#008000"><i>{ -- Puts up a menu with NBR_OF_CHOICES choices.
  -- The user can use the up and down arrow keys to select a particular
  -- menu item. Enter then selects, and Esc exits immediately.
  -- On exit, if the user pressed Enter, ACCEPT will be TRUE, and SELECTED
  -- will hold the number of the selected item. If the user cancelled the
  -- selection (Esc pressed), ACCEPT will be FALSE, and SELECTED then is
  -- undefined. }
</i></font><font color="#FF0000"><b>CONST </b></font>StartingCol  <font color="#000080">= </font><font color="#800000">5</font><font color="#000080">;  </font><font color="#008000"><i>{ -- These two determine the top left corner of }
      </i></font>StartingRow  <font color="#000080">= </font><font color="#800000">3</font><font color="#000080">;  </font><font color="#008000"><i>{ -- your menu. }
      </i></font>NormalColour <font color="#000080">= </font>DarkGray<font color="#000080">;
      </font>HiliteColour <font color="#000080">= </font>White<font color="#000080">;
      </font>Str          <font color="#000080">= </font><font color="#800000">'Choice #'</font><font color="#000080">;
</font><font color="#FF0000"><b>VAR </b></font>j<font color="#000080">, </font>TA<font color="#000080">: </font>byte<font color="#000080">;

  </font><font color="#FF0000"><b>PROCEDURE </b></font>beep<font color="#000080">;
  </font><font color="#FF0000"><b>BEGIN </b></font>sound<font color="#000080">(</font><font color="#800000">700</font><font color="#000080">); </font>delay<font color="#000080">(</font><font color="#800000">50</font><font color="#000080">); </font>nosound <font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>PROCEDURE </b></font>DrawCurrentlySelected<font color="#000080">;
  </font><font color="#FF0000"><b>BEGIN </b></font>gotoxy<font color="#000080">(</font>StartingCol<font color="#000080">, </font>StartingRow <font color="#000080">+ </font>selected <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">);
        </font>write<font color="#000080">(</font>Str<font color="#000080">, </font>selected<font color="#000080">:</font><font color="#800000">1</font><font color="#000080">)
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>PROCEDURE </b></font>DoDown<font color="#000080">;
  </font><font color="#FF0000"><b>BEGIN </b></font>DrawCurrentlySelected<font color="#000080">;
        </font><font color="#008000"><i>{ -- Redraw current item in the normal, i.e. unselected, colour. }

        </i></font><font color="#FF0000"><b>IF </b></font>selected <font color="#000080">= </font>nbr_of_choices <font color="#FF0000"><b>THEN </b></font>selected<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>ELSE </b></font>inc<font color="#000080">(</font>selected<font color="#000080">);
        </font>TextAttr<font color="#000080">:=</font>HiliteColour<font color="#000080">;
        </font>DrawCurrentlySelected<font color="#000080">;
        </font><font color="#008000"><i>{ -- Move cursor to newly selected item and redraw in the highlight,
          -- i.e. selected, colour. }
        </i></font>TextAttr<font color="#000080">:=</font>NormalColour
  <font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>PROCEDURE </b></font>DoUp<font color="#000080">;
  </font><font color="#FF0000"><b>BEGIN </b></font>DrawCurrentlySelected<font color="#000080">;
        </font><font color="#FF0000"><b>IF </b></font>selected <font color="#000080">= </font><font color="#800000">1 </font><font color="#FF0000"><b>THEN </b></font>selected<font color="#000080">:=</font>nbr_of_choices <font color="#FF0000"><b>ELSE </b></font>dec<font color="#000080">(</font>selected<font color="#000080">);
        </font>TextAttr<font color="#000080">:=</font>HiliteColour<font color="#000080">;
        </font>DrawCurrentlySelected<font color="#000080">;
        </font>TextAttr<font color="#000080">:=</font>NormalColour
  <font color="#FF0000"><b>END</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>PROCEDURE </b></font>Process<font color="#000080">;
  </font><font color="#008000"><i>{ -- Keep reading keys until user decides s/he has had enough. }
  </i></font><font color="#FF0000"><b>VAR </b></font>finished<font color="#000080">: </font>boolean<font color="#000080">;
      </font>key     <font color="#000080">: </font>word<font color="#000080">;
  </font><font color="#FF0000"><b>BEGIN </b></font>finished<font color="#000080">:=</font>FALSE<font color="#000080">;
        </font><font color="#FF0000"><b>REPEAT </b></font>key<font color="#000080">:=</font>readkeyword<font color="#000080">;
               </font><font color="#FF0000"><b>CASE </b></font>key
               <font color="#FF0000"><b>OF </b></font>Down <font color="#000080">: </font>DoDown<font color="#000080">;
                  </font>Up   <font color="#000080">: </font>DoUp<font color="#000080">;
                  </font>Enter<font color="#000080">: </font><font color="#FF0000"><b>BEGIN </b></font>finished<font color="#000080">:=</font>TRUE<font color="#000080">; </font>accept<font color="#000080">:=</font>TRUE  <font color="#FF0000"><b>END</b></font><font color="#000080">;
                  </font>Esc  <font color="#000080">: </font><font color="#FF0000"><b>BEGIN </b></font>finished<font color="#000080">:=</font>TRUE<font color="#000080">; </font>accept<font color="#000080">:=</font>FALSE <font color="#FF0000"><b>END</b></font><font color="#000080">;
               </font><font color="#FF0000"><b>ELSE </b></font>beep
               <font color="#FF0000"><b>END
        UNTIL </b></font>finished
  <font color="#FF0000"><b>END</b></font><font color="#000080">;
</font><font color="#FF0000"><b>BEGIN </b></font><font color="#008000"><i>(* menu *)
      </i></font>gotoxy<font color="#000080">(</font>StartingCol<font color="#000080">, </font>StartingRow<font color="#000080">);

      </font>TA<font color="#000080">:=</font>TextAttr<font color="#000080">;
      </font><font color="#008000"><i>{ -- If you start messing with the screen colours, it is good
        -- manners to mark the current ones, so you can restore them
        -- when you're through. }

      { -- Now draw all items in the unselected colour: }
      </i></font>TextAttr<font color="#000080">:=</font>NormalColour<font color="#000080">;
      </font><font color="#FF0000"><b>FOR </b></font>j<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>TO </b></font>nbr_of_choices
      <font color="#FF0000"><b>DO BEGIN </b></font>gotoxy<font color="#000080">(</font>StartingCol<font color="#000080">, </font>StartingRow <font color="#000080">+ </font>j <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">);
               </font>write<font color="#000080">(</font>Str<font color="#000080">, </font>j<font color="#000080">:</font><font color="#800000">1</font><font color="#000080">)
         </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

      </font><font color="#008000"><i>{ -- Do first item in selected colour: }
      </i></font>TextAttr<font color="#000080">:=</font>HiliteColour<font color="#000080">;
      </font>selected<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">; </font>DrawCurrentlySelected<font color="#000080">;
      </font>TextAttr<font color="#000080">:=</font>NormalColour<font color="#000080">;

      </font>accept<font color="#000080">:=</font>FALSE<font color="#000080">;
      </font>Process<font color="#000080">;

      </font>TextAttr<font color="#000080">:=</font>TA
<font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>ColourClrscr<font color="#000080">(</font><font color="#FF0000"><b>CONST </b></font>Colour_U_Like<font color="#000080">: </font>byte<font color="#000080">);
</font><font color="#008000"><i>{ -- Clears the screen, colouring all positions.
  -- Not essential, just nice ... }
</i></font><font color="#FF0000"><b>VAR </b></font>TA<font color="#000080">: </font>byte<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN </b></font>TA<font color="#000080">:=</font>TextAttr<font color="#000080">; </font>TextAttr<font color="#000080">:=</font>Colour_U_Like<font color="#000080">;
      </font>clrscr<font color="#000080">;
      </font>TextAttr<font color="#000080">:=</font>TA
<font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#008000"><i>{ -- Main: }

</i></font><font color="#FF0000"><b>VAR </b></font>choice<font color="#000080">: </font>byte<font color="#000080">;
    </font>ok    <font color="#000080">: </font>boolean<font color="#000080">;

</font><font color="#FF0000"><b>BEGIN </b></font>ColourClrscr<font color="#000080">(</font>Blue<font color="#000080">*</font><font color="#800000">16</font><font color="#000080">);
      </font>menu<font color="#000080">(</font><font color="#800000">5</font><font color="#000080">, </font>choice<font color="#000080">, </font>ok<font color="#000080">);
      </font>gotoxy<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">20</font><font color="#000080">);
      </font><font color="#FF0000"><b>IF </b></font>ok
      <font color="#FF0000"><b>THEN </b></font>writeln<font color="#000080">(</font><font color="#800000">'You chose nr. '</font><font color="#000080">, </font>choice<font color="#000080">:</font><font color="#800000">1</font><font color="#000080">)
      </font><font color="#FF0000"><b>ELSE </b></font>writeln<font color="#000080">(</font><font color="#800000">'You aborted ...'</font><font color="#000080">)
</font><font color="#FF0000"><b>END</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to MENU SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0006.PAS">Original</a><b>]</b></p></body>
</html>
