<html>
<head><title> "Overlay Library" by ALEX RUSSKIH</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EXEC SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0038.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{ Have NO IDEA what the message say ..  they are in Russian ! GDAVIS}
{$IFDEF VIRTUALPASCAL}
</i></font><font color="#000080">Ка&ordf;&uml;&yen; &cent; </font>OS<font color="#000080">/</font><font color="#800000">2 </font><font color="#000080">&cent;&reg;&reg;&iexcl;&eacute;&yen; &shy;&reg;&pound;
&acirc; &iexcl;&euml;&acirc;&igrave; &reg;&cent;&yen;</font>p<font color="#000080">&laquo;&yen;&uml; ? В&euml; &cent; &aacute;&cent;&reg;&yen;&shy;
&shy;&yen; ? :)
</font><font color="#008000"><i>{$ENDIF}
{$IFDEF DPMI}
</i></font><font color="#000080">Ка&ordf;&uml;&yen; &cent; </font>DPMI <font color="#000080">&cent;&reg;&reg;&iexcl;&eacute;&yen; &shy;&reg;&pound;
&acirc; &iexcl;&euml;&acirc;&igrave; &reg;&cent;&yen;</font>p<font color="#000080">&laquo;&yen;&uml; ? В&euml; &cent; &aacute;&cent;&reg;&yen;&shy;
&shy;&yen; ? :)
</font><font color="#008000"><i>{$ENDIF}
{$IFDEF OS2}
</i></font><font color="#000080">Ка&ordf;&uml;&yen; &cent; </font>OS<font color="#000080">/</font><font color="#800000">2 </font><font color="#000080">&cent;&reg;&reg;&iexcl;&eacute;&yen; &shy;&reg;&pound;
&acirc; &iexcl;&euml;&acirc;&igrave; &reg;&cent;&yen;</font>p<font color="#000080">&laquo;&yen;&uml; ? В&euml; &cent; &aacute;&cent;&reg;&yen;&shy;
&shy;&yen; ? :)
</font><font color="#008000"><i>{$ENDIF}

</i></font><font color="#FF0000"><b>Unit </b></font>MainOvr<font color="#000080">;
</font><font color="#FF0000"><b>Interface

Uses </b></font>Overlay<font color="#000080">,</font>Dos<font color="#000080">;

</font><font color="#FF0000"><b>Implementation

</b></font><font color="#008000"><i>{.$DEFINE BUILDEXE}

</i></font><font color="#FF0000"><b>Var
   </b></font>Ovr_Name <font color="#000080">: </font>PathStr<font color="#000080">;
          </font>D <font color="#000080">: </font>DirStr<font color="#000080">;
          </font>N <font color="#000080">: </font>NameStr<font color="#000080">;
          </font>E <font color="#000080">: </font>ExtStr<font color="#000080">;

</font><font color="#FF0000"><b>Begin
  </b></font>FSplit<font color="#000080">(</font>ParamStr<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">),</font>D<font color="#000080">,</font>N<font color="#000080">,</font>E<font color="#000080">);
</font><font color="#008000"><i>{$IFDEF BUILDEXE}
  </i></font>Ovr_Name<font color="#000080">:=</font>D<font color="#000080">+</font>N<font color="#000080">+</font><font color="#800000">'.EXE'</font><font color="#000080">;
</font><font color="#008000"><i>{$ELSE}
  </i></font>Ovr_Name<font color="#000080">:=</font>D<font color="#000080">+</font>N<font color="#000080">+</font><font color="#800000">'.OVR'</font><font color="#000080">;
</font><font color="#008000"><i>{$ENDIF}
  </i></font><font color="#FF0000"><b>Repeat
    </b></font>OvrInit<font color="#000080">(</font>ovr_name<font color="#000080">);
    </font><font color="#FF0000"><b>If </b></font>OvrResult<font color="#000080">=</font>OvrNotFound
      <font color="#FF0000"><b>Then
        Begin
          </b></font>WriteLn<font color="#000080">(</font><font color="#800000">'О&cent;&yen;&agrave;&laquo;&yen;&copy;н&euml;&copy; &auml;а&copy;&laquo; н&yen; на&copy;&curren;&yen;н : '</font><font color="#000080">,</font>ovr_name<font color="#000080">);
          </font>Write  <font color="#000080">(</font><font color="#800000">'В&cent;&yen;&curren;&uml;&acirc;&yen; &macr;&agrave;а&cent;&uml;&laquo;&igrave;н&reg;&yen; &uml;&shy;&iuml; :'</font><font color="#000080">);
          </font>ReadLn<font color="#000080">(</font>Ovr_Name<font color="#000080">);
        </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>Until </b></font>OvrResult<font color="#000080">&lt;&gt;</font>OvrNotFound<font color="#000080">;
  </font><font color="#FF0000"><b>If </b></font>OvrResult<font color="#000080">&lt;&gt;</font>OvrOk
    <font color="#FF0000"><b>Then
      Begin
        </b></font>WriteLn<font color="#000080">(</font><font color="#800000">'О&egrave;&uml;&iexcl;&ordf;а а&curren;&shy;&uml;н&uml;&aacute;&acirc;&agrave;а&acirc;&reg;&agrave;а &reg;&cent;e&agrave;&laquo;&yen;&yen;&cent; '</font><font color="#000080">,</font>OvrResult<font color="#000080">);
</font><font color="#008000"><i>{$IFDEF STONYBROOK}
        </i></font>Halt<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
</font><font color="#008000"><i>{$ELSE}
        </i></font>RunError<font color="#000080">;
</font><font color="#008000"><i>{$ENDIF}
      </i></font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font>OvrInitEMS<font color="#000080">;
  </font><font color="#FF0000"><b>If </b></font>OvrResult<font color="#000080">&lt;&gt;</font>OvrOk
    <font color="#FF0000"><b>Then
      Begin
        Case </b></font>OvrResult <font color="#FF0000"><b>Of
          </b></font>OvrNoEMSDriver <font color="#000080">: </font>Write<font color="#000080">(</font><font color="#800000">'Д&agrave;а&copy;&cent;&yen;&agrave; EMS н&yen;&aacute;&acirc;ан&reg;&cent;&laquo;&yen;н'</font><font color="#000080">);
          </font>OvrNoEMSMemory <font color="#000080">: </font>Write<font color="#000080">(</font><font color="#800000">'Ма&laquo;&reg; &aacute;&cent;&reg;&iexcl;&reg;&curren;н&reg;&copy; EMS &macr;а&shy;&iuml;&acirc;&uml;'</font><font color="#000080">);
          </font>OvrIOError     <font color="#000080">: </font>Write<font color="#000080">(</font><font color="#800000">'О&egrave;&uml;&iexcl;&ordf;а &ccedil;&acirc;&yen;н&uml;&iuml; &auml;а&copy;&laquo;а'</font><font color="#000080">);
        </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
        </font>Write<font color="#000080">(</font><font color="#800000">' - EMS &macr;а&shy;&iuml;&acirc;&igrave; н&yen; &uml;&aacute;&macr;&reg;&laquo;&igrave;&sect;&yen;&acirc;&aacute;&iuml;.'</font><font color="#000080">);
      </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
  </font>OvrSetRetry<font color="#000080">(</font>OvrGetBuf <font color="#FF0000"><b>div </b></font><font color="#800000">3</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EXEC SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0038.PAS">Original</a><b>]</b></p></body>
</html>
