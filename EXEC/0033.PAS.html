<html>
<head><title> "EXE File Format Header" by JOHN STEPHENSON</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to EXEC SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0033.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt; Now my only questions are, does
&gt; anybody know the structure of an EXE header, and where do batch files
&gt; fit into this whole mess.  Also, anybody know if I'm wrong?

 Batch files are interpreted by the COMMAND.COM, or NDOS.COM etc.  They
can not be run by any interrupt.

 The structure of an .exe header is:
}
  </i></font>exehdr <font color="#000080">= </font><font color="#FF0000"><b>record
    </b></font>sig<font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">2</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Char<font color="#000080">; </font><font color="#008000"><i>{ 4Dh, 5Ah signature (sometimes 5Ah, 4Dh) }
    </i></font>rem512<font color="#000080">,         </font><font color="#008000"><i>{ image size remainder (program size mod 512, not including header)}
    </i></font>pages<font color="#000080">,          </font><font color="#008000"><i>{ number of 512-byte pages needed to hold .EXE file (incl header)}
    </i></font>RelocSize<font color="#000080">,      </font><font color="#008000"><i>{ number of relocation items}
    </i></font>hsize<font color="#000080">,          </font><font color="#008000"><i>{ header size in paragraphs}
    </i></font>minextra<font color="#000080">,       </font><font color="#008000"><i>{ minimum extra paragraphs needed}
    </i></font>maxextra<font color="#000080">,       </font><font color="#008000"><i>{ maximum extra paragraphs needed}
    </i></font>SSeg<font color="#000080">,           </font><font color="#008000"><i>{ stack segment}
    </i></font>SOfs<font color="#000080">,           </font><font color="#008000"><i>{ stack offset}
    </i></font>chksum<font color="#000080">: </font>Word<font color="#000080">;   </font><font color="#008000"><i>{ word checksum of entire file}
    </i></font>Entry<font color="#000080">: </font>Pointer<font color="#000080">; </font><font color="#008000"><i>{ initial CS:IP}
    </i></font>Reloc<font color="#000080">,          </font><font color="#008000"><i>{ offset of relocation table}
    </i></font>Overlay<font color="#000080">: </font>Word<font color="#000080">;  </font><font color="#008000"><i>{ overlay number}
    </i></font>Junk<font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">$1c</font><font color="#000080">..</font><font color="#800000">$3b</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte<font color="#000080">;
    </font>New_Exe_Ofs<font color="#000080">: </font>LongInt<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to EXEC SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0033.PAS">Original</a><b>]</b></p></body>
</html>
