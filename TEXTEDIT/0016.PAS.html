<html>
<head><title> "EDITLINE Unit" by SWAG TEAM SUPPORT</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to TEXTEDIT SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0016.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#FF0000"><b>Unit </b></font>EditLine<font color="#000080">;
</font><font color="#008000"><i>{$O+,F+}

</i></font><font color="#FF0000"><b>interface

Const </b></font>CrLf<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">2</font><font color="#000080">]=</font><font color="#800000">#13</font><font color="#000080">+</font><font color="#800000">#10</font><font color="#000080">;


</font><font color="#FF0000"><b>Type </b></font>EditorFuncFlagsType <font color="#000080">= </font><font color="#FF0000"><b>set of </b></font><font color="#000080">(</font>Ins<font color="#000080">,</font>Caps<font color="#000080">,</font>EchoDots<font color="#000080">);
     </font>EditorExitType <font color="#000080">= (</font>Up<font color="#000080">,</font>Down<font color="#000080">,</font>Enter<font color="#000080">,</font>Tab<font color="#000080">,</font>Esc<font color="#000080">);
     </font>EditorExitAllowType <font color="#000080">= </font><font color="#FF0000"><b>Set of </b></font>EditorExitType<font color="#000080">;

     </font>WriteType <font color="#000080">= </font><font color="#FF0000"><b>Procedure </b></font><font color="#000080">(</font>s<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">);
     </font>movexType <font color="#000080">= </font><font color="#FF0000"><b>Procedure </b></font><font color="#000080">(</font>x<font color="#000080">:</font>integer<font color="#000080">);
     </font>WhereXType <font color="#000080">= </font><font color="#FF0000"><b>Function</b></font><font color="#000080">:</font>byte<font color="#000080">;
     </font>TextColorType <font color="#000080">= </font><font color="#FF0000"><b>Procedure</b></font><font color="#000080">(</font>c<font color="#000080">:</font>byte<font color="#000080">);
     </font>TextBackgroundtype <font color="#000080">= </font><font color="#FF0000"><b>procedure</b></font><font color="#000080">(</font>c<font color="#000080">:</font>byte<font color="#000080">);
     </font>ReadKeyType <font color="#000080">= </font><font color="#FF0000"><b>function</b></font><font color="#000080">(</font><font color="#FF0000"><b>var </b></font>extend<font color="#000080">:</font>char<font color="#000080">):</font>char<font color="#000080">;
     </font>GotoXYType <font color="#000080">= </font><font color="#FF0000"><b>procedure</b></font><font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">:</font>byte<font color="#000080">);
     </font>ClrEolType <font color="#000080">= </font><font color="#FF0000"><b>Procedure</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Type
 </b></font>pLineEditObj <font color="#000080">= ^</font>LineEditObj<font color="#000080">;
 </font>LineEditObj <font color="#000080">= </font><font color="#FF0000"><b>object
   Constructor </b></font>Init<font color="#000080">(</font>sx<font color="#000080">,</font>sy<font color="#000080">,</font>MLen<font color="#000080">,</font>fg<font color="#000080">,</font>bg<font color="#000080">,</font>abarcolor_<font color="#000080">:</font>byte<font color="#000080">;
               </font>ansi_<font color="#000080">:</font>boolean<font color="#000080">;
               </font>instr<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">;
               </font>edf<font color="#000080">:</font>editorfuncflagstype<font color="#000080">;
               </font>exf<font color="#000080">:</font>editorexitallowtype<font color="#000080">;
               </font>Write_<font color="#000080">:</font>WriteType<font color="#000080">;
               </font>movex_<font color="#000080">:</font>movextype<font color="#000080">;
               </font>WhereX_<font color="#000080">:</font>WhereXType<font color="#000080">;
               </font>textcolor_<font color="#000080">:</font>textcolortype<font color="#000080">;
               </font>textbackground_<font color="#000080">:</font>textbackgroundtype<font color="#000080">;
               </font>readkey_<font color="#000080">:</font>readkeytype<font color="#000080">;
               </font>gotoxy_<font color="#000080">:</font>gotoxytype<font color="#000080">;
               </font>ClrEol_<font color="#000080">:</font>ClrEolType<font color="#000080">;
               </font>pstr_<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">;
               </font>psmlen_<font color="#000080">:</font>byte<font color="#000080">;
               </font>psc_<font color="#000080">:</font>byte<font color="#000080">);

   </font><font color="#FF0000"><b>Procedure </b></font>AnsiPrompt<font color="#000080">;
   </font><font color="#FF0000"><b>Function </b></font>Edit<font color="#000080">: </font>EditorExitType<font color="#000080">;
   </font><font color="#FF0000"><b>Procedure </b></font>NonAnsiPrompt<font color="#000080">;
   </font><font color="#FF0000"><b>Function </b></font>Answer<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>Procedure </b></font>AntiBar<font color="#000080">(</font>f<font color="#000080">:</font>boolean<font color="#000080">);
   </font><font color="#FF0000"><b>Destructor </b></font>Done<font color="#000080">;
   </font><font color="#FF0000"><b>Private
       </b></font>startx<font color="#000080">,</font>starty<font color="#000080">,</font>MaxLen<font color="#000080">,</font>FGc<font color="#000080">,</font>BGc<font color="#000080">,</font>abarcolor<font color="#000080">:</font>byte<font color="#000080">;
       </font>ansi<font color="#000080">: </font>boolean<font color="#000080">;
       </font>EditFlags<font color="#000080">:</font>EditorFuncFlagsType<font color="#000080">;
       </font>ExitFlags<font color="#000080">:</font>EditorExitAllowType<font color="#000080">;
       </font>movex<font color="#000080">:</font>movextype<font color="#000080">;
       </font>write<font color="#000080">:</font>writetype<font color="#000080">;
       </font>wherex<font color="#000080">:</font>wherextype<font color="#000080">;
       </font>textcolor<font color="#000080">:</font>textcolortype<font color="#000080">;
       </font>textbackground<font color="#000080">:</font>textbackgroundtype<font color="#000080">;
       </font>gotoxy<font color="#000080">:</font>gotoxytype<font color="#000080">;
       </font>readkey<font color="#000080">:</font>readkeytype<font color="#000080">;
       </font>clreol<font color="#000080">:</font>clreoltype<font color="#000080">;
       </font>s<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">;
       </font>pstr<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">;
       </font>psmlen<font color="#000080">:</font>byte<font color="#000080">;
       </font>psc<font color="#000080">:</font>byte<font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>implementation

uses </b></font>etc<font color="#000080">;

</font><font color="#FF0000"><b>Constructor </b></font>LineEditObj<font color="#000080">.</font>Init<font color="#000080">(</font>sx<font color="#000080">,</font>sy<font color="#000080">,</font>MLen<font color="#000080">,</font>fg<font color="#000080">,</font>bg<font color="#000080">,</font>abarcolor_<font color="#000080">:</font>byte<font color="#000080">;
               </font>ansi_<font color="#000080">:</font>boolean<font color="#000080">;
               </font>instr<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">;
               </font>edf<font color="#000080">:</font>editorfuncflagstype<font color="#000080">;
               </font>exf<font color="#000080">:</font>editorexitallowtype<font color="#000080">;
               </font>Write_<font color="#000080">:</font>WriteType<font color="#000080">;
               </font>movex_<font color="#000080">:</font>movexType<font color="#000080">;
               </font>WhereX_<font color="#000080">:</font>WhereXType<font color="#000080">;
               </font>textcolor_<font color="#000080">:</font>textcolortype<font color="#000080">;
               </font>textbackground_<font color="#000080">:</font>textbackgroundtype<font color="#000080">;
               </font>readkey_<font color="#000080">:</font>readkeytype<font color="#000080">;
               </font>gotoxy_<font color="#000080">:</font>gotoxytype<font color="#000080">;
               </font>clreol_<font color="#000080">:</font>clreoltype<font color="#000080">;
               </font>pstr_<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">;
               </font>psmlen_<font color="#000080">:</font>byte<font color="#000080">;
               </font>psc_<font color="#000080">:</font>byte<font color="#000080">);
 </font><font color="#FF0000"><b>begin
 </b></font>clreol<font color="#000080">:=</font>clreol_<font color="#000080">;
 </font>MaxLen<font color="#000080">:=</font>mlen<font color="#000080">;
 </font>abarcolor<font color="#000080">:=</font>abarcolor_<font color="#000080">;

 </font>psc<font color="#000080">:=</font>psc_<font color="#000080">;

 </font>psmlen<font color="#000080">:=</font>psmlen_<font color="#000080">;

 </font>fgc<font color="#000080">:=</font>fg<font color="#000080">;
 </font>bgc<font color="#000080">:=</font>bg<font color="#000080">;
 </font>ansi<font color="#000080">:=</font>ansi_<font color="#000080">;
 </font>EditFlags<font color="#000080">:=</font>edf<font color="#000080">;
 </font>ExitFlags<font color="#000080">:=</font>exf<font color="#000080">;

 </font>movex<font color="#000080">:=</font>movex_<font color="#000080">;
 </font>write<font color="#000080">:=</font>write_<font color="#000080">;
 </font>wherex<font color="#000080">:=</font>wherex_<font color="#000080">;

 </font>textcolor<font color="#000080">:=</font>textcolor_<font color="#000080">;
 </font>textbackground<font color="#000080">:=</font>textbackground_<font color="#000080">;

 </font>gotoxy<font color="#000080">:=</font>gotoxy_<font color="#000080">;

 </font>readkey<font color="#000080">:=</font>readkey_<font color="#000080">;
 </font>pstr<font color="#000080">:=</font>pstr_<font color="#000080">;

 </font>startx<font color="#000080">:=</font>sx<font color="#000080">;
 </font>starty<font color="#000080">:=</font>sy<font color="#000080">;

 </font>s<font color="#000080">:=</font>instr<font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>LineEditObj<font color="#000080">.</font>NonAnsiPrompt<font color="#000080">;
 </font><font color="#FF0000"><b>begin
 </b></font>write<font color="#000080">(</font>crlf<font color="#000080">+</font>crlf<font color="#000080">);
 </font>write<font color="#000080">(</font>pstr<font color="#000080">+</font>crlf<font color="#000080">)
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>LineEditObj<font color="#000080">.</font>AnsiPrompt<font color="#000080">;
 </font><font color="#FF0000"><b>begin

 </b></font>gotoxy<font color="#000080">(</font>startx<font color="#000080">,</font>starty<font color="#000080">);
 </font>textcolor<font color="#000080">(</font>psc<font color="#000080">);
 </font>write<font color="#000080">(</font>rjustify<font color="#000080">(</font>pstr<font color="#000080">,</font>psmlen<font color="#000080">)+</font><font color="#800000">' '</font><font color="#000080">);

 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>LineEditObj<font color="#000080">.</font>AntiBar<font color="#000080">(</font>f<font color="#000080">:</font>boolean<font color="#000080">);
 </font><font color="#FF0000"><b>var </b></font>i<font color="#000080">:</font>word<font color="#000080">;
 </font><font color="#FF0000"><b>begin
 if not</b></font><font color="#000080">(</font>f<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">((</font><font color="#FF0000"><b>not</b></font><font color="#000080">(</font>abarcolor<font color="#000080">=</font>fgc<font color="#000080">)) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font><font color="#FF0000"><b>not</b></font><font color="#000080">(</font>bgc<font color="#000080">=</font><font color="#800000">0</font><font color="#000080">))) </font><font color="#FF0000"><b>then
   begin
   </b></font>textcolor<font color="#000080">(</font>abarcolor<font color="#000080">);
   </font>textbackground<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
   </font><font color="#FF0000"><b>if </b></font><font color="#000080">((</font>startx<font color="#000080">&gt;</font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>starty<font color="#000080">&gt;</font><font color="#800000">0</font><font color="#000080">)) </font><font color="#FF0000"><b>then </b></font>gotoxy<font color="#000080">(</font>startx<font color="#000080">+</font>psmlen<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,</font>starty<font color="#000080">);
   </font>write<font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">);

   </font><font color="#FF0000"><b>if </b></font>echodots <font color="#FF0000"><b>in </b></font>editflags <font color="#FF0000"><b>then
     begin
     for </b></font>i<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>length<font color="#000080">(</font>s<font color="#000080">) </font><font color="#FF0000"><b>do </b></font>write<font color="#000080">(</font><font color="#800000">'.'</font><font color="#000080">);
     </font><font color="#FF0000"><b>end
   else
    </b></font>write<font color="#000080">(</font>s<font color="#000080">);

   </font>clreol<font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>destructor </b></font>LineEditObj<font color="#000080">.</font>Done<font color="#000080">;
 </font><font color="#FF0000"><b>begin
 end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>LineEditObj<font color="#000080">.</font>answer<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>begin
 </b></font>answer <font color="#000080">:= </font>s<font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>LineEditObj<font color="#000080">.</font>Edit<font color="#000080">:</font>EditorExitType<font color="#000080">;
   </font><font color="#FF0000"><b>var
       </b></font>extended<font color="#000080">: </font>char<font color="#000080">;
       </font>tempkey <font color="#000080">: </font>char<font color="#000080">;
       </font>done_   <font color="#000080">: </font>boolean<font color="#000080">;
       </font>index   <font color="#000080">: </font>byte<font color="#000080">;
       </font>answ    <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
       </font>baseX   <font color="#000080">: </font>byte<font color="#000080">;
       </font>i       <font color="#000080">: </font>byte<font color="#000080">;
       </font>insmode <font color="#000080">: </font>boolean<font color="#000080">;
  </font>stringtempkey<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">];

   </font><font color="#FF0000"><b>begin
   if </b></font>ansi <font color="#FF0000"><b>then if </b></font><font color="#000080">((</font>startx<font color="#000080">&gt;</font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>starty<font color="#000080">&gt;</font><font color="#800000">0</font><font color="#000080">))
       </font><font color="#FF0000"><b>then </b></font>gotoxy<font color="#000080">(</font>startx<font color="#000080">+</font>psmlen<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,</font>starty<font color="#000080">);

   </font>InsMode<font color="#000080">:= (</font>Ins <font color="#FF0000"><b>in </b></font>EditFlags<font color="#000080">);

   </font>done_ <font color="#000080">:= </font>false<font color="#000080">;
   </font>index <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
   </font>answ <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
   </font><font color="#FF0000"><b>if </b></font>length<font color="#000080">(</font>s<font color="#000080">) &lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
      begin
      </b></font>answ <font color="#000080">:= </font>s<font color="#000080">;
      </font>index <font color="#000080">:= </font>length<font color="#000080">(</font>s<font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

   </font><font color="#FF0000"><b>if </b></font>ansi <font color="#FF0000"><b>then begin
   </b></font>TextColor<font color="#000080">(</font>fgc<font color="#000080">);
   </font>TextBackground<font color="#000080">(</font>bgc<font color="#000080">);
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

   </font>write<font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">);
   </font><font color="#FF0000"><b>if </b></font>echodots <font color="#FF0000"><b>in </b></font>editflags <font color="#FF0000"><b>then
    begin
    for </b></font>i<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>length<font color="#000080">(</font>s<font color="#000080">) </font><font color="#FF0000"><b>do </b></font>write<font color="#000080">(</font><font color="#800000">'.'</font><font color="#000080">)
    </font><font color="#FF0000"><b>end
   else </b></font>Write<font color="#000080">(</font>s<font color="#000080">);

   </font><font color="#FF0000"><b>if </b></font>ANSI <font color="#FF0000"><b>and </b></font><font color="#000080">(</font><font color="#FF0000"><b>not</b></font><font color="#000080">(</font>fgc<font color="#000080">=</font>abarcolor<font color="#000080">) </font><font color="#FF0000"><b>or not</b></font><font color="#000080">(</font>bgc<font color="#000080">=</font><font color="#800000">0</font><font color="#000080">)) </font><font color="#FF0000"><b>then
     begin
     for </b></font>i<font color="#000080">:=</font>length<font color="#000080">(</font>s<font color="#000080">)+</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>maxlen<font color="#000080">+</font><font color="#800000">1 </font><font color="#FF0000"><b>do </b></font>Write<font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">);
     </font>movex<font color="#000080">(-</font>maxlen<font color="#000080">+</font>length<font color="#000080">(</font>answ<font color="#000080">)-</font><font color="#800000">1</font><font color="#000080">);
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

   </font><font color="#008000"><i>{ functions ... backspace, right, left, overwrite mode for L, R }
   {               enter, delete                                   }

   </i></font><font color="#FF0000"><b>repeat
      </b></font>tempkey <font color="#000080">:= </font>readkey<font color="#000080">(</font>extended<font color="#000080">);
      </font><font color="#FF0000"><b>case </b></font>tempkey <font color="#FF0000"><b>of
        </b></font><font color="#000080">^</font>U<font color="#000080">: </font><font color="#FF0000"><b>if </b></font>ansi <font color="#FF0000"><b>then
               begin
               </b></font>answ<font color="#000080">:=</font>s<font color="#000080">;
               </font>movex<font color="#000080">(-</font>index<font color="#000080">);
               </font><font color="#FF0000"><b>if </b></font>echodots <font color="#FF0000"><b>in </b></font>editflags <font color="#FF0000"><b>then
                 begin
                 for </b></font>i<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>length<font color="#000080">(</font>answ<font color="#000080">) </font><font color="#FF0000"><b>do </b></font>write<font color="#000080">(</font><font color="#800000">'.'</font><font color="#000080">)
                 </font><font color="#FF0000"><b>end
               else </b></font>Write<font color="#000080">(</font>answ<font color="#000080">);
               </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font>length<font color="#000080">(</font>answ<font color="#000080">)+</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>maxlen <font color="#FF0000"><b>do </b></font>write<font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">);
               </font>index<font color="#000080">:=</font>length<font color="#000080">(</font>answ<font color="#000080">);
               </font>movex<font color="#000080">(-</font>maxlen<font color="#000080">+</font>length<font color="#000080">(</font>answ<font color="#000080">));
               </font><font color="#FF0000"><b>end
            else
               begin
               for </b></font>i<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>length<font color="#000080">(</font>answ<font color="#000080">) </font><font color="#FF0000"><b>do </b></font>write<font color="#000080">(</font><font color="#800000">#8</font><font color="#000080">+</font><font color="#800000">' '</font><font color="#000080">+</font><font color="#800000">#8</font><font color="#000080">);
               </font>answ<font color="#000080">:=</font>s<font color="#000080">;
               </font><font color="#FF0000"><b>if </b></font>echodots <font color="#FF0000"><b>in </b></font>editflags <font color="#FF0000"><b>then
                 begin
                 for </b></font>i<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>length<font color="#000080">(</font>answ<font color="#000080">) </font><font color="#FF0000"><b>do </b></font>write<font color="#000080">(</font><font color="#800000">'.'</font><font color="#000080">)
                 </font><font color="#FF0000"><b>end
               else </b></font>Write<font color="#000080">(</font>answ<font color="#000080">);
               </font>index<font color="#000080">:=</font>length<font color="#000080">(</font>answ<font color="#000080">);
               </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

        </font><font color="#800000">#27</font><font color="#000080">,^</font>Z<font color="#000080">: </font><font color="#FF0000"><b>if </b></font>esc <font color="#FF0000"><b>in </b></font>exitflags <font color="#FF0000"><b>then
              begin
              </b></font>done_<font color="#000080">:=</font>true<font color="#000080">;
              </font>edit<font color="#000080">:=</font>esc<font color="#000080">;
              </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

        </font><font color="#800000">#09</font><font color="#000080">: </font><font color="#FF0000"><b>if </b></font>ansi <font color="#FF0000"><b>and </b></font><font color="#000080">(</font>tab <font color="#FF0000"><b>in </b></font>exitflags<font color="#000080">) </font><font color="#FF0000"><b>then
              begin
              </b></font>done_<font color="#000080">:=</font>true<font color="#000080">;
              </font>edit<font color="#000080">:=</font>tab<font color="#000080">;
              </font><font color="#FF0000"><b>end</b></font><font color="#000080">;


        </font><font color="#800000">#32</font><font color="#000080">,

             </font><font color="#008000"><i>{'A'..'Z', 'a'..'z','0'..'9', ',' , '.':}

             </i></font><font color="#800000">' '</font><font color="#000080">..</font><font color="#800000">'~'</font><font color="#000080">:

             </font><font color="#FF0000"><b>begin
              if </b></font>ord<font color="#000080">(</font>answ<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]) &lt; </font>maxlen <font color="#FF0000"><b>then
               begin
               </b></font>inc<font color="#000080">(</font>index<font color="#000080">);
               </font><font color="#FF0000"><b>if </b></font>index <font color="#000080">&lt;= </font>maxlen <font color="#FF0000"><b>then
               begin
               if </b></font><font color="#000080">(</font>Caps <font color="#FF0000"><b>in </b></font>EditFlags<font color="#000080">) </font><font color="#FF0000"><b>then
   </b></font><font color="#008000"><i>{for upcase} </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>answ<font color="#000080">[</font>index<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">] = </font><font color="#800000">#32</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>answ<font color="#000080">[</font>index<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">] = </font><font color="#800000">#0</font><font color="#000080">) </font><font color="#FF0000"><b>then
   </b></font><font color="#008000"><i>{checking}     </i></font><font color="#FF0000"><b>begin
                  </b></font>tempkey <font color="#000080">:= </font>upcase<font color="#000080">(</font>tempkey<font color="#000080">);
                  </font><font color="#FF0000"><b>end
                else </b></font>tempkey <font color="#000080">:= </font>lowcase <font color="#000080">(</font>tempkey<font color="#000080">);

               </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>Insmode<font color="#000080">) </font><font color="#FF0000"><b>and </b></font>ansi <font color="#FF0000"><b>then
                  begin
                  if </b></font>ord<font color="#000080">(</font>answ<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]) &lt; </font>maxlen <font color="#FF0000"><b>then
                    begin
                    </b></font>stringtempkey <font color="#000080">:= </font>tempkey<font color="#000080">;
                    </font>insert<font color="#000080">(</font>stringtempkey<font color="#000080">, </font>answ<font color="#000080">, </font>index<font color="#000080">);
                    </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>Caps <font color="#FF0000"><b>in </b></font>EditFlags<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>answ <font color="#000080">:= </font>CaseStr<font color="#000080">(</font>answ<font color="#000080">);
                    </font><font color="#FF0000"><b>if </b></font>index <font color="#000080">&lt;&gt; </font>ord<font color="#000080">(</font>answ<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]) </font><font color="#FF0000"><b>then
                     begin
                     if </b></font>echodots <font color="#FF0000"><b>in </b></font>editflags <font color="#FF0000"><b>then
                      begin
                      for </b></font>i<font color="#000080">:=</font>index <font color="#FF0000"><b>to </b></font>length<font color="#000080">(</font>answ<font color="#000080">)-</font>index<font color="#000080">+</font><font color="#800000">3 </font><font color="#FF0000"><b>do </b></font>write<font color="#000080">(</font><font color="#800000">'.'</font><font color="#000080">);
                      </font>write<font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">);
                      </font><font color="#FF0000"><b>end
                     else
                      begin
                      </b></font>write<font color="#000080">( </font>copy<font color="#000080">(</font>answ<font color="#000080">,</font>index<font color="#000080">,</font>length<font color="#000080">(</font>answ<font color="#000080">)-</font>index<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">)+</font><font color="#800000">' ' </font><font color="#000080">);
                      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
                     </font>movex<font color="#000080">(-</font>length<font color="#000080">(</font>answ<font color="#000080">)-</font><font color="#800000">1</font><font color="#000080">+</font>index<font color="#000080">);
                     </font><font color="#FF0000"><b>end
                    else if </b></font>echodots <font color="#FF0000"><b>in </b></font>editflags <font color="#FF0000"><b>then </b></font>write<font color="#000080">(</font><font color="#800000">'.'</font><font color="#000080">) </font><font color="#FF0000"><b>else </b></font>Write<font color="#000080">(</font>tempkey<font color="#000080">);
                    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
                  </font><font color="#FF0000"><b>end
               else
                  begin
                  if </b></font>index <font color="#000080">&lt; </font>ord<font color="#000080">(</font>answ<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">])+</font><font color="#800000">1 </font><font color="#FF0000"><b>then </b></font>answ<font color="#000080">[</font>index<font color="#000080">] := </font>tempkey
                  <font color="#FF0000"><b>else </b></font>answ <font color="#000080">:= </font>answ <font color="#000080">+ </font>tempkey<font color="#000080">;
                  </font><font color="#FF0000"><b>if </b></font>echodots <font color="#FF0000"><b>in </b></font>editflags <font color="#FF0000"><b>then </b></font>write<font color="#000080">(</font><font color="#800000">'.'</font><font color="#000080">) </font><font color="#FF0000"><b>else </b></font>Write<font color="#000080">(</font>tempkey<font color="#000080">)
                  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
               </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
              </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
             </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
        </font><font color="#800000">#13</font><font color="#000080">: </font><font color="#FF0000"><b>if </b></font>Enter <font color="#FF0000"><b>in </b></font>ExitFlags <font color="#FF0000"><b>then
             begin
             </b></font>done_ <font color="#000080">:= </font>true<font color="#000080">;
             </font>edit <font color="#000080">:= </font>Enter<font color="#000080">;
             </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

        ^</font>V<font color="#000080">: </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>ins <font color="#FF0000"><b>in </b></font>editflags<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>insmode <font color="#000080">:= </font><font color="#FF0000"><b>not </b></font>insmode<font color="#000080">;

        </font><font color="#800000">#8</font><font color="#000080">:
             </font><font color="#FF0000"><b>begin

             if </b></font><font color="#000080">(</font>index <font color="#000080">&gt; </font><font color="#800000">0</font><font color="#000080">)  </font><font color="#FF0000"><b>then
              begin
              </b></font>delete<font color="#000080">(</font>answ<font color="#000080">, </font>Index<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
              </font><font color="#FF0000"><b>if </b></font>ANSI <font color="#FF0000"><b>then
               begin
               if </b></font><font color="#000080">(</font>index<font color="#000080">=</font>length<font color="#000080">(</font>answ<font color="#000080">)+</font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>then
                 begin
                 </b></font>movex<font color="#000080">(-</font><font color="#800000">1</font><font color="#000080">);
                 </font>write<font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">);
                 </font>movex<font color="#000080">(-</font><font color="#800000">1</font><font color="#000080">);
                 </font><font color="#FF0000"><b>end
               else
                 begin
                 </b></font>movex<font color="#000080">(-</font><font color="#800000">1</font><font color="#000080">);
                 </font><font color="#FF0000"><b>if </b></font>echodots <font color="#FF0000"><b>in </b></font>editflags <font color="#FF0000"><b>then
                  begin
                  for </b></font>i<font color="#000080">:=</font>index <font color="#FF0000"><b>to </b></font>length<font color="#000080">(</font>answ<font color="#000080">)-</font>index<font color="#000080">+</font><font color="#800000">1 </font><font color="#FF0000"><b>do </b></font>write<font color="#000080">(</font><font color="#800000">'.'</font><font color="#000080">);
                  </font>write<font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">);
                  </font><font color="#FF0000"><b>end
                 else
                  </b></font>write<font color="#000080">( </font>copy<font color="#000080">(</font>answ<font color="#000080">,</font>index<font color="#000080">,</font>length<font color="#000080">(</font>answ<font color="#000080">)-</font>index<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">)+</font><font color="#800000">' ' </font><font color="#000080">);
                 </font>movex<font color="#000080">(-</font>length<font color="#000080">(</font>answ<font color="#000080">)-</font><font color="#800000">1</font><font color="#000080">+</font>index<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">);
                 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
               </font><font color="#FF0000"><b>end
              else </b></font>Write<font color="#000080">(</font><font color="#800000">#8</font><font color="#000080">+</font><font color="#800000">' '</font><font color="#000080">+</font><font color="#800000">#8</font><font color="#000080">);
              </font>dec<font color="#000080">(</font>index<font color="#000080">);
              </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
             </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
        </font><font color="#800000">#0</font><font color="#000080">:                         </font><font color="#008000"><i>{ test for extended characters }
             </i></font><font color="#FF0000"><b>begin
             case </b></font>extended <font color="#FF0000"><b>of        </b></font><font color="#008000"><i>{ poll for extended part }
               </i></font><font color="#800000">#60</font><font color="#000080">:  </font><font color="#FF0000"><b>if </b></font>ansi <font color="#FF0000"><b>then
                      begin
                      </b></font>answ<font color="#000080">:=</font>s<font color="#000080">;
                      </font>movex<font color="#000080">(-</font>index<font color="#000080">);
                      </font><font color="#FF0000"><b>if </b></font>echodots <font color="#FF0000"><b>in </b></font>editflags <font color="#FF0000"><b>then
                       begin
                       for </b></font>i<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>length<font color="#000080">(</font>answ<font color="#000080">) </font><font color="#FF0000"><b>do </b></font>write<font color="#000080">(</font><font color="#800000">'.'</font><font color="#000080">);
                       </font><font color="#FF0000"><b>end
                      else
                       </b></font>Write<font color="#000080">(</font>answ<font color="#000080">);

                      </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font>length<font color="#000080">(</font>answ<font color="#000080">)+</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>maxlen <font color="#FF0000"><b>do </b></font>write<font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">);
                      </font>index<font color="#000080">:=</font>length<font color="#000080">(</font>answ<font color="#000080">);
                      </font>movex<font color="#000080">(-</font>maxlen<font color="#000080">+</font>length<font color="#000080">(</font>answ<font color="#000080">));
                      </font><font color="#FF0000"><b>end
                     else
                      begin
                      for </b></font>i<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>length<font color="#000080">(</font>answ<font color="#000080">) </font><font color="#FF0000"><b>do </b></font>write<font color="#000080">(</font><font color="#800000">#8</font><font color="#000080">+</font><font color="#800000">' '</font><font color="#000080">+</font><font color="#800000">#8</font><font color="#000080">);
                      </font>answ<font color="#000080">:=</font>s<font color="#000080">;
                      </font><font color="#FF0000"><b>if </b></font>echodots <font color="#FF0000"><b>in </b></font>editflags <font color="#FF0000"><b>then
                       begin
                       for </b></font>i<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>length<font color="#000080">(</font>answ<font color="#000080">) </font><font color="#FF0000"><b>do </b></font>write<font color="#000080">(</font><font color="#800000">'.'</font><font color="#000080">);
                       </font><font color="#FF0000"><b>end
                      else
                       </b></font>write<font color="#000080">(</font>answ<font color="#000080">);
                       </font>index<font color="#000080">:=</font>length<font color="#000080">(</font>answ<font color="#000080">);
                      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

               </font><font color="#800000">#80</font><font color="#000080">: </font><font color="#FF0000"><b>if </b></font>ansi <font color="#FF0000"><b>and </b></font><font color="#000080">(</font>down <font color="#FF0000"><b>in </b></font>exitflags<font color="#000080">) </font><font color="#FF0000"><b>then
                    begin
                    </b></font>done_<font color="#000080">:=</font>true<font color="#000080">;
                    </font>edit<font color="#000080">:=</font>down<font color="#000080">;
                    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

               </font><font color="#800000">#72</font><font color="#000080">: </font><font color="#FF0000"><b>if </b></font>ansi <font color="#FF0000"><b>and </b></font><font color="#000080">(</font>up <font color="#FF0000"><b>in </b></font>exitflags<font color="#000080">) </font><font color="#FF0000"><b>then
                    begin
                    </b></font>done_<font color="#000080">:=</font>true<font color="#000080">;
                    </font>edit<font color="#000080">:=</font>up<font color="#000080">;
                    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

               </font><font color="#800000">#75</font><font color="#000080">:                 </font><font color="#008000"><i>{ left arrow }
                   </i></font><font color="#FF0000"><b>begin
                   if </b></font>ANSI <font color="#FF0000"><b>then
                    begin
                    if </b></font>index <font color="#000080">&gt;= </font><font color="#800000">1 </font><font color="#FF0000"><b>then
                     begin
                     </b></font>dec<font color="#000080">(</font>index<font color="#000080">);
                     </font>movex<font color="#000080">(-</font><font color="#800000">1</font><font color="#000080">);
                     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
                    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
                   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
               </font><font color="#800000">#77</font><font color="#000080">:                 </font><font color="#008000"><i>{ right arrow }
                  </i></font><font color="#FF0000"><b>begin
                  if </b></font>ANSI <font color="#FF0000"><b>then
                   begin
                   if </b></font>index <font color="#000080">&lt; </font>ord<font color="#000080">(</font>answ<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]) </font><font color="#FF0000"><b>then
                     begin
                     </b></font>inc<font color="#000080">(</font>index<font color="#000080">);
                     </font><font color="#FF0000"><b>if </b></font>echodots <font color="#FF0000"><b>in </b></font>editflags <font color="#FF0000"><b>then </b></font>write<font color="#000080">(</font><font color="#800000">'.'</font><font color="#000080">) </font><font color="#FF0000"><b>else </b></font>write<font color="#000080">(</font>answ<font color="#000080">[</font>index<font color="#000080">]);
                     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
                   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
                  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
               </font><font color="#800000">#71</font><font color="#000080">:                 </font><font color="#008000"><i>{ home }
                  </i></font><font color="#FF0000"><b>begin
                  if </b></font>ANSI <font color="#FF0000"><b>then
                     begin
                     </b></font>movex<font color="#000080">(-</font>index<font color="#000080">);
                     </font>index<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
                     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
                  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

               </font><font color="#800000">#79</font><font color="#000080">: </font><font color="#FF0000"><b>IF </b></font>ANSI <font color="#FF0000"><b>then </b></font><font color="#008000"><i>{ end }
                  </i></font><font color="#FF0000"><b>begin
                  </b></font>movex<font color="#000080">(</font>length<font color="#000080">(</font>answ<font color="#000080">)-</font>index<font color="#000080">);
                  </font>index <font color="#000080">:= </font>ord<font color="#000080">(</font>answ<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]);
                  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

               </font><font color="#800000">#82</font><font color="#000080">:      </font><font color="#008000"><i>{ ins }
                </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>ins <font color="#FF0000"><b>in </b></font>editflags<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>insmode <font color="#000080">:= </font><font color="#FF0000"><b>not </b></font>insmode<font color="#000080">;

               </font><font color="#800000">#83</font><font color="#000080">:         </font><font color="#008000"><i>{ del }
                  </i></font><font color="#FF0000"><b>begin
                  if </b></font>ANSI <font color="#FF0000"><b>then
                    begin
                    </b></font>delete<font color="#000080">(</font>answ<font color="#000080">,</font>index<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
                    </font><font color="#FF0000"><b>If </b></font><font color="#000080">(</font>Caps <font color="#FF0000"><b>in </b></font>EditFlags<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>answ <font color="#000080">:= </font>CaseStr<font color="#000080">(</font>answ<font color="#000080">);
                    </font><font color="#FF0000"><b>if </b></font>echodots <font color="#FF0000"><b>in </b></font>editflags <font color="#FF0000"><b>then
                     begin
                     for </b></font>i<font color="#000080">:=</font>index<font color="#000080">+</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>length<font color="#000080">(</font>answ<font color="#000080">)-</font>index <font color="#FF0000"><b>do </b></font>write<font color="#000080">(</font><font color="#800000">'.'</font><font color="#000080">);
                     </font>write<font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">);
                     </font><font color="#FF0000"><b>end
                    else
                     </b></font>write<font color="#000080">( </font>copy<font color="#000080">(</font>answ<font color="#000080">,</font>index<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,</font>length<font color="#000080">(</font>answ<font color="#000080">)-</font>index<font color="#000080">)+</font><font color="#800000">' ' </font><font color="#000080">);
                     </font>movex<font color="#000080">(-</font>length<font color="#000080">(</font>answ<font color="#000080">)-</font><font color="#800000">1</font><font color="#000080">+</font>index<font color="#000080">);
                     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
                  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

               </font><font color="#FF0000"><b>end</b></font><font color="#000080">;                           </font><font color="#008000"><i>{ end of 'case readkey of' }
             </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;                             </font><font color="#008000"><i>{ end of '#0: begin' }
        </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;                                  </font><font color="#008000"><i>{ end of 'case tempkey of' }
   </i></font><font color="#FF0000"><b>until </b></font>done_<font color="#000080">;
   </font>s <font color="#000080">:= </font>answ<font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to TEXTEDIT SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0016.PAS">Original</a><b>]</b></p></body>
</html>
