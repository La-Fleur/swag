<html>
<head><title> "Word Wrap #2" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to TEXTEDIT SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0005.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt;    P.S.  A pre-made Unit to do a Word-wrap Function might also be nice.
}

</i></font><font color="#FF0000"><b>Unit </b></font>WordWrap<font color="#000080">;

</font><font color="#FF0000"><b>Interface

Uses
  </b></font>Crt<font color="#000080">;

</font><font color="#FF0000"><b>Type
  </b></font>Strn80 <font color="#000080">= </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">80</font><font color="#000080">];

</font><font color="#FF0000"><b>Const
  </b></font>MaxWordLineLength <font color="#000080">: </font>Byte <font color="#000080">= </font><font color="#800000">80</font><font color="#000080">;

</font><font color="#FF0000"><b>Var
  </b></font>WordLine  <font color="#000080">: </font>Strn80<font color="#000080">;
  </font>Index1    <font color="#000080">: </font>Byte<font color="#000080">;
  </font>Index2    <font color="#000080">: </font>Byte<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>ResetWrapStrn<font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>WrapStrn <font color="#000080">(</font>InputStrn<font color="#000080">: </font>Strn80<font color="#000080">);

</font><font color="#FF0000"><b>Implementation

Procedure </b></font>ResetWrapStrn<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Index1 <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>Index2 <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>Wordline <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>WrapStrn <font color="#000080">(</font>InputStrn<font color="#000080">: </font>Strn80<font color="#000080">);
</font><font color="#FF0000"><b>Var
  </b></font>Count <font color="#000080">: </font>Byte<font color="#000080">;
  </font>InputChar <font color="#000080">: </font>Char<font color="#000080">;
</font><font color="#FF0000"><b>begin
  For </b></font>Count <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>Length <font color="#000080">(</font>InputStrn<font color="#000080">) </font><font color="#FF0000"><b>do
  begin
    </b></font>InputChar <font color="#000080">:= </font>InputStrn<font color="#000080">[</font>Count<font color="#000080">];
    </font><font color="#FF0000"><b>Case </b></font>InputChar <font color="#FF0000"><b>OF
      </b></font><font color="#000080">^</font>H<font color="#000080">: </font><font color="#008000"><i>{Write destructive backspace &amp; remove Char from WordLine}
          </i></font><font color="#FF0000"><b>begin
            </b></font>Write<font color="#000080">(^</font>H<font color="#000080">,</font><font color="#800000">' '</font><font color="#000080">,^</font>H<font color="#000080">);
            </font>DELETE<font color="#000080">(</font>WordLine<font color="#000080">,(</font>LENGTH<font color="#000080">(</font>WordLine<font color="#000080">) - </font><font color="#800000">1</font><font color="#000080">),</font><font color="#800000">1</font><font color="#000080">)
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#800000">#0</font><font color="#000080">: </font><font color="#008000"><i>{user pressed a Function key, so dismiss it}
          </i></font><font color="#FF0000"><b>begin
            </b></font>InputChar <font color="#000080">:= </font>ReadKey<font color="#000080">; </font><font color="#008000"><i>{Function keys send two-Char scan code!}
            </i></font>InputChar <font color="#000080">:= </font><font color="#800000">' '
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#800000">#13</font><font color="#000080">: </font><font color="#008000"><i>{ it is an enter key.. reset everything and start on a new line}
          </i></font><font color="#FF0000"><b>begin
            </b></font>Writeln<font color="#000080">;
            </font>Index1 <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">; </font>Index2 <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">; </font>Wordline <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>else </b></font><font color="#008000"><i>{InputChar contains a valid Char, so deal With it}
      </i></font><font color="#FF0000"><b>begin
        </b></font>Write<font color="#000080">(</font>InputChar<font color="#000080">);
        </font>WordLine <font color="#000080">:= (</font>WordLine <font color="#000080">+ </font>InputChar<font color="#000080">);
        </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>LENGTH<font color="#000080">(</font>WordLine<font color="#000080">) &gt;= (</font>MaxWordLineLength <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">)) </font><font color="#FF0000"><b>then
        </b></font><font color="#008000"><i>{we have to do a Word-wrap}
        </i></font><font color="#FF0000"><b>begin
          </b></font>Index1 <font color="#000080">:= (</font>MaxWordLineLength <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">);
          </font><font color="#FF0000"><b>While </b></font><font color="#000080">((</font>WordLine<font color="#000080">[</font>Index1<font color="#000080">] &lt;&gt; </font><font color="#800000">' '</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>WordLine<font color="#000080">[</font>Index1<font color="#000080">] &lt;&gt; </font><font color="#800000">'-'</font><font color="#000080">)
                  </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>Index1 <font color="#000080">&lt;&gt; </font><font color="#800000">0</font><font color="#000080">)) </font><font color="#FF0000"><b>DO
            </b></font>Index1 <font color="#000080">:= (</font>Index1 <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">);
          </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>Index1 <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font><font color="#008000"><i>{whoah, no space was found to split line!}
            </i></font>Index1 <font color="#000080">:= (</font>MaxWordLineLength <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">); </font><font color="#008000"><i>{forces split}
          </i></font>DELETE<font color="#000080">(</font>WordLine<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font>Index1<font color="#000080">);
          </font><font color="#FF0000"><b>For </b></font>Index2 <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>LENGTH<font color="#000080">(</font>WordLine<font color="#000080">) </font><font color="#FF0000"><b>DO
            </b></font>Write<font color="#000080">(^</font>H<font color="#000080">,</font><font color="#800000">' '</font><font color="#000080">,^</font>H<font color="#000080">);
          </font>Writeln<font color="#000080">;
          </font>Write<font color="#000080">(</font>WordLine<font color="#000080">)
        </font><font color="#FF0000"><b>end
      end
    end</b></font><font color="#000080">; </font><font color="#008000"><i>{CASE InputChar}
  </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin </b></font><font color="#008000"><i>{WordWrap}
{Initialize the Program.}
</i></font>WordLine  <font color="#000080">:= </font><font color="#800000">''</font><font color="#000080">;
</font>Index1    <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
</font>Index2    <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to TEXTEDIT SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0005.PAS">Original</a><b>]</b></p></body>
</html>
