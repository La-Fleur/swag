<html>
<head><title> "Joystick interface" by IAN HINSON</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to JOYSTICK SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0010.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#FF0000"><b>UNIT </b></font>JoyStick<font color="#000080">;
</font><font color="#008000"><i>(* Public Domain.  Written by Ian Hinson   November 1993 *)

</i></font><font color="#FF0000"><b>INTERFACE

PROCEDURE </b></font>ReadPosns<font color="#000080">;
</font><font color="#008000"><i>{ Updates values of JoyA_X, JoyA_Y, JoyB_X, and JoyB_Y }

</i></font><font color="#FF0000"><b>PROCEDURE </b></font>ReadButtons<font color="#000080">;
</font><font color="#008000"><i>{ Updates the state of all buttons }

{ Call the function for whichever button(s) you want to test
  after updating all their states with a call to ReadButtons. }
</i></font><font color="#FF0000"><b>FUNCTION </b></font>JoyA_Button1<font color="#000080">: </font>BOOLEAN<font color="#000080">;
</font><font color="#FF0000"><b>FUNCTION </b></font>JoyA_Button2<font color="#000080">: </font>BOOLEAN<font color="#000080">;
</font><font color="#FF0000"><b>FUNCTION </b></font>JoyB_Button1<font color="#000080">: </font>BOOLEAN<font color="#000080">;
</font><font color="#FF0000"><b>FUNCTION </b></font>JoyB_Button2<font color="#000080">: </font>BOOLEAN<font color="#000080">;
</font><font color="#FF0000"><b>FUNCTION </b></font>AnyButton<font color="#000080">: </font>BOOLEAN<font color="#000080">;

</font><font color="#FF0000"><b>VAR
</b></font><font color="#008000"><i>{ These variables provide the X&amp;Y positions after
  they have been updated by a call to ReadPositions }
</i></font>JoyA_X<font color="#000080">, </font>JoyA_Y<font color="#000080">, </font>JoyB_X<font color="#000080">, </font>JoyB_Y<font color="#000080">: </font>WORD<font color="#000080">;


</font><font color="#FF0000"><b>IMPLEMENTATION

VAR
</b></font>buttons<font color="#000080">: </font><font color="#FF0000"><b>SET OF </b></font><font color="#000080">(</font>JoyA_1<font color="#000080">, </font>JoyA_2<font color="#000080">, </font>JoyB_1<font color="#000080">, </font>JoyB_2<font color="#000080">);

</font><font color="#FF0000"><b>PROCEDURE </b></font>ReadPosns<font color="#000080">; </font><font color="#FF0000"><b>ASSEMBLER</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>ASM
   </b></font><font color="#FF00FF">mov ah,$84
   mov dx,1
   int $15
   mov JoyA_X,ax
   mov JoyA_Y,bx
   mov JoyB_X,cx
   mov JoyB_Y,dx
   </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>ReadButtons<font color="#000080">; </font><font color="#FF0000"><b>ASSEMBLER</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>ASM
   </b></font><font color="#FF00FF">mov ah,$84
   mov dx,0
   int $15
   shr al,4
   xor al,$0F
   mov buttons,al
   </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>FUNCTION </b></font>JoyA_Button1<font color="#000080">: </font>BOOLEAN<font color="#000080">;
  </font><font color="#FF0000"><b>BEGIN
    </b></font>JoyA_Button1 <font color="#000080">:= </font>JoyA_1 <font color="#FF0000"><b>IN </b></font>buttons<font color="#000080">;
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>FUNCTION </b></font>JoyA_Button2<font color="#000080">: </font>BOOLEAN<font color="#000080">;
  </font><font color="#FF0000"><b>BEGIN
    </b></font>JoyA_Button2 <font color="#000080">:= </font>JoyA_2 <font color="#FF0000"><b>IN </b></font>buttons<font color="#000080">;
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>FUNCTION </b></font>JoyB_Button1<font color="#000080">: </font>BOOLEAN<font color="#000080">;
  </font><font color="#FF0000"><b>BEGIN
    </b></font>JoyB_Button1 <font color="#000080">:= </font>JoyB_1 <font color="#FF0000"><b>IN </b></font>buttons<font color="#000080">;
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>FUNCTION </b></font>JoyB_Button2<font color="#000080">: </font>BOOLEAN<font color="#000080">;
  </font><font color="#FF0000"><b>BEGIN
    </b></font>JoyB_Button2 <font color="#000080">:= </font>JoyB_2 <font color="#FF0000"><b>IN </b></font>buttons<font color="#000080">;
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>FUNCTION </b></font>AnyButton<font color="#000080">: </font>BOOLEAN<font color="#000080">;
  </font><font color="#FF0000"><b>BEGIN
    </b></font>AnyButton <font color="#000080">:= </font>buttons <font color="#000080">&lt;&gt; [];
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>END</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to JOYSTICK SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0010.PAS">Original</a><b>]</b></p></body>
</html>
