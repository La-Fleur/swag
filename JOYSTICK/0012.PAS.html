<html>
<head><title> "Joystick Testing" by CHRIS WILPER</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to JOYSTICK SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0012.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#FF0000"><b>Program </b></font>JoyTest<font color="#000080">;

</font><font color="#FF0000"><b>uses
   </b></font>crt<font color="#000080">;

</font><font color="#FF0000"><b>var
   </b></font>ch<font color="#000080">:</font>char<font color="#000080">;
   </font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">:</font>word<font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>JoyExist<font color="#000080">:</font>boolean<font color="#000080">;
</font><font color="#FF0000"><b>var
   </b></font>temp<font color="#000080">:</font>byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
   asm
      </b></font><font color="#FF00FF">mov ah,84h
      mov dx,00h
      int 15h
      mov temp,al
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>if </b></font>temp<font color="#000080">=</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>JoyExist<font color="#000080">:=</font>false
   <font color="#FF0000"><b>else </b></font>JoyExist<font color="#000080">:=</font>true<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>JoyX<font color="#000080">:</font>word<font color="#000080">;
</font><font color="#FF0000"><b>var
   </b></font>temp<font color="#000080">:</font>word<font color="#000080">;
</font><font color="#FF0000"><b>begin
   asm
      </b></font><font color="#FF00FF">mov ah,84h
      mov dx,01h
      int 15h
      mov temp,ax
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font>JoyX<font color="#000080">:=</font>temp<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>JoyY<font color="#000080">:</font>word<font color="#000080">;
</font><font color="#FF0000"><b>var
   </b></font>temp<font color="#000080">:</font>word<font color="#000080">;
</font><font color="#FF0000"><b>begin
   asm
      </b></font><font color="#FF00FF">mov ah,84h
      mov dx,01h
      int 15h
      mov temp,bx
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font>JoyY<font color="#000080">:=</font>temp<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>JoyBtn1<font color="#000080">:</font>boolean<font color="#000080">;
</font><font color="#FF0000"><b>var
   </b></font>temp<font color="#000080">:</font>byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
   asm
      </b></font><font color="#FF00FF">mov ah,84h
      mov dx,00h
      int 15h
      mov temp,al;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>if </b></font>temp <font color="#FF0000"><b>and </b></font><font color="#800000">16 </font><font color="#000080">= </font><font color="#800000">16 </font><font color="#FF0000"><b>then </b></font>JoyBtn1<font color="#000080">:=</font>false
      <font color="#FF0000"><b>else </b></font>JoyBtn1<font color="#000080">:=</font>true<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>JoyBtn2<font color="#000080">:</font>boolean<font color="#000080">;
</font><font color="#FF0000"><b>var
   </b></font>temp<font color="#000080">:</font>byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
   asm
      </b></font><font color="#FF00FF">mov ah,84h
      mov dx,00h
      int 15h
      mov temp,al;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>if </b></font>temp <font color="#FF0000"><b>and </b></font><font color="#800000">32 </font><font color="#000080">= </font><font color="#800000">32 </font><font color="#FF0000"><b>then </b></font>JoyBtn2<font color="#000080">:=</font>false
      <font color="#FF0000"><b>else </b></font>JoyBtn2<font color="#000080">:=</font>true<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>JoyCalibrate<font color="#000080">;

</font><font color="#FF0000"><b>begin

   </b></font>writeln<font color="#000080">(</font><font color="#800000">'Move Joystick to upper-left, and press a button...'</font><font color="#000080">);
   </font><font color="#FF0000"><b>repeat
      </b></font>x1<font color="#000080">:=</font>JoyX<font color="#000080">;
      </font>y1<font color="#000080">:=</font>JoyY<font color="#000080">;
   </font><font color="#FF0000"><b>until </b></font>JoyBtn1 <font color="#FF0000"><b>or </b></font>JoyBtn2<font color="#000080">;
   </font><font color="#FF0000"><b>repeat until not </b></font>JoyBtn1 <font color="#FF0000"><b>or </b></font>JoyBtn2<font color="#000080">;
   </font>writeln<font color="#000080">(</font><font color="#800000">'Move Joystick to lower-right, and press a button...'</font><font color="#000080">);
   </font><font color="#FF0000"><b>repeat
      </b></font>x2<font color="#000080">:=</font>JoyX<font color="#000080">;
      </font>y2<font color="#000080">:=</font>JoyY<font color="#000080">;
   </font><font color="#FF0000"><b>until </b></font>JoyBtn1 <font color="#FF0000"><b>or </b></font>JoyBtn2<font color="#000080">;

</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin

   </b></font>clrscr<font color="#000080">;
   </font><font color="#FF0000"><b>if not </b></font>joyexist <font color="#FF0000"><b>then begin
      </b></font>writeln<font color="#000080">(</font><font color="#800000">'No joystick'</font><font color="#000080">);
      </font>halt<font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font>joycalibrate<font color="#000080">;
   </font>write<font color="#000080">(</font><font color="#800000">#10#13</font><font color="#000080">,</font><font color="#800000">'Range is from ('</font><font color="#000080">,</font>x1<font color="#000080">,</font><font color="#800000">','</font><font color="#000080">,</font>y1<font color="#000080">,</font><font color="#800000">') to ('</font><font color="#000080">,</font>x2<font color="#000080">,</font><font color="#800000">','</font><font color="#000080">,</font>y2<font color="#000080">,</font><font color="#800000">')'</font><font color="#000080">);
   </font>ch<font color="#000080">:=</font>readkey<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to JOYSTICK SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0012.PAS">Original</a><b>]</b></p></body>
</html>
