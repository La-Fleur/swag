<html>
<head><title> "JOYSTCK2.PAS" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to JOYSTICK SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0002.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
Anyone know how to read the Joystick.... I only need Joy(1) read....
I have used 1 Procedure i d/led, but all it did was tell me if the buttons
were down (it didnt work in telling me which direction (it should of))
}
</i></font><font color="#FF0000"><b>Program </b></font>JOYSTICK<font color="#000080">;

</font><font color="#FF0000"><b>Uses </b></font>Crt<font color="#000080">, </font>Dos<font color="#000080">;

</font><font color="#008000"><i>(*
WRITTEN BY JAMES P. MCADAMS - 25 DECEMBER 1984

Program DEMONSTRATinG THE USE of TURBO PASCAL to ACCESS THE
IBM-PC GAME CONTROL ADAPTER. THE TWO Function CALLS ARE EACH
CompLETE in ITSELF. EITHER ONE or BOTH CAN BE MOVED to ANY
Program THAT NEEDS THE USE of JOYSTICKS or PADDLES.
*)



</i></font><font color="#FF0000"><b>Var
</b></font>I<font color="#000080">: </font>Integer<font color="#000080">;
</font>TEMP<font color="#000080">: </font>Byte<font color="#000080">;


   </font><font color="#FF0000"><b>Function </b></font>BUTtoN_PRESSED <font color="#000080">(</font>WHICH_ONE<font color="#000080">: </font>Char<font color="#000080">): </font>Boolean<font color="#000080">;
   </font><font color="#008000"><i>(* RETURN True if THE BUTtoN IS PRESSED *)
   </i></font><font color="#FF0000"><b>Const
      </b></font>JOYPorT <font color="#000080">= </font><font color="#800000">$201</font><font color="#000080">; </font><font color="#008000"><i>(* LOCATION of THE GAME PorT *)
   </i></font><font color="#FF0000"><b>Var
      </b></font>MASK<font color="#000080">: </font>Byte<font color="#000080">;
   </font><font color="#FF0000"><b>begin
   if not </b></font><font color="#000080">(</font>WHICH_ONE <font color="#FF0000"><b>in </b></font><font color="#000080">[</font><font color="#800000">'A'</font><font color="#000080">..</font><font color="#800000">'D'</font><font color="#000080">]) </font><font color="#FF0000"><b>then </b></font>WHICH_ONE <font color="#000080">:= </font><font color="#800000">'A'</font><font color="#000080">;
   </font><font color="#FF0000"><b>Case </b></font>WHICH_ONE <font color="#FF0000"><b>of
      </b></font><font color="#800000">'A'</font><font color="#000080">: </font>MASK <font color="#000080">:= </font><font color="#800000">16</font><font color="#000080">;
      </font><font color="#800000">'B'</font><font color="#000080">: </font>MASK <font color="#000080">:= </font><font color="#800000">32</font><font color="#000080">;
      </font><font color="#800000">'C'</font><font color="#000080">: </font>MASK <font color="#000080">:= </font><font color="#800000">64</font><font color="#000080">;
      </font><font color="#800000">'D'</font><font color="#000080">: </font>MASK <font color="#000080">:= </font><font color="#800000">128</font><font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font>BUTtoN_PRESSED <font color="#000080">:= (</font>PorT <font color="#000080">[</font>JOYPorT<font color="#000080">] </font><font color="#FF0000"><b>and </b></font>MASK<font color="#000080">) = </font><font color="#800000">0</font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>(* BUTtoN_PRESSED *)


   </i></font><font color="#FF0000"><b>Function </b></font>JOYSTICK_POS <font color="#000080">(</font>WHICH_ONE<font color="#000080">: </font>Char<font color="#000080">): </font>Integer<font color="#000080">;
   </font><font color="#008000"><i>(*
   With A KRAFT JOYSTICK, VALUES RETURNED ARE in THE RANGE 4 to ABOUT
   140. if YOUR MACHinE RUNS FASTER THAN A STandARD IBM-PC or if YOU
   MODifY YOUR GAME ADAPTER CARD With BIGGER CAPACItoRS, YOU WILL
   GET LARGER COUNTS and YOU MUST MODifY &quot;MAXCOUNT&quot;.

   CALLinG A JOYSTICK THAT IS not in USE or ONE THAT HAS GONE
   OVER-RANGE (COUNT REACHED MAXCOUNT) YIELDS A VALUE of 0.
   *)
   </i></font><font color="#FF0000"><b>Const
      </b></font>MAXCOUNT <font color="#000080">=  </font><font color="#800000">2000</font><font color="#000080">; </font><font color="#008000"><i>(* MODifY THIS if YOU CAN GET LONGER COUNTS     *)
      </i></font>JOYPorT  <font color="#000080">= </font><font color="#800000">$201</font><font color="#000080">; </font><font color="#008000"><i>(* For inForMATION ONLY: LOC of GAME inPUT PorT *)
   </i></font><font color="#FF0000"><b>Var
      </b></font>COUNTER<font color="#000080">: </font>Integer<font color="#000080">;
      </font>MASK<font color="#000080">: </font>Byte<font color="#000080">;
   </font><font color="#FF0000"><b>begin
   if not </b></font><font color="#000080">(</font>WHICH_ONE <font color="#FF0000"><b>in </b></font><font color="#000080">[</font><font color="#800000">'A'</font><font color="#000080">..</font><font color="#800000">'D'</font><font color="#000080">]) </font><font color="#FF0000"><b>then </b></font>WHICH_ONE <font color="#000080">:= </font><font color="#800000">'A'</font><font color="#000080">;
   </font><font color="#FF0000"><b>Case </b></font>WHICH_ONE <font color="#FF0000"><b>of
      </b></font><font color="#800000">'A'</font><font color="#000080">: </font>MASK <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
      </font><font color="#800000">'B'</font><font color="#000080">: </font>MASK <font color="#000080">:= </font><font color="#800000">2</font><font color="#000080">;
      </font><font color="#800000">'C'</font><font color="#000080">: </font>MASK <font color="#000080">:= </font><font color="#800000">4</font><font color="#000080">;
      </font><font color="#800000">'D'</font><font color="#000080">: </font>MASK <font color="#000080">:= </font><font color="#800000">8</font><font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#008000"><i>(*
   THIS ASSEMBLY CODE CAUses THE CX REGISTER to COUNT doWN FROM &quot;MAXCOUNT&quot;
   toWARD ZERO. WHEN CX REACHES ZERO or WHEN THE ONE-SHOT ON THE GAME
   ADAPTER TIMES OUT, THE LOOPinG StoPS and &quot;COUNTER&quot; IS ASSIGNED THE NUMBER
   of COUNTS THAT toOK PLACE. MAXCOUNT SHOULD BE CHOSEN SO THAT CX NEVER
   REACHES 0 SO THAT THE USABLE RANGE of THE JOYSTICK WILL not BE LIMITED.
   *)
   </i></font><font color="#FF0000"><b>Inline </b></font><font color="#000080">(
      </font><font color="#800000">$B9</font><font color="#000080">/</font>MAXCOUNT<font color="#000080">/       </font><font color="#008000"><i>(*       MOV CX,MAXCOUNT inITIALIZE doWN-COUNTER *)
      </i></font><font color="#800000">$BA</font><font color="#000080">/</font>JOYPorT<font color="#000080">/        </font><font color="#008000"><i>(*       MOV DX,JOYPorT  PorT ADDR of JOYSTICKS  *)
      </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$A6</font><font color="#000080">/</font>MASK<font color="#000080">/       </font><font color="#008000"><i>(*       MOV AH,MASK[BP] MASK For DESIRED 1-SHOT *)
      </i></font><font color="#800000">$EE</font><font color="#000080">/                </font><font color="#008000"><i>(*       OUT DX,AL       START THE ONE-SHOTS     *)
      </i></font><font color="#800000">$EC</font><font color="#000080">/                </font><font color="#008000"><i>(* READ: in  AL,DX       READ THE ONESHOTS       *)
      </i></font><font color="#800000">$84</font><font color="#000080">/</font><font color="#800000">$C4</font><font color="#000080">/            </font><font color="#008000"><i>(*      TEST AL,AH       CHECK DESIRED ONE-SHOT  *)
      </i></font><font color="#800000">$E0</font><font color="#000080">/</font><font color="#800000">$FB</font><font color="#000080">/            </font><font color="#008000"><i>(*    LOOPNZ READ        Repeat Until TIMED OUT  *)
      </i></font><font color="#800000">$89</font><font color="#000080">/</font><font color="#800000">$8E</font><font color="#000080">/</font>COUNTER<font color="#000080">);   </font><font color="#008000"><i>(*       MOV COUNTER[BP],CX  THIS MAKES CX AVAIL-*)
                          (*                           ABLE to TURBO       *)
   </i></font><font color="#FF0000"><b>if </b></font>COUNTER <font color="#000080">= </font><font color="#800000">0
      </font><font color="#FF0000"><b>then </b></font>JOYSTICK_POS <font color="#000080">:= </font><font color="#800000">0 </font><font color="#008000"><i>(* OVER-RANGE or not in USE *)
      </i></font><font color="#FF0000"><b>else </b></font>JOYSTICK_POS <font color="#000080">:= </font>MAXCOUNT <font color="#000080">- </font>COUNTER<font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>(* JOYSTICK_POS *)


</i></font><font color="#FF0000"><b>begin    </b></font><font color="#008000"><i>(***** DEMO Program - MAin CODE *****)
</i></font>ClrScr<font color="#000080">;
</font>GotoXY <font color="#000080">(</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">);
</font>WriteLN <font color="#000080">(</font><font color="#800000">'JOYSTICKS'</font><font color="#000080">:</font><font color="#800000">10</font><font color="#000080">, </font><font color="#800000">'BUTtoNS'</font><font color="#000080">:</font><font color="#800000">10</font><font color="#000080">);
</font>Write   <font color="#000080">(</font><font color="#800000">'A'</font><font color="#000080">:</font><font color="#800000">5</font><font color="#000080">, </font><font color="#800000">'B'</font><font color="#000080">:</font><font color="#800000">5</font><font color="#000080">, </font><font color="#800000">'A'</font><font color="#000080">:</font><font color="#800000">5</font><font color="#000080">, </font><font color="#800000">'B'</font><font color="#000080">:</font><font color="#800000">5</font><font color="#000080">);

</font><font color="#FF0000"><b>While </b></font>True <font color="#FF0000"><b>do </b></font><font color="#008000"><i>(* PRESS CTRL C to StoP THE Program *)
   </i></font><font color="#FF0000"><b>begin
   </b></font>GotoXY <font color="#000080">(</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">5</font><font color="#000080">);
   </font>Write <font color="#000080">(</font>JOYSTICK_POS <font color="#000080">(</font><font color="#800000">'A'</font><font color="#000080">):</font><font color="#800000">5</font><font color="#000080">, </font>JOYSTICK_POS <font color="#000080">(</font><font color="#800000">'B'</font><font color="#000080">):</font><font color="#800000">5</font><font color="#000080">);
   </font><font color="#FF0000"><b>if </b></font>BUTtoN_PRESSED <font color="#000080">(</font><font color="#800000">'A'</font><font color="#000080">)
      </font><font color="#FF0000"><b>then </b></font>Write <font color="#000080">(</font><font color="#800000">'PRES'</font><font color="#000080">:</font><font color="#800000">5</font><font color="#000080">)
      </font><font color="#FF0000"><b>else </b></font>Write <font color="#000080">(</font><font color="#800000">'UP'</font><font color="#000080">:</font><font color="#800000">5</font><font color="#000080">);
   </font><font color="#FF0000"><b>if </b></font>BUTtoN_PRESSED <font color="#000080">(</font><font color="#800000">'B'</font><font color="#000080">)
      </font><font color="#FF0000"><b>then </b></font>Write <font color="#000080">(</font><font color="#800000">'PRES'</font><font color="#000080">:</font><font color="#800000">5</font><font color="#000080">)
      </font><font color="#FF0000"><b>else </b></font>Write <font color="#000080">(</font><font color="#800000">'UP'</font><font color="#000080">:</font><font color="#800000">5</font><font color="#000080">);
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to JOYSTICK SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0002.PAS">Original</a><b>]</b></p></body>
</html>
