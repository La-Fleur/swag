<html>
<head><title> "JOYSTCK1.PAS" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to JOYSTICK SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0001.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>Unit </b></font>Joystick<font color="#000080">;
</font><font color="#FF0000"><b>Interface
 Uses </b></font>Crt<font color="#000080">;

 </font><font color="#008000"><i>{ Joystick Interface For Turbo Pascal V. 4.0 and above
   Public Domain, November 1989 by
   JonSoft Technologies Inc.
   (C) 1989 JonSoft Technologies Inc. }

</i></font><font color="#FF0000"><b>Const
 </b></font>centX <font color="#000080">: </font>Byte<font color="#000080">=</font><font color="#800000">80</font><font color="#000080">;
 </font>centY <font color="#000080">: </font>Byte<font color="#000080">=</font><font color="#800000">40</font><font color="#000080">;
 </font>Joyst <font color="#000080">: </font>Boolean<font color="#000080">=</font>True<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>FastInitJS<font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>BetterInitJS<font color="#000080">( </font>range <font color="#000080">: </font>Byte <font color="#000080">);
</font><font color="#FF0000"><b>Function </b></font>joy_X <font color="#000080">: </font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>Function </b></font>joy_Y <font color="#000080">: </font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>Function </b></font>button_1 <font color="#000080">: </font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>Function </b></font>button_2 <font color="#000080">: </font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>Function </b></font>Horiz <font color="#000080">: </font>shortint<font color="#000080">;
</font><font color="#FF0000"><b>Function </b></font>Vert <font color="#000080">: </font>shortint<font color="#000080">;


</font><font color="#FF0000"><b>Implementation

Const
 </b></font>rangexm <font color="#000080">: </font>Byte<font color="#000080">=</font><font color="#800000">25</font><font color="#000080">;
 </font>rangeym <font color="#000080">: </font>Byte<font color="#000080">=</font><font color="#800000">20</font><font color="#000080">;
 </font>rangexp <font color="#000080">: </font>Byte<font color="#000080">=</font><font color="#800000">25</font><font color="#000080">;
 </font>rangeyp <font color="#000080">: </font>Byte<font color="#000080">=</font><font color="#800000">25</font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>joy_X <font color="#000080">: </font>Byte<font color="#000080">;
  </font><font color="#FF0000"><b>Var
    </b></font>x <font color="#000080">: </font>Word<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>x <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font>Port<font color="#000080">[</font><font color="#800000">$201</font><font color="#000080">] := </font><font color="#800000">$ff</font><font color="#000080">;
    </font><font color="#FF0000"><b>While </b></font>Port<font color="#000080">[</font><font color="#800000">$201</font><font color="#000080">] </font><font color="#FF0000"><b>and </b></font><font color="#800000">$1</font><font color="#000080">=</font><font color="#800000">1 </font><font color="#FF0000"><b>do </b></font>Inc<font color="#000080">(</font>x<font color="#000080">);
    </font>joy_X <font color="#000080">:= </font>x<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>joy_Y <font color="#000080">: </font>Byte<font color="#000080">;
  </font><font color="#FF0000"><b>Var
    </b></font>y <font color="#000080">: </font>Word<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>y <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font>Port<font color="#000080">[</font><font color="#800000">$201</font><font color="#000080">] := </font><font color="#800000">$0</font><font color="#000080">;
    </font><font color="#FF0000"><b>While </b></font>Port<font color="#000080">[</font><font color="#800000">$201</font><font color="#000080">] </font><font color="#FF0000"><b>and </b></font><font color="#800000">$2</font><font color="#000080">=</font><font color="#800000">2 </font><font color="#FF0000"><b>do </b></font>Inc<font color="#000080">(</font>y<font color="#000080">);
    </font>joy_Y <font color="#000080">:= </font>y<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>FastInitJs<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>centX <font color="#000080">:= </font>joy_X<font color="#000080">;
    </font>centY <font color="#000080">:= </font>joy_Y<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>button_1 <font color="#000080">: </font>Byte<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>button_1 <font color="#000080">:= ((</font>Port<font color="#000080">[</font><font color="#800000">$201</font><font color="#000080">] </font><font color="#FF0000"><b>and </b></font><font color="#800000">$10</font><font color="#000080">) </font><font color="#FF0000"><b>Xor </b></font><font color="#800000">$10</font><font color="#000080">) </font><font color="#FF0000"><b>ShR </b></font><font color="#800000">4</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>button_2 <font color="#000080">: </font>Byte<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>button_2 <font color="#000080">:= ((</font>Port<font color="#000080">[</font><font color="#800000">$201</font><font color="#000080">] </font><font color="#FF0000"><b>and </b></font><font color="#800000">$20</font><font color="#000080">) </font><font color="#FF0000"><b>Xor </b></font><font color="#800000">$20</font><font color="#000080">) </font><font color="#FF0000"><b>ShR </b></font><font color="#800000">5</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>BetterInitJs<font color="#000080">(</font>range <font color="#000080">: </font>Byte<font color="#000080">);
  </font><font color="#FF0000"><b>Var
</b></font><font color="#008000"><i>(*    Ch : Char; *)
    </i></font>uprjoyX<font color="#000080">, </font>uprjoyY<font color="#000080">, </font>centrjoyX<font color="#000080">, </font>centrjoyY<font color="#000080">, </font>lowrjoyX<font color="#000080">, </font>lowrjoyY <font color="#000080">: </font>Byte<font color="#000080">;

</font><font color="#FF0000"><b>begin
 </b></font>WriteLN<font color="#000080">(</font><font color="#800000">'Are you using a joystick? (Button = yes, RETURN = no)'</font><font color="#000080">);
 </font><font color="#FF0000"><b>Repeat
  if </b></font>button_1<font color="#000080">+</font>button_2 <font color="#000080">&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>Joyst <font color="#000080">:= </font>True<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>KeyPressed <font color="#FF0000"><b>then </b></font>Joyst <font color="#000080">:= </font>False<font color="#000080">;
 </font><font color="#FF0000"><b>Until </b></font><font color="#000080">(</font>button_1<font color="#000080">+</font>button_2 <font color="#000080">&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font>KeyPressed<font color="#000080">;
 </font><font color="#FF0000"><b>if </b></font>Joyst <font color="#000080">= </font>True <font color="#FF0000"><b>then begin
  Repeat Until </b></font>button_1<font color="#000080">+</font>button_2 <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">;
  </font>WriteLN<font color="#000080">(</font><font color="#800000">'Move joystick to UPPER RIGHT corner and press a button.'</font><font color="#000080">);
  </font><font color="#FF0000"><b>Repeat Until </b></font>button_1<font color="#000080">+</font>button_2 <font color="#000080">&gt; </font><font color="#800000">0</font><font color="#000080">;
  </font>uprjoyX <font color="#000080">:= </font>joy_X<font color="#000080">;
  </font>uprjoyY <font color="#000080">:= </font>joy_Y<font color="#000080">;
  </font><font color="#FF0000"><b>Repeat Until </b></font>button_1<font color="#000080">+</font>button_2 <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">;
  </font>WriteLN<font color="#000080">(</font><font color="#800000">'Move joystick to CENTER and press a button.'</font><font color="#000080">);
  </font><font color="#FF0000"><b>Repeat Until </b></font>button_1<font color="#000080">+</font>button_2 <font color="#000080">&gt; </font><font color="#800000">0</font><font color="#000080">;
  </font>centrjoyX <font color="#000080">:= </font>joy_X<font color="#000080">;
  </font>centrjoyY <font color="#000080">:= </font>joy_Y<font color="#000080">;
  </font>centX <font color="#000080">:= </font>centrjoyX<font color="#000080">;
  </font>centY <font color="#000080">:= </font>centrjoyY<font color="#000080">;
  </font><font color="#FF0000"><b>Repeat Until </b></font>button_1<font color="#000080">+</font>button_2 <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">;
  </font>WriteLN<font color="#000080">(</font><font color="#800000">'Move joystick to LOWER LEFT CorNER and press a button.'</font><font color="#000080">);
  </font><font color="#FF0000"><b>Repeat Until </b></font>button_1<font color="#000080">+</font>button_2 <font color="#000080">&gt; </font><font color="#800000">0</font><font color="#000080">;
  </font>lowrjoyX <font color="#000080">:= </font>joy_X<font color="#000080">;
  </font>lowrjoyY <font color="#000080">:= </font>joy_Y<font color="#000080">;
  </font>rangexm <font color="#000080">:= (</font>centrjoyX<font color="#000080">-</font>uprjoyX<font color="#000080">) </font><font color="#FF0000"><b>div </b></font>range<font color="#000080">;
  </font>rangexp <font color="#000080">:= (</font>lowrjoyX<font color="#000080">-</font>centrjoyX<font color="#000080">) </font><font color="#FF0000"><b>div </b></font>range<font color="#000080">;
  </font>rangeym <font color="#000080">:= (</font>centrjoyY<font color="#000080">-</font>uprjoyY<font color="#000080">) </font><font color="#FF0000"><b>div </b></font>range<font color="#000080">;
  </font>rangeyp <font color="#000080">:= (</font>lowrjoyY<font color="#000080">-</font>centrjoyY<font color="#000080">) </font><font color="#FF0000"><b>div </b></font>range<font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Horiz <font color="#000080">: </font>shortint<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    if </b></font>joy_X<font color="#000080">&lt;</font>centX<font color="#000080">-</font>rangexm <font color="#FF0000"><b>then </b></font>Horiz <font color="#000080">:= -</font><font color="#800000">1
    </font><font color="#FF0000"><b>else if </b></font>joy_X <font color="#000080">&gt; </font>centX<font color="#000080">+</font>rangexp <font color="#FF0000"><b>then </b></font>Horiz <font color="#000080">:= </font><font color="#800000">1
    </font><font color="#FF0000"><b>else </b></font>Horiz <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Vert <font color="#000080">: </font>shortint<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    if </b></font>joy_Y<font color="#000080">&lt;</font>centY<font color="#000080">-</font>rangeym <font color="#FF0000"><b>then </b></font>Vert <font color="#000080">:= -</font><font color="#800000">1
    </font><font color="#FF0000"><b>else if </b></font>joy_Y <font color="#000080">&gt; </font>centY<font color="#000080">+</font>rangeyp <font color="#FF0000"><b>then </b></font>Vert <font color="#000080">:= </font><font color="#800000">1
    </font><font color="#FF0000"><b>else </b></font>Vert <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to JOYSTICK SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0001.PAS">Original</a><b>]</b></p></body>
</html>
