<html>
<head><title> "The "Classic" mouse unit" by RICHARD SADOWSKY</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to MOUSE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0007.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>Unit </b></font>Mouse4<font color="#000080">;

</font><font color="#008000"><i>{*******************************************************************}
{*                   Mouse4 - Text Mouse Unit                      *}
{*                     version .9, 11/20/87                        *}
{*                by Richard Sadowsky 74017,1670                   *}
{*                 released to the public domain                   *}
{*******************************************************************}

</i></font><font color="#FF0000"><b>Interface

Uses </b></font>DOS<font color="#000080">;

</font><font color="#FF0000"><b>const
  </b></font>CURPOS           <font color="#000080">= </font><font color="#800000">1</font><font color="#000080">; </font><font color="#008000"><i>{ not used yet in this version }
  </i></font>LEFTPRESS        <font color="#000080">= </font><font color="#800000">2</font><font color="#000080">;
  </font>LEFTREL          <font color="#000080">= </font><font color="#800000">4</font><font color="#000080">;
  </font>RIGHTPRESS       <font color="#000080">= </font><font color="#800000">8</font><font color="#000080">;
  </font>RIGHTREL         <font color="#000080">= </font><font color="#800000">16</font><font color="#000080">;

</font><font color="#FF0000"><b>var
  </b></font>Mouse_Reg        <font color="#000080">: </font>Registers<font color="#000080">;
  </font>Mouse_Installed  <font color="#000080">: </font>Boolean<font color="#000080">;
  </font>Mouse_Error      <font color="#000080">: </font>Word<font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>InitMouse <font color="#000080">: </font>Word<font color="#000080">;
</font><font color="#008000"><i>{ Function 0 - Initialize mouse software and hardware }

</i></font><font color="#FF0000"><b>procedure </b></font>ShowMouse<font color="#000080">;
</font><font color="#008000"><i>{ function 1 - show mouse cursor }

</i></font><font color="#FF0000"><b>procedure </b></font>HideMouse<font color="#000080">;
</font><font color="#008000"><i>{ function 2 - hide mouse cursor }

</i></font><font color="#FF0000"><b>function </b></font>MousePosition<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>MouseX<font color="#000080">,</font>MouseY <font color="#000080">: </font>Word<font color="#000080">) : </font>Word<font color="#000080">;
</font><font color="#008000"><i>{ function 3 - return mouse position and button status }
{ X and Y values scaled for 80 col text mode }

</i></font><font color="#FF0000"><b>procedure </b></font>setmouseposition<font color="#000080">(</font>mousex<font color="#000080">, </font>mousey<font color="#000080">: </font>Word<font color="#000080">);
</font><font color="#008000"><i>{ function 4 - sets mouse position  }
{ X and Y values scaled for 80 col text mode }

</i></font><font color="#FF0000"><b>function </b></font>mousepress<font color="#000080">(</font>button<font color="#000080">: </font>Word<font color="#000080">;
                     </font><font color="#FF0000"><b>var </b></font>count<font color="#000080">, </font>lastx<font color="#000080">, </font>lasty<font color="#000080">: </font>Word<font color="#000080">): </font>Word<font color="#000080">;
</font><font color="#008000"><i>{ function 5 - gets button press information  }
{ X and Y values scaled for 80 col text mode }

</i></font><font color="#FF0000"><b>function </b></font>mouserelease<font color="#000080">(</font>button<font color="#000080">: </font>Word<font color="#000080">;
                       </font><font color="#FF0000"><b>var </b></font>count<font color="#000080">, </font>lastx<font color="#000080">, </font>lasty<font color="#000080">: </font>Word<font color="#000080">): </font>Word<font color="#000080">;
</font><font color="#008000"><i>{ function 6 - gets button release information  }
{ X and Y values scaled for 80 col text mode }

</i></font><font color="#FF0000"><b>procedure </b></font>setmousexy<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">: </font>Word<font color="#000080">);
</font><font color="#008000"><i>{ functions 7 and 8 - sets min/max values for horizontal/vertical  }
{ X and Y values scaled for 80 col text mode }

</i></font><font color="#FF0000"><b>procedure </b></font>restoremousexy<font color="#000080">;
</font><font color="#008000"><i>{ functions 7 and 8 - restores min/max values for CGA screen }

</i></font><font color="#FF0000"><b>procedure </b></font>SetPixeltoMickey<font color="#000080">(</font>Horiz<font color="#000080">,</font>Verti <font color="#000080">: </font>Word<font color="#000080">);
</font><font color="#008000"><i>{ function 15 - sets the mickey to pixel ratio }

</i></font><font color="#FF0000"><b>implementation

function </b></font>InitMouse <font color="#000080">: </font>Word<font color="#000080">;
</font><font color="#008000"><i>{ Function 0 - Initialize mouse software and hardware }
</i></font><font color="#FF0000"><b>begin
  with </b></font>Mouse_Reg <font color="#FF0000"><b>do
    </b></font>Ax <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>Intr<font color="#000080">(</font><font color="#800000">$33</font><font color="#000080">,</font>Mouse_Reg<font color="#000080">);
  </font>InitMouse <font color="#000080">:= </font>Mouse_Reg<font color="#000080">.</font>Ax<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>ShowMouse<font color="#000080">;
</font><font color="#008000"><i>{ function 1 - show mouse cursor }
</i></font><font color="#FF0000"><b>begin
  </b></font>Mouse_Reg<font color="#000080">.</font>Ax <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
  </font>Intr<font color="#000080">(</font><font color="#800000">$33</font><font color="#000080">,</font>Mouse_Reg<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>HideMouse<font color="#000080">;
</font><font color="#008000"><i>{ function 2 - hide mouse cursor }

</i></font><font color="#FF0000"><b>begin
  </b></font>Mouse_Reg<font color="#000080">.</font>AX <font color="#000080">:= </font><font color="#800000">2</font><font color="#000080">;
  </font>Intr<font color="#000080">(</font><font color="#800000">$33</font><font color="#000080">,</font>Mouse_Reg<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>MousePosition<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>MouseX<font color="#000080">,</font>MouseY <font color="#000080">: </font>Word<font color="#000080">) : </font>Word<font color="#000080">;
</font><font color="#008000"><i>{ function 3 - return mouse position and button status }
{ X and Y values scaled for 80 col text mode }
</i></font><font color="#FF0000"><b>begin
  </b></font>Mouse_Reg<font color="#000080">.</font>Ax <font color="#000080">:= </font><font color="#800000">3</font><font color="#000080">;
  </font>Intr<font color="#000080">(</font><font color="#800000">$33</font><font color="#000080">,</font>Mouse_Reg<font color="#000080">);
  </font><font color="#FF0000"><b>with </b></font>Mouse_Reg <font color="#FF0000"><b>do begin
    </b></font>MouseX <font color="#000080">:= </font>Succ<font color="#000080">(</font>Cx <font color="#FF0000"><b>DIV </b></font><font color="#800000">8</font><font color="#000080">);
    </font>MouseY <font color="#000080">:= </font>Succ<font color="#000080">(</font>Dx <font color="#FF0000"><b>DIV </b></font><font color="#800000">8</font><font color="#000080">);
    </font>MousePosition <font color="#000080">:= </font>Bx<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>setmouseposition<font color="#000080">(</font>mousex<font color="#000080">, </font>mousey<font color="#000080">: </font>Word<font color="#000080">);
</font><font color="#008000"><i>{ function 4 - sets mouse position  }
{ X and Y values scaled for 80 col text mode }
</i></font><font color="#FF0000"><b>begin
  </b></font>Mouse_Reg<font color="#000080">.</font>ax<font color="#000080">:=</font><font color="#800000">4</font><font color="#000080">;
  </font>Mouse_Reg<font color="#000080">.</font>cx<font color="#000080">:=</font>Pred<font color="#000080">(</font>mousex<font color="#000080">*</font><font color="#800000">8</font><font color="#000080">);
  </font>Mouse_Reg<font color="#000080">.</font>dx<font color="#000080">:=</font>Pred<font color="#000080">(</font>mousey<font color="#000080">*</font><font color="#800000">8</font><font color="#000080">);
  </font>intr<font color="#000080">(</font><font color="#800000">$33</font><font color="#000080">,</font>Mouse_Reg<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>mousepress<font color="#000080">(</font>button<font color="#000080">: </font>Word<font color="#000080">;
                     </font><font color="#FF0000"><b>var </b></font>count<font color="#000080">, </font>lastx<font color="#000080">, </font>lasty<font color="#000080">: </font>Word<font color="#000080">): </font>Word<font color="#000080">;
</font><font color="#008000"><i>{ function 5 - gets button press information  }
{ X and Y values scaled for 80 col text mode }
</i></font><font color="#FF0000"><b>begin
  </b></font>Mouse_Reg<font color="#000080">.</font>ax<font color="#000080">:=</font><font color="#800000">5</font><font color="#000080">;
  </font>Mouse_Reg<font color="#000080">.</font>bx<font color="#000080">:=</font>button<font color="#000080">;
  </font>intr<font color="#000080">(</font><font color="#800000">$33</font><font color="#000080">,</font>Mouse_Reg<font color="#000080">);;
  </font>mousepress<font color="#000080">:=</font>Mouse_Reg<font color="#000080">.</font>ax<font color="#000080">;
  </font>count<font color="#000080">:=</font>Mouse_Reg<font color="#000080">.</font>bx<font color="#000080">;
  </font>lastx<font color="#000080">:=</font>Succ<font color="#000080">(</font>Mouse_Reg<font color="#000080">.</font>cx <font color="#FF0000"><b>div </b></font><font color="#800000">8</font><font color="#000080">);
  </font>lasty<font color="#000080">:=</font>Succ<font color="#000080">(</font>Mouse_Reg<font color="#000080">.</font>dx <font color="#FF0000"><b>div </b></font><font color="#800000">8</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>mouserelease<font color="#000080">(</font>button<font color="#000080">: </font>Word<font color="#000080">;
                       </font><font color="#FF0000"><b>var </b></font>count<font color="#000080">, </font>lastx<font color="#000080">, </font>lasty<font color="#000080">: </font>Word<font color="#000080">): </font>Word<font color="#000080">;
</font><font color="#008000"><i>{ function 6 - gets button release information  }
{ X and Y values scaled for 80 col text mode }
</i></font><font color="#FF0000"><b>begin
  </b></font>Mouse_Reg<font color="#000080">.</font>ax<font color="#000080">:=</font><font color="#800000">6</font><font color="#000080">;
  </font>Mouse_Reg<font color="#000080">.</font>bx<font color="#000080">:=</font>button<font color="#000080">;
  </font>intr<font color="#000080">(</font><font color="#800000">$33</font><font color="#000080">,</font>Mouse_Reg<font color="#000080">);;
  </font>mouserelease<font color="#000080">:=</font>Mouse_Reg<font color="#000080">.</font>ax<font color="#000080">;
  </font>count<font color="#000080">:=</font>Mouse_Reg<font color="#000080">.</font>bx<font color="#000080">;
  </font>lastx <font color="#000080">:= </font>Succ<font color="#000080">(</font>Mouse_Reg<font color="#000080">.</font>cx <font color="#FF0000"><b>div </b></font><font color="#800000">8</font><font color="#000080">);
  </font>lasty <font color="#000080">:= </font>Succ<font color="#000080">(</font>Mouse_Reg<font color="#000080">.</font>dx <font color="#FF0000"><b>div </b></font><font color="#800000">8</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>setmousexy<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">: </font>Word<font color="#000080">);
</font><font color="#008000"><i>{ functions 7 and 8 - sets min/max values for horizontal/vertical  }
{ X and Y values scaled for 80 col text mode }
</i></font><font color="#FF0000"><b>begin
  </b></font>Mouse_Reg<font color="#000080">.</font>ax<font color="#000080">:=</font><font color="#800000">7</font><font color="#000080">;
  </font>Mouse_Reg<font color="#000080">.</font>cx<font color="#000080">:=</font>Pred<font color="#000080">(</font>x1<font color="#000080">*</font><font color="#800000">8</font><font color="#000080">);
  </font>Mouse_Reg<font color="#000080">.</font>dx<font color="#000080">:=</font>Pred<font color="#000080">(</font>x2<font color="#000080">*</font><font color="#800000">8</font><font color="#000080">);
  </font>intr<font color="#000080">(</font><font color="#800000">$33</font><font color="#000080">,</font>Mouse_Reg<font color="#000080">);
  </font>Mouse_Reg<font color="#000080">.</font>ax<font color="#000080">:=</font><font color="#800000">8</font><font color="#000080">;
  </font>Mouse_Reg<font color="#000080">.</font>cx<font color="#000080">:=</font>Pred<font color="#000080">(</font>y1<font color="#000080">*</font><font color="#800000">8</font><font color="#000080">);
  </font>Mouse_Reg<font color="#000080">.</font>dx<font color="#000080">:=</font>Pred<font color="#000080">(</font>y2<font color="#000080">*</font><font color="#800000">8</font><font color="#000080">);
  </font>intr<font color="#000080">(</font><font color="#800000">$33</font><font color="#000080">,</font>Mouse_Reg<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>restoremousexy<font color="#000080">;
</font><font color="#008000"><i>{ functions 7 and 8 - restores min/max values for CGA screen }
</i></font><font color="#FF0000"><b>begin
  </b></font>Mouse_Reg<font color="#000080">.</font>ax<font color="#000080">:=</font><font color="#800000">7</font><font color="#000080">;
  </font>Mouse_Reg<font color="#000080">.</font>cx<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font>Mouse_Reg<font color="#000080">.</font>dx<font color="#000080">:=</font><font color="#800000">639</font><font color="#000080">;
  </font>intr<font color="#000080">(</font><font color="#800000">$33</font><font color="#000080">,</font>Mouse_Reg<font color="#000080">);
  </font>Mouse_Reg<font color="#000080">.</font>ax<font color="#000080">:=</font><font color="#800000">8</font><font color="#000080">;
  </font>Mouse_Reg<font color="#000080">.</font>cx<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font>Mouse_Reg<font color="#000080">.</font>dx<font color="#000080">:=</font><font color="#800000">199</font><font color="#000080">;
  </font>intr<font color="#000080">(</font><font color="#800000">$33</font><font color="#000080">,</font>Mouse_Reg<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>SetPixeltoMickey<font color="#000080">(</font>Horiz<font color="#000080">,</font>Verti <font color="#000080">: </font>Word<font color="#000080">);
</font><font color="#008000"><i>{ function 15 - sets the mickey to pixel ratio }

</i></font><font color="#FF0000"><b>begin
  with </b></font>Mouse_Reg <font color="#FF0000"><b>do begin
    </b></font>Ax <font color="#000080">:= </font><font color="#800000">15</font><font color="#000080">;
    </font>Cx <font color="#000080">:= </font>Horiz<font color="#000080">;
    </font>Dx <font color="#000080">:= </font>Verti<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>Intr<font color="#000080">(</font><font color="#800000">$33</font><font color="#000080">,</font>Mouse_Reg<font color="#000080">)
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>Mouse_Error <font color="#000080">:= </font>InitMouse<font color="#000080">;
  </font>Mouse_Installed <font color="#000080">:= </font>Mouse_Error <font color="#000080">= </font><font color="#800000">65535</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to MOUSE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0007.PAS">Original</a><b>]</b></p></body>
</html>
