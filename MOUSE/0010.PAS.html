<html>
<head><title> "Mouse Tutor" by FRED JOHNSON</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to MOUSE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0010.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
From: FRED JOHNSON
Subj: Mousey Control..
Can someone out there please explain how to read from the mouse?
}

{Explanation below in reference table}
</i></font><font color="#FF0000"><b>USES </b></font>dos<font color="#000080">,</font>crt<font color="#000080">;

</font><font color="#FF0000"><b>VAR
 </b></font>M1<font color="#000080">,</font>M2<font color="#000080">,</font>M3<font color="#000080">,</font>M4 <font color="#000080">: </font>word<font color="#000080">;
 </font>Regs        <font color="#000080">: </font>Registers<font color="#000080">;  </font><font color="#008000"><i>{ MS DOS Registers }
 </i></font>satisfied   <font color="#000080">: </font>boolean<font color="#000080">;    </font><font color="#008000"><i>{ if mouse pos and button are together }

</i></font><font color="#FF0000"><b>PROCEDURE </b></font>mouse<font color="#000080">( </font><font color="#FF0000"><b>var </b></font>M1<font color="#000080">,</font>M2<font color="#000080">,</font>M3<font color="#000080">,</font>M4 <font color="#000080">: </font>word <font color="#000080">);
  </font><font color="#FF0000"><b>begin
    With </b></font>Regs <font color="#FF0000"><b>DO
      begin
        </b></font>AX <font color="#000080">:= </font>M1<font color="#000080">; </font>BX <font color="#000080">:= </font>M2<font color="#000080">; </font>CX <font color="#000080">:= </font>M3<font color="#000080">; </font>DX <font color="#000080">:= </font>M4<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>intr<font color="#000080">(</font><font color="#800000">$33</font><font color="#000080">,</font>Regs<font color="#000080">); </font><font color="#008000"><i>{ Interrupt $33, the mouse interrupt }
    </i></font><font color="#FF0000"><b>With </b></font>Regs <font color="#FF0000"><b>DO
      begin
        </b></font>M1 <font color="#000080">:= </font>AX<font color="#000080">; </font>M2 <font color="#000080">:= </font>BX<font color="#000080">; </font>M3 <font color="#000080">:= </font>CX<font color="#000080">; </font>M4 <font color="#000080">:= </font>DX<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>PROCEDURE </b></font>initmouse<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>M1 <font color="#000080">:= </font><font color="#800000">1 </font><font color="#000080">; </font>Mouse<font color="#000080">( </font>M1<font color="#000080">,</font>M2<font color="#000080">,</font>M3<font color="#000080">,</font>M4 <font color="#000080">) </font><font color="#008000"><i>{ Set mouse cursor ON }
  </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>BEGIN
  </b></font>satisfied <font color="#000080">:= </font>false<font color="#000080">;
  </font>textcolor<font color="#000080">(</font><font color="#800000">7</font><font color="#000080">); </font><font color="#008000"><i>{ Grey }
  </i></font>clrscr<font color="#000080">;
  </font>initmouse<font color="#000080">;
 </font><font color="#FF0000"><b>while not </b></font>keypressed <font color="#FF0000"><b>do </b></font><font color="#008000"><i>{ until  KEYBOARD key is pressed }
    </i></font><font color="#FF0000"><b>begin
     </b></font>M1 <font color="#000080">:= </font><font color="#800000">3</font><font color="#000080">;
      </font>MOUSE<font color="#000080">(</font>m1<font color="#000080">,</font>M2<font color="#000080">,</font>M3<font color="#000080">,</font>M4<font color="#000080">);
      </font><font color="#FF0000"><b>IF </b></font><font color="#000080">(</font>M2 <font color="#FF0000"><b>and </b></font><font color="#800000">1</font><font color="#000080">) &lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
        begin                </b></font><font color="#008000"><i>{ if left button pressed }
          </i></font>writeln<font color="#000080">(</font><font color="#800000">' Left Button'</font><font color="#000080">);
          </font>write<font color="#000080">(</font><font color="#800000">' M3 ='</font><font color="#000080">,</font>M3 <font color="#FF0000"><b>div </b></font><font color="#800000">8</font><font color="#000080">); </font>write<font color="#000080">(</font><font color="#800000">' M4 ='</font><font color="#000080">,</font>M4 <font color="#FF0000"><b>div </b></font><font color="#800000">8</font><font color="#000080">);
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>M2 <font color="#FF0000"><b>and </b></font><font color="#800000">2</font><font color="#000080">) &lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
        begin                </b></font><font color="#008000"><i>{ if rght button pressed }
          </i></font>writeln<font color="#000080">(</font><font color="#800000">' Right Button'</font><font color="#000080">);
          </font>write<font color="#000080">(</font><font color="#800000">' M3 ='</font><font color="#000080">,</font>M3 <font color="#FF0000"><b>div </b></font><font color="#800000">8</font><font color="#000080">); </font>write<font color="#000080">(</font><font color="#800000">' M4 ='</font><font color="#000080">,</font>M4 <font color="#FF0000"><b>div </b></font><font color="#800000">8</font><font color="#000080">);
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>M2 <font color="#FF0000"><b>and </b></font><font color="#800000">4</font><font color="#000080">) &lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then                      </b></font><font color="#008000"><i>{if midlbutton pressed}
        </i></font><font color="#FF0000"><b>begin
          </b></font>M1 <font color="#000080">:= </font><font color="#800000">4</font><font color="#000080">; </font>M2 <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">; </font>M3 <font color="#000080">:= </font><font color="#800000">30</font><font color="#000080">*</font><font color="#800000">8</font><font color="#000080">; </font>M4 <font color="#000080">:= </font><font color="#800000">11</font><font color="#000080">*</font><font color="#800000">8</font><font color="#000080">; </font><font color="#008000"><i>{Sets MCursor out of }
          </i></font>mouse<font color="#000080">( </font>M1<font color="#000080">,</font>M2<font color="#000080">,</font>M3<font color="#000080">,</font>M4 <font color="#000080">);                     </font><font color="#008000"><i>{the way }
          </i></font>gotoxy<font color="#000080">(</font><font color="#800000">25</font><font color="#000080">,</font><font color="#800000">10</font><font color="#000080">); </font>write<font color="#000080">(</font><font color="#800000">'***************'</font><font color="#000080">);
          </font>gotoxy<font color="#000080">(</font><font color="#800000">25</font><font color="#000080">,</font><font color="#800000">11</font><font color="#000080">); </font>write<font color="#000080">(</font><font color="#800000">'* '</font><font color="#000080">);</font>textcolor<font color="#000080">(</font><font color="#800000">14</font><font color="#000080">);
          </font>write<font color="#000080">(</font><font color="#800000">'C'</font><font color="#000080">); </font>textcolor<font color="#000080">(</font><font color="#800000">07</font><font color="#000080">); </font>write<font color="#000080">(</font><font color="#800000">'learscreen *'</font><font color="#000080">);
          </font>gotoxy<font color="#000080">(</font><font color="#800000">25</font><font color="#000080">,</font><font color="#800000">12</font><font color="#000080">); </font>write<font color="#000080">(</font><font color="#800000">'* '</font><font color="#000080">); </font>textcolor<font color="#000080">(</font><font color="#800000">14</font><font color="#000080">);
          </font>write<font color="#000080">(</font><font color="#800000">'Q'</font><font color="#000080">); </font>textcolor<font color="#000080">(</font><font color="#800000">07</font><font color="#000080">); </font>write<font color="#000080">(</font><font color="#800000">'uit        *'</font><font color="#000080">);
          </font>gotoxy<font color="#000080">(</font><font color="#800000">25</font><font color="#000080">,</font><font color="#800000">13</font><font color="#000080">); </font>write<font color="#000080">(</font><font color="#800000">'***************'</font><font color="#000080">);
          </font><font color="#FF0000"><b>repeat
            </b></font>M1 <font color="#000080">:= </font><font color="#800000">3</font><font color="#000080">;
            </font>mouse<font color="#000080">(</font>M1<font color="#000080">,</font>M2<font color="#000080">,</font>M3<font color="#000080">,</font>M4<font color="#000080">);
            </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>M3 <font color="#FF0000"><b>div </b></font><font color="#800000">8</font><font color="#000080">) = </font><font color="#800000">26 </font><font color="#FF0000"><b>then                 </b></font><font color="#008000"><i>{ Tests X position }
              </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>M4 <font color="#FF0000"><b>div </b></font><font color="#800000">8</font><font color="#000080">) = </font><font color="#800000">10 </font><font color="#FF0000"><b>then               </b></font><font color="#008000"><i>{ Tests Y position }
                </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>M2 <font color="#FF0000"><b>and </b></font><font color="#800000">1</font><font color="#000080">) &lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then             </b></font><font color="#008000"><i>{ Tests lft button }
                  </i></font><font color="#FF0000"><b>begin
                    </b></font>satisfied <font color="#000080">:= </font>true<font color="#000080">;
                    </font>M1 <font color="#000080">:= </font><font color="#800000">4</font><font color="#000080">; </font>M2  <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">; </font>M3 <font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">; </font>M4 <font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;</font><font color="#008000"><i>{MCursor out of way}
                    </i></font>mouse<font color="#000080">( </font>M1<font color="#000080">,</font>M2<font color="#000080">,</font>M3<font color="#000080">,</font>M4 <font color="#000080">);
                    </font>clrscr<font color="#000080">;
                  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

            </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>M3 <font color="#FF0000"><b>div </b></font><font color="#800000">8</font><font color="#000080">) = </font><font color="#800000">26 </font><font color="#FF0000"><b>then                </b></font><font color="#008000"><i>{ Tests X position }
              </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>M4 <font color="#FF0000"><b>div </b></font><font color="#800000">8</font><font color="#000080">) = </font><font color="#800000">11 </font><font color="#FF0000"><b>then              </b></font><font color="#008000"><i>{ Tests Y position }
                </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>M2 <font color="#FF0000"><b>and </b></font><font color="#800000">1</font><font color="#000080">) &lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then            </b></font><font color="#008000"><i>{ Tests lft button }
                  </i></font><font color="#FF0000"><b>begin
                    </b></font>satisfied <font color="#000080">:= </font>true<font color="#000080">;
                    </font>M1 <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">; </font>M2 <font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">; </font>M3 <font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">; </font>M4 <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;  </font><font color="#008000"><i>{ Turn Mouse Off }
                    </i></font>mouse<font color="#000080">( </font>M1<font color="#000080">,</font>M2<font color="#000080">,</font>M3<font color="#000080">,</font>M4 <font color="#000080">);
                    </font>clrscr<font color="#000080">;
                    </font>halt<font color="#000080">;
                  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

          </font><font color="#FF0000"><b>until </b></font>satisfied <font color="#000080">= </font>true<font color="#000080">;
          </font>clrscr<font color="#000080">;
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
          </font>satisfied <font color="#000080">:= </font>false<font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font>M1 <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;                                            </font><font color="#008000"><i>{ Turn Mouse Off }
   </i></font>mouse<font color="#000080">(</font>M1<font color="#000080">,</font>M2<font color="#000080">,</font>M3<font color="#000080">,</font>M4<font color="#000080">);
</font><font color="#FF0000"><b>END</b></font><font color="#000080">.

</font>Reference Table
  M1 M2 M3 M4
  <font color="#800000">1  0  0  0   </font><font color="#000080">= </font>Turn Mouse <font color="#FF0000"><b>on with </b></font>cursor<font color="#000080">.
  </font><font color="#800000">2  0  0  0   </font><font color="#000080">= </font>Turn Mouse Off<font color="#000080">.
  </font><font color="#800000">3  </font><font color="#000080">?  ?  ?   = </font><font color="#FF0000"><b>To </b></font>see <font color="#FF0000"><b>if </b></font>buttons are pressed<font color="#000080">.
                  </font>Test registers <font color="#FF0000"><b>with </b></font>logical <font color="#FF0000"><b>AND   </b></font><font color="#000080">(</font>M2 <font color="#FF0000"><b>is </b></font>BX <font color="#FF0000"><b>register</b></font><font color="#000080">)
                  </font>M2 <font color="#FF0000"><b>and </b></font><font color="#800000">1 </font><font color="#000080">= </font>Left Button
                  M2 <font color="#FF0000"><b>and </b></font><font color="#800000">2 </font><font color="#000080">= </font>Right Button
                  M2 <font color="#FF0000"><b>and </b></font><font color="#800000">3 </font><font color="#000080">= </font>Left <font color="#FF0000"><b>and </b></font>Right Buttons
                  M2 <font color="#FF0000"><b>and </b></font><font color="#800000">4 </font><font color="#000080">= </font>Middle Button
                  M2 <font color="#FF0000"><b>and </b></font><font color="#800000">5 </font><font color="#000080">= </font>Left <font color="#FF0000"><b>and </b></font>Middle Buttons
                  M2 <font color="#FF0000"><b>and </b></font><font color="#800000">6 </font><font color="#000080">= </font>Right <font color="#FF0000"><b>and </b></font>Middle Buttons
                  M2 <font color="#FF0000"><b>and </b></font><font color="#800000">7 </font><font color="#000080">= </font>Left<font color="#000080">, </font>Middle <font color="#FF0000"><b>and </b></font>Right Buttons

  <font color="#800000">3  0  </font>X  Y  <font color="#000080">= </font>Get Mouse Cursor position<font color="#000080">.
                 </font>M3 <font color="#000080">(</font>CX<font color="#000080">) </font>will return Mouse X coordinates<font color="#000080">. (</font><font color="#800000">0  </font><font color="#000080">=</font>left wall<font color="#000080">)
                 </font>M4 <font color="#000080">(</font>DX<font color="#000080">) </font>will return Mouse Y coordinates<font color="#000080">. (</font><font color="#800000">632</font><font color="#000080">= </font>rght wall<font color="#000080">)
                 </font>Divide by <font color="#800000">8 </font><font color="#FF0000"><b>and </b></font>add <font color="#800000">1 </font><font color="#FF0000"><b>for </b></font>Turbo <font color="#FF0000"><b>Pascal </b></font>XY position<font color="#000080">.

  </font><font color="#800000">4  0  </font>X  Y  <font color="#000080">= </font><font color="#FF0000"><b>Set </b></font>Mouse Cursor position<font color="#000080">.
                 </font>M3 <font color="#000080">(</font>CX<font color="#000080">) </font><font color="#FF0000"><b>set for </b></font>Mouse X coordinate<font color="#000080">.      (</font><font color="#800000">0  </font><font color="#000080">= </font>left wall<font color="#000080">)
                 </font>M4 <font color="#000080">(</font>DX<font color="#000080">) </font><font color="#FF0000"><b>set for </b></font>Mouse Y coordinate<font color="#000080">.      (</font><font color="#800000">632</font><font color="#000080">= </font>rght wall<font color="#000080">)

  </font><font color="#800000">6  </font><font color="#000080">?  </font><font color="#800000">0  0  </font><font color="#000080">= </font>Mouse Button Release Status<font color="#000080">.             </font>M2<font color="#000080">(</font>BX<font color="#000080">)</font><font color="#FF0000"><b>set if </b></font>True

                          Assembly Language Example
mov ax<font color="#000080">,</font><font color="#800000">0001   </font><font color="#000080">; (</font>M1 <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">)
</font>int <font color="#800000">33</font>h       <font color="#000080">; </font><font color="#FF0000"><b>Set </b></font>Mouse cursor <font color="#FF0000"><b>ON
</b></font>here<font color="#000080">:         ;
</font>mov ax<font color="#000080">,</font><font color="#800000">0003   </font><font color="#000080">; (</font>M1 <font color="#000080">:= </font><font color="#800000">3</font><font color="#000080">)
</font>int <font color="#800000">33</font>h       <font color="#000080">; </font>Test <font color="#FF0000"><b>for </b></font>mouse Keypress
<font color="#FF0000"><b>and </b></font>bx<font color="#000080">,</font><font color="#800000">1      </font><font color="#000080">; </font>left button<font color="#000080">?
</font>jne lft       <font color="#000080">;
</font>mov ax<font color="#000080">,</font><font color="#800000">0003   </font><font color="#000080">;
</font>int <font color="#800000">33</font>h       <font color="#000080">;
</font><font color="#FF0000"><b>and </b></font>bx<font color="#000080">,</font><font color="#800000">2      </font><font color="#000080">; </font>right button<font color="#000080">?
</font>jne rht       <font color="#000080">;
</font>mov ax<font color="#000080">,</font><font color="#800000">0003   </font><font color="#000080">;
</font>int <font color="#800000">33</font>h       <font color="#000080">;
</font><font color="#FF0000"><b>and </b></font>bx<font color="#000080">,</font><font color="#800000">4      </font><font color="#000080">; </font>middle button<font color="#000080">?
</font>jne mid       <font color="#000080">;
</font>jmp here      <font color="#000080">; </font><font color="#FF0000"><b>if not </b></font>keep looping
lft<font color="#000080">:          ;
</font>mov dx<font color="#000080">,</font>lft_st <font color="#000080">; </font>address <font color="#FF0000"><b>of string if </b></font>left button
jmp prnt      <font color="#000080">;
</font>rht<font color="#000080">:          ;
</font>mov dx<font color="#000080">,</font>rht_st <font color="#000080">; </font>address <font color="#FF0000"><b>of string if </b></font>right button

</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to MOUSE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0010.PAS">Original</a><b>]</b></p></body>
</html>
