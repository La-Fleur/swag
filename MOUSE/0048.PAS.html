<html>
<head><title> "Fast Assembler Mouse Unit" by OSKARI RAUTA</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to MOUSE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0048.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>Unit </b></font>OwnMouse<font color="#000080">;

</font><font color="#008000"><i>(*
=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=
=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=
=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=
=FE=FE=FE
=FE                            Bios mouse unit (Assembler code)          =
      =FE
=FE                            Totally coded by Lunatic/Lucifer          =
      =FE
=FE  If you use this unit, please, give some credits for me, or atleast s=
end   =FE
=FE                copy of your program(or it's source) to lunatic@dlc.fi=
      =FE
=FE                      -=C4=CD FREEWARE SOURCE FROM SWAG'S MOUSE.SWG =CD=
--         =FE
=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=
=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=
=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=FE=
=FE=FE=FE
*)

</i></font><font color="#FF0000"><b>Interface

</b></font><font color="#008000"><i>(* ---------------------- MOUSE PROCEDURES ---------------------------- *)


</i></font><font color="#FF0000"><b>Procedure </b></font>GetMouseData<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>major<font color="#000080">,</font>minor<font color="#000080">,</font>mousetype<font color="#000080">,</font>irq<font color="#000080">:</font>byte<font color="#000080">);</font><font color="#008000"><i>{Restores vers=
ion,
                                                            (major.minor)=
,
                                                            type of mouse=
 and
                                                            mouse's IRQ}
</i></font><font color="#FF0000"><b>Procedure </b></font>TellAboutMouse<font color="#000080">; </font><font color="#008000"><i>{Textmode ofcourse.. Tells somethin' about your=

                           mouse}
</i></font><font color="#FF0000"><b>Procedure </b></font>ShowMouse<font color="#000080">;           </font><font color="#008000"><i>{Show mouse cursor}
</i></font><font color="#FF0000"><b>Procedure </b></font>HideMouse<font color="#000080">;           </font><font color="#008000"><i>{Hide mouse cursor}
</i></font><font color="#FF0000"><b>Procedure </b></font>SetMOUSEXY<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">:</font>integer<font color="#000080">);           </font><font color="#008000"><i>{Set's mouse's coordinates t=
o
                                              x,y}
</i></font><font color="#FF0000"><b>Procedure </b></font>MouseAREA<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">:</font>integer<font color="#000080">);           </font><font color="#008000"><i>{Set's mouses minimum=
 and
                                                     maximum x,y}
</i></font><font color="#FF0000"><b>Procedure </b></font>SetSensitivity<font color="#000080">(</font>xsens<font color="#000080">,</font>ysens<font color="#000080">,</font>dst<font color="#000080">:</font>integer<font color="#000080">); </font><font color="#008000"><i>{Set mouse sensitivity=
}
</i></font><font color="#FF0000"><b>Procedure </b></font>GetSensitivity<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>xsens<font color="#000080">,</font>ysens<font color="#000080">,</font>dst<font color="#000080">:</font>integer<font color="#000080">); </font><font color="#008000"><i>{Get sensitivity}
{dst= double speed treshold xsens= xsensitivity ysens= ysensitivity}

(* ---------------------- MOUSE FUNCTIONS ---------------------------- *)


</i></font><font color="#FF0000"><b>Function </b></font>MouseInstalled<font color="#000080">:</font>Boolean<font color="#000080">; </font><font color="#008000"><i>{Returns TRUE if mouse has been installe=
d}
</i></font><font color="#FF0000"><b>Function </b></font>Buttons<font color="#000080">:</font>integer<font color="#000080">; </font><font color="#008000"><i>{Restores number of buttons}
</i></font><font color="#FF0000"><b>Function </b></font>MouseLanguage<font color="#000080">:</font>Integer<font color="#000080">;                   </font><font color="#008000"><i>{Restores the language =
of
                                                   mouse driver..}
</i></font><font color="#FF0000"><b>Function </b></font>MouseX<font color="#000080">:</font>Integer<font color="#000080">; </font><font color="#008000"><i>{Restores Mouse's X vector}
</i></font><font color="#FF0000"><b>Function </b></font>MouseY<font color="#000080">:</font>Integer<font color="#000080">; </font><font color="#008000"><i>{Restores Mouse's Y vector}
</i></font><font color="#FF0000"><b>Function </b></font>LeftPressed<font color="#000080">:</font>Boolean<font color="#000080">; </font><font color="#008000"><i>{Returns true if LeftButton of mouse is pre=
ssed}
</i></font><font color="#FF0000"><b>Function </b></font>LeftReleased<font color="#000080">:</font>Boolean<font color="#000080">; </font><font color="#008000"><i>{Returns true if LeftButton is not pressed=
}
</i></font><font color="#FF0000"><b>Function </b></font>RightPressed<font color="#000080">:</font>Boolean<font color="#000080">; </font><font color="#008000"><i>{Returns true if RightButton has been pres=
sed}
</i></font><font color="#FF0000"><b>Function </b></font>RightReleased<font color="#000080">:</font>Boolean<font color="#000080">; </font><font color="#008000"><i>{Returns true if Rightbutton hasn't been
                                 pressed}


</i></font><font color="#FF0000"><b>Implementation

Function </b></font>MouseInstalled<font color="#000080">:</font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>Var </b></font>inst<font color="#000080">:</font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>Begin
Asm
</b></font><font color="#FF00FF">Mov ax, 00h
Int 33h
Mov inst, ax
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>If </b></font>inst<font color="#000080">= </font><font color="#800000">$0000 </font><font color="#FF0000"><b>Then </b></font>MouseInstalled<font color="#000080">:= </font>True<font color="#000080">;
</font><font color="#FF0000"><b>If </b></font>inst<font color="#000080">= </font><font color="#800000">$FFFF </font><font color="#FF0000"><b>then </b></font>MouseInstalled<font color="#000080">:= </font>False<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Buttons<font color="#000080">:</font>integer<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>buttonnum<font color="#000080">:</font>integer<font color="#000080">;
</font><font color="#FF0000"><b>Begin
Asm
</b></font><font color="#FF00FF">Mov ax, 00h
Int 33h
Mov buttonnum, bx
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font>Buttons<font color="#000080">:= </font>buttonnum<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>GetMouseData<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>major<font color="#000080">,</font>minor<font color="#000080">,</font>mousetype<font color="#000080">,</font>irq<font color="#000080">:</font>byte<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>v1<font color="#000080">,</font>v2<font color="#000080">,</font>mt<font color="#000080">,</font>i<font color="#000080">:</font>byte<font color="#000080">;
</font><font color="#FF0000"><b>Begin
asm
</b></font><font color="#FF00FF">Mov ax, 24h
Int 33h
Mov v1, bh
Mov v2, bl
Mov mt, ch
Mov i, cl
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font>major<font color="#000080">:= </font>v1<font color="#000080">;</font>minor<font color="#000080">:= </font>v2<font color="#000080">;</font>mousetype<font color="#000080">:= </font>mt<font color="#000080">;</font>irq<font color="#000080">:= </font>i<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>MouseLanguage<font color="#000080">:</font>Integer<font color="#000080">;</font><font color="#FF0000"><b>var </b></font>kieli<font color="#000080">:</font>integer<font color="#000080">;
</font><font color="#FF0000"><b>Begin Asm
</b></font><font color="#FF00FF">Mov ax, 23h
Int 33h
Mov kieli, bx
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font>MouseLanguage<font color="#000080">:= </font>kieli<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>TellAboutMouse<font color="#000080">; </font><font color="#008000"><i>{Textmode ofcourse..}
</i></font><font color="#FF0000"><b>var </b></font>v1<font color="#000080">,</font>v2<font color="#000080">,</font>mt<font color="#000080">,</font>irq<font color="#000080">:</font>byte<font color="#000080">;</font>lan<font color="#000080">:</font>integer<font color="#000080">;
</font><font color="#FF0000"><b>Begin
</b></font>GetMouseData<font color="#000080">(</font>v1<font color="#000080">,</font>v2<font color="#000080">,</font>mt<font color="#000080">,</font>irq<font color="#000080">);
</font>lan<font color="#000080">:= </font>MouseLanguage<font color="#000080">;
</font>Write<font color="#000080">(</font><font color="#800000">'Mouse type: '</font><font color="#000080">);
</font><font color="#FF0000"><b>If </b></font>mt<font color="#000080">= </font><font color="#800000">1 </font><font color="#FF0000"><b>Then </b></font>WriteLn<font color="#000080">(</font><font color="#800000">'BUS mouse'</font><font color="#000080">);
</font><font color="#FF0000"><b>If </b></font>mt<font color="#000080">= </font><font color="#800000">2 </font><font color="#FF0000"><b>Then </b></font>WriteLn<font color="#000080">(</font><font color="#800000">'Serial mouse'</font><font color="#000080">);
</font><font color="#FF0000"><b>If </b></font>mt<font color="#000080">= </font><font color="#800000">3 </font><font color="#FF0000"><b>Then </b></font>WriteLn<font color="#000080">(</font><font color="#800000">'InPort mouse'</font><font color="#000080">);
</font><font color="#FF0000"><b>If </b></font>mt<font color="#000080">= </font><font color="#800000">4 </font><font color="#FF0000"><b>Then </b></font>WriteLn<font color="#000080">(</font><font color="#800000">'PS/2 mouse'</font><font color="#000080">);
</font><font color="#FF0000"><b>If </b></font>mt<font color="#000080">= </font><font color="#800000">5 </font><font color="#FF0000"><b>Then </b></font>WriteLn<font color="#000080">(</font><font color="#800000">'Hewlett Packard mouse'</font><font color="#000080">);
</font>WriteLn<font color="#000080">(</font><font color="#800000">'Version: '</font><font color="#000080">,</font>v1<font color="#000080">,</font><font color="#800000">'.'</font><font color="#000080">,</font>v2<font color="#000080">);
</font>Write<font color="#000080">(</font><font color="#800000">'Mouse IRQ: '</font><font color="#000080">);
</font><font color="#FF0000"><b>If </b></font>irq<font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>Then </b></font>WriteLn<font color="#000080">(</font><font color="#800000">'PS/2'</font><font color="#000080">) </font><font color="#FF0000"><b>else </b></font>WriteLn<font color="#000080">(</font>irq<font color="#000080">);
</font>Write<font color="#000080">(</font><font color="#800000">'Mouse language: '</font><font color="#000080">);
</font><font color="#FF0000"><b>if </b></font>lan<font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>Then </b></font>WriteLn<font color="#000080">(</font><font color="#800000">'english'</font><font color="#000080">);
</font><font color="#FF0000"><b>if </b></font>lan<font color="#000080">= </font><font color="#800000">1 </font><font color="#FF0000"><b>Then </b></font>WriteLn<font color="#000080">(</font><font color="#800000">'french (F)'</font><font color="#000080">);
</font><font color="#FF0000"><b>if </b></font>lan<font color="#000080">= </font><font color="#800000">2 </font><font color="#FF0000"><b>Then </b></font>WriteLn<font color="#000080">(</font><font color="#800000">'dutch (NL)'</font><font color="#000080">);
</font><font color="#FF0000"><b>if </b></font>lan<font color="#000080">= </font><font color="#800000">3 </font><font color="#FF0000"><b>Then </b></font>WriteLn<font color="#000080">(</font><font color="#800000">'german (D)'</font><font color="#000080">);
</font><font color="#FF0000"><b>if </b></font>lan<font color="#000080">= </font><font color="#800000">4 </font><font color="#FF0000"><b>Then </b></font>WriteLn<font color="#000080">(</font><font color="#800000">'swedish (S)'</font><font color="#000080">);
</font><font color="#FF0000"><b>if </b></font>lan<font color="#000080">= </font><font color="#800000">5 </font><font color="#FF0000"><b>Then </b></font>WriteLn<font color="#000080">(</font><font color="#800000">'finnish (SF)'</font><font color="#000080">);
</font><font color="#FF0000"><b>if </b></font>lan<font color="#000080">= </font><font color="#800000">6 </font><font color="#FF0000"><b>Then </b></font>WriteLn<font color="#000080">(</font><font color="#800000">'spanish (E)'</font><font color="#000080">);
</font><font color="#FF0000"><b>if </b></font>lan<font color="#000080">= </font><font color="#800000">7 </font><font color="#FF0000"><b>Then </b></font>WriteLn<font color="#000080">(</font><font color="#800000">'portuguese (P)'</font><font color="#000080">);
</font><font color="#FF0000"><b>if </b></font>lan<font color="#000080">= </font><font color="#800000">8 </font><font color="#FF0000"><b>Then </b></font>WriteLn<font color="#000080">(</font><font color="#800000">'Italian (I)'</font><font color="#000080">);
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>ShowMouse<font color="#000080">;</font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm
</b></font><font color="#FF00FF">Mov ax, 01h
Int 33h
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>HideMouse<font color="#000080">;</font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm
</b></font><font color="#FF00FF">Mov ax, 02h
Int 33h
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>MouseX<font color="#000080">:</font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>mx<font color="#000080">:</font>integer<font color="#000080">;
</font><font color="#FF0000"><b>Begin Asm
</b></font><font color="#FF00FF">Mov ax, 03h
Int 33h
Mov mx, cx
</font><font color="#FF0000"><b>End</b></font><font color="#000080">; </font>MouseX<font color="#000080">:= </font>mx<font color="#000080">; </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>MouseY<font color="#000080">:</font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>my<font color="#000080">:</font>integer<font color="#000080">;
</font><font color="#FF0000"><b>Begin Asm
</b></font><font color="#FF00FF">Mov ax, 03h
Int 33h
Mov my, dx
</font><font color="#FF0000"><b>End</b></font><font color="#000080">; </font>MouseY<font color="#000080">:= </font>my<font color="#000080">; </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>SetMOUSEXY<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">:</font>integer<font color="#000080">);</font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm
</b></font><font color="#FF00FF">Mov ax, 04h
Mov cx, x
Mov dx, y
Int 33h
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>LeftPressed<font color="#000080">:</font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>data<font color="#000080">:</font>integer<font color="#000080">;
</font><font color="#FF0000"><b>Begin
Asm
</b></font><font color="#FF00FF">Mov ax, 05h
Mov bx, 0h
Int 33h
or ax, 0
mov data, ax
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>if </b></font>data<font color="#000080">= </font><font color="#800000">1 </font><font color="#FF0000"><b>Then </b></font>LeftPressed<font color="#000080">:= </font>True <font color="#FF0000"><b>else </b></font>LeftPressed<font color="#000080">:= </font>False<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>LeftReleased<font color="#000080">:</font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>data<font color="#000080">:</font>integer<font color="#000080">;
</font><font color="#FF0000"><b>Begin
Asm
</b></font><font color="#FF00FF">Mov ax, 06h
Mov bx, 0h
Int 33h
or ax, 0
mov data, ax
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>if </b></font>data<font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>Then </b></font>LeftReleased<font color="#000080">:= </font>True <font color="#FF0000"><b>else </b></font>LeftReleased<font color="#000080">:= </font>False<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>RightPressed<font color="#000080">:</font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>data<font color="#000080">:</font>integer<font color="#000080">;
</font><font color="#FF0000"><b>Begin
Asm
</b></font><font color="#FF00FF">Mov ax, 05h
Mov bx, 1h
Int 33h
or ax, 0h
mov data, ax
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>if </b></font>data<font color="#000080">= </font><font color="#800000">2 </font><font color="#FF0000"><b>Then </b></font>RightPressed<font color="#000080">:= </font>True <font color="#FF0000"><b>else </b></font>RightPressed<font color="#000080">:= </font>False<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>RightReleased<font color="#000080">:</font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>data<font color="#000080">:</font>integer<font color="#000080">;
</font><font color="#FF0000"><b>Begin
Asm
</b></font><font color="#FF00FF">Mov ax, 06h
Mov bx, 1h
Int 33h
or ax, 0
mov data, ax
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>if </b></font>data<font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>Then </b></font>RightReleased<font color="#000080">:= </font>True <font color="#FF0000"><b>else </b></font>RightReleased<font color="#000080">:= </font>False<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>MouseAREA<font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">:</font>integer<font color="#000080">);</font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm
</b></font><font color="#FF00FF">Mov ax, 07h
Mov cx, x1
Mov dx, x2
Int 33h
Mov ax, 08h
Mov cx, y1
Mov dx, y2
Int 33h
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>SetSensitivity<font color="#000080">(</font>xsens<font color="#000080">,</font>ysens<font color="#000080">,</font>dst<font color="#000080">:</font>integer<font color="#000080">);</font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;</font><font color="#FF0000"><b>Asm
</b></font><font color="#FF00FF">Mov ax, 1Ah
Mov bx, xsens
Mov cx, ysens
Mov dx, dst
Int 33h
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>GetSensitivity<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>xsens<font color="#000080">,</font>ysens<font color="#000080">,</font>dst<font color="#000080">:</font>integer<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>x<font color="#000080">,</font>y<font color="#000080">,</font>d<font color="#000080">:</font>integer<font color="#000080">;
</font><font color="#FF0000"><b>Begin
Asm
</b></font><font color="#FF00FF">Mov ax,1B
Int 33h
Mov x, bx
Mov y, cx
Mov d, dx
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font>xsens<font color="#000080">:= </font>x<font color="#000080">;</font>ysens<font color="#000080">:= </font>y<font color="#000080">;</font>dst<font color="#000080">:= </font>d<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to MOUSE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0048.PAS">Original</a><b>]</b></p></body>
</html>
