<html>
<head><title> "RODENT.PAS" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to MOUSE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0003.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>Unit </b></font>Rodent<font color="#000080">;
</font><font color="#FF0000"><b>Interface
Uses </b></font>Dos<font color="#000080">;

</font><font color="#FF0000"><b>const </b></font>MDD <font color="#000080">= </font><font color="#800000">$33</font><font color="#000080">;   </font><font color="#008000"><i>{ mouse interupt }
                   { Interupt driven        Polled       = AX  }
      </i></font>bit_0 <font color="#000080">= </font><font color="#800000">$01</font><font color="#000080">; </font><font color="#008000"><i>{ mouse movement         left button down   }
      </i></font>bit_1 <font color="#000080">= </font><font color="#800000">$02</font><font color="#000080">; </font><font color="#008000"><i>{ left button pressed    right button down  }
      </i></font>bit_2 <font color="#000080">= </font><font color="#800000">$04</font><font color="#000080">; </font><font color="#008000"><i>{ left button released   center button down }
      </i></font>bit_3 <font color="#000080">= </font><font color="#800000">$08</font><font color="#000080">; </font><font color="#008000"><i>{ right button pressed }
      </i></font>bit_4 <font color="#000080">= </font><font color="#800000">$10</font><font color="#000080">; </font><font color="#008000"><i>{ right button released }
      </i></font>bit_5 <font color="#000080">= </font><font color="#800000">$20</font><font color="#000080">; </font><font color="#008000"><i>{ center pressed }
      </i></font>bit_6 <font color="#000080">= </font><font color="#800000">$40</font><font color="#000080">; </font><font color="#008000"><i>{ center released }
      </i></font>bit_7 <font color="#000080">= </font><font color="#800000">$80</font><font color="#000080">;

</font><font color="#FF0000"><b>type
  </b></font>resetRec <font color="#000080">= </font><font color="#FF0000"><b>record
    </b></font>exists   <font color="#000080">: </font>Boolean<font color="#000080">;
    </font>nButtons <font color="#000080">: </font>Integer<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>LocRec <font color="#000080">= </font><font color="#FF0000"><b>record
    </b></font>buttonStatus<font color="#000080">,
    </font>opCount<font color="#000080">,
    </font>column<font color="#000080">,
    </font>row       <font color="#000080">: </font>Integer<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>moveRec <font color="#000080">= </font><font color="#FF0000"><b>record
    </b></font>hCount<font color="#000080">,
    </font>vCount    <font color="#000080">: </font>Integer<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{$F+}
  </i></font>eventRec <font color="#000080">= </font><font color="#FF0000"><b>record
               </b></font>flag<font color="#000080">, </font>button<font color="#000080">, </font>col<font color="#000080">, </font>row<font color="#000080">: </font>Word<font color="#000080">;
             </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{$F-}

</i></font><font color="#FF0000"><b>var </b></font>mReg     <font color="#000080">: </font>Registers<font color="#000080">;
    </font>theMouse <font color="#000080">: </font>resetRec<font color="#000080">;     </font><font color="#008000"><i>{ Does mouse exist }
    </i></font>mrecord  <font color="#000080">: </font>locRec<font color="#000080">;       </font><font color="#008000"><i>{ polled record    }
    </i></font>mEvent   <font color="#000080">: </font>eventRec<font color="#000080">;     </font><font color="#008000"><i>{ interupt record  }

</i></font><font color="#FF0000"><b>procedure </b></font>mFixXY <font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">:</font>integer<font color="#000080">);
</font><font color="#FF0000"><b>function </b></font>mouseX <font color="#000080">(</font>n<font color="#000080">:</font>integer<font color="#000080">) : </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>function </b></font>mouseY <font color="#000080">(</font>n<font color="#000080">:</font>integer<font color="#000080">) : </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>mReset <font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>Mouse<font color="#000080">: </font>resetRec<font color="#000080">);                                </font><font color="#008000"><i>{  0 }
</i></font><font color="#FF0000"><b>procedure </b></font>mShow<font color="#000080">;                                                       </font><font color="#008000"><i>{  1 }
</i></font><font color="#FF0000"><b>procedure </b></font>mHide<font color="#000080">;                                                       </font><font color="#008000"><i>{  2 }
</i></font><font color="#FF0000"><b>procedure </b></font>mPos <font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>Mouse<font color="#000080">: </font>LocRec<font color="#000080">);                                    </font><font color="#008000"><i>{  3 }
</i></font><font color="#FF0000"><b>procedure </b></font>mMoveto <font color="#000080">(</font>col<font color="#000080">, </font>row<font color="#000080">: </font>Integer<font color="#000080">);                                 </font><font color="#008000"><i>{  4 }
</i></font><font color="#FF0000"><b>procedure </b></font>mPressed <font color="#000080">(</font>button<font color="#000080">: </font>Integer<font color="#000080">; </font><font color="#FF0000"><b>VAR </b></font>Mouse<font color="#000080">: </font>LocRec<font color="#000080">);               </font><font color="#008000"><i>{  5 }
</i></font><font color="#FF0000"><b>procedure </b></font>mReleased <font color="#000080">(</font>button<font color="#000080">: </font>Integer<font color="#000080">; </font><font color="#FF0000"><b>VAR </b></font>Mouse<font color="#000080">: </font>LocRec<font color="#000080">);              </font><font color="#008000"><i>{  6 }
</i></font><font color="#FF0000"><b>procedure </b></font>mColRange <font color="#000080">(</font>min<font color="#000080">, </font>max <font color="#000080">: </font>Integer<font color="#000080">);                              </font><font color="#008000"><i>{  7 }
</i></font><font color="#FF0000"><b>procedure </b></font>mRowRange <font color="#000080">(</font>min<font color="#000080">, </font>max <font color="#000080">: </font>Integer<font color="#000080">);                              </font><font color="#008000"><i>{  8 }
</i></font><font color="#FF0000"><b>procedure </b></font>mGraphCursor <font color="#000080">(</font>hHot<font color="#000080">, </font>vHot<font color="#000080">: </font>Integer<font color="#000080">; </font>maskSeg<font color="#000080">, </font>maskOfs<font color="#000080">: </font>Word<font color="#000080">);  </font><font color="#008000"><i>{  9 }
</i></font><font color="#FF0000"><b>procedure </b></font>mTextCursor <font color="#000080">(</font>ctype<font color="#000080">, </font>p1<font color="#000080">, </font>p2<font color="#000080">: </font>Word<font color="#000080">);                           </font><font color="#008000"><i>{ 10 }
</i></font><font color="#FF0000"><b>procedure </b></font>mMotion <font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>moved<font color="#000080">: </font>moveRec<font color="#000080">);                                </font><font color="#008000"><i>{ 11 }
</i></font><font color="#FF0000"><b>procedure </b></font>mInstTask <font color="#000080">(</font>mask<font color="#000080">: </font>Word<font color="#000080">);                                      </font><font color="#008000"><i>{ 12 }
</i></font><font color="#FF0000"><b>procedure </b></font>mLpenOn<font color="#000080">;                                                     </font><font color="#008000"><i>{ 13 }
</i></font><font color="#FF0000"><b>procedure </b></font>mLpenOff<font color="#000080">;                                                    </font><font color="#008000"><i>{ 14 }
</i></font><font color="#FF0000"><b>procedure </b></font>mRatio <font color="#000080">(</font>horiz<font color="#000080">, </font>vert<font color="#000080">: </font>Integer<font color="#000080">);                               </font><font color="#008000"><i>{ 15 }

</i></font><font color="#FF0000"><b>implementation
var
  </b></font>maxcol   <font color="#000080">: </font>word <font color="#FF0000"><b>absolute </b></font><font color="#800000">$0040</font><font color="#000080">:</font><font color="#800000">$004A</font><font color="#000080">;   </font><font color="#008000"><i>{ x }

</i></font><font color="#FF0000"><b>procedure </b></font>EventHandler<font color="#000080">(</font>Flags<font color="#000080">,</font>CS<font color="#000080">,</font>AX<font color="#000080">,</font>BX<font color="#000080">,</font>CX<font color="#000080">,</font>DX<font color="#000080">,</font>SI<font color="#000080">,</font>DI<font color="#000080">,</font>DS<font color="#000080">,</font>ES<font color="#000080">,</font>BP<font color="#000080">: </font>Word<font color="#000080">);
</font>interrupt<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>mEvent<font color="#000080">.</font>flag   <font color="#000080">:= </font>AX<font color="#000080">;
  </font>mEvent<font color="#000080">.</font>button <font color="#000080">:= </font>BX<font color="#000080">;
  </font>mEvent<font color="#000080">.</font>col    <font color="#000080">:= </font>CX<font color="#000080">;
  </font>mEvent<font color="#000080">.</font>row    <font color="#000080">:= </font>DX<font color="#000080">;
  </font><font color="#FF0000"><b>inLine</b></font><font color="#000080">(</font><font color="#800000">$8B</font><font color="#000080">/</font><font color="#800000">$E5</font><font color="#000080">/</font><font color="#800000">$5D</font><font color="#000080">/</font><font color="#800000">$07</font><font color="#000080">/</font><font color="#800000">$1F</font><font color="#000080">/</font><font color="#800000">$5F</font><font color="#000080">/</font><font color="#800000">$5E</font><font color="#000080">/</font><font color="#800000">$5A</font><font color="#000080">/</font><font color="#800000">$59</font><font color="#000080">/</font><font color="#800000">$5B</font><font color="#000080">/</font><font color="#800000">$58</font><font color="#000080">/</font><font color="#800000">$CB</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>Lower <font color="#000080">(</font>n1<font color="#000080">, </font>n2<font color="#000080">: </font>Integer<font color="#000080">): </font>Integer<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    if </b></font>n1 <font color="#000080">&lt; </font>n2 <font color="#FF0000"><b>then </b></font>Lower <font color="#000080">:= </font>n1 <font color="#FF0000"><b>else </b></font>Lower <font color="#000080">:= </font>n2<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>Upper <font color="#000080">(</font>n1<font color="#000080">, </font>n2<font color="#000080">: </font>Integer<font color="#000080">): </font>Integer<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    if </b></font>n1 <font color="#000080">&gt; </font>n2 <font color="#FF0000"><b>then </b></font>Upper <font color="#000080">:= </font>n1 <font color="#FF0000"><b>else </b></font>Upper <font color="#000080">:= </font>n2<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>mFixXY<font color="#000080">;
  </font><font color="#FF0000"><b>var </b></font>i <font color="#000080">: </font>integer<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    if </b></font>maxcol <font color="#000080">= </font><font color="#800000">80
    </font><font color="#FF0000"><b>then </b></font>i <font color="#000080">:= </font><font color="#800000">3
    </font><font color="#FF0000"><b>else </b></font>i <font color="#000080">:= </font><font color="#800000">4</font><font color="#000080">;
    </font>mColRange<font color="#000080">(</font>pred<font color="#000080">(</font>x1<font color="#000080">) </font><font color="#FF0000"><b>shl </b></font>i<font color="#000080">,</font>pred<font color="#000080">(</font>x2<font color="#000080">) </font><font color="#FF0000"><b>shl </b></font>i<font color="#000080">);
    </font>mRowRange<font color="#000080">(</font>pred<font color="#000080">(</font>y1<font color="#000080">) </font><font color="#FF0000"><b>shl </b></font><font color="#800000">3</font><font color="#000080">,</font>pred<font color="#000080">(</font>y2<font color="#000080">) </font><font color="#FF0000"><b>shl </b></font><font color="#800000">3</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>mouseX<font color="#000080">;
  </font><font color="#FF0000"><b>var </b></font>i <font color="#000080">: </font>integer<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    if </b></font>maxcol <font color="#000080">= </font><font color="#800000">80
    </font><font color="#FF0000"><b>then </b></font>i <font color="#000080">:= </font><font color="#800000">3
    </font><font color="#FF0000"><b>else </b></font>i <font color="#000080">:= </font><font color="#800000">4</font><font color="#000080">;
    </font>mouseX <font color="#000080">:= </font>succ<font color="#000080">(</font>n <font color="#FF0000"><b>shr </b></font>i<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>mouseY<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>mouseY <font color="#000080">:= </font>succ<font color="#000080">(</font>n <font color="#FF0000"><b>shr </b></font><font color="#800000">3</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>mReset <font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>Mouse<font color="#000080">: </font>resetRec<font color="#000080">);
  </font><font color="#FF0000"><b>begin
    </b></font>mreg<font color="#000080">.</font>ax <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font>intr<font color="#000080">(</font>MDD<font color="#000080">, </font>mreg<font color="#000080">);
    </font>Mouse<font color="#000080">.</font>exists <font color="#000080">:= </font>boolean<font color="#000080">(</font>mreg<font color="#000080">.</font>ax <font color="#000080">&lt;&gt; </font><font color="#800000">0</font><font color="#000080">);
    </font>Mouse<font color="#000080">.</font>nButtons <font color="#000080">:= </font>mreg<font color="#000080">.</font>bx<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>mShow<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    inline</b></font><font color="#000080">(</font><font color="#800000">$B8</font><font color="#000080">/</font><font color="#800000">$01</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/</font><font color="#800000">$CD</font><font color="#000080">/</font>MDD<font color="#000080">);
</font><font color="#008000"><i>{    mreg.ax := 1;    }
{    intr(MDD, mreg); }
  </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>mHide<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    inline</b></font><font color="#000080">(</font><font color="#800000">$B8</font><font color="#000080">/</font><font color="#800000">$02</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/</font><font color="#800000">$CD</font><font color="#000080">/</font>MDD<font color="#000080">);
</font><font color="#008000"><i>{    mreg.ax := 2;    }
{    intr(MDD, mreg); }
  </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>mPos <font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>Mouse<font color="#000080">: </font>LocRec<font color="#000080">);
  </font><font color="#FF0000"><b>begin
    </b></font>mreg<font color="#000080">.</font>ax <font color="#000080">:= </font><font color="#800000">3</font><font color="#000080">;
    </font>intr<font color="#000080">(</font>MDD<font color="#000080">, </font>mreg<font color="#000080">);
    </font>Mouse<font color="#000080">.</font>buttonStatus <font color="#000080">:= </font>mreg<font color="#000080">.</font>bx<font color="#000080">;
    </font>Mouse<font color="#000080">.</font>column <font color="#000080">:= </font>mreg<font color="#000080">.</font>cx<font color="#000080">;
    </font>Mouse<font color="#000080">.</font>row <font color="#000080">:= </font>mreg<font color="#000080">.</font>dx<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>mMoveto <font color="#000080">(</font>col<font color="#000080">, </font>row<font color="#000080">: </font>Integer<font color="#000080">);
  </font><font color="#FF0000"><b>var </b></font>i <font color="#000080">: </font>word<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    if </b></font>maxcol <font color="#000080">= </font><font color="#800000">80
    </font><font color="#FF0000"><b>then </b></font>i <font color="#000080">:= </font><font color="#800000">3
    </font><font color="#FF0000"><b>else </b></font>i <font color="#000080">:= </font><font color="#800000">4</font><font color="#000080">;
    </font>mreg<font color="#000080">.</font>ax <font color="#000080">:= </font><font color="#800000">4</font><font color="#000080">;
    </font>mreg<font color="#000080">.</font>cx <font color="#000080">:= </font>col <font color="#FF0000"><b>shl </b></font>i<font color="#000080">;
    </font>mreg<font color="#000080">.</font>dx <font color="#000080">:= </font>row <font color="#FF0000"><b>shl </b></font>i<font color="#000080">;;
    </font>intr<font color="#000080">(</font>MDD<font color="#000080">, </font>mreg<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>mPressed <font color="#000080">(</font>button<font color="#000080">: </font>Integer<font color="#000080">; </font><font color="#FF0000"><b>VAR </b></font>Mouse<font color="#000080">: </font>LocRec<font color="#000080">);
  </font><font color="#FF0000"><b>begin
    </b></font>mreg<font color="#000080">.</font>ax <font color="#000080">:= </font><font color="#800000">5</font><font color="#000080">;
    </font>mreg<font color="#000080">.</font>bx <font color="#000080">:= </font>button<font color="#000080">;
    </font>intr<font color="#000080">(</font>MDD<font color="#000080">, </font>mreg<font color="#000080">);
    </font>Mouse<font color="#000080">.</font>buttonStatus <font color="#000080">:= </font>mreg<font color="#000080">.</font>ax<font color="#000080">;
    </font>Mouse<font color="#000080">.</font>opCount <font color="#000080">:= </font>mreg<font color="#000080">.</font>bx<font color="#000080">;
    </font>Mouse<font color="#000080">.</font>column <font color="#000080">:= </font>mreg<font color="#000080">.</font>cx<font color="#000080">;
    </font>Mouse<font color="#000080">.</font>row <font color="#000080">:= </font>mreg<font color="#000080">.</font>dx<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>mReleased <font color="#000080">(</font>button<font color="#000080">: </font>Integer<font color="#000080">; </font><font color="#FF0000"><b>VAR </b></font>Mouse<font color="#000080">: </font>LocRec<font color="#000080">);
  </font><font color="#FF0000"><b>begin
    </b></font>mreg<font color="#000080">.</font>ax <font color="#000080">:= </font><font color="#800000">6</font><font color="#000080">;
    </font>mreg<font color="#000080">.</font>bx <font color="#000080">:= </font>button<font color="#000080">;
    </font>intr<font color="#000080">(</font>MDD<font color="#000080">, </font>mreg<font color="#000080">);
    </font>Mouse<font color="#000080">.</font>buttonStatus <font color="#000080">:= </font>mreg<font color="#000080">.</font>ax<font color="#000080">;
    </font>Mouse<font color="#000080">.</font>opCount <font color="#000080">:= </font>mreg<font color="#000080">.</font>bx<font color="#000080">;
    </font>Mouse<font color="#000080">.</font>column <font color="#000080">:= </font>mreg<font color="#000080">.</font>cx<font color="#000080">;
    </font>Mouse<font color="#000080">.</font>row <font color="#000080">:= </font>mreg<font color="#000080">.</font>dx<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>mColRange <font color="#000080">(</font>min<font color="#000080">, </font>max <font color="#000080">: </font>Integer<font color="#000080">);
  </font><font color="#FF0000"><b>begin
    </b></font>mreg<font color="#000080">.</font>ax <font color="#000080">:= </font><font color="#800000">7</font><font color="#000080">;
    </font>mreg<font color="#000080">.</font>cx <font color="#000080">:= </font>Lower<font color="#000080">(</font>min<font color="#000080">, </font>max<font color="#000080">);
    </font>mreg<font color="#000080">.</font>dx <font color="#000080">:= </font>Upper<font color="#000080">(</font>min<font color="#000080">, </font>max<font color="#000080">);
    </font>intr<font color="#000080">(</font>MDD<font color="#000080">, </font>mreg<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>mRowRange <font color="#000080">(</font>min<font color="#000080">, </font>max <font color="#000080">: </font>Integer<font color="#000080">);
  </font><font color="#FF0000"><b>begin
    </b></font>mreg<font color="#000080">.</font>ax <font color="#000080">:= </font><font color="#800000">8</font><font color="#000080">;
    </font>mreg<font color="#000080">.</font>cx <font color="#000080">:= </font>Lower <font color="#000080">(</font>min<font color="#000080">, </font>max<font color="#000080">);
    </font>mreg<font color="#000080">.</font>dx <font color="#000080">:= </font>Upper <font color="#000080">(</font>min<font color="#000080">, </font>max<font color="#000080">);
    </font>intr<font color="#000080">(</font>MDD<font color="#000080">, </font>mreg<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>mGraphCursor <font color="#000080">(</font>hHot<font color="#000080">, </font>vHot<font color="#000080">: </font>Integer<font color="#000080">; </font>maskSeg<font color="#000080">, </font>maskOfs<font color="#000080">: </font>Word<font color="#000080">);
  </font><font color="#FF0000"><b>begin
    </b></font>mreg<font color="#000080">.</font>ax <font color="#000080">:= </font><font color="#800000">9</font><font color="#000080">;
    </font>mreg<font color="#000080">.</font>bx <font color="#000080">:= </font>hHot<font color="#000080">;
    </font>mreg<font color="#000080">.</font>cx <font color="#000080">:= </font>vHot<font color="#000080">;
    </font>mreg<font color="#000080">.</font>dx <font color="#000080">:= </font>maskOfs<font color="#000080">;
    </font>mreg<font color="#000080">.</font>es <font color="#000080">:= </font>maskSeg<font color="#000080">;
    </font>intr<font color="#000080">(</font>MDD<font color="#000080">, </font>mreg<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>mTextCursor <font color="#000080">(</font>ctype<font color="#000080">, </font>p1<font color="#000080">, </font>p2<font color="#000080">: </font>Word<font color="#000080">);
  </font><font color="#FF0000"><b>begin
    </b></font>mreg<font color="#000080">.</font>ax <font color="#000080">:= </font><font color="#800000">10</font><font color="#000080">;
    </font>mreg<font color="#000080">.</font>bx <font color="#000080">:= </font>ctype<font color="#000080">;       </font><font color="#008000"><i>{ 0=software, 1=hardware          }
    </i></font>mreg<font color="#000080">.</font>cx <font color="#000080">:= </font>p1<font color="#000080">;          </font><font color="#008000"><i>{ 0=and mask else start line      }
    </i></font>mreg<font color="#000080">.</font>dx <font color="#000080">:= </font>p2<font color="#000080">;          </font><font color="#008000"><i>{ 0=xor mask else Cursor end line }
    </i></font>intr<font color="#000080">(</font>MDD<font color="#000080">, </font>mreg<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ Returns mouse displacement in mickeys since last call }
</i></font><font color="#FF0000"><b>procedure </b></font>mMotion <font color="#000080">(</font><font color="#FF0000"><b>VAR </b></font>moved<font color="#000080">: </font>moveRec<font color="#000080">);
  </font><font color="#FF0000"><b>begin
    </b></font>mreg<font color="#000080">.</font>ax <font color="#000080">:= </font><font color="#800000">11</font><font color="#000080">;
    </font>intr<font color="#000080">(</font>MDD<font color="#000080">, </font>mreg<font color="#000080">);
    </font>moved<font color="#000080">.</font>hCount <font color="#000080">:= </font>mreg<font color="#000080">.</font>cx<font color="#000080">;
    </font>moved<font color="#000080">.</font>vCount <font color="#000080">:= </font>mreg<font color="#000080">.</font>dx<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>mInstTask<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>mreg<font color="#000080">.</font>ax <font color="#000080">:= </font><font color="#800000">12</font><font color="#000080">;
    </font>mreg<font color="#000080">.</font>cx <font color="#000080">:= </font>mask<font color="#000080">;         </font><font color="#008000"><i>{ see bit constants above }
    </i></font>mreg<font color="#000080">.</font>dx <font color="#000080">:= </font>Ofs<font color="#000080">(</font>EventHandler<font color="#000080">);
    </font>mreg<font color="#000080">.</font>es <font color="#000080">:= </font>Seg<font color="#000080">(</font>EventHandler<font color="#000080">);
    </font>intr<font color="#000080">(</font>MDD<font color="#000080">, </font>mreg<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>mLpenOn<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>mreg<font color="#000080">.</font>ax <font color="#000080">:= </font><font color="#800000">13</font><font color="#000080">;
    </font>intr<font color="#000080">(</font>MDD<font color="#000080">, </font>mreg<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>mLpenOff<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>mreg<font color="#000080">.</font>ax <font color="#000080">:= </font><font color="#800000">14</font><font color="#000080">;
    </font>intr<font color="#000080">(</font>MDD<font color="#000080">, </font>mreg<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>mRatio <font color="#000080">(</font>horiz<font color="#000080">, </font>vert<font color="#000080">: </font>Integer<font color="#000080">);
  </font><font color="#FF0000"><b>begin
    </b></font>mreg<font color="#000080">.</font>ax <font color="#000080">:= </font><font color="#800000">15</font><font color="#000080">;
    </font>mreg<font color="#000080">.</font>cx <font color="#000080">:= </font>horiz<font color="#000080">;
    </font>mreg<font color="#000080">.</font>dx <font color="#000080">:= </font>vert<font color="#000080">;
    </font>intr<font color="#000080">(</font>MDD<font color="#000080">, </font>mreg<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ Sample base line program...
  mReset(theMouse);
  if theMouse.exists
  then minstTask(15);      (* for 80x25 *)
  mFixXY(1,1,succ(lo(windmax)),succ(hi(windmax)));
  mEvent.Flag := 0;
&lt;&lt; do the program &gt;&gt;
  mReset(theMouse);
}
</i></font><font color="#FF0000"><b>END</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to MOUSE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0003.PAS">Original</a><b>]</b></p></body>
</html>
