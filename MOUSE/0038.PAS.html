<html>
<head><title> "Fast" by RYAN@EMIKO.IGCOM.NET</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to MOUSE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0038.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#000000">  <font color="#FF0000"><b>unit </b></font>MyMouse<font color="#000080">;
  </font><font color="#008000"><i>{ bare bones mouse unit used by the simulator -stolen from swag, sorta }

  </i></font><font color="#FF0000"><b>interface

  uses </b></font>dos<font color="#000080">;

  </font><font color="#FF0000"><b>var
    </b></font>mousex<font color="#000080">, </font>mousey<font color="#000080">:</font>integer<font color="#000080">;

  </font><font color="#FF0000"><b>procedure </b></font>initmouse<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>buttons<font color="#000080">:</font>byte<font color="#000080">; </font><font color="#FF0000"><b>var is</b></font><font color="#000080">:</font>boolean<font color="#000080">);
  </font><font color="#FF0000"><b>Procedure </b></font>showmouse<font color="#000080">;
  </font><font color="#FF0000"><b>Procedure </b></font>hidemouse<font color="#000080">;
  </font><font color="#FF0000"><b>procedure </b></font>getmousexy<font color="#000080">;
  </font><font color="#FF0000"><b>procedure </b></font>mouseto80<font color="#000080">;
  </font><font color="#FF0000"><b>Procedure </b></font>MouseExit<font color="#000080">;
  </font><font color="#FF0000"><b>function </b></font>mouserightpressed<font color="#000080">:</font>boolean<font color="#000080">; </font><font color="#008000"><i>{??}
  </i></font><font color="#FF0000"><b>function </b></font>mouseleftpressed<font color="#000080">:</font>boolean<font color="#000080">;
  </font><font color="#FF0000"><b>function </b></font>mouserightdown<font color="#000080">:</font>boolean<font color="#000080">;
  </font><font color="#FF0000"><b>function </b></font>mousebothdown<font color="#000080">:</font>boolean<font color="#000080">;
  </font><font color="#FF0000"><b>function </b></font>mouseleftdown<font color="#000080">:</font>boolean<font color="#000080">;

 </font><font color="#FF0000"><b>implementation

 Var
   </b></font>ExitPtr<font color="#000080">: </font>pointer<font color="#000080">;
   </font>Regs<font color="#000080">: </font>registers<font color="#000080">;
   </font>TempWord<font color="#000080">: </font>word<font color="#000080">;

  </font><font color="#FF0000"><b>procedure </b></font>initmouse<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>buttons<font color="#000080">:</font>byte<font color="#000080">; </font><font color="#FF0000"><b>var is</b></font><font color="#000080">:</font>boolean<font color="#000080">);
  </font><font color="#FF0000"><b>var </b></font>msavailable<font color="#000080">:</font>boolean<font color="#000080">;
      </font>msbuttons<font color="#000080">:</font>byte<font color="#000080">;
  </font><font color="#FF0000"><b>begin
     </b></font>msavailable<font color="#000080">:=</font>false<font color="#000080">;
     </font><font color="#FF0000"><b>Asm
       </b></font><font color="#FF00FF">MOV MsButtons,0
       MOV AX,0000h
       INT 33h
       CMP AX,0000h
       JE  @Dne
       CMP AX,0FFFFh
       JNE @Dne
       MOV MsAvailable,True
       CMP BX,0002h
       JE  @Two
       CMP BX,0003h
       JE  @Thr
       CMP BX,0FFFFh
       JE  @Thr
 @Two: MOV MsButtons,2
       JMP @Dne
 @Thr: MOV MsButtons,3
 @Dne:
     </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
     </font>buttons<font color="#000080">:=</font>msbuttons<font color="#000080">;
     </font><font color="#FF0000"><b>is</b></font><font color="#000080">:=</font>msavailable<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>Procedure </b></font>showmouse<font color="#000080">; </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>Asm
    </b></font><font color="#FF00FF">MOV AX,0001h
    INT 33h
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>Procedure </b></font>Hidemouse<font color="#000080">; </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>Asm
    </b></font><font color="#FF00FF">MOV AX,0002h
    INT 33h
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>procedure </b></font>getmousexy<font color="#000080">; </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>Asm
    </b></font><font color="#FF00FF">MOV AX,0003h
    INT 33h
    MOV mousex,CX
    MOV mousey,DX
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>procedure </b></font>mouseto80<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font><font color="#008000"><i>{makes it a number for 80x25 text mode}
    </i></font>mousex<font color="#000080">:=(</font>mousex <font color="#FF0000"><b>div </b></font><font color="#800000">8</font><font color="#000080">)+</font><font color="#800000">1</font><font color="#000080">;
    </font>mousey<font color="#000080">:=(</font>mousey <font color="#FF0000"><b>div </b></font><font color="#800000">8</font><font color="#000080">)+</font><font color="#800000">1</font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#008000"><i>{dont know the diff between 'rghtDOWN and rightPRESSED'}

  </i></font><font color="#FF0000"><b>function </b></font>mouseleftpressed<font color="#000080">:</font>boolean<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    asm
      </b></font><font color="#FF00FF">MOV @Result,False
      MOV AX,0005h
      MOV BX,0000h
      INT 33h
      </font><font color="#008000"><i>{MOV Count,BX} {what is count?}
      </i></font><font color="#FF00FF">MOV mousex,CX
      MOV mousey,DX
      CMP AX,1
      JNE @Done
      MOV @Result,True
      @Done:
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>function </b></font>mouserightpressed<font color="#000080">:</font>boolean<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    asm
      </b></font><font color="#FF00FF">MOV @Result,False
      MOV AX,0005h
      MOV BX,0001h
      INT 33h
      </font><font color="#008000"><i>{MOV Count,BX} {what is count?}
      </i></font><font color="#FF00FF">MOV mousex,CX
      MOV mousey,DX
      CMP AX,2
      JNE @Done
      MOV @Result,True
      @Done:
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>function </b></font>mouserightdown<font color="#000080">:</font>boolean<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    asm
      </b></font><font color="#FF00FF">MOV @Result,False
      MOV AX,0003h
      INT 33h
      MOV mousex,CX
      MOV mousey,DX
      CMP BX,2
      JNE @Done
      MOV @Result,True
      @Done:
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>function </b></font>mousebothdown<font color="#000080">:</font>boolean<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    asm
      </b></font><font color="#FF00FF">MOV @Result,False
      MOV AX,0003h
      INT 33h
      MOV MouseX,CX
      MOV MouseY,DX
      CMP BX,3
      JNE @Done
      MOV @Result,True
      @Done:
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>function </b></font>mouseleftdown<font color="#000080">:</font>boolean<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    Asm
      </b></font><font color="#FF00FF">MOV @Result,False
      MOV AX,0003h
      INT 33h
      MOV mousex,CX
      MOV mousey,DX
      CMP BX,1
      JNE @Done
      MOV @Result,True
      @Done:
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>Procedure </b></font>MouseExit<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>ExitProc<font color="#000080">:=</font>ExitPtr<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>begin
    </b></font>ExitPtr<font color="#000080">:=</font>ExitProc<font color="#000080">;
    </font>ExitProc<font color="#000080">:=@</font>MouseExit<font color="#000080">;
  </font><font color="#FF0000"><b>End</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to MOUSE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0038.PAS">Original</a><b>]</b></p></body>
</html>
