<html>
<head><title> "Mouse under VESA Mode" by PEDRO CORREIA</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to MOUSE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0033.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#000080">}
 </font>HT<font color="#000080">&gt; </font>I would like <font color="#FF0000"><b>to program </b></font>the Mouse into a graphic<font color="#000080">-</font>prog under
 HT<font color="#000080">&gt; </font><font color="#800000">800</font>x600x256 <font color="#000080">(</font>Vesa<font color="#000080">-</font>Mode <font color="#800000">$103</font><font color="#000080">). </font>But I have no source <font color="#FF0000"><b>or </b></font>docs about this

 <font color="#000080">---- </font>cut <font color="#000080">-----
}

</font><font color="#FF0000"><b>program </b></font>vesamouse<font color="#000080">;
</font><font color="#FF0000"><b>uses </b></font>crt<font color="#000080">;

</font><font color="#008000"><i>{ mouse pointer }
</i></font><font color="#FF0000"><b>const </b></font>seta<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">7</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>word<font color="#000080">=(
 (  </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">),
 (  </font><font color="#800000">0</font><font color="#000080">,  </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">),
 (  </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">241</font><font color="#000080">,  </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">),
 (  </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">241</font><font color="#000080">,</font><font color="#800000">241</font><font color="#000080">,  </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">),
 (  </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">241</font><font color="#000080">,</font><font color="#800000">241</font><font color="#000080">,</font><font color="#800000">241</font><font color="#000080">,  </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">),
 (  </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">241</font><font color="#000080">,</font><font color="#800000">241</font><font color="#000080">,</font><font color="#800000">241</font><font color="#000080">,</font><font color="#800000">241</font><font color="#000080">,  </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">),
 (  </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">241</font><font color="#000080">,</font><font color="#800000">241</font><font color="#000080">,</font><font color="#800000">241</font><font color="#000080">,</font><font color="#800000">241</font><font color="#000080">,  </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">),
 (  </font><font color="#800000">0</font><font color="#000080">,  </font><font color="#800000">0</font><font color="#000080">,  </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">241</font><font color="#000080">,  </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">),
 (  </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,  </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">241</font><font color="#000080">,  </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">),
 (</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,  </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">241</font><font color="#000080">,  </font><font color="#800000">0</font><font color="#000080">,  </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">),
 (</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,  </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">241</font><font color="#000080">,  </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">),
 (</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,  </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">241</font><font color="#000080">,  </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">),
 (</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,  </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">241</font><font color="#000080">,  </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">),
 (</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,  </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">241</font><font color="#000080">,  </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">),
 (</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,  </font><font color="#800000">0</font><font color="#000080">,  </font><font color="#800000">0</font><font color="#000080">,  </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">),
 (</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">,</font><font color="#800000">999</font><font color="#000080">)
 );


</font><font color="#FF0000"><b>var </b></font>mode<font color="#000080">,</font>co<font color="#000080">,</font>n<font color="#000080">,</font>m<font color="#000080">,</font>xmax<font color="#000080">,</font>ymax<font color="#000080">,</font>mxmax<font color="#000080">:</font>word<font color="#000080">;
    </font>c<font color="#000080">:</font>char<font color="#000080">;
    </font>buf<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
    </font>sos<font color="#000080">,</font>ooo<font color="#000080">:</font>word<font color="#000080">;
    </font>bank<font color="#000080">:</font>byte<font color="#000080">;
    </font>mx<font color="#000080">,</font>my<font color="#000080">,</font>mb<font color="#000080">:</font>word<font color="#000080">;
    </font>mask<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">7</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;  </font><font color="#008000"><i>{ mask of mouse pointer }
    </i></font>oldseg<font color="#000080">,</font>oldofs<font color="#000080">,</font>oldmask<font color="#000080">:</font>word<font color="#000080">;
    </font>newseg<font color="#000080">,</font>newofs<font color="#000080">,</font>newmask<font color="#000080">:</font>word<font color="#000080">;
    </font>oldbank<font color="#000080">:</font>word<font color="#000080">;

</font><font color="#008000"><i>{$F+}
</i></font><font color="#FF0000"><b>procedure </b></font>SetPixel<font color="#000080">(</font>X<font color="#000080">, </font>Y <font color="#000080">: </font>Word<font color="#000080">; </font>C <font color="#000080">: </font>word<font color="#000080">);  </font><font color="#008000"><i>{ VESA putpixel }
</i></font><font color="#FF0000"><b>var </b></font>b<font color="#000080">,</font>z1<font color="#000080">,</font>z2<font color="#000080">,</font>z3<font color="#000080">,</font>q<font color="#000080">,</font>w<font color="#000080">:</font>longint<font color="#000080">;
    </font>bnk<font color="#000080">:</font>word<font color="#000080">;

</font><font color="#FF0000"><b>begin
 if </b></font>c<font color="#000080">&lt;=</font><font color="#800000">255 </font><font color="#FF0000"><b>then
  begin       </b></font><font color="#008000"><i>{ if color &lt;256 change, else dont put the pixel }
   </i></font>z1<font color="#000080">:=</font>y<font color="#000080">;</font>z2<font color="#000080">:=</font>xmax<font color="#000080">;            </font><font color="#008000"><i>{ swaping x,y to longint vars }
   </i></font>q<font color="#000080">:=</font>z1<font color="#000080">*</font>z2<font color="#000080">+</font>x<font color="#000080">;                </font><font color="#008000"><i>{ calculating offset }
   </i></font>z3<font color="#000080">:=</font>memw<font color="#000080">[</font>sos<font color="#000080">:</font>ooo<font color="#000080">+</font><font color="#800000">6</font><font color="#000080">];
   </font>z3<font color="#000080">:=</font>z3<font color="#000080">*</font><font color="#800000">1024</font><font color="#000080">;
   </font><font color="#FF0000"><b>if </b></font>z3<font color="#000080">=</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>z3<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;
   </font>b<font color="#000080">:=</font>q <font color="#FF0000"><b>div </b></font>z3<font color="#000080">;
   </font>bnk<font color="#000080">:=</font>b<font color="#000080">*</font>bank<font color="#000080">;                 </font><font color="#008000"><i>{ calculating effective Bank # }
   </i></font><font color="#FF0000"><b>if </b></font>oldbank<font color="#000080">&lt;&gt;</font>b <font color="#FF0000"><b>then
    begin
     asm
      </b></font><font color="#FF00FF">mov ax,$4f05
      mov bx,0
      mov dx,bnk
      int $10
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;   </font><font color="#008000"><i>{ Change to Bank # }
     </i></font>oldbank<font color="#000080">:=</font>b<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>if </b></font><font color="#000080">((</font>x<font color="#000080">&lt;</font>xmax<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>y<font color="#000080">&lt;</font>ymax<font color="#000080">)) </font><font color="#FF0000"><b>then </b></font>mem<font color="#000080">[</font><font color="#800000">$a000</font><font color="#000080">:</font>q<font color="#000080">]:=</font>c<font color="#000080">; </font><font color="#008000"><i>{screen dimmensions}
 </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>GetPixel<font color="#000080">(</font>X<font color="#000080">, </font>Y <font color="#000080">: </font>Word<font color="#000080">):</font>byte<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>z1<font color="#000080">,</font>z2<font color="#000080">,</font>q<font color="#000080">,</font>w<font color="#000080">:</font>longint<font color="#000080">;
    </font>b<font color="#000080">:</font>word<font color="#000080">;
</font><font color="#FF0000"><b>begin
 </b></font>z1<font color="#000080">:=</font>y<font color="#000080">;</font>z2<font color="#000080">:=</font>xmax<font color="#000080">;
 </font>q<font color="#000080">:=</font>z1<font color="#000080">*</font>z2<font color="#000080">+</font>x<font color="#000080">;
 </font>b<font color="#000080">:=</font>q <font color="#FF0000"><b>div </b></font><font color="#800000">65536</font><font color="#000080">;
 </font>b<font color="#000080">:=</font>b<font color="#000080">*</font>bank<font color="#000080">;
 </font><font color="#FF0000"><b>if </b></font>oldbank<font color="#000080">&lt;&gt;</font>b <font color="#FF0000"><b>then
  begin
   asm
    </b></font><font color="#FF00FF">mov ax,$4f05
    mov bx,0
    mov dx,b
    int $10
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font>oldbank<font color="#000080">:=</font>b<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font>getpixel<font color="#000080">:=</font>mem<font color="#000080">[</font><font color="#800000">$a000</font><font color="#000080">:</font>q<font color="#000080">];
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>newmouse<font color="#000080">(</font>Flags<font color="#000080">,</font>CS<font color="#000080">,</font>IP<font color="#000080">,</font>AX<font color="#000080">,</font>BX<font color="#000080">,</font>CX<font color="#000080">,</font>DX<font color="#000080">,</font>SI<font color="#000080">,</font>DI<font color="#000080">,</font>DS<font color="#000080">,</font>ES<font color="#000080">,</font>BP <font color="#000080">: </font>word<font color="#000080">);</font>interrupt<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>hx<font color="#000080">,</font>hy<font color="#000080">,</font>hb<font color="#000080">,</font>ev<font color="#000080">:</font>word<font color="#000080">;
    </font>hn<font color="#000080">,</font>hm<font color="#000080">:</font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
 </b></font>ev<font color="#000080">:=</font>ax<font color="#000080">;
 </font>hx<font color="#000080">:=</font>cx <font color="#FF0000"><b>div </b></font><font color="#800000">4</font><font color="#000080">;
 </font>hy<font color="#000080">:=</font>dx<font color="#000080">;
 </font>hb<font color="#000080">:=</font>bx<font color="#000080">;
 </font><font color="#FF0000"><b>if </b></font><font color="#000080">((</font>hx<font color="#000080">&lt;&gt;</font>mx<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>hy<font color="#000080">&lt;&gt;</font>my<font color="#000080">)) </font><font color="#FF0000"><b>then
  begin
   for </b></font>hn<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">15 </font><font color="#FF0000"><b>do
    for </b></font>hm<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">7 </font><font color="#FF0000"><b>do
     </b></font>setpixel<font color="#000080">(</font>mx<font color="#000080">+</font>hm<font color="#000080">,</font>my<font color="#000080">+</font>hn<font color="#000080">,</font>mask<font color="#000080">[</font>hn<font color="#000080">,</font>hm<font color="#000080">]);
   </font><font color="#FF0000"><b>for </b></font>hn<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">15 </font><font color="#FF0000"><b>do
    for </b></font>hm<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">7 </font><font color="#FF0000"><b>do
     </b></font>mask<font color="#000080">[</font>hn<font color="#000080">,</font>hm<font color="#000080">]:=</font>getpixel<font color="#000080">(</font>hx<font color="#000080">+</font>hm<font color="#000080">,</font>hy<font color="#000080">+</font>hn<font color="#000080">);
   </font><font color="#FF0000"><b>for </b></font>hn<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">15 </font><font color="#FF0000"><b>do
    for </b></font>hm<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">7 </font><font color="#FF0000"><b>do
     </b></font>setpixel<font color="#000080">(</font>hx<font color="#000080">+</font>hm<font color="#000080">,</font>hy<font color="#000080">+</font>hn<font color="#000080">,</font>seta<font color="#000080">[</font>hn<font color="#000080">,</font>hm<font color="#000080">]);
   </font>mx<font color="#000080">:=</font>hx<font color="#000080">;
   </font>my<font color="#000080">:=</font>hy<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>inline </b></font><font color="#000080">(</font><font color="#800000">$8B</font><font color="#000080">/ </font><font color="#800000">$E5</font><font color="#000080">/ </font><font color="#800000">$5D</font><font color="#000080">/ </font><font color="#800000">$07</font><font color="#000080">/ </font><font color="#800000">$1F</font><font color="#000080">/ </font><font color="#800000">$5F</font><font color="#000080">/ </font><font color="#800000">$5E</font><font color="#000080">/ </font><font color="#800000">$5A</font><font color="#000080">/ </font><font color="#800000">$59</font><font color="#000080">/</font><font color="#800000">$5B</font><font color="#000080">/ </font><font color="#800000">$58</font><font color="#000080">/ </font><font color="#800000">$CB</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
 </b></font>mx<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
 </font>my<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
 </font>mode<font color="#000080">:=</font><font color="#800000">$103</font><font color="#000080">; </font><font color="#008000"><i>{ Vesa mode }
 </i></font>sos<font color="#000080">:=</font>seg<font color="#000080">(</font>buf<font color="#000080">);
 </font>ooo<font color="#000080">:=</font>ofs<font color="#000080">(</font>buf<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]); </font><font color="#008000"><i>{ pointing VESA information Buffer }
 </i></font>oldbank<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
 </font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">mov ax,$4f02
  mov bx,mode
  int $10
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;           </font><font color="#008000"><i>{ Change to VESA MODE (mode) }
 </i></font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">mov ax,$4f01
  mov cx,mode
  mov es,sos
  mov di,ooo
  int $10
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ Get VESA info }

 </i></font><font color="#FF0000"><b>if </b></font>memw<font color="#000080">[</font>sos<font color="#000080">:</font>ooo<font color="#000080">+</font><font color="#800000">4</font><font color="#000080">]=</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>memw<font color="#000080">[</font>sos<font color="#000080">:</font>ooo<font color="#000080">+</font><font color="#800000">4</font><font color="#000080">]:=</font><font color="#800000">1</font><font color="#000080">;
 </font>bank<font color="#000080">:=</font>memw<font color="#000080">[</font>sos<font color="#000080">:</font>ooo<font color="#000080">+</font><font color="#800000">6</font><font color="#000080">] </font><font color="#FF0000"><b>div </b></font>memw<font color="#000080">[</font>sos<font color="#000080">:</font>ooo<font color="#000080">+</font><font color="#800000">4</font><font color="#000080">];
 </font><font color="#008000"><i>{ Granularity }

 </i></font>xmax<font color="#000080">:=</font>memw<font color="#000080">[</font>sos<font color="#000080">:</font>ooo<font color="#000080">+</font><font color="#800000">$12</font><font color="#000080">];
 </font>ymax<font color="#000080">:=</font>memw<font color="#000080">[</font>sos<font color="#000080">:</font>ooo<font color="#000080">+</font><font color="#800000">$14</font><font color="#000080">];
 </font><font color="#FF0000"><b>if </b></font>xmax<font color="#000080">=</font><font color="#800000">0 </font><font color="#FF0000"><b>then begin </b></font>xmax<font color="#000080">:=</font><font color="#800000">320</font><font color="#000080">;</font>ymax<font color="#000080">:=</font><font color="#800000">200</font><font color="#000080">;</font>bank<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#008000"><i>{ Get Screen Size }

 { pick up (0,0) mask }
 </i></font><font color="#FF0000"><b>for </b></font>n<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">15 </font><font color="#FF0000"><b>do
  for </b></font>m<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">7 </font><font color="#FF0000"><b>do
   </b></font>mask<font color="#000080">[</font>n<font color="#000080">,</font>m<font color="#000080">]:=</font>getpixel<font color="#000080">(</font>m<font color="#000080">,</font>n<font color="#000080">);

 </font>newseg<font color="#000080">:=</font>seg<font color="#000080">(</font>newmouse<font color="#000080">);
 </font>newofs<font color="#000080">:=</font>ofs<font color="#000080">(</font>newmouse<font color="#000080">); </font><font color="#008000"><i>{ pointing to new mouse routine }
 </i></font>newmask<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;

 </font>mxmax<font color="#000080">:=</font>xmax<font color="#000080">*</font><font color="#800000">4</font><font color="#000080">;
 </font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">mov ax,0
  int $33    </font><font color="#008000"><i>{ mouse ? }
  </i></font><font color="#FF00FF">mov ax,1
  int $33    </font><font color="#008000"><i>{ Show Mouse }
  </i></font><font color="#FF00FF">mov ax,2
  int $33    </font><font color="#008000"><i>{ Hide Mouse }
  </i></font><font color="#FF00FF">mov ax,7
  mov cx,0
  mov dx,mxmax
  int $33
  mov ax,8
  mov cx,0
  mov dx,ymax  </font><font color="#008000"><i>{ Set YMAX for mouse windows }
  </i></font><font color="#FF00FF">int $33
  mov ax,20
  mov cx,newmask
  mov es,newseg
  mov dx,newofs
  int $33      </font><font color="#008000"><i>{ Active USER Mouse Routine }
  </i></font><font color="#FF00FF">mov ax,$000f
  mov cx,4
  mov dx,4
  int $33
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

 </font>c<font color="#000080">:=</font>readkey<font color="#000080">;

 </font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">mov ax,20
  mov cx,oldmask
  mov es,oldseg
  mov dx,oldofs
  int $33   </font><font color="#008000"><i>{ Restore old Mouse Routine }
 </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>asm
  </b></font><font color="#FF00FF">mov ax,3
  int $10
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font>writeln<font color="#000080">(</font><font color="#800000">'800x600x256 Mouse by Pedro Correia From THI'</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to MOUSE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0033.PAS">Original</a><b>]</b></p></body>
</html>
