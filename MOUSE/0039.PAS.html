<html>
<head><title> "Changing the Graphic Mouse Cursor" by SAMIEL@FASTLANE.NET</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to MOUSE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0039.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
Here's a program (unit) I just wrote that has a few nifty
applications.  It captures a 16x16 area on the mode 13h screen and
converts the coordinates to a &quot;mouse&quot; array.  Please note that there
is a demo program included.  You may modify the programs if you wish.
Please e-mail me if you have any comments or questions...

One great application is loading a graphics file and then capturing
the mouse of the screen.  It's good for changing the mouse cursor to
anything you can print (i.e. text, pictures).  Remember, 16x16 isn't a
great deal to work with...

Here's the UNIT... the DEMO PROGRAM follows...

{--- Cut Here ---}

</i></font><font color="#FF0000"><b>UNIT </b></font>MCAP<font color="#000080">;

</font><font color="#008000"><i>{
Well, I hope some of you find this somewhat useful...
Feel free to modify the code and such...
E-mail questions or comments to samiel@fastlane.net
Visit http://www.fastlane.net/~samiel
See the demo program...
Code is not optimized (though I tried a little)
Author is not responsible for any damages incurred
Try not to move the Capture box over the mouse...
Capture box outline also included in making 16x16 mouse...
Load a mouse driver!
&lt;ESC&gt; exits!

CAPTURES MOUSE FROM THE 320x200x256c SCREEN (MODE 0x13)

-------+---------------
 Color |     ID
-------+---------------
   0   | Make Color 0
-------+---------------
   15  | Make Color 15
-------+---------------
   1   | Translucent    (Opposite color shows)
-------+---------------
 Other | Transparent    (All other colors are transparent) 
-------+---------------
}

</i></font><font color="#FF0000"><b>INTERFACE

TYPE
  </b></font>Box<font color="#000080">=</font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">; </font><font color="#008000"><i>{16x16 box to capture 16x16 area}

</i></font><font color="#FF0000"><b>CONST
  </b></font>HexString<font color="#000080">=</font><font color="#800000">'$'</font><font color="#000080">; </font><font color="#008000"><i>{Add to the beginning of the hex number (i.e. '0x')}
  </i></font>Z<font color="#000080">=</font><font color="#800000">255</font><font color="#000080">; </font><font color="#008000"><i>{Box outline color}
  </i></font>Capture<font color="#000080">:</font>Box<font color="#000080">= </font><font color="#008000"><i>{Define 16x16 capture box}
    </i></font><font color="#000080">(</font>Z<font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font>Z<font color="#000080">,</font>Z<font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font>Z<font color="#000080">,</font>Z<font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font>Z<font color="#000080">,</font>Z<font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font>Z<font color="#000080">,
     
     </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,
     </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,
     
     </font>Z<font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font>Z<font color="#000080">,
     </font>Z<font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font>Z<font color="#000080">,
     
     </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,
     </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,
     
     </font>Z<font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font>Z<font color="#000080">,
     </font>Z<font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font>Z<font color="#000080">,

     </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,
     </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,
     
     </font>Z<font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font>Z<font color="#000080">,
     </font>Z<font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font>Z<font color="#000080">,
     
     </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,
     </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,
     
     </font>Z<font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font>Z<font color="#000080">,</font>Z<font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font>Z<font color="#000080">,</font>Z<font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font>Z<font color="#000080">,</font>Z<font color="#000080">, </font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font>Z<font color="#000080">);

</font><font color="#FF0000"><b>Procedure </b></font>ResetMouse<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>Installed<font color="#000080">:</font>boolean<font color="#000080">;</font><font color="#FF0000"><b>var </b></font>Buttons<font color="#000080">:</font>word<font color="#000080">);
</font><font color="#FF0000"><b>Procedure </b></font>MouseOn<font color="#000080">;  
</font><font color="#FF0000"><b>Procedure </b></font>MouseOff<font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>GetMouse<font color="#000080">(</font>FileName<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">);

</font><font color="#FF0000"><b>IMPLEMENTATION

Procedure </b></font>ResetMouse<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>Installed<font color="#000080">:</font>boolean<font color="#000080">;</font><font color="#FF0000"><b>var </b></font>Buttons<font color="#000080">:</font>word<font color="#000080">);
</font><font color="#FF0000"><b>Var
  </b></font>tmp1<font color="#000080">,</font>tmp2<font color="#000080">:</font>word<font color="#000080">;
</font><font color="#FF0000"><b>Begin  
  asm
    </b></font><font color="#FF00FF">mov ax,0
    int 33h
    mov tmp1,ax
    mov tmp2,bx
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>tmp1<font color="#000080">=</font><font color="#800000">$FFFF </font><font color="#FF0000"><b>then
    </b></font>Installed<font color="#000080">:=</font>true
  <font color="#FF0000"><b>else
    </b></font>Installed<font color="#000080">:=</font>false<font color="#000080">;
  </font>Buttons<font color="#000080">:=</font>tmp2<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>MouseOn<font color="#000080">;</font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;  
</font><font color="#FF0000"><b>Asm
  </b></font><font color="#FF00FF">mov ax,1
  int 33h
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>MouseOff<font color="#000080">;</font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm
  </b></font><font color="#FF00FF">mov ax,2
  int 33h
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>GetMouse<font color="#000080">(</font>FileName<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">);
</font><font color="#FF0000"><b>Type
  </b></font>Mouse<font color="#000080">=</font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">32</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>word<font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>Installed<font color="#000080">,</font>Good<font color="#000080">:</font>boolean<font color="#000080">;
  </font>Buttons<font color="#000080">:</font>word<font color="#000080">;
  </font>F<font color="#000080">:</font>Text<font color="#000080">;
  </font>Save<font color="#000080">:</font>Box<font color="#000080">;
  </font>x<font color="#000080">,</font>y<font color="#000080">:</font>word<font color="#000080">;
  </font>key<font color="#000080">:</font>word<font color="#000080">;
  </font>j<font color="#000080">,</font>k<font color="#000080">:</font>word<font color="#000080">;
  </font>M<font color="#000080">:</font>Mouse<font color="#000080">;
  </font>count<font color="#000080">:</font>word<font color="#000080">;

  </font><font color="#008000"><i>{Other Procedures I was too lazy to make Interfaces for...}
  
  </i></font><font color="#FF0000"><b>Procedure </b></font>NewMouse<font color="#000080">(</font>M<font color="#000080">:</font>mouse<font color="#000080">);
  </font><font color="#FF0000"><b>var
    </b></font>s<font color="#000080">,</font>o<font color="#000080">:</font>word<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>s<font color="#000080">:=</font>Seg<font color="#000080">(</font>M<font color="#000080">);
    </font>o<font color="#000080">:=</font>Ofs<font color="#000080">(</font>M<font color="#000080">);
    </font><font color="#FF0000"><b>asm
      </b></font><font color="#FF00FF">mov ax,9
      mov bx,0
      mov cx,0
      mov es,s
      mov dx,o
      int 33h
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>function </b></font>GetKey<font color="#000080">:</font>word<font color="#000080">;</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>asm
    </b></font><font color="#FF00FF">mov ax,10h
    int 16h
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>Function </b></font>D2H<font color="#000080">(</font>w<font color="#000080">:</font>word<font color="#000080">):</font><font color="#FF0000"><b>string</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>Const
    </b></font>Hex<font color="#000080">:</font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">$0</font><font color="#000080">..</font><font color="#800000">$F</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>char<font color="#000080">=
    </font><font color="#800000">'0123456789ABCDEF'</font><font color="#000080">;
  </font><font color="#FF0000"><b>Var
    </b></font>tmp<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>Begin
    </b></font>tmp<font color="#000080">:=</font>Hex<font color="#000080">[</font>Hi<font color="#000080">(</font>w<font color="#000080">) </font><font color="#FF0000"><b>shr </b></font><font color="#800000">4</font><font color="#000080">]+</font>Hex<font color="#000080">[</font>Hi<font color="#000080">(</font>w<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#800000">$F</font><font color="#000080">]+
         </font>Hex<font color="#000080">[</font>Lo<font color="#000080">(</font>w<font color="#000080">) </font><font color="#FF0000"><b>shr </b></font><font color="#800000">4</font><font color="#000080">]+</font>Hex<font color="#000080">[</font>Lo<font color="#000080">(</font>w<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#800000">$F</font><font color="#000080">];
    </font>D2H<font color="#000080">:=</font>HexString<font color="#000080">+</font>tmp<font color="#000080">;
  </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>procedure </b></font>GetBox<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">:</font>word<font color="#000080">;</font><font color="#FF0000"><b>var </b></font>B<font color="#000080">:</font>Box<font color="#000080">);
  </font><font color="#FF0000"><b>var
    </b></font>j<font color="#000080">,</font>k<font color="#000080">:</font>word<font color="#000080">;
    </font>tmp<font color="#000080">:</font>byte<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    for </b></font>k<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">15 </font><font color="#FF0000"><b>do
      for </b></font>j<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">15 </font><font color="#FF0000"><b>do
        </b></font>B<font color="#000080">[</font>j<font color="#000080">+(</font>k<font color="#000080">*</font><font color="#800000">16</font><font color="#000080">)]:=</font>mem<font color="#000080">[</font><font color="#800000">$A000</font><font color="#000080">:</font>x<font color="#000080">+</font>j<font color="#000080">+(</font><font color="#800000">320</font><font color="#000080">*(</font>y<font color="#000080">+</font>k<font color="#000080">))];
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>procedure </b></font>PutBox<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">:</font>word<font color="#000080">;</font>B<font color="#000080">:</font>Box<font color="#000080">;</font>IsSaved<font color="#000080">:</font>boolean<font color="#000080">);
  </font><font color="#FF0000"><b>var
    </b></font>j<font color="#000080">,</font>k<font color="#000080">:</font>word<font color="#000080">;
    </font>tmp<font color="#000080">:</font>byte<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    for </b></font>k<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">15 </font><font color="#FF0000"><b>do
      for </b></font>j<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">15 </font><font color="#FF0000"><b>do
        begin
          </b></font>tmp<font color="#000080">:=</font>B<font color="#000080">[</font>j<font color="#000080">+</font><font color="#800000">16</font><font color="#000080">*</font>k<font color="#000080">];
          </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>tmp<font color="#000080">&lt;&gt;</font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font>IsSaved <font color="#FF0000"><b>then
            </b></font>mem<font color="#000080">[</font><font color="#800000">$A000</font><font color="#000080">:</font>x<font color="#000080">+</font>j<font color="#000080">+(</font><font color="#800000">320</font><font color="#000080">*(</font>y<font color="#000080">+</font>k<font color="#000080">))]:=</font>tmp<font color="#000080">;
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Begin
  </b></font>ResetMouse<font color="#000080">(</font>Installed<font color="#000080">,</font>Buttons<font color="#000080">);
  </font><font color="#008000"><i>{Check for good file name and installed mouse}
  {$I-}
  </i></font>assign<font color="#000080">(</font>F<font color="#000080">,</font>FileName<font color="#000080">);
  </font>rewrite<font color="#000080">(</font>F<font color="#000080">);
  </font>Good<font color="#000080">:=(</font>IOResult<font color="#000080">=</font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>FileName<font color="#000080">&lt;&gt;</font><font color="#800000">''</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font>Installed<font color="#000080">;
  </font><font color="#FF0000"><b>if not </b></font>Good <font color="#FF0000"><b>then
    </b></font>close<font color="#000080">(</font>F<font color="#000080">);
  </font><font color="#008000"><i>{$I+}
  </i></font><font color="#FF0000"><b>for </b></font>j<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">32 </font><font color="#FF0000"><b>do
    </b></font>M<font color="#000080">[</font>j<font color="#000080">]:=</font><font color="#800000">$FFFF</font><font color="#000080">;
  </font>x<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font>y<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font>count<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>Installed <font color="#FF0000"><b>then
    begin
      </b></font>NewMouse<font color="#000080">(</font>M<font color="#000080">);
      </font>MouseOn<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>GetBox<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>Save<font color="#000080">);
  </font>PutBox<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>Capture<font color="#000080">,</font>false<font color="#000080">);
  </font><font color="#FF0000"><b>repeat
    </b></font>key<font color="#000080">:=</font>GetKey<font color="#000080">;
    </font><font color="#FF0000"><b>case </b></font>key <font color="#FF0000"><b>of
      </b></font><font color="#800000">$4800</font><font color="#000080">,</font><font color="#800000">$1177</font><font color="#000080">,</font><font color="#800000">$1157</font><font color="#000080">: </font><font color="#008000"><i>{Up, w, W}
        </i></font><font color="#FF0000"><b>if </b></font>y<font color="#000080">&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then
          begin
            </b></font>PutBox<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>Save<font color="#000080">,</font>true<font color="#000080">);
            </font>dec<font color="#000080">(</font>y<font color="#000080">);
            </font>GetBox<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>Save<font color="#000080">);
            </font>PutBox<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>Capture<font color="#000080">,</font>false<font color="#000080">);
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#800000">$5000</font><font color="#000080">,</font><font color="#800000">$1F73</font><font color="#000080">,</font><font color="#800000">$1F53</font><font color="#000080">: </font><font color="#008000"><i>{Down, s, S}
        </i></font><font color="#FF0000"><b>if </b></font>y<font color="#000080">&lt;</font><font color="#800000">199 </font><font color="#FF0000"><b>then 
          begin
            </b></font>PutBox<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>Save<font color="#000080">,</font>true<font color="#000080">);
            </font>inc<font color="#000080">(</font>y<font color="#000080">);
            </font>GetBox<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>Save<font color="#000080">);
            </font>PutBox<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>Capture<font color="#000080">,</font>false<font color="#000080">);
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#800000">$4B00</font><font color="#000080">,</font><font color="#800000">$1E61</font><font color="#000080">,</font><font color="#800000">$1E41</font><font color="#000080">: </font><font color="#008000"><i>{Left, a, A}
        </i></font><font color="#FF0000"><b>if </b></font>x<font color="#000080">&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then 
          begin
            </b></font>PutBox<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>Save<font color="#000080">,</font>true<font color="#000080">);
            </font>dec<font color="#000080">(</font>x<font color="#000080">);
            </font>GetBox<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>Save<font color="#000080">);
            </font>PutBox<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>Capture<font color="#000080">,</font>false<font color="#000080">);
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#800000">$4D00</font><font color="#000080">,</font><font color="#800000">$2064</font><font color="#000080">,</font><font color="#800000">$2044</font><font color="#000080">: </font><font color="#008000"><i>{Right, d, D}
        </i></font><font color="#FF0000"><b>if </b></font>x<font color="#000080">&lt;</font><font color="#800000">319 </font><font color="#FF0000"><b>then
          begin
            </b></font>PutBox<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>Save<font color="#000080">,</font>true<font color="#000080">);
            </font>inc<font color="#000080">(</font>x<font color="#000080">);
            </font>GetBox<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>Save<font color="#000080">);
            </font>PutBox<font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">,</font>Capture<font color="#000080">,</font>false<font color="#000080">);
          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#800000">$1C0D</font><font color="#000080">: </font><font color="#008000"><i>{Enter}
        </i></font><font color="#FF0000"><b>begin
          for </b></font>j<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">32 </font><font color="#FF0000"><b>do
            </b></font>M<font color="#000080">[</font>j<font color="#000080">]:=</font><font color="#800000">0</font><font color="#000080">;
          </font><font color="#FF0000"><b>for </b></font>j<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">15 </font><font color="#FF0000"><b>do 
            begin
              for </b></font>k<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">15 </font><font color="#FF0000"><b>do
                begin
                  case </b></font>Save<font color="#000080">[</font>k<font color="#000080">+</font>j<font color="#000080">*</font><font color="#800000">16</font><font color="#000080">] </font><font color="#FF0000"><b>of
                    </b></font><font color="#800000">0</font><font color="#000080">: </font><font color="#008000"><i>{Leave as is, color 0}
                      </i></font><font color="#000080">;
                    </font><font color="#800000">1</font><font color="#000080">: </font><font color="#008000"><i>{Translucent}
                      </i></font><font color="#FF0000"><b>begin
                        </b></font>M<font color="#000080">[</font>j<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">]:=</font>M<font color="#000080">[</font>j<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">] </font><font color="#FF0000"><b>OR </b></font><font color="#000080">(</font><font color="#800000">1 </font><font color="#FF0000"><b>shl </b></font><font color="#000080">(</font><font color="#800000">15</font><font color="#000080">-</font>k<font color="#000080">));
                        </font>M<font color="#000080">[</font>j<font color="#000080">+</font><font color="#800000">17</font><font color="#000080">]:=</font>M<font color="#000080">[</font>j<font color="#000080">+</font><font color="#800000">17</font><font color="#000080">] </font><font color="#FF0000"><b>OR </b></font><font color="#000080">(</font><font color="#800000">1 </font><font color="#FF0000"><b>shl </b></font><font color="#000080">(</font><font color="#800000">15</font><font color="#000080">-</font>k<font color="#000080">));
                      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
                    </font><font color="#800000">15</font><font color="#000080">: </font><font color="#008000"><i>{Color 15}
                      </i></font><font color="#FF0000"><b>begin
                        </b></font>M<font color="#000080">[</font>j<font color="#000080">+</font><font color="#800000">17</font><font color="#000080">]:=</font>M<font color="#000080">[</font>j<font color="#000080">+</font><font color="#800000">17</font><font color="#000080">] </font><font color="#FF0000"><b>OR </b></font><font color="#000080">(</font><font color="#800000">1 </font><font color="#FF0000"><b>shl </b></font><font color="#000080">(</font><font color="#800000">15</font><font color="#000080">-</font>k<font color="#000080">));
                      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
                    </font><font color="#FF0000"><b>else </b></font><font color="#008000"><i>{Transparent}
                      </i></font><font color="#FF0000"><b>begin
                        </b></font>M<font color="#000080">[</font>j<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">]:=</font>M<font color="#000080">[</font>j<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">] </font><font color="#FF0000"><b>OR </b></font><font color="#000080">(</font><font color="#800000">1 </font><font color="#FF0000"><b>shl </b></font><font color="#000080">(</font><font color="#800000">15</font><font color="#000080">-</font>k<font color="#000080">));
                      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
                  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
                </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
          </font><font color="#FF0000"><b>if </b></font>Installed <font color="#FF0000"><b>then
            begin
              </b></font>ResetMouse<font color="#000080">(</font>Installed<font color="#000080">,</font>Buttons<font color="#000080">);
              </font>NewMouse<font color="#000080">(</font>M<font color="#000080">);
              </font>MouseOn<font color="#000080">;
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
          </font><font color="#FF0000"><b>if </b></font>Good <font color="#FF0000"><b>then
            begin
              </b></font>inc<font color="#000080">(</font>count<font color="#000080">);
              </font>writeln<font color="#000080">(</font>F<font color="#000080">,</font><font color="#800000">'{ Capture #'</font><font color="#000080">,</font>count<font color="#000080">:</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">'}'</font><font color="#000080">);
              </font>writeln<font color="#000080">(</font>F<font color="#000080">,</font><font color="#800000">'('</font><font color="#000080">);
              </font><font color="#FF0000"><b>for </b></font>k<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">8 </font><font color="#FF0000"><b>do
                begin
                  for </b></font>j<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">4 </font><font color="#FF0000"><b>do
                    begin
                      </b></font>write<font color="#000080">(</font>F<font color="#000080">,</font>D2H<font color="#000080">(</font>M<font color="#000080">[</font>j<font color="#000080">+</font><font color="#800000">4</font><font color="#000080">*(</font>k<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">)]));
                      </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>j<font color="#000080">=</font><font color="#800000">4</font><font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font>k<font color="#000080">=</font><font color="#800000">8</font><font color="#000080">) </font><font color="#FF0000"><b>then
                        </b></font><font color="#008000"><i>{Do Nothing}
                      </i></font><font color="#FF0000"><b>else
                        </b></font>write<font color="#000080">(</font>F<font color="#000080">,</font><font color="#800000">','</font><font color="#000080">);
                    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
                  </font>writeln<font color="#000080">(</font>F<font color="#000080">);
                </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
              </font>writeln<font color="#000080">(</font>F<font color="#000080">,</font><font color="#800000">');'</font><font color="#000080">);
              </font>writeln<font color="#000080">(</font>F<font color="#000080">);
            </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>until </b></font>key<font color="#000080">=</font><font color="#800000">$011B</font><font color="#000080">; </font><font color="#008000"><i>{Esc}
  </i></font><font color="#FF0000"><b>if </b></font>Installed <font color="#FF0000"><b>then
    </b></font>MouseOff<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>Good <font color="#FF0000"><b>then
    </b></font>close<font color="#000080">(</font>F<font color="#000080">);
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>BEGIN
  </b></font><font color="#008000"><i>{Nothing Here}
</i></font><font color="#FF0000"><b>END</b></font><font color="#000080">.

</font><font color="#008000"><i>{--- Cut Here ---}

</i></font>Here<font color="#800000">'s the DEMO Program!

</font><font color="#008000"><i>{--- Cut Here ---}

{Demo Program for MCAP}

</i></font><font color="#FF0000"><b>USES
  </b></font>MCAP<font color="#000080">;

</font><font color="#FF0000"><b>VAR
  </b></font>count<font color="#000080">:</font>word<font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>SomeColor<font color="#000080">:</font>byte<font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>tmp<font color="#000080">:</font>byte<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font><font color="#008000"><i>{ 0 - Color 0
    1 - Translucent
   15 - Color 15 }
  </i></font>tmp<font color="#000080">:=</font>random<font color="#000080">(</font><font color="#800000">256</font><font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>tmp <font color="#FF0000"><b>mod </b></font><font color="#800000">4</font><font color="#000080">=</font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
    </b></font>tmp<font color="#000080">:=</font><font color="#800000">1
  </font><font color="#FF0000"><b>else if </b></font>odd<font color="#000080">(</font>tmp<font color="#000080">) </font><font color="#FF0000"><b>then
    </b></font>tmp<font color="#000080">:=</font><font color="#800000">15
  </font><font color="#FF0000"><b>else
    </b></font>tmp<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font>SomeColor<font color="#000080">:=</font>tmp<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>BEGIN
  </b></font>randomize<font color="#000080">;
  </font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">mov ax,13h;int 10h;</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{Set 320x200x256c mode (13h)}
  </i></font>count<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>repeat
    </b></font>mem<font color="#000080">[</font><font color="#800000">$A000</font><font color="#000080">:</font>count<font color="#000080">]:=</font><font color="#800000">0</font><font color="#000080">;
    </font>inc<font color="#000080">(</font>count<font color="#000080">);
  </font><font color="#FF0000"><b>until </b></font>count<font color="#000080">=(</font><font color="#800000">16</font><font color="#000080">*</font><font color="#800000">320</font><font color="#000080">);
  </font><font color="#FF0000"><b>repeat
    </b></font>mem<font color="#000080">[</font><font color="#800000">$A000</font><font color="#000080">:</font>count<font color="#000080">]:=</font><font color="#800000">15</font><font color="#000080">;
    </font>inc<font color="#000080">(</font>count<font color="#000080">);
  </font><font color="#FF0000"><b>until </b></font>count<font color="#000080">=(</font><font color="#800000">32</font><font color="#000080">*</font><font color="#800000">320</font><font color="#000080">);
  </font><font color="#FF0000"><b>repeat
    </b></font>mem<font color="#000080">[</font><font color="#800000">$A000</font><font color="#000080">:</font>count<font color="#000080">]:=</font><font color="#800000">1</font><font color="#000080">;
    </font>inc<font color="#000080">(</font>count<font color="#000080">);
  </font><font color="#FF0000"><b>until </b></font>count<font color="#000080">=(</font><font color="#800000">48</font><font color="#000080">*</font><font color="#800000">320</font><font color="#000080">);
  </font><font color="#FF0000"><b>repeat
    </b></font>mem<font color="#000080">[</font><font color="#800000">$A000</font><font color="#000080">:</font>count<font color="#000080">]:=</font><font color="#800000">5</font><font color="#000080">; </font><font color="#008000"><i>{Transparent}
    </i></font>inc<font color="#000080">(</font>count<font color="#000080">);
  </font><font color="#FF0000"><b>until </b></font>count<font color="#000080">=(</font><font color="#800000">64</font><font color="#000080">*</font><font color="#800000">320</font><font color="#000080">);
  </font><font color="#FF0000"><b>repeat
    </b></font>mem<font color="#000080">[</font><font color="#800000">$A000</font><font color="#000080">:</font>count<font color="#000080">]:=</font>SomeColor<font color="#000080">; 
    </font>inc<font color="#000080">(</font>count<font color="#000080">);
  </font><font color="#FF0000"><b>until </b></font>count<font color="#000080">=(</font><font color="#800000">200</font><font color="#000080">*</font><font color="#800000">320</font><font color="#000080">);
  </font>GetMouse<font color="#000080">(</font><font color="#800000">'mouse.dat'</font><font color="#000080">);
  </font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">mov ax,3h;int 10h;</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{Set 80x25 text mode (3h)}
</i></font><font color="#FF0000"><b>END</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to MOUSE SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0039.PAS">Original</a><b>]</b></p></body>
</html>
