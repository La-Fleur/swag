<html>
<head><title> "Cursor Unit" by GRANT BEATTIE</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to CURSOR SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0023.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>Unit </b></font>Cursor<font color="#000080">;  </font><font color="#008000"><i>{ Cursor.Pas }

</i></font><font color="#FF0000"><b>interface

const
</b></font>CursorOn  <font color="#000080">= </font>True<font color="#000080">;
</font>CursorOff <font color="#000080">= </font>False<font color="#000080">;

</font><font color="#008000"><i>{ Cursor shapes }

</i></font>ThinCursor    <font color="#000080">= </font><font color="#800000">$0707</font><font color="#000080">; </font><font color="#008000"><i>{ Thin cursor }
</i></font>OvrCursor     <font color="#000080">= </font><font color="#800000">$0307</font><font color="#000080">; </font><font color="#008000"><i>{ Overwrite cursor }
</i></font>InsCursor     <font color="#000080">= </font><font color="#800000">$0607</font><font color="#000080">; </font><font color="#008000"><i>{ Insert cursor (default) }
</i></font>BarCursor     <font color="#000080">= </font><font color="#800000">$000D</font><font color="#000080">; </font><font color="#008000"><i>{ Bar cursor }

</i></font><font color="#FF0000"><b>procedure </b></font>SetCursor<font color="#000080">(</font>CursorFlag <font color="#000080">: </font>boolean<font color="#000080">);
</font><font color="#FF0000"><b>function </b></font>GetCursorType <font color="#000080">: </font>word<font color="#000080">;
</font><font color="#FF0000"><b>function </b></font>SetCursorType<font color="#000080">(</font>Shape <font color="#000080">: </font>word<font color="#000080">) : </font>word<font color="#000080">;

</font><font color="#FF0000"><b>implementation

uses </b></font>Crt<font color="#000080">;

</font><font color="#FF0000"><b>var
</b></font>CursorShape <font color="#000080">: </font>word<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>SetCursor<font color="#000080">; </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;

</font><font color="#008000"><i>{ Sets the cursor on/off using the current value of the global
CursorShape variable. Monochrome monitors supported }
</i></font><font color="#FF0000"><b>Asm
</b></font><font color="#FF00FF">CMP CursorFlag,True
JNE @@2
CMP BYTE PTR [LastMode],Mono
JE  @@1
MOV CX,CursorShape  </font><font color="#008000"><i>{ Switch on cursor using the default shape }
</i></font><font color="#FF00FF">JMP @@4
@@1:
MOV CX,0B0Ch  </font><font color="#008000"><i>{ Switch on mono cursor }
</i></font><font color="#FF00FF">JMP @@4
@@2:
CMP BYTE PTR [LastMode],Mono
JE  @@3
MOV CX,2000h  </font><font color="#008000"><i>{ Switch off cursor }
</i></font><font color="#FF00FF">JMP @@4
@@3:
XOR CX,CX     </font><font color="#008000"><i>{ Switch off mono cursor }
</i></font><font color="#FF00FF">@@4:
MOV AH,01h
XOR BH,BH
INT 10h
</font><font color="#FF0000"><b>End</b></font><font color="#000080">; </font><font color="#008000"><i>{ SetCursor }

</i></font><font color="#FF0000"><b>Function </b></font>GetCursorType<font color="#000080">;

</font><font color="#008000"><i>{ Returns the current cursor shape/type in word }

</i></font><font color="#FF0000"><b>Begin
</b></font>GetCursorType <font color="#000080">:= </font>MemW<font color="#000080">[</font>Seg0040<font color="#000080">:</font><font color="#800000">$0060</font><font color="#000080">]
</font><font color="#FF0000"><b>End</b></font><font color="#000080">; </font><font color="#008000"><i>{ GetCursorType }

</i></font><font color="#FF0000"><b>Function </b></font>SetCursorType<font color="#000080">; </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;

</font><font color="#008000"><i>{ Sets new cursor type/shape. Old cursor shape is returned }

</i></font><font color="#FF0000"><b>Asm
</b></font><font color="#FF00FF">MOV AX,CursorShape </font><font color="#008000"><i>{ save old value }
</i></font><font color="#FF00FF">MOV BX,Shape
CMP BYTE PTR [LastMode],Mono
JNE @@1
XOR BX,BX </font><font color="#008000"><i>{ Switch off mono cursor }
</i></font><font color="#FF00FF">@@1:
MOV CursorShape,BX
</font><font color="#FF0000"><b>End</b></font><font color="#000080">; </font><font color="#008000"><i>{ SetCursorType }

</i></font><font color="#FF0000"><b>Begin
</b></font>CursorShape <font color="#000080">:= </font>GetCursorType
<font color="#FF0000"><b>End</b></font><font color="#000080">. </font><font color="#008000"><i>{ Cursor.Pas }
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to CURSOR SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0023.PAS">Original</a><b>]</b></p></body>
</html>
