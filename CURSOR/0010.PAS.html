<html>
<head><title> "Cursor Manipulations" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to CURSOR SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0010.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#008000"><i>{ unit to manipulate the text cursor }

</i></font><font color="#FF0000"><b>unit </b></font>Cursor<font color="#000080">;

</font><font color="#FF0000"><b>INTERFACE

TYPE

  </b></font>PCursorRec <font color="#000080">= ^</font>TCursorShape<font color="#000080">;
  </font>TCursorShape <font color="#000080">= </font><font color="#FF0000"><b>record
    </b></font>Start <font color="#000080">: </font>byte<font color="#000080">;
    </font>Stop  <font color="#000080">: </font>byte<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>GetCursorShape <font color="#000080">(</font><font color="#FF0000"><b>var </b></font>Shape <font color="#000080">: </font>TCursorShape<font color="#000080">);
</font><font color="#008000"><i>{ Sets the Start and Stop fields of Shape }

</i></font><font color="#FF0000"><b>procedure </b></font>CursorOff<font color="#000080">;
</font><font color="#008000"><i>{ Turns the cursor off }

</i></font><font color="#FF0000"><b>procedure </b></font>NormCursorOn<font color="#000080">;
</font><font color="#008000"><i>{ Turns underscore cursor on }

</i></font><font color="#FF0000"><b>procedure </b></font>BlockCursorOn<font color="#000080">;
</font><font color="#008000"><i>{ Turns block cursor on }

</i></font><font color="#FF0000"><b>procedure </b></font>SetCursorShape <font color="#000080">(</font>Shape <font color="#000080">: </font>TCursorShape<font color="#000080">);
</font><font color="#008000"><i>{ Set cursor shape with Start and Stop fields of Shape }

</i></font><font color="#FF0000"><b>IMPLEMENTATION
VAR
   </b></font>VideoMode <font color="#000080">: </font>BYTE <font color="#FF0000"><b>ABSOLUTE </b></font><font color="#800000">$0040 </font><font color="#000080">: </font><font color="#800000">$0049</font><font color="#000080">; </font><font color="#008000"><i>{ Video mode: Mono=7, Color=0-3 }

</i></font><font color="#FF0000"><b>procedure </b></font>GetCursorShape <font color="#000080">(</font><font color="#FF0000"><b>var </b></font>Shape <font color="#000080">: </font>TCursorShape<font color="#000080">); </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>asm
    </b></font><font color="#FF00FF">mov ah,$03
    mov bx,$00
    int $10
    les di,Shape
    mov TCursorShape (es:[di]).Start,ch    </font><font color="#008000"><i>{es:[di] is Start field of Shape}
    </i></font><font color="#FF00FF">mov TCursorShape (es:[di]).Stop,cl  </font><font color="#008000"><i>{es:[di+1] is Stop field of Shape}
  </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>SetCursorShape<font color="#000080">; </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>asm
    </b></font><font color="#FF00FF">mov ah,$01             </font><font color="#008000"><i>{ Service 1, set cursor size }
    </i></font><font color="#FF00FF">mov ch,Shape.Start
    mov cl,Shape.Stop
    int $10
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>CursorOff<font color="#000080">;  </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>asm
    </b></font><font color="#FF00FF">mov ah,$01
    mov ch,$20
    mov cl,$00
    int $10
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>NormCursorOn<font color="#000080">;
  </font><font color="#FF0000"><b>var
    </b></font>Shape <font color="#000080">: </font>TCursorShape<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    if </b></font>VideoMode <font color="#000080">= </font><font color="#800000">7 </font><font color="#FF0000"><b>then
      begin
        </b></font>Shape<font color="#000080">.</font>Start <font color="#000080">:= </font><font color="#800000">$0A</font><font color="#000080">;
        </font>Shape<font color="#000080">.</font>Stop  <font color="#000080">:= </font><font color="#800000">$0B</font><font color="#000080">;
      </font><font color="#FF0000"><b>end
    else
      begin
        </b></font>Shape<font color="#000080">.</font>Start <font color="#000080">:= </font><font color="#800000">$06</font><font color="#000080">;
        </font>Shape<font color="#000080">.</font>Stop  <font color="#000080">:= </font><font color="#800000">$07</font><font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>SetCursorShape <font color="#000080">(</font>Shape<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>BlockCursorOn<font color="#000080">;
  </font><font color="#FF0000"><b>var
    </b></font>Shape <font color="#000080">: </font>TCursorShape<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    if </b></font>VideoMode <font color="#000080">= </font><font color="#800000">7 </font><font color="#FF0000"><b>then
      begin
        </b></font>Shape<font color="#000080">.</font>Start <font color="#000080">:= </font><font color="#800000">$02</font><font color="#000080">;
        </font>Shape<font color="#000080">.</font>Stop  <font color="#000080">:= </font><font color="#800000">$0B</font><font color="#000080">;
      </font><font color="#FF0000"><b>end
    else
      begin
        </b></font>Shape<font color="#000080">.</font>Start <font color="#000080">:= </font><font color="#800000">$02</font><font color="#000080">;
        </font>Shape<font color="#000080">.</font>Stop  <font color="#000080">:= </font><font color="#800000">$08</font><font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>SetCursorShape <font color="#000080">(</font>Shape<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>END</b></font><font color="#000080">.</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to CURSOR SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0010.PAS">Original</a><b>]</b></p></body>
</html>
