<html>
<head><title> "Cursor Handling #2" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to CURSOR SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0003.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#000000">MN<font color="#000080">&gt; </font>Anyone have any code <font color="#FF0000"><b>on </b></font>hiding the cursor <font color="#FF0000"><b>and then </b></font>bringing it back<font color="#000080">.

</font>MN<font color="#000080">&gt;                               -+- </font>Mike Normand <font color="#000080">-+-


</font>I<font color="#800000">'ve seen many replies to this but all suffer the same disadvantage: they all
</font>assume you know the size <font color="#FF0000"><b>of </b></font>the cursor<font color="#000080">. </font>A little bit debugging BASIC reveals
what<font color="#800000">'s up (by the way, you'</font>ll find it described <font color="#FF0000"><b>in </b></font>some good books<font color="#000080">): </font>you have
<font color="#FF0000"><b>to set </b></font>bit <font color="#800000">5 </font><font color="#FF0000"><b>For </b></font>the start line <font color="#FF0000"><b>and </b></font>the cursor will disappear since this value
<font color="#FF0000"><b>is not </b></font>allowed<font color="#000080">. </font><font color="#FF0000"><b>To </b></font>get the cursor back again<font color="#000080">, </font>clear bit <font color="#800000">5 </font>again<font color="#000080">. </font>Use this
solution<font color="#000080">, </font><font color="#FF0000"><b>if </b></font>you Really just want <font color="#FF0000"><b>to </b></font>turn <font color="#FF0000"><b>on</b></font><font color="#000080">/</font>off the cursor<font color="#000080">. </font>CursorOn<font color="#000080">/</font>CursorOff
<font color="#FF0000"><b>do </b></font><font color="#000080">*</font><font color="#FF0000"><b>not</b></font><font color="#000080">* </font>change the cursor shape<font color="#000080">!!! </font><font color="#FF0000"><b>and do </b></font><font color="#000080">*</font><font color="#FF0000"><b>not</b></font><font color="#000080">* </font>need an <font color="#FF0000"><b>external </b></font>Variable <font color="#FF0000"><b>to
</b></font>manage this<font color="#000080">.

</font>The  PUSH BP <font color="#000080">/ </font>POP BP  <font color="#FF0000"><b>is </b></font>needed <font color="#FF0000"><b>For </b></font>some <font color="#000080">*</font>very<font color="#000080">* </font>old BIOS versions using CGA<font color="#000080">/
</font>monochrome <font color="#000080">:-( </font>display<font color="#000080">, </font>that trash BP during an INT <font color="#800000">10</font>h<font color="#000080">. </font><font color="#FF0000"><b>If </b></font>you just want <font color="#FF0000"><b>do
</b></font>support EGA<font color="#000080">/</font>VGA <font color="#000080">:-) </font><font color="#FF0000"><b>and </b></font>better<font color="#000080">, </font>just push <font color="#800000">'em out.

</font><font color="#000080">-----------------------------------------------------
</font><font color="#FF0000"><b>Procedure </b></font>CursorOff<font color="#000080">; </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm
    </b></font><font color="#FF00FF">push bp            </font><font color="#008000"><i>{ For old BIOSs }
    </i></font><font color="#FF00FF">xor  ax, ax
    mov  es, ax
    mov  bh, Byte ptr es:[462h]  </font><font color="#008000"><i>{ get active page }
    </i></font><font color="#FF00FF">mov  ah, 3
    int  10h           </font><font color="#008000"><i>{ get cursor Characteristics }
    </i></font><font color="#FF00FF">or   ch, 00100000b
    mov  ah, 1
    int  10h           </font><font color="#008000"><i>{ set cursor Characteristics }
    </i></font><font color="#FF00FF">pop  bp            </font><font color="#008000"><i>{ restore bp For old BIOSs }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>CursorOn<font color="#000080">; </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm
    </b></font><font color="#FF00FF">push bp            </font><font color="#008000"><i>{ old BIOSs like this... }
    </i></font><font color="#FF00FF">xor  ax, ax
    mov  es, ax
    mov  bh, Byte ptr es:[462h]  </font><font color="#008000"><i>{ get active page }
    </i></font><font color="#FF00FF">mov  ah, 3
    int  10h           </font><font color="#008000"><i>{ get cursor Characteristics }
    </i></font><font color="#FF00FF">and  ch, 00011111b
    mov  ah, 1
    int  10h           </font><font color="#008000"><i>{ set cursor Characteristics }
    </i></font><font color="#FF00FF">pop  bp            </font><font color="#008000"><i>{ ...and this, too }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to CURSOR SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0003.PAS">Original</a><b>]</b></p></body>
</html>
