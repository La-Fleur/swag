<html>
<head><title> "Better Cursor Control" by SEAN PALMER</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to CURSOR SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0021.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
A much better more reliable method is just to set the CURRENT cursor's bit
5 to disable it, then mask it back off again...
}
</i></font><font color="#FF0000"><b>unit </b></font>cursor<font color="#000080">; </font><font color="#008000"><i>{Public domain, by Sean Palmer}

</i></font><font color="#FF0000"><b>interface

var </b></font>maxSize<font color="#000080">:</font>byte<font color="#000080">;

 </font><font color="#FF0000"><b>procedure </b></font>cursorOn<font color="#000080">;
 </font><font color="#FF0000"><b>procedure </b></font>cursorOff<font color="#000080">;
 </font><font color="#FF0000"><b>procedure </b></font>setSize<font color="#000080">(</font>scans<font color="#000080">:</font>byte<font color="#000080">);  </font><font color="#008000"><i>{set size from bottom, or 0 for off}
 </i></font><font color="#FF0000"><b>procedure </b></font>detect<font color="#000080">;     </font><font color="#008000"><i>{get max scan lines by reading current cursor}

</i></font><font color="#FF0000"><b>implementation

procedure </b></font>cursorOn<font color="#000080">;</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;</font><font color="#FF0000"><b>asm
 </b></font><font color="#FF00FF">mov ah,3; mov bh,0; int $10; and ch,not $20; mov ah,1; int $10;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>cursorOff<font color="#000080">;</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;</font><font color="#FF0000"><b>asm
 </b></font><font color="#FF00FF">mov ah,3; mov bh,0; int $10; or ch,$20; mov ah,1; int $10;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>setSize<font color="#000080">(</font>scans<font color="#000080">:</font>byte<font color="#000080">);</font><font color="#FF0000"><b>var </b></font>t<font color="#000080">:</font>byte<font color="#000080">;</font><font color="#FF0000"><b>begin
 if </b></font>scans<font color="#000080">=</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>t<font color="#000080">:=</font><font color="#800000">$20 </font><font color="#FF0000"><b>else </b></font>t<font color="#000080">:=</font>maxSize<font color="#000080">-</font>scans<font color="#000080">;
 </font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">mov ah,1; mov bh,0; mov ch,t; mov cl,maxSize; dec cl; int $10; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{call whenever you change text cell height}
</i></font><font color="#FF0000"><b>procedure </b></font>detect<font color="#000080">;</font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;</font><font color="#FF0000"><b>asm  </b></font><font color="#008000"><i>{do NOT call while cursor's hidden}
 </i></font><font color="#FF00FF">mov ah,3; mov bh,0; int $10; inc cl; mov maxSize,cl;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
 </b></font>detect<font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to CURSOR SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0021.PAS">Original</a><b>]</b></p></body>
</html>
