<html>
<head><title> "Tsr's In Turbo Pascal" by LUIS MEZQUITA</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to TSR SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0027.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>Program </b></font>TSR<font color="#000080">;

</font><font color="#008000"><i>{ TSR Demo                      }
{ (c) Jul 94 Luis Mezquita Raya }

{$M $1000,0,0}

</i></font><font color="#FF0000"><b>uses  </b></font>Crt<font color="#000080">,</font>Dos<font color="#000080">;

</font><font color="#FF0000"><b>var   </b></font>OldInt09h<font color="#000080">:</font><font color="#FF0000"><b>procedure</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>EndTSR<font color="#000080">; </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>asm
                </b></font><font color="#FF00FF">cli
                mov AH,49h
                mov ES,PrefixSeg
                push ES
                mov ES,ES:[2Ch]
                int 21h
                pop ES
                mov AH,49h
                int 21h
                sti
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{$f+}
</i></font><font color="#FF0000"><b>Procedure </b></font>NewInt09h<font color="#000080">; </font>interrupt<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>k<font color="#000080">:</font>byte<font color="#000080">; </font>kb_exit<font color="#000080">:</font>boolean<font color="#000080">;
</font><font color="#FF0000"><b>begin
 </b></font>k<font color="#000080">:=</font>Port<font color="#000080">[</font><font color="#800000">$60</font><font color="#000080">];
 </font>kb_exit<font color="#000080">:=</font>False<font color="#000080">;
 </font><font color="#FF0000"><b>if </b></font>k<font color="#000080">&lt;</font><font color="#800000">$80
 </font><font color="#FF0000"><b>then begin
       </b></font>Sound<font color="#000080">(</font><font color="#800000">5000</font><font color="#000080">);
       </font>Delay<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">);
       </font>NoSound<font color="#000080">;
      </font><font color="#FF0000"><b>end
 else if </b></font>k<font color="#000080">=</font><font color="#800000">$CE                          </font><font color="#008000"><i>{ $4E or $80 }
      </i></font><font color="#FF0000"><b>then </b></font>kb_exit<font color="#000080">:=</font>True<font color="#000080">;
 </font><font color="#FF0000"><b>asm </b></font><font color="#FF00FF">pushf </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font>OldInt09h<font color="#000080">;
 </font><font color="#FF0000"><b>if </b></font>kb_exit
 <font color="#FF0000"><b>then begin
       </b></font>Sound<font color="#000080">(</font><font color="#800000">440</font><font color="#000080">);
       </font>Delay<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">);
       </font>NoSound<font color="#000080">;
       </font>SetIntVec<font color="#000080">(</font><font color="#800000">9</font><font color="#000080">,@</font>OldInt09h<font color="#000080">);
       </font>EndTSR<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{$f-}

</i></font><font color="#FF0000"><b>begin
 </b></font>GetIntVec<font color="#000080">(</font><font color="#800000">9</font><font color="#000080">,@</font>OldInt09h<font color="#000080">);
 </font>SetIntVec<font color="#000080">(</font><font color="#800000">9</font><font color="#000080">,@</font>NewInt09h<font color="#000080">);
 </font>Keep<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
&gt;--- </font>cut here <font color="#000080">-----------------------------------------------------

        </font>When you run this <font color="#FF0000"><b>program </b></font>you get a key<font color="#000080">-</font>click each time you
press a key but TSR <font color="#FF0000"><b>program </b></font>discharges <font color="#FF0000"><b>if </b></font>you press the big <font color="#800000">'+' </font>key
<font color="#000080">(</font>at numeric keyboard<font color="#000080">).

                   </font>Greetings<font color="#000080">,
                            </font>Luis


</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to TSR SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0027.PAS">Original</a><b>]</b></p></body>
</html>
