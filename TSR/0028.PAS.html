<html>
<head><title> "TSR Screen Saver" by JUAN JOSE VERGARA</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to TSR SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0028.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{This is a Screen saver, that passed X time blank screen if no pressed a Key}

{ - TSR.PAS - }

{$M 6000,0,0}
{$R-,S-,I-,D+,F+,V-,B-,N-,L+}

</i></font><font color="#FF0000"><b>Uses </b></font>Dos<font color="#000080">,</font>Crt<font color="#000080">,</font>Graph<font color="#000080">,</font>Screen<font color="#000080">;
</font><font color="#008000"><i>{ The code for SCREEN.PAS is in the SCREEN.SWG file }
</i></font><font color="#FF0000"><b>Const
  </b></font>KeyBdInt <font color="#000080">= </font><font color="#800000">$09</font><font color="#000080">;
  </font>TimerInt <font color="#000080">= </font><font color="#800000">$08</font><font color="#000080">;
  </font>ScreenOn<font color="#000080">:</font>Boolean <font color="#000080">= </font>True<font color="#000080">;
  </font>Seconds <font color="#000080">= </font><font color="#800000">10</font><font color="#000080">;    </font><font color="#008000"><i>{Time to activate}
  </i></font>Counter<font color="#000080">:</font>Word <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>Regs<font color="#000080">:</font>Registers<font color="#000080">;
  </font>OldKbdVec<font color="#000080">,</font>OldTimerVec<font color="#000080">:</font>Pointer<font color="#000080">;
  </font>S<font color="#000080">:</font>ScreenStore<font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>STI<font color="#000080">; </font><font color="#FF0000"><b>Inline</b></font><font color="#000080">(</font><font color="#800000">$FB</font><font color="#000080">);
</font><font color="#FF0000"><b>Procedure </b></font>CLI<font color="#000080">; </font><font color="#FF0000"><b>Inline</b></font><font color="#000080">(</font><font color="#800000">$FA</font><font color="#000080">);
</font><font color="#FF0000"><b>Procedure </b></font>CallOldInt<font color="#000080">(</font>Sub<font color="#000080">:</font>Pointer<font color="#000080">);
  </font><font color="#FF0000"><b>Begin
    Inline</b></font><font color="#000080">(</font><font color="#800000">$9C</font><font color="#000080">/</font><font color="#800000">$FF</font><font color="#000080">/</font><font color="#800000">$5E</font><font color="#000080">/</font><font color="#800000">$06</font><font color="#000080">);
  </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>KeyBoard<font color="#000080">(</font>Flags<font color="#000080">,</font>CS<font color="#000080">,</font>IP<font color="#000080">,</font>AX<font color="#000080">,</font>BX<font color="#000080">,</font>CX<font color="#000080">,</font>DX<font color="#000080">,</font>SI<font color="#000080">,</font>DI<font color="#000080">,</font>DS<font color="#000080">,</font>ES<font color="#000080">,</font>BP<font color="#000080">:</font>Word<font color="#000080">); </font>Interrupt<font color="#000080">;
    </font><font color="#FF0000"><b>Begin
      </b></font>Counter<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
      </font><font color="#FF0000"><b>If Not</b></font><font color="#000080">(</font>ScreenOn<font color="#000080">) </font><font color="#FF0000"><b>Then
        Begin
          </b></font>S<font color="#000080">.</font>RestoreScreen<font color="#000080">;
          </font>ScreenOn<font color="#000080">:=</font>True<font color="#000080">;
        </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
      </font>CallOldInt<font color="#000080">(</font>OldKbdVec<font color="#000080">);
      </font>STI<font color="#000080">;
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Procedure </b></font>Timer<font color="#000080">(</font>Flags<font color="#000080">,</font>CS<font color="#000080">,</font>IP<font color="#000080">,</font>AX<font color="#000080">,</font>BX<font color="#000080">,</font>CX<font color="#000080">,</font>DX<font color="#000080">,</font>SI<font color="#000080">,</font>DI<font color="#000080">,</font>DS<font color="#000080">,</font>ES<font color="#000080">,</font>BP<font color="#000080">:</font>Word<font color="#000080">); </font>Interrupt<font color="#000080">;
    </font><font color="#FF0000"><b>Begin
      If </b></font>ScreenOn <font color="#FF0000"><b>Then
        Begin
          </b></font>Inc<font color="#000080">(</font>Counter<font color="#000080">);
          </font><font color="#FF0000"><b>If </b></font>Counter<font color="#000080">&gt;(</font>Trunc<font color="#000080">(</font><font color="#800000">18.2</font><font color="#000080">*</font>Seconds<font color="#000080">)) </font><font color="#FF0000"><b>Then
            Begin
              </b></font>S<font color="#000080">.</font>StoreScreen<font color="#000080">;
              </font>ClrScr<font color="#000080">;
              </font>ScreenOn<font color="#000080">:=</font>False<font color="#000080">;
            </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
        </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
      </font>CallOldInt<font color="#000080">(</font>OldTimerVec<font color="#000080">);
      </font>STI<font color="#000080">;
    </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Begin
</b></font>S<font color="#000080">.</font>Init<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">178</font><font color="#000080">,</font><font color="#800000">7</font><font color="#000080">);
</font>GetIntVec<font color="#000080">(</font>KeyBdInt<font color="#000080">,</font>OldKbdVec<font color="#000080">);
</font>SetIntVec<font color="#000080">(</font>KeyBdInt<font color="#000080">,@</font>KeyBoard<font color="#000080">);
</font>GetIntVec<font color="#000080">(</font>TimerInt<font color="#000080">,</font>OldTimerVec<font color="#000080">);
</font>SetIntVec<font color="#000080">(</font>TimerInt<font color="#000080">,@</font>Timer<font color="#000080">);
</font>Keep<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);

</font><font color="#FF0000"><b>End</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to TSR SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0028.PAS">Original</a><b>]</b></p></body>
</html>
