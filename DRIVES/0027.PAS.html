<html>
<head><title> "Disk Parking" by JAN DOGGEN</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to DRIVES SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0027.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#000080">===========================================================================
 </font>BBS<font color="#000080">: </font>Canada Remote Systems
Date<font color="#000080">: </font><font color="#800000">07</font><font color="#000080">-</font><font color="#800000">11</font><font color="#000080">-</font><font color="#800000">93 </font><font color="#000080">(</font><font color="#800000">20</font><font color="#000080">:</font><font color="#800000">49</font><font color="#000080">)             </font>Number<font color="#000080">: </font><font color="#800000">30503
</font>From<font color="#000080">: </font>JAN DOGGEN                   Refer<font color="#800000">#</font><font color="#000080">: </font>NONE
  <font color="#FF0000"><b>To</b></font><font color="#000080">: </font>MARK STEPHEN                  Recvd<font color="#000080">: </font>NO  
Subj<font color="#000080">: </font>RE<font color="#000080">: </font>PARK IT<font color="#000080">!                   </font>Conf<font color="#000080">: (</font><font color="#800000">1221</font><font color="#000080">) </font>F<font color="#000080">-</font><font color="#FF0000"><b>PASCAL
</b></font><font color="#000080">---------------------------------------------------------------------------
 -=&gt; </font>Quoting Mark Stephen <font color="#FF0000"><b>to </b></font>Herb Brown <font color="#000080">&lt;=-

 </font>HB<font color="#000080">&gt; </font>Anybody have any suggestions<font color="#000080">, </font>experiences<font color="#000080">, </font>trials<font color="#000080">, </font>tribulations<font color="#000080">,
 </font>HB<font color="#000080">&gt; </font>videos<font color="#000080">, </font><font color="#FF0000"><b>and</b></font><font color="#000080">/</font><font color="#FF0000"><b>or </b></font>code examples <font color="#FF0000"><b>on </b></font>how <font color="#FF0000"><b>to </b></font>park a hard drive<font color="#000080">?

 </font>MS<font color="#000080">&gt; </font>Trouble <font color="#FF0000"><b>is</b></font><font color="#000080">, </font>I have no idea <font color="#FF0000"><b>of </b></font>how <font color="#FF0000"><b>to </b></font>find <font color="#FF0000"><b>out if </b></font>the code has actually
 MS<font color="#000080">&gt; </font>done what I want it <font color="#FF0000"><b>to</b></font><font color="#000080">, </font><font color="#FF0000"><b>and </b></font>there seems <font color="#FF0000"><b>to </b></font>be a real possibility <font color="#FF0000"><b>of

 </b></font>Yep<font color="#000080">, </font>took me some time <font color="#FF0000"><b>to </b></font>figure <font color="#FF0000"><b>out </b></font>you can<font color="#800000">'t test where the head is
 </font><font color="#000080">(</font>i<font color="#000080">.</font>e<font color="#000080">. </font><font color="#FF0000"><b>if </b></font>the park was succesful<font color="#000080">).
 </font>I always assume that it won<font color="#800000">'t do any harm on self-parking drives
 </font><font color="#000080">(</font>they just park twice<font color="#000080">).
 </font>Here<font color="#800000">'s some code for Herb too; I guess he reads this too.

</font><font color="#FF0000"><b>PROCEDURE </b></font>ParkDisk<font color="#000080">;
  </font><font color="#FF0000"><b>VAR </b></font>Regs<font color="#000080">: </font>Registers<font color="#000080">;
  </font><font color="#FF0000"><b>BEGIN
    </b></font>Regs<font color="#000080">.</font>AH <font color="#000080">:= </font><font color="#800000">$08</font><font color="#000080">;                </font><font color="#008000"><i>{ 'Return drive parameters' function }
    </i></font>Regs<font color="#000080">.</font>DL <font color="#000080">:= </font><font color="#800000">$80</font><font color="#000080">;           </font><font color="#008000"><i>{ Physical drive number - first hard disk }
    </i></font>Regs<font color="#000080">.</font>AL <font color="#000080">:= </font><font color="#800000">$00</font><font color="#000080">;
    </font>Intr<font color="#000080">(</font><font color="#800000">$13</font><font color="#000080">,</font>Regs<font color="#000080">);
    </font>Assert<font color="#000080">((</font>Regs<font color="#000080">.</font>Flags <font color="#FF0000"><b>AND </b></font>FCarry<font color="#000080">) = </font><font color="#800000">0</font><font color="#000080">,
      </font><font color="#800000">'Error getting disk parameters - AL returns '</font><font color="#000080">+</font>IntToStr<font color="#000080">(</font>Regs<font color="#000080">.</font>AL<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">));
    </font><font color="#008000"><i>{ Now: DL = Number of drives responding                             }
    {      DH = Maximum head number (# heads - 1)                       }
    {      CH = Maximum cylinders/tracks (# tracks - 1) - lower 8 bits  }
    {      CL = Higher 2 bits: high 2 bits of max cyl/tr                }
    {           Lower 6 bits: Maximum sector number                     }
    { We now position the heads using the BIOS Seek service. We can use }
    { the returned registers again if we set DL back to $80.            }
    </i></font>Regs<font color="#000080">.</font>AH <font color="#000080">:= </font><font color="#800000">$0C</font><font color="#000080">;
    </font>Regs<font color="#000080">.</font>DL <font color="#000080">:= </font><font color="#800000">$80</font><font color="#000080">;
    </font>Intr<font color="#000080">(</font><font color="#800000">$13</font><font color="#000080">,</font>Regs<font color="#000080">);
    </font>Assert<font color="#000080">((</font>Regs<font color="#000080">.</font>Flags <font color="#FF0000"><b>AND </b></font>FCarry<font color="#000080">) = </font><font color="#800000">0</font><font color="#000080">,
      </font><font color="#800000">'Error parking disk - AL returns '</font><font color="#000080">+</font>IntToStr<font color="#000080">(</font>Regs<font color="#000080">.</font>AL<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">));
  </font><font color="#FF0000"><b>END</b></font><font color="#000080">; </font><font color="#008000"><i>{ ParkDisk }

 </i></font>MS<font color="#000080">&gt; </font>How about ignoring the problem<font color="#000080">, </font><font color="#FF0000"><b>and if </b></font>trouble develops<font color="#000080">, </font>blaming it <font color="#FF0000"><b>on
 </b></font>MS<font color="#000080">&gt; </font>the hardware<font color="#000080">? (</font>I believe this <font color="#FF0000"><b>is </b></font>the traditional approach<font color="#000080">?) </font>The code

 Some approach<font color="#000080">!

 </font>Jan
___ Blue Wave<font color="#000080">/</font>QWK v2<font color="#000080">.</font><font color="#800000">10

</font><font color="#000080">--- </font>Maximus <font color="#800000">2.01
 </font><font color="#000080">* </font>Origin<font color="#000080">: *** </font>DOSBoss Zuid <font color="#000080">*** (</font><font color="#800000">2</font><font color="#000080">:</font><font color="#800000">500</font><font color="#000080">/</font><font color="#800000">131</font><font color="#000080">)
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to DRIVES SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0027.PAS">Original</a><b>]</b></p></body>
</html>
