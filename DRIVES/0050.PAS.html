<html>
<head><title> "Editing the BOOT Sector" by MAYNARD PHILBROOK</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to DRIVES SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0050.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
MAYNARD PHILBROOK

&gt; How can I look With a pascal-Program(I have TP7.0)in the boot-sector
&gt; of a disk and change them?
}

</i></font><font color="#FF0000"><b>Uses
  </b></font>Dos<font color="#000080">;

</font><font color="#FF0000"><b>Var
 </b></font>Sector <font color="#000080">: </font><font color="#FF0000"><b>Array </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">512</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte<font color="#000080">;
 </font>Regs   <font color="#000080">: </font>Registers<font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>Read_Boot_Sector<font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>Drive <font color="#000080">: </font>Byte<font color="#000080">) : </font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>begin
  With </b></font>Regs <font color="#FF0000"><b>do
  begin
    </b></font>AH <font color="#000080">:= </font><font color="#800000">$02</font><font color="#000080">;      </font><font color="#008000"><i>{ Function Number Read_Sector }
    </i></font>AL <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;        </font><font color="#008000"><i>{ Number of Sectors to Read }
    </i></font>CH <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;        </font><font color="#008000"><i>{ Cylender Number, Upper 2  Bits used For HD }
    </i></font>CL <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;        </font><font color="#008000"><i>{ Bios use Zero base Numbers here }
    </i></font>DH <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;        </font><font color="#008000"><i>{ Head Number or Side 0 = side 1 }
    </i></font>DL <font color="#000080">:= </font>Drive<font color="#000080">;    </font><font color="#008000"><i>{ 0 = A:, 1 := B: Floppys, Add $80 For Fisk Disk }
    </i></font>ES <font color="#000080">:= </font>Seg<font color="#000080">(</font>Sector<font color="#000080">);  </font><font color="#008000"><i>{ Pass the Address of Buffer }
    </i></font>BX <font color="#000080">:= </font>Ofs<font color="#000080">(</font>Sector<font color="#000080">);
    </font>Intr<font color="#000080">(</font><font color="#800000">$13</font><font color="#000080">, </font>Regs<font color="#000080">);    </font><font color="#008000"><i>{ Call Bios Int ); }
    </i></font><font color="#FF0000"><b>if </b></font>Flags <font color="#FF0000"><b>and </b></font><font color="#800000">$01 </font><font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>Then
      </b></font>Read_Boot_Sector <font color="#000080">:= </font>False
    <font color="#FF0000"><b>else
      </b></font>Read_Boot_Sector <font color="#000080">:= </font>True<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  if </b></font>Read_Boot_Sector<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>Then
    </b></font>WriteLn<font color="#000080">(</font><font color="#800000">' Got it '</font><font color="#000080">)
  </font><font color="#FF0000"><b>else
    </b></font>WriteLn<font color="#000080">(</font><font color="#800000">' Disk Error in reading '</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to DRIVES SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0050.PAS">Original</a><b>]</b></p></body>
</html>
