<html>
<head><title> "File Allocation Unit Size" by MIGUEL MARTINEZ</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to DRIVES SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0071.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
 &plusmn; Anybody know a realitively easy way to determine the file allocation
 &plusmn; unit size offa hard/floppy drive??  Pascal source would be prefered over
 &plusmn; pascal assembly as I know next to nothing about assembly.
}
{&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;&Auml;}
</i></font><font color="#FF0000"><b>Function </b></font>GetUA<font color="#000080">(</font>Drive<font color="#000080">: </font>Byte<font color="#000080">:</font>LongInt<font color="#000080">; </font><font color="#008000"><i>{0=Default, 1=A, 2=B,..etc .}
</i></font><font color="#FF0000"><b>Var </b></font>regs<font color="#000080">:</font>Registers<font color="#000080">;
</font><font color="#FF0000"><b>Begin
  </b></font>regs<font color="#000080">.</font>ah<font color="#000080">:=</font><font color="#800000">$1C</font><font color="#000080">;   </font><font color="#008000"><i>{ Int 21h, Function 1Ch: Get drive data       }
                  { * Parameters:                               }
  </i></font>regs<font color="#000080">.</font>dl<font color="#000080">:=</font>Drive<font color="#000080">; </font><font color="#008000"><i>{     DL = Drive code                         }
  </i></font>intr<font color="#000080">(</font><font color="#800000">$21</font><font color="#000080">,</font>regs<font color="#000080">); </font><font color="#008000"><i>{ Call function.                              }
                  { * Returns:                                  }
                  {     AL = Sectors per cluster                }
                  {     DS:DX = Segment:Offset of ID byte       }
                  {     CX = Physical sector length (bytes)     }
                  {     DX = Number of clusters of default unit }
  </i></font>GetUA<font color="#000080">:=</font>regs<font color="#000080">.</font>al<font color="#000080">*</font>regs<font color="#000080">.</font>cx<font color="#000080">; </font><font color="#008000"><i>{ Returns SPC*SL                      }
</i></font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to DRIVES SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0071.PAS">Original</a><b>]</b></p></body>
</html>
