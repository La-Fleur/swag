<html>
<head><title> "Disk Structure/FAT Table?" by BOB BAYANI</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to DRIVES SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0090.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
-&gt; I am searching for information on how to access the Fat table and
-&gt; boot sectors through Turbo Pascal v6.0.  If anyone knows a book that
-&gt; could point me in the right direction, or would be willing to share
-&gt; some knowledge with me I'd appreciate it. Thanx.

Here's some source to help you out:
}

(*** BEGINS HERE ***)
(***********************************************************************
***
*   This is a simple source to demonstrate how to read the File
Allocation
   Table (FAT) and get some information on the current drive.  This was
   written by David Mart, using TP7.0
   NOTE: DOS 2.0 or higher is required.

   If you have any questions, you can contact me by calling Programmers
   Online Systems at 416-512-1928 or simply send me a netmail via
FidoNet
   to: 1:250/738.
************************************************************************
**)

</i></font><font color="#FF0000"><b>Program </b></font>ReadFAT<font color="#000080">;
</font><font color="#FF0000"><b>Uses </b></font>DOS<font color="#000080">,</font>CRT<font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>MyRegs   <font color="#000080">: </font>Registers<font color="#000080">;
  </font>ClusterSize <font color="#000080">: </font>Real<font color="#000080">;
  </font>DiskSize    <font color="#000080">: </font>Real<font color="#000080">;

</font><font color="#FF0000"><b>Begin
  </b></font>LowVideo<font color="#000080">;
  </font>ClrScr<font color="#000080">;

  </font>Fillchar <font color="#000080">(</font>MyRegs<font color="#000080">, </font>sizeof<font color="#000080">(</font>Registers<font color="#000080">), </font><font color="#800000">00</font><font color="#000080">);
  </font>MyRegs<font color="#000080">.</font>AH <font color="#000080">:= </font><font color="#800000">$30</font><font color="#000080">;
  </font>MyRegs<font color="#000080">.</font>DS <font color="#000080">:= </font>DSeg<font color="#000080">;
  </font>MsDOS <font color="#000080">(</font>MyRegs<font color="#000080">);
  </font>Fillchar <font color="#000080">(</font>MyRegs<font color="#000080">, </font>sizeof<font color="#000080">(</font>Registers<font color="#000080">), </font><font color="#800000">00</font><font color="#000080">);
  </font>MyRegs<font color="#000080">.</font>AH <font color="#000080">:= </font><font color="#800000">$1B</font><font color="#000080">;
  </font>MyRegs<font color="#000080">.</font>DS <font color="#000080">:= </font>DSeg<font color="#000080">;
  </font>MsDOS <font color="#000080">(</font>MyRegs<font color="#000080">);
  </font>WriteLn<font color="#000080">;
  </font>WriteLn <font color="#000080">(</font><font color="#800000">'Information for current drive: '</font><font color="#000080">);
  </font>WriteLn<font color="#000080">;

  </font><font color="#FF0000"><b>With </b></font>MyRegs <font color="#FF0000"><b>Do
       Begin
         </b></font>WriteLn <font color="#000080">(</font><font color="#800000">'Clusters on disk    : '</font><font color="#000080">, </font>DX<font color="#000080">);
         </font>WriteLn <font color="#000080">(</font><font color="#800000">'Sectors p/Cluster   : '</font><font color="#000080">, </font>AL<font color="#000080">);
         </font>WriteLn <font color="#000080">(</font><font color="#800000">'Sector Size (Bytes) : '</font><font color="#000080">, </font>CX<font color="#000080">);
         </font>WriteLn<font color="#000080">;
         </font>ClusterSize <font color="#000080">:= (</font>AL <font color="#000080">* </font>CX<font color="#000080">);
         </font>DiskSize    <font color="#000080">:= (</font>ClusterSize <font color="#000080">* </font>DX<font color="#000080">);
         </font>WriteLn <font color="#000080">(</font><font color="#800000">'Cluster Size (Bytes): '</font><font color="#000080">, </font>Round<font color="#000080">(</font>ClusterSize<font color="#000080">));
         </font>WriteLn <font color="#000080">(</font><font color="#800000">'Disk Space (Bytes)  : '</font><font color="#000080">, </font>Round<font color="#000080">(</font>DiskSize<font color="#000080">));
       </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to DRIVES SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0090.PAS">Original</a><b>]</b></p></body>
</html>
