<html>
<head><title> "Get VGA Palette" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to COLOR SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0006.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt;A VGA's screen values can be found by defining something like:

&gt;   VGAScreen : Array[1..64000] of Byte Absolute $A000:0000

&gt;But, how do I find out exactly what color #200 is? It must be held in memory
&gt;some place. Can anyone supply a Procedure, Function or some

I've written this short Program quite a While ago For some testing,
it should compile and work ok. Just note that it Uses slow BIOS
Function, it's not a good choice For fast palette animations but
otherwise works fine.
}

</i></font><font color="#FF0000"><b>Program </b></font>Palette256<font color="#000080">;
</font><font color="#FF0000"><b>Uses </b></font>Dos<font color="#000080">;

</font><font color="#FF0000"><b>Type
  </b></font>VGAColour <font color="#000080">= </font><font color="#FF0000"><b>Record
    </b></font>RByte<font color="#000080">, </font>GByte<font color="#000080">, </font>BByte <font color="#000080">: </font>Byte<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>VGAPal <font color="#000080">= </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">$FF</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>VGAColour<font color="#000080">;

</font><font color="#FF0000"><b>Var
  </b></font>Palette <font color="#000080">: </font>VGAPal<font color="#000080">;
  </font>i <font color="#000080">: </font>Byte<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>GetVGAPal<font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>Pal <font color="#000080">: </font>VGAPal<font color="#000080">);
</font><font color="#FF0000"><b>Var
  </b></font>CPUregs <font color="#000080">: </font>Registers<font color="#000080">;
</font><font color="#FF0000"><b>begin
with </b></font>CPUregs <font color="#FF0000"><b>do
  begin
  </b></font>ax<font color="#000080">:=</font><font color="#800000">$1017</font><font color="#000080">;
  </font>bx<font color="#000080">:=</font><font color="#800000">$00</font><font color="#000080">;
  </font>cx<font color="#000080">:=</font><font color="#800000">$100</font><font color="#000080">;
  </font>es<font color="#000080">:=</font>Seg<font color="#000080">(</font>Pal<font color="#000080">);
  </font>dx<font color="#000080">:=</font>Ofs<font color="#000080">(</font>Pal<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>Intr<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">,</font>CPUregs<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{GetVGAPal}

</i></font><font color="#FF0000"><b>Procedure </b></font>SVMode<font color="#000080">(</font>vmod <font color="#000080">: </font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Var
  </b></font>CPUregs <font color="#000080">: </font>Registers<font color="#000080">;
</font><font color="#FF0000"><b>begin
</b></font>CPUregs<font color="#000080">.</font>ah<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
</font>CPUregs<font color="#000080">.</font>al<font color="#000080">:=</font>vmod<font color="#000080">;
</font>Intr<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">,</font>CPUregs<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{SVMode}

</i></font><font color="#FF0000"><b>begin
</b></font>SVMode<font color="#000080">(</font><font color="#800000">$13</font><font color="#000080">);
</font>GetVGAPal<font color="#000080">(</font>Palette<font color="#000080">);
</font>SVMode<font color="#000080">(</font><font color="#800000">$02</font><font color="#000080">);
</font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font><font color="#800000">$FF </font><font color="#FF0000"><b>do
  </b></font>Writeln<font color="#000080">(</font><font color="#800000">'Entry '</font><font color="#000080">,</font>i<font color="#000080">:</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">' Red : '</font><font color="#000080">,</font>Palette<font color="#000080">[</font>i<font color="#000080">].</font>RByte<font color="#000080">:</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">' Green : '</font><font color="#000080">,
           </font>Palette<font color="#000080">[</font>i<font color="#000080">].</font>GByte<font color="#000080">:</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">' Blue : '</font><font color="#000080">,</font>Palette<font color="#000080">[</font>i<font color="#000080">].</font>BByte<font color="#000080">:</font><font color="#800000">3</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to COLOR SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0006.PAS">Original</a><b>]</b></p></body>
</html>
