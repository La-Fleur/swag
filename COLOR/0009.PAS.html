<html>
<head><title> "Hi Inetnsity Colors #3" by ROBERT MASHLAN</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to COLOR SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0009.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
I have seen a lot of applications that use highintensity background
colors in Text mode.  How do they do it??????
}

</i></font><font color="#FF0000"><b>Program </b></font>HighInt<font color="#000080">; </font><font color="#008000"><i>{  91-5-30  Robert Mashlan
   Public Domain

   The following Program is an example of how to set the CrtC controller
   in in order that high intensity backgrounds may be displayed instead
   of blinking Characters, or use the the EGA/VGA BIOS to do the same
   thing.
}

</i></font><font color="#FF0000"><b>Uses
   </b></font>Dos<font color="#000080">, </font>Crt<font color="#000080">;

</font><font color="#FF0000"><b>Const
   </b></font>HighIntesity <font color="#000080">= </font>Blink<font color="#000080">;  </font><font color="#008000"><i>(* high intesity attribute mask *)


</i></font><font color="#FF0000"><b>Procedure </b></font>HighIntensity<font color="#000080">( </font>state <font color="#000080">: </font>Boolean <font color="#000080">);
</font><font color="#008000"><i>(* enables or disables high intensity background colors *)

</i></font><font color="#FF0000"><b>Const
   </b></font>BlinkBit   <font color="#000080">= </font><font color="#800000">$20</font><font color="#000080">;  </font><font color="#008000"><i>(* For mode select port, bit 5 *)
   </i></font>ModeSelofs <font color="#000080">= </font><font color="#800000">4</font><font color="#000080">;    </font><font color="#008000"><i>(* offset from CrtC port base *)

</i></font><font color="#FF0000"><b>Var
   </b></font>R <font color="#000080">: </font>Registers<font color="#000080">;
   </font><font color="#008000"><i>(* BIOS data area Variables *)
   </i></font>CrtMode     <font color="#000080">: </font>Byte <font color="#FF0000"><b>Absolute </b></font><font color="#800000">$0040</font><font color="#000080">:</font><font color="#800000">$0065</font><font color="#000080">; </font><font color="#008000"><i>(* current CrtC mode *)
   </i></font>CrtPortBase <font color="#000080">: </font>Word <font color="#FF0000"><b>Absolute </b></font><font color="#800000">$0040</font><font color="#000080">:</font><font color="#800000">$0063</font><font color="#000080">; </font><font color="#008000"><i>(* CrtC port base addr *)

   </i></font><font color="#FF0000"><b>Function </b></font>EgaBios <font color="#000080">: </font>Boolean<font color="#000080">;
   </font><font color="#008000"><i>{ test For the existance of EGA/VGA BIOS }
   </i></font><font color="#FF0000"><b>Var </b></font>R <font color="#000080">: </font>Registers<font color="#000080">;
   </font><font color="#FF0000"><b>begin
      With </b></font>R <font color="#FF0000"><b>do begin
         </b></font>AH <font color="#000080">:= </font><font color="#800000">$12</font><font color="#000080">;
         </font>BX <font color="#000080">:= </font><font color="#800000">$ff10</font><font color="#000080">;
         </font>Intr<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">,</font>R<font color="#000080">);
         </font>EgaBios <font color="#000080">:= </font>BX <font color="#000080">&lt;&gt; </font><font color="#800000">$ff10</font><font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
   if </b></font>EgaBios <font color="#FF0000"><b>then With </b></font>R <font color="#FF0000"><b>do begin  </b></font><font color="#008000"><i>(* use EGA/VGA BIOS Function *)
      </i></font>R<font color="#000080">.</font>AX <font color="#000080">:= </font><font color="#800000">$1003</font><font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font>state <font color="#FF0000"><b>then </b></font>BL <font color="#000080">:= </font><font color="#800000">0
               </font><font color="#FF0000"><b>else </b></font>BL <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
      </font>Intr<font color="#000080">(</font><font color="#800000">$10</font><font color="#000080">,</font>R<font color="#000080">);
   </font><font color="#FF0000"><b>end else begin  </b></font><font color="#008000"><i>(* Program CGA/MDA/Herc CrtC controller *)
      </i></font><font color="#FF0000"><b>if </b></font>state <font color="#FF0000"><b>then  </b></font>CrtMode <font color="#000080">:= </font>CrtMode <font color="#FF0000"><b>and not </b></font>BlinkBit
               <font color="#FF0000"><b>else  </b></font>CrtMode <font color="#000080">:= </font>CrtMode <font color="#FF0000"><b>or </b></font>BlinkBit<font color="#000080">;
      </font>Port<font color="#000080">[ </font>CrtPortBase <font color="#000080">+ </font>ModeSelofs <font color="#000080">] := </font>CrtMode<font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>begin
   </b></font>HighIntensity<font color="#000080">(</font>True<font color="#000080">);
   </font><font color="#FF0000"><b>if </b></font>LastMode <font color="#000080">= </font><font color="#800000">7 </font><font color="#FF0000"><b>then
      </b></font>TextAttr <font color="#000080">:= </font><font color="#800000">$80 </font><font color="#000080">+ </font><font color="#800000">$7E
    </font><font color="#FF0000"><b>else
      </b></font>Textattr <font color="#000080">:= </font><font color="#800000">$80 </font><font color="#000080">+ </font><font color="#800000">$6D</font><font color="#000080">;
   </font>ClrScr<font color="#000080">;
   </font>TextBackGround<font color="#000080">(</font>green<font color="#000080">);
   </font>GotoXY<font color="#000080">(</font><font color="#800000">20</font><font color="#000080">,</font><font color="#800000">11</font><font color="#000080">);
   </font>Writeln<font color="#000080">(</font><font color="#800000">'What do you think of this background?'</font><font color="#000080">);
   </font>GotoXY<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">25</font><font color="#000080">);
   </font><font color="#FF0000"><b>Repeat Until </b></font>ReadKey <font color="#000080">&lt;&gt; </font><font color="#800000">#0</font><font color="#000080">;
   </font>HighIntensity<font color="#000080">(</font>False<font color="#000080">);
   </font>ClrScr<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to COLOR SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0009.PAS">Original</a><b>]</b></p></body>
</html>
