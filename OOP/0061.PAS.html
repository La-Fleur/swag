<html>
<head><title> "Dialog Decoder to handle 16k of Buttons" by PER-ERIC LARSSON</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to OOP SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0061.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt; I need help with the turbo vision handleevent procedure...I can't get a
&gt; dialog box to handle any events of its own...I got Tapplications
&gt; handlevent to work for me, but it just won't work in a dialog box.  Please
&gt; help.

Normally a dialog can handle some 4 types of events - that is END the dialog
with the return code of your event - I'm guessing that you want a dialog with
some ten buttons or something like that ?
I've designed a dialog decendor that will take up to 16k buttons

Extract from peldialogs - Copyright 1994 PEL-Data Bor†s Sweden
Released for public domain on term that origin of code is mentioned in
credits part of your program !
}

</i></font><font color="#FF0000"><b>unit </b></font>peldialogs<font color="#000080">;

</font><font color="#FF0000"><b>interface

uses
 </b></font>Objects<font color="#000080">,
 </font>Drivers<font color="#000080">,
 </font>dialogs<font color="#000080">,
 </font>views<font color="#000080">,
 </font>pelRegtypes<font color="#000080">,
 </font>pelobjects<font color="#000080">,
 </font>msgbox<font color="#000080">;

</font><font color="#FF0000"><b>Type
 </b></font>Ppeldialog <font color="#000080">= ^</font>Tpeldialog<font color="#000080">;
 </font>Tpeldialog <font color="#000080">= </font><font color="#FF0000"><b>object</b></font><font color="#000080">(</font>tdialog<font color="#000080">)
  </font>endcmds<font color="#000080">:</font>Ppelwordcollection<font color="#000080">;
  </font><font color="#FF0000"><b>constructor </b></font>Init<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>Bounds<font color="#000080">: </font>TRect<font color="#000080">; </font>ATitle<font color="#000080">: </font>TTitleStr<font color="#000080">);
  </font><font color="#FF0000"><b>destructor </b></font>done<font color="#000080">;</font><font color="#FF0000"><b>virtual</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>procedure </b></font>addcmd<font color="#000080">(</font>cmd<font color="#000080">:</font>word<font color="#000080">);</font><font color="#FF0000"><b>virtual</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>procedure </b></font>HandleEvent<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>Event<font color="#000080">: </font>TEvent<font color="#000080">); </font><font color="#FF0000"><b>virtual</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>implementation
uses
 </b></font>Dos<font color="#000080">,    </font>Memory<font color="#000080">,
 </font>StdDlg<font color="#000080">,  </font>app<font color="#000080">,
 </font>peltextlang<font color="#000080">,
 </font>pelfile<font color="#000080">, </font>validate<font color="#000080">, </font>pelvalidate<font color="#000080">,</font>pelstrings<font color="#000080">;


</font><font color="#FF0000"><b>constructor </b></font>Tpeldialog<font color="#000080">.</font>Init<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>Bounds<font color="#000080">: </font>TRect<font color="#000080">; </font>ATitle<font color="#000080">: </font>TTitleStr<font color="#000080">);
</font><font color="#FF0000"><b>begin
 inherited </b></font>Init<font color="#000080">(</font>Bounds<font color="#000080">,</font>ATitle<font color="#000080">);
 </font>endcmds<font color="#000080">:=</font>new<font color="#000080">(</font>Ppelwordcollection<font color="#000080">,</font>init<font color="#000080">(</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">));
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>destructor </b></font>Tpeldialog<font color="#000080">.</font>done<font color="#000080">;
</font><font color="#FF0000"><b>begin
 </b></font>dispose<font color="#000080">(</font>endcmds<font color="#000080">,</font>done<font color="#000080">);
 </font><font color="#FF0000"><b>inherited </b></font>done<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>Tpeldialog<font color="#000080">.</font>addcmd<font color="#000080">(</font>cmd<font color="#000080">:</font>word<font color="#000080">);
</font><font color="#FF0000"><b>var
 </b></font>p<font color="#000080">:</font>pword<font color="#000080">;
</font><font color="#FF0000"><b>begin
 </b></font>new<font color="#000080">(</font>p<font color="#000080">);
    </font>p<font color="#000080">^:=</font>cmd<font color="#000080">;
 </font>endcmds<font color="#000080">^.</font>insert<font color="#000080">(</font>p<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>Tpeldialog<font color="#000080">.</font>HandleEvent<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>Event<font color="#000080">: </font>TEvent<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>Index<font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
 inherited </b></font>HandleEvent<font color="#000080">(</font>event<font color="#000080">);
 </font><font color="#FF0000"><b>if </b></font>Event<font color="#000080">.</font>What <font color="#000080">= </font>evCommand <font color="#FF0000"><b>then begin
  if </b></font>endcmds<font color="#000080">^.</font>search<font color="#000080">(@</font>Event<font color="#000080">.</font>Command<font color="#000080">,</font>index<font color="#000080">) </font><font color="#FF0000"><b>then begin
   if </b></font>State <font color="#FF0000"><b>and </b></font>sfModal <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then begin
    </b></font>EndModal<font color="#000080">(</font>Event<font color="#000080">.</font>Command<font color="#000080">);
    </font>ClearEvent<font color="#000080">(</font>Event<font color="#000080">);
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font><font color="#008000"><i>{
Use the ppeldialog instead of the pdialog

Add a call to addcmd() for every command you want the dialog to exit with
normally a dialog will end for cmok,cmcancel,cmyes and cmno - those dont need
to be added !
}
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to OOP SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0061.PAS">Original</a><b>]</b></p></body>
</html>
