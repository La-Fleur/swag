<html>
<head><title> "TV-ANSI.PAS" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to OOP SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0019.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
here's some code to insert your one personal desktop in TurboVision.
}
{$L SBLOGO}
</i></font><font color="#FF0000"><b>Procedure </b></font>Logo<font color="#000080">; </font><font color="#FF0000"><b>external</b></font><font color="#000080">;
</font><font color="#008000"><i>{
The only use of this Procedure is to link in the ansi drawing. It's a TP
Compatible Object File (you can make them With TheDraw). But every video
dump will do. This drawing should have the dimension 22 * 80.
}
</i></font><font color="#FF0000"><b>Type
  </b></font>PAnsiBackGround <font color="#000080">= ^</font>TAnsiBackGround<font color="#000080">;
  </font>TAnsiBackGround <font color="#000080">= </font><font color="#FF0000"><b>Object </b></font><font color="#000080">(</font>TBackGround<font color="#000080">)
    </font>BckGrnd <font color="#000080">: </font>Pointer<font color="#000080">;
    </font><font color="#008000"><i>{ This is the Pointer to your video dump }

    </i></font><font color="#FF0000"><b>Constructor </b></font>Init <font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>Bounds <font color="#000080">: </font>TRect<font color="#000080">; </font>APattern <font color="#000080">: </font>Char<font color="#000080">);
    </font><font color="#FF0000"><b>Procedure </b></font>Draw<font color="#000080">; </font><font color="#FF0000"><b>Virtual</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Constructor </b></font>TAnsiBackGround<font color="#000080">.</font>Init<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>TBackGround<font color="#000080">.</font>Init <font color="#000080">(</font>Bounds<font color="#000080">, </font>APattern<font color="#000080">);
  </font>BckGrnd <font color="#000080">:= @</font>Logo<font color="#000080">;

</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>TAnsiBackGround<font color="#000080">.</font>Draw<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>TView<font color="#000080">.</font>Draw<font color="#000080">;
  </font>WriteBuf <font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">80</font><font color="#000080">, </font><font color="#800000">23</font><font color="#000080">, </font>BckGrnd<font color="#000080">^);
  </font><font color="#008000"><i>{ The TV buffer Type is nothing more then a dump of the video memory }

</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Type
  </b></font>PAnsiDesktop <font color="#000080">= ^</font>TAnsiDesktop<font color="#000080">;
  </font>TAnsiDesktop <font color="#000080">= </font><font color="#FF0000"><b>Object </b></font><font color="#000080">(</font>TDesktop<font color="#000080">)
    </font><font color="#FF0000"><b>Procedure </b></font>InitBackGround<font color="#000080">; </font><font color="#FF0000"><b>Virtual</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>TAnsiDesktop<font color="#000080">.</font>InitBackGround<font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>R<font color="#000080">: </font>TRect<font color="#000080">;
  </font>AB <font color="#000080">: </font>PAnsiBackGround<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>GetExtent<font color="#000080">(</font>R<font color="#000080">);
  </font>New <font color="#000080">(</font>AB<font color="#000080">, </font>Init<font color="#000080">(</font>R<font color="#000080">, </font><font color="#800000">#176</font><font color="#000080">));
  </font>BackGround <font color="#000080">:= </font>AB<font color="#000080">;

</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ Your applications InitDesktop method should look like this : }

</i></font><font color="#FF0000"><b>Procedure </b></font>TGenericApp<font color="#000080">.</font>InitDesktop <font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>AB <font color="#000080">: </font>PAnsiDesktop<font color="#000080">;
  </font>R <font color="#000080">: </font>TRect<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>GetExtent<font color="#000080">(</font>R<font color="#000080">);
  </font>Inc<font color="#000080">(</font>R<font color="#000080">.</font>A<font color="#000080">.</font>Y<font color="#000080">);
  </font>Dec<font color="#000080">(</font>R<font color="#000080">.</font>B<font color="#000080">.</font>Y<font color="#000080">);
  </font>New<font color="#000080">(</font>AB<font color="#000080">, </font>Init<font color="#000080">(</font>R<font color="#000080">));
  </font>Desktop <font color="#000080">:= </font>AB<font color="#000080">;

</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#008000"><i>{
The only problem With this approach is that it doesn't work in 43 line mode
since your background covers only 22 lines. if anyone has some nice code
to move this ansi-picture in an buffer which fills up 43 lines mode I Really
appreciate it !!
}</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to OOP SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0019.PAS">Original</a><b>]</b></p></body>
</html>
