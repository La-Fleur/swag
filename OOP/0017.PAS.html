<html>
<head><title> "STATUDLG.PAS" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to OOP SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0017.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#000000"> <font color="#FF0000"><b>Program </b></font>StatusDialogDemo<font color="#000080">;

 </font><font color="#FF0000"><b>Uses
   </b></font>Crt<font color="#000080">,</font>Objects<font color="#000080">,</font>Drivers<font color="#000080">,</font>Views<font color="#000080">,</font>Dialogs<font color="#000080">,</font>App<font color="#000080">;

 </font><font color="#FF0000"><b>Type
   </b></font>PDemo <font color="#000080">= ^</font>TDemo<font color="#000080">;
   </font>TDemo <font color="#000080">= </font><font color="#FF0000"><b>Object </b></font><font color="#000080">(</font>TApplication<font color="#000080">)
     </font><font color="#FF0000"><b>Constructor </b></font>Init<font color="#000080">;
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

   </font>PStatusDialog <font color="#000080">= ^</font>TStatusDialog<font color="#000080">;
   </font>TStatusDialog <font color="#000080">= </font><font color="#FF0000"><b>Object </b></font><font color="#000080">(</font>TDialog<font color="#000080">)
     </font><font color="#FF0000"><b>Message</b></font><font color="#000080">,</font>Value<font color="#000080">: </font>PStaticText<font color="#000080">;
     </font><font color="#FF0000"><b>Constructor </b></font>Init<font color="#000080">;
     </font><font color="#FF0000"><b>Procedure </b></font>Update <font color="#000080">(</font>Status<font color="#000080">: </font>Word<font color="#000080">; </font>AValue<font color="#000080">: </font>Word<font color="#000080">); </font><font color="#FF0000"><b>Virtual</b></font><font color="#000080">;
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

 </font><font color="#FF0000"><b>Constructor </b></font>TDemo<font color="#000080">.</font>Init<font color="#000080">;

 </font><font color="#FF0000"><b>Var
   </b></font>D<font color="#000080">: </font>PStatusDialog<font color="#000080">;
   </font>I<font color="#000080">: </font>Integer<font color="#000080">;
   </font>E<font color="#000080">: </font>TEvent<font color="#000080">;

 </font><font color="#FF0000"><b>begin
 </b></font>TApplication<font color="#000080">.</font>Init<font color="#000080">;
 </font>D <font color="#000080">:= </font>New <font color="#000080">(</font>PStatusDialog<font color="#000080">,</font>Init<font color="#000080">);
 </font>Desktop<font color="#000080">^.</font>Insert <font color="#000080">(</font>D<font color="#000080">);
 </font><font color="#FF0000"><b>For </b></font>I <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">10 </font><font color="#FF0000"><b>do
   begin
   </b></font>D<font color="#000080">^.</font>Update <font color="#000080">(</font>cmValid<font color="#000080">,</font>I <font color="#000080">* </font><font color="#800000">10</font><font color="#000080">);
   </font><font color="#FF0000"><b>if </b></font>CtrlBreakHit <font color="#FF0000"><b>then
     begin
     </b></font>CtrlBreakHit <font color="#000080">:= </font>False<font color="#000080">;
     </font>GetEvent <font color="#000080">(</font>E<font color="#000080">);  </font><font color="#008000"><i>{ eat the Ctrl-Break }
     </i></font>D<font color="#000080">^.</font>Update <font color="#000080">(</font>cmCancel<font color="#000080">,</font>I <font color="#000080">* </font><font color="#800000">10</font><font color="#000080">);
     </font><font color="#FF0000"><b>Repeat </b></font>GetEvent <font color="#000080">(</font>E<font color="#000080">) </font><font color="#FF0000"><b>Until </b></font><font color="#000080">(</font>E<font color="#000080">.</font>What <font color="#000080">= </font>evKeyDown<font color="#000080">)
       </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>E<font color="#000080">.</font>What <font color="#000080">= </font>evMouseDown<font color="#000080">);
     </font>Desktop<font color="#000080">^.</font>Delete <font color="#000080">(</font>D<font color="#000080">);
     </font>Dispose <font color="#000080">(</font>D<font color="#000080">,</font>Done<font color="#000080">);
     </font>Exit<font color="#000080">;
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font>Delay <font color="#000080">(</font><font color="#800000">1000</font><font color="#000080">);  </font><font color="#008000"><i>{ simulate processing }
   </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font>D<font color="#000080">^.</font>Update <font color="#000080">(</font>cmOK<font color="#000080">,</font><font color="#800000">100</font><font color="#000080">);
 </font><font color="#FF0000"><b>Repeat </b></font>GetEvent <font color="#000080">(</font>E<font color="#000080">) </font><font color="#FF0000"><b>Until </b></font><font color="#000080">(</font>E<font color="#000080">.</font>What <font color="#000080">= </font>evKeyDown<font color="#000080">)
   </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>E<font color="#000080">.</font>What <font color="#000080">= </font>evMouseDown<font color="#000080">);
 </font>Desktop<font color="#000080">^.</font>Delete <font color="#000080">(</font>D<font color="#000080">);
 </font>Dispose <font color="#000080">(</font>D<font color="#000080">,</font>Done<font color="#000080">);
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

 </font><font color="#FF0000"><b>Constructor </b></font>TStatusDialog<font color="#000080">.</font>Init<font color="#000080">;

 </font><font color="#FF0000"><b>Var
   </b></font>R<font color="#000080">: </font>TRect<font color="#000080">;

 </font><font color="#FF0000"><b>begin
 </b></font>R<font color="#000080">.</font>Assign <font color="#000080">(</font><font color="#800000">20</font><font color="#000080">,</font><font color="#800000">6</font><font color="#000080">,</font><font color="#800000">60</font><font color="#000080">,</font><font color="#800000">12</font><font color="#000080">);
 </font>TDialog<font color="#000080">.</font>Init<font color="#000080">(</font>R<font color="#000080">,</font><font color="#800000">'Processing...'</font><font color="#000080">);
 </font>Flags <font color="#000080">:= </font>Flags <font color="#FF0000"><b>and not </b></font>wfClose<font color="#000080">;
 </font>R<font color="#000080">.</font>Assign <font color="#000080">(</font><font color="#800000">10</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">30</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">);
 </font>Insert <font color="#000080">(</font>New <font color="#000080">(</font>PStaticText<font color="#000080">,</font>Init <font color="#000080">(</font>R<font color="#000080">,</font><font color="#800000">'Completed Record xxx'</font><font color="#000080">)));
 </font>R<font color="#000080">.</font>Assign <font color="#000080">(</font><font color="#800000">27</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">30</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">);
 </font>Value <font color="#000080">:= </font>New <font color="#000080">(</font>PStaticText<font color="#000080">,</font>Init <font color="#000080">(</font>R<font color="#000080">,</font><font color="#800000">'  0'</font><font color="#000080">));
 </font>Insert <font color="#000080">(</font>Value<font color="#000080">);
 </font>R<font color="#000080">.</font>Assign <font color="#000080">(</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">38</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">);
 </font><font color="#FF0000"><b>Message </b></font><font color="#000080">:= </font>New <font color="#000080">(</font>PStaticText<font color="#000080">,</font>Init <font color="#000080">(</font>R<font color="#000080">,
   </font><font color="#800000">'     Press Ctrl-Break to cancel     '</font><font color="#000080">));
 </font>Insert <font color="#000080">(</font><font color="#FF0000"><b>Message</b></font><font color="#000080">);
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

 </font><font color="#FF0000"><b>Procedure </b></font>TStatusDialog<font color="#000080">.</font>Update <font color="#000080">(</font>Status<font color="#000080">: </font>Word<font color="#000080">; </font>AValue<font color="#000080">: </font>Word<font color="#000080">);

 </font><font color="#FF0000"><b>Var
   </b></font>ValStr<font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">3</font><font color="#000080">];

 </font><font color="#FF0000"><b>begin
 Case </b></font>Status <font color="#FF0000"><b>of
   </b></font>cmCancel<font color="#000080">: </font><font color="#FF0000"><b>begin
     </b></font>DisposeStr <font color="#000080">(</font><font color="#FF0000"><b>Message</b></font><font color="#000080">^.</font>Text<font color="#000080">);
     </font><font color="#FF0000"><b>Message</b></font><font color="#000080">^.</font>Text <font color="#000080">:= </font>NewStr <font color="#000080">(</font><font color="#800000">'     Cancelled - press any key      '</font><font color="#000080">);
     </font><font color="#FF0000"><b>Message</b></font><font color="#000080">^.</font>DrawView<font color="#000080">;
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font>cmOK<font color="#000080">: </font><font color="#FF0000"><b>begin
     </b></font>DisposeStr <font color="#000080">(</font><font color="#FF0000"><b>Message</b></font><font color="#000080">^.</font>Text<font color="#000080">);
     </font><font color="#FF0000"><b>Message</b></font><font color="#000080">^.</font>Text <font color="#000080">:= </font>NewStr <font color="#000080">(</font><font color="#800000">'     Completed - press any key      '</font><font color="#000080">);
     </font><font color="#FF0000"><b>Message</b></font><font color="#000080">^.</font>DrawView<font color="#000080">;
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font>Str <font color="#000080">(</font>AValue<font color="#000080">:</font><font color="#800000">3</font><font color="#000080">,</font>ValStr<font color="#000080">);
 </font>DisposeStr <font color="#000080">(</font>Value<font color="#000080">^.</font>Text<font color="#000080">);
 </font>Value<font color="#000080">^.</font>Text <font color="#000080">:= </font>NewStr <font color="#000080">(</font>ValStr<font color="#000080">);
 </font>Value<font color="#000080">^.</font>DrawView<font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

 </font><font color="#FF0000"><b>Var
   </b></font>Demo<font color="#000080">: </font>TDemo<font color="#000080">;

 </font><font color="#FF0000"><b>begin
 </b></font>Demo<font color="#000080">.</font>Init<font color="#000080">;
 </font>Demo<font color="#000080">.</font>Run<font color="#000080">;
 </font>Demo<font color="#000080">.</font>Done<font color="#000080">;
 </font><font color="#FF0000"><b>end</b></font><font color="#000080">.

 </font><font color="#008000"><i>{
GH&gt;        Can someone explain how exactly to display a
GH&gt;parameterized Text field into a dialog Window?  This is what I

Here is a dialog that I hope does what you want.  It comes from Shazam,
a TV dialog editor and code generator.  Also a great learning tool.
YOu can get it as SZ2.zip from Compuserve or from Jonathan Stein
directly at PO Box 346, Perrysburg OH 43552 fax 419-874-4922.

 Function MakeDialog : PDialog ; Var Dlg                       :
   PDialog ; R                         : TRect ; Control , Labl , Histry
   : PView ; begin R.Assign ( 0 , 10 , 37 , 23 ) ; New ( Dlg , Init ( R
   , 'About #2' ) ) ;

   R.Assign ( 10 , 2 , 26 , 3 ) ;
   Control                   := New ( PStaticText , Init ( R ,
   'A Sample Program' ) ) ;
   Dlg^.Insert ( Control ) ;

   R.Assign ( 13 , 4 , 20 , 5 ) ;
   Control                   := New ( PStaticText , Init ( R ,
   'Version' ) ) ;
   Dlg^.Insert ( Control ) ;

   R.Assign ( 21 , 4 , 28 , 5 ) ;
   Control := New ( PParamText , Init ( R , '%-s    ' , 1 ) )
   Dlg^.Insert ( Control ) ;

   R.Assign ( 8 , 6 , 29 , 7 ) ;
   Control                   := New ( PStaticText , Init ( R ,
   '(C) Copyright 19xx by' ) ) ;
   Dlg^.Insert ( Control ) ;

   R.Assign ( 8 , 8 , 29 , 9 ) ;
   Control                   := New ( PStaticText , Init ( R ,
   'Anybody, Incorporated' ) ) ;
   Dlg^.Insert ( Control ) ;

   R.Assign ( 14 , 10 , 24 , 12 ) ;
   Control := New ( PButton , Init ( R , ' O~K~ ' , cmOK , bfDefault));
   Control^.HelpCtx          := hcAbout2 ;
   Dlg^.Insert ( Control ) ;

   Dlg^.SelectNext ( False ) ;
   MakeDialog                   := Dlg ;
end ;

Var
   DataRec                   : Record
   ParamField1               : PString ; { ParamText }
                               </i></font><font color="#FF0000"><b>end </b></font><font color="#000080">;

  }</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to OOP SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0017.PAS">Original</a><b>]</b></p></body>
</html>
