<html>
<head><title> "COUNTDLG.PAS" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to OOP SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0002.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt; Some trouble-shooting With Turbo Vision, AGAIN!
&gt; If i want to impelement this source code to
&gt; show x in a Window, how do i do that!!

&gt; For x:=1 to 100 do
&gt;    WriteLn (x);

&gt; That means that i want show x counting in the
&gt; Window..........

Here a simple method you can use to get started. It has been tested, and it
does not do much, except show a counting dialog box.
}

</i></font><font color="#FF0000"><b>Unit </b></font>CountDlg<font color="#000080">;

</font><font color="#FF0000"><b>Interface
Uses
  </b></font>Objects<font color="#000080">, </font>dialogs<font color="#000080">, </font>views<font color="#000080">, </font>drivers<font color="#000080">;
</font><font color="#FF0000"><b>Type
  </b></font>KDialog <font color="#000080">= </font><font color="#FF0000"><b>Object</b></font><font color="#000080">(</font>TDialog<font color="#000080">)
              </font>Count <font color="#000080">: </font>Word<font color="#000080">;
              </font>ps    <font color="#000080">: </font>PStaticText<font color="#000080">;
              </font><font color="#FF0000"><b>Constructor </b></font>Init<font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>bounds<font color="#000080">:</font>Trect<font color="#000080">;</font>ATitle<font color="#000080">:</font>TTitleStr<font color="#000080">);
              </font><font color="#FF0000"><b>Procedure </b></font>HandleEvent<font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>Event<font color="#000080">:</font>TEvent<font color="#000080">); </font><font color="#FF0000"><b>virtual</b></font><font color="#000080">;
             </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>PKDialog <font color="#000080">= ^</font>KDialog<font color="#000080">;

</font><font color="#FF0000"><b>Implementation

Function </b></font>NumStr<font color="#000080">(</font>n<font color="#000080">:</font>Word<font color="#000080">):</font><font color="#FF0000"><b>String</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>S <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Str<font color="#000080">(</font>n<font color="#000080">,</font>s<font color="#000080">);
  </font>NumStr <font color="#000080">:= </font>s<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Constructor </b></font>KDialog<font color="#000080">.</font>Init<font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>Bounds<font color="#000080">:</font>TRect<font color="#000080">;</font>ATitle<font color="#000080">:</font>TTitleStr<font color="#000080">);
</font><font color="#FF0000"><b>Var
  </b></font>r <font color="#000080">: </font>TRect<font color="#000080">;
</font><font color="#FF0000"><b>begin
  inherited </b></font>init<font color="#000080">(</font>Bounds<font color="#000080">,</font>ATitle<font color="#000080">);
  </font>Count <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>GetExtent<font color="#000080">(</font>r<font color="#000080">);
  </font>r<font color="#000080">.</font>grow<font color="#000080">(-</font><font color="#800000">1</font><font color="#000080">,-</font><font color="#800000">2</font><font color="#000080">); </font>r<font color="#000080">.</font>b<font color="#000080">.</font>y <font color="#000080">:= </font>r<font color="#000080">.</font>a<font color="#000080">.</font>y <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
  </font>new<font color="#000080">(</font>ps<font color="#000080">,</font>init<font color="#000080">(</font>r<font color="#000080">,</font><font color="#800000">'  Cyclycal counter := '</font><font color="#000080">+</font>NumStr<font color="#000080">(</font>Count<font color="#000080">)));
  </font>insert<font color="#000080">(</font>ps<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>KDialog<font color="#000080">.</font>HandleEvent<font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>Event<font color="#000080">:</font>TEvent<font color="#000080">);
</font><font color="#FF0000"><b>begin
  </b></font>inc<font color="#000080">(</font>Count<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>count <font color="#000080">&gt; </font><font color="#800000">10000 </font><font color="#FF0000"><b>then </b></font>count <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>DisposeStr<font color="#000080">(</font>ps<font color="#000080">^.</font>Text<font color="#000080">);
  </font>ps<font color="#000080">^.</font>Text <font color="#000080">:= </font>NewStr<font color="#000080">(</font><font color="#800000">'  Cyclycal count := '</font><font color="#000080">+</font>NumStr<font color="#000080">(</font>Count<font color="#000080">));
  </font>ps<font color="#000080">^.</font>Draw<font color="#000080">;
  </font><font color="#FF0000"><b>Inherited </b></font>HandleEvent<font color="#000080">(</font>Event<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font><font color="#008000"><i>{
And... the associated application to try it With ...
}

</i></font><font color="#FF0000"><b>Program </b></font>GenApp<font color="#000080">;
</font><font color="#FF0000"><b>Uses
  </b></font>Objects<font color="#000080">, </font>App<font color="#000080">, </font>Views<font color="#000080">, </font>Dialogs<font color="#000080">, </font>CountDlg<font color="#000080">;
</font><font color="#FF0000"><b>Type
  </b></font>GenericApp <font color="#000080">= </font><font color="#FF0000"><b>Object</b></font><font color="#000080">(</font>TApplication<font color="#000080">)
                 </font><font color="#FF0000"><b>Procedure </b></font>Run<font color="#000080">; </font><font color="#FF0000"><b>Virtual</b></font><font color="#000080">;
               </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>GenericApp<font color="#000080">.</font>Run<font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>r  <font color="#000080">: </font>TRect<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>GetExtent<font color="#000080">(</font>R<font color="#000080">);
  </font>R<font color="#000080">.</font>Grow<font color="#000080">(-</font><font color="#800000">26</font><font color="#000080">,-</font><font color="#800000">10</font><font color="#000080">);
  </font>ExecuteDialog<font color="#000080">(</font>new<font color="#000080">(</font>PKDialog<font color="#000080">,</font>init<font color="#000080">(</font>r<font color="#000080">,</font><font color="#800000">'Test Counter'</font><font color="#000080">)),</font><font color="#FF0000"><b>nil</b></font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Var </b></font>MyApp <font color="#000080">: </font>GenericApp<font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>MyApp<font color="#000080">.</font>Init<font color="#000080">;
  </font>MyApp<font color="#000080">.</font>Run<font color="#000080">;
  </font>MyApp<font color="#000080">.</font>Done<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to OOP SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0002.PAS">Original</a><b>]</b></p></body>
</html>
