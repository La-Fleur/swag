<html>
<head><title> "A collection of new views for TurboVisio" by TOM WELLIGE</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to OOP SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0088.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{************************************************}
{                                                }
{   UNIT XVIEWS   A collection of new Views      }
{   Copyright (c) 1994-97 by Tom Wellige         }
{   Donated as FREEWARE                          }
{                                                }
{   Ortsmuehle 4, 44227 Dortmund, GERMANY        }
{   EMail: wellige@itk.de                        }
{                                                }
{************************************************}

(*
  Some few words on this unit:
  ----------------------------

   - This units works fine with Turbo Pascal 6 or higher. If you use
     TP/BP 7 you can use the &quot;inherited&quot; command as shown in the
     comment lines on each line where it is possible.

   - This unit defines first of all a basic object (TXView) for status views
     which are updateable via messages (send from the applications Idle
     methode). All inheritances only have to override the abstract methode
     UPDATE and place the information to display in a string. In this manner
     there are a ClockView, a DateView and an HeapView as examples
     implemented. The usage of these objects (TClock, TDate and THeap) will
     be demonstrated in the programs XTEST1 and XTEST2.

   - There is also a 7-segment view implemented in this unit (T7Segment)
     capable of displaying all numbers from 0 to 9 and the characters
     &quot;A&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;E&quot; &quot;F&quot; and &quot;-&quot;. The usage of this object is also
     demonstrated in this unit by the object TBigClock which is a clock
     in &quot;hh:mm:ss&quot; format. How to use this clock is demonstrated in the
     XTEST3 program.
*)

</i></font><font color="#FF0000"><b>unit </b></font>xviews<font color="#000080">;

</font><font color="#FF0000"><b>interface

uses </b></font>dos<font color="#000080">, </font>objects<font color="#000080">, </font>drivers<font color="#000080">, </font>views<font color="#000080">;

</font><font color="#FF0000"><b>const
  </b></font>cmGetData        <font color="#000080">= </font><font color="#800000">5000</font><font color="#000080">;   </font><font color="#008000"><i>{ Request data string from TXView object }
  </i></font>cmChange7Segment <font color="#000080">= </font><font color="#800000">5001</font><font color="#000080">;   </font><font color="#008000"><i>{ Set new value to display in T7Segment  }
  </i></font>cmChangeBack     <font color="#000080">= </font><font color="#800000">5002</font><font color="#000080">;   </font><font color="#008000"><i>{ Change Background of T7Segment         }

</i></font><font color="#FF0000"><b>type
  </b></font>PXView <font color="#000080">= ^</font>TXView<font color="#000080">;                  </font><font color="#008000"><i>(* Basic status view object  *)
  </i></font>TXView <font color="#000080">= </font><font color="#FF0000"><b>object</b></font><font color="#000080">(</font>TView<font color="#000080">)
      </font>Data<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>procedure </b></font>HandleEvent<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>Event<font color="#000080">: </font>TEvent<font color="#000080">); </font><font color="#FF0000"><b>virtual</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>procedure </b></font>Update<font color="#000080">; </font><font color="#FF0000"><b>virtual</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>procedure </b></font>Draw<font color="#000080">; </font><font color="#FF0000"><b>virtual</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>function  </b></font>GetString<font color="#000080">: </font>PString<font color="#000080">; </font><font color="#FF0000"><b>virtual</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>PClock <font color="#000080">= ^</font>TClock<font color="#000080">;                   </font><font color="#008000"><i>(* Displays current time           *)
  </i></font>TClock <font color="#000080">= </font><font color="#FF0000"><b>object</b></font><font color="#000080">(</font>TXView<font color="#000080">)
    </font><font color="#FF0000"><b>procedure </b></font>Update<font color="#000080">; </font><font color="#FF0000"><b>virtual</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>PDate <font color="#000080">= ^</font>TDate<font color="#000080">;                     </font><font color="#008000"><i>(* Displays current date           *)
  </i></font>TDate <font color="#000080">= </font><font color="#FF0000"><b>object</b></font><font color="#000080">(</font>TXView<font color="#000080">)
    </font><font color="#FF0000"><b>procedure </b></font>Update<font color="#000080">; </font><font color="#FF0000"><b>virtual</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>PHeap <font color="#000080">= ^</font>THeap<font color="#000080">;                     </font><font color="#008000"><i>(* Displays free bytes on the heap *)
  </i></font>THeap <font color="#000080">= </font><font color="#FF0000"><b>object</b></font><font color="#000080">(</font>TXView<font color="#000080">)
    </font><font color="#FF0000"><b>procedure </b></font>Update<font color="#000080">; </font><font color="#FF0000"><b>virtual</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>PInfoView <font color="#000080">= ^</font>TInfoView<font color="#000080">;             </font><font color="#008000"><i>(* Show all &quot;actual&quot; datas         *)
  </i></font>TInfoView <font color="#000080">= </font><font color="#FF0000"><b>object</b></font><font color="#000080">(</font>TView<font color="#000080">)
    </font><font color="#FF0000"><b>procedure </b></font>Draw<font color="#000080">; </font><font color="#FF0000"><b>virtual</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>PInfoWindow <font color="#000080">= ^</font>TInfoWindow<font color="#000080">;         </font><font color="#008000"><i>(* Window holding TInfoView        *)
  </i></font>TInfoWindow <font color="#000080">= </font><font color="#FF0000"><b>object</b></font><font color="#000080">(</font>TWindow<font color="#000080">)
    </font><font color="#FF0000"><b>constructor </b></font>Init<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>Bounds<font color="#000080">: </font>TRect<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>TSegment <font color="#000080">= </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">13</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;    </font><font color="#008000"><i>(* Buffer for T7Sgement            *)

  </i></font>P7Segment <font color="#000080">= ^</font>T7Segment<font color="#000080">;             </font><font color="#008000"><i>(* 7 Segment View (7x5)            *)
  </i></font>T7Segment <font color="#000080">= </font><font color="#FF0000"><b>object</b></font><font color="#000080">(</font>TView<font color="#000080">)
      </font>Segment<font color="#000080">: </font>TSegment<font color="#000080">;
      </font>Number<font color="#000080">: </font>word<font color="#000080">;
        </font><font color="#008000"><i>{ 16 -&gt; segm_ = &quot;-&quot;,  &gt;=17 -&gt; segmBlank = &quot; &quot; }
      </i></font>BackGround<font color="#000080">: </font>boolean<font color="#000080">;
        </font><font color="#008000"><i>{ not active segment visible (gray) ? }
    </i></font><font color="#FF0000"><b>constructor </b></font>Init<font color="#000080">(</font>Top<font color="#000080">: </font>TPoint<font color="#000080">; </font>ABackGround<font color="#000080">: </font>boolean<font color="#000080">; </font>ANumber<font color="#000080">: </font>word<font color="#000080">);
      </font><font color="#008000"><i>{ Top: upper left corner of segment
        ABackGround: not active segments visible (gray) ?
        ANumber: default value to be displayed }
    </i></font><font color="#FF0000"><b>procedure </b></font>HandleEvent<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>Event<font color="#000080">: </font>TEvent<font color="#000080">); </font><font color="#FF0000"><b>virtual</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>procedure </b></font>Draw<font color="#000080">; </font><font color="#FF0000"><b>virtual</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>procedure </b></font>UpdateSegments<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>PBigClock <font color="#000080">= ^</font>TBigClock<font color="#000080">;
  </font>TBigClock <font color="#000080">= </font><font color="#FF0000"><b>object</b></font><font color="#000080">(</font>TGroup<font color="#000080">)
      </font>Seg<font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">6</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>P7Segment<font color="#000080">;
    </font><font color="#FF0000"><b>constructor </b></font>Init<font color="#000080">(</font>Top<font color="#000080">: </font>TPoint<font color="#000080">; </font>BackGround<font color="#000080">: </font>boolean<font color="#000080">);
      </font><font color="#008000"><i>{ Top: upper left corner of clock
        BackGround: will passed to each T7Segment: not active segments
                    visible (gray) ? }
    </i></font><font color="#FF0000"><b>procedure </b></font>HandleEvent<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>Event<font color="#000080">: </font>TEvent<font color="#000080">); </font><font color="#FF0000"><b>virtual</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>procedure </b></font>Update<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>const
  </b></font>Date <font color="#000080">: </font>PDate  <font color="#000080">= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">;
  </font>Clock<font color="#000080">: </font>PClock <font color="#000080">= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">;
  </font>Heap <font color="#000080">: </font>PHeap  <font color="#000080">= </font><font color="#FF0000"><b>nil</b></font><font color="#000080">;

</font><font color="#FF0000"><b>implementation


</b></font><font color="#008000"><i>{***********************************************************************}
{**                             TXView                                **}
{***********************************************************************}

</i></font><font color="#FF0000"><b>procedure </b></font>TXView<font color="#000080">.</font>HandleEvent<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>Event<font color="#000080">: </font>TEvent<font color="#000080">);
</font><font color="#FF0000"><b>begin
  </b></font><font color="#008000"><i>{ TP/BP7: inherited HandleEvent(Event); }
  </i></font>TView<font color="#000080">.</font>HandleEvent<font color="#000080">(</font>Event<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>Event<font color="#000080">.</font>What <font color="#000080">= </font>evBroadCast <font color="#FF0000"><b>then
    if </b></font>Event<font color="#000080">.</font>Command <font color="#000080">= </font>cmGetData <font color="#FF0000"><b>then
    begin
      </b></font>ClearEvent<font color="#000080">(</font>Event<font color="#000080">);
      </font>Event<font color="#000080">.</font>InfoPtr<font color="#000080">:= </font>GetString<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>TXView<font color="#000080">.</font>Update<font color="#000080">;
</font><font color="#FF0000"><b>begin
  Abstract</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>TXView<font color="#000080">.</font>Draw<font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>Buf<font color="#000080">: </font>TDrawBuffer<font color="#000080">;
  </font>C<font color="#000080">: </font>word<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>C<font color="#000080">:= </font>GetColor<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">);  </font><font color="#008000"><i>(* Application -&gt; &quot;Menu normal&quot;  *)
                    (* Window      -&gt; &quot;Frame active&quot; *)
  </i></font>MoveChar<font color="#000080">(</font>Buf<font color="#000080">, </font><font color="#800000">' '</font><font color="#000080">, </font>C<font color="#000080">, </font>Size<font color="#000080">.</font>X<font color="#000080">);
  </font>MoveStr<font color="#000080">(</font>Buf<font color="#000080">, </font>Data<font color="#000080">, </font>C<font color="#000080">);
  </font>WriteLine<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font>Size<font color="#000080">.</font>X<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font>Buf<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>TXView<font color="#000080">.</font>GetString<font color="#000080">: </font>PString<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>GetString<font color="#000080">:= </font>PString<font color="#000080">(@</font>Data<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#008000"><i>{***********************************************************************}
{**                             TClock                                **}
{***********************************************************************}

</i></font><font color="#FF0000"><b>procedure </b></font>TClock<font color="#000080">.</font>Update<font color="#000080">;
</font><font color="#FF0000"><b>type
  </b></font>Rec <font color="#000080">= </font><font color="#FF0000"><b>record
    </b></font>hh<font color="#000080">, </font>mm<font color="#000080">, </font>ss<font color="#000080">: </font>longint<font color="#000080">; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>DataRec<font color="#000080">: </font>Rec<font color="#000080">;
  </font>hh<font color="#000080">, </font>mm<font color="#000080">, </font>ss<font color="#000080">, </font>hs<font color="#000080">: </font>word<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>GetTime<font color="#000080">(</font>hh<font color="#000080">, </font>mm<font color="#000080">, </font>ss<font color="#000080">, </font>hs<font color="#000080">);
  </font>DataRec<font color="#000080">.</font>hh<font color="#000080">:= </font>hh<font color="#000080">;
  </font>DataRec<font color="#000080">.</font>mm<font color="#000080">:= </font>mm<font color="#000080">;
  </font>DataRec<font color="#000080">.</font>ss<font color="#000080">:= </font>ss<font color="#000080">;
  </font>FormatStr<font color="#000080">(</font>Data<font color="#000080">, </font><font color="#800000">'%2d:%2d:%2d'</font><font color="#000080">, </font>DataRec<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>hh <font color="#000080">&lt; </font><font color="#800000">10 </font><font color="#FF0000"><b>then </b></font>Data<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]:= </font><font color="#800000">'0'</font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>mm <font color="#000080">&lt; </font><font color="#800000">10 </font><font color="#FF0000"><b>then </b></font>Data<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">]:= </font><font color="#800000">'0'</font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>ss <font color="#000080">&lt; </font><font color="#800000">10 </font><font color="#FF0000"><b>then </b></font>Data<font color="#000080">[</font><font color="#800000">7</font><font color="#000080">]:= </font><font color="#800000">'0'</font><font color="#000080">;
  </font>DrawView<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#008000"><i>{***********************************************************************}
{**                             TDate                                 **}
{***********************************************************************}

</i></font><font color="#FF0000"><b>procedure </b></font>TDate<font color="#000080">.</font>Update<font color="#000080">;
</font><font color="#FF0000"><b>type
  </b></font>Rec <font color="#000080">= </font><font color="#FF0000"><b>record
    </b></font>dd<font color="#000080">, </font>mm<font color="#000080">, </font>yy<font color="#000080">: </font>longint<font color="#000080">; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>DataRec<font color="#000080">: </font>Rec<font color="#000080">;
  </font>dd<font color="#000080">, </font>mm<font color="#000080">, </font>yy<font color="#000080">, </font>dw<font color="#000080">: </font>word<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>GetDate<font color="#000080">(</font>yy<font color="#000080">, </font>mm<font color="#000080">, </font>dd<font color="#000080">, </font>dw<font color="#000080">);
  </font>DataRec<font color="#000080">.</font>dd<font color="#000080">:= </font>dd<font color="#000080">;
  </font>DataRec<font color="#000080">.</font>mm<font color="#000080">:= </font>mm<font color="#000080">;
  </font>DataRec<font color="#000080">.</font>yy<font color="#000080">:= </font>yy<font color="#000080">;
  </font>FormatStr<font color="#000080">(</font>Data<font color="#000080">, </font><font color="#800000">'%2d.%2d.%4d'</font><font color="#000080">, </font>DataRec<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>dd <font color="#000080">&lt; </font><font color="#800000">10 </font><font color="#FF0000"><b>then </b></font>Data<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]:= </font><font color="#800000">'0'</font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>mm <font color="#000080">&lt; </font><font color="#800000">10 </font><font color="#FF0000"><b>then </b></font>Data<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">]:= </font><font color="#800000">'0'</font><font color="#000080">;
  </font>DrawView<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#008000"><i>{***********************************************************************}
{**                             THeap                                 **}
{***********************************************************************}

</i></font><font color="#FF0000"><b>procedure </b></font>THeap<font color="#000080">.</font>Update<font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>Mem<font color="#000080">: </font>longint<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Mem<font color="#000080">:= </font>MemAvail<font color="#000080">;
  </font>FormatStr<font color="#000080">(</font>Data<font color="#000080">, </font><font color="#800000">'%d Bytes'</font><font color="#000080">, </font>Mem<font color="#000080">);
  </font>DrawView<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#008000"><i>{***********************************************************************}
{**                            TInfoView                              **}
{***********************************************************************}

</i></font><font color="#FF0000"><b>procedure </b></font>TInfoView<font color="#000080">.</font>Draw<font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>Buf<font color="#000080">: </font>TDrawBuffer<font color="#000080">;
  </font>C<font color="#000080">: </font>word<font color="#000080">;
  </font>s<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>C<font color="#000080">:= </font>GetColor<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">);  </font><font color="#008000"><i>(* Application -&gt; &quot;Menu normal&quot;  *)
                    (* Window      -&gt; &quot;Frame active&quot; *)
  </i></font>s<font color="#000080">:= </font><font color="#800000">'Date   : '</font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>assigned<font color="#000080">(</font>Date<font color="#000080">) </font><font color="#FF0000"><b>then
    </b></font>s<font color="#000080">:= </font>s <font color="#000080">+ </font>PString<font color="#000080">(</font><font color="#FF0000"><b>Message</b></font><font color="#000080">(</font>Date<font color="#000080">, </font>evBroadCast<font color="#000080">, </font>cmGetData<font color="#000080">, </font><font color="#FF0000"><b>nil</b></font><font color="#000080">))^ </font><font color="#FF0000"><b>else
    </b></font>s<font color="#000080">:= </font>s <font color="#000080">+ </font><font color="#800000">'not accessable'</font><font color="#000080">;
  </font>MoveChar<font color="#000080">(</font>Buf<font color="#000080">, </font><font color="#800000">' '</font><font color="#000080">, </font>C<font color="#000080">, </font>Size<font color="#000080">.</font>X<font color="#000080">);
  </font>MoveStr<font color="#000080">(</font>Buf<font color="#000080">, </font>s<font color="#000080">, </font>C<font color="#000080">);
  </font>WriteLine<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font>Size<font color="#000080">.</font>X<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font>Buf<font color="#000080">);

  </font>s<font color="#000080">:= </font><font color="#800000">'Time   : '</font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>assigned<font color="#000080">(</font>Clock<font color="#000080">) </font><font color="#FF0000"><b>then
    </b></font>s<font color="#000080">:= </font>s <font color="#000080">+ </font>PString<font color="#000080">(</font><font color="#FF0000"><b>Message</b></font><font color="#000080">(</font>Clock<font color="#000080">, </font>evBroadCast<font color="#000080">, </font>cmGetData<font color="#000080">, </font><font color="#FF0000"><b>nil</b></font><font color="#000080">))^ </font><font color="#FF0000"><b>else
    </b></font>s<font color="#000080">:= </font>s <font color="#000080">+ </font><font color="#800000">'not accessable'</font><font color="#000080">;
  </font>MoveChar<font color="#000080">(</font>Buf<font color="#000080">, </font><font color="#800000">' '</font><font color="#000080">, </font>C<font color="#000080">, </font>Size<font color="#000080">.</font>X<font color="#000080">);
  </font>MoveStr<font color="#000080">(</font>Buf<font color="#000080">, </font>s<font color="#000080">, </font>C<font color="#000080">);
  </font>WriteLine<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font>Size<font color="#000080">.</font>X<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font>Buf<font color="#000080">);

  </font>s<font color="#000080">:= </font><font color="#800000">'Memory : '</font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>assigned<font color="#000080">(</font>Heap<font color="#000080">) </font><font color="#FF0000"><b>then
    </b></font>s<font color="#000080">:= </font>s <font color="#000080">+ </font>PString<font color="#000080">(</font><font color="#FF0000"><b>Message</b></font><font color="#000080">(</font>Heap<font color="#000080">, </font>evBroadCast<font color="#000080">, </font>cmGetData<font color="#000080">, </font><font color="#FF0000"><b>nil</b></font><font color="#000080">))^ </font><font color="#FF0000"><b>else
    </b></font>s<font color="#000080">:= </font>s <font color="#000080">+ </font><font color="#800000">'not accessable'</font><font color="#000080">;
  </font>MoveChar<font color="#000080">(</font>Buf<font color="#000080">, </font><font color="#800000">' '</font><font color="#000080">, </font>C<font color="#000080">, </font>Size<font color="#000080">.</font>X<font color="#000080">);
  </font>MoveStr<font color="#000080">(</font>Buf<font color="#000080">, </font>s<font color="#000080">, </font>C<font color="#000080">);
  </font>WriteLine<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">, </font>Size<font color="#000080">.</font>X<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font>Buf<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#008000"><i>{***********************************************************************}
{**                           TInfoWindow                             **}
{***********************************************************************}

</i></font><font color="#FF0000"><b>constructor </b></font>TInfoWindow<font color="#000080">.</font>Init<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>Bounds<font color="#000080">: </font>TRect<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>R<font color="#000080">: </font>TRect<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font><font color="#008000"><i>{ TP/BP7: inherited Init(Bounds, 'Systeminfo', 0); }
  </i></font>TWindow<font color="#000080">.</font>Init<font color="#000080">(</font>Bounds<font color="#000080">, </font><font color="#800000">'Systeminfo'</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">);
  </font>Palette<font color="#000080">:= </font>wpCyanWindow<font color="#000080">;
  </font>Flags<font color="#000080">:= </font>Flags <font color="#FF0000"><b>and not </b></font><font color="#000080">(</font>wfClose <font color="#000080">+ </font>wfZoom <font color="#000080">+ </font>wfGrow<font color="#000080">);
  </font>GetExtent<font color="#000080">(</font>R<font color="#000080">);
  </font>R<font color="#000080">.</font>Grow<font color="#000080">(-</font><font color="#800000">2</font><font color="#000080">, -</font><font color="#800000">2</font><font color="#000080">);
  </font>Insert<font color="#000080">(</font>New<font color="#000080">(</font>PInfoView<font color="#000080">, </font>Init<font color="#000080">(</font>R<font color="#000080">)));
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#008000"><i>{***********************************************************************}
{**                            T7Segment                              **}
{***********************************************************************}

</i></font><font color="#FF0000"><b>const              </b></font><font color="#008000"><i>{ 1  2  3  4  5  6  7  8  9  A  B  C  D }
  </i></font>segm0<font color="#000080">: </font>TSegment <font color="#000080">= (</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
  </font>segm1<font color="#000080">: </font>TSegment <font color="#000080">= (</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
  </font>segm2<font color="#000080">: </font>TSegment <font color="#000080">= (</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
  </font>segm3<font color="#000080">: </font>TSegment <font color="#000080">= (</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
  </font>segm4<font color="#000080">: </font>TSegment <font color="#000080">= (</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
  </font>segm5<font color="#000080">: </font>TSegment <font color="#000080">= (</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
  </font>segm6<font color="#000080">: </font>TSegment <font color="#000080">= (</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
  </font>segm7<font color="#000080">: </font>TSegment <font color="#000080">= (</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
  </font>segm8<font color="#000080">: </font>TSegment <font color="#000080">= (</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
  </font>segm9<font color="#000080">: </font>TSegment <font color="#000080">= (</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
  </font>segmA<font color="#000080">: </font>TSegment <font color="#000080">= (</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
  </font>segmB<font color="#000080">: </font>TSegment <font color="#000080">= (</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
  </font>segmC<font color="#000080">: </font>TSegment <font color="#000080">= (</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
  </font>segmD<font color="#000080">: </font>TSegment <font color="#000080">= (</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
  </font>segmE<font color="#000080">: </font>TSegment <font color="#000080">= (</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
  </font>segmF<font color="#000080">: </font>TSegment <font color="#000080">= (</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">);
  </font>segm_<font color="#000080">: </font>TSegment <font color="#000080">= (</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">);
  </font>segmBlank<font color="#000080">: </font>TSegment <font color="#000080">=
                    (</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">);


</font><font color="#FF0000"><b>constructor </b></font>T7Segment<font color="#000080">.</font>Init<font color="#000080">(</font>Top<font color="#000080">: </font>TPoint<font color="#000080">; </font>ABackGround<font color="#000080">: </font>boolean<font color="#000080">; </font>ANumber<font color="#000080">: </font>word<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>R<font color="#000080">: </font>TRect<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>R<font color="#000080">.</font>Assign<font color="#000080">(</font>Top<font color="#000080">.</font>X<font color="#000080">, </font>Top<font color="#000080">.</font>Y<font color="#000080">, </font>Top<font color="#000080">.</font>X<font color="#000080">+</font><font color="#800000">7</font><font color="#000080">, </font>Top<font color="#000080">.</font>Y<font color="#000080">+</font><font color="#800000">5</font><font color="#000080">);
  </font><font color="#008000"><i>{ TP/BP7: inherited Init(R); }
  </i></font>TView<font color="#000080">.</font>Init<font color="#000080">(</font>R<font color="#000080">);
  </font>BackGround<font color="#000080">:= </font>ABackGround<font color="#000080">;
  </font>Number<font color="#000080">:= </font>ANumber<font color="#000080">;
  </font>UpdateSegments<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>T7Segment<font color="#000080">.</font>HandleEvent<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>Event<font color="#000080">: </font>TEvent<font color="#000080">);
</font><font color="#FF0000"><b>begin
  </b></font><font color="#008000"><i>{ TP/BP7: inherited HandleEvent(Event); }
  </i></font>TView<font color="#000080">.</font>HandleEvent<font color="#000080">(</font>Event<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>Event<font color="#000080">.</font>What <font color="#000080">= </font>evBroadCast <font color="#FF0000"><b>then
    case </b></font>Event<font color="#000080">.</font>Command <font color="#FF0000"><b>of
      </b></font>cmChange7Segment<font color="#000080">: </font><font color="#FF0000"><b>begin
                          </b></font>Number<font color="#000080">:= </font>Word<font color="#000080">(</font>Event<font color="#000080">.</font>InfoPtr<font color="#000080">^);
                          </font>UpdateSegments<font color="#000080">;
                          </font>DrawView<font color="#000080">;
                          </font>ClearEvent<font color="#000080">(</font>Event<font color="#000080">);
                        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font>cmChangeBack    <font color="#000080">: </font><font color="#FF0000"><b>begin
                          if </b></font>BackGround <font color="#FF0000"><b>then </b></font>BackGround<font color="#000080">:= </font>false
                                        <font color="#FF0000"><b>else </b></font>BackGround<font color="#000080">:= </font>true<font color="#000080">;
                          </font>DrawView<font color="#000080">;
                        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>T7Segment<font color="#000080">.</font>Draw<font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>Buf<font color="#000080">: </font>TDrawBuffer<font color="#000080">;
  </font>Front<font color="#000080">, </font>Back<font color="#000080">: </font>byte<font color="#000080">;

  </font><font color="#FF0000"><b>function </b></font>SetColor<font color="#000080">(</font>w<font color="#000080">: </font>word<font color="#000080">; </font>c<font color="#000080">: </font>byte<font color="#000080">): </font>word<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    </b></font>w<font color="#000080">:= </font>w <font color="#FF0000"><b>and </b></font><font color="#800000">$00FF</font><font color="#000080">;
    </font>w<font color="#000080">:= </font>swap<font color="#000080">(</font>w<font color="#000080">);
    </font>w<font color="#000080">:= </font>w <font color="#FF0000"><b>or </b></font>c<font color="#000080">;
    </font>w<font color="#000080">:= </font>swap<font color="#000080">(</font>w<font color="#000080">);
    </font>SetColor<font color="#000080">:= </font>w<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>procedure </b></font>SetBufColor<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>B<font color="#000080">: </font>TDrawBuffer<font color="#000080">; </font>C<font color="#000080">: </font>word<font color="#000080">);
  </font><font color="#FF0000"><b>var </b></font>i<font color="#000080">: </font>integer<font color="#000080">;
  </font><font color="#FF0000"><b>begin
    for </b></font>i<font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>Size<font color="#000080">.</font>X <font color="#FF0000"><b>do
      </b></font>Buf<font color="#000080">[</font>i<font color="#000080">]:= </font>SetColor<font color="#000080">(</font>Buf<font color="#000080">[</font>i<font color="#000080">], </font>C<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  if </b></font>BackGround <font color="#FF0000"><b>then </b></font>Back<font color="#000080">:= </font><font color="#800000">$8 </font><font color="#FF0000"><b>else </b></font>Back<font color="#000080">:= </font><font color="#800000">$0</font><font color="#000080">;
  </font>Front<font color="#000080">:= </font><font color="#800000">$F</font><font color="#000080">;

  </font><font color="#008000"><i>{ Segment 1,2,3 }
  </i></font>SetBufColor<font color="#000080">(</font>Buf<font color="#000080">, </font><font color="#800000">$0</font><font color="#000080">);
  </font>MoveStr <font color="#000080">(</font>Buf<font color="#000080">, </font><font color="#800000">' &thorn;&thorn;&thorn;&thorn;&thorn;'</font><font color="#000080">, </font>Back<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>Segment<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] = </font><font color="#800000">1 </font><font color="#FF0000"><b>then
    </b></font>Buf<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]:= </font>SetColor<font color="#000080">(</font>Buf<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">], </font>Front<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>Segment<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">] = </font><font color="#800000">1 </font><font color="#FF0000"><b>then begin
    </b></font>Buf<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">]:= </font>SetColor<font color="#000080">(</font>Buf<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">], </font>Front<font color="#000080">);
    </font>Buf<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">]:= </font>SetColor<font color="#000080">(</font>Buf<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">], </font>Front<font color="#000080">);
    </font>Buf<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">]:= </font>SetColor<font color="#000080">(</font>Buf<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">], </font>Front<font color="#000080">); </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>Segment<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">] = </font><font color="#800000">1 </font><font color="#FF0000"><b>then
    </b></font>Buf<font color="#000080">[</font><font color="#800000">5</font><font color="#000080">]:= </font>SetColor<font color="#000080">(</font>Buf<font color="#000080">[</font><font color="#800000">5</font><font color="#000080">], </font>Front<font color="#000080">);
  </font>WriteLine<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font>Size<font color="#000080">.</font>X<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font>Buf<font color="#000080">);

  </font><font color="#008000"><i>{ Segment 4,5 }
  </i></font>SetBufColor<font color="#000080">(</font>Buf<font color="#000080">, </font><font color="#800000">$0</font><font color="#000080">);
  </font>MoveStr <font color="#000080">(</font>Buf<font color="#000080">, </font><font color="#800000">' &Ucirc;   &Ucirc;'</font><font color="#000080">, </font>Back<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>Segment<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">] = </font><font color="#800000">1 </font><font color="#FF0000"><b>then
    </b></font>Buf<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]:= </font>SetColor<font color="#000080">(</font>Buf<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">], </font>Front<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>Segment<font color="#000080">[</font><font color="#800000">5</font><font color="#000080">] = </font><font color="#800000">1 </font><font color="#FF0000"><b>then
    </b></font>Buf<font color="#000080">[</font><font color="#800000">5</font><font color="#000080">]:= </font>SetColor<font color="#000080">(</font>Buf<font color="#000080">[</font><font color="#800000">5</font><font color="#000080">], </font>Front<font color="#000080">);
  </font>WriteLine<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font>Size<font color="#000080">.</font>X<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font>Buf<font color="#000080">);

  </font><font color="#008000"><i>{ Segment 6,7,8 }
  </i></font>SetBufColor<font color="#000080">(</font>Buf<font color="#000080">, </font><font color="#800000">$0</font><font color="#000080">);
  </font>MoveStr <font color="#000080">(</font>Buf<font color="#000080">, </font><font color="#800000">' &thorn;&thorn;&thorn;&thorn;&thorn;'</font><font color="#000080">, </font>Back<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>Segment<font color="#000080">[</font><font color="#800000">6</font><font color="#000080">] = </font><font color="#800000">1 </font><font color="#FF0000"><b>then
    </b></font>Buf<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]:= </font>SetColor<font color="#000080">(</font>Buf<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">], </font>Front<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>Segment<font color="#000080">[</font><font color="#800000">7</font><font color="#000080">] = </font><font color="#800000">1 </font><font color="#FF0000"><b>then begin
    </b></font>Buf<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">]:= </font>SetColor<font color="#000080">(</font>Buf<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">], </font>Front<font color="#000080">);
    </font>Buf<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">]:= </font>SetColor<font color="#000080">(</font>Buf<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">], </font>Front<font color="#000080">);
    </font>Buf<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">]:= </font>SetColor<font color="#000080">(</font>Buf<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">], </font>Front<font color="#000080">); </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>Segment<font color="#000080">[</font><font color="#800000">8</font><font color="#000080">] = </font><font color="#800000">1 </font><font color="#FF0000"><b>then
    </b></font>Buf<font color="#000080">[</font><font color="#800000">5</font><font color="#000080">]:= </font>SetColor<font color="#000080">(</font>Buf<font color="#000080">[</font><font color="#800000">5</font><font color="#000080">], </font>Front<font color="#000080">);
  </font>WriteLine<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">2</font><font color="#000080">, </font>Size<font color="#000080">.</font>X<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font>Buf<font color="#000080">);

  </font><font color="#008000"><i>{ Segment 9,10 }
  </i></font>SetBufColor<font color="#000080">(</font>Buf<font color="#000080">, </font><font color="#800000">$0</font><font color="#000080">);
  </font>MoveStr <font color="#000080">(</font>Buf<font color="#000080">, </font><font color="#800000">' &Ucirc;   &Ucirc;'</font><font color="#000080">, </font>Back<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>Segment<font color="#000080">[</font><font color="#800000">9</font><font color="#000080">] = </font><font color="#800000">1 </font><font color="#FF0000"><b>then
    </b></font>Buf<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]:= </font>SetColor<font color="#000080">(</font>Buf<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">], </font>Front<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>Segment<font color="#000080">[</font><font color="#800000">10</font><font color="#000080">] = </font><font color="#800000">1 </font><font color="#FF0000"><b>then
    </b></font>Buf<font color="#000080">[</font><font color="#800000">5</font><font color="#000080">]:= </font>SetColor<font color="#000080">(</font>Buf<font color="#000080">[</font><font color="#800000">5</font><font color="#000080">], </font>Front<font color="#000080">);
  </font>WriteLine<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">3</font><font color="#000080">, </font>Size<font color="#000080">.</font>X<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font>Buf<font color="#000080">);

  </font><font color="#008000"><i>{ Segment 11,12,13 }
  </i></font>SetBufColor<font color="#000080">(</font>Buf<font color="#000080">, </font><font color="#800000">$0</font><font color="#000080">);
  </font>MoveStr <font color="#000080">(</font>Buf<font color="#000080">, </font><font color="#800000">' &thorn;&thorn;&thorn;&thorn;&thorn;'</font><font color="#000080">, </font>Back<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>Segment<font color="#000080">[</font><font color="#800000">11</font><font color="#000080">] = </font><font color="#800000">1 </font><font color="#FF0000"><b>then
    </b></font>Buf<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">]:= </font>SetColor<font color="#000080">(</font>Buf<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">], </font>Front<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>Segment<font color="#000080">[</font><font color="#800000">12</font><font color="#000080">] = </font><font color="#800000">1 </font><font color="#FF0000"><b>then begin
    </b></font>Buf<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">]:= </font>SetColor<font color="#000080">(</font>Buf<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">], </font>Front<font color="#000080">);
    </font>Buf<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">]:= </font>SetColor<font color="#000080">(</font>Buf<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">], </font>Front<font color="#000080">);
    </font>Buf<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">]:= </font>SetColor<font color="#000080">(</font>Buf<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">], </font>Front<font color="#000080">); </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>Segment<font color="#000080">[</font><font color="#800000">13</font><font color="#000080">] = </font><font color="#800000">1 </font><font color="#FF0000"><b>then
    </b></font>Buf<font color="#000080">[</font><font color="#800000">5</font><font color="#000080">]:= </font>SetColor<font color="#000080">(</font>Buf<font color="#000080">[</font><font color="#800000">5</font><font color="#000080">], </font>Front<font color="#000080">);
  </font>WriteLine<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">4</font><font color="#000080">, </font>Size<font color="#000080">.</font>X<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font>Buf<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>T7Segment<font color="#000080">.</font>UpdateSegments<font color="#000080">;
</font><font color="#FF0000"><b>begin
  case </b></font>Number <font color="#FF0000"><b>of
    </b></font><font color="#800000">0</font><font color="#000080">:  </font>Segment<font color="#000080">:= </font>segm0<font color="#000080">;
    </font><font color="#800000">1</font><font color="#000080">:  </font>Segment<font color="#000080">:= </font>segm1<font color="#000080">;
    </font><font color="#800000">2</font><font color="#000080">:  </font>Segment<font color="#000080">:= </font>segm2<font color="#000080">;
    </font><font color="#800000">3</font><font color="#000080">:  </font>Segment<font color="#000080">:= </font>segm3<font color="#000080">;
    </font><font color="#800000">4</font><font color="#000080">:  </font>Segment<font color="#000080">:= </font>segm4<font color="#000080">;
    </font><font color="#800000">5</font><font color="#000080">:  </font>Segment<font color="#000080">:= </font>segm5<font color="#000080">;
    </font><font color="#800000">6</font><font color="#000080">:  </font>Segment<font color="#000080">:= </font>segm6<font color="#000080">;
    </font><font color="#800000">7</font><font color="#000080">:  </font>Segment<font color="#000080">:= </font>segm7<font color="#000080">;
    </font><font color="#800000">8</font><font color="#000080">:  </font>Segment<font color="#000080">:= </font>segm8<font color="#000080">;
    </font><font color="#800000">9</font><font color="#000080">:  </font>Segment<font color="#000080">:= </font>segm9<font color="#000080">;
    </font><font color="#800000">10</font><font color="#000080">: </font>Segment<font color="#000080">:= </font>segmA<font color="#000080">;
    </font><font color="#800000">11</font><font color="#000080">: </font>Segment<font color="#000080">:= </font>segmB<font color="#000080">;
    </font><font color="#800000">12</font><font color="#000080">: </font>Segment<font color="#000080">:= </font>segmC<font color="#000080">;
    </font><font color="#800000">13</font><font color="#000080">: </font>Segment<font color="#000080">:= </font>segmD<font color="#000080">;
    </font><font color="#800000">14</font><font color="#000080">: </font>Segment<font color="#000080">:= </font>segmE<font color="#000080">;
    </font><font color="#800000">15</font><font color="#000080">: </font>Segment<font color="#000080">:= </font>segmF<font color="#000080">;
    </font><font color="#800000">16</font><font color="#000080">: </font>Segment<font color="#000080">:= </font>segm_<font color="#000080">;
  </font><font color="#FF0000"><b>else
    </b></font>Segment<font color="#000080">:= </font>segmBlank<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#008000"><i>{***********************************************************************}
{**                            TBigClock                              **}
{***********************************************************************}

</i></font><font color="#FF0000"><b>type
  </b></font>PBlackView <font color="#000080">= ^</font>TBlackView<font color="#000080">;    </font><font color="#008000"><i>(* black background for TBigClock *)
  </i></font>TBlackView <font color="#000080">= </font><font color="#FF0000"><b>object</b></font><font color="#000080">(</font>TView<font color="#000080">)
    </font><font color="#FF0000"><b>procedure </b></font>Draw<font color="#000080">; </font><font color="#FF0000"><b>virtual</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>TBlackView<font color="#000080">.</font>Draw<font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>Buf  <font color="#000080">: </font>TDrawBuffer<font color="#000080">;
  </font>Color<font color="#000080">: </font>word<font color="#000080">;
  </font>i    <font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Color<font color="#000080">:= </font><font color="#800000">$0F</font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:= </font><font color="#800000">0 </font><font color="#FF0000"><b>to </b></font>Size<font color="#000080">.</font>Y <font color="#FF0000"><b>do
  begin
    </b></font>MoveChar<font color="#000080">(</font>Buf<font color="#000080">, </font><font color="#800000">' '</font><font color="#000080">, </font>Color<font color="#000080">, </font>Size<font color="#000080">.</font>X<font color="#000080">);
    </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>i <font color="#000080">= </font><font color="#800000">2</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>i <font color="#000080">= </font><font color="#800000">4</font><font color="#000080">) </font><font color="#FF0000"><b>then
    begin
      </b></font>Buf<font color="#000080">[</font><font color="#800000">16</font><font color="#000080">]:= </font><font color="#800000">$0FFE</font><font color="#000080">;
      </font>Buf<font color="#000080">[</font><font color="#800000">33</font><font color="#000080">]:= </font><font color="#800000">$0FFE</font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>WriteLine<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">, </font>i<font color="#000080">, </font>Size<font color="#000080">.</font>X<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font>Buf<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>constructor </b></font>TBigClock<font color="#000080">.</font>Init<font color="#000080">(</font>Top<font color="#000080">: </font>TPoint<font color="#000080">; </font>BackGround<font color="#000080">: </font>boolean<font color="#000080">);
</font><font color="#FF0000"><b>const
  </b></font>XPos <font color="#000080">: </font><font color="#FF0000"><b>Array </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">6</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>word <font color="#000080">= (</font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">8</font><font color="#000080">, </font><font color="#800000">18</font><font color="#000080">, </font><font color="#800000">25</font><font color="#000080">, </font><font color="#800000">35</font><font color="#000080">, </font><font color="#800000">42</font><font color="#000080">);
</font><font color="#FF0000"><b>var
  </b></font>R<font color="#000080">: </font>TRect<font color="#000080">;
  </font>P<font color="#000080">: </font>TPoint<font color="#000080">;
  </font>i<font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>R<font color="#000080">.</font>Assign<font color="#000080">(</font>Top<font color="#000080">.</font>X<font color="#000080">, </font>Top<font color="#000080">.</font>Y<font color="#000080">, </font>Top<font color="#000080">.</font>X<font color="#000080">+</font><font color="#800000">50</font><font color="#000080">, </font>Top<font color="#000080">.</font>Y<font color="#000080">+</font><font color="#800000">7</font><font color="#000080">);
  </font><font color="#008000"><i>{ TP/BP7: inherited Init(R); }
  </i></font>TGroup<font color="#000080">.</font>Init<font color="#000080">(</font>R<font color="#000080">);

  </font>R<font color="#000080">.</font>Assign<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">, </font>Size<font color="#000080">.</font>X<font color="#000080">, </font>Size<font color="#000080">.</font>Y<font color="#000080">);
  </font>Insert<font color="#000080">(</font>new<font color="#000080">(</font>PBlackView<font color="#000080">, </font>Init<font color="#000080">(</font>R<font color="#000080">)));

  </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">6 </font><font color="#FF0000"><b>do
  begin
    </b></font>P<font color="#000080">.</font>X<font color="#000080">:= </font>XPos<font color="#000080">[</font>i<font color="#000080">]; </font>P<font color="#000080">.</font>Y<font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
    </font>Seg<font color="#000080">[</font>i<font color="#000080">]:= </font>new<font color="#000080">(</font>P7Segment<font color="#000080">, </font>Init<font color="#000080">(</font>P<font color="#000080">, </font>BackGround<font color="#000080">, </font><font color="#800000">0</font><font color="#000080">));
    </font>insert<font color="#000080">(</font>Seg<font color="#000080">[</font>i<font color="#000080">]);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>TBigClock<font color="#000080">.</font>HandleEvent<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>Event<font color="#000080">: </font>TEvent<font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>i<font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font><font color="#008000"><i>{ TP/BP7: inherited HandleEvent(Event); }
  </i></font>TGroup<font color="#000080">.</font>HandleEvent<font color="#000080">(</font>Event<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>Event<font color="#000080">.</font>What <font color="#000080">= </font>evBroadCast <font color="#FF0000"><b>then
    if </b></font>Event<font color="#000080">.</font>Command <font color="#000080">= </font>cmChangeBack <font color="#FF0000"><b>then
    begin
      for </b></font>i<font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">6 </font><font color="#FF0000"><b>do
        Message</b></font><font color="#000080">(</font>Seg<font color="#000080">[</font>i<font color="#000080">], </font>evBroadCast<font color="#000080">, </font>cmChangeBack<font color="#000080">, </font><font color="#FF0000"><b>nil</b></font><font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>TBigClock<font color="#000080">.</font>Update<font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>w<font color="#000080">, </font>h<font color="#000080">, </font>m<font color="#000080">, </font>s<font color="#000080">, </font>hs<font color="#000080">: </font>word<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>GetTime<font color="#000080">(</font>h<font color="#000080">, </font>m<font color="#000080">, </font>s<font color="#000080">, </font>hs<font color="#000080">);
  </font>w<font color="#000080">:= </font>h <font color="#FF0000"><b>div </b></font><font color="#800000">10</font><font color="#000080">;
  </font><font color="#FF0000"><b>Message</b></font><font color="#000080">(</font>Seg<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">], </font>evBroadCast<font color="#000080">, </font>cmChange7Segment<font color="#000080">, @</font>w<font color="#000080">); </font><font color="#008000"><i>(* Hours   - 10^1 *)
  </i></font>w<font color="#000080">:= </font>h <font color="#FF0000"><b>mod </b></font><font color="#800000">10</font><font color="#000080">;
  </font><font color="#FF0000"><b>Message</b></font><font color="#000080">(</font>Seg<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">], </font>evBroadCast<font color="#000080">, </font>cmChange7Segment<font color="#000080">, @</font>w<font color="#000080">); </font><font color="#008000"><i>(* Hours   - 10^0 *)
  </i></font>w<font color="#000080">:= </font>m <font color="#FF0000"><b>div </b></font><font color="#800000">10</font><font color="#000080">;
  </font><font color="#FF0000"><b>Message</b></font><font color="#000080">(</font>Seg<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">], </font>evBroadCast<font color="#000080">, </font>cmChange7Segment<font color="#000080">, @</font>w<font color="#000080">); </font><font color="#008000"><i>(* Minutes - 10^1 *)
  </i></font>w<font color="#000080">:= </font>m <font color="#FF0000"><b>mod </b></font><font color="#800000">10</font><font color="#000080">;
  </font><font color="#FF0000"><b>Message</b></font><font color="#000080">(</font>Seg<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">], </font>evBroadCast<font color="#000080">, </font>cmChange7Segment<font color="#000080">, @</font>w<font color="#000080">); </font><font color="#008000"><i>(* Minutes - 10^0 *)
  </i></font>w<font color="#000080">:= </font>s <font color="#FF0000"><b>div </b></font><font color="#800000">10</font><font color="#000080">;
  </font><font color="#FF0000"><b>Message</b></font><font color="#000080">(</font>Seg<font color="#000080">[</font><font color="#800000">5</font><font color="#000080">], </font>evBroadCast<font color="#000080">, </font>cmChange7Segment<font color="#000080">, @</font>w<font color="#000080">); </font><font color="#008000"><i>(* Seconds - 10^1 *)
  </i></font>w<font color="#000080">:= </font>s <font color="#FF0000"><b>mod </b></font><font color="#800000">10</font><font color="#000080">;
  </font><font color="#FF0000"><b>Message</b></font><font color="#000080">(</font>Seg<font color="#000080">[</font><font color="#800000">6</font><font color="#000080">], </font>evBroadCast<font color="#000080">, </font>cmChange7Segment<font color="#000080">, @</font>w<font color="#000080">); </font><font color="#008000"><i>(* Seconds - 10^0 *)
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font><font color="#008000"><i>{ -------------------- DEMO -------------- CUT HERE ------------ }

</i></font><font color="#FF0000"><b>program </b></font>XTest1<font color="#000080">;

</font><font color="#008000"><i>{ usage of TDate, TClock and THeap defined in Unit XVIEWS }

</i></font><font color="#FF0000"><b>uses </b></font>Drivers<font color="#000080">, </font>Objects<font color="#000080">, </font>App<font color="#000080">, </font>Views<font color="#000080">, </font>Menus<font color="#000080">, </font>XViews<font color="#000080">;

</font><font color="#FF0000"><b>const
  </b></font>cmWindow <font color="#000080">= </font><font color="#800000">1000</font><font color="#000080">;

</font><font color="#FF0000"><b>type
  </b></font>PMyApp <font color="#000080">= ^</font>TMyApp<font color="#000080">;
  </font>TMyApp <font color="#000080">= </font><font color="#FF0000"><b>object</b></font><font color="#000080">(</font>TApplication<font color="#000080">)
    </font><font color="#FF0000"><b>constructor </b></font>Init<font color="#000080">;
    </font><font color="#FF0000"><b>procedure </b></font>Idle<font color="#000080">; </font><font color="#FF0000"><b>virtual</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>procedure </b></font>HandleEvent<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>Event<font color="#000080">: </font>TEvent<font color="#000080">); </font><font color="#FF0000"><b>virtual</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>procedure </b></font>Window<font color="#000080">;
    </font><font color="#FF0000"><b>procedure </b></font>InitStatusLine<font color="#000080">; </font><font color="#FF0000"><b>virtual</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>constructor </b></font>TMyApp<font color="#000080">.</font>Init<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>R<font color="#000080">: </font>TRect<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font><font color="#008000"><i>{ TP/BP7: inherited Init; }
  </i></font>TApplication<font color="#000080">.</font>Init<font color="#000080">;

  </font>GetExtent<font color="#000080">(</font>R<font color="#000080">);
  </font>R<font color="#000080">.</font>A<font color="#000080">.</font>X<font color="#000080">:= </font>R<font color="#000080">.</font>B<font color="#000080">.</font>X <font color="#000080">- </font><font color="#800000">11</font><font color="#000080">;
  </font>R<font color="#000080">.</font>A<font color="#000080">.</font>Y<font color="#000080">:= </font>R<font color="#000080">.</font>B<font color="#000080">.</font>Y <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
  </font>Date<font color="#000080">:= </font>New<font color="#000080">(</font>PDate<font color="#000080">, </font>Init<font color="#000080">(</font>R<font color="#000080">));
  </font>Insert<font color="#000080">(</font>Date<font color="#000080">);

  </font>GetExtent<font color="#000080">(</font>R<font color="#000080">);
  </font>R<font color="#000080">.</font>A<font color="#000080">.</font>X<font color="#000080">:= </font>R<font color="#000080">.</font>B<font color="#000080">.</font>X <font color="#000080">- </font><font color="#800000">9</font><font color="#000080">;
  </font>R<font color="#000080">.</font>B<font color="#000080">.</font>Y<font color="#000080">:= </font>R<font color="#000080">.</font>A<font color="#000080">.</font>Y <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
  </font>Clock<font color="#000080">:= </font>New<font color="#000080">(</font>PClock<font color="#000080">, </font>Init<font color="#000080">(</font>R<font color="#000080">));
  </font>Insert<font color="#000080">(</font>Clock<font color="#000080">);

  </font>GetExtent<font color="#000080">(</font>R<font color="#000080">);
  </font>R<font color="#000080">.</font>A<font color="#000080">.</font>X<font color="#000080">:= </font>R<font color="#000080">.</font>A<font color="#000080">.</font>X <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
  </font>R<font color="#000080">.</font>B<font color="#000080">.</font>X<font color="#000080">:= </font>R<font color="#000080">.</font>A<font color="#000080">.</font>X <font color="#000080">+ </font><font color="#800000">20</font><font color="#000080">;
  </font>R<font color="#000080">.</font>B<font color="#000080">.</font>Y<font color="#000080">:= </font>R<font color="#000080">.</font>A<font color="#000080">.</font>Y <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
  </font>Heap<font color="#000080">:= </font>New<font color="#000080">(</font>PHeap<font color="#000080">, </font>Init<font color="#000080">(</font>R<font color="#000080">));
  </font>Insert<font color="#000080">(</font>Heap<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>TMyApp<font color="#000080">.</font>Idle<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>Event<font color="#000080">: </font>TEvent<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font><font color="#008000"><i>{ TP/BP7: inherited Idle; }
  </i></font>TApplication<font color="#000080">.</font>Idle<font color="#000080">;
  </font>Date<font color="#000080">^.</font>Update<font color="#000080">;
  </font>Clock<font color="#000080">^.</font>Update<font color="#000080">;
  </font>Heap<font color="#000080">^.</font>Update<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>TMyApp<font color="#000080">.</font>HandleEvent<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>Event<font color="#000080">: </font>TEvent<font color="#000080">);
</font><font color="#FF0000"><b>begin
  </b></font><font color="#008000"><i>{ TP/BP7: inherited HandleEvent(Event); }
  </i></font>TApplication<font color="#000080">.</font>HandleEvent<font color="#000080">(</font>Event<font color="#000080">);
  </font><font color="#FF0000"><b>case </b></font>Event<font color="#000080">.</font>What <font color="#FF0000"><b>of
    </b></font>evCommand<font color="#000080">:
      </font><font color="#FF0000"><b>case </b></font>Event<font color="#000080">.</font>Command <font color="#FF0000"><b>of
        </b></font>cmWindow <font color="#000080">: </font>Window<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>TMyApp<font color="#000080">.</font>Window<font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>P<font color="#000080">: </font>PWindow<font color="#000080">;
  </font>R<font color="#000080">: </font>TRect<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Desktop<font color="#000080">^.</font>GetExtent<font color="#000080">(</font>R<font color="#000080">);
  </font>P<font color="#000080">:= </font>New<font color="#000080">(</font>PWindow<font color="#000080">, </font>Init<font color="#000080">(</font>R<font color="#000080">, </font><font color="#800000">'Memory-Eater'</font><font color="#000080">, </font><font color="#800000">0</font><font color="#000080">));
  </font>P<font color="#000080">^.</font>Options<font color="#000080">:= </font>P<font color="#000080">^.</font>Options <font color="#FF0000"><b>or </b></font>ofTileAble<font color="#000080">;
  </font>Desktop<font color="#000080">^.</font>Insert<font color="#000080">(</font>P<font color="#000080">);
  </font>Cascade<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>TMyApp<font color="#000080">.</font>InitStatusLine<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>R<font color="#000080">: </font>TRect<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>GetExtent<font color="#000080">(</font>R<font color="#000080">);
  </font>R<font color="#000080">.</font>A<font color="#000080">.</font>Y<font color="#000080">:= </font>R<font color="#000080">.</font>B<font color="#000080">.</font>Y <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
  </font>New<font color="#000080">(</font>StatusLine<font color="#000080">, </font>Init<font color="#000080">(</font>R<font color="#000080">,
    </font>NewStatusDef<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">$FFFF</font><font color="#000080">,
      </font>NewStatusKey<font color="#000080">(</font><font color="#800000">'~Alt-X~ Exit'</font><font color="#000080">,               </font>kbAltX<font color="#000080">,  </font>cmQuit<font color="#000080">,
      </font>NewStatusKey<font color="#000080">(</font><font color="#800000">'~F3~ Open Window'</font><font color="#000080">,           </font>kbF3<font color="#000080">,    </font>cmWindow<font color="#000080">,
      </font>NewStatusKey<font color="#000080">(</font><font color="#800000">''</font><font color="#000080">,                           </font>kbAltF3<font color="#000080">, </font>cmClose<font color="#000080">,
      </font><font color="#FF0000"><b>nil</b></font><font color="#000080">))),
    </font><font color="#FF0000"><b>nil</b></font><font color="#000080">)));
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>var
  </b></font>MyApp<font color="#000080">: </font>TMyApp<font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>MyApp<font color="#000080">.</font>Init<font color="#000080">;
  </font>MyApp<font color="#000080">.</font>Run<font color="#000080">;
  </font>MyApp<font color="#000080">.</font>Done<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font><font color="#008000"><i>{ -------------------- DEMO -------------- CUT HERE ------------ }
</i></font><font color="#FF0000"><b>program </b></font>XTest2<font color="#000080">;

</font><font color="#008000"><i>{ usage of TInfoWindow defined in Unit XVIEWS }

</i></font><font color="#FF0000"><b>uses </b></font>Drivers<font color="#000080">, </font>Objects<font color="#000080">, </font>App<font color="#000080">, </font>Views<font color="#000080">, </font>XViews<font color="#000080">;

</font><font color="#FF0000"><b>type
  </b></font>PMyApp <font color="#000080">= ^</font>TMyApp<font color="#000080">;
  </font>TMyApp <font color="#000080">= </font><font color="#FF0000"><b>object</b></font><font color="#000080">(</font>TApplication<font color="#000080">)
      </font>Info<font color="#000080">: </font>PInfoWindow<font color="#000080">;
    </font><font color="#FF0000"><b>constructor </b></font>Init<font color="#000080">;
    </font><font color="#FF0000"><b>procedure </b></font>Idle<font color="#000080">; </font><font color="#FF0000"><b>virtual</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>constructor </b></font>TMyApp<font color="#000080">.</font>Init<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>R<font color="#000080">: </font>TRect<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font><font color="#008000"><i>{ TP/BP7: inherited Init; }
  </i></font>TApplication<font color="#000080">.</font>Init<font color="#000080">;

  </font>R<font color="#000080">.</font>Assign<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
  </font>Date<font color="#000080">:= </font>New<font color="#000080">(</font>PDate<font color="#000080">, </font>Init<font color="#000080">(</font>R<font color="#000080">));
  </font>Date<font color="#000080">^.</font>Hide<font color="#000080">;
  </font>Insert<font color="#000080">(</font>Date<font color="#000080">);

  </font>Clock<font color="#000080">:= </font>New<font color="#000080">(</font>PClock<font color="#000080">, </font>Init<font color="#000080">(</font>R<font color="#000080">));
  </font>Clock<font color="#000080">^.</font>Hide<font color="#000080">;
  </font>Insert<font color="#000080">(</font>Clock<font color="#000080">);

  </font>Heap<font color="#000080">:= </font>New<font color="#000080">(</font>PHeap<font color="#000080">, </font>Init<font color="#000080">(</font>R<font color="#000080">));
  </font>Heap<font color="#000080">^.</font>Hide<font color="#000080">;
  </font>Insert<font color="#000080">(</font>Heap<font color="#000080">);

  </font>R<font color="#000080">.</font>Assign<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">35</font><font color="#000080">,</font><font color="#800000">8</font><font color="#000080">);
  </font>Info<font color="#000080">:= </font>New<font color="#000080">(</font>PInfoWindow<font color="#000080">, </font>Init<font color="#000080">(</font>R<font color="#000080">));
  </font>Info<font color="#000080">^.</font>Options<font color="#000080">:= </font>Info<font color="#000080">^.</font>Options <font color="#FF0000"><b>or </b></font>ofCentered<font color="#000080">;
  </font>Insert<font color="#000080">(</font>Info<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>TMyApp<font color="#000080">.</font>Idle<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>Event<font color="#000080">: </font>TEvent<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font><font color="#008000"><i>{ TP/BP7: inherited Idle; }
  </i></font>TApplication<font color="#000080">.</font>Idle<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>assigned<font color="#000080">(</font>Date<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>Date<font color="#000080">^.</font>Update<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>assigned<font color="#000080">(</font>Clock<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>Clock<font color="#000080">^.</font>Update<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>assigned<font color="#000080">(</font>Heap<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>Heap<font color="#000080">^.</font>Update<font color="#000080">;
  </font>Info<font color="#000080">^.</font>Redraw<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>var
  </b></font>MyApp<font color="#000080">: </font>TMyApp<font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>MyApp<font color="#000080">.</font>Init<font color="#000080">;
  </font>MyApp<font color="#000080">.</font>Run<font color="#000080">;
  </font>MyApp<font color="#000080">.</font>Done<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font><font color="#008000"><i>{ -------------------- DEMO -------------- CUT HERE ------------ }
</i></font><font color="#FF0000"><b>program </b></font>XTest3<font color="#000080">;

</font><font color="#008000"><i>{ usage of TBigClock defined in Unit XVIEWS }

</i></font><font color="#FF0000"><b>uses </b></font>Drivers<font color="#000080">, </font>Objects<font color="#000080">, </font>App<font color="#000080">, </font>Menus<font color="#000080">, </font>Views<font color="#000080">, </font>XViews<font color="#000080">;

</font><font color="#FF0000"><b>const
  </b></font>cmToggle <font color="#000080">= </font><font color="#800000">1000</font><font color="#000080">;

</font><font color="#FF0000"><b>type
  </b></font>PMyApp <font color="#000080">= ^</font>TMyApp<font color="#000080">;
  </font>TMyApp <font color="#000080">= </font><font color="#FF0000"><b>object</b></font><font color="#000080">(</font>TApplication<font color="#000080">)
      </font>BigClock<font color="#000080">: </font>PBigClock<font color="#000080">;
    </font><font color="#FF0000"><b>constructor </b></font>Init<font color="#000080">;
    </font><font color="#FF0000"><b>procedure </b></font>InitStatusLine<font color="#000080">; </font><font color="#FF0000"><b>virtual</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>procedure </b></font>HandleEvent<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>Event<font color="#000080">: </font>TEvent<font color="#000080">); </font><font color="#FF0000"><b>virtual</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>procedure </b></font>Idle<font color="#000080">; </font><font color="#FF0000"><b>virtual</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>constructor </b></font>TMyApp<font color="#000080">.</font>Init<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>P<font color="#000080">: </font>TPoint<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font><font color="#008000"><i>{ TP/BP7: inherited Init; }
  </i></font>TApplication<font color="#000080">.</font>Init<font color="#000080">;
  </font>P<font color="#000080">.</font>X<font color="#000080">:= </font><font color="#800000">15</font><font color="#000080">; </font>P<font color="#000080">.</font>Y<font color="#000080">:= </font><font color="#800000">9</font><font color="#000080">;
  </font>BigClock<font color="#000080">:= </font>new<font color="#000080">(</font>PBigClock<font color="#000080">, </font>Init<font color="#000080">(</font>P<font color="#000080">, </font>true<font color="#000080">));
  </font>Insert<font color="#000080">(</font>BigClock<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>TMyApp<font color="#000080">.</font>InitStatusLine<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>R<font color="#000080">: </font>TRect<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>GetExtent<font color="#000080">(</font>R<font color="#000080">);
  </font>R<font color="#000080">.</font>A<font color="#000080">.</font>Y<font color="#000080">:= </font>R<font color="#000080">.</font>B<font color="#000080">.</font>Y <font color="#000080">- </font><font color="#800000">1</font><font color="#000080">;
  </font>New<font color="#000080">(</font>StatusLine<font color="#000080">, </font>Init<font color="#000080">(</font>R<font color="#000080">,
    </font>NewStatusDef<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">$FFFF</font><font color="#000080">,
      </font>NewStatusKey<font color="#000080">(</font><font color="#800000">'~Alt-X~ Exit'</font><font color="#000080">,            </font>kbAltX<font color="#000080">, </font>cmQuit<font color="#000080">,
      </font>NewStatusKey<font color="#000080">(</font><font color="#800000">'~F2~ Toggle Background'</font><font color="#000080">,  </font>kbF2<font color="#000080">,   </font>cmToggle<font color="#000080">,
      </font><font color="#FF0000"><b>nil</b></font><font color="#000080">)),
    </font><font color="#FF0000"><b>nil</b></font><font color="#000080">)));
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>TMyApp<font color="#000080">.</font>HandleEvent<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>Event<font color="#000080">: </font>TEvent<font color="#000080">);
</font><font color="#FF0000"><b>begin
  </b></font><font color="#008000"><i>{ TP/BP7: inherited HandleEvent(Event); }
  </i></font>TApplication<font color="#000080">.</font>HandleEvent<font color="#000080">(</font>Event<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>Event<font color="#000080">.</font>What <font color="#000080">= </font>evCommand <font color="#FF0000"><b>then
    if </b></font>Event<font color="#000080">.</font>Command <font color="#000080">= </font>cmToggle <font color="#FF0000"><b>then
      Message</b></font><font color="#000080">(</font>BigClock<font color="#000080">, </font>evBroadCast<font color="#000080">, </font>cmChangeBack<font color="#000080">, </font><font color="#FF0000"><b>nil</b></font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>TMyApp<font color="#000080">.</font>Idle<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>Event<font color="#000080">: </font>TEvent<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font><font color="#008000"><i>{ TP/BP7: inherited Idle; }
  </i></font>TApplication<font color="#000080">.</font>Idle<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>assigned<font color="#000080">(</font>BigClock<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>BigClock<font color="#000080">^.</font>Update<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>var
  </b></font>MyApp<font color="#000080">: </font>TMyApp<font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>MyApp<font color="#000080">.</font>Init<font color="#000080">;
  </font>MyApp<font color="#000080">.</font>Run<font color="#000080">;
  </font>MyApp<font color="#000080">.</font>Done<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to OOP SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0088.PAS">Original</a><b>]</b></p></body>
</html>
