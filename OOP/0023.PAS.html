<html>
<head><title> "Dynamic OPP Box Object" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to OOP SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0023.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>program </b></font>Dynamic_Object_Demo<font color="#000080">;

 </font><font color="#008000"><i>{ DYN-DEMO.PAS }

</i></font><font color="#FF0000"><b>uses </b></font>Crt<font color="#000080">, </font>Dos<font color="#000080">;

</font><font color="#FF0000"><b>type
   </b></font>ScrPtr <font color="#000080">= ^</font>SaveScreen<font color="#000080">;
   </font>BoxPtr <font color="#000080">= ^</font>ReportBox<font color="#000080">;
   </font>SaveScreen <font color="#000080">= </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">80</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">25</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>word<font color="#000080">;
   </font>ReportBox <font color="#000080">= </font><font color="#FF0000"><b>object
      </b></font>SavPtr<font color="#000080">: </font>ScrPtr<font color="#000080">;  </font>FColor<font color="#000080">, </font>BColor<font color="#000080">: </font>byte<font color="#000080">;
      </font>WPosX<font color="#000080">, </font>WPosY<font color="#000080">, </font>WSizeX<font color="#000080">, </font>WSizeY<font color="#000080">: </font>integer<font color="#000080">;
      </font><font color="#FF0000"><b>constructor </b></font>Init<font color="#000080">( </font>PtX<font color="#000080">, </font>PtY<font color="#000080">, </font>Width<font color="#000080">, </font>Height<font color="#000080">,
                         </font>C1<font color="#000080">, </font>C2 <font color="#000080">: </font>integer <font color="#000080">);
      </font><font color="#FF0000"><b>destructor  </b></font>Done<font color="#000080">;
      </font><font color="#FF0000"><b>procedure   </b></font>Draw<font color="#000080">;
      </font><font color="#FF0000"><b>procedure   </b></font>Erase<font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{==========================================}
{ implementation for object type ReportBox }
{==========================================}

</i></font><font color="#FF0000"><b>constructor </b></font>ReportBox<font color="#000080">.</font>Init<font color="#000080">;
</font><font color="#FF0000"><b>var
   </b></font>i<font color="#000080">, </font>j<font color="#000080">: </font>integer<font color="#000080">;
   </font>Regs<font color="#000080">: </font>Registers<font color="#000080">;
</font><font color="#FF0000"><b>begin
   </b></font>WPosX  <font color="#000080">:= </font>PtX<font color="#000080">;
   </font>WPosY  <font color="#000080">:= </font>PtY<font color="#000080">;
   </font>WSizeX <font color="#000080">:= </font>Width<font color="#000080">;
   </font>WSizeY <font color="#000080">:= </font>Height<font color="#000080">;
   </font>FColor <font color="#000080">:= </font>C1<font color="#000080">;
   </font>BColor <font color="#000080">:= </font>C2<font color="#000080">;
   </font>New<font color="#000080">( </font>SavPtr <font color="#000080">); </font><font color="#008000"><i>{ allocate memory for array }
   </i></font>window<font color="#000080">( </font>WPosX<font color="#000080">, </font>WPosY<font color="#000080">, </font>WPosX<font color="#000080">+</font>WSizeX<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">,
                         </font>WPosY<font color="#000080">+</font>WSizeY<font color="#000080">-</font><font color="#800000">1 </font><font color="#000080">);

  </font><font color="#008000"><i>{read character and attribute on video page 0}

   </i></font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>WSizeX <font color="#FF0000"><b>do
      for </b></font>j <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>WSizeY <font color="#FF0000"><b>do
      begin
         </b></font>gotoxy<font color="#000080">(</font>i<font color="#000080">,</font>j<font color="#000080">);
         </font>Regs<font color="#000080">.</font>AH <font color="#000080">:= </font><font color="#800000">08</font><font color="#000080">;
         </font>Regs<font color="#000080">.</font>BH <font color="#000080">:= </font><font color="#800000">00</font><font color="#000080">;
         </font>intr<font color="#000080">( </font><font color="#800000">$10</font><font color="#000080">, </font>Regs <font color="#000080">);
         </font>SavPtr<font color="#000080">^[</font>i<font color="#000080">,</font>j<font color="#000080">] := </font>Regs<font color="#000080">.</font>AX<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font>Draw<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>destructor </b></font>ReportBox<font color="#000080">.</font>Done<font color="#000080">;
</font><font color="#FF0000"><b>begin
   </b></font>Erase<font color="#000080">;
   </font>Dispose<font color="#000080">( </font>SavPtr <font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>ReportBox<font color="#000080">.</font>Erase<font color="#000080">;
</font><font color="#FF0000"><b>var
   </b></font>i<font color="#000080">, </font>j <font color="#000080">: </font>integer<font color="#000080">;
   </font>Regs <font color="#000080">: </font>Registers<font color="#000080">;
</font><font color="#FF0000"><b>begin
   </b></font>window<font color="#000080">( </font>WPosX<font color="#000080">, </font>WPosY<font color="#000080">,
           </font>WPosX<font color="#000080">+</font>WSizeX<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">, </font>WPosY<font color="#000080">+</font>WSizeY<font color="#000080">-</font><font color="#800000">1 </font><font color="#000080">);
   </font>ClrScr<font color="#000080">;   </font><font color="#008000"><i>{ inner window }

{ Write character and attr on video page 0 }

{ AL stores the character value }
{ BL stores the attribute value }
{ CL stores the repititions value (1) }

   </i></font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>WSizeX <font color="#FF0000"><b>do
      for </b></font>j <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>WSizeY <font color="#FF0000"><b>do
      begin
         </b></font>gotoxy<font color="#000080">(</font>i<font color="#000080">,</font>j<font color="#000080">);
         </font>Regs<font color="#000080">.</font>AH <font color="#000080">:= </font><font color="#800000">09</font><font color="#000080">;
         </font>Regs<font color="#000080">.</font>BH <font color="#000080">:= </font><font color="#800000">00</font><font color="#000080">;
         </font>Regs<font color="#000080">.</font>AL <font color="#000080">:= </font>lo<font color="#000080">( </font>SavPtr<font color="#000080">^[</font>i<font color="#000080">,</font>j<font color="#000080">] );
         </font>Regs<font color="#000080">.</font>BL <font color="#000080">:= </font>hi<font color="#000080">( </font>SavPtr<font color="#000080">^[</font>i<font color="#000080">,</font>j<font color="#000080">] );
         </font>Regs<font color="#000080">.</font>CL <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
         </font>intr<font color="#000080">( </font><font color="#800000">$10</font><font color="#000080">, </font>Regs <font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font>window<font color="#000080">( </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">80</font><font color="#000080">, </font><font color="#800000">25 </font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>ReportBox<font color="#000080">.</font>Draw<font color="#000080">;
</font><font color="#FF0000"><b>var
   </b></font>BoxStr <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">6</font><font color="#000080">];
   </font>i <font color="#000080">: </font>integer<font color="#000080">;
   </font>MemSize <font color="#000080">: </font>longint<font color="#000080">;
</font><font color="#FF0000"><b>begin
   </b></font>TextColor<font color="#000080">( </font>FColor <font color="#000080">);
   </font>TextBackground<font color="#000080">( </font>BColor <font color="#000080">);
   </font>BoxStr <font color="#000080">:= </font><font color="#800000">#$C9 </font><font color="#000080">+ </font><font color="#800000">#$CD </font><font color="#000080">+ </font><font color="#800000">#$BB </font><font color="#000080">+
             </font><font color="#800000">#$BA </font><font color="#000080">+</font><font color="#800000">#$BC </font><font color="#000080">+ </font><font color="#800000">#$C8</font><font color="#000080">;
   </font>window<font color="#000080">( </font>WPosX<font color="#000080">, </font>WPosY<font color="#000080">,
           </font>WPosX<font color="#000080">+</font>WSizeX<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">, </font>WPosY<font color="#000080">+</font>WSizeY<font color="#000080">-</font><font color="#800000">1 </font><font color="#000080">);
   </font>ClrScr<font color="#000080">;
   </font>gotoxy<font color="#000080">( </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1 </font><font color="#000080">);           </font>write<font color="#000080">( </font>BoxStr<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] );
   </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>WSizeX<font color="#000080">-</font><font color="#800000">2 </font><font color="#FF0000"><b>do </b></font>write<font color="#000080">( </font>BoxStr<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">] );
                             </font>write<font color="#000080">( </font>BoxStr<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">] );
   </font>gotoxy<font color="#000080">( </font><font color="#800000">1</font><font color="#000080">, </font>WSizeY<font color="#000080">-</font><font color="#800000">1 </font><font color="#000080">);    </font>write<font color="#000080">( </font>BoxStr<font color="#000080">[</font><font color="#800000">6</font><font color="#000080">] );
   </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>WSizeX<font color="#000080">-</font><font color="#800000">2 </font><font color="#FF0000"><b>do </b></font>write<font color="#000080">( </font>BoxStr<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">] );
                             </font>write<font color="#000080">( </font>BoxStr<font color="#000080">[</font><font color="#800000">5</font><font color="#000080">] );
   </font>gotoxy<font color="#000080">( </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">2 </font><font color="#000080">);
   </font>InsLine<font color="#000080">;
   </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">2 </font><font color="#FF0000"><b>to </b></font>WSizeY<font color="#000080">-</font><font color="#800000">1 </font><font color="#FF0000"><b>do
   begin
      </b></font>gotoxy<font color="#000080">( </font><font color="#800000">1</font><font color="#000080">, </font>i <font color="#000080">);      </font>write<font color="#000080">( </font>BoxStr<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">] );
      </font>gotoxy<font color="#000080">( </font>WSizeX<font color="#000080">, </font>i <font color="#000080">); </font>write<font color="#000080">( </font>BoxStr<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">] );
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font>window<font color="#000080">( </font>WPosX<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">, </font>WPosY<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,
           </font>WPosX<font color="#000080">+</font>WSizeX<font color="#000080">-</font><font color="#800000">2</font><font color="#000080">, </font>WPosY<font color="#000080">+</font>WSizeY<font color="#000080">-</font><font color="#800000">2 </font><font color="#000080">);
   </font>ClrScr<font color="#000080">;
   </font>MemSize <font color="#000080">:= </font>MemAvail<font color="#000080">;
   </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">30 </font><font color="#FF0000"><b>do
      </b></font>write<font color="#000080">(</font><font color="#800000">'Memory now = '</font><font color="#000080">,</font>MemSize<font color="#000080">,</font><font color="#800000">' bytes! '</font><font color="#000080">);
   </font>window<font color="#000080">( </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">80</font><font color="#000080">, </font><font color="#800000">25 </font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ **** end of methods **** }

</i></font><font color="#FF0000"><b>var
   </b></font>Box <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">5</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>BoxPtr<font color="#000080">;
   </font>MemSize <font color="#000080">: </font>longint<font color="#000080">;
   </font>i <font color="#000080">: </font>integer<font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>Prompt<font color="#000080">;
</font><font color="#FF0000"><b>begin
   </b></font>gotoxy<font color="#000080">( </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1 </font><font color="#000080">); </font>clreol<font color="#000080">;
   </font>write<font color="#000080">(</font><font color="#800000">'Memory now = '</font><font color="#000080">, </font>MemAvail<font color="#000080">,
         </font><font color="#800000">'. Press ENTER to continue '</font><font color="#000080">);
   </font>readln<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
   </b></font>ClrScr<font color="#000080">;
   </font>TextColor<font color="#000080">( </font>White <font color="#000080">);
   </font>TextBackground<font color="#000080">( </font>Black <font color="#000080">);
   </font>MemSize <font color="#000080">:= </font>MemAvail<font color="#000080">;
   </font><font color="#FF0000"><b>for </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">100 </font><font color="#FF0000"><b>do
      </b></font>write<font color="#000080">(</font><font color="#800000">' Initial memory available = '</font><font color="#000080">,
              </font>MemSize<font color="#000080">, </font><font color="#800000">' bytes! ' </font><font color="#000080">);
   </font>gotoxy<font color="#000080">( </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1 </font><font color="#000080">); </font>clreol<font color="#000080">;
   </font>write<font color="#000080">(</font><font color="#800000">'Press ENTER to continue '</font><font color="#000080">);
   </font>readln<font color="#000080">;
   </font>Box<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] := </font>New<font color="#000080">( </font>BoxPtr<font color="#000080">, </font>Init<font color="#000080">(  </font><font color="#800000">5</font><font color="#000080">, </font><font color="#800000">12</font><font color="#000080">, </font><font color="#800000">30</font><font color="#000080">, </font><font color="#800000">10</font><font color="#000080">,
                  </font>LightRed<font color="#000080">, </font>Black <font color="#000080">) );
   </font>gotoxy<font color="#000080">( </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1 </font><font color="#000080">); </font>clreol<font color="#000080">;
   </font>write<font color="#000080">(</font><font color="#800000">'Memory now = '</font><font color="#000080">, </font>MemAvail<font color="#000080">,
         </font><font color="#800000">'. Press ENTER to continue '</font><font color="#000080">);
   </font>readln<font color="#000080">;
   </font>Box<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">] := </font>New<font color="#000080">( </font>BoxPtr<font color="#000080">, </font>Init<font color="#000080">( </font><font color="#800000">40</font><font color="#000080">,  </font><font color="#800000">5</font><font color="#000080">, </font><font color="#800000">30</font><font color="#000080">, </font><font color="#800000">10</font><font color="#000080">,
                  </font>LightGreen<font color="#000080">, </font>Blue <font color="#000080">) );
   </font>gotoxy<font color="#000080">( </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1 </font><font color="#000080">); </font>clreol<font color="#000080">;
   </font>write<font color="#000080">(</font><font color="#800000">'Memory now = '</font><font color="#000080">, </font>MemAvail<font color="#000080">,
         </font><font color="#800000">'. Press ENTER to continue '</font><font color="#000080">);
   </font>readln<font color="#000080">;
   </font>Dispose<font color="#000080">( </font>Box<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">], </font>Done <font color="#000080">);
   </font>Dispose<font color="#000080">( </font>Box<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">], </font>Done <font color="#000080">);
   </font>gotoxy<font color="#000080">( </font><font color="#800000">1</font><font color="#000080">, </font><font color="#800000">1 </font><font color="#000080">); </font>clreol<font color="#000080">;
   </font>write<font color="#000080">( </font><font color="#800000">'Final memory (after release) = '</font><font color="#000080">,
           </font>MemAvail<font color="#000080">, </font><font color="#800000">' bytes...'</font><font color="#000080">);
   </font>readln<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to OOP SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0023.PAS">Original</a><b>]</b></p></body>
</html>
