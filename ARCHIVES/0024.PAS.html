<html>
<head><title> "Text to Binary Zip" by JOHN HOWARD</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to ARCHIVES SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0024.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
Sadly, the 3d.zip file was corrupt again.  Please use my programs here and
generate a DATA.HEX include file.  Your post had lines that were uneven and
obviously missing data.  An include file made by ZIP2HEX will be even and
verifiable.  HEX2ZIP will create the original binary file renamed BINARY.ZIP.
I noticed your zip file was less than 20k and its source code contents were
over 100k.  The include file will always be four times the size of the zip due
to formatting with commas and dollar symbols.  A smarter version should use
LONGINTS instead of BYTES to gain a 60% savings.
{ These programs can be added to SWAG }
</i></font><font color="#FF0000"><b>PROGRAM </b></font>Hex2Zip<font color="#000080">;
</font><font color="#008000"><i>{ Converts hex data file less than 64k in size into binary equivalent }
{ 1994 Freeware v1.2  Hex-to-Binary file convertor by John Howard }
{$i DATA.HEX}
(*  layout of DATA.HEX include file is
  CONST
       { Size is equal to FILESIZE(BINARY) }
       HEX_DATA : ARRAY[1..Size] OF BYTE = (
             { i.e. hex data such as $00,$A2,$FF,.. } );
*)
</i></font><font color="#FF0000"><b>VAR
   </b></font>BINARY <font color="#000080">: </font><font color="#FF0000"><b>FILE</b></font><font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
    </b></font>ASSIGN<font color="#000080">(</font>BINARY<font color="#000080">,</font><font color="#800000">'BINARY.ZIP'</font><font color="#000080">);
    </font>REWRITE<font color="#000080">(</font>BINARY<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
    </font>BLOCKWRITE<font color="#000080">(</font>BINARY<font color="#000080">,</font>HEX_DATA<font color="#000080">,</font>SIZEOF<font color="#000080">(</font>HEX_DATA<font color="#000080">));
    </font>CLOSE<font color="#000080">(</font>BINARY<font color="#000080">);
    </font>WRITELN<font color="#000080">(</font><font color="#800000">'Data was converted to your file called BINARY.ZIP'</font><font color="#000080">);
</font><font color="#FF0000"><b>END</b></font><font color="#000080">.

</font><font color="#FF0000"><b>PROGRAM </b></font>Zip2Hex<font color="#000080">;
</font><font color="#008000"><i>{ Converts binary file less than 64k in size into hex data file equivalent }
{ 1994 Freeware v1.2  Binary-to-Hex data convertor by John Howard }

</i></font><font color="#FF0000"><b>FUNCTION </b></font>HexByte<font color="#000080">(</font>B <font color="#000080">: </font>Byte<font color="#000080">) : </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
</font><font color="#FF0000"><b>CONST
  </b></font>HexDigits <font color="#000080">: </font><font color="#FF0000"><b>ARRAY</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">15</font><font color="#000080">] </font><font color="#FF0000"><b>OF </b></font>Char <font color="#000080">= </font><font color="#800000">'0123456789ABCDEF'</font><font color="#000080">;
</font><font color="#FF0000"><b>VAR </b></font>Temp <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  </b></font>Temp<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">] := </font><font color="#800000">#2</font><font color="#000080">;
  </font>Temp<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] := </font>HexDigits<font color="#000080">[</font>B <font color="#FF0000"><b>SHR </b></font><font color="#800000">4</font><font color="#000080">];
  </font>Temp<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">] := </font>HexDigits<font color="#000080">[</font>B <font color="#FF0000"><b>AND </b></font><font color="#800000">$F</font><font color="#000080">];
  </font>HexByte <font color="#000080">:= </font>Temp<font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">;

</font><font color="#FF0000"><b>VAR
   </b></font>BINARY <font color="#000080">: </font><font color="#FF0000"><b>FILE</b></font><font color="#000080">;
   </font>HEXFILE <font color="#000080">: </font>TEXT<font color="#000080">;
   </font>Hex_Byte <font color="#000080">: </font>BYTE<font color="#000080">;
   </font>Size <font color="#000080">: </font>LONGINT<font color="#000080">;
   </font>i <font color="#000080">: </font>WORD<font color="#000080">;
</font><font color="#FF0000"><b>BEGIN
  IF </b></font>ParamStr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">) = </font><font color="#800000">'?' </font><font color="#FF0000"><b>THEN
    BEGIN
      </b></font>WRITELN<font color="#000080">(</font><font color="#800000">'Howard International, P.O. Box 34633, NKC, MO 64116 USA'</font><font color="#000080">);
      </font>WRITELN<font color="#000080">(</font><font color="#800000">'1994 Freeware v1.2  Binary-to-Hex data convertor'</font><font color="#000080">);
      </font>WRITELN<font color="#000080">(</font><font color="#800000">'Syntax:  zip2hex.exe  [filename]'</font><font color="#000080">);
      </font>WRITELN<font color="#000080">(</font><font color="#800000">'Filename is optional, the default is BINARY.ZIP'</font><font color="#000080">);
      </font>Halt<font color="#000080">;
    </font><font color="#FF0000"><b>END</b></font><font color="#000080">;

    </font><font color="#FF0000"><b>IF </b></font>ParamCount <font color="#000080">= </font><font color="#800000">0 </font><font color="#FF0000"><b>THEN
       </b></font>ASSIGN<font color="#000080">(</font>BINARY<font color="#000080">,</font><font color="#800000">'BINARY.ZIP'</font><font color="#000080">)
    </font><font color="#FF0000"><b>ELSE
       </b></font>ASSIGN<font color="#000080">(</font>BINARY<font color="#000080">,</font>ParamStr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">));

    </font>RESET<font color="#000080">(</font>BINARY<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
    </font>ASSIGN<font color="#000080">(</font>HEXFILE<font color="#000080">,</font><font color="#800000">'DATA.HEX'</font><font color="#000080">);
    </font>REWRITE<font color="#000080">(</font>HEXFILE<font color="#000080">);

    </font>Size <font color="#000080">:= </font>FILESIZE<font color="#000080">(</font>BINARY<font color="#000080">);
    </font>WRITELN<font color="#000080">(</font>HEXFILE<font color="#000080">, </font><font color="#800000">'CONST HEX_DATA : ARRAY[1..'</font><font color="#000080">, </font>Size<font color="#000080">,</font><font color="#800000">'] OF BYTE = ('</font><font color="#000080">);

    </font>BLOCKREAD<font color="#000080">(</font>BINARY<font color="#000080">,</font>Hex_Byte<font color="#000080">,</font>SIZEOF<font color="#000080">(</font>Hex_Byte<font color="#000080">));
    </font>WRITE<font color="#000080">(</font>HEXFILE<font color="#000080">, </font><font color="#800000">' $'</font><font color="#000080">);
    </font>WRITE<font color="#000080">(</font>HEXFILE<font color="#000080">,</font>HEXBYTE<font color="#000080">(</font>Hex_Byte<font color="#000080">));
    </font><font color="#FF0000"><b>FOR </b></font>i <font color="#000080">:= </font><font color="#800000">2 </font><font color="#FF0000"><b>TO </b></font>Size <font color="#FF0000"><b>DO
      BEGIN
        </b></font>BLOCKREAD<font color="#000080">(</font>BINARY<font color="#000080">,</font>Hex_Byte<font color="#000080">,</font>SIZEOF<font color="#000080">(</font>Hex_Byte<font color="#000080">));
        </font>WRITE<font color="#000080">(</font>HEXFILE<font color="#000080">, </font><font color="#800000">',$'</font><font color="#000080">);
        </font>WRITE<font color="#000080">(</font>HEXFILE<font color="#000080">,</font>HEXBYTE<font color="#000080">(</font>Hex_Byte<font color="#000080">));
        </font><font color="#FF0000"><b>IF </b></font><font color="#000080">(</font>i <font color="#FF0000"><b>MOD </b></font><font color="#800000">16 </font><font color="#000080">= </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>THEN </b></font>WRITELN<font color="#000080">(</font>HEXFILE<font color="#000080">);
      </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
    </font>WRITELN<font color="#000080">(</font>HEXFILE<font color="#000080">, </font><font color="#800000">');'</font><font color="#000080">);

    </font>CLOSE<font color="#000080">(</font>HEXFILE<font color="#000080">);
    </font>CLOSE<font color="#000080">(</font>BINARY<font color="#000080">);
    </font>WRITELN<font color="#000080">(</font><font color="#800000">'Your BINARY ZIP was converted to DATA.HEX include file.'</font><font color="#000080">);
</font><font color="#FF0000"><b>END</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to ARCHIVES SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0024.PAS">Original</a><b>]</b></p></body>
</html>
