<html>
<head><title> "Test String Compression" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to ARCHIVES SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0009.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#FF0000"><b>Program </b></font>TestComp<font color="#000080">;  </font><font color="#008000"><i>{ tests Compression }

{ kludgy test of Compress Unit }

</i></font><font color="#FF0000"><b>Uses </b></font>Crt<font color="#000080">, </font>Dos<font color="#000080">, </font>Compress<font color="#000080">;

</font><font color="#FF0000"><b>Const
  </b></font>NumofStrings <font color="#000080">= </font><font color="#800000">5</font><font color="#000080">;

</font><font color="#FF0000"><b>Var
  </b></font>ch <font color="#000080">: </font>Char<font color="#000080">;
  </font>LongestStringLength<font color="#000080">,</font>i<font color="#000080">,</font>j<font color="#000080">,</font>len <font color="#000080">: </font>Integer<font color="#000080">;
  </font>Textfname<font color="#000080">,</font>Compfname <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
  </font>TextFile <font color="#000080">: </font>Text<font color="#000080">;
  </font>ByteFile <font color="#000080">: </font><font color="#FF0000"><b>File</b></font><font color="#000080">;
  </font>CompArr <font color="#000080">: </font>tCompressedStringArray<font color="#000080">;
  </font>st <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font>NumofStrings<font color="#000080">] </font><font color="#FF0000"><b>of String</b></font><font color="#000080">;
  </font>Rec <font color="#000080">: </font>SearchRec<font color="#000080">;
  </font>BigArr <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">5000</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte<font color="#000080">;
  </font>Arr <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font>NumofStrings<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>tCompressedStringArray<font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>Writeln<font color="#000080">(</font><font color="#800000">'note:  No I/O checking in this test.'</font><font color="#000080">);
  </font>Write<font color="#000080">(</font><font color="#800000">'Test &lt;C&gt;ompress or &lt;U&gt;nCompress? '</font><font color="#000080">);
  </font><font color="#FF0000"><b>Repeat
    </b></font>ch <font color="#000080">:= </font>upCase<font color="#000080">(</font>ReadKey<font color="#000080">);
  </font><font color="#FF0000"><b>Until </b></font>ch <font color="#FF0000"><b>in </b></font><font color="#000080">[</font><font color="#800000">'C'</font><font color="#000080">,</font><font color="#800000">'U'</font><font color="#000080">,</font><font color="#800000">#27</font><font color="#000080">];
  </font><font color="#FF0000"><b>if </b></font>ch <font color="#000080">= </font><font color="#800000">#27 </font><font color="#FF0000"><b>then </b></font>halt<font color="#000080">;
  </font>Writeln<font color="#000080">(</font>ch<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>ch <font color="#000080">= </font><font color="#800000">'C' </font><font color="#FF0000"><b>then begin
    </b></font>Writeln<font color="#000080">(</font><font color="#800000">'Enter '</font><font color="#000080">,</font>NumofStrings<font color="#000080">,</font><font color="#800000">' Strings:'</font><font color="#000080">);
    </font>LongestStringLength <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
    </font><font color="#FF0000"><b>For </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>NumofStrings <font color="#FF0000"><b>do begin
      </b></font>Write<font color="#000080">(</font>i<font color="#000080">,</font><font color="#800000">': '</font><font color="#000080">);
      </font>readln<font color="#000080">(</font>st<font color="#000080">[</font>i<font color="#000080">]);
      </font><font color="#FF0000"><b>if </b></font>length<font color="#000080">(</font>st<font color="#000080">[</font>i<font color="#000080">]) &gt; </font>LongestStringLength <font color="#FF0000"><b>then
        </b></font>LongestStringLength <font color="#000080">:= </font>length<font color="#000080">(</font>st<font color="#000080">[</font>i<font color="#000080">]);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>Writeln<font color="#000080">;
    </font>Writeln<font color="#000080">(</font><font color="#800000">'Enter name of File to store unCompressed Strings in.'</font><font color="#000080">);
    </font>Writeln<font color="#000080">(</font><font color="#800000">'ANY EXISTinG File With THIS NAME WILL BE OVERWRITTEN.'</font><font color="#000080">);
    </font>readln<font color="#000080">(</font>Textfname<font color="#000080">);
    </font>assign<font color="#000080">(</font>TextFile<font color="#000080">,</font>Textfname<font color="#000080">);
    </font>reWrite<font color="#000080">(</font>TextFile<font color="#000080">);
    </font><font color="#FF0000"><b>For </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>NumofStrings <font color="#FF0000"><b>do
      </b></font>Writeln<font color="#000080">(</font>TextFile<font color="#000080">,</font>st<font color="#000080">[</font>i<font color="#000080">]);
    </font>close<font color="#000080">(</font>TextFile<font color="#000080">);
    </font>Writeln<font color="#000080">;
    </font>Writeln<font color="#000080">(</font><font color="#800000">'Enter name of File to store Compressed Strings in.'</font><font color="#000080">);
    </font>Writeln<font color="#000080">(</font><font color="#800000">'ANY EXISTinG File With THIS NAME WILL BE OVERWRITTEN.'</font><font color="#000080">);
    </font>readln<font color="#000080">(</font>Compfname<font color="#000080">);
    </font>assign<font color="#000080">(</font>ByteFile<font color="#000080">,</font>Compfname<font color="#000080">);
    </font>reWrite<font color="#000080">(</font>ByteFile<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
    </font><font color="#FF0000"><b>For </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>NumofStrings <font color="#FF0000"><b>do begin
      </b></font>CompressString<font color="#000080">(</font>st<font color="#000080">[</font>i<font color="#000080">],</font>CompArr<font color="#000080">,</font>len<font color="#000080">);
      </font>blockWrite<font color="#000080">(</font>ByteFile<font color="#000080">,</font>CompArr<font color="#000080">,</font>len<font color="#000080">);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>close<font color="#000080">(</font>ByteFile<font color="#000080">);
    </font>FindFirst<font color="#000080">(</font>Textfname<font color="#000080">,</font>AnyFile<font color="#000080">,</font>Rec<font color="#000080">);
    </font>Writeln<font color="#000080">;
    </font>Writeln<font color="#000080">;
    </font>Writeln<font color="#000080">(</font><font color="#800000">'Size of Text File storing Strings: '</font><font color="#000080">,</font>Rec<font color="#000080">.</font>Size<font color="#000080">);
    </font>Writeln<font color="#000080">;
    </font>Writeln<font color="#000080">(</font><font color="#800000">'Using Typed Files, a File of Type String['</font><font color="#000080">,
             </font>LongestStringLength<font color="#000080">,
             </font><font color="#800000">'] would be necessary.'</font><font color="#000080">);
    </font>Writeln<font color="#000080">(</font><font color="#800000">'That would be '</font><font color="#000080">,
             (</font>LongestStringLength<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">)*</font>NumofStrings<font color="#000080">,
             </font><font color="#800000">' long, including length Bytes.'</font><font color="#000080">);
    </font>Writeln<font color="#000080">;
    </font>FindFirst<font color="#000080">(</font>Compfname<font color="#000080">,</font>AnyFile<font color="#000080">,</font>Rec<font color="#000080">);
    </font>Writeln<font color="#000080">(</font><font color="#800000">'Size of the Compressed File: '</font><font color="#000080">,</font>Rec<font color="#000080">.</font>Size<font color="#000080">);
    </font>Writeln<font color="#000080">;
    </font>Writeln<font color="#000080">(</font><font color="#800000">'Now erase the Text File, and run this Program again, choosing'</font><font color="#000080">);
    </font>Writeln<font color="#000080">(</font><font color="#800000">'&lt;U&gt;nCompress to show that the Compression retains all info.'</font><font color="#000080">);
  </font><font color="#FF0000"><b>end else begin                        </b></font><font color="#008000"><i>{ ch = 'U' }
    </i></font>Write<font color="#000080">(</font><font color="#800000">'Name of Compressed File: '</font><font color="#000080">);
    </font>readln<font color="#000080">(</font>Compfname<font color="#000080">);
    </font>assign<font color="#000080">(</font>ByteFile<font color="#000080">,</font>Compfname<font color="#000080">);
    </font>reset<font color="#000080">(</font>ByteFile<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
    </font>blockread<font color="#000080">(</font>ByteFile<font color="#000080">,</font>BigArr<font color="#000080">,</font>Filesize<font color="#000080">(</font>ByteFile<font color="#000080">));
    </font>close<font color="#000080">(</font>ByteFile<font color="#000080">);
    </font><font color="#FF0000"><b>For </b></font>j <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>NumofStrings <font color="#FF0000"><b>do begin
      </b></font>i <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
      </font><font color="#FF0000"><b>While </b></font>BigArr<font color="#000080">[</font>i<font color="#000080">] &lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>do </b></font>inc<font color="#000080">(</font>i<font color="#000080">);
      </font>move<font color="#000080">(</font>BigArr<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">],</font>Arr<font color="#000080">[</font>j<font color="#000080">],</font>i<font color="#000080">);
      </font>move<font color="#000080">(</font>BigArr<font color="#000080">[</font>i<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">],</font>BigArr<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">],</font>sizeof<font color="#000080">(</font>BigArr<font color="#000080">));
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>For </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>NumofStrings <font color="#FF0000"><b>do
      </b></font>st<font color="#000080">[</font>i<font color="#000080">] := </font>GetCompressedString<font color="#000080">(</font>Arr<font color="#000080">[</font>i<font color="#000080">]);
    </font><font color="#FF0000"><b>For </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>NumofStrings <font color="#FF0000"><b>do
      </b></font>Writeln<font color="#000080">(</font>st<font color="#000080">[</font>i<font color="#000080">]);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to ARCHIVES SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0009.PAS">Original</a><b>]</b></p></body>
</html>
