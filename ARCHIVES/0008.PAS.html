<html>
<head><title> "SHOW ARJ Archive Files" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to ARCHIVES SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0008.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#FF0000"><b>Program </b></font>ReadArj<font color="#000080">;
</font><font color="#FF0000"><b>Uses
 </b></font>Crt<font color="#000080">,
 </font>Search<font color="#000080">;

</font><font color="#FF0000"><b>Const
  </b></font>ArjID <font color="#000080">= </font><font color="#800000">#96#234</font><font color="#000080">;

</font><font color="#FF0000"><b>Type
  </b></font>Array10 <font color="#000080">= </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">10</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte<font color="#000080">;
  </font>Array12 <font color="#000080">= </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">12</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Char<font color="#000080">;

  </font>AFileRec <font color="#000080">= </font><font color="#FF0000"><b>Record
               </b></font>FileDate       <font color="#000080">: </font>LongInt<font color="#000080">;
               </font>CompressedSize <font color="#000080">: </font>LongInt<font color="#000080">;
               </font>originalSize   <font color="#000080">: </font>LongInt<font color="#000080">;
               </font>DudSpace       <font color="#000080">: </font>Array10<font color="#000080">;
               </font>FileName       <font color="#000080">: </font>Array12
             <font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font>Array60K <font color="#000080">= </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">61440</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte<font color="#000080">;

</font><font color="#FF0000"><b>Var
  </b></font>Buffer <font color="#000080">: </font>Array60K<font color="#000080">;

  </font>ArjFileRec <font color="#000080">: </font>AFileRec<font color="#000080">;

  </font>ArjFileSize<font color="#000080">,
  </font>ArjRecStart<font color="#000080">,
  </font>ArjRecStop<font color="#000080">,
  </font>Index<font color="#000080">,
  </font>Index1 <font color="#000080">: </font>LongInt<font color="#000080">;

  </font>ArjFile <font color="#000080">: </font><font color="#FF0000"><b>File</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>ClrScr<font color="#000080">;
  </font>fillChar<font color="#000080">(</font>Buffer<font color="#000080">, </font>sizeof<font color="#000080">(</font>Buffer<font color="#000080">), </font><font color="#800000">0</font><font color="#000080">);
  </font>fillChar<font color="#000080">(</font>ArjFileRec<font color="#000080">, </font>sizeof<font color="#000080">(</font>ArjFileRec<font color="#000080">), </font><font color="#800000">0</font><font color="#000080">);
  </font>ArjFileSize <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>ArjRecStart <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
  </font>ArjRecStop <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>assign<font color="#000080">(</font>ArjFile<font color="#000080">, </font><font color="#800000">'TEST.ARJ'</font><font color="#000080">);
  </font><font color="#008000"><i>{$I-}
  </i></font>reset<font color="#000080">(</font>ArjFile<font color="#000080">, </font><font color="#800000">1</font><font color="#000080">);
  </font><font color="#008000"><i>{$I+}
  </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>ioresult <font color="#000080">&lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
    begin
      </b></font>Writeln<font color="#000080">(</font><font color="#800000">' ERRor OPENinG TEST.ARJ'</font><font color="#000080">);
      </font>halt<font color="#000080">(</font><font color="#800000">255</font><font color="#000080">)
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>ArjFileSize <font color="#000080">:= </font>Filesize<font color="#000080">(</font>ArjFile<font color="#000080">);
  </font>Index <font color="#000080">:= </font>ArjFileSize <font color="#000080">- </font><font color="#800000">50</font><font color="#000080">;
  </font>blockread<font color="#000080">(</font>ArjFile<font color="#000080">, </font>Buffer<font color="#000080">, </font>Index<font color="#000080">);
  </font>close<font color="#000080">(</font>ArjFile<font color="#000080">);
  </font>Index1 <font color="#000080">:= </font><font color="#800000">50</font><font color="#000080">;
  </font>ArjFileRec<font color="#000080">.</font>Filename <font color="#000080">:= </font><font color="#800000">'            '</font><font color="#000080">;
  </font><font color="#FF0000"><b>While </b></font><font color="#000080">((</font>Index1 <font color="#000080">+ </font><font color="#800000">33</font><font color="#000080">) &lt; </font>ArjFileSize<font color="#000080">) </font><font color="#FF0000"><b>do
    begin
      </b></font>ArjRecStart <font color="#000080">:= </font>StrPos<font color="#000080">(</font>Buffer<font color="#000080">[</font>Index1<font color="#000080">], </font>Index<font color="#000080">, </font>ArjID<font color="#000080">) + </font><font color="#800000">11</font><font color="#000080">;
      </font>ArjRecStop <font color="#000080">:= </font>StrPos<font color="#000080">(</font>Buffer<font color="#000080">[</font>Index1 <font color="#000080">+ </font>ArjRecStart <font color="#000080">+ </font><font color="#800000">22</font><font color="#000080">], </font><font color="#800000">13</font><font color="#000080">, </font><font color="#800000">#0</font><font color="#000080">);
      </font>move<font color="#000080">(</font>Buffer<font color="#000080">[</font>ArjRecStart <font color="#000080">+ </font>Index1<font color="#000080">], </font>ArjFileRec<font color="#000080">, (</font>ArjRecStop <font color="#000080">+ </font><font color="#800000">21</font><font color="#000080">));
      </font><font color="#FF0000"><b>With </b></font>ArjFileRec <font color="#FF0000"><b>do
        begin
          </b></font>Writeln<font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">,</font>FileName<font color="#000080">, </font><font color="#800000">'  Compressed size = '</font><font color="#000080">, </font>CompressedSize<font color="#000080">:</font><font color="#800000">6</font><font color="#000080">,
                    </font><font color="#800000">'  original size = '</font><font color="#000080">, </font>originalSize<font color="#000080">:</font><font color="#800000">6</font><font color="#000080">);
          </font>FileName <font color="#000080">:= </font><font color="#800000">'            '</font><font color="#000080">;
          </font>inc<font color="#000080">(</font>Index1<font color="#000080">, </font>CompressedSize <font color="#000080">+ </font>ArjRecStop <font color="#000080">+ </font>ArjRecStart<font color="#000080">);
          </font>dec<font color="#000080">(</font>Index<font color="#000080">, </font>CompressedSize <font color="#000080">+ </font>ArjRecStop <font color="#000080">+ </font>ArjRecStart<font color="#000080">)
        </font><font color="#FF0000"><b>end
    end
end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to ARCHIVES SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0008.PAS">Original</a><b>]</b></p></body>
</html>
