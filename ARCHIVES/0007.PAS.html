<html>
<head><title> "Testing for PKLITE File" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to ARCHIVES SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0007.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
 &gt; Your approach (as all similar ones I have seen so Far) has a major
 &gt; drawback: you can't use PKLITE, TinYPROG, LZEXE afterwards to
 &gt; squeeze them down in size, as the offsets of the Program change.
 &gt; Has anyone come up With a another approach circumventing this?

Yes, you can store it at the end of the .EXE File ( after the
code ) With the following routine :
}

</i></font><font color="#FF0000"><b>Function </b></font>CodeLenOnDisk<font color="#000080">( </font>FName <font color="#000080">: </font><font color="#FF0000"><b>String </b></font><font color="#000080">) : </font>LongInt<font color="#000080">;
</font><font color="#FF0000"><b>Var </b></font>ImageInfo <font color="#000080">: </font><font color="#FF0000"><b>Record
                  </b></font>ExeID     <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[ </font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">1 </font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Char<font color="#000080">;
                  </font>Remainder <font color="#000080">: </font>Word<font color="#000080">;
                  </font>Size <font color="#000080">: </font>Word
                <font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>F        <font color="#000080">: </font><font color="#FF0000"><b>File</b></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>Assign<font color="#000080">( </font>F<font color="#000080">, </font>FName <font color="#000080">);
  </font>Reset<font color="#000080">( </font>F<font color="#000080">, </font><font color="#800000">1 </font><font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font>Ioresult <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>Exit<font color="#000080">;
  </font>BlockRead<font color="#000080">( </font>F<font color="#000080">, </font>ImageInfo<font color="#000080">, </font>Sizeof<font color="#000080">( </font>ImageInfo <font color="#000080">));
  </font><font color="#FF0000"><b>if </b></font>ImageInfo<font color="#000080">.</font>ExeID <font color="#000080">&lt;&gt; </font><font color="#800000">'MZ' </font><font color="#FF0000"><b>then </b></font>Exit<font color="#000080">;
  </font>CodeLenOnDisk <font color="#000080">:= </font>LongInt<font color="#000080">( </font>ImageInfo<font color="#000080">.</font>size<font color="#000080">-</font><font color="#800000">1 </font><font color="#000080">)*</font><font color="#800000">512 </font><font color="#000080">+ </font>ImageInfo<font color="#000080">.</font>Remainder<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{
With this one, you can determine the end of the code in your .EXE File,
and then Write other data there, Drawback : This Dosen't work in network
environments or With shared .EXE Files. I'd recommend an external passWord
File, and there storing a hash of the passWord.
}
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to ARCHIVES SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0007.PAS">Original</a><b>]</b></p></body>
</html>
