<html>
<head><title> "LZH File Viewer" by STEVE WIERENGA</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to ARCHIVES SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0011.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
Author: Steve Wierenga
LZH Viewer
}

</i></font><font color="#FF0000"><b>Unit </b></font>Lzhv<font color="#000080">;
</font><font color="#008000"><i>(**) </i></font><font color="#FF0000"><b>Interface </b></font><font color="#008000"><i>(**)
</i></font><font color="#FF0000"><b>Uses
  </b></font>Dos<font color="#000080">,</font>Crt<font color="#000080">;

</font><font color="#FF0000"><b>Type
  </b></font>FileheaderType <font color="#000080">= </font><font color="#FF0000"><b>Record  </b></font><font color="#008000"><i>{ Lzh File header }
    </i></font>Headsize<font color="#000080">,
    </font>Headchk   <font color="#000080">: </font>Byte<font color="#000080">;
    </font>HeadID    <font color="#000080">: </font><font color="#FF0000"><b>packed Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">5</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Char<font color="#000080">;
    </font>Packsize<font color="#000080">,
    </font>Origsize<font color="#000080">,
    </font>Filetime  <font color="#000080">: </font>LongInt<font color="#000080">;
    </font>Attr      <font color="#000080">: </font>Word<font color="#000080">;
    </font>Filename  <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">12</font><font color="#000080">];
    </font>f32       <font color="#000080">: </font>PathStr<font color="#000080">;
    </font>dt        <font color="#000080">: </font>DateTime<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Var
  </b></font>Fh         <font color="#000080">: </font>FileheaderType<font color="#000080">;
  </font>Fha        <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font>sizeof<font color="#000080">(</font>FileheaderType<font color="#000080">)] </font><font color="#FF0000"><b>of </b></font>Byte <font color="#FF0000"><b>Absolute </b></font>fh<font color="#000080">;
  </font>crc        <font color="#000080">: </font>Word<font color="#000080">;   </font><font color="#008000"><i>{ CRC value }
  </i></font>crcbuf     <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">2</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Byte <font color="#FF0000"><b>Absolute </b></font>CRC<font color="#000080">;
  </font>crc_table  <font color="#000080">: </font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Word<font color="#000080">; </font><font color="#008000"><i>{ Table of CRC's }
  </i></font>inFile     <font color="#000080">: </font><font color="#FF0000"><b>File</b></font><font color="#000080">; </font><font color="#008000"><i>{ File to be processed }
  </i></font>registered <font color="#000080">: </font>Boolean<font color="#000080">; </font><font color="#008000"><i>{ Is registered? }

</i></font><font color="#FF0000"><b>Procedure </b></font>Make_crc_table<font color="#000080">; </font><font color="#008000"><i>{ Create table of CRC's }
</i></font><font color="#FF0000"><b>Function  </b></font>Mksum <font color="#000080">: </font>Byte<font color="#000080">;     </font><font color="#008000"><i>{ Get CheckSum }
</i></font><font color="#FF0000"><b>Procedure </b></font>ViewLzh<font color="#000080">(</font>LZHFile <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">);  </font><font color="#008000"><i>{ View the File }
</i></font><font color="#FF0000"><b>Function  </b></font>GAN<font color="#000080">(</font>LZHFile <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">) : </font><font color="#FF0000"><b>String</b></font><font color="#000080">;  </font><font color="#008000"><i>{ Get the LZH Filename }


(**) </i></font><font color="#FF0000"><b>Implementation </b></font><font color="#008000"><i>(**)
</i></font><font color="#FF0000"><b>Procedure </b></font>Terminate<font color="#000080">; </font><font color="#008000"><i>{ Exit the Program }
</i></font><font color="#FF0000"><b>begin
  </b></font>Write<font color="#000080">(</font><font color="#800000">'ARCHPEEK could not find specified File. Aborting...'</font><font color="#000080">);
  </font>Halt<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Make_crc_table<font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>i<font color="#000080">,
  </font>index<font color="#000080">,
  </font>ax    <font color="#000080">: </font>Word<font color="#000080">;
  </font>carry <font color="#000080">: </font>Boolean<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>index <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>Repeat
    </b></font>ax <font color="#000080">:= </font>index<font color="#000080">;
    </font><font color="#FF0000"><b>For </b></font>i <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">8 </font><font color="#FF0000"><b>do
    begin
      </b></font>carry <font color="#000080">:= </font>odd<font color="#000080">(</font>ax<font color="#000080">);
      </font>ax <font color="#000080">:= </font>ax <font color="#FF0000"><b>shr </b></font><font color="#800000">1</font><font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font>carry <font color="#FF0000"><b>then
        </b></font>ax <font color="#000080">:= </font>ax <font color="#FF0000"><b>xor </b></font><font color="#800000">$A001</font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font>crc_table<font color="#000080">[</font>index<font color="#000080">] := </font>ax<font color="#000080">;
    </font>inc<font color="#000080">(</font>index<font color="#000080">);
  </font><font color="#FF0000"><b>Until </b></font>index <font color="#000080">&gt; </font><font color="#800000">255</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{ use this to calculate the CRC value of the original File }
{ call this Function afer reading every Byte from the File }
</i></font><font color="#FF0000"><b>Procedure </b></font>calccrc<font color="#000080">(</font>data <font color="#000080">: </font>Byte<font color="#000080">);
</font><font color="#FF0000"><b>Var
  </b></font>index <font color="#000080">: </font>Integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>crcbuf<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] := </font>crcbuf<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">] </font><font color="#FF0000"><b>xor </b></font>data<font color="#000080">;
  </font>index <font color="#000080">:= </font>crcbuf<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">];
  </font>crc <font color="#000080">:= </font>crc <font color="#FF0000"><b>shr </b></font><font color="#800000">8</font><font color="#000080">;
  </font>crc <font color="#000080">:= </font>crc <font color="#FF0000"><b>xor </b></font>crc_table<font color="#000080">[</font>index<font color="#000080">];
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Function </b></font>Mksum <font color="#000080">: </font>Byte<font color="#000080">;  </font><font color="#008000"><i>{calculate check sum For File header }
</i></font><font color="#FF0000"><b>Var
  </b></font>i <font color="#000080">: </font>Integer<font color="#000080">;
  </font>b <font color="#000080">: </font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>b <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>For </b></font>i <font color="#000080">:= </font><font color="#800000">3 </font><font color="#FF0000"><b>to </b></font>fh<font color="#000080">.</font>headsize<font color="#000080">+</font><font color="#800000">2 </font><font color="#FF0000"><b>do
    </b></font>b <font color="#000080">:= </font>b<font color="#000080">+</font>fha<font color="#000080">[</font>i<font color="#000080">];
  </font>mksum <font color="#000080">:= </font>b<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>viewlzh<font color="#000080">(</font>LZHFile <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">); </font><font color="#008000"><i>{ View the LZH File }
</i></font><font color="#FF0000"><b>Var
  </b></font>l1<font color="#000080">,</font>l2<font color="#000080">,
  </font>oldFilepos<font color="#000080">,
  </font>a<font color="#000080">,</font>b<font color="#000080">,</font>a1<font color="#000080">,</font>b1<font color="#000080">,
  </font>totalorig<font color="#000080">,
  </font>totalpack <font color="#000080">: </font>LongInt<font color="#000080">;
  </font>count<font color="#000080">,</font>z   <font color="#000080">: </font>Integer<font color="#000080">;
  </font>numread<font color="#000080">,
  </font>i<font color="#000080">, </font>year1<font color="#000080">,
  </font>month1<font color="#000080">,
  </font>day1<font color="#000080">,
  </font>hour1<font color="#000080">,
  </font>min1<font color="#000080">,
  </font>sec1      <font color="#000080">: </font>Word<font color="#000080">;
  </font>s1        <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">50</font><font color="#000080">];
  </font>s2        <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">20</font><font color="#000080">];
  </font>l         <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">[</font><font color="#800000">80</font><font color="#000080">];
  </font>sss       <font color="#000080">:  </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>registered  <font color="#000080">:=  </font>False<font color="#000080">; </font><font color="#008000"><i>{ Unregistered }
  </i></font><font color="#FF0000"><b>if not </b></font>registered <font color="#FF0000"><b>then </b></font><font color="#008000"><i>{ Registered? }
  </i></font><font color="#FF0000"><b>begin
    </b></font>Writeln<font color="#000080">(</font><font color="#800000">'ArchPeek 0.01Alpha [UNREGISTERED] Copyright 1993 Steve Wierenga'</font><font color="#000080">);
    </font>Delay<font color="#000080">(</font><font color="#800000">200</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>assign<font color="#000080">(</font>inFile<font color="#000080">,</font>LZHFile<font color="#000080">);
  </font><font color="#008000"><i>{$I-}
  </i></font>reset<font color="#000080">(</font>inFile<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);   </font><font color="#008000"><i>{ Open LZH File }
  {$I+}
  </i></font><font color="#FF0000"><b>If </b></font>IOResult <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
    </b></font>Terminate<font color="#000080">;   </font><font color="#008000"><i>{ Specified File exists? }
  </i></font>sss <font color="#000080">:=  </font>GAN<font color="#000080">(</font>LZHFile<font color="#000080">);  </font><font color="#008000"><i>{ Get Filename of LZH File }
  </i></font>Writeln<font color="#000080">( </font><font color="#800000">'Lzh FileName: '</font><font color="#000080">,</font>sss<font color="#000080">);
  </font>WriteLn<font color="#000080">( </font><font color="#800000">'    Name           Length      Size  Saved    Date      Time    '</font><font color="#000080">);
  </font>WriteLn<font color="#000080">(</font><font color="#800000">'__________________________________________________________'</font><font color="#000080">);
  </font>oldFilepos <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;       </font><font color="#008000"><i>{ Init Variables }
  </i></font>count <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
  </font>z  <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font>a1 <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>Repeat
    </b></font>z  <font color="#000080">:=  </font>z <font color="#000080">+ </font><font color="#800000">1</font><font color="#000080">;
    </font>seek<font color="#000080">(</font>inFile<font color="#000080">,</font>oldFilepos<font color="#000080">);                              </font><font color="#008000"><i>{
    Goto start of File}
    </i></font>blockread<font color="#000080">(</font>inFile<font color="#000080">,</font>fha<font color="#000080">,</font>sizeof<font color="#000080">(</font>FileheaderType<font color="#000080">),</font>numread<font color="#000080">); </font><font color="#008000"><i>{
    Read Fileheader}
    </i></font>oldFilepos <font color="#000080">:= </font>oldFilepos<font color="#000080">+</font>fh<font color="#000080">.</font>headsize<font color="#000080">+</font><font color="#800000">2</font><font color="#000080">+</font>fh<font color="#000080">.</font>packsize<font color="#000080">;   </font><font color="#008000"><i>{
    Where are we? }
    </i></font>i <font color="#000080">:= </font>Mksum<font color="#000080">; </font><font color="#008000"><i>{ Get the checksum }
    </i></font><font color="#FF0000"><b>if </b></font>fh<font color="#000080">.</font>headsize <font color="#000080">&lt;&gt; </font><font color="#800000">0 </font><font color="#FF0000"><b>then
    begin
      if </b></font>i <font color="#000080">&lt;&gt; </font>fh<font color="#000080">.</font>headchk <font color="#FF0000"><b>then
      begin
        </b></font>Writeln<font color="#000080">(</font><font color="#800000">'Error in File. Unable to read.  Aborting...'</font><font color="#000080">);
        </font>Close<font color="#000080">(</font>inFile<font color="#000080">);
        </font>Exit<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>Case </b></font>Length<font color="#000080">(</font>Fh<font color="#000080">.</font>FileName<font color="#000080">) </font><font color="#FF0000"><b>Of          </b></font><font color="#008000"><i>{ Straigthen out String }
        </i></font><font color="#800000">1  </font><font color="#000080">: </font>Fh<font color="#000080">.</font>FileName  <font color="#000080">:=  </font>Fh<font color="#000080">.</font>FileName <font color="#000080">+ </font><font color="#800000">'           '</font><font color="#000080">;
        </font><font color="#800000">2  </font><font color="#000080">: </font>Fh<font color="#000080">.</font>FileName  <font color="#000080">:=  </font>Fh<font color="#000080">.</font>FileName <font color="#000080">+ </font><font color="#800000">'          '</font><font color="#000080">;
        </font><font color="#800000">3  </font><font color="#000080">: </font>Fh<font color="#000080">.</font>FileName  <font color="#000080">:=  </font>Fh<font color="#000080">.</font>FileName <font color="#000080">+ </font><font color="#800000">'         '</font><font color="#000080">;
        </font><font color="#800000">4  </font><font color="#000080">: </font>Fh<font color="#000080">.</font>FileName  <font color="#000080">:=  </font>Fh<font color="#000080">.</font>FileName <font color="#000080">+ </font><font color="#800000">'        '</font><font color="#000080">;
        </font><font color="#800000">5  </font><font color="#000080">: </font>Fh<font color="#000080">.</font>FileName  <font color="#000080">:=  </font>Fh<font color="#000080">.</font>FileName <font color="#000080">+ </font><font color="#800000">'       '</font><font color="#000080">;
        </font><font color="#800000">6  </font><font color="#000080">: </font>Fh<font color="#000080">.</font>FileName  <font color="#000080">:=  </font>Fh<font color="#000080">.</font>FileName <font color="#000080">+ </font><font color="#800000">'      '</font><font color="#000080">;
        </font><font color="#800000">7  </font><font color="#000080">: </font>Fh<font color="#000080">.</font>FileName  <font color="#000080">:=  </font>Fh<font color="#000080">.</font>FileName <font color="#000080">+ </font><font color="#800000">'     '</font><font color="#000080">;
        </font><font color="#800000">8  </font><font color="#000080">: </font>Fh<font color="#000080">.</font>FileName  <font color="#000080">:=  </font>Fh<font color="#000080">.</font>FileName <font color="#000080">+ </font><font color="#800000">'    '</font><font color="#000080">;
        </font><font color="#800000">9  </font><font color="#000080">: </font>Fh<font color="#000080">.</font>FileName  <font color="#000080">:=  </font>Fh<font color="#000080">.</font>FileName <font color="#000080">+ </font><font color="#800000">'   '</font><font color="#000080">;
        </font><font color="#800000">10 </font><font color="#000080">: </font>Fh<font color="#000080">.</font>FileName  <font color="#000080">:=  </font>Fh<font color="#000080">.</font>FileName <font color="#000080">+ </font><font color="#800000">'  '</font><font color="#000080">;
        </font><font color="#800000">11 </font><font color="#000080">: </font>Fh<font color="#000080">.</font>FileName  <font color="#000080">:=  </font>Fh<font color="#000080">.</font>FileName <font color="#000080">+ </font><font color="#800000">' '</font><font color="#000080">;
        </font><font color="#800000">12 </font><font color="#000080">: </font>Fh<font color="#000080">.</font>FileName  <font color="#000080">:=  </font>Fh<font color="#000080">.</font>FileName <font color="#000080">+ </font><font color="#800000">''</font><font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font>UnPackTime<font color="#000080">(</font>Fh<font color="#000080">.</font>FileTime<font color="#000080">,</font>Fh<font color="#000080">.</font>DT<font color="#000080">);
      </font>a1 <font color="#000080">:= </font>a1 <font color="#000080">+ </font>Fh<font color="#000080">.</font>OrigSize<font color="#000080">;            </font><font color="#008000"><i>{ Increase Uncompressed Size }
      </i></font>Write<font color="#000080">(</font><font color="#800000">'       '</font><font color="#000080">, </font>fh<font color="#000080">.</font>Filename <font color="#000080">: </font><font color="#800000">2</font><font color="#000080">, </font>fh<font color="#000080">.</font>origsize <font color="#000080">: </font><font color="#800000">9</font><font color="#000080">, </font>fh<font color="#000080">.</font>packSize <font color="#000080">: </font><font color="#800000">10</font><font color="#000080">,
                   (</font><font color="#800000">100 </font><font color="#000080">- </font>fh<font color="#000080">.</font>packSize <font color="#000080">/ </font>fh<font color="#000080">.</font>origSize <font color="#000080">* </font><font color="#800000">100</font><font color="#000080">) : </font><font color="#800000">5 </font><font color="#000080">: </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">'%'</font><font color="#000080">);
       </font><font color="#008000"><i>{ Display info }
      </i></font><font color="#FF0000"><b>Case </b></font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>month <font color="#FF0000"><b>of  </b></font><font color="#008000"><i>{ Get date and time }
        </i></font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">9   </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'0'</font><font color="#000080">:</font><font color="#800000">4</font><font color="#000080">,</font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>month<font color="#000080">);
        </font><font color="#800000">10</font><font color="#000080">..</font><font color="#800000">12 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">' '</font><font color="#000080">,</font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>month<font color="#000080">:</font><font color="#800000">4</font><font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font>Write<font color="#000080">( </font><font color="#800000">'/'</font><font color="#000080">);
      </font><font color="#FF0000"><b>Case </b></font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>day <font color="#FF0000"><b>of
        </b></font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">9   </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'0'</font><font color="#000080">,</font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>day<font color="#000080">);
        </font><font color="#800000">10</font><font color="#000080">..</font><font color="#800000">31 </font><font color="#000080">: </font>Write<font color="#000080">( </font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>day<font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font>Write<font color="#000080">( </font><font color="#800000">'/'</font><font color="#000080">);
      </font><font color="#FF0000"><b>Case </b></font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>year <font color="#FF0000"><b>of
        </b></font><font color="#800000">1980 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'80'</font><font color="#000080">);
        </font><font color="#800000">1981 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'81'</font><font color="#000080">);
        </font><font color="#800000">1982 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'82'</font><font color="#000080">);
        </font><font color="#800000">1983 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'83'</font><font color="#000080">);
        </font><font color="#800000">1984 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'84'</font><font color="#000080">);
        </font><font color="#800000">1985 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'85'</font><font color="#000080">);
        </font><font color="#800000">1986 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'86'</font><font color="#000080">);
        </font><font color="#800000">1987 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'87'</font><font color="#000080">);
        </font><font color="#800000">1988 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'88'</font><font color="#000080">);
        </font><font color="#800000">1989 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'89'</font><font color="#000080">);
        </font><font color="#800000">1990 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'90'</font><font color="#000080">);
        </font><font color="#800000">1991 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'91'</font><font color="#000080">);
        </font><font color="#800000">1992 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'92'</font><font color="#000080">);
        </font><font color="#800000">1993 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'93'</font><font color="#000080">);
        </font><font color="#800000">1994 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'94'</font><font color="#000080">);
        </font><font color="#800000">1995 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'95'</font><font color="#000080">);
        </font><font color="#800000">1996 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'96'</font><font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>Case </b></font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>hour <font color="#FF0000"><b>of
        </b></font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">9   </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'0'</font><font color="#000080">:</font><font color="#800000">3</font><font color="#000080">,</font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>hour<font color="#000080">,</font><font color="#800000">':'</font><font color="#000080">);
        </font><font color="#800000">10</font><font color="#000080">..</font><font color="#800000">23 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">' '</font><font color="#000080">,</font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>hour<font color="#000080">:</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">':'</font><font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>Case </b></font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>min <font color="#FF0000"><b>of
        </b></font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">9   </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'0'</font><font color="#000080">,</font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>min<font color="#000080">,</font><font color="#800000">':'</font><font color="#000080">);
        </font><font color="#800000">10</font><font color="#000080">..</font><font color="#800000">59 </font><font color="#000080">: </font>Write<font color="#000080">( </font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>min<font color="#000080">,</font><font color="#800000">':'</font><font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#FF0000"><b>Case </b></font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>sec <font color="#FF0000"><b>of
        </b></font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">9   </font><font color="#000080">: </font>Writeln<font color="#000080">( </font><font color="#800000">'0'</font><font color="#000080">,</font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>sec<font color="#000080">);
        </font><font color="#800000">10</font><font color="#000080">..</font><font color="#800000">59 </font><font color="#000080">: </font>Writeln<font color="#000080">( </font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>sec<font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>Until   </b></font><font color="#000080">(</font>fh<font color="#000080">.</font>headsize<font color="#000080">=</font><font color="#800000">0</font><font color="#000080">);
  </font>Writeln<font color="#000080">( </font><font color="#800000">'==========================================================='</font><font color="#000080">);
  </font>GetFTime<font color="#000080">(</font>inFile<font color="#000080">,</font>l1<font color="#000080">);
  </font>UnPackTime<font color="#000080">(</font>l1<font color="#000080">,</font>fh<font color="#000080">.</font>dt<font color="#000080">);
  </font>Write<font color="#000080">( </font><font color="#800000">'  '</font><font color="#000080">, </font>z<font color="#000080">, </font><font color="#800000">' Files  '</font><font color="#000080">, </font>a1 <font color="#000080">: </font><font color="#800000">12</font><font color="#000080">, </font>FileSize<font color="#000080">(</font>inFile<font color="#000080">) : </font><font color="#800000">10</font><font color="#000080">,
          (</font><font color="#800000">100 </font><font color="#000080">- </font>FileSize<font color="#000080">(</font>inFile<font color="#000080">) / </font>a1 <font color="#000080">* </font><font color="#800000">100</font><font color="#000080">) : </font><font color="#800000">5 </font><font color="#000080">: </font><font color="#800000">0</font><font color="#000080">, </font><font color="#800000">'%'</font><font color="#000080">);
  </font><font color="#FF0000"><b>Case </b></font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>month <font color="#FF0000"><b>of
    </b></font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">9   </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'0'</font><font color="#000080">:</font><font color="#800000">4</font><font color="#000080">,</font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>month<font color="#000080">);
    </font><font color="#800000">10</font><font color="#000080">..</font><font color="#800000">12 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">' '</font><font color="#000080">,</font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>month<font color="#000080">:</font><font color="#800000">4</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>Write<font color="#000080">( </font><font color="#800000">'/'</font><font color="#000080">);
  </font><font color="#FF0000"><b>Case </b></font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>day <font color="#FF0000"><b>of
    </b></font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">9   </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'0'</font><font color="#000080">,</font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>day<font color="#000080">);
    </font><font color="#800000">10</font><font color="#000080">..</font><font color="#800000">31 </font><font color="#000080">: </font>Write<font color="#000080">( </font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>day<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>Write<font color="#000080">( </font><font color="#800000">'/'</font><font color="#000080">);
  </font><font color="#FF0000"><b>Case </b></font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>year <font color="#FF0000"><b>of
    </b></font><font color="#800000">1980 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'80'</font><font color="#000080">);
    </font><font color="#800000">1981 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'81'</font><font color="#000080">);
    </font><font color="#800000">1982 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'82'</font><font color="#000080">);
    </font><font color="#800000">1983 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'83'</font><font color="#000080">);
    </font><font color="#800000">1984 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'84'</font><font color="#000080">);
    </font><font color="#800000">1985 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'85'</font><font color="#000080">);
    </font><font color="#800000">1986 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'86'</font><font color="#000080">);
    </font><font color="#800000">1987 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'87'</font><font color="#000080">);
    </font><font color="#800000">1988 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'88'</font><font color="#000080">);
    </font><font color="#800000">1989 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'89'</font><font color="#000080">);
    </font><font color="#800000">1990 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'90'</font><font color="#000080">);
    </font><font color="#800000">1991 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'91'</font><font color="#000080">);
    </font><font color="#800000">1992 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'92'</font><font color="#000080">);
    </font><font color="#800000">1993 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'93'</font><font color="#000080">);
    </font><font color="#800000">1994 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'94'</font><font color="#000080">);
    </font><font color="#800000">1995 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'95'</font><font color="#000080">);
    </font><font color="#800000">1996 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'96'</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>Case </b></font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>hour <font color="#FF0000"><b>of
    </b></font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">9   </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'0'</font><font color="#000080">:</font><font color="#800000">3</font><font color="#000080">,</font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>hour<font color="#000080">,</font><font color="#800000">':'</font><font color="#000080">);
    </font><font color="#800000">10</font><font color="#000080">..</font><font color="#800000">23 </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">' '</font><font color="#000080">,</font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>hour<font color="#000080">:</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">':'</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>Case </b></font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>min <font color="#FF0000"><b>of
    </b></font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">9   </font><font color="#000080">: </font>Write<font color="#000080">( </font><font color="#800000">'0'</font><font color="#000080">,</font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>min<font color="#000080">,</font><font color="#800000">':'</font><font color="#000080">);
    </font><font color="#800000">10</font><font color="#000080">..</font><font color="#800000">59 </font><font color="#000080">: </font>Write<font color="#000080">( </font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>min<font color="#000080">,</font><font color="#800000">':'</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>Case </b></font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>sec <font color="#FF0000"><b>of
    </b></font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">9   </font><font color="#000080">: </font>Writeln<font color="#000080">( </font><font color="#800000">'0'</font><font color="#000080">,</font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>sec<font color="#000080">);
    </font><font color="#800000">10</font><font color="#000080">..</font><font color="#800000">59 </font><font color="#000080">: </font>Writeln<font color="#000080">( </font>fh<font color="#000080">.</font>dt<font color="#000080">.</font>sec<font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>GAN<font color="#000080">(</font>LZHFile <font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">): </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Var
  </b></font>Dir  <font color="#000080">: </font>DirStr<font color="#000080">;
  </font>Name <font color="#000080">: </font>NameStr<font color="#000080">;
  </font>Exts <font color="#000080">: </font>ExtStr<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>FSplit<font color="#000080">(</font>LZHFile<font color="#000080">,</font>Dir<font color="#000080">,</font>Name<font color="#000080">,</font>Exts<font color="#000080">);
  </font>GAN <font color="#000080">:= </font>Name <font color="#000080">+ </font>Exts<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to ARCHIVES SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0011.PAS">Original</a><b>]</b></p></body>
</html>
