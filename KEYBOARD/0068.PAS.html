<html>
<head><title> "Disable Ctrl-Alt-Del" by GREG VIGNEAULT</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to KEYBOARD SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0068.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>(*******************************************************************)
 </i></font><font color="#FF0000"><b>PROGRAM </b></font>CtrlCAD<font color="#000080">;   </font><font color="#008000"><i>{ CTRLCAD.PAS  Disable Ctrl-Alt-Del             }
                    { Oct.1992 Greg Vigneault                       }

 </i></font><font color="#FF0000"><b>USES   </b></font>Crt<font color="#000080">,        </font><font color="#008000"><i>{ import ClrScr, KeyPressed, ReadKey            }
        </i></font>Dos<font color="#000080">;        </font><font color="#008000"><i>{ import GetIntVec, SetIntVec                   }

 </i></font><font color="#FF0000"><b>VAR    </b></font>old09Vector <font color="#000080">: </font>POINTER<font color="#000080">;  </font><font color="#008000"><i>{ to save/restore original ISR      }
        </i></font>ch          <font color="#000080">: </font>CHAR<font color="#000080">;
        </font>presses     <font color="#000080">: </font>WORD<font color="#000080">;

 </font><font color="#008000"><i>{ the following mask &amp; count Ctrl-Alt-Del|Ins|Enter keystrokes     }
 {$L CTRLCAD.OBJ}   { assembly, near calls                          }
 </i></font><font color="#FF0000"><b>PROCEDURE </b></font>InitTrapCAD<font color="#000080">( </font>oldVector <font color="#000080">: </font>POINTER <font color="#000080">);  </font><font color="#FF0000"><b>EXTERNAL</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>PROCEDURE </b></font>TrapCAD<font color="#000080">; </font>Interrupt<font color="#000080">;                  </font><font color="#FF0000"><b>EXTERNAL</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>FUNCTION  </b></font>TriedCAD <font color="#000080">: </font>WORD<font color="#000080">;                     </font><font color="#FF0000"><b>EXTERNAL</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>PROCEDURE </b></font>ForgetCAD<font color="#000080">;                           </font><font color="#FF0000"><b>EXTERNAL</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>PROCEDURE </b></font>WarmBoot<font color="#000080">;                            </font><font color="#FF0000"><b>EXTERNAL</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>PROCEDURE </b></font>ColdBoot<font color="#000080">;                            </font><font color="#FF0000"><b>EXTERNAL</b></font><font color="#000080">;

 </font><font color="#FF0000"><b>BEGIN
    </b></font><font color="#008000"><i>(* NEVER allow Ctrl-Break while TrapCAD is active ...          *)
    </i></font>CheckBreak <font color="#000080">:= </font>FALSE<font color="#000080">;            </font><font color="#008000"><i>{ disable Ctrl-Break            }

    </i></font>GetIntVec<font color="#000080">( </font><font color="#800000">9</font><font color="#000080">, </font>old09Vector <font color="#000080">);    </font><font color="#008000"><i>{ get current keyboard ISR      }
    </i></font>InitTrapCAD<font color="#000080">( </font>old09Vector <font color="#000080">);     </font><font color="#008000"><i>{ pass vector to TrapCAD        }
    </i></font>SetIntVec<font color="#000080">( </font><font color="#800000">9</font><font color="#000080">, @</font>TrapCAD <font color="#000080">);       </font><font color="#008000"><i>{ enable TrapCAD ISR            }

    </i></font>ForgetCAD<font color="#000080">;                      </font><font color="#008000"><i>{ reset TriedCAD count to 0     }
    </i></font>presses <font color="#000080">:= </font><font color="#800000">99</font><font color="#000080">;                  </font><font color="#008000"><i>{ any unlikely value            }

    { we'll just count the Ctrl-Alt-Del taps ...                    }
    </i></font><font color="#FF0000"><b>REPEAT
        IF </b></font><font color="#000080">(</font>presses <font color="#000080">&lt;&gt; </font>TriedCAD<font color="#000080">)    </font><font color="#008000"><i>{ update only when changed      }
        </i></font><font color="#FF0000"><b>THEN BEGIN
             </b></font>presses <font color="#000080">:= </font>TriedCAD<font color="#000080">;
             </font>ClrScr<font color="#000080">;
             </font>Write<font color="#000080">(</font><font color="#800000">'Ctrl-Alt-Del pressed '</font><font color="#000080">,</font>presses<font color="#000080">,</font><font color="#800000">' times '</font><font color="#000080">);
             </font>Write<font color="#000080">(</font><font color="#800000">'[Press ESC to exit]'</font><font color="#000080">);
        </font><font color="#FF0000"><b>END</b></font><font color="#000080">;
        </font><font color="#FF0000"><b>IF </b></font>KeyPressed <font color="#FF0000"><b>THEN </b></font>ch <font color="#000080">:= </font>ReadKey<font color="#000080">;
    </font><font color="#FF0000"><b>UNTIL </b></font><font color="#000080">(</font>ch <font color="#000080">= </font><font color="#800000">#27</font><font color="#000080">);

    </font>WriteLn<font color="#000080">; </font>WriteLn<font color="#000080">;
    </font><font color="#FF0000"><b>REPEAT
        </b></font>Write<font color="#000080">(</font><font color="#800000">'Would you like to warm boot the system? [Y/N] '</font><font color="#000080">,</font><font color="#800000">#7</font><font color="#000080">);
        </font>ReadLn<font color="#000080">( </font>ch <font color="#000080">);   </font>ch <font color="#000080">:= </font>UpCase<font color="#000080">( </font>ch <font color="#000080">);
    </font><font color="#FF0000"><b>UNTIL </b></font>ch <font color="#FF0000"><b>IN </b></font><font color="#000080">[</font><font color="#800000">'Y'</font><font color="#000080">,</font><font color="#800000">'N'</font><font color="#000080">];
    </font><font color="#FF0000"><b>IF </b></font>ch <font color="#000080">= </font><font color="#800000">'Y' </font><font color="#FF0000"><b>THEN </b></font>WarmBoot<font color="#000080">;      </font><font color="#008000"><i>{ emulate Ctrl-Alt-Del          }

    </i></font>SetIntVec<font color="#000080">( </font><font color="#800000">9</font><font color="#000080">, </font>old09Vector <font color="#000080">);    </font><font color="#008000"><i>{ unload TrapCAD                }
    </i></font>WriteLn<font color="#000080">; </font>WriteLn<font color="#000080">(</font><font color="#800000">'Ctrl-Alt-Del is now re-enabled!'</font><font color="#000080">);
    </font>CheckBreak <font color="#000080">:= </font>TRUE<font color="#000080">;             </font><font color="#008000"><i>{ restore Ctrl-Break            }
</i></font><font color="#FF0000"><b>END</b></font><font color="#000080">.
</font><font color="#008000"><i>(*******************************************************************)

 </i></font>Put all <font color="#FF0000"><b>of </b></font>this remaining <font color="#FF0000"><b>message </b></font>into a text <font color="#FF0000"><b>file </b></font>named CTRLCAD<font color="#000080">.</font>SCR<font color="#000080">,
 </font><font color="#FF0000"><b>then type </b></font><font color="#000080">&quot;</font>DEBUG <font color="#000080">&lt; </font>CTRLCAD<font color="#000080">.</font>SCR<font color="#000080">&quot; (</font>no quotes<font color="#000080">) </font><font color="#FF0000"><b>to </b></font>create CTRLCAD<font color="#000080">.</font>ARC<font color="#000080">,
 </font><font color="#FF0000"><b>and </b></font>extract CTRLCAD<font color="#000080">.</font>OBJ using PKUNPAK <font color="#FF0000"><b>or </b></font>PAK <font color="#000080">...
======================= </font>Start <font color="#FF0000"><b>of </b></font>DEBUG script <font color="#000080">=========================
 </font>nCTRLCAD<font color="#000080">.</font>ARC
 e100 FC BB <font color="#800000">03 00 </font>BF A5 <font color="#800000">01 </font>BE <font color="#800000">85 01 8</font>A EF AD <font color="#800000">86 </font>CC AA FE C0 E2 FB <font color="#800000">4</font>B <font color="#800000">75
 </font>e116 F5 B9 FF FD BA <font color="#800000">00 02 52 </font>B4 <font color="#800000">3</font>F CD <font color="#800000">21 5</font>F <font color="#800000">72 66 8</font>B F7 <font color="#800000">50 8</font>B C8 B0 <font color="#800000">2</font>A
 e12C F2 AE <font color="#800000">75 5</font>B B0 <font color="#800000">0</font>D F2 AE <font color="#800000">87 </font>F7 BB <font color="#800000">00 01 </font>B2 <font color="#800000">04 </font>AC <font color="#800000">3</font>C <font color="#800000">2</font>A <font color="#800000">72 </font>FB <font color="#800000">74 4</font>C
 e142 <font color="#800000">57 </font>BF A3 <font color="#800000">01 </font>B9 <font color="#800000">40 00 8</font>A E1 F2 AE <font color="#800000">5</font>F <font color="#800000">75 3</font>B FE C1 <font color="#800000">2</font>A E1 <font color="#800000">88 27 43 </font>FE
 e158 CA <font color="#800000">75 </font>E0 <font color="#800000">56 </font>BE <font color="#800000">00 01 </font>AD <font color="#800000">86 </font>C4 <font color="#800000">8</font>B D0 AD <font color="#800000">86 </font>C4 <font color="#800000">5E </font>B1 <font color="#800000">02 </font>D2 E0 D3 E0
 e16E D2 E2 D3 EA D0 E1 D1 EA D1 D8 E2 FA <font color="#800000">86 </font>C2 AA <font color="#800000">8</font>A C4 AA <font color="#800000">8</font>A C2 AA EB
 e184 B1 <font color="#800000">30 0</font>A <font color="#800000">41 1</font>A <font color="#800000">61 1</font>A BF <font color="#800000">00 02 58 </font>F7 D8 <font color="#800000">99 33 </font>DB <font color="#800000">8</font>B CA <font color="#800000">8</font>B D0 B8 <font color="#800000">01
 </font>e19A <font color="#800000">42 57 </font>CD <font color="#800000">21 59 80 </font>ED <font color="#800000">02 </font>CC <font color="#800000">2</font>B <font color="#800000">2</font>D
 g<font color="#000080">=</font><font color="#800000">100
 </font>w200
 q GXD v3<font color="#000080">.</font><font color="#800000">3</font>a<font color="#000080">: </font>XX34<font color="#000080">-</font><font color="#FF0000"><b>to</b></font><font color="#000080">-</font>DEBUG script code by Greg Vigneault

<font color="#000080">*</font>XX3401<font color="#000080">-</font><font color="#800000">000345</font><font color="#000080">-</font><font color="#800000">041092</font><font color="#000080">--</font><font color="#800000">72</font><font color="#000080">--</font><font color="#800000">85</font><font color="#000080">-</font><font color="#800000">16010</font><font color="#000080">-</font>E<font color="#000080">---</font>CTRLCAD<font color="#000080">.</font>ARC<font color="#000080">--</font><font color="#800000">1</font><font color="#000080">-</font><font color="#FF0000"><b>OF</b></font><font color="#000080">--</font><font color="#800000">1
4</font>UV1J37AEo329Yx0GU<font color="#000080">-</font>SCU2<font color="#000080">++</font><font color="#800000">2E</font>N28fLRqA<font color="#000080">-+++</font>AU<font color="#000080">-</font>c<font color="#000080">+</font>K104XVkqMw8EQF3YGVAyZUs<font color="#000080">++</font><font color="#800000">2</font><font color="#000080">-</font>U
m<font color="#000080">-</font>AWFMVUYcXY2k<font color="#000080">+-+</font>U9IUEH<font color="#000080">+</font>mQE<font color="#000080">+-</font>uV60E7ZG<font color="#000080">-+</font>WDmMWI7YYcogWSKFON272m7AbJ<font color="#000080">-</font>H7j<font color="#000080">-</font><font color="#800000">72
</font>GVCTE<font color="#000080">+</font>hBH41YWNEXFOXQx1BlEF6bGOWcN5Zn6c<font color="#000080">-</font>nW<font color="#000080">+</font>VA3<font color="#000080">-</font>IU4eVF<font color="#000080">++</font><font color="#800000">7</font>ALAHBle6X<font color="#000080">+</font>ZmU<font color="#000080">-</font>S1q
<font color="#800000">0</font><font color="#000080">+</font><font color="#800000">4</font>t2qQ<font color="#000080">+</font>kkh<font color="#000080">+</font>aBUVPy1YYNDa1<font color="#000080">-</font>cu649Ym021l<font color="#000080">-</font><font color="#800000">2</font>LIplM8SmaH7UuPCWk<font color="#000080">+</font><font color="#800000">12</font>YX<font color="#000080">-</font>i3MHXhUy7<font color="#000080">-
</font>fmBgc0sE6A4<font color="#000080">+-</font>sAu1gW<font color="#000080">-</font>sH431UESIiWotY<font color="#000080">+</font><font color="#800000">5</font>kEQgbJnwQn3Fi647g20M<font color="#000080">+</font>z4vonA<font color="#000080">+</font>Y<font color="#000080">+</font>ms01Jl
a3uykrPFY9<font color="#000080">-</font>ik8szTok1At56Utmvkvo0yDTD4eQQ<font color="#000080">+</font><font color="#800000">6</font>UVG<font color="#000080">-</font>hUHbk6xCj2ho1zHbkmxBZ5H<font color="#000080">-</font>fx
lPR5UQE6Ua<font color="#000080">+</font>ax4o0<font color="#000080">+</font><font color="#800000">0</font>O801<font color="#000080">+</font>F5Fc<font color="#000080">+
***** </font><font color="#FF0000"><b>END OF </b></font>XX<font color="#000080">-</font>BLOCK <font color="#000080">*****

======================== </font><font color="#FF0000"><b>End of </b></font>DEBUG script <font color="#000080">==========================
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to KEYBOARD SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0068.PAS">Original</a><b>]</b></p></body>
</html>
