<html>
<head><title> "Keyboard routines for TP6" by PEDRO ANDRADE</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to KEYBOARD SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0109.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
 &gt; I'm glad this was brought up.  I recently made a simple program (in
 &gt; assembly, hope I'm not being off-topic here) that would continually
 &gt; change the status of each LED on the keyboard.  I noticed that the
 &gt; LED's would not actually change unless the program ended or I
 &gt; continually pressed keys down, and I eventually had to call a check
 &gt; for keypress interupt to get it to work properly.  Why exactly was
 &gt; this necessary?

I'm sorry, but right now I don't have time to see that. Here goes a
program that does that kind of stuff: }

</i></font><font color="#FF0000"><b>program </b></font>keyboard<font color="#000080">;
</font><font color="#FF0000"><b>uses </b></font>crt<font color="#000080">;
</font><font color="#FF0000"><b>const </b></font>bit<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">7</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">=(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">,</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">8</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">,</font><font color="#800000">32</font><font color="#000080">,</font><font color="#800000">64</font><font color="#000080">,</font><font color="#800000">128</font><font color="#000080">);
</font><font color="#FF0000"><b>var </b></font>tec<font color="#000080">: </font>byte <font color="#FF0000"><b>absolute </b></font><font color="#800000">$40</font><font color="#000080">:</font><font color="#800000">$17</font><font color="#000080">;
    </font>tec1<font color="#000080">:</font>byte <font color="#FF0000"><b>absolute </b></font><font color="#800000">$40</font><font color="#000080">:</font><font color="#800000">$18</font><font color="#000080">;
    </font>tec2<font color="#000080">:</font>byte <font color="#FF0000"><b>absolute </b></font><font color="#800000">$40</font><font color="#000080">:</font><font color="#800000">$96</font><font color="#000080">;
</font><font color="#FF0000"><b>begin
     </b></font>clrscr<font color="#000080">;
     </font>textcolor<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">);
     </font>write<font color="#000080">(</font><font color="#800000">'                                  TECLAS ACTIVAS'</font><font color="#000080">);
     </font>gotoxy<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">);
     </font>write<font color="#000080">(</font><font color="#800000">'                   ScrollLock  NumLock  CapsLock  Insert       '</font><font color="#000080">);
     </font>gotoxy<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">7</font><font color="#000080">);
     </font>write<font color="#000080">(</font><font color="#800000">'                                  TECLAS PREMIDAS'</font><font color="#000080">);
     </font>gotoxy<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">9</font><font color="#000080">);
     </font>write<font color="#000080">(</font><font color="#800000">'RightAlt  LeftAlt  RightCtrl  LeftCtrl  RightShift  LeftShift  Ins Caps  Num'</font><font color="#000080">);
     </font>gotoxy<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">12</font><font color="#000080">);
     </font>write<font color="#000080">(</font><font color="#800000">'Scroll  SysReq'</font><font color="#000080">);
     </font><font color="#FF0000"><b>repeat
           if </b></font><font color="#000080">(</font>tec <font color="#FF0000"><b>and </b></font>bit<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">])&lt;&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>textcolor<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">) </font><font color="#FF0000"><b>else </b></font>textcolor<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
           </font>gotoxy<font color="#000080">(</font><font color="#800000">45</font><font color="#000080">,</font><font color="#800000">10</font><font color="#000080">);
           </font>write<font color="#000080">(</font><font color="#800000">'&ucirc;'</font><font color="#000080">);
           </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>tec <font color="#FF0000"><b>and </b></font>bit<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">])&lt;&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>textcolor<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">) </font><font color="#FF0000"><b>else </b></font>textcolor<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
           </font>gotoxy<font color="#000080">(</font><font color="#800000">57</font><font color="#000080">,</font><font color="#800000">10</font><font color="#000080">);
           </font>write<font color="#000080">(</font><font color="#800000">'&ucirc;'</font><font color="#000080">);
           </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>tec <font color="#FF0000"><b>and </b></font>bit<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">])&lt;&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>textcolor<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">) </font><font color="#FF0000"><b>else </b></font>textcolor<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
           </font>gotoxy<font color="#000080">(</font><font color="#800000">25</font><font color="#000080">,</font><font color="#800000">4</font><font color="#000080">);
           </font>write<font color="#000080">(</font><font color="#800000">'&ucirc;'</font><font color="#000080">);
           </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>tec <font color="#FF0000"><b>and </b></font>bit<font color="#000080">[</font><font color="#800000">5</font><font color="#000080">])&lt;&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>textcolor<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">) </font><font color="#FF0000"><b>else </b></font>textcolor<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
           </font>gotoxy<font color="#000080">(</font><font color="#800000">35</font><font color="#000080">,</font><font color="#800000">4</font><font color="#000080">);
           </font>write<font color="#000080">(</font><font color="#800000">'&ucirc;'</font><font color="#000080">);
           </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>tec <font color="#FF0000"><b>and </b></font>bit<font color="#000080">[</font><font color="#800000">6</font><font color="#000080">])&lt;&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>textcolor<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">) </font><font color="#FF0000"><b>else </b></font>textcolor<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
           </font>gotoxy<font color="#000080">(</font><font color="#800000">45</font><font color="#000080">,</font><font color="#800000">4</font><font color="#000080">);
           </font>write<font color="#000080">(</font><font color="#800000">'&ucirc;'</font><font color="#000080">);
           </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>tec <font color="#FF0000"><b>and </b></font>bit<font color="#000080">[</font><font color="#800000">7</font><font color="#000080">])&lt;&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>textcolor<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">) </font><font color="#FF0000"><b>else </b></font>textcolor<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
           </font>gotoxy<font color="#000080">(</font><font color="#800000">54</font><font color="#000080">,</font><font color="#800000">4</font><font color="#000080">);
           </font>write<font color="#000080">(</font><font color="#800000">'&ucirc;'</font><font color="#000080">);
           </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>tec1 <font color="#FF0000"><b>and </b></font>bit<font color="#000080">[</font><font color="#800000">5</font><font color="#000080">])&lt;&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>textcolor<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">) </font><font color="#FF0000"><b>else </b></font>textcolor<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
           </font>gotoxy<font color="#000080">(</font><font color="#800000">76</font><font color="#000080">,</font><font color="#800000">10</font><font color="#000080">);
           </font>write<font color="#000080">(</font><font color="#800000">'&ucirc;'</font><font color="#000080">);
           </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>tec1 <font color="#FF0000"><b>and </b></font>bit<font color="#000080">[</font><font color="#800000">6</font><font color="#000080">])&lt;&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>textcolor<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">) </font><font color="#FF0000"><b>else </b></font>textcolor<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
           </font>gotoxy<font color="#000080">(</font><font color="#800000">70</font><font color="#000080">,</font><font color="#800000">10</font><font color="#000080">);
           </font>write<font color="#000080">(</font><font color="#800000">'&ucirc;'</font><font color="#000080">);
           </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>tec1 <font color="#FF0000"><b>and </b></font>bit<font color="#000080">[</font><font color="#800000">7</font><font color="#000080">])&lt;&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>textcolor<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">) </font><font color="#FF0000"><b>else </b></font>textcolor<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
           </font>gotoxy<font color="#000080">(</font><font color="#800000">65</font><font color="#000080">,</font><font color="#800000">10</font><font color="#000080">);
           </font>write<font color="#000080">(</font><font color="#800000">'&ucirc;'</font><font color="#000080">);
           </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>tec1 <font color="#FF0000"><b>and </b></font>bit<font color="#000080">[</font><font color="#800000">4</font><font color="#000080">])&lt;&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>textcolor<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">) </font><font color="#FF0000"><b>else </b></font>textcolor<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
           </font>gotoxy<font color="#000080">(</font><font color="#800000">3</font><font color="#000080">,</font><font color="#800000">13</font><font color="#000080">);
           </font>write<font color="#000080">(</font><font color="#800000">'&ucirc;'</font><font color="#000080">);
           </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>tec1 <font color="#FF0000"><b>and </b></font>bit<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">])&lt;&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>textcolor<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">) </font><font color="#FF0000"><b>else </b></font>textcolor<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
           </font>gotoxy<font color="#000080">(</font><font color="#800000">11</font><font color="#000080">,</font><font color="#800000">13</font><font color="#000080">);
           </font>write<font color="#000080">(</font><font color="#800000">'&ucirc;'</font><font color="#000080">);
           </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>tec2 <font color="#FF0000"><b>and </b></font>bit<font color="#000080">[</font><font color="#800000">3</font><font color="#000080">])&lt;&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>textcolor<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">) </font><font color="#FF0000"><b>else </b></font>textcolor<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
           </font>gotoxy<font color="#000080">(</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">10</font><font color="#000080">);
           </font>write<font color="#000080">(</font><font color="#800000">'&ucirc;'</font><font color="#000080">);
           </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>tec2 <font color="#FF0000"><b>and </b></font>bit<font color="#000080">[</font><font color="#800000">2</font><font color="#000080">])&lt;&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>textcolor<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">) </font><font color="#FF0000"><b>else </b></font>textcolor<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
           </font>gotoxy<font color="#000080">(</font><font color="#800000">24</font><font color="#000080">,</font><font color="#800000">10</font><font color="#000080">);
           </font>write<font color="#000080">(</font><font color="#800000">'&ucirc;'</font><font color="#000080">);
           </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>tec1 <font color="#FF0000"><b>and </b></font>bit<font color="#000080">[</font><font color="#800000">1</font><font color="#000080">])&lt;&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>textcolor<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">) </font><font color="#FF0000"><b>else </b></font>textcolor<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
           </font>gotoxy<font color="#000080">(</font><font color="#800000">14</font><font color="#000080">,</font><font color="#800000">10</font><font color="#000080">);
           </font>write<font color="#000080">(</font><font color="#800000">'&ucirc;'</font><font color="#000080">);
           </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>tec1 <font color="#FF0000"><b>and </b></font>bit<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">])&lt;&gt;</font><font color="#800000">0 </font><font color="#FF0000"><b>then </b></font>textcolor<font color="#000080">(</font><font color="#800000">15</font><font color="#000080">) </font><font color="#FF0000"><b>else </b></font>textcolor<font color="#000080">(</font><font color="#800000">0</font><font color="#000080">);
           </font>gotoxy<font color="#000080">(</font><font color="#800000">35</font><font color="#000080">,</font><font color="#800000">10</font><font color="#000080">);
           </font>write<font color="#000080">(</font><font color="#800000">'&ucirc;'</font><font color="#000080">);
     </font><font color="#FF0000"><b>until </b></font>keypressed <font color="#FF0000"><b>and </b></font><font color="#000080">(</font>upcase<font color="#000080">(</font>readkey<font color="#000080">)=</font><font color="#800000">'X'</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font>It<font color="#800000">'s for Turbo Pascal.

</font>You can also get info <font color="#FF0000"><b>on </b></font>this <font color="#FF0000"><b>in </b></font>Ralph<font color="#800000">'s Brown Interrupt List,
</font>available <font color="#FF0000"><b>on </b></font>some BBS<font color="#000080">.

</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to KEYBOARD SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0109.PAS">Original</a><b>]</b></p></body>
</html>
