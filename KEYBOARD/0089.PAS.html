<html>
<head><title> "Reading F11 & F12" by ANDREW EIGUS</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to KEYBOARD SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0089.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{ &gt; how do I get the f11 and f12 keys? }

</i></font><font color="#FF0000"><b>Program </b></font>ReadF11F12Keys<font color="#000080">;
</font><font color="#008000"><i>{ Written by Andrew Eigus of 2:5100/33@fidonet.org }
{ SWAG donation... }

</i></font><font color="#FF0000"><b>const
  </b></font>F11 <font color="#000080">= </font><font color="#800000">#$85</font><font color="#000080">;
  </font>F12 <font color="#000080">= </font><font color="#800000">#$86</font><font color="#000080">;

</font><font color="#FF0000"><b>Function </b></font>ReadKey <font color="#000080">: </font>char<font color="#000080">; </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">;
</font><font color="#FF0000"><b>Asm
  </b></font><font color="#FF00FF">mov ah,08h
  int 21h
</font><font color="#FF0000"><b>End</b></font><font color="#000080">; </font><font color="#008000"><i>{ ReadKey }

</i></font><font color="#FF0000"><b>var
  </b></font>Ch <font color="#000080">: </font>char<font color="#000080">;
  </font>Extended <font color="#000080">: </font>boolean<font color="#000080">;

</font><font color="#FF0000"><b>Begin
  </b></font>Write<font color="#000080">(</font><font color="#800000">'Press F11 or F12 to quit... '</font><font color="#000080">);
  </font><font color="#FF0000"><b>repeat
    </b></font>Ch <font color="#000080">:= </font>ReadKey<font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font>Ch <font color="#000080">= </font><font color="#800000">#0 </font><font color="#FF0000"><b>then
    begin
      </b></font>Extended <font color="#000080">:= </font>True<font color="#000080">;
      </font>Ch <font color="#000080">:= </font>ReadKey
    <font color="#FF0000"><b>end else </b></font>Extended <font color="#000080">:= </font>False<font color="#000080">;
  </font><font color="#FF0000"><b>until </b></font><font color="#000080">(</font>Ch <font color="#FF0000"><b>in </b></font><font color="#000080">[</font>F11<font color="#000080">,</font>F12<font color="#000080">]) </font><font color="#FF0000"><b>and </b></font>Extended<font color="#000080">;
  </font>WriteLn<font color="#000080">(</font><font color="#800000">'Done.'</font><font color="#000080">)
</font><font color="#FF0000"><b>End</b></font><font color="#000080">.
</font><font color="#008000"><i>{
&gt; ALSO!  What is bit 8 in that address?

Two bytes at address 0:0417 and 0:0418 identify the status of the keyboard
shift keys and keyboard toggles.  INT 16H returns the first byte in AL.

&Ouml;&Auml;7&Acirc;&Auml;6&Acirc;&Auml;5&Acirc;&Auml;4&Acirc;&Auml;3&Acirc;&Auml;2&Acirc;&Auml;1&Acirc;&Auml;0&middot;     Perform INT 16H Fn 02H
&ordm;I &sup3;C &sup3;N &sup3;S &sup3;a &sup3;c &sup3;sL&sup3;sR&ordm;     or fetch AL=byte at 0:0417
&Oacute;&Auml;&Ograve;&Aacute;&Auml;&Ograve;&Aacute;&Auml;&Ograve;&Aacute;&Auml;&Ograve;&Aacute;&Auml;&Ograve;&Aacute;&Auml;&Ograve;&Aacute;&Auml;&Ograve;&Aacute;&Auml;&Ograve;&frac12; bit
  &ordm;  &ordm;  &ordm;  &ordm;  &ordm;  &ordm;  &ordm;  &Egrave;&Iacute; 0: alpha-shift (right side) DOWN (AL &amp; 01H)
  &ordm;  &ordm;  &ordm;  &ordm;  &ordm;  &ordm;  &Egrave;&Iacute;&Iacute;&Iacute;&Iacute; 1: alpha-shift (left side) DOWN  (AL &amp; 02H)
  &ordm;  &ordm;  &ordm;  &ordm;  &ordm;  &Egrave;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute; 2: Ctrl-shift (either side) DOWN (AL &amp; 04H)
  &ordm;  &ordm;  &ordm;  &ordm;  &Egrave;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute; 3: Alt-shift  (either side) DOWN (AL &amp; 08H)
  &ordm;  &ordm;  &ordm;  &Egrave;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute; 4: ScrollLock state              (AL &amp; 10H)
  &ordm;  &ordm;  &Egrave;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute; 5: NumLock state                 (AL &amp; 20H)
  &ordm;  &Egrave;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute; 6: CapsLock state                (AL &amp; 40H)
  &Egrave;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute; 7: Insert state                  (AL &amp; 80H)

&Ouml;&Auml;7&Acirc;&Auml;6&Acirc;&Auml;5&Acirc;&Auml;4&Acirc;&Auml;3&Acirc;&Auml;2&Acirc;&Auml;1&Acirc;&Auml;0&middot;
&ordm;i &sup3;c &sup3;n &sup3;s &sup3;  &sup3;sy&sup3;aL&sup3;cL&ordm;    fetch AL=byte at 0:0418
&Oacute;&Auml;&Ograve;&Aacute;&Auml;&Ograve;&Aacute;&Auml;&Ograve;&Aacute;&Auml;&Ograve;&Aacute;&Auml;&Ograve;&Aacute;&Auml;&Ograve;&Aacute;&Auml;&Ograve;&Aacute;&Auml;&Ograve;&frac12; bit
  &ordm;  &ordm;  &ordm;  &ordm;  &ordm;  &ordm;  &ordm;  &Egrave;&Iacute; 0: Ctrl-shift (left side) DOWN (AL &amp; 01H)
  &ordm;  &ordm;  &ordm;  &ordm;  &ordm;  &ordm;  &Egrave;&Iacute;&Iacute;&Iacute;&Iacute; 1: Alt-shift (left side) DOWN  (AL &amp; 02H)
  &ordm;  &ordm;  &ordm;  &ordm;  &ordm;  &Egrave;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute; 2: SysReq DOWN                 (AL &amp; 04H)
  &ordm;  &ordm;  &ordm;  &ordm;  &Egrave;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute; 3: hold/pause state            (AL &amp; 08H)
  &ordm;  &ordm;  &ordm;  &Egrave;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute; 4: ScrollLock DOWN             (AL &amp; 10H)
  &ordm;  &ordm;  &Egrave;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute; 5: NumLock DOWN                (AL &amp; 20H)
  &ordm;  &Egrave;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute; 6: CapsLock DOWN               (AL &amp; 40H)
  &Egrave;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute; 7: Insert DOWN                 (AL &amp; 80H)

Notes: Bits 0-2 of 0:0418 are defined only for the 101-key enhanced keyboard.

       The 101-key BIOS INT 16H Fn 12H returns AL as with Fn 02, but AH is
       returned with the following bit-flag layout:

       &Ouml;&Auml;7&Acirc;&Auml;6&Acirc;&Auml;5&Acirc;&Auml;4&Acirc;&Auml;3&Acirc;&Auml;2&Acirc;&Auml;1&Acirc;&Auml;0&middot;
       &ordm;sy&sup3;c &sup3;n &sup3;s &sup3;aR&sup3;cR&sup3;aL&sup3;cL&ordm;    Perform INT 16H Fn 12H (101-key BIOS only)
       &Oacute;&Auml;&Ograve;&Aacute;&Auml;&Ograve;&Aacute;&Auml;&Ograve;&Aacute;&Auml;&Ograve;&Aacute;&Auml;&Ograve;&Aacute;&Auml;&Ograve;&Aacute;&Auml;&Ograve;&Aacute;&Auml;&Ograve;&frac12; bit
         &ordm;  &ordm;  &ordm;  &ordm;  &ordm;  &ordm;  &ordm;  &Egrave;&Iacute; 0: Ctrl-shift (left side) DOWN  (AH &amp; 01H)
         &ordm;  &ordm;  &ordm;  &ordm;  &ordm;  &ordm;  &Egrave;&Iacute;&Iacute;&Iacute;&Iacute; 1: Alt-shift (left side) DOWN   (AH &amp; 02H)
         &ordm;  &ordm;  &ordm;  &ordm;  &ordm;  &Egrave;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute; 2: Ctrl-shift (right side) DOWN (AH &amp; 04H)
         &ordm;  &ordm;  &ordm;  &ordm;  &Egrave;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute; 3: Alt-shift (right side) DOWN  (AH &amp; 08H)
         &ordm;  &ordm;  &ordm;  &Egrave;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute; 4: ScrollLock DOWN              (AH &amp; 10H)
         &ordm;  &ordm;  &Egrave;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute; 5: NumLock DOWN                 (AH &amp; 20H)
         &ordm;  &Egrave;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute; 6: CapsLock DOWN                (AH &amp; 40H)
         &Egrave;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute;&Iacute; 7: SysReq DOWN                  (AH &amp; 80H)

       Some older programs change the values of NumLock and CapsLock state
       bits (at 0:0417) to force a known status.  This is unwise because
       modern keyboards have indicator lights which will get out of sync with
       the status. See AT Keyboard for more information on the lock-key LEDs.

       PCjr status bytes at 0:0488 are omitted for lack of interest [mine&Auml;DR].
}
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to KEYBOARD SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0089.PAS">Original</a><b>]</b></p></body>
</html>
