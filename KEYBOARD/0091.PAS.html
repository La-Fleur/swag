<html>
<head><title> "Reading Multiple Keys" by JORT BLOEM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to KEYBOARD SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0091.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt; There has been MANY times that I've wanted to read MORE THAN ONE key at
&gt; the same time.. with ReadKey, it seems impossible!  For programming games,
&gt; it seems fall quite short!  So I began to look directly at the
&gt; keyboard buffer..  but it all seemed to be CRIPTIC!
With readkey it is impossible. The keyboard buffer doesnt help either. Take a
look at this code:
}

{$M 2000,0,0}
{$R-,S-,I-,D-,F+,V-,B-,N-,L+}
</i></font><font color="#FF0000"><b>Program </b></font>BinClock<font color="#000080">;
</font><font color="#FF0000"><b>Uses </b></font>DOS<font color="#000080">,</font>CRT<font color="#000080">;
</font><font color="#FF0000"><b>Var </b></font>Old_Keyb<font color="#000080">:</font>Pointer<font color="#000080">;
    </font>Keyz<font color="#000080">:</font><font color="#FF0000"><b>Set Of </b></font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">127</font><font color="#000080">;
    </font>Loop<font color="#000080">:</font>Byte<font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>STI<font color="#000080">;
 </font><font color="#FF0000"><b>Inline</b></font><font color="#000080">(</font><font color="#800000">$FB</font><font color="#000080">);

</font><font color="#FF0000"><b>Procedure </b></font>CLI<font color="#000080">;
 </font><font color="#FF0000"><b>Inline</b></font><font color="#000080">(</font><font color="#800000">$FA</font><font color="#000080">);

</font><font color="#FF0000"><b>Procedure </b></font>CallOld<font color="#000080">(</font>Sub<font color="#000080">:</font>Pointer<font color="#000080">);
 </font><font color="#FF0000"><b>Begin
  Inline</b></font><font color="#000080">(</font><font color="#800000">$9C</font><font color="#000080">/</font><font color="#800000">$FF</font><font color="#000080">/</font><font color="#800000">$5E</font><font color="#000080">/</font><font color="#800000">$06</font><font color="#000080">);
 </font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>My_Keyb<font color="#000080">;
 </font>Interrupt<font color="#000080">;
</font><font color="#FF0000"><b>Var </b></font>B<font color="#000080">:</font>Byte<font color="#000080">;
</font><font color="#FF0000"><b>Begin
 </b></font>CallOld<font color="#000080">(</font>Old_Keyb<font color="#000080">);
 </font>B<font color="#000080">:=</font>Port<font color="#000080">[</font><font color="#800000">$60</font><font color="#000080">];
 </font><font color="#FF0000"><b>If </b></font>B<font color="#000080">&gt;=</font><font color="#800000">$80 </font><font color="#FF0000"><b>Then
  </b></font>Keyz<font color="#000080">:=</font>Keyz<font color="#000080">-[</font>B <font color="#FF0000"><b>And </b></font><font color="#800000">$7F</font><font color="#000080">]
 </font><font color="#FF0000"><b>Else
  </b></font>Keyz<font color="#000080">:=</font>Keyz<font color="#000080">+[</font>B<font color="#000080">];
 </font>STI<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Begin
 </b></font>ClrScr<font color="#000080">;
 </font>Keyz<font color="#000080">:=[];
 </font>GetIntVec<font color="#000080">(</font><font color="#800000">$09</font><font color="#000080">,</font>Old_Keyb<font color="#000080">);
 </font>SetIntVec<font color="#000080">(</font><font color="#800000">$09</font><font color="#000080">,@</font>My_Keyb<font color="#000080">);
 </font><font color="#FF0000"><b>Repeat
  While </b></font>KeyPressed <font color="#FF0000"><b>Do
   If </b></font>ReadKey<font color="#000080">=</font><font color="#800000">#0 </font><font color="#FF0000"><b>Then</b></font><font color="#000080">;
  </font>GotoXY<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
  </font>ClrEol<font color="#000080">;
  </font><font color="#FF0000"><b>For </b></font>Loop<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>To </b></font><font color="#800000">127 </font><font color="#FF0000"><b>Do
   Begin
    If </b></font>Loop <font color="#FF0000"><b>In </b></font>Keyz <font color="#FF0000"><b>Then
     </b></font>Write<font color="#000080">(</font><font color="#800000">'*'</font><font color="#000080">,</font>Loop<font color="#000080">,</font><font color="#800000">'*'</font><font color="#000080">);
   </font><font color="#FF0000"><b>End</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>Until </b></font><font color="#800000">1 </font><font color="#FF0000"><b>In </b></font>Keyz<font color="#000080">;
</font><font color="#FF0000"><b>End</b></font><font color="#000080">.

</font><font color="#008000"><i>{
&gt; Did I miss something is KBD 101 class?  Could anyone here shed some light
&gt; on  this.. a lookup chart would be a great thing, but algorithms are
&gt; useful too ;)

each key has it's own number. On the origonal PC keyboard,you start at &lt;ESC&gt;
(1) and read across... &lt;!&gt;=2, &lt;@&gt;=3 (I've used shifted to diferentiate
between the key 2 and the scancode 2 etc), then down... but that got shifted
around... I usually use the above program to find the correct key, then code
it into my prog...
}</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to KEYBOARD SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0091.PAS">Original</a><b>]</b></p></body>
</html>
