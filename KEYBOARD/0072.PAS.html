<html>
<head><title> "Asm access to Keyboard" by IAN LIN</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to KEYBOARD SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0072.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
From: IAN LIN
Subj: keyboard buffer
---------------------------------------------------------------------------
 TH&gt; How do you write TO the keyboard buffer.

These are all procedures. You could easily rewrite them to be functions or
write functions that call these and use them.

High byte is scan code, low byte is character.
}

</i></font><font color="#FF0000"><b>Procedure </b></font>putkey<font color="#000080">(</font>key<font color="#000080">:</font>word<font color="#000080">);
 </font><font color="#FF0000"><b>assembler</b></font><font color="#000080">; </font><font color="#008000"><i>{PUTKEY}
 </i></font><font color="#FF0000"><b>asm</b></font><font color="#FF00FF">; mov ah,5; mov cx,key; int 16h;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#008000"><i>{To find out what ones belong to each key (E is for enhanced; the other will
filter enhanced keys): }

</i></font><font color="#FF0000"><b>Procedure </b></font>egetkey<font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>key<font color="#000080">:</font>word<font color="#000080">);
</font><font color="#FF0000"><b>Var </b></font>tmp<font color="#000080">:</font>word<font color="#000080">;
</font><font color="#FF0000"><b>Begin
 asm</b></font><font color="#FF00FF">; mov ah,10h; int 16h; mov tmp,ax; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font>key<font color="#000080">:=</font>tmp<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>getkey<font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>key<font color="#000080">:</font>word<font color="#000080">);
</font><font color="#FF0000"><b>Var </b></font>tmp<font color="#000080">:</font>word<font color="#000080">;
</font><font color="#FF0000"><b>Begin
 asm</b></font><font color="#FF00FF">; xor ah,ah; int 16h; mov tmp,ax; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
 </font>key<font color="#000080">:=</font>tmp<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to KEYBOARD SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0072.PAS">Original</a><b>]</b></p></body>
</html>
