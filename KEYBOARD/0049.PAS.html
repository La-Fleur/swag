<html>
<head><title> "Flush/Stuff Keyboard" by MARK OUELLET</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to KEYBOARD SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0049.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{From: MARK OUELLET}
{ FLUSH/STUFF Keyboard w/INT21}

</i></font><font color="#FF0000"><b>PROGRAM </b></font>StuffKbdTest<font color="#000080">;
</font><font color="#FF0000"><b>uses </b></font>dos<font color="#000080">;

  </font><font color="#FF0000"><b>procedure </b></font>FlushKbd<font color="#000080">; </font><font color="#FF0000"><b>Assembler</b></font><font color="#000080">;

    </font><font color="#FF0000"><b>asm
      </b></font><font color="#FF00FF">Mov AX, $0C00;
      Int 21h;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>procedure </b></font>StuffKbd<font color="#000080">(</font>S<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">);

        </font><font color="#FF0000"><b>var
      </b></font>Regs <font color="#000080">: </font>registers<font color="#000080">;
      </font>x <font color="#000080">: </font>byte<font color="#000080">;
      </font>BufferFull <font color="#000080">: </font>boolean<font color="#000080">;

    </font><font color="#FF0000"><b>begin
      </b></font>FlushKbd<font color="#000080">;
      </font>Inc<font color="#000080">(</font>S<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]);
      </font>S<font color="#000080">[</font>byte<font color="#000080">(</font>S<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">])] := </font><font color="#800000">#13</font><font color="#000080">;
      </font>x <font color="#000080">:= </font><font color="#800000">1</font><font color="#000080">;
      </font><font color="#FF0000"><b>repeat
        </b></font>Regs<font color="#000080">.</font>AH <font color="#000080">:= </font><font color="#800000">$05</font><font color="#000080">;
        </font>Regs<font color="#000080">.</font>CL <font color="#000080">:= </font>Byte<font color="#000080">(</font>S<font color="#000080">[</font>x<font color="#000080">]);
        </font>Intr<font color="#000080">(</font><font color="#800000">$16</font><font color="#000080">, </font>Regs<font color="#000080">);
        </font>BufferFull <font color="#000080">:= </font>boolean<font color="#000080">(</font>Regs<font color="#000080">.</font>AL<font color="#000080">);
        </font>inc<font color="#000080">(</font>x<font color="#000080">);
      </font><font color="#FF0000"><b>until </b></font>BufferFull <font color="#FF0000"><b>or </b></font><font color="#000080">(</font>x<font color="#000080">&gt;</font>byte<font color="#000080">(</font>S<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]));
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

  </font><font color="#FF0000"><b>begin
        </b></font>StuffKbd<font color="#000080">(</font><font color="#800000">'Dir C:\'</font><font color="#000080">);
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to KEYBOARD SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0049.PAS">Original</a><b>]</b></p></body>
</html>
