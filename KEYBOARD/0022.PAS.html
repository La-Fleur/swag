<html>
<head><title> "Trap PAUSE Key #2" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to KEYBOARD SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0022.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{GE&gt; Does anyone know how to disable the pause key?

 Here's one way, done in Assembly, With example Turbo Pascal code ...
}
(*******************************************************************)
 </i></font><font color="#FF0000"><b>Program </b></font>TestTrapPause<font color="#000080">;             </font><font color="#008000"><i>{ demo disabling the Pause key  }
 </i></font><font color="#FF0000"><b>Uses   </b></font>Crt<font color="#000080">,                        </font><font color="#008000"><i>{ import CheakBreak, KeyPressed }
        </i></font>Dos<font color="#000080">;                        </font><font color="#008000"><i>{ import GetIntVec, SetIntVec   }
 </i></font><font color="#FF0000"><b>Var    </b></font>old09Vector <font color="#000080">: </font>Pointer<font color="#000080">;      </font><font color="#008000"><i>{ to hold original ISR          }
        </i></font>loopc<font color="#000080">,                      </font><font color="#008000"><i>{ a loop count                  }
        </i></font>ppress      <font color="#000080">: </font>Word<font color="#000080">;         </font><font color="#008000"><i>{ counts Pause key presses      }
{-------------------------------------------------------------------}
{ the following Procedures|Functions mask &amp; count Pause keystrokes  }
 </i></font><font color="#FF0000"><b>Procedure </b></font>InitTrapPause<font color="#000080">( </font>oldVector <font color="#000080">: </font>Pointer <font color="#000080">);    </font><font color="#FF0000"><b>EXTERNAL</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>Procedure </b></font>TrapPause<font color="#000080">; </font>Interrupt<font color="#000080">;                    </font><font color="#FF0000"><b>EXTERNAL</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>Function  </b></font>PausePresses <font color="#000080">: </font>Word<font color="#000080">;                     </font><font color="#FF0000"><b>EXTERNAL</b></font><font color="#000080">;
 </font><font color="#FF0000"><b>Procedure </b></font>ForgetPaUses<font color="#000080">;                            </font><font color="#FF0000"><b>EXTERNAL</b></font><font color="#000080">;
 </font><font color="#008000"><i>{$L NOPAUSE.OBJ}                   { Assembly, Near calls          }
{-------------------------------------------------------------------}
 </i></font><font color="#FF0000"><b>begin
    </b></font>ClrScr<font color="#000080">;
    </font>CheckBreak <font color="#000080">:= </font>False<font color="#000080">;            </font><font color="#008000"><i>{ don't allow Ctrl-Break        }

    </i></font>GetIntVec<font color="#000080">( </font><font color="#800000">9</font><font color="#000080">, </font>old09Vector <font color="#000080">);    </font><font color="#008000"><i>{ get current keyboard ISR      }
    </i></font>InitTrapPause<font color="#000080">( </font>old09Vector <font color="#000080">);   </font><font color="#008000"><i>{ pass vector to TrapPause      }
    </i></font>SetIntVec<font color="#000080">( </font><font color="#800000">9</font><font color="#000080">, @</font>TrapPause <font color="#000080">);     </font><font color="#008000"><i>{ enable TrapPause ISR          }
    </i></font>ForgetPaUses<font color="#000080">;                   </font><font color="#008000"><i>{ zero the PausePresses counter }

    </i></font>loopc <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;                     </font><font color="#008000"><i>{ initialize                    }
    </i></font>WriteLn<font color="#000080">; </font>WriteLn<font color="#000080">( </font><font color="#800000">'Press the PAUSE key... '</font><font color="#000080">);

    </font><font color="#FF0000"><b>Repeat
        </b></font>WriteLn<font color="#000080">;
        </font>ppress <font color="#000080">:= </font>PausePresses<font color="#000080">;     </font><font color="#008000"><i>{ initial Pause press count     }
        </i></font><font color="#FF0000"><b>While </b></font><font color="#000080">(</font>ppress <font color="#000080">= </font>PausePresses<font color="#000080">) </font><font color="#FF0000"><b>and </b></font><font color="#000080">(</font><font color="#FF0000"><b>not </b></font>KeyPressed<font color="#000080">)
        </font><font color="#FF0000"><b>do begin
            </b></font>inC<font color="#000080">( </font>loopc <font color="#000080">); </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>loopc <font color="#000080">= </font><font color="#800000">65535</font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font>loopc <font color="#000080">:= </font><font color="#800000">0</font><font color="#000080">;
            </font>Write<font color="#000080">( </font>loopc<font color="#000080">:</font><font color="#800000">5</font><font color="#000080">, </font><font color="#800000">' you''ve pressed the Pause key ' </font><font color="#000080">);
            </font>Write<font color="#000080">( </font>ppress<font color="#000080">, </font><font color="#800000">' times'</font><font color="#000080">,</font><font color="#800000">#13 </font><font color="#000080">);
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{While}
    </i></font><font color="#FF0000"><b>Until </b></font>KeyPressed<font color="#000080">;

    </font>SetIntVec<font color="#000080">( </font><font color="#800000">9</font><font color="#000080">, </font>old09Vector <font color="#000080">);    </font><font color="#008000"><i>{ restore Pause &amp; release ISR   }

 </i></font><font color="#FF0000"><b>end </b></font><font color="#008000"><i>{TestTrapPause}</i></font><font color="#000080">.
</font><font color="#008000"><i>(*******************************************************************)

{ The following TP Program will create NOPAUSE.ARC, which contains
 NOPAUSE.OBJ ...

 Program A; Var G:File; Const V:Array [ 1..279 ] of Byte =(
26,8,78,79,80,65,85,83,69,46,79,66,74,0,94,248,0,0,0,43,26,67,140,78,
194,29,1,0,0,12,128,26,0,88,224,230,13,156,48,117,230,148,113,17,100,
74,19,47,150,14,0,0,64,96,200,19,34,69,136,96,146,136,162,13,0,1,2,2,
28,131,4,32,200,196,0,12,140,60,145,114,164,8,21,40,65,170,76,41,50,165,
204,68,6,48,101,22,129,34,133,230,204,41,96,38,54,72,226,36,9,21,42,82,
130,64,201,57,115,34,128,4,72,149,50,45,226,99,34,9,68,4,38,138,10,16,
13,84,28,0,1,38,46,226,102,99,209,17,1,46,70,77,44,123,132,64,218,137,
46,142,25,112,10,64,88,214,33,6,243,200,73,115,6,13,29,16,49,114,228,
144,1,226,136,156,50,103,222,200,201,3,98,138,11,43,124,221,148,65,200,
134,14,167,125,80,200,129,225,81,132,206,1,44,157,92,252,115,1,247,223,
92,0,176,64,152,3,1,250,25,0,72,6,92,132,154,56,44,238,105,218,125,56,
201,0,64,12,1,216,0,90,120,67,248,205,133,119,133,223,94,120,51,249,29,
(96 min left), (H)elp, More? 156,88,20,228,188,197,64,39,134,6,58,43,69,2,38,210,1,26,0);
 begin Assign(G,'NOPAUSE.ARC'); ReWrite(G,Sizeof(V));
 BlockWrite(G,V,1); Close(G); end (*Gbug1.5*).
}
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to KEYBOARD SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0022.PAS">Original</a><b>]</b></p></body>
</html>
