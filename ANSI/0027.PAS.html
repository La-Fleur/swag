<html>
<head><title> "ANSI Screen Dump" by GREG ESTABROOKS</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to ANSI SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0027.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
From: GREG ESTABROOKS
Subj: ANS-&gt;BIN
---------------------------------------------------------------------------
DT&gt;        I'm looking for some kinda code which will convert an ANSI file
DT&gt; to a raw binary file (&lt;-Or Something that can be directly written to
DT&gt; the screen, without decoding). Something which converts an ansi file, say
DT&gt;24-255 lines to an array which holds &lt;CHAR&gt;,&lt;ATTRIBUTE&gt;,&lt;CHAR&gt;,ect..just
DT&gt;like video memory. Can anybody help me out here?

        Just feed the ansi into the CON and then dump the contents of
        video memory to a file. Heres a demo of how to do it.

        NOTE: this does not check file IO so if the file doesn't exist
              it'll cause a runtime error.

        Call it like this:
             ANSDUMP  AnsiFile DumpFile
}
{***********************************************************************}
</i></font><font color="#FF0000"><b>PROGRAM </b></font>AnsiDump<font color="#000080">;               </font><font color="#008000"><i>{ Dec 09/93, Greg Estabrooks.           }
</i></font><font color="#FF0000"><b>USES </b></font>CRT<font color="#000080">;                       </font><font color="#008000"><i>{ IMPORT Clrscr,Writeln                 }
</i></font><font color="#FF0000"><b>VAR
   </b></font>Con<font color="#000080">,                         </font><font color="#008000"><i>{ File handle to the Console.           }
   </i></font>InFile <font color="#000080">:</font>TEXT<font color="#000080">;                </font><font color="#008000"><i>{ File that contains ANSI info.         }
   </i></font>OutFile<font color="#000080">:</font><font color="#FF0000"><b>FILE</b></font><font color="#000080">;                </font><font color="#008000"><i>{ File to send new info to.             }
   </i></font>BuffStr<font color="#000080">:</font><font color="#FF0000"><b>STRING</b></font><font color="#000080">;              </font><font color="#008000"><i>{ Holds string read from Ansi File.     }

</i></font><font color="#FF0000"><b>BEGIN
  </b></font>Clrscr<font color="#000080">;                       </font><font color="#008000"><i>{ Clear any screen clutter.             }
  </i></font>Assign<font color="#000080">(</font>InFile<font color="#000080">,</font>ParamStr<font color="#000080">(</font><font color="#800000">1</font><font color="#000080">));   </font><font color="#008000"><i>{ Open Ansi File.                       }
  </i></font>Reset<font color="#000080">(</font>InFile<font color="#000080">);
  </font>Assign<font color="#000080">(</font>Con<font color="#000080">,</font><font color="#800000">''</font><font color="#000080">);               </font><font color="#008000"><i>{ Assign Con to the Console.            }
  </i></font>ReWrite<font color="#000080">(</font>Con<font color="#000080">);                 </font><font color="#008000"><i>{ Set it for writing to.                }
  </i></font>Assign<font color="#000080">(</font>OutFile<font color="#000080">,</font>ParamStr<font color="#000080">(</font><font color="#800000">2</font><font color="#000080">));  </font><font color="#008000"><i>{ Open file to send dump to.            }
  </i></font>ReWrite<font color="#000080">(</font>OutFile<font color="#000080">);
  </font><font color="#FF0000"><b>WHILE NOT </b></font>Eof<font color="#000080">(</font>InFile<font color="#000080">) </font><font color="#FF0000"><b>DO      </b></font><font color="#008000"><i>{ Loop through entire ansi file.        }
   </i></font><font color="#FF0000"><b>BEGIN
     </b></font>Readln<font color="#000080">(</font>InFile<font color="#000080">,</font>BuffStr<font color="#000080">);    </font><font color="#008000"><i>{ Read line from file.                  }
     </i></font>Writeln<font color="#000080">(</font>Con<font color="#000080">,</font>BuffStr<font color="#000080">);      </font><font color="#008000"><i>{ Write line to console.                }
   </i></font><font color="#FF0000"><b>END</b></font><font color="#000080">;
                                </font><font color="#008000"><i>{ Now block write entire contents of text}
                                { video memory to file.                 }
  </i></font>BlockWrite<font color="#000080">(</font>OutFile<font color="#000080">,</font>MEM<font color="#000080">[</font><font color="#800000">$B800</font><font color="#000080">:</font><font color="#800000">0000</font><font color="#000080">],</font><font color="#800000">4000</font><font color="#000080">);
  </font>Close<font color="#000080">(</font>OutFile<font color="#000080">);               </font><font color="#008000"><i>{ Close dump file.                      }
  </i></font>Close<font color="#000080">(</font>Con<font color="#000080">);
  </font>Close<font color="#000080">(</font>InFile<font color="#000080">);                </font><font color="#008000"><i>{ Close ansi file.                      }
  </i></font>Readln<font color="#000080">;
</font><font color="#FF0000"><b>END</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to ANSI SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0027.PAS">Original</a><b>]</b></p></body>
</html>
