<html>
<head><title> "ANSI Display Unit" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to ANSI SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0003.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{
&gt;How do I make an ansi and put it in my Pascal File?  I know there is an
&gt;option to save as pascal, but it does not look like anything to me!
&gt;Any help is appreciated!

Here is a Program that will read an ANSI File into a buffer in 2k chunks
then Write it (to screen) Character by Character. BUT - it will Write
all ANSI-escape-sequences as StringS.

   Two reasons For this:

 1) I just 'feel happier' if each ANSI escape sequence is written to
 screen as a String instead of as individual Characters. (Its just an
 irrational 'thing' I have)

 2) By assembling all the Characters in the escape sequence together,
 it make its _easy_ to FILTER OUT all ANSI sequences if you want to just
 output plain black-and-white Text. This is For those people who for
 some strange reason would rather not have ANSI.SYS installed, but
 complain about getting 'garbage' Characters on the screen.

All you have to do to filter out the escape sequences is to
un-bracket the 'if AnsiDetected then' part.

if you want me to post 'Function AnsiDetected: Boolean' just let me
know.
}

</i></font><font color="#FF0000"><b>Program </b></font>ansiWrite<font color="#000080">;

</font><font color="#FF0000"><b>Const </b></font>esc <font color="#000080">= </font>chr<font color="#000080">(</font><font color="#800000">27</font><font color="#000080">);
      </font>termnChar<font color="#000080">: </font><font color="#FF0000"><b>SET of </b></font>Char <font color="#000080">=
                 [</font><font color="#800000">'f'</font><font color="#000080">,</font><font color="#800000">'A'</font><font color="#000080">..</font><font color="#800000">'D'</font><font color="#000080">,</font><font color="#800000">'H'</font><font color="#000080">,</font><font color="#800000">'s'</font><font color="#000080">,</font><font color="#800000">'u'</font><font color="#000080">,</font><font color="#800000">'J'</font><font color="#000080">,</font><font color="#800000">'K'</font><font color="#000080">,</font><font color="#800000">'l'</font><font color="#000080">..</font><font color="#800000">'n'</font><font color="#000080">,</font><font color="#800000">'h'</font><font color="#000080">];

</font><font color="#FF0000"><b>Var </b></font>f<font color="#000080">: </font><font color="#FF0000"><b>File</b></font><font color="#000080">;
    </font>buf<font color="#000080">:</font><font color="#FF0000"><b>Array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">2048</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>Char<font color="#000080">;
    </font>Numread<font color="#000080">: </font>Word<font color="#000080">;
    </font>num<font color="#000080">: </font>Integer<font color="#000080">;
    </font>escString<font color="#000080">: </font><font color="#FF0000"><b>String</b></font><font color="#000080">;
    </font>escseq<font color="#000080">: </font>Boolean<font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>Assign<font color="#000080">(</font>f<font color="#000080">,</font><font color="#800000">'FRINGE3.ANS'</font><font color="#000080">);
  </font>Reset<font color="#000080">(</font>f<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
  </font>escseq <font color="#000080">:= </font>False<font color="#000080">;
  </font>escString<font color="#000080">:=</font><font color="#800000">''</font><font color="#000080">;
  </font><font color="#FF0000"><b>Repeat
    </b></font>BlockRead<font color="#000080">(</font>f<font color="#000080">,</font>buf<font color="#000080">,</font>Sizeof<font color="#000080">(</font>Buf<font color="#000080">),</font>Numread<font color="#000080">);
    </font><font color="#008000"><i>{ Write Block to Screen }
    </i></font><font color="#FF0000"><b>For </b></font>NUM <font color="#000080">:= </font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>Numread <font color="#FF0000"><b>DO
    begin
      if </b></font>Buf<font color="#000080">[</font>Num<font color="#000080">] = </font>esc <font color="#FF0000"><b>then </b></font>escseq <font color="#000080">:= </font>True<font color="#000080">;
      </font><font color="#FF0000"><b>if </b></font>escseq<font color="#000080">=</font>True <font color="#FF0000"><b>then
      begin
        </b></font>escString<font color="#000080">:= </font>escString<font color="#000080">+</font>buf<font color="#000080">[</font>num<font color="#000080">];
        </font><font color="#FF0000"><b>if </b></font>Buf<font color="#000080">[</font>num<font color="#000080">] </font><font color="#FF0000"><b>in </b></font>termnChar  <font color="#FF0000"><b>then
        begin
          </b></font>escseq<font color="#000080">:=</font>False<font color="#000080">;
          </font><font color="#008000"><i>{if AnsiDetected then} </i></font>Write<font color="#000080">(</font>escString<font color="#000080">);
          </font>escString<font color="#000080">:=</font><font color="#800000">''
        </font><font color="#FF0000"><b>end
      end
      else </b></font>Write<font color="#000080">(</font>Buf<font color="#000080">[</font>num<font color="#000080">])
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ For }
  </i></font><font color="#FF0000"><b>Until </b></font>NumRead <font color="#000080">&lt; </font>SizeOf<font color="#000080">(</font>Buf<font color="#000080">);
  </font>close<font color="#000080">(</font>f<font color="#000080">)
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to ANSI SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0003.PAS">Original</a><b>]</b></p></body>
</html>
