<html>
<head><title> "SHOWANSI.PAS" by GUY MCLOUGHLIN</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to ANSI SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0017.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{===========================================================================
Date: 10-10-93 (13:21)
From: GUY MCLOUGHLIN
Subj: Ansi in TP 6.0
---------------------------------------------------------------------------}

(* Program to demonstrate how to do display ANSI files *)
 </i></font><font color="#FF0000"><b>program </b></font>ShowANSI<font color="#000080">;
 </font><font color="#FF0000"><b>uses
   </b></font>crt<font color="#000080">;       </font><font color="#008000"><i>(* Required for &quot;ClrScr&quot; and &quot;Delay&quot; routines.         *)

 </i></font><font color="#FF0000"><b>const        </b></font><font color="#008000"><i>(* ANSI display delay factor in 1/1000th's of a second *)
   </i></font>co_DelayFactor <font color="#000080">= </font><font color="#800000">40</font><font color="#000080">;

 </font><font color="#FF0000"><b>type         </b></font><font color="#008000"><i>(* Type definition.                                    *)
   </i></font>st_80 <font color="#000080">= </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">80</font><font color="#000080">];

   </font><font color="#008000"><i>(***** Check for I/O errors.                                       *)
   (*                                                                 *)
   </i></font><font color="#FF0000"><b>procedure </b></font>CheckErrors<font color="#000080">(</font>st_Msg <font color="#000080">: </font>st_80<font color="#000080">);
   </font><font color="#FF0000"><b>var </b></font>by_Temp <font color="#000080">: </font>byte<font color="#000080">;
   </font><font color="#FF0000"><b>begin
     </b></font>by_Temp <font color="#000080">:= </font>ioresult<font color="#000080">;
     </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>by_Temp <font color="#000080">&lt;&gt; </font><font color="#800000">0</font><font color="#000080">) </font><font color="#FF0000"><b>then
       begin
         </b></font>writeln<font color="#000080">(</font><font color="#800000">'Error = '</font><font color="#000080">, </font>by_Temp<font color="#000080">, </font><font color="#800000">' '</font><font color="#000080">, </font>st_Msg<font color="#000080">); </font>halt
       <font color="#FF0000"><b>end
   end</b></font><font color="#000080">;       </font><font color="#008000"><i>(* CheckErrors.                                         *)

 </i></font><font color="#FF0000"><b>var          </b></font><font color="#008000"><i>(* Temporary string varialble.                          *)
   </i></font>st_Temp   <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;

              </font><font color="#008000"><i>(* Temporary text file variable.                        *)
   </i></font>fite_Temp<font color="#000080">,
              </font><font color="#008000"><i>(* Text &quot;device-driver&quot;.                                *)
   </i></font>fite_ANSI <font color="#000080">: </font>text<font color="#000080">;

              </font><font color="#008000"><i>(* Main program execution block.                        *)
 </i></font><font color="#FF0000"><b>BEGIN
              </b></font><font color="#008000"><i>(* Assign &quot;text-device&quot; driver to standard output.      *)
   </i></font>assign<font color="#000080">(</font>fite_ANSI<font color="#000080">, </font><font color="#800000">''</font><font color="#000080">);

              </font><font color="#008000"><i>(* Attempt to open the ANSI &quot;text-device&quot; driver.       *)
   {$I-}
   </i></font>rewrite<font color="#000080">(</font>fite_ANSI<font color="#000080">);
   </font><font color="#008000"><i>{$I+}
              (* Check for I/O errors.                                *)
   </i></font>CheckErrors<font color="#000080">(</font><font color="#800000">'Opening ANSI device driver'</font><font color="#000080">);

              </font><font color="#008000"><i>(* Assign ANSI ART file to display.                     *)
   </i></font>assign<font color="#000080">(</font>fite_Temp<font color="#000080">, </font><font color="#800000">'TEST.ANS'</font><font color="#000080">);
   </font><font color="#008000"><i>{$I-}
   </i></font>reset<font color="#000080">(</font>fite_Temp<font color="#000080">);
   </font><font color="#008000"><i>{$I+}
              (* Check for I/O errors.                                *)
   </i></font>CheckErrors<font color="#000080">(</font><font color="#800000">'Opening TEST.ANS file'</font><font color="#000080">);

              </font><font color="#008000"><i>(* Clear the screen.                                    *)
   </i></font>clrscr<font color="#000080">;

              </font><font color="#008000"><i>(* Diplay the ANSI ART file. While the end of the       *)
              (* ANSI ART file has not been reached, do...            *)
   </i></font><font color="#FF0000"><b>while not </b></font>eof<font color="#000080">(</font>fite_Temp<font color="#000080">) </font><font color="#FF0000"><b>do
     begin
              </b></font><font color="#008000"><i>(* Read line of text from the ANSI ART file.            *)
       </i></font>readln<font color="#000080">(</font>fite_Temp<font color="#000080">, </font>st_Temp<font color="#000080">);

              </font><font color="#008000"><i>(* Check for I/O errors.                                *)
       </i></font>CheckErrors<font color="#000080">(</font><font color="#800000">'Reading from TEST.ANS file'</font><font color="#000080">);

              </font><font color="#008000"><i>(* Delay for co_DelayFactor milli-seconds.              *)
       </i></font>delay<font color="#000080">(</font>co_DelayFactor<font color="#000080">);

              </font><font color="#008000"><i>(* Write the line of ANSI text to the &quot;text-device      *)
              (* driver&quot;.                                             *)
       </i></font>writeln<font color="#000080">(</font>fite_ANSI<font color="#000080">, </font>st_Temp<font color="#000080">);

              </font><font color="#008000"><i>(* Check for I/O errors.                                *)
       </i></font>CheckErrors<font color="#000080">(</font><font color="#800000">'Writing to ANSI &quot;text-device driver&quot;'</font><font color="#000080">)
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

              </font><font color="#008000"><i>(* Close the ANSI ART text file.                        *)
   </i></font>close<font color="#000080">(</font>fite_Temp<font color="#000080">);

              </font><font color="#008000"><i>(* Check for I/O errors.                                *)
   </i></font>CheckErrors<font color="#000080">(</font><font color="#800000">'Closing TEST.ANS'</font><font color="#000080">);

              </font><font color="#008000"><i>(* Close the ANSI &quot;text device driver&quot;.                 *)
   </i></font>close<font color="#000080">(</font>fite_ANSI<font color="#000080">);

              </font><font color="#008000"><i>(* Check for I/O errors.                                *)
   </i></font>CheckErrors<font color="#000080">(</font><font color="#800000">'Closing ANSI &quot;text-device driver&quot;'</font><font color="#000080">)
 </font><font color="#FF0000"><b>END</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to ANSI SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0017.PAS">Original</a><b>]</b></p></body>
</html>
