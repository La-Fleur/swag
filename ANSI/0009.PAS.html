<html>
<head><title> "THEDRAW UNCRUNCH Image" by SWAG SUPPORT TEAM</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to ANSI SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0009.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code><font color="#008000"><i>{Reading in a thedraw image :)
}
</i></font><font color="#FF0000"><b>Procedure </b></font>UNCRUNCH <font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>Addr1<font color="#000080">,</font>Addr2<font color="#000080">; </font>BlkLen<font color="#000080">:</font>Integer<font color="#000080">);

</font><font color="#FF0000"><b>begin
  Inline </b></font><font color="#000080">(
    </font><font color="#800000">$1E</font><font color="#000080">/               </font><font color="#008000"><i>{       PUSH    DS             ;Save data segment.}
    </i></font><font color="#800000">$C5</font><font color="#000080">/</font><font color="#800000">$B6</font><font color="#000080">/</font>ADDR1<font color="#000080">/     </font><font color="#008000"><i>{       LDS     SI,[BP+Addr1]  ;Source Address}
    </i></font><font color="#800000">$C4</font><font color="#000080">/</font><font color="#800000">$BE</font><font color="#000080">/</font>ADDR2<font color="#000080">/     </font><font color="#008000"><i>{       LES     DI,[BP+Addr2]  ;Destination Addr}
    </i></font><font color="#800000">$8B</font><font color="#000080">/</font><font color="#800000">$8E</font><font color="#000080">/</font>BLKLEN<font color="#000080">/    </font><font color="#008000"><i>{       MOV     CX,[BP+BlkLen] ;Length of block}
    </i></font><font color="#800000">$E3</font><font color="#000080">/</font><font color="#800000">$5B</font><font color="#000080">/           </font><font color="#008000"><i>{       JCXZ    Done}
    </i></font><font color="#800000">$8B</font><font color="#000080">/</font><font color="#800000">$D7</font><font color="#000080">/           </font><font color="#008000"><i>{       MOV     DX,DI          ;Save X coordinate For
later.}
    </i></font><font color="#800000">$33</font><font color="#000080">/</font><font color="#800000">$C0</font><font color="#000080">/           </font><font color="#008000"><i>{       xor     AX,AX          ;Set Current attributes.}
    </i></font><font color="#800000">$FC</font><font color="#000080">/               </font><font color="#008000"><i>{       CLD}
    </i></font><font color="#800000">$AC</font><font color="#000080">/               </font><font color="#008000"><i>{LOOPA: LODSB                  ;Get next Character.}
    </i></font><font color="#800000">$3C</font><font color="#000080">/</font><font color="#800000">$20</font><font color="#000080">/           </font><font color="#008000"><i>{       CMP     AL,32          ;if a control Character,
jump.}
    </i></font><font color="#800000">$72</font><font color="#000080">/</font><font color="#800000">$05</font><font color="#000080">/           </font><font color="#008000"><i>{       JC      ForeGround}
    </i></font><font color="#800000">$AB</font><font color="#000080">/               </font><font color="#008000"><i>{       StoSW                  ;Save letter on screen.}
    </i></font><font color="#800000">$E2</font><font color="#000080">/</font><font color="#800000">$F8</font><font color="#000080">/           </font><font color="#008000"><i>{Next:  LOOP    LOOPA}
    </i></font><font color="#800000">$EB</font><font color="#000080">/</font><font color="#800000">$4C</font><font color="#000080">/           </font><font color="#008000"><i>{       JMP     Short Done}
                       {ForeGround:}
    </i></font><font color="#800000">$3C</font><font color="#000080">/</font><font color="#800000">$10</font><font color="#000080">/           </font><font color="#008000"><i>{       CMP     AL,16          ;if less than 16, then
change the}
    </i></font><font color="#800000">$73</font><font color="#000080">/</font><font color="#800000">$07</font><font color="#000080">/           </font><font color="#008000"><i>{       JNC     BackGround     ;Foreground color.
otherwise jump.}
    </i></font><font color="#800000">$80</font><font color="#000080">/</font><font color="#800000">$E4</font><font color="#000080">/</font><font color="#800000">$F0</font><font color="#000080">/       </font><font color="#008000"><i>{       and     AH,0F0H        ;Strip off old
Foreground.}
    </i></font><font color="#800000">$0A</font><font color="#000080">/</font><font color="#800000">$E0</font><font color="#000080">/           </font><font color="#008000"><i>{       or      AH,AL}
    </i></font><font color="#800000">$EB</font><font color="#000080">/</font><font color="#800000">$F1</font><font color="#000080">/           </font><font color="#008000"><i>{       JMP     Next}
                       {BackGround:}
    </i></font><font color="#800000">$3C</font><font color="#000080">/</font><font color="#800000">$18</font><font color="#000080">/           </font><font color="#008000"><i>{       CMP     AL,24          ;if less than 24, then
change the}
    </i></font><font color="#800000">$74</font><font color="#000080">/</font><font color="#800000">$13</font><font color="#000080">/           </font><font color="#008000"><i>{       JZ      NextLine       ;background color.  if
exactly 24,}
    </i></font><font color="#800000">$73</font><font color="#000080">/</font><font color="#800000">$19</font><font color="#000080">/           </font><font color="#008000"><i>{       JNC     FlashBittoggle ;then jump down to next
line.}
    </i></font><font color="#800000">$2C</font><font color="#000080">/</font><font color="#800000">$10</font><font color="#000080">/           </font><font color="#008000"><i>{       SUB     AL,16          ;otherwise jump to
multiple output}
    </i></font><font color="#800000">$02</font><font color="#000080">/</font><font color="#800000">$C0</font><font color="#000080">/           </font><font color="#008000"><i>{       ADD     AL,AL          ;routines.}
    </i></font><font color="#800000">$02</font><font color="#000080">/</font><font color="#800000">$C0</font><font color="#000080">/           </font><font color="#008000"><i>{       ADD     AL,AL}
    </i></font><font color="#800000">$02</font><font color="#000080">/</font><font color="#800000">$C0</font><font color="#000080">/           </font><font color="#008000"><i>{       ADD     AL,AL}
    </i></font><font color="#800000">$02</font><font color="#000080">/</font><font color="#800000">$C0</font><font color="#000080">/           </font><font color="#008000"><i>{       ADD     AL,AL}
    </i></font><font color="#800000">$80</font><font color="#000080">/</font><font color="#800000">$E4</font><font color="#000080">/</font><font color="#800000">$8F</font><font color="#000080">/       </font><font color="#008000"><i>{       and     AH,8FH         ;Strip off old
background.}
    </i></font><font color="#800000">$0A</font><font color="#000080">/</font><font color="#800000">$E0</font><font color="#000080">/           </font><font color="#008000"><i>{       or      AH,AL}
    </i></font><font color="#800000">$EB</font><font color="#000080">/</font><font color="#800000">$DA</font><font color="#000080">/           </font><font color="#008000"><i>{       JMP     Next}
                       {NextLine:}
    </i></font><font color="#800000">$81</font><font color="#000080">/</font><font color="#800000">$C2</font><font color="#000080">/</font><font color="#800000">$A0</font><font color="#000080">/</font><font color="#800000">$00</font><font color="#000080">/   </font><font color="#008000"><i>{       ADD     DX,160         ;if equal to 24,}
    </i></font><font color="#800000">$8B</font><font color="#000080">/</font><font color="#800000">$FA</font><font color="#000080">/           </font><font color="#008000"><i>{       MOV     DI,DX          ;then jump down to}
    </i></font><font color="#800000">$EB</font><font color="#000080">/</font><font color="#800000">$D2</font><font color="#000080">/           </font><font color="#008000"><i>{       JMP     Next           ;the next line.}
                       {FlashBittoggle:}
    </i></font><font color="#800000">$3C</font><font color="#000080">/</font><font color="#800000">$1B</font><font color="#000080">/           </font><font color="#008000"><i>{       CMP     AL,27          ;Does user want to toggle
the blink}
    </i></font><font color="#800000">$72</font><font color="#000080">/</font><font color="#800000">$07</font><font color="#000080">/           </font><font color="#008000"><i>{       JC      MultiOutput    ;attribute?}
    </i></font><font color="#800000">$75</font><font color="#000080">/</font><font color="#800000">$CC</font><font color="#000080">/           </font><font color="#008000"><i>{       JNZ     Next}
    </i></font><font color="#800000">$80</font><font color="#000080">/</font><font color="#800000">$F4</font><font color="#000080">/</font><font color="#800000">$80</font><font color="#000080">/       </font><font color="#008000"><i>{       xor     AH,128         ;Done.}
    </i></font><font color="#800000">$EB</font><font color="#000080">/</font><font color="#800000">$C7</font><font color="#000080">/           </font><font color="#008000"><i>{       JMP     Next}
                       {MultiOutput:}
    </i></font><font color="#800000">$3C</font><font color="#000080">/</font><font color="#800000">$19</font><font color="#000080">/           </font><font color="#008000"><i>{       CMP     AL,25          ;Set Z flag if
multi-space output.}
    </i></font><font color="#800000">$8B</font><font color="#000080">/</font><font color="#800000">$D9</font><font color="#000080">/           </font><font color="#008000"><i>{       MOV     BX,CX          ;Save main counter.}
    </i></font><font color="#800000">$AC</font><font color="#000080">/               </font><font color="#008000"><i>{       LODSB                  ;Get count of number of
times}
    </i></font><font color="#800000">$8A</font><font color="#000080">/</font><font color="#800000">$C8</font><font color="#000080">/           </font><font color="#008000"><i>{       MOV     CL,AL          ;to display Character.}
    </i></font><font color="#800000">$B0</font><font color="#000080">/</font><font color="#800000">$20</font><font color="#000080">/           </font><font color="#008000"><i>{       MOV     AL,32}
    </i></font><font color="#800000">$74</font><font color="#000080">/</font><font color="#800000">$02</font><font color="#000080">/           </font><font color="#008000"><i>{       JZ      StartOutput    ;Jump here if displaying
spaces.}
    </i></font><font color="#800000">$AC</font><font color="#000080">/               </font><font color="#008000"><i>{       LODSB                  ;otherwise get Character
to use.}
    </i></font><font color="#800000">$4B</font><font color="#000080">/               </font><font color="#008000"><i>{       DEC     BX             ;Adjust main counter.}
                       {StartOutput:}
    </i></font><font color="#800000">$32</font><font color="#000080">/</font><font color="#800000">$ED</font><font color="#000080">/           </font><font color="#008000"><i>{       xor     CH,CH}
    </i></font><font color="#800000">$41</font><font color="#000080">/               </font><font color="#008000"><i>{       inC     CX}
    </i></font><font color="#800000">$F3</font><font color="#000080">/</font><font color="#800000">$AB</font><font color="#000080">/           </font><font color="#008000"><i>{       REP StoSW}
    </i></font><font color="#800000">$8B</font><font color="#000080">/</font><font color="#800000">$CB</font><font color="#000080">/           </font><font color="#008000"><i>{       MOV     CX,BX}
    </i></font><font color="#800000">$49</font><font color="#000080">/               </font><font color="#008000"><i>{       DEC     CX             ;Adjust main counter.}
    </i></font><font color="#800000">$E0</font><font color="#000080">/</font><font color="#800000">$AA</font><font color="#000080">/           </font><font color="#008000"><i>{       LOOPNZ  LOOPA          ;Loop if anything else to
do...}
    </i></font><font color="#800000">$1F</font><font color="#000080">);              </font><font color="#008000"><i>{Done:  POP     DS             ;Restore data segment.}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{UNCRUNCH}
</i></font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to ANSI SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0009.PAS">Original</a><b>]</b></p></body>
</html>
